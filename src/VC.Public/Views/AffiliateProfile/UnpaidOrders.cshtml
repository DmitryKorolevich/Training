@model IList<VitalChoice.Infrastructure.Domain.Transfer.Affiliates.OrderPaymentListItemModel>

@section Meta {
	<title>Vital Choice | Current Unpaid Orders</title>
}

<div class="working-area-holder">
	<div class="left-pane clean-border">
		@await Component.InvokeAsync("AffiliateProfileSidebar")
	</div>
	<div class="right-pane clean-indent unpaid-orders">
		<div class="border-form-left">
			<h4>Current Unpaid Orders</h4>
            <span><span class="note">*</span> = new customer order</span>
			<table class="standard-table">
				<thead>
					<tr>
						<th>
							Date
						</th>
                        <th>
                            Order Number
                        </th>
                        <th class="align-right">
                            Discounted Subtotal
                        </th>
						<th class="align-right">
                            Commission
                        </th>
					</tr>
				</thead>
				<tbody>
                @if (Model.Count > 0)
                {
					foreach (var item in Model)
					{
						<tr>
							<td>@item.DateCreated.ToString("MM/yyyy")</td>
                            <td>
                                @item.IdOrder
                                @if(item.NewCustomerOrder)
                                {
                                    <span class="note">*</span>
                                }
                            </td>
                            <td class="align-right">@item.DiscountedProductsSubtotal.ToString("C2")</td>
                            <td class="align-right">@item.Commission.ToString("C2")</td>
						</tr>
					}	
                }
				</tbody>
			</table>
            @if (Model.Count > 0)
            {
                <div class="total margin-top-small">
                    <strong>Total Commissions: </strong>
                    <span> @Model.Sum(p=>p.Commission).ToString("C2")</span>
                </div>
            }
		</div>
	</div>
</div>