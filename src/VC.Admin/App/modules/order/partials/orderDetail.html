<div class="container-fluid order-edit">
    <div class="left-pane-controls">
        <div class="well container-fluid">
            <div>
                <button data-ng-click="save()" class="btn btn-success width-160px" unsaved-warning-clear>Save</button>
            </div>
            <div class="btn-group margin-top-10px">
                <button ui-sref="index.oneCol.manageOrders" class="btn btn-default width-160px" unsaved-warning-clear>Cancel</button>
            </div>
            <div class="margin-top-10px">
                <button class="btn btn-primary width-160px" ui-sref="index.oneCol.manageOrders">Manage All</button>
            </div>
            <div class="margin-top-10px">
                <button class="btn btn-info width-160px" data-ng-if="validatePermission(1)" data-ng-click="goToCustomer();">Manage Customer</button>
            </div>
            <div data-ng-show="currentCustomer && order.Id && options.oldOrderStatus!=1 && options.oldOrderStatus!=4" class="margin-top-10px">
                <button class="btn btn-purple width-160px" data-ng-click="sendOrderConfirmationEmail();">Resend Order Conf</button>
            </div>
            <div data-ng-show="currentCustomer && order.Id && order.CombinedEditOrderStatus==3" class="margin-top-10px">
                <button class="btn btn-purple width-160px" data-ng-click="sendOrderShippingConfirmationEmail();">Resend Ship Conf</button>
            </div>
        </div>
        <div ng-controller="objectHistorySectionController" onload="name = 'History'" data-ng-include="'app/modules/order/partials/orderObjectHistorySection.html'"></div>
    </div>
    <div class="right-pane-main">
        <div class="container-fluid">
            <div class="row">
                <span class="legend top">
                    <span data-ng-if="legend.CustomerName" class="item">Customer: <strong>{{legend.CustomerName}}</strong></span>
                    <span data-ng-if="legend.CustomerId" class="item">Customer ID: <strong>{{legend.CustomerId}}</strong></span>
                    <span data-ng-if="legend.OrderId" class="item">Order ID: <strong>{{legend.OrderId}}</strong></span>
                    <span data-ng-if="legend.OrderDate" class="item">Order Date: <strong>{{::legend.OrderDate | date:"MM/dd/yy"}} {{::legend.OrderDate | date:"h:mm a"}}</strong></span>
                    <span data-ng-if="legend.OrderStatus" class="item">Status: <strong>{{legend.OrderStatus}}</strong></span>
                </span>
            </div>
            <div class="row">
                <uib-tabset>
                    <uib-tab heading="{{mainTab.name}}" active="mainTab.active">
                        <div class="container container-left xbig-container">
                            <div class="well row">
                                <spinner-overlay data-loading="addEditTracker.active()">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="options-row form-horizontal">
                                                <label class="checkbox-inline">
                                                    <input type="checkbox" data-ng-model="order.OnHold" data-ng-disabled="orderEditDisabled">Hold Order
                                                    <i class="fa fa-pause"></i>
                                                </label>
                                                <div data-ng-if="order.IdObjectType==1 || order.IdObjectType==2" class="inline-block">
                                                    <form class="form-horizontal" name="forms.topForm" data-ng-submit="save()" data-ng-class="{submitted: forms.topForm.submitted}" novalidate unsaved-warning-form>
                                                        <label data-ng-if="autoShipOrderOptionShow" class="checkbox-inline">
                                                            <input type="checkbox" data-ng-model="order.IdObjectType" data-ng-change="requestRecalculate()" ng-true-value="2" ng-false-value="1" data-ng-disabled="orderEditDisabled">Auto-Ship Order
                                                            <i class="fa fa-history"></i>
                                                        </label>
                                                        <div data-ng-if="autoShipOrderOptionShow" class="auto-ship-frequency">
                                                            <select data-ng-if="order.IdObjectType == 2" data-ng-change="requestRecalculate()" class="form-control margin-top-15px" name="AutoShipFrequency" data-ng-model="order.AutoShipFrequency" ng-options="autoShipOrderFrequency.Key as autoShipOrderFrequency.Text for autoShipOrderFrequency in autoShipOrderFrequencies" required data-ng-disabled="orderEditDisabled">
                                                                <option value="" selected hidden />
                                                            </select>
                                                            <div class="error-container" ng-show="forms.topForm.submitted && forms.topForm.AutoShipFrequency.$invalid">
                                                                <small class="error" ng-show="forms.topForm.AutoShipFrequency.$error.required">{{getValidationMessage("ValidationMessages.FieldRequired","Frequency")}}</small>
                                                            </div>
                                                        </div>
                                                    </form>
                                                </div>
                                                <label data-ng-if="order.IdObjectType!=3" class="checkbox-inline">
                                                    <input type="checkbox" data-ng-model="order.GiftOrder" data-ng-disabled="orderEditDisabled" data-ng-change="giftOrderChanged()">Gift Order
                                                    <i class="fa fa-gift"></i>
                                                </label>
                                                <label data-ng-if="order.IdObjectType!=3" class="checkbox-inline">
                                                    <input type="checkbox" data-ng-model="order.MailOrder" data-ng-disabled="orderEditDisabled">Mail Order
                                                    <i class="fa fa-envelope"></i>
                                                </label>
                                                <label data-ng-if="order.Guest" class="checkbox-inline guest">
                                                    Guest Checkout
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-md-12 products-buttons">
                                            <button data-ng-click="productAdd()" class="btn btn-primary-orange width-160px" data-ng-if="!orderEditDisabled">Add Product</button>
                                            <button data-ng-click="topPurchasedProducts()" class="btn btn-info btn-right width-200px" data-ng-if="!orderEditDisabled">Top Purchased Products</button>
                                        </div>
                                        <div class="col-md-12 form-horizontal products">
                                            <table class="table table-striped">
                                                <tbody>
                                                    <tr data-ng-class="{warning: (item.ErrorMessages && item.ErrorMessages.length>0) || (item.ClientMessages && item.ClientMessages.length>0)}" data-ng-repeat-start="item in order.SkuOrdereds">
                                                        <td class="sku">
                                                            <div class="input-group autocomplete">
                                                                <input type="text" name="SKU{{$index}}" class="form-control" placeholder="SKU" data-ng-model="item.Code"
                                                                       typeahead-min-length="1" uib-typeahead="sku.Code as sku.Code for sku in getSKUsBySKU($viewValue)" typeahead-loading="loadingSKUsBySKU"
                                                                       typeahead-on-select="skuChanged($index)" data-ng-blur="skuChanged($index)"
                                                                       typeahead-wait-ms="100" data-ng-disabled="orderEditDisabled">
                                                            </div>
                                                        </td>
                                                        <td class="type">
                                                            <span data-ng-if="item.IdProductType==2" class="perishable">P</span>
                                                            <span data-ng-if="item.IdProductType==1" class="not-perishable">NP</span>
                                                            <span data-ng-if="item.IdProductType==3" class="perishable">eGC</span>
                                                            <span data-ng-if="item.IdProductType==4" class="perishable">GC</span>
                                                        </td>
                                                        <td class="qty">
                                                            <input name="QTY{{$index}}" class="form-control" placeholder="QTY" numbers-only numbers-only-deny-zero min="1" max="1000" data-ng-model="item.QTY" data-ng-blur="requestRecalculate()" data-ng-disabled="orderEditDisabled">
                                                        </td>
                                                        <td class="product-name">
                                                            <div class="input-group autocomplete">
                                                                <input type="text" name="ProductName{{$index}}" class="form-control" placeholder="Product Name" data-ng-model="item.ProductName"
                                                                       typeahead-min-length="1" uib-typeahead="sku.DescriptionName as sku.DescriptionName for sku in getSKUsByProductName($viewValue)" typeahead-loading="loadingSKUsByProductNane"
                                                                       typeahead-on-select="productNameChanged($index)" typeahead-wait-ms="100" data-ng-disabled="orderEditDisabled">
                                                            </div>
                                                            <div data-ng-if="item.GCCodes" class="input-group">
                                                                <span data-ng-repeat="gc in item.GCCodes"><em>GC Code: {{gc}}</em><br /></span>
                                                            </div>
                                                        </td>
                                                        <td class="price">
                                                            <div class="col-md-12 padding-0px">
                                                                <div class="input-group">
                                                                    <span class="input-group-addon">$</span>
                                                                    <input type="text" name="Price{{$index}}" class="form-control" placeholder="Price" money min="0.00" max="100000" data-ng-model="item.Price" data-ng-blur="requestRecalculate()" data-ng-disabled="orderEditDisabled">
                                                                </div>
                                                            </div>
                                                        </td>
                                                        <td class="amount">
                                                            <div class="amount">{{item.Amount | currency}}</div>
                                                        </td>
                                                        <td class="del">
                                                            <a class="btn btn-danger btn-xs" title="Delete" data-ng-click="productDelete($index);" data-ng-disabled="orderEditDisabled" data-ng-if="!orderEditDisabled"><i class="glyphicon glyphicon-remove"></i></a>
                                                        </td>
                                                    </tr>
                                                    <tr data-ng-class="{warning: messageItem.MessageLevel==0, 'message-warning': messageItem.MessageLevel==1, 'message-info': messageItem.MessageLevel==2 }" data-ng-repeat="messageItem in item.Messages">
                                                        <td colspan="7">
                                                            <strong class="message">{{messageItem.Message}}</strong>
                                                        </td>
                                                    </tr>
                                                    <tr data-ng-repeat-end class="warning" data-ng-if="item.ClientMessages && item.ClientMessages.length>0">
                                                        <td colspan="7">
                                                            <strong class="message" data-ng-repeat="message in item.ClientMessages">{{message}}</strong>
                                                        </td>
                                                    </tr>
                                                    <tr class="warning" data-ng-if="productsPerishableThresholdIssue && !options.ignoneMinimumPerishableThreshold">
                                                        <td colspan="7">
                                                            <label class="perishable-threshold-message">
                                                                <strong>{{minimumPerishableThreshold | currency}} minimum perishable threshold not met. Override</strong>
                                                                <input type="checkbox" data-ng-model="options.ignoneMinimumPerishableThreshold" data-ng-disabled="orderEditDisabled">
                                                            </label>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                        <div data-ng-if="order.PromoSkus && order.PromoSkus.length>0" class="col-md-12 form-horizontal products promo">
                                            <span class="legend">Promo Products</span>
                                            <table class="table table-striped">
                                                <tbody>
                                                    <tr data-ng-class="{warning: item.ErrorMessages && item.ErrorMessages.length>0}" data-ng-repeat-start="item in order.PromoSkus">
                                                        <td class="sku">
                                                            <div class="input-group autocomplete">
                                                                <input type="text" name="SKU{{$index}}" class="form-control" placeholder="SKU" data-ng-model="item.Code" readonly>
                                                            </div>
                                                        </td>
                                                        <td class="type">
                                                            <span data-ng-if="item.IdProductType==2" class="perishable">P</span>
                                                            <span data-ng-if="item.IdProductType==1" class="not-perishable">NP</span>
                                                            <span data-ng-if="item.IdProductType==3" class="perishable">eGC</span>
                                                            <span data-ng-if="item.IdProductType==4" class="perishable">GC</span>
                                                        </td>
                                                        <td class="qty">
                                                            <input name="QTY{{$index}}" class="form-control" placeholder="QTY" numbers-only data-ng-model="item.QTY" readonly>
                                                        </td>
                                                        <td class="product-name">
                                                            <div class="input-group autocomplete">
                                                                <input type="text" name="ProductName{{$index}}" class="form-control" placeholder="Product Name" data-ng-model="item.ProductName" readonly />
                                                            </div>
                                                        </td>
                                                        <td class="price">
                                                            <div class="col-md-12 padding-0px">
                                                                <div class="input-group">
                                                                    <span class="input-group-addon">$</span>
                                                                    <input type="text" name="Price{{$index}}" class="form-control" placeholder="Price" money data-ng-model="item.Price" readonly>
                                                                </div>
                                                            </div>
                                                        </td>
                                                        <td class="amount">
                                                            <div class="amount">{{item.Amount | currency}}</div>
                                                        </td>
                                                        <td class="enabled">
                                                            <input type="checkbox" data-ng-model="item.IsEnabled" data-ng-disabled="!item.IsAllowDisable || orderEditDisabled" data-ng-change="requestRecalculate()">
                                                        </td>
                                                    </tr>
                                                    <tr data-ng-repeat-end data-ng-class="{warning: messageItem.MessageLevel==0, 'message-warning': messageItem.MessageLevel==1, 'message-info': messageItem.MessageLevel==2 }" data-ng-repeat="messageItem in item.Messages">
                                                        <td colspan="7">
                                                            <strong class="message">{{messageItem.Message}}</strong>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                        <div class="col-md-6 left-section">
                                            <form class="form-horizontal" name="forms.mainForm" data-ng-submit="save()" data-ng-class="{submitted: forms.mainForm.submitted}" novalidate unsaved-warning-form>
                                                <fieldset>
                                                    <div class="form-group">
                                                        <label class="col-md-3 control-label">Source</label>
                                                        <div data-ng-if="currentCustomer.SourceValue" class="col-md-9 form-control-static">
                                                            <span>{{currentCustomer.SourceValue}}</span>
                                                        </div>
                                                        <div data-ng-if="!currentCustomer.SourceValue" class="col-md-9">
                                                            <select class="form-control" name="Source" data-ng-model="currentCustomer.Source" ng-options="source.Key as source.Text for source in orderSources" data-ng-required="!order.OnHold" data-ng-disabled="orderEditDisabled">
                                                                <option value="" selected hidden />
                                                            </select>
                                                            <div class="error-container" ng-show="forms.mainForm.submitted && forms.mainForm.Source.$invalid">
                                                                <small class="error" ng-show="forms.mainForm.Source.$error.required">{{getValidationMessage("ValidationMessages.FieldRequired","Source")}}</small>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div data-ng-if="!currentCustomer.SourceValue && currentCustomer.Source && (currentCustomer.Source==4 || currentCustomer.Source==10)" class="form-group">
                                                        <label class="col-md-3 control-label">Details</label>
                                                        <div class="col-md-9">
                                                            <input data-ng-if="currentCustomer.Source==10" name="SourceDetailsText" class="form-control" placeholder="Details" data-ng-model="currentCustomer.SourceDetails" data-ng-required="!order.OnHold" data-ng-disabled="orderEditDisabled">
                                                            <div class="error-container" ng-show="forms.mainForm.submitted && forms.mainForm.SourceDetailsText.$invalid">
                                                                <small class="error" ng-show="forms.mainForm.SourceDetailsText.$error.required">{{getValidationMessage("ValidationMessages.FieldRequired","Details")}}</small>
                                                            </div>
                                                            <select data-ng-if="currentCustomer.Source==4" class="form-control" name="SourceDetailsCelebrity" data-ng-model="currentCustomer.SourceDetails" ng-options="sourceCelebrity.Text as sourceCelebrity.Text for sourceCelebrity in orderSourcesCelebrityHealthAdvocate" data-ng-required="!order.OnHold" data-ng-disabled="orderEditDisabled">
                                                                <option value="" selected hidden />
                                                            </select>
                                                            <div class="error-container" ng-show="forms.mainForm.submitted && forms.mainForm.SourceDetailsCelebrity.$invalid">
                                                                <small class="error" ng-show="forms.mainForm.SourceDetailsCelebrity.$error.required">{{getValidationMessage("ValidationMessages.FieldRequired","Details")}}</small>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div data-ng-if="currentCustomer.CustomerType == 2 && order.IdObjectType!=4" class="form-group">
                                                        <label class="col-md-3 control-label">PO#</label>
                                                        <div class="col-md-9">
                                                            <input name="PoNumber" class="form-control" placeholder="PO#" data-ng-model="order.PoNumber" data-ng-required="!order.OnHold" data-ng-disabled="orderEditDisabled">
                                                            <div class="error-container" ng-show="forms.mainForm.submitted && forms.mainForm.PoNumber.$invalid">
                                                                <small class="error" ng-show="forms.mainForm.PoNumber.$error.required">{{getValidationMessage("ValidationMessages.FieldRequired","#PO")}}</small>
                                                                <small class="error" ng-show="forms.mainForm.PoNumber.$error.server">{{serverMessages.GetMessage('PoNumber')}}</small>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="col-md-3 control-label">Key Code</label>
                                                        <div class="col-md-9">
                                                            <input name="KeyCode" class="form-control" placeholder="Key Code" data-ng-model="order.KeyCode" data-ng-required="!order.OnHold" data-ng-disabled="orderEditDisabled">
                                                            <div class="error-container" ng-show="forms.mainForm.submitted && forms.mainForm.KeyCode.$invalid">
                                                                <small class="error" ng-show="forms.mainForm.KeyCode.$error.required">{{getValidationMessage("ValidationMessages.FieldRequired","Key Code")}}</small>
                                                                <small class="error" ng-show="forms.mainForm.KeyCode.$error.server">{{serverMessages.GetMessage('KeyCode')}}</small>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div data-ng-hide="order.IdObjectType==2">
                                                        <span class="legend">Ship Delay</span>
                                                        <div class="form-group">
                                                            <label class="col-md-12 control-label left">Ship Delay Order?</label>
                                                            <div class="col-md-12">
                                                                <label class="radio-inline"><input data-ng-model="order.ShipDelayType" name="ShipDelayType" value="0" type="radio" data-ng-disabled="orderEditDisabled">None</label>
                                                                <label class="radio-inline"><input data-ng-model="order.ShipDelayType" name="ShipDelayType" value="1" type="radio" data-ng-disabled="orderEditDisabled">Entire Order</label>
                                                                <label data-ng-if="order.ShouldSplit && order.IdObjectType!=3" class="radio-inline"><input data-ng-model="order.ShipDelayType" name="ShipDelayType" value="2" type="radio" data-ng-disabled="orderEditDisabled">Perishable & Non-Perishable</label>
                                                            </div>
                                                        </div>
                                                        <div data-ng-if="order.ShipDelayType==1" class="form-group">
                                                            <label for="date" class="col-md-6 control-label">Ship Date</label>
                                                            <div class="col-md-6">
                                                                <p class="input-group">
                                                                    <input type="text" name="ShipDelayDate" class="form-control" uib-datepicker-popup="dd-MMM-yyyy" ng-model="order.ShipDelayDate" is-open="shipDelayDateOpened" required data-ng-disabled="orderEditDisabled" />
                                                                    <span class="input-group-btn">
                                                                        <button type="button" class="btn btn-default" ng-disabled="false" ng-click="stopPropagation($event); shipDelayDateOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button>
                                                                    </span>
                                                                </p>
                                                                <div class="error-container" ng-show="forms.mainForm.submitted && forms.mainForm.ShipDelayDate.$invalid">
                                                                    <small class="error" ng-show="forms.mainForm.ShipDelayDate.$error.required">{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Date")}}</small>
                                                                    <small class="error" ng-show="forms.mainForm.ShipDelayDate.$error.server">{{serverMessages.GetMessage('ShipDelayDate')}}</small>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div data-ng-if="order.ShipDelayType==2 && order.ShouldSplit" class="form-group">
                                                        <label for="date" class="col-md-6 control-label">Perishable Ship Date</label>
                                                        <div class="col-md-6">
                                                            <p class="input-group">
                                                                <input type="text" name="ShipDelayDateP" class="form-control" uib-datepicker-popup="dd-MMM-yyyy" ng-model="order.ShipDelayDateP" is-open="shipDelayDatePOpened" data-ng-disabled="orderEditDisabled" />
                                                                <span class="input-group-btn">
                                                                    <button type="button" class="btn btn-default" ng-disabled="false" ng-click="stopPropagation($event); shipDelayDatePOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button>
                                                                </span>
                                                            </p>
                                                            <div class="error-container" ng-show="forms.mainForm.submitted && forms.mainForm.ShipDelayDateP.$invalid">
                                                                <small class="error" ng-show="forms.mainForm.ShipDelayDateP.$error.required">{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Date")}}</small>
                                                                <small class="error" ng-show="forms.mainForm.ShipDelayDateP.$error.server">{{serverMessages.GetMessage('ShipDelayDateP')}}</small>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div data-ng-if="order.ShipDelayType==2 && order.ShouldSplit" class="form-group">
                                                        <label for="date" class="col-md-6 control-label">Non-Perishable Ship Date</label>
                                                        <div class="col-md-6">
                                                            <p class="input-group">
                                                                <input type="text" name="ShipDelayDateNP" class="form-control" uib-datepicker-popup="dd-MMM-yyyy" ng-model="order.ShipDelayDateNP" is-open="shipDelayDateNPOpened" data-ng-disabled="orderEditDisabled" />
                                                                <span class="input-group-btn">
                                                                    <button type="button" class="btn btn-default" ng-disabled="false" ng-click="stopPropagation($event); shipDelayDateNPOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button>
                                                                </span>
                                                            </p>
                                                            <div class="error-container" ng-show="forms.mainForm.submitted && forms.mainForm.ShipDelayDateNP.$invalid">
                                                                <small class="error" ng-show="forms.mainForm.ShipDelayDateNP.$error.required">{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Date")}}</small>
                                                                <small class="error" ng-show="forms.mainForm.ShipDelayDateNP.$error.server">{{serverMessages.GetMessage('ShipDelayDateNP')}}</small>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <span class="legend">Notes</span>
                                                    <div class="form-group">
                                                        <label class="col-md-12 control-label left">Order Specific Notes (*Will appear on invoice)</label>
                                                        <div class="col-md-12">
                                                            <textarea type="text" name="OrderNotes" class="form-control" placeholder="Order Specific Notes" rows="5" data-ng-model="order.OrderNotes" data-ng-disabled="orderEditDisabled"></textarea>
                                                            <div class="error-container" ng-show="forms.mainForm.submitted && forms.mainForm.OrderNotes.$invalid">
                                                                <small class="error" ng-show="forms.mainForm.OrderNotes.$error.server">{{serverMessages.GetMessage('OrderNotes')}}</small>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div data-ng-if="order.GiftOrder" class="form-group">
                                                        <label class="col-md-12 control-label left">Gift Message (*Will appear on invoice)</label>
                                                        <div class="col-md-12">
                                                            <textarea type="text" name="GiftMessage" class="form-control" placeholder="Gift Message" rows="5" data-ng-model="order.GiftMessage" data-ng-disabled="orderEditDisabled"></textarea>
                                                            <div class="error-container" ng-show="forms.mainForm.submitted && forms.mainForm.GiftMessage.$invalid">
                                                                <small class="error" ng-show="forms.mainForm.GiftMessage.$error.server">{{serverMessages.GetMessage('GiftMessage')}}</small>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="col-md-12 control-label left">Delivery Instructions (*Prints to Shipping Label):</label>
                                                        <div class="col-md-12">
                                                            <textarea data-ng-if="!id" type="text" name="DeliveryInstructions" class="form-control" rows="5" data-ng-model="buildShippingAddressForPartial(currentCustomer.Shipping, shippingAddressTab.AddressIndex, order.OnHold && !order.UpdateShippingAddressForCustomer, order && true).Address.DeliveryInstructions" data-ng-disabled="true"></textarea>
                                                            <textarea data-ng-if="id" type="text" name="DeliveryInstructions" class="form-control" rows="5" data-ng-model="buildOrderShippingAddressForPartial(order.OnHold && !order.UpdateShippingAddressForCustomer).Address.DeliveryInstructions" data-ng-disabled="true"></textarea>
                                                        </div>
                                                    </div>

                                                    <span data-ng-if="options.BrontoSubscribedStatusLoaded" class="legend">Newsletter</span>
                                                    <div data-ng-if="options.BrontoSubscribedStatusLoaded" class="form-group">
                                                        <div class="col-md-12">
                                                            <div class="checkbox">
                                                                <label>
                                                                    <input type="checkbox" name="BrontoSubscribedStatus" data-ng-model="options.BrontoSubscribedStatus" data-ng-disabled="orderEditDisabled" /> Sign up for e-newsletter and receive Bonus Offers, Sale Alerts, Recipes, and Health News
                                                                </label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </fieldset>
                                            </form>
                                        </div>
                                        <div class="col-md-6 right-section">
                                            <form class="form-horizontal" name="forms.mainForm2" data-ng-submit="save()" data-ng-class="{submitted: forms.mainForm2.submitted}" novalidate unsaved-warning-form>
                                                <fieldset>
                                                    <div data-ng-if="order.AlaskaHawaiiSurcharge!=0" class="form-group margin-bottom-0px">
                                                        <label for="type" class="col-md-7 control-label">Alaska/Hawaii Surcharge</label>
                                                        <div class="col-md-5 form-control-static">
                                                            <span>{{order.AlaskaHawaiiSurcharge | currency}}</span>
                                                        </div>
                                                    </div>
                                                    <div data-ng-if="order.CanadaSurcharge!=0" class="form-group margin-bottom-0px">
                                                        <label for="type" class="col-md-7 control-label">Canada Surcharge</label>
                                                        <div class="col-md-5 form-control-static">
                                                            <span>{{order.CanadaSurcharge | currency}}</span>
                                                        </div>
                                                    </div>
                                                    <div class="form-group margin-bottom-0px">
                                                        <label for="type" class="col-md-7 control-label">Standard Shipping Charges</label>
                                                        <div class="col-md-5 form-control-static">
                                                            <span>{{order.StandardShippingCharges | currency}}</span>
                                                        </div>
                                                    </div>
                                                    <div data-ng-if="shippingUpgradePOptions && shippingUpgradePOptions.length!=0 && order.IdObjectType!=3" class="form-group">
                                                        <label for="type" class="col-md-7 control-label">Upgrade Perishable Shipping</label>
                                                        <div class="col-md-5">
                                                            <select data-ng-disabled="!shippingUpgradePOptions || shippingUpgradePOptions.length==0 || orderEditDisabled" class="form-control" name="ShippingUpgradeP" data-ng-model="order.ShippingUpgradeP" ng-options="item.Key as item.Text for item in shippingUpgradePOptions" data-ng-change="requestRecalculate()">
                                                                <option value="">None</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div data-ng-if="shippingUpgradeNPOptions && shippingUpgradeNPOptions.length!=0 && order.IdObjectType!=3" class="form-group">
                                                        <label for="type" class="col-md-7 control-label">Upgrade Non-Perishable Shipping</label>
                                                        <div class="col-md-5">
                                                            <select data-ng-disabled="!shippingUpgradeNPOptions || shippingUpgradeNPOptions.length==0 || orderEditDisabled" class="form-control" name="ShippingUpgradeNP" data-ng-model="order.ShippingUpgradeNP" ng-options="item.Key as item.Text for item in shippingUpgradeNPOptions" data-ng-change="requestRecalculate()">
                                                                <option value="">None</option>
                                                            </select>
                                                        </div>
                                                    </div>

                                                    <div data-ng-if="order.AlaskaHawaiiSurcharge!=0 || order.CanadaSurcharge!=0" class="form-group">
                                                        <label for="type" class="col-md-7 control-label">Surcharge Override (-)</label>
                                                        <div class="col-md-5">
                                                            <div class="input-group">
                                                                <span class="input-group-addon">$</span>
                                                                <input type="text" name="SurchargeOverride" class="form-control" placeholder="Surcharge" money min="0.00" max="100000" data-ng-model="order.SurchargeOverride" data-ng-blur="requestRecalculate()" data-ng-disabled="orderEditDisabled">
                                                            </div>
                                                            <div class="error-container" ng-show="forms.mainForm2.submitted && forms.mainForm2.SurchargeOverride.$invalid">
                                                                <small class="error" ng-show="forms.mainForm2.SurchargeOverride.$error.parse">{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Amount")}}</small>
                                                                <small class="error" ng-show="forms.mainForm2.SurchargeOverride.$error.max">{{getValidationMessage("ValidationMessages.FieldMax","GeneralFieldNames.Amount",1000000)}}</small>
                                                                <small class="error" ng-show="forms.mainForm2.SurchargeOverride.$error.server">{{serverMessages.GetMessage('SurchargeOverride')}}</small>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div data-ng-if="order.IdObjectType!=3" class="form-group">
                                                        <label for="type" class="col-md-7 control-label">Shipping Override (-)</label>
                                                        <div class="col-md-5">
                                                            <div class="input-group">
                                                                <span class="input-group-addon">$</span>
                                                                <input type="text" name="ShippingOverride" class="form-control" placeholder="Shipping" money min="0.00" max="100000" data-ng-model="order.ShippingOverride" data-ng-blur="requestRecalculate()" data-ng-disabled="orderEditDisabled">
                                                            </div>
                                                            <div class="error-container" ng-show="forms.mainForm2.submitted && forms.mainForm2.ShippingOverride.$invalid">
                                                                <small class="error" ng-show="forms.mainForm2.ShippingOverride.$error.parse">{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Amount")}}</small>
                                                                <small class="error" ng-show="forms.mainForm2.ShippingOverride.$error.max">{{getValidationMessage("ValidationMessages.FieldMax","GeneralFieldNames.Amount",1000000)}}</small>
                                                                <small class="error" ng-show="forms.mainForm2.ShippingOverride.$error.server">{{serverMessages.GetMessage('ShippingOverride')}}</small>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="form-group margin-bottom-0px">
                                                        <label for="type" class="col-md-7 control-label">Total Shipping</label>
                                                        <div class="col-md-5 form-control-static">
                                                            <span>{{order.TotalShipping | currency}}</span>
                                                        </div>
                                                    </div>

                                                    <div class="form-group margin-bottom-0px">
                                                        <label for="type" class="col-md-7 control-label">Product Subtotal</label>
                                                        <div class="col-md-5 form-control-static">
                                                            <span>{{order.ProductsSubtotal | currency}}</span>
                                                        </div>
                                                    </div>

                                                    <div data-ng-if="order.IdObjectType!=3 && order.IdObjectType != 2" class="form-group">
                                                        <label for="type" class="col-md-7 control-label">Discount Code</label>
                                                        <div class="col-md-5">
                                                            <div class="input-group autocomplete">
                                                                <input type="text" name="DiscountCode" class="form-control" placeholder="Discount Code" data-ng-model="order.DiscountCode" autocomplete="off"
                                                                       typeahead-min-length="1" uib-typeahead="code for code in getDiscounts($viewValue)" typeahead-loading="loadingDiscounts" data-ng-blur="requestRecalculate()"
                                                                       typeahead-on-select="requestRecalculate()" typeahead-wait-ms="100" data-ng-disabled="orderEditDisabled">
                                                            </div>
                                                            <div class="error-container" ng-show="forms.mainForm2.submitted && forms.mainForm2.DiscountCode.$invalid">
                                                                <small class="error" ng-show="forms.mainForm2.DiscountCode.$error.server">{{calculateServerMessages.GetMessage('DiscountCode')}}</small>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </fieldset>
                                            </form>

                                            <form name="forms.GCs" class="form-horizontal" data-ng-submit="save()" data-ng-class="{submitted: forms.GCs.skussubmitted}" novalidate unsaved-warning-form>
                                                <fieldset>
                                                    <div data-ng-if="order.IdObjectType!=3 && order.IdObjectType != 2" class="form-group">
                                                        <label for="type" class="col-md-7 control-label">Gift Certificate</label>
                                                        <div class="col-md-5">
                                                            <div data-ng-repeat="gc in order.GCs" class="gcs">
                                                                <div class="form-horizontal item" ng-form="i{{$index}}" novalidate>
                                                                    <div class="col-md-10 padding-0px">
                                                                        <div class="input-group autocomplete code">
                                                                            <input type="text" name="Code" class="form-control" placeholder="Gift Certificate" data-ng-model="gc.Code" autocomplete="off"
                                                                                   typeahead-min-length="1" uib-typeahead="code for code in getGCs($viewValue)" typeahead-loading="loadingGCs" data-ng-blur="gcLostFocus($index, gc.Code)"
                                                                                   typeahead-on-select="requestRecalculate()" typeahead-wait-ms="100" data-ng-disabled="orderEditDisabled">
                                                                        </div>
                                                                        <div class="error-container small-block" ng-show="forms.GCs.skussubmitted && forms.GCs.i{{$index}}.Code.$invalid">
                                                                            <small class="error" ng-show="forms.GCs.i{{$index}}.Code.$error.server">{{calculateServerMessages.GetMessage('Code','GCs',$index)}}</small>
                                                                        </div>
                                                                    </div>
                                                                    <div data-ng-if="$index==0 && !orderEditDisabled" class="col-md-2 padding-0px">
                                                                        <a class="btn btn-success btn-xs" title="Add" data-ng-click="gcAdd();"><i class="glyphicon glyphicon-plus"></i></a>
                                                                    </div>
                                                                    <div data-ng-if="$index!=0 && !orderEditDisabled" class="col-md-2 padding-0px">
                                                                        <a class="btn btn-danger btn-xs" title="Delete" data-ng-click="gcDelete($index);"><i class="glyphicon glyphicon-remove"></i></a>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="total-section">
                                                        <div data-ng-if="order.IdObjectType!=3" class="form-group margin-bottom-0px">
                                                            <label class="col-md-6 control-label">Discount</label>
                                                            <div class="col-md-6 form-control-static">
                                                                <span>{{order.DiscountMessage}}</span>
                                                            </div>
                                                        </div>
                                                        <div data-ng-if="order.IdObjectType!=3" class="form-group margin-bottom-0px">
                                                            <label class="col-md-6 control-label">Discount Amount</label>
                                                            <div class="col-md-6 form-control-static">
                                                                <span>({{order.DiscountTotal | currency}})</span>
                                                            </div>
                                                        </div>
                                                        <div data-ng-if="order.IdObjectType!=3" class="form-group margin-bottom-0px">
                                                            <label class="col-md-6 control-label">Discounted Subtotal</label>
                                                            <div class="col-md-6 form-control-static">
                                                                <span>{{order.DiscountedSubtotal | currency}}</span>
                                                            </div>
                                                        </div>
                                                        <div class="form-group margin-bottom-0px">
                                                            <label class="col-md-6 control-label">Shipping Total</label>
                                                            <div class="col-md-6 form-control-static">
                                                                <span>{{order.ShippingTotal | currency}}</span>
                                                            </div>
                                                        </div>
                                                        <div class="form-group margin-bottom-0px">
                                                            <label class="col-md-6 control-label">Tax</label>
                                                            <div class="col-md-6 form-control-static">
                                                                <span>{{order.TaxTotal | currency}}</span>
                                                            </div>
                                                        </div>
                                                        <div class="form-group margin-bottom-0px">
                                                            <label class="col-md-6 control-label">Gift Certificates</label>
                                                            <div class="col-md-6 form-control-static">
                                                                <span>({{order.GiftCertificatesSubtotal | currency}})</span>
                                                            </div>
                                                        </div>
                                                        <div class="form-group margin-bottom-0px">
                                                            <label class="col-md-6 control-label">Grand Total</label>
                                                            <div class="col-md-6 form-control-static">
                                                                <span>{{order.Total | currency}}</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </fieldset>
                                            </form>
                                        </div>
                                    </div>
                                </spinner-overlay>
                            </div>
                        </div>
                    </uib-tab>
                    <uib-tab heading="Order History">
                        <div class="container-fluid">
                            <div ng-controller="customerOrdersController" onload="name = 'CustomerOrders'" data-ng-include="'app/modules/order/partials/customerOrdersList.html'"></div>
                        </div>
                    </uib-tab>
                    <uib-tab heading="Auto-Ship">
                        <div class="container-fluid">
                            <div ng-controller="customerAutoShipsController" data-ng-include="'app/modules/order/partials/autoShipList.html'"></div>
                        </div>
                    </uib-tab>
                    <uib-tab data-ng-if="!id" heading="Account Profile" active="accountProfileTab.active">
                        <div class="container container-left">
                            <div class="well row">
                                <spinner-overlay data-loading="addEditTracker.active()">
                                    <form class="form-horizontal" name="forms.profile" data-ng-submit="save()" data-ng-class="{submitted: forms.submitted['profile']}" novalidate unsaved-warning-form>
                                        <fieldset>
                                            <span class="legend">Customer Type</span>
                                            <div class="form-group">
                                                <div class="col-md-3"></div>
                                                <div class="col-md-9">
                                                    <select class="form-control" id="customerType" data-ng-model="currentCustomer.CustomerType" data-ng-options="customerType.Key as customerType.Text for customerType in ReferenceData.CustomerTypes" data-ng-change="requestRecalculate()" data-ng-disabled="orderEditDisabled"></select>
                                                </div>
                                            </div>
                                            <div data-ng-if="currentCustomer.CustomerType == 2">
                                                <div class="form-group">
                                                    <label for="taxExempt" class="col-md-3 control-label">Tax Exempt</label>
                                                    <div class="col-md-9">
                                                        <select class="form-control" name="TaxExempt" id="taxExempt" data-ng-model="currentCustomer.TaxExempt" data-ng-options="taxExempt.Key as taxExempt.Text for taxExempt in ReferenceData.TaxExempts" required data-ng-disabled="orderEditDisabled"></select>
                                                        <div class="error-container" ng-show="forms.submitted['profile'] && forms.profile.TaxExempt.$invalid">
                                                            <small class="error" ng-show="forms.profile.TaxExempt.$error.required">{{getValidationMessage("ValidationMessages.FieldRequired","Tax Exempt")}}</small>
                                                            <small class="error" ng-show="forms.profile.TaxExempt.$error.server">{{serverMessages.GetMessage('TaxExempt')}}</small>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label for="website" class="col-md-3 control-label">Website</label>
                                                    <div class="col-md-9">
                                                        <input type="text" name="Website" class="form-control" id="website" data-ng-model="currentCustomer.Website" placeholder="Website" required data-ng-maxlength="100" autocomplete="off" data-ng-disabled="orderEditDisabled">
                                                        <div class="error-container" ng-show="forms.submitted['profile'] && forms.profile.Website.$invalid">
                                                            <small class="error" ng-show="forms.profile.Website.$error.required">{{getValidationMessage("ValidationMessages.FieldRequired","Website")}}</small>
                                                            <small class="error" ng-show="forms.profile.Website.$error.maxlength">{{getValidationMessage("ValidationMessages.FieldLength", ["Website", "100"])}}</small>
                                                            <small class="error" ng-show="forms.profile.Website.$error.server">{{serverMessages.GetMessage('Website')}}</small>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label for="promoting" class="col-md-3 control-label">Promoting Websites</label>
                                                    <div class="col-md-9">
                                                        <textarea type="text" name="PromotingWebsites" class="form-control" data-ng-model="currentCustomer.PromotingWebsites" id="promoting" placeholder="Promoting Websites" rows="10" required data-ng-maxlength="1000" data-ng-disabled="orderEditDisabled"></textarea>
                                                        <div class="error-container" ng-show="forms.submitted['profile'] && forms.profile.PromotingWebsites.$invalid">
                                                            <small class="error" ng-show="forms.profile.PromotingWebsites.$error.required">{{getValidationMessage("ValidationMessages.FieldRequired","Promoting Websites")}}</small>
                                                            <small class="error" ng-show="forms.profile.PromotingWebsites.$error.maxlength">{{getValidationMessage("ValidationMessages.FieldLength", ["Promoting Websites", "1000"])}}</small>
                                                            <small class="error" ng-show="forms.profile.PromotingWebsites.$error.server">{{serverMessages.GetMessage('Promoting Websites')}}</small>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label for="tier" class="col-md-3 control-label">Tier</label>
                                                    <div class="col-md-9">
                                                        <select class="form-control" id="tier" name="Tier" data-ng-model="currentCustomer.Tier" data-ng-options="tier.Key as tier.Text for tier in ReferenceData.Tiers" required data-ng-disabled="orderEditDisabled"></select>
                                                        <div class="error-container" ng-show="forms.submitted['profile'] && forms.profile.Tier.$invalid">
                                                            <small class="error" ng-show="forms.profile.Tier.$error.required">{{getValidationMessage("ValidationMessages.FieldRequired","Tier")}}</small>
                                                            <small class="error" ng-show="forms.profile.Tier.$error.server">{{serverMessages.GetMessage('Tier')}}</small>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label for="tradeClass" class="col-md-3 control-label">Trade Class</label>
                                                    <div class="col-md-9">
                                                        <select class="form-control" name="TradeClass" id="tradeClass" data-ng-model="currentCustomer.TradeClass" data-ng-options="tradeClass.Key as tradeClass.Text for tradeClass in ReferenceData.TradeClasses" required data-ng-disabled="orderEditDisabled"></select>
                                                        <div class="error-container" ng-show="forms.submitted['profile'] && forms.profile.TradeClass.$invalid">
                                                            <small class="error" ng-show="forms.profile.TradeClass.$error.required">{{getValidationMessage("ValidationMessages.FieldRequired","Trade Class")}}</small>
                                                            <small class="error" ng-show="forms.profile.TradeClass.$error.server">{{serverMessages.GetMessage('TradeClass')}}</small>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label class="col-md-3 control-label">Inception Date</label>
                                                    <div class="col-md-9">
                                                        <p class="input-group">
                                                            <input type="text" name="InceptionDate" class="form-control" uib-datepicker-popup="dd-MMM-yyyy" ng-model="currentCustomer.InceptionDate" is-open="inceptionDateOpened" required autocomplete="off" data-ng-disabled="orderEditDisabled" />
                                                            <span class="input-group-btn">
                                                                <button type="button" class="btn btn-default" ng-disabled="false" ng-click="stopPropagation($event); inceptionDateOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button>
                                                            </span>
                                                        </p>
                                                        <div class="error-container" ng-show="forms.submitted['profile'] && forms.profile.InceptionDate.$invalid">
                                                            <small class="error" ng-show="forms.profile.InceptionDate.$error.required">{{getValidationMessage("ValidationMessages.FieldRequired","Inception Date")}}</small>
                                                            <small class="error" ng-show="forms.profile.InceptionDate.$error.server">{{serverMessages.GetMessage('InceptionDate')}}</small>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <span class="legend">Profile Details</span>
                                            <div data-ng-if="currentCustomer.CustomerType == 1" class="form-group">
                                                <label for="linked" class="col-md-3 control-label">Linked to Affiliate</label>
                                                <div class="col-md-3">
                                                    <input type="text" name="IdAffiliate" class="form-control" id="linked" data-ng-model="currentCustomer.IdAffiliate" numbers-only numbers-only-deny-zero placeholder="Linked to Affiliate" autocomplete="off">
                                                    <div class="error-container" ng-show="forms.submitted['profile'] && forms.profile.IdAffiliate.$invalid">
                                                        <small class="error" ng-show="forms.profile.IdAffiliate.$error.server">{{serverMessages.GetMessage('IdAffiliate')}}</small>
                                                    </div>
                                                </div>
                                            </div>
                                            <div data-ng-include="'app/modules/customer/partials/address.html'" data-ng-repeat="model in [accountProfileTab]"></div>
                                            <div class="form-group">
                                                <label for="currentEmail" class="col-md-3 control-label">Current Email</label>
                                                <div class="col-md-9 form-control-static">
                                                    <span data-ng-bind="currentCustomer.Email"></span>
                                                </div>
                                            </div>
                                            <div data-ng-if="!options.OverrideEmail" class="form-group">
                                                <label for="enterEmail" class="col-md-3 control-label">Enter Email</label>
                                                <div class="col-md-9">
                                                    <input type="email" name="Email" class="form-control" id="enterEmail" data-ng-model="currentCustomer.newEmail" placeholder="Enter Email" data-ng-required="!currentCustomer.Email" data-ng-maxlength="100" autocomplete="off" data-ng-disabled="orderEditDisabled">
                                                    <div class="error-container" ng-show="forms.submitted['profile'] && forms.profile.Email.$invalid">
                                                        <small class="error" ng-show="forms.profile.Email.$error.required">{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Email")}}</small>
                                                        <small class="error" ng-show="forms.profile.Email.$error.email">{{getValidationMessage("ValidationMessages.EmailFormat","GeneralFieldNames.Email")}}</small>
                                                        <small class="error" ng-show="forms.profile.Email.$error.maxlength">{{getValidationMessage("ValidationMessages.FieldLength", ["GeneralFieldNames.Email", "100"])}}</small>
                                                        <small class="error" ng-show="forms.profile.Email.$error.server">{{serverMessages.GetMessage('Email')}}</small>
                                                    </div>
                                                </div>
                                            </div>
                                            <div data-ng-if="!options.OverrideEmail" class="form-group">
                                                <label for="reEnterEmail" class="col-md-3 control-label">Re-enter Email</label>
                                                <div class="col-md-9">
                                                    <input type="email" name="EmailConfirm" class="form-control" id="reEnterEmail" data-ng-model="currentCustomer.emailConfirm" placeholder="Re-enter Email" data-ng-required="!currentCustomer.Email" data-ng-maxlength="100" autocomplete="off" data-ng-disabled="orderEditDisabled">
                                                    <div class="error-container" ng-show="forms.submitted['profile'] && forms.profile.EmailConfirm.$invalid">
                                                        <small class="error" ng-show="forms.profile.EmailConfirm.$error.required">{{getValidationMessage("ValidationMessages.FieldRequired","Email Confirmation")}}</small>
                                                        <small class="error" ng-show="forms.profile.EmailConfirm.$error.email">{{getValidationMessage("ValidationMessages.EmailFormat","Email Confirmation")}}</small>
                                                        <small class="error" ng-show="forms.profile.EmailConfirm.$error.maxlength">{{getValidationMessage("ValidationMessages.FieldLength", ["Email Confirmation", "100"])}}</small>
                                                        <small class="error" ng-show="forms.profile.EmailConfirm.$error.server">{{serverMessages.GetMessage('EmailConfirm')}}</small>
                                                    </div>
                                                </div>
                                            </div>
                                            <div data-ng-if="!currentCustomer.Id || (options.DBStatusCode == 1 && !currentCustomer.Email)" class="form-group">
                                                <label for="active" class="col-md-3 control-label">Override Email</label>
                                                <div class="col-md-9">
                                                    <div class="checkbox">
                                                        <label><input type="checkbox" id="overrideEmail" name="OverrideEmail" data-ng-model="options.OverrideEmail" /></label>
                                                    </div>
                                                </div>
                                            </div>
                                            <div data-ng-if="currentCustomer.Email" class="form-group">
                                                <div class="col-md-3"></div>
                                                <div class="col-md-9">
                                                    <button class="btn btn-info" data-ng-if="currentCustomer.StatusCode == 2" ladda="resetTracker.active()" data-ng-click="resetPassword()">Reset Password</button>
                                                    <button class="btn btn-info" data-ng-if="currentCustomer.StatusCode == 1" ladda="resendTracker.active()" data-ng-click="resend()">Resend Activation Email</button>
                                                </div>
                                            </div>
                                            <span class="legend">Approved Payment Methods</span>
                                            <div class="form-group">
                                                <div class="col-md-3"></div>
                                                <div class="col-md-9">
                                                    <label class="checkbox-inline margin-left-zero margin-right-25px" data-ng-repeat="paymentMethod in paymentMethods">
                                                        <input type="checkbox" data-ng-click="togglePaymentMethodSelection(paymentMethod)" data-ng-checked="currentCustomer.ApprovedPaymentMethods.indexOf(paymentMethod.Id) > -1" autocomplete="off" data-ng-disabled="orderEditDisabled">
                                                        {{paymentMethod.Name}}
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label for="state" class="col-md-3 control-label">Default Payment Method</label>
                                                <div class="col-md-9">
                                                    <select class="form-control" name="DefaultPaymentMethod" data-ng-model="currentCustomer.DefaultPaymentMethod" data-ng-options="paymentMethod.Id as paymentMethod.Name for paymentMethod in selectedPaymentMethods" required data-ng-disabled="orderEditDisabled">
                                                        <option value="">Select Default Payment Method</option>
                                                    </select>
                                                    <div class="error-container" ng-show="forms.submitted['profile'] && forms.profile.DefaultPaymentMethod.$invalid">
                                                        <small class="error" ng-show="forms.profile.DefaultPaymentMethod.$error.required">{{getValidationMessage("ValidationMessages.FieldRequired","Default Payment Method")}}</small>
                                                        <small class="error" ng-show="forms.profile.DefaultPaymentMethod.$error.server">{{serverMessages.GetMessage('DefaultPaymentMethod')}}</small>
                                                    </div>
                                                </div>
                                            </div>
                                            <span class="legend">Automatic Order Specific Notes</span>
                                            <div class="form-group">
                                                <div class="col-md-3"></div>
                                                <div class="col-md-9">
                                                    <label class="checkbox-inline margin-left-zero margin-right-25px" data-ng-repeat="orderNote in orderNotes">
                                                        <input type="checkbox" data-ng-click="toggleOrderNoteSelection(orderNote.Id)" data-ng-checked="currentCustomer.OrderNotes.indexOf(orderNote.Id) > -1" autocomplete="off" data-ng-disabled="orderEditDisabled">
                                                        {{orderNote.Name}}
                                                    </label>
                                                </div>
                                            </div>
                                            <span class="legend">DNM / DNR</span>
                                            <div class="form-group">
                                                <div class="col-md-3"></div>
                                                <div class="col-md-9">
                                                    <label class="checkbox-inline col-md-3">
                                                        <input type="checkbox" id="doNotMail" data-ng-model="currentCustomer.DoNotMail" autocomplete="off" data-ng-disabled="orderEditDisabled">
                                                        Do Not Mail
                                                    </label>
                                                    <label class="checkbox-inline col-md-3">
                                                        <input type="checkbox" id="doNotRent" data-ng-model="currentCustomer.DoNotRent" autocomplete="off" data-ng-disabled="orderEditDisabled">
                                                        Do Not Rent
                                                    </label>
                                                </div>
                                            </div>
                                            <span data-ng-if="currentCustomer.Id && currentCustomer.StatusCode!=5" class="legend">Suspend User Account</span>
                                            <div data-ng-if="currentCustomer.StatusCode!=5" class="form-group">
                                                <label for="suspendUserAccount" class="col-md-3 control-label">Suspend User Account</label>
                                                <div class="col-md-9">
                                                    <div class="checkbox">
                                                        <label>
                                                            <input type="checkbox" id="suspendUserAccount" data-ng-click="toggleSuspended()" data-ng-checked="currentCustomer.StatusCode == 4" data-ng-disabled="orderEditDisabled">
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group" data-ng-if="currentCustomer.StatusCode == 4">
                                                <label for="reason" class="col-md-3 control-label">Reason</label>
                                                <div class="col-md-9">
                                                    <textarea type="text" name="Reason" class="form-control" id="reason" placeholder="Reason" rows="10" data-ng-model="currentCustomer.Reason" required data-ng-maxlength="1000" data-ng-disabled="orderEditDisabled"></textarea>
                                                    <div class="error-container" ng-show="forms.submitted['profile'] && forms.profile.Reason.$invalid">
                                                        <small class="error" ng-show="forms.profile.Reason.$error.required">{{getValidationMessage("ValidationMessages.FieldRequired","Reason")}}</small>
                                                        <small class="error" ng-show="forms.profile.Reason.$error.maxlength">{{getValidationMessage("ValidationMessages.FieldLength", ["Reason", "1000"])}}</small>
                                                        <small class="error" ng-show="forms.profile.Reason.$error.server">{{serverMessages.GetMessage('Reason')}}</small>
                                                    </div>
                                                </div>
                                            </div>
                                        </fieldset>
                                    </form>
                                </spinner-overlay>
                            </div>
                        </div>
                    </uib-tab>
                    <uib-tab heading="Shipping Address" active="shippingAddressTab.active">
                        <div class="container container-left">
                            <div class="well row">
                                <spinner-overlay data-loading="addEditTracker.active()">
                                    <div data-ng-if="!id">
                                        <div class="form-horizontal">
                                            <div class="form-group">
                                                <label for="updateShippingAddressForCustomer" class="col-md-3 control-label"></label>
                                                <div class="col-md-9">
                                                    <div class="checkbox">
                                                        <label>
                                                            <input type="checkbox" id="updateShippingAddressForCustomer" data-ng-model="order.UpdateShippingAddressForCustomer" data-ng-disabled="orderEditDisabled">
                                                            <strong>Permanently update this address</strong>
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div data-ng-include="'app/modules/customer/partials/updateShippingSection.html'"></div>
                                    </div>
                                    <div data-ng-if="id" data-ng-include="'app/modules/customer/partials/updateOrderShippingSection.html'"></div>
                                </spinner-overlay>
                            </div>
                        </div>
                    </uib-tab>
                    <uib-tab heading="Payment Information" active="paymentInfoTab.active">
                        <div class="container container-left">
                            <div class="well row">
                                <spinner-overlay data-loading="addEditTracker.active()">
                                    <div class="form-horizontal">
                                        <span class="legend">Select Payment Method</span>
                                        <div data-ng-if="!id">
                                            <div class="form-group" data-ng-if="currentCustomer.ApprovedPaymentMethods.indexOf(1) >= 0">
                                                <div class="col-md-3">
                                                </div>
                                                <div class="col-md-6">
                                                    <button class="btn btn-info" data-ng-show="paymentInfoTab.PaymentMethodType == 1" data-ng-click="setNewCreditCard();">Add New Credit Card</button>
                                                </div>
                                                <div class="col-md-3">
                                                </div>
                                            </div>
                                            <div class="form-group" data-ng-if="currentCustomer.ApprovedPaymentMethods.indexOf(1) >= 0">
                                                <div class="radio col-md-3">
                                                    <label class="control-label">
                                                        <input type="radio" class="" data-ng-model="paymentInfoTab.PaymentMethodType" value="1" id="creditCard" data-ng-disabled="orderEditDisabled">
                                                        Credit Card
                                                    </label>
                                                </div>
                                                <div class="col-md-6">
                                                    <select class="form-control" id="selectPaymentMethod" data-ng-disabled="paymentInfoTab.PaymentMethodType != 1 || !currentCustomer.CreditCards || currentCustomer.CreditCards.length == 0 || orderEditDisabled" data-ng-model="paymentInfoTab.CreditCardIndex"
                                                            data-ng-options="idx as (getCreditCardTypeName(creditCard.CardType) + ', ending in ' + getLast4(creditCard.CardNumber) + (creditCard.Default ? ' (Default)' : '')) for (idx, creditCard) in currentCustomer.CreditCards"></select>
                                                </div>
                                                <div class="col-md-3 padding-l-0px">
                                                    <button class="btn btn-danger pull-right" data-ng-show="currentCustomer.CreditCards[paymentInfoTab.CreditCardIndex] && paymentInfoTab.PaymentMethodType == 1 && (!currentCustomer.CreditCards[paymentInfoTab.CreditCardIndex].Default || currentCustomer.CreditCards.length==1)" data-ng-click="deleteSelectedCreditCard();">Delete</button>
                                                    <button class="btn btn-success pull-right margin-right-8px" data-ng-show="!currentCustomer.CreditCards[paymentInfoTab.CreditCardIndex].Default && paymentInfoTab.PaymentMethodType == 1 && currentCustomer.CreditCards && currentCustomer.CreditCards.length>0" data-ng-click="setDefaultCreditCard();">Set as Default</button>
                                                </div>
                                            </div>
                                            <div class="form-group ng-scope" data-ng-if="currentCustomer.ApprovedPaymentMethods.indexOf(1) >= 0 && paymentInfoTab.PaymentMethodType==1">
                                                <div class="col-md-3"></div>
                                                <div class="col-md-9">
                                                    <strong>Credit card data is only validated when adding or replacing masked credit card data.</strong>
                                                </div>
                                            </div>
                                            <div class="form-group" data-ng-if="currentCustomer.ApprovedPaymentMethods.indexOf(2) >= 0">
                                                <div class="col-md-3">
                                                    <div class="radio">
                                                        <label class="control-label">
                                                            <input type="radio" class="" data-ng-model="paymentInfoTab.PaymentMethodType" value="2" id="oac" data-ng-disabled="orderEditDisabled">
                                                            On Approved Credit
                                                        </label>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div data-ng-if="paymentInfoTab.PaymentMethodType == 2 && currentCustomer.ApprovedPaymentMethods.length > 0 && !currentCustomer.Oac">
                                                        <button class="btn btn-info" data-ng-click="setNewOac();">Add New OAC</button>
                                                    </div>
                                                    <div data-ng-if="paymentInfoTab.PaymentMethodType == 2 && currentCustomer.ApprovedPaymentMethods.length > 0 && currentCustomer.Oac">
                                                        <button class="btn btn-danger" data-ng-click="currentCustomer.Oac = undefined;">Delete</button>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group" data-ng-if="currentCustomer.ApprovedPaymentMethods.indexOf(3) >= 0">
                                                <div class="col-md-3">
                                                    <div class="radio">
                                                        <label class="control-label">
                                                            <input type="radio" class="" data-ng-model="paymentInfoTab.PaymentMethodType" value="3" id="check" data-ng-disabled="orderEditDisabled">
                                                            Check
                                                        </label>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div data-ng-if="paymentInfoTab.PaymentMethodType == 3 && currentCustomer.ApprovedPaymentMethods.length > 0 && !currentCustomer.Check">
                                                        <button class="btn btn-info" data-ng-click="setNewCheck();">Add New Check</button>
                                                    </div>
                                                    <div data-ng-if="paymentInfoTab.PaymentMethodType == 3 && currentCustomer.ApprovedPaymentMethods.length > 0 && currentCustomer.Check">
                                                        <button class="btn btn-danger" data-ng-click="currentCustomer.Check = undefined;">Delete</button>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group" data-ng-if="currentCustomer.ApprovedPaymentMethods.indexOf(6) >= 0">
                                                <div class="col-md-3">
                                                    <div class="radio">
                                                        <label class="control-label">
                                                            <input type="radio" class="" data-ng-model="paymentInfoTab.PaymentMethodType" value="6" id="wiretransfer" data-ng-disabled="orderEditDisabled">
                                                            Wire Transfer
                                                        </label>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div data-ng-if="paymentInfoTab.PaymentMethodType == 6 && currentCustomer.ApprovedPaymentMethods.length > 0 && !currentCustomer.WireTransfer">
                                                        <button class="btn btn-info" data-ng-click="setNewWireTransfer();">Add New Wire Transfer</button>
                                                    </div>
                                                    <div data-ng-if="paymentInfoTab.PaymentMethodType == 6 && currentCustomer.ApprovedPaymentMethods.length > 0 && currentCustomer.WireTransfer">
                                                        <button class="btn btn-danger" data-ng-click="currentCustomer.WireTransfer = undefined;">Delete</button>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group" data-ng-if="currentCustomer.ApprovedPaymentMethods.indexOf(7) >= 0">
                                                <div class="col-md-3">
                                                    <div class="radio">
                                                        <label class="control-label">
                                                            <input type="radio" class="" data-ng-model="paymentInfoTab.PaymentMethodType" value="7" id="marketing" data-ng-disabled="orderEditDisabled">
                                                            Marketing
                                                        </label>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div data-ng-if="paymentInfoTab.PaymentMethodType == 7 && currentCustomer.ApprovedPaymentMethods.length > 0 && !currentCustomer.Marketing">
                                                        <button class="btn btn-info" data-ng-click="setNewMarketing();">Add New Marketing</button>
                                                    </div>
                                                    <div data-ng-if="paymentInfoTab.PaymentMethodType == 7 && currentCustomer.ApprovedPaymentMethods.length > 0 && currentCustomer.Marketing">
                                                        <button class="btn btn-danger" data-ng-click="currentCustomer.Marketing = undefined;">Delete</button>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group" data-ng-if="currentCustomer.ApprovedPaymentMethods.indexOf(8) >= 0">
                                                <div class="col-md-3">
                                                    <div class="radio">
                                                        <label class="">
                                                            <input type="radio" class="" data-ng-model="paymentInfoTab.PaymentMethodType" value="8" id="vcwellness" data-ng-disabled="orderEditDisabled">
                                                            VC Wellness Employee Program
                                                        </label>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div data-ng-if="paymentInfoTab.PaymentMethodType == 8 && currentCustomer.ApprovedPaymentMethods.length > 0 && !currentCustomer.VCWellness">
                                                        <button class="btn btn-info" data-ng-click="setNewVCWellness();">Add New VC Wellness Employee Program</button>
                                                    </div>
                                                    <div data-ng-if="paymentInfoTab.PaymentMethodType == 8 && currentCustomer.ApprovedPaymentMethods.length > 0 && currentCustomer.VCWellness">
                                                        <button class="btn btn-danger" data-ng-click="currentCustomer.VCWellness = undefined;">Delete</button>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group" data-ng-if="currentCustomer.ApprovedPaymentMethods.indexOf(4) >= 0">
                                                <div class="col-md-3">
                                                    <div class="radio">
                                                        <label class="control-label">
                                                            <input type="radio" class="" data-ng-model="paymentInfoTab.PaymentMethodType" value="4" id="noCharge" data-ng-disabled="orderEditDisabled">
                                                            No Charge
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>
                                            <hr />
                                            <form class="form-horizontal" name="forms.card" data-ng-class="{submitted: forms.submitted['card']}" novalidate unsaved-warning-form>
                                                <fieldset>
                                                    <div data-ng-if="paymentInfoTab.PaymentMethodType == 1 && currentCustomer.ApprovedPaymentMethods.length > 0 && currentCustomer.CreditCards[paymentInfoTab.CreditCardIndex]">
                                                        <div class="form-group">
                                                            <label for="updateCardForCustomer" class="col-md-3 control-label"></label>
                                                            <div class="col-md-9">
                                                                <div class="checkbox">
                                                                    <label>
                                                                        <input type="checkbox" id="updateCardForCustomer" data-ng-model="order.UpdateCardForCustomer" data-ng-disabled="orderEditDisabled">
                                                                        <strong>Permanently update credit card information</strong>
                                                                    </label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="NameOnCard" class="col-md-3 control-label">Name on Card</label>
                                                            <div class="col-md-9">
                                                                <input type="text" class="form-control" name="NameOnCard" id="NameOnCard" data-ng-model="currentCustomer.CreditCards[paymentInfoTab.CreditCardIndex].NameOnCard" placeholder="Name on Card" data-ng-required="!order.OnHold || order.UpdateCardForCustomer" autocomplete="off" data-ng-disabled="orderEditDisabled">
                                                                <div class="error-container" ng-show="forms.submitted['card'] && forms.card.NameOnCard.$invalid">
                                                                    <small class="error" ng-show="forms.card.NameOnCard.$error.required">{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.NameOnCard")}}</small>
                                                                    <small class="error" ng-show="forms.card.NameOnCard.$error.maxlength">{{getValidationMessage("ValidationMessages.FieldLength", ["GeneralFieldNames.NameOnCard", "100"])}}</small>
                                                                    <small class="error" ng-show="forms.card.NameOnCard.$error.server">{{serverMessages.GetMessage('NameOnCard', "CreditCards", paymentInfoTab.CreditCardIndex, "card")}}</small>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="CardType" class="col-md-3 control-label">Card Type</label>
                                                            <div class="col-md-9">
                                                                <select class="form-control" id="CardType" name="CardType" data-ng-model="currentCustomer.CreditCards[paymentInfoTab.CreditCardIndex].CardType" ng-options="creditCardType.Key as creditCardType.Text for creditCardType in creditCardTypes" data-ng-required="!order.OnHold || order.UpdateCardForCustomer" autocomplete="off" data-ng-disabled="orderEditDisabled"></select>
                                                                <div class="error-container" ng-show="forms.submitted['card'] && forms.card.CardType.$invalid">
                                                                    <small class="error" ng-show="forms.card.CardType.$error.required">{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.CardType")}}</small>
                                                                    <small class="error" ng-show="forms.card.CardType.$error.server">{{serverMessages.GetMessage('CardType', "CreditCards", paymentInfoTab.CreditCardIndex, "card")}}</small>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="CardNumber" class="col-md-3 control-label">Card Number</label>
                                                            <div class="col-md-9">
                                                                <input type="text" class="form-control" id="CardNumber" name="CardNumber" data-max-characters="16" data-ng-model="currentCustomer.CreditCards[paymentInfoTab.CreditCardIndex].CardNumber" placeholder="Card Number" data-ng-maxlength="{{currentCustomer.CreditCards[paymentInfoTab.CreditCardIndex].CreditCard.CardType == 3 ? '15' : '16'}}" data-ng-required="!order.OnHold || order.UpdateCardForCustomer" autocomplete="off" data-ng-disabled="orderEditDisabled">
                                                                <div class="error-container" ng-show="forms.submitted['card'] && forms.card.CardNumber.$invalid">
                                                                    <small class="error" ng-show="forms.card.CardNumber.$error.required">{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.CardNumber")}}</small>
                                                                    <small class="error" ng-show="forms.card.CardNumber.$error.maxlength">{{getValidationMessage("ValidationMessages.FieldLength", ["GeneralFieldNames.CardNumber", currentCustomer.CreditCards[paymentInfoTab.CreditCardIndex].CreditCard.CardType == 3 ? '15' : '16'])}}</small>
                                                                    <small class="error" ng-show="forms.card.CardNumber.$error.server">{{serverMessages.GetMessage('CardNumber', "CreditCards", paymentInfoTab.CreditCardIndex, "card")}}</small>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="ExpirationDateMonth" class="col-md-3 control-label">Expiration Date</label>
                                                            <div class="col-md-2">
                                                                <input type="text" class="form-control number" id="ExpirationDateMonth" numbers-only data-max-characters="2" name="ExpirationDateMonth" data-ng-model="currentCustomer.CreditCards[paymentInfoTab.CreditCardIndex].ExpirationDateMonth" min="1" max="12" ng-pattern="/^\d{1,2}?$/" placeholder="Month" data-ng-required="!order.OnHold || order.UpdateCardForCustomer" autocomplete="off" data-ng-disabled="orderEditDisabled">
                                                                <div class="error-container" ng-show="forms.submitted['card'] && forms.card.ExpirationDateMonth.$invalid">
                                                                    <small class="error" ng-show="forms.card.ExpirationDateMonth.$error.pattern">{{getValidationMessage("ValidationMessages.MonthFormat","GeneralFieldNames.ExpirationDateMonth")}}</small>
                                                                    <small class="error" ng-show="forms.card.ExpirationDateMonth.$error.required">{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.ExpirationDateMonth")}}</small>
                                                                    <small class="error" ng-show="forms.card.ExpirationDateMonth.$error.server">{{serverMessages.GetMessage('ExpirationDateMonth', "CreditCards", paymentInfoTab.CreditCardIndex, "card")}}</small>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-2">
                                                                <input type="text" class="form-control" id="ExpirationDateYear" numbers-only data-max-characters="2" name="ExpirationDateYear" data-ng-model="currentCustomer.CreditCards[paymentInfoTab.CreditCardIndex].ExpirationDateYear" min="1" max="99" ng-pattern="/^\d{1,2}?$/" placeholder="Year" data-ng-required="!order.OnHold || order.UpdateCardForCustomer" autocomplete="off" data-ng-disabled="orderEditDisabled">
                                                                <div class="error-container" ng-show="forms.submitted['card'] && forms.card.ExpirationDateYear.$invalid">
                                                                    <small class="error" ng-show="forms.card.ExpirationDateYear.$error.pattern">{{getValidationMessage("ValidationMessages.YearFormat","GeneralFieldNames.ExpirationDateYear")}}</small>
                                                                    <small class="error" ng-show="forms.card.ExpirationDateYear.$error.required">{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.ExpirationDateYear")}}</small>
                                                                    <small class="error" ng-show="forms.card.ExpirationDateYear.$error.server">{{serverMessages.GetMessage('ExpirationDateYear', "CreditCards", paymentInfoTab.CreditCardIndex, "card")}}</small>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <span class="legend">Billing Address</span>
                                                        <div class="form-group">
                                                            <div class="col-md-3">
                                                            </div>
                                                            <div class="col-md-3">
                                                                <button class="btn btn-info" id="sameCreditCardAsProfile" data-ng-click="makeBillingAsProfileAddress();">Copy Profile</button>
                                                            </div>
                                                        </div>
                                                        <div data-ng-include="'app/modules/customer/partials/address.html'" data-ng-repeat="model in [buildCreditCardAddressForPartial(currentCustomer.CreditCards, paymentInfoTab.CreditCardIndex, order.OnHold && !order.UpdateCardForCustomer)]"></div>
                                                    </div>
                                                </fieldset>
                                            </form>
                                            <form class="form-horizontal" name="forms.oac" data-ng-class="{submitted: forms.submitted['oac']}" novalidate unsaved-warning-form>
                                                <fieldset>
                                                    <div data-ng-if="paymentInfoTab.PaymentMethodType == 2 && currentCustomer.ApprovedPaymentMethods.length > 0 && currentCustomer.Oac">
                                                        <div class="form-group">
                                                            <label for="updateOACForCustomer" class="col-md-3 control-label"></label>
                                                            <div class="col-md-9">
                                                                <div class="checkbox">
                                                                    <label>
                                                                        <input type="checkbox" id="updateOACForCustomer" data-ng-model="order.UpdateOACForCustomer" data-ng-disabled="orderEditDisabled">
                                                                        <strong>Permanently update oac information</strong>
                                                                    </label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="terms" class="col-md-3 control-label">Terms:</label>
                                                            <div class="col-md-9">
                                                                <select class="form-control" id="terms" name="Terms" data-ng-model="currentCustomer.Oac.Terms" data-ng-options="term.Key as term.Text for term in ReferenceData.OacTerms" data-ng-required="!order.OnHold || order.updateOACForCustomer" data-ng-disabled="orderEditDisabled"></select>
                                                                <div class="error-container" ng-show="forms.submitted['oac'] && forms.oac.Terms.$invalid">
                                                                    <small class="error" ng-show="forms.oac.Terms.$error.required">{{getValidationMessage("ValidationMessages.FieldRequired","Terms")}}</small>
                                                                    <small class="error" ng-show="forms.oac.Terms.$error.server">{{serverMessages.GetMessage('Terms', undefined, undefined, "oac")}}</small>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label class="col-md-3 control-label" for="Fob">FOB:</label>
                                                            <div class="col-md-9">
                                                                <select class="form-control" id="Fob" name="Fob" data-ng-model="currentCustomer.Oac.Fob" data-ng-options="fob.Key as fob.Text for fob in ReferenceData.OacFob" data-ng-required="!order.OnHold || order.updateOACForCustomer" data-ng-disabled="orderEditDisabled"></select>
                                                                <div class="error-container" ng-show="forms.submitted['oac'] && forms.oac.Fob.$invalid">
                                                                    <small class="error" ng-show="forms.oac.Fob.$error.required">{{getValidationMessage("ValidationMessages.FieldRequired","Fob")}}</small>
                                                                    <small class="error" ng-show="forms.oac.Fob.$error.server">{{serverMessages.GetMessage('CardType', undefined, undefined, "oac")}}</small>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <span class="legend">Billing Address</span>
                                                        <div class="form-group">
                                                            <div class="col-md-3">
                                                            </div>
                                                            <div class="col-md-3">
                                                                <button class="btn btn-info" id="sameOacAsProfile" data-ng-click="makeBillingAsProfileAddress();">Copy Profile</button>
                                                            </div>
                                                        </div>
                                                        <div data-ng-include="'app/modules/customer/partials/address.html'" data-ng-repeat="model in [buildOrderPaymentPartial(currentCustomer.Oac, order.OnHold && !order.UpdateOACForCustomer)]"></div>
                                                    </div>
                                                </fieldset>
                                            </form>
                                            <form class="form-horizontal" name="forms.check" data-ng-class="{submitted: forms.submitted['check']}" novalidate unsaved-warning-form>
                                                <fieldset>
                                                    <div data-ng-if="paymentInfoTab.PaymentMethodType == 3 && currentCustomer.ApprovedPaymentMethods.length > 0 && currentCustomer.Check">
                                                        <div class="form-group">
                                                            <label for="updateCheckForCustomer" class="col-md-3 control-label"></label>
                                                            <div class="col-md-9">
                                                                <div class="checkbox">
                                                                    <label>
                                                                        <input type="checkbox" id="updateCheckForCustomer" data-ng-model="order.UpdateCheckForCustomer" data-ng-disabled="orderEditDisabled">
                                                                        <strong>Permanently update check information</strong>
                                                                    </label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="checkNumber" class="col-md-3 control-label">Check #</label>
                                                            <div class="col-md-9">
                                                                <input type="text" class="form-control" name="CheckNumber" id="checkNumber" data-ng-model="currentCustomer.Check.CheckNumber" placeholder="Check #" data-ng-required="!order.OnHold || order.UpdateCheckForCustomer" data-ng-disabled="orderEditDisabled">
                                                                <div class="error-container" ng-show="forms.submitted['check'] && forms.check.CheckNumber.$invalid">
                                                                    <small class="error" ng-show="forms.check.CheckNumber.$error.required">{{getValidationMessage("ValidationMessages.FieldRequired","Check Number")}}</small>
                                                                    <small class="error" ng-show="forms.check.CheckNumber.$error.maxlength">{{getValidationMessage("ValidationMessages.FieldLength", ["Check Number", "100"])}}</small>
                                                                    <small class="error" ng-show="forms.check.CheckNumber.$error.server">{{serverMessages.GetMessage('CheckNumber', undefined, undefined, "check")}}</small>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label class="col-md-3 control-label"></label>
                                                            <div class="col-md-9">
                                                                <div class="checkbox">
                                                                    <label>
                                                                        <input type="checkbox" id="PaidInFull" data-ng-model="currentCustomer.Check.PaidInFull" class="ng-pristine ng-valid ng-touched" data-ng-disabled="orderEditDisabled">
                                                                        <strong>Paid In Full - Taxes Included</strong>
                                                                    </label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <span class="legend">Billing Address</span>
                                                        <div class="form-group">
                                                            <div class="col-md-3">
                                                            </div>
                                                            <div class="col-md-3">
                                                                <button class="btn btn-info" id="sameCheckAsProfile" data-ng-click="makeBillingAsProfileAddress();">Copy Profile</button>
                                                            </div>
                                                        </div>
                                                        <div data-ng-include="'app/modules/customer/partials/address.html'" data-ng-repeat="model in [buildOrderPaymentPartial(currentCustomer.Check, order.OnHold && !order.UpdateCheckForCustomer)]"></div>
                                                    </div>
                                                </fieldset>
                                            </form>
                                            <form class="form-horizontal" name="forms.wiretransfer" data-ng-class="{submitted: forms.submitted['wiretransfer']}" novalidate unsaved-warning-form>
                                                <fieldset>
                                                    <div data-ng-if="paymentInfoTab.PaymentMethodType == 6 && currentCustomer.ApprovedPaymentMethods.length > 0 && currentCustomer.WireTransfer">
                                                        <div class="form-group">
                                                            <label for="updateWireTransferForCustomer" class="col-md-3 control-label"></label>
                                                            <div class="col-md-9">
                                                                <div class="checkbox">
                                                                    <label>
                                                                        <input type="checkbox" id="updateWireTransferForCustomer" data-ng-model="order.UpdateWireTransferForCustomer" data-ng-disabled="orderEditDisabled">
                                                                        <strong>Permanently update wire transfer information</strong>
                                                                    </label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="paymentComment" class="col-md-3 control-label">Payment Comment:</label>
                                                            <div class="col-md-9">
                                                                <textarea type="text" id="paymentComment" name="PaymentComment" class="form-control" data-ng-model="currentCustomer.WireTransfer.PaymentComment" placeholder="Payment Comment" rows="3" data-ng-required="!order.OnHold || order.UpdateWireTransferForCustomer" data-ng-maxlength="250" data-ng-disabled="orderEditDisabled"></textarea>
                                                                <div class="error-container" ng-show="forms.submitted['wiretransfer'] && forms.wiretransfer.PaymentComment.$invalid">
                                                                    <small class="error" ng-show="forms.wiretransfer.PaymentComment.$error.required">{{getValidationMessage("ValidationMessages.FieldRequired","Payment Comment")}}</small>
                                                                    <small class="error" ng-show="forms.wiretransfer.PaymentComment.$error.maxlength">{{getValidationMessage("ValidationMessages.FieldLength", ["Payment Comment", "250"])}}</small>
                                                                    <small class="error" ng-show="forms.wiretransfer.PaymentComment.$error.server">{{serverMessages.GetMessage('PaymentComment')}}</small>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <span class="legend">Billing Address</span>
                                                        <div class="form-group">
                                                            <div class="col-md-3">
                                                            </div>
                                                            <div class="col-md-3">
                                                                <button class="btn btn-info" data-ng-click="makeBillingAsProfileAddress();">Copy Profile</button>
                                                            </div>
                                                        </div>
                                                        <div data-ng-include="'app/modules/customer/partials/address.html'" data-ng-repeat="model in [buildOrderPaymentPartial(currentCustomer.WireTransfer, order.OnHold && !order.UpdateWireTransferForCustomer)]"></div>
                                                    </div>
                                                </fieldset>
                                            </form>
                                            <form class="form-horizontal" name="forms.marketing" data-ng-class="{submitted: forms.submitted['marketing']}" novalidate unsaved-warning-form>
                                                <fieldset>
                                                    <div data-ng-if="paymentInfoTab.PaymentMethodType == 7 && currentCustomer.ApprovedPaymentMethods.length > 0 && currentCustomer.Marketing">
                                                        <div class="form-group">
                                                            <label for="updateMarketingForCustomer" class="col-md-3 control-label"></label>
                                                            <div class="col-md-9">
                                                                <div class="checkbox">
                                                                    <label>
                                                                        <input type="checkbox" id="updateMarketingForCustomer" data-ng-model="order.UpdateMarketingForCustomer" data-ng-disabled="orderEditDisabled">
                                                                        <strong>Permanently update marketing information</strong>
                                                                    </label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="marketingPromotionType" class="col-md-3 control-label">Type:</label>
                                                            <div class="col-md-9">
                                                                <select class="form-control" id="marketingPromotionType" name="MarketingPromotionType" data-ng-model="currentCustomer.Marketing.MarketingPromotionType" data-ng-options="term.Key as term.Text for term in ReferenceData.MarketingPromotionTypes" data-ng-disabled="orderEditDisabled" data-ng-required="!order.OnHold || order.UpdateMarketingForCustomer">
                                                                    <option value="" selected hidden />
                                                                </select>
                                                                <div class="error-container" ng-show="forms.submitted['marketing'] && forms.marketing.MarketingPromotionType.$invalid">
                                                                    <small class="error" ng-show="forms.marketing.MarketingPromotionType.$error.required">{{getValidationMessage("ValidationMessages.FieldRequired","Type")}}</small>
                                                                    <small class="error" ng-show="forms.marketing.MarketingPromotionType.$error.server">{{serverMessages.GetMessage('MarketingPromotionType')}}</small>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="paymentComment" class="col-md-3 control-label">Payment Comment:</label>
                                                            <div class="col-md-9">
                                                                <textarea type="text" id="paymentComment" name="PaymentComment" class="form-control" data-ng-model="currentCustomer.Marketing.PaymentComment" placeholder="Payment Comment" rows="3" data-ng-required="!order.OnHold || order.UpdateMarketingForCustomer" data-ng-maxlength="250" data-ng-disabled="orderEditDisabled"></textarea>
                                                                <div class="error-container" ng-show="forms.submitted['marketing'] && forms.marketing.PaymentComment.$invalid">
                                                                    <small class="error" ng-show="forms.marketing.PaymentComment.$error.required">{{getValidationMessage("ValidationMessages.FieldRequired","Payment Comment")}}</small>
                                                                    <small class="error" ng-show="forms.marketing.PaymentComment.$error.maxlength">{{getValidationMessage("ValidationMessages.FieldLength", ["Payment Comment", "250"])}}</small>
                                                                    <small class="error" ng-show="forms.marketing.PaymentComment.$error.server">{{serverMessages.GetMessage('PaymentComment')}}</small>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <span class="legend">Billing Address</span>
                                                        <div class="form-group">
                                                            <div class="col-md-3">
                                                            </div>
                                                            <div class="col-md-3">
                                                                <button class="btn btn-info" data-ng-click="makeBillingAsProfileAddress();">Copy Profile</button>
                                                            </div>
                                                        </div>
                                                        <div data-ng-include="'app/modules/customer/partials/address.html'" data-ng-repeat="model in [buildOrderPaymentPartial(currentCustomer.Marketing, order.OnHold && !order.UpdateMarketingForCustomer)]"></div>
                                                    </div>
                                                </fieldset>
                                            </form>
                                            <form class="form-horizontal" name="forms.vcwellness" data-ng-class="{submitted: forms.submitted['vcwellness']}" novalidate unsaved-warning-form>
                                                <fieldset>
                                                    <div data-ng-if="paymentInfoTab.PaymentMethodType == 8 && currentCustomer.ApprovedPaymentMethods.length > 0 && currentCustomer.VCWellness">
                                                        <div class="form-group">
                                                            <label for="updateVCWellnessForCustomer" class="col-md-3 control-label"></label>
                                                            <div class="col-md-9">
                                                                <div class="checkbox">
                                                                    <label>
                                                                        <input type="checkbox" id="updateVCWellnessForCustomer" data-ng-model="order.UpdateVCWellnessForCustomer" data-ng-disabled="orderEditDisabled">
                                                                        <strong>Permanently update VC wellness employee program information</strong>
                                                                    </label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="paymentComment" class="col-md-3 control-label">Payment Comment:</label>
                                                            <div class="col-md-9">
                                                                <textarea type="text" id="paymentComment" name="PaymentComment" class="form-control" data-ng-model="currentCustomer.VCWellness.PaymentComment" placeholder="Payment Comment" rows="3" data-ng-required="!order.OnHold || order.UpdateVCWellnessForCustomer" data-ng-maxlength="250" data-ng-disabled="orderEditDisabled"></textarea>
                                                                <div class="error-container" ng-show="forms.submitted['vcwellness'] && forms.vcwellness.PaymentComment.$invalid">
                                                                    <small class="error" ng-show="forms.vcwellness.PaymentComment.$error.required">{{getValidationMessage("ValidationMessages.FieldRequired","Payment Comment")}}</small>
                                                                    <small class="error" ng-show="forms.vcwellness.PaymentComment.$error.maxlength">{{getValidationMessage("ValidationMessages.FieldLength", ["Payment Comment", "250"])}}</small>
                                                                    <small class="error" ng-show="forms.vcwellness.PaymentComment.$error.server">{{serverMessages.GetMessage('PaymentComment')}}</small>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <span class="legend">Billing Address</span>
                                                        <div class="form-group">
                                                            <div class="col-md-3">
                                                            </div>
                                                            <div class="col-md-3">
                                                                <button class="btn btn-info" data-ng-click="makeBillingAsProfileAddress();">Copy Profile</button>
                                                            </div>
                                                        </div>
                                                        <div data-ng-include="'app/modules/customer/partials/address.html'" data-ng-repeat="model in [buildOrderPaymentPartial(currentCustomer.VCWellness, order.OnHold && !order.UpdateVCWellnessForCustomer)]"></div>
                                                    </div>
                                                </fieldset>
                                            </form>
                                        </div>
                                        <div data-ng-if="id" data-ng-include="'app/modules/order/partials/updateOrderBillingSection.html'"></div>
                                    </div>
                                </spinner-overlay>
                            </div>
                        </div>
                    </uib-tab>
                    <uib-tab heading="Customer Notes" active="customerNotesTab.active">
                        <div class="container-fluid">
                            <div ng-controller="manageCustomerNotesController" onload="name = 'CustomerNotes'" data-ng-include="'app/modules/customer/partials/manageCustomerNotes.html'"></div>
                        </div>
                    </uib-tab>
                    <uib-tab heading="Files" active="customerFilesTab.active">
                        <div class="container-fluid">
                            <div ng-controller="manageCustomerFilesController" onload="name = 'CustomerFiles'" data-ng-include="'app/modules/customer/partials/manageCustomerFiles.html'"></div>
                        </div>
                    </uib-tab>
                </uib-tabset>
            </div>
        </div>
    </div>
</div>