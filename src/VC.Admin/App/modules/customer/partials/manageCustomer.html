<div class="container-fluid customer-edit">
    <div class="left-pane-controls">
        <div class="well container-fluid">
            <div>
                <button data-ng-click="save()" class="btn btn-success width-160px" unsaved-warning-clear>Save</button>
            </div>
            <div class="margin-top-10px">
                <button cancel-button-default-state="index.oneCol.manageCustomers" cancel-button class="btn btn-default width-160px" unsaved-warning-clear>Cancel</button>
            </div>
            <div data-ng-if="currentCustomer.LoginLocked" class="margin-top-10px">
                <button class="btn btn-purple width-160px" data-ng-click="unlockCustomer();" ladda="unlockCustomerTracker.active()">Unlock Login</button>
            </div>
            <div class="margin-top-10px">
                <button class="btn btn-primary width-160px" ui-sref="index.oneCol.manageCustomers">Manage All</button>
            </div>
        </div>
        <div ng-controller="objectHistorySectionController" onload="name = 'History'" data-ng-include="'app/modules/customer/partials/customerObjectHistorySection.html'"></div>
    </div>
    <div class="right-pane-main">
        <div class="container-fluid">
            <div class="container-fluid">
                <div data-ng-if="currentCustomer.Id" class="row">
                    <span class="legend top">
                        <span class="item">Customer: <strong>{{currentCustomer.ProfileAddress.FirstName}} {{currentCustomer.ProfileAddress.LastName}}</strong></span>
                        <span class="item">Customer ID: <strong>{{currentCustomer.Id}}</strong></span>
                        <span class="item">Type: <strong>{{getReferenceItem(ReferenceData.CustomerTypes, currentCustomer.CustomerType).Text}}</strong></span>
                    </span>
                </div>
                <div class="row">
                    <uib-tabset active="options.activeTabIndex">
                        <uib-tab heading="Account Profile" index="accountProfileTab.index">
                            <div class="container container-left">
                                <div class="well row">
                                    <spinner-overlay data-loading="addEditTracker.active()">
                                        <form class="form-horizontal" name="forms.profile" data-ng-submit="save()" data-ng-class="{submitted: forms.submitted['profile']}" novalidate unsaved-warning-form>
                                            <fieldset>
                                                <div data-ng-if="currentCustomer.Id && options.DBStatusCode != 4 &&  options.DBStatusCode != 5" class="form-group">
                                                    <label for="" class="col-md-3 control-label"></label>
                                                    <div class="col-md-9">
                                                        <button class="btn btn-primary width-160px margin-right-25px" ui-sref="index.oneCol.orderAdd({idcustomer:currentCustomer.Id})">Place Order</button>
                                                        <button class="btn btn-primary-orange width-160px" data-ng-click="loginAsCustomer()" ladda="loginAsCustomerTracker.active()" data-ng-if="currentCustomer.Id && currentCustomer.StatusCode == 2">Log In As Customer</button>
                                                    </div>
                                                </div>
                                                <div data-ng-if="currentCustomer.Id && options.DBStatusCode == 5" class="form-group">
                                                    <label for="active" class="col-md-3 control-label">Active</label>
                                                    <div class="col-md-9">
                                                        <div class="checkbox">
                                                            <label><input type="checkbox" id="active" name="ActivatePending" data-ng-model="currentCustomer.ActivatePending" /></label>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label for="" class="col-md-3 control-label">Customer ID</label>
                                                    <div class="col-md-9 form-control-static" data-ng-if="currentCustomer.Id">
                                                        <span>{{currentCustomer.Id}}</span>
                                                    </div>
                                                </div>
                                                <span class="legend">Customer Type</span>
                                                <div class="form-group">
                                                    <div class="col-md-3"></div>
                                                    <div class="col-md-9">
                                                        <select class="form-control" id="customerType" data-ng-model="currentCustomer.CustomerType" data-ng-change="filterCountries();" data-ng-options="customerType.Key as customerType.Text for customerType in ReferenceData.CustomerTypes"></select>
                                                    </div>
                                                </div>
                                                <div data-ng-if="currentCustomer.CustomerType == 2">
                                                    <div class="form-group">
                                                        <label for="taxExempt" class="col-md-3 control-label">Tax Exempt</label>
                                                        <div class="col-md-9">
                                                            <select class="form-control" name="TaxExempt" id="taxExempt" data-ng-model="currentCustomer.TaxExempt" data-ng-options="taxExempt.Key as taxExempt.Text for taxExempt in ReferenceData.TaxExempts" required></select>
                                                            <div class="error-container" ng-show="forms.submitted['profile'] && forms.profile.TaxExempt.$invalid">
                                                                <small class="error" ng-show="forms.profile.TaxExempt.$error.required">{{getValidationMessage("ValidationMessages.FieldRequired","Tax Exempt")}}</small>
                                                                <small class="error" ng-show="forms.profile.TaxExempt.$error.server">{{serverMessages.GetMessage('TaxExempt')}}</small>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="website" class="col-md-3 control-label">Website</label>
                                                        <div class="col-md-9">
                                                            <input type="text" name="Website" class="form-control" id="website" data-ng-model="currentCustomer.Website" placeholder="Website" required data-ng-maxlength="100" autocomplete="off">
                                                            <div class="error-container" ng-show="forms.submitted['profile'] && forms.profile.Website.$invalid">
                                                                <small class="error" ng-show="forms.profile.Website.$error.required">{{getValidationMessage("ValidationMessages.FieldRequired","Website")}}</small>
                                                                <small class="error" ng-show="forms.profile.Website.$error.maxlength">{{getValidationMessage("ValidationMessages.FieldLength", ["Website", "100"])}}</small>
                                                                <small class="error" ng-show="forms.profile.Website.$error.server">{{serverMessages.GetMessage('Website')}}</small>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="promoting" class="col-md-3 control-label">Promoting Websites</label>
                                                        <div class="col-md-9">
                                                            <textarea type="text" name="PromotingWebsites" class="form-control" data-ng-model="currentCustomer.PromotingWebsites" id="promoting" placeholder="Promoting Websites" rows="10" required data-ng-maxlength="1000"></textarea>
                                                            <div class="error-container" ng-show="forms.submitted['profile'] && forms.profile.PromotingWebsites.$invalid">
                                                                <small class="error" ng-show="forms.profile.PromotingWebsites.$error.required">{{getValidationMessage("ValidationMessages.FieldRequired","Promoting Websites")}}</small>
                                                                <small class="error" ng-show="forms.profile.PromotingWebsites.$error.maxlength">{{getValidationMessage("ValidationMessages.FieldLength", ["Promoting Websites", "1000"])}}</small>
                                                                <small class="error" ng-show="forms.profile.PromotingWebsites.$error.server">{{serverMessages.GetMessage('Promoting Websites')}}</small>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="tier" class="col-md-3 control-label">Tier</label>
                                                        <div class="col-md-9">
                                                            <select class="form-control" id="tier" name="Tier" data-ng-model="currentCustomer.Tier" data-ng-options="tier.Key as tier.Text for tier in ReferenceData.Tiers" required></select>
                                                            <div class="error-container" ng-show="forms.submitted['profile'] && forms.profile.Tier.$invalid">
                                                                <small class="error" ng-show="forms.profile.Tier.$error.required">{{getValidationMessage("ValidationMessages.FieldRequired","Tier")}}</small>
                                                                <small class="error" ng-show="forms.profile.Tier.$error.server">{{serverMessages.GetMessage('Tier')}}</small>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="tradeClass" class="col-md-3 control-label">Trade Class</label>
                                                        <div class="col-md-9">
                                                            <select class="form-control" name="TradeClass" id="tradeClass" data-ng-model="currentCustomer.TradeClass" data-ng-options="tradeClass.Key as tradeClass.Text for tradeClass in ReferenceData.TradeClasses" required></select>
                                                            <div class="error-container" ng-show="forms.submitted['profile'] && forms.profile.TradeClass.$invalid">
                                                                <small class="error" ng-show="forms.profile.TradeClass.$error.required">{{getValidationMessage("ValidationMessages.FieldRequired","Trade Class")}}</small>
                                                                <small class="error" ng-show="forms.profile.TradeClass.$error.server">{{serverMessages.GetMessage('TradeClass')}}</small>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="col-md-3 control-label">Inception Date</label>
                                                        <div class="col-md-9">
                                                            <p class="input-group">
                                                                <input type="text" name="InceptionDate" class="form-control" uib-datepicker-popup="{{UIOptions.DatepickerFormat}}" ng-model="currentCustomer.InceptionDate" is-open="inceptionDateOpened" required autocomplete="off" />
                                                                <span class="input-group-btn">
                                                                    <button type="button" class="btn btn-default" ng-disabled="false" ng-click="stopPropagation($event); inceptionDateOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button>
                                                                </span>
                                                            </p>
                                                            <div class="error-container" ng-show="forms.submitted['profile'] && forms.profile.InceptionDate.$invalid">
                                                                <small class="error" ng-show="forms.profile.InceptionDate.$error.required">{{getValidationMessage("ValidationMessages.FieldRequired","Inception Date")}}</small>
                                                                <small class="error" ng-show="forms.profile.InceptionDate.$error.server">{{serverMessages.GetMessage('InceptionDate')}}</small>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <span class="legend">Profile Details</span>
                                                <div data-ng-if="currentCustomer.CustomerType == 1" class="form-group">
                                                    <label for="linked" class="col-md-3 control-label">Linked to Affiliate</label>
                                                    <div class="col-md-3">
                                                        <input type="text" name="IdAffiliate" class="form-control" id="linked" data-ng-model="currentCustomer.IdAffiliate" numbers-only numbers-only-deny-zero placeholder="Linked to Affiliate" autocomplete="off">
                                                        <div class="error-container" ng-show="forms.submitted['profile'] && forms.profile.IdAffiliate.$invalid">
                                                            <small class="error" ng-show="forms.profile.IdAffiliate.$error.server">{{serverMessages.GetMessage('IdAffiliate')}}</small>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div data-ng-include="'app/modules/customer/partials/profileAddress.html'" data-ng-repeat="model in [accountProfileTab]"></div>
                                                <div class="form-group" data-ng-if="editMode">
                                                    <label for="currentEmail" class="col-md-3 control-label">Current Email</label>
                                                    <div class="col-md-9 form-control-static">
                                                        <span data-ng-bind="currentCustomer.Email"></span>
                                                    </div>
                                                </div>
                                                <div data-ng-if="!options.OverrideEmail" class="form-group">
                                                    <label for="enterEmail" class="col-md-3 control-label">Enter Email</label>
                                                    <div class="col-md-9">
                                                        <input type="email" name="Email" class="form-control" id="enterEmail" data-ng-model="currentCustomer.newEmail" placeholder="Enter Email" data-ng-required="!editMode || !currentCustomer.Email" data-ng-maxlength="100" autocomplete="off">
                                                        <div class="error-container" ng-show="forms.submitted['profile'] && forms.profile.Email.$invalid">
                                                            <small class="error" ng-show="forms.profile.Email.$error.required">{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Email")}}</small>
                                                            <small class="error" ng-show="forms.profile.Email.$error.email">{{getValidationMessage("ValidationMessages.EmailFormat","GeneralFieldNames.Email")}}</small>
                                                            <small class="error" ng-show="forms.profile.Email.$error.maxlength">{{getValidationMessage("ValidationMessages.FieldLength", ["GeneralFieldNames.Email", "100"])}}</small>
                                                            <small class="error" ng-show="forms.profile.Email.$error.server">{{serverMessages.GetMessage('Email')}}</small>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div data-ng-if="!options.OverrideEmail" class="form-group">
                                                    <label for="reEnterEmail" class="col-md-3 control-label">Re-enter Email</label>
                                                    <div class="col-md-9">
                                                        <input type="email" name="EmailConfirm" class="form-control" id="reEnterEmail" data-ng-model="currentCustomer.uiEmailConfirm" placeholder="Re-enter Email" data-ng-required="!editMode || !currentCustomer.Email" data-ng-maxlength="100" autocomplete="off">
                                                        <div class="error-container" ng-show="forms.submitted['profile'] && forms.profile.EmailConfirm.$invalid">
                                                            <small class="error" ng-show="forms.profile.EmailConfirm.$error.required">{{getValidationMessage("ValidationMessages.FieldRequired","Email Confirmation")}}</small>
                                                            <small class="error" ng-show="forms.profile.EmailConfirm.$error.email">{{getValidationMessage("ValidationMessages.EmailFormat","Email Confirmation")}}</small>
                                                            <small class="error" ng-show="forms.profile.EmailConfirm.$error.maxlength">{{getValidationMessage("ValidationMessages.FieldLength", ["Email Confirmation", "100"])}}</small>
                                                            <small class="error" ng-show="forms.profile.EmailConfirm.$error.server">{{serverMessages.GetMessage('EmailConfirm')}}</small>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div data-ng-if="options.DBStatusCode == 1 && !currentCustomer.Email" class="form-group">
                                                    <label for="active" class="col-md-3 control-label">Override Email</label>
                                                    <div class="col-md-9">
                                                        <div class="checkbox">
                                                            <label><input type="checkbox" id="overrideEmail" name="OverrideEmail" data-ng-model="options.OverrideEmail" /></label>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-group" data-ng-if="editMode && currentCustomer.Email">
                                                    <div class="col-md-3"></div>
                                                    <div class="col-md-9">
                                                        <button class="btn btn-info" data-ng-if="currentCustomer.StatusCode == 2" ladda="resetTracker.active()" data-ng-click="resetPassword()">Send Reset Password Email</button>
                                                        <button class="btn btn-info" data-ng-if="currentCustomer.StatusCode == 1" ladda="resendTracker.active()" data-ng-click="resend()">Resend Activation Email</button>
                                                    </div>
                                                </div>
                                                <span class="legend">Approved Payment Methods</span>
                                                <div class="form-group">
                                                    <div class="col-md-3"></div>
                                                    <div class="col-md-9">
                                                        <label class="checkbox-inline margin-left-zero margin-right-25px" data-ng-repeat="paymentMethod in paymentMethods">
                                                            <input type="checkbox" data-ng-click="togglePaymentMethodSelection(paymentMethod)" data-ng-checked="currentCustomer.ApprovedPaymentMethods.indexOf(paymentMethod.Id) > -1" autocomplete="off">
                                                            {{paymentMethod.Name}}
                                                        </label>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label for="state" class="col-md-3 control-label">Default Payment Method</label>
                                                    <div class="col-md-9">
                                                        <select class="form-control" name="DefaultPaymentMethod" data-ng-model="currentCustomer.DefaultPaymentMethod" data-ng-options="paymentMethod.Id as paymentMethod.Name for paymentMethod in selectedPaymentMethods" required>
                                                            <option value="">Select Default Payment Method</option>
                                                        </select>
                                                        <div class="error-container" ng-show="forms.submitted['profile'] && forms.profile.DefaultPaymentMethod.$invalid">
                                                            <small class="error" ng-show="forms.profile.DefaultPaymentMethod.$error.required">{{getValidationMessage("ValidationMessages.FieldRequired","Default Payment Method")}}</small>
                                                            <small class="error" ng-show="forms.profile.DefaultPaymentMethod.$error.server">{{serverMessages.GetMessage('DefaultPaymentMethod')}}</small>
                                                        </div>
                                                    </div>
                                                </div>
                                                <span class="legend">Automatic Order Specific Notes</span>
                                                <div class="form-group">
                                                    <div class="col-md-3"></div>
                                                    <div class="col-md-9">
                                                        <label class="checkbox-inline margin-left-zero margin-right-25px" data-ng-repeat="orderNote in orderNotes">
                                                            <input type="checkbox" data-ng-click="toggleOrderNoteSelection(orderNote.Id)" data-ng-checked="currentCustomer.OrderNotes.indexOf(orderNote.Id) > -1" autocomplete="off">
                                                            {{orderNote.Name}}
                                                        </label>
                                                    </div>
                                                </div>
                                                <span class="legend">DNM / DNR</span>
                                                <div class="form-group">
                                                    <div class="col-md-3"></div>
                                                    <div class="col-md-9">
                                                        <label class="checkbox-inline col-md-3">
                                                            <input type="checkbox" id="doNotMail" data-ng-model="currentCustomer.DoNotMail" autocomplete="off">
                                                            Do Not Mail
                                                        </label>
                                                        <label class="checkbox-inline col-md-3">
                                                            <input type="checkbox" id="doNotRent" data-ng-model="currentCustomer.DoNotRent" autocomplete="off">
                                                            Do Not Rent
                                                        </label>
                                                    </div>
                                                </div>
                                                <div data-ng-if="currentCustomer.Email">
                                                    <span class="legend">Product Review Email Status</span>
                                                    <div class="form-group">
                                                        <label for="productReviewEmail" class="col-md-3 control-label">Enabled</label>
                                                        <div class="col-md-9">
                                                            <div class="checkbox">
                                                                <label>
                                                                    <input type="checkbox" id="productReviewEmail" data-ng-model="currentCustomer.ProductReviewEmailEnabled">
                                                                </label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div data-ng-if="currentCustomer.CustomerType == 1">
                                                    <span class="legend">HealthWise Customer Status</span>
                                                    <div class="form-group">
                                                        <label for="HasHealthwiseOrders" class="col-md-3 control-label">Enabled</label>
                                                        <div class="col-md-9">
                                                            <div class="checkbox">
                                                                <label>
                                                                    <input type="checkbox" id="HasHealthwiseOrders" name="HasHealthwiseOrders" data-ng-model="currentCustomer.HasHealthwiseOrders">
                                                                </label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <span data-ng-if="currentCustomer.Id && currentCustomer.StatusCode!=5" class="legend">Suspend User Account</span>
                                                <div data-ng-if="currentCustomer.Id && currentCustomer.StatusCode!=5" class="form-group">
                                                    <label for="suspendUserAccount" class="col-md-3 control-label">Suspend User Account</label>
                                                    <div class="col-md-9">
                                                        <div class="checkbox">
                                                            <label>
                                                                <input type="checkbox" id="suspendUserAccount" data-ng-click="toggleSuspended()" data-ng-checked="currentCustomer.StatusCode == 4">
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-group" data-ng-if="currentCustomer.StatusCode == 4">
                                                    <label for="reason" class="col-md-3 control-label">Reason</label>
                                                    <div class="col-md-9">
                                                        <textarea type="text" name="Reason" class="form-control" id="reason" placeholder="Reason" rows="10" data-ng-model="currentCustomer.Reason" required data-ng-maxlength="1000"></textarea>
                                                        <div class="error-container" ng-show="forms.submitted['profile'] && forms.profile.Reason.$invalid">
                                                            <small class="error" ng-show="forms.profile.Reason.$error.required">{{getValidationMessage("ValidationMessages.FieldRequired","Reason")}}</small>
                                                            <small class="error" ng-show="forms.profile.Reason.$error.maxlength">{{getValidationMessage("ValidationMessages.FieldLength", ["Reason", "1000"])}}</small>
                                                            <small class="error" ng-show="forms.profile.Reason.$error.server">{{serverMessages.GetMessage('Reason')}}</small>
                                                        </div>
                                                    </div>
                                                </div>
                                            </fieldset>
                                        </form>
                                    </spinner-overlay>
                                </div>
                            </div>
                        </uib-tab>
                        <uib-tab heading="Shipping Address" index="shippingAddressTab.index">
                            <div class="container container-left">
                                <div class="well row">
                                    <spinner-overlay data-loading="addEditTracker.active()">
                                        <div data-ng-if="!editMode" data-ng-include="'app/modules/customer/partials/addShippingSection.html'"></div>
                                        <div data-ng-if="editMode" data-ng-include="'app/modules/customer/partials/updateShippingSection.html'"></div>
                                    </spinner-overlay>
                                </div>
                            </div>
                        </uib-tab>
                        <uib-tab heading="Payment Information" index="paymentInfoTab.index">
                            <div class="container container-left">
                                <div class="well row">
                                    <spinner-overlay data-loading="addEditTracker.active()">
                                        <div class="form-horizontal">
                                            <span class="legend">Select Payment Method</span>
                                            <div class="form-group" data-ng-if="currentCustomer.ApprovedPaymentMethods.indexOf(1) >= 0">
                                                <div class="col-md-3">
                                                </div>
                                                <div class="col-md-6">
                                                    <button class="btn btn-info" data-ng-show="paymentInfoTab.PaymentMethodType == 1" data-ng-click="setNewCreditCard();">Add New Credit Card</button>
                                                </div>
                                                <div class="col-md-3">
                                                </div>
                                            </div>
                                            <div class="form-group" data-ng-if="currentCustomer.ApprovedPaymentMethods.indexOf(1) >= 0">
                                                <div class="radio col-md-3">
                                                    <label class="control-label">
                                                        <input type="radio" class="" data-ng-model="paymentInfoTab.PaymentMethodType" value="1" id="creditCard">
                                                        Credit Card
                                                    </label>
                                                </div>
                                                <div class="col-md-6">
                                                    <select class="form-control" id="selectPaymentMethod" data-ng-change="cardChanged()" data-ng-disabled="paymentInfoTab.PaymentMethodType != 1 || !currentCustomer.CreditCards || currentCustomer.CreditCards.length == 0" data-ng-model="paymentInfoTab.CreditCardIndex"
                                                            data-ng-options="idx as (getCreditCardTypeName(creditCard.CardType) + ', ending in ' + getLast4(creditCard.CardNumber) + (creditCard.Default ? ' (Default)' : '')) for (idx, creditCard) in currentCustomer.CreditCards"></select>
                                                </div>
                                                <div class="col-md-3 padding-l-0px">
                                                    <button class="btn btn-danger pull-right" data-ng-show="currentCustomer.CreditCards[paymentInfoTab.CreditCardIndex] && paymentInfoTab.PaymentMethodType == 1 && (!currentCustomer.CreditCards[paymentInfoTab.CreditCardIndex].Default || currentCustomer.CreditCards.length==1)" data-ng-click="deleteSelectedCreditCard();">Delete</button>
                                                    <button class="btn btn-success pull-right margin-right-8px" data-ng-show="currentCustomer.CreditCards && currentCustomer.CreditCards.length>0 && paymentInfoTab.PaymentMethodType == 1 && !currentCustomer.CreditCards[paymentInfoTab.CreditCardIndex].Default" data-ng-click="setDefaultCreditCard();">Set as Default</button>
                                                </div>
                                            </div>
                                            <div data-ng-if="currentCustomer.ApprovedPaymentMethods.indexOf(1) >= 0 && paymentInfoTab.PaymentMethodType==1">
                                                <div class="form-group">
                                                    <div class="col-md-3"></div>
                                                    <div class="col-md-9">
                                                        <strong>Credit card data is only validated when adding or replacing masked credit card data.</strong>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <div class="col-md-12">
                                                        <button class="btn btn-danger pull-right" data-ng-show="currentCustomer.CreditCards.length>0 && paymentInfoTab.PaymentMethodType == 1" data-ng-click="deleteAllCreditCards();">Delete All Credit Cards</button>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group" data-ng-if="currentCustomer.ApprovedPaymentMethods.indexOf(2) >= 0">
                                                <div class="col-md-3">
                                                    <div class="radio">
                                                        <label class="control-label">
                                                            <input type="radio" class="" data-ng-model="paymentInfoTab.PaymentMethodType" value="2" id="oac">
                                                            On Approved Credit
                                                        </label>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div data-ng-if="paymentInfoTab.PaymentMethodType == 2 && currentCustomer.ApprovedPaymentMethods.length > 0 && !currentCustomer.Oac">
                                                        <button class="btn btn-info" data-ng-click="setNewOac();">Add New OAC</button>
                                                    </div>
                                                    <div data-ng-if="paymentInfoTab.PaymentMethodType == 2 && currentCustomer.ApprovedPaymentMethods.length > 0 && currentCustomer.Oac">
                                                        <button class="btn btn-danger" data-ng-click="currentCustomer.Oac = undefined;">Delete</button>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group" data-ng-if="currentCustomer.ApprovedPaymentMethods.indexOf(3) >= 0">
                                                <div class="col-md-3">
                                                    <div class="radio">
                                                        <label class="control-label">
                                                            <input type="radio" class="" data-ng-model="paymentInfoTab.PaymentMethodType" value="3" id="check">
                                                            Check
                                                        </label>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div data-ng-if="paymentInfoTab.PaymentMethodType == 3 && currentCustomer.ApprovedPaymentMethods.length > 0 && !currentCustomer.Check">
                                                        <button class="btn btn-info" data-ng-click="setNewCheck();">Add New Check</button>
                                                    </div>
                                                    <div data-ng-if="paymentInfoTab.PaymentMethodType == 3 && currentCustomer.ApprovedPaymentMethods.length > 0 && currentCustomer.Check">
                                                        <button class="btn btn-danger" data-ng-click="currentCustomer.Check = undefined;">Delete</button>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group" data-ng-if="currentCustomer.ApprovedPaymentMethods.indexOf(6) >= 0">
                                                <div class="col-md-3">
                                                    <div class="radio">
                                                        <label class="control-label">
                                                            <input type="radio" class="" data-ng-model="paymentInfoTab.PaymentMethodType" value="6" id="wiretransfer">
                                                            Wire Transfer
                                                        </label>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div data-ng-if="paymentInfoTab.PaymentMethodType == 6 && currentCustomer.ApprovedPaymentMethods.length > 0 && !currentCustomer.WireTransfer">
                                                        <button class="btn btn-info" data-ng-click="setNewWireTransfer();">Add New Wire Transfer</button>
                                                    </div>
                                                    <div data-ng-if="paymentInfoTab.PaymentMethodType == 6 && currentCustomer.ApprovedPaymentMethods.length > 0 && currentCustomer.WireTransfer">
                                                        <button class="btn btn-danger" data-ng-click="currentCustomer.WireTransfer = undefined;">Delete</button>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group" data-ng-if="currentCustomer.ApprovedPaymentMethods.indexOf(7) >= 0">
                                                <div class="col-md-3">
                                                    <div class="radio">
                                                        <label class="control-label">
                                                            <input type="radio" class="" data-ng-model="paymentInfoTab.PaymentMethodType" value="7" id="marketing">
                                                            Marketing
                                                        </label>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div data-ng-if="paymentInfoTab.PaymentMethodType == 7 && currentCustomer.ApprovedPaymentMethods.length > 0 && !currentCustomer.Marketing">
                                                        <button class="btn btn-info" data-ng-click="setNewMarketing();">Add New Marketing</button>
                                                    </div>
                                                    <div data-ng-if="paymentInfoTab.PaymentMethodType == 7 && currentCustomer.ApprovedPaymentMethods.length > 0 && currentCustomer.Marketing">
                                                        <button class="btn btn-danger" data-ng-click="currentCustomer.Marketing = undefined;">Delete</button>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group" data-ng-if="currentCustomer.ApprovedPaymentMethods.indexOf(8) >= 0">
                                                <div class="col-md-3">
                                                    <div class="radio">
                                                        <label class="">
                                                            <input type="radio" class="" data-ng-model="paymentInfoTab.PaymentMethodType" value="8" id="vcwellness">
                                                            VC Wellness Employee Program
                                                        </label>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div data-ng-if="paymentInfoTab.PaymentMethodType == 8 && currentCustomer.ApprovedPaymentMethods.length > 0 && !currentCustomer.VCWellness">
                                                        <button class="btn btn-info" data-ng-click="setNewVCWellness();">Add New VC Wellness Employee Program</button>
                                                    </div>
                                                    <div data-ng-if="paymentInfoTab.PaymentMethodType == 8 && currentCustomer.ApprovedPaymentMethods.length > 0 && currentCustomer.VCWellness">
                                                        <button class="btn btn-danger" data-ng-click="currentCustomer.VCWellness = undefined;">Delete</button>
                                                    </div>
                                                </div>
                                            </div>
                                            <hr />
                                            <form class="form-horizontal" name="forms.card" data-ng-class="{submitted: forms.submitted['card']}" novalidate unsaved-warning-form>
                                                <fieldset>
                                                    <div data-ng-if="paymentInfoTab.PaymentMethodType == 1 && currentCustomer.ApprovedPaymentMethods.length > 0 && currentCustomer.CreditCards[paymentInfoTab.CreditCardIndex]">
                                                        <div class="form-group">
                                                            <label for="NameOnCard" class="col-md-3 control-label">Name on Card</label>
                                                            <div class="col-md-9">
                                                                <input type="text" class="form-control" name="NameOnCard" id="NameOnCard" data-ng-model="currentCustomer.CreditCards[paymentInfoTab.CreditCardIndex].NameOnCard" placeholder="Name on Card" required autocomplete="off">
                                                                <div class="error-container" ng-show="forms.submitted['card'] && forms.card.NameOnCard.$invalid">
                                                                    <small class="error" ng-show="forms.card.NameOnCard.$error.required">{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.NameOnCard")}}</small>
                                                                    <small class="error" ng-show="forms.card.NameOnCard.$error.maxlength">{{getValidationMessage("ValidationMessages.FieldLength", ["GeneralFieldNames.NameOnCard", "100"])}}</small>
                                                                    <small class="error" ng-show="!forms.card.NameOnCard.$error.required && !forms.card.NameOnCard.$error.maxlength && forms.card.NameOnCard.$error.server">{{serverMessages.GetMessage('NameOnCard', "CreditCards", paymentInfoTab.CreditCardIndex, "card")}}</small>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="CardType" class="col-md-3 control-label">Card Type</label>
                                                            <div class="col-md-9">
                                                                <select class="form-control" id="CardType" name="CardType" data-ng-model="currentCustomer.CreditCards[paymentInfoTab.CreditCardIndex].CardType" ng-options="creditCardType.Key as creditCardType.Text for creditCardType in creditCardTypes" required autocomplete="off"></select>
                                                                <div class="error-container" ng-show="forms.submitted['card'] && forms.card.CardType.$invalid">
                                                                    <small class="error" ng-show="forms.card.CardType.$error.required">{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.CardType")}}</small>
                                                                    <small class="error" ng-show="!forms.card.CardType.$error.required && forms.card.CardType.$error.server">{{serverMessages.GetMessage('CardType', "CreditCards", paymentInfoTab.CreditCardIndex, "card")}}</small>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="CardNumber" class="col-md-3 control-label">Card Number</label>
                                                            <div class="col-md-9">
                                                                <input type="text" class="form-control" id="CardNumber" name="CardNumber" data-max-characters="16" data-ng-model="currentCustomer.CreditCards[paymentInfoTab.CreditCardIndex].CardNumber" placeholder="Card Number" data-ng-maxlength="{{paymentInfoTab.CreditCard.CardType == 3 ? '15' : '16'}}" required autocomplete="off">
                                                                <div class="error-container" ng-show="forms.submitted['card'] && forms.card.CardNumber.$invalid">
                                                                    <small class="error" ng-show="forms.card.CardNumber.$error.required">{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.CardNumber")}}</small>
                                                                    <small class="error" ng-show="forms.card.CardNumber.$error.maxlength">{{getValidationMessage("ValidationMessages.FieldLength", ["GeneralFieldNames.CardNumber", paymentInfoTab.CreditCard.CardType == 3 ? '15' : '16'])}}</small>
                                                                    <small class="error" ng-show="!forms.card.CardNumber.$error.required && !forms.card.CardNumber.$error.maxlength && forms.card.CardNumber.$error.server">{{serverMessages.GetMessage('CardNumber', "CreditCards", paymentInfoTab.CreditCardIndex, "card")}}</small>
                                                                    <small class="error" ng-show="!forms.card.CardNumber.$error.required && !forms.card.CardNumber.$error.maxlength && forms.card.CardNumber.$error.server">{{serverMessages.GetMessage('CardNumber')}}</small>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="ExpirationDateMonth" class="col-md-3 control-label">Expiration Date</label>
                                                            <div class="col-md-2">
                                                                <input type="text" class="form-control number" id="ExpirationDateMonth" numbers-only data-max-characters="2" name="ExpirationDateMonth" data-ng-model="currentCustomer.CreditCards[paymentInfoTab.CreditCardIndex].ExpirationDateMonth" min="1" max="12" ng-pattern="/^\d{1,2}?$/" placeholder="Month" required autocomplete="off">
                                                                <div class="error-container" ng-show="forms.submitted['card'] && forms.card.ExpirationDateMonth.$invalid">
                                                                    <small class="error" ng-show="forms.card.ExpirationDateMonth.$error.pattern">{{getValidationMessage("ValidationMessages.MonthFormat","GeneralFieldNames.ExpirationDateMonth")}}</small>
                                                                    <small class="error" ng-show="forms.card.ExpirationDateMonth.$error.required">{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.ExpirationDateMonth")}}</small>
                                                                    <small class="error" ng-show="!forms.card.ExpirationDateMonth.$error.pattern && !forms.card.ExpirationDateMonth.$error.required && forms.card.ExpirationDateMonth.$error.server">{{serverMessages.GetMessage('ExpirationDateMonth', "CreditCards", paymentInfoTab.CreditCardIndex, "card")}}</small>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-2">
                                                                <input type="text" class="form-control" id="ExpirationDateYear" numbers-only data-max-characters="2" name="ExpirationDateYear" data-ng-model="currentCustomer.CreditCards[paymentInfoTab.CreditCardIndex].ExpirationDateYear" min="1" max="99" ng-pattern="/^\d{1,2}?$/" placeholder="Year" required autocomplete="off">
                                                                <div class="error-container" ng-show="forms.submitted['card'] && forms.card.ExpirationDateYear.$invalid">
                                                                    <small class="error" ng-show="forms.card.ExpirationDateYear.$error.pattern">{{getValidationMessage("ValidationMessages.YearFormat","GeneralFieldNames.ExpirationDateYear")}}</small>
                                                                    <small class="error" ng-show="forms.card.ExpirationDateYear.$error.required">{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.ExpirationDateYear")}}</small>
                                                                    <small class="error" ng-show="!forms.card.ExpirationDateYear.$error.pattern && !forms.card.ExpirationDateYear.$error.required && forms.card.ExpirationDateYear.$error.server">{{serverMessages.GetMessage('ExpirationDateYear', "CreditCards", paymentInfoTab.CreditCardIndex, "card")}}</small>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <span class="legend">Billing Address</span>
                                                        <div class="form-group">
                                                            <div class="col-md-3">
                                                            </div>
                                                            <div class="col-md-3">
                                                                <button class="btn btn-info" id="sameCreditCardAsProfile" data-ng-click="makeBillingAsShippingAddress();">Copy Shipping</button>
                                                            </div>
                                                        </div>
                                                        <div data-ng-include="'app/modules/customer/partials/address.html'" data-ng-repeat="model in [buildCreditCardAddressForPartial(currentCustomer.CreditCards, paymentInfoTab.CreditCardIndex)]"></div>
                                                    </div>
                                                </fieldset>
                                            </form>
                                            <form class="form-horizontal" name="forms.oac" data-ng-class="{submitted: forms.submitted['oac']}" novalidate unsaved-warning-form>
                                                <fieldset>
                                                    <div data-ng-if="paymentInfoTab.PaymentMethodType == 2 && currentCustomer.ApprovedPaymentMethods.length > 0 && currentCustomer.Oac">
                                                        <div class="form-group">
                                                            <label for="terms" class="col-md-3 control-label">Terms:</label>
                                                            <div class="col-md-9">
                                                                <select class="form-control" id="terms" name="Terms" data-ng-model="currentCustomer.Oac.Terms" data-ng-options="term.Key as term.Text for term in ReferenceData.OacTerms" required></select>
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label class="col-md-3 control-label" for="Fob">FOB:</label>
                                                            <div class="col-md-9">
                                                                <select class="form-control" id="Fob" name="Fob" data-ng-model="currentCustomer.Oac.Fob" data-ng-options="fob.Key as fob.Text for fob in ReferenceData.OacFob" required></select>
                                                            </div>
                                                        </div>
                                                        <span class="legend">Billing Address</span>
                                                        <div class="form-group">
                                                            <div class="col-md-3">
                                                            </div>
                                                            <div class="col-md-3">
                                                                <button class="btn btn-info" id="sameOacAsProfile" data-ng-click="makeBillingAsShippingAddress();">Copy Shipping</button>
                                                            </div>
                                                        </div>
                                                        <div data-ng-include="'app/modules/customer/partials/address.html'" data-ng-repeat="model in [currentCustomer.Oac]"></div>
                                                    </div>
                                                </fieldset>
                                            </form>
                                            <form class="form-horizontal" name="forms.check" data-ng-class="{submitted: forms.submitted['check']}" novalidate unsaved-warning-form>
                                                <fieldset>
                                                    <div data-ng-if="paymentInfoTab.PaymentMethodType == 3 && currentCustomer.ApprovedPaymentMethods.length > 0 && currentCustomer.Check">
                                                        <span class="legend">Billing Address</span>
                                                        <div class="form-group">
                                                            <div class="col-md-3">
                                                            </div>
                                                            <div class="col-md-3">
                                                                <button class="btn btn-info" id="sameCheckAsProfile" data-ng-click="makeBillingAsShippingAddress();">Copy Shipping</button>
                                                            </div>
                                                        </div>
                                                        <div data-ng-include="'app/modules/customer/partials/address.html'" data-ng-repeat="model in [currentCustomer.Check]"></div>
                                                    </div>
                                                </fieldset>
                                            </form>
                                            <form class="form-horizontal" name="forms.wiretransfer" data-ng-class="{submitted: forms.submitted['wiretransfer']}" novalidate unsaved-warning-form>
                                                <fieldset>
                                                    <div data-ng-if="paymentInfoTab.PaymentMethodType == 6 && currentCustomer.ApprovedPaymentMethods.length > 0 && currentCustomer.WireTransfer">
                                                        <span class="legend">Billing Address</span>
                                                        <div class="form-group">
                                                            <div class="col-md-3">
                                                            </div>
                                                            <div class="col-md-3">
                                                                <button class="btn btn-info" data-ng-click="makeBillingAsShippingAddress();">Copy Shipping</button>
                                                            </div>
                                                        </div>
                                                        <div data-ng-include="'app/modules/customer/partials/address.html'" data-ng-repeat="model in [currentCustomer.WireTransfer]"></div>
                                                    </div>
                                                </fieldset>
                                            </form>
                                            <form class="form-horizontal" name="forms.marketing" data-ng-class="{submitted: forms.submitted['marketing']}" novalidate unsaved-warning-form>
                                                <fieldset>
                                                    <div data-ng-if="paymentInfoTab.PaymentMethodType == 7 && currentCustomer.ApprovedPaymentMethods.length > 0 && currentCustomer.Marketing">
                                                        <span class="legend">Billing Address</span>
                                                        <div class="form-group">
                                                            <div class="col-md-3">
                                                            </div>
                                                            <div class="col-md-3">
                                                                <button class="btn btn-info" data-ng-click="makeBillingAsShippingAddress();">Copy Shipping</button>
                                                            </div>
                                                        </div>
                                                        <div data-ng-include="'app/modules/customer/partials/address.html'" data-ng-repeat="model in [currentCustomer.Marketing]"></div>
                                                    </div>
                                                </fieldset>
                                            </form>
                                            <form class="form-horizontal" name="forms.vcwellness" data-ng-class="{submitted: forms.submitted['vcwellness']}" novalidate unsaved-warning-form>
                                                <fieldset>
                                                    <div data-ng-if="paymentInfoTab.PaymentMethodType == 8 && currentCustomer.ApprovedPaymentMethods.length > 0 && currentCustomer.VCWellness">
                                                        <span class="legend">Billing Address</span>
                                                        <div class="form-group">
                                                            <div class="col-md-3">
                                                            </div>
                                                            <div class="col-md-3">
                                                                <button class="btn btn-info" data-ng-click="makeBillingAsShippingAddress();">Copy Shipping</button>
                                                            </div>
                                                        </div>
                                                        <div data-ng-include="'app/modules/customer/partials/address.html'" data-ng-repeat="model in [currentCustomer.VCWellness]"></div>
                                                    </div>
                                                </fieldset>
                                            </form>
                                            <form class="form-horizontal" name="forms.nc" data-ng-class="{submitted: forms.submitted['nc']}" novalidate unsaved-warning-form>
                                                <fieldset>
                                                    <div data-ng-if="paymentInfoTab.PaymentMethodType == 4 && currentCustomer.ApprovedPaymentMethods.length > 0 && currentCustomer.NC">
                                                        <span class="legend">Billing Address</span>
                                                        <div class="form-group">
                                                            <div class="col-md-3">
                                                            </div>
                                                            <div class="col-md-3">
                                                                <button class="btn btn-info" data-ng-click="makeBillingAsShippingAddress();">Copy Shipping</button>
                                                            </div>
                                                        </div>
                                                        <div data-ng-include="'app/modules/customer/partials/address.html'" data-ng-repeat="model in [currentCustomer.NC]"></div>
                                                    </div>
                                                </fieldset>
                                            </form>
                                        </div>
                                    </spinner-overlay>
                                </div>
                            </div>
                        </uib-tab>
                        <uib-tab data-ng-show="currentCustomer.Id" heading="Order History" index="11">
                            <div class="container-fluid">
                                <div ng-controller="customerOrdersController" onload="name = 'CustomerOrders'" data-ng-include="'app/modules/order/partials/customerOrdersList.html'"></div>
                            </div>
                        </uib-tab>
                        <uib-tab data-ng-show="currentCustomer.Id" heading="Auto-Ship" index="12">
                            <div class="container-fluid">
                                <div ng-controller="customerAutoShipsController" data-ng-include="'app/modules/order/partials/autoShipList.html'"></div>
                            </div>
                        </uib-tab>
                        <uib-tab heading="Notes" index="customerNotesTab.index">
                            <div class="container-fluid">
                                <div ng-controller="manageCustomerNotesController" onload="name = 'CustomerNotes'" data-ng-include="'app/modules/customer/partials/manageCustomerNotes.html'"></div>
                            </div>
                        </uib-tab>
                        <uib-tab heading="Files" index="customerFilesTab.index">
                            <div class="container-fluid">
                                <div ng-controller="manageCustomerFilesController" onload="name = 'CustomerFiles'" data-ng-include="'app/modules/customer/partials/manageCustomerFiles.html'"></div>
                            </div>
                        </uib-tab>
                        <uib-tab data-ng-show="currentCustomer.Id" heading="Additional Actions" index="additionalActionsTab.index">
                            <div class="container container-left">
                                <div class="well row">
                                    <spinner-overlay data-loading="addEditTracker.active()">
                                        <form class="form-horizontal" name="forms.uploadOrderType" data-ng-class="{submitted: forms.submitted['uploadOrderType']}" novalidate>
                                            <fieldset>
                                                <span class="legend">Import Orders</span>
                                                <div class="form-group">
                                                    <label for="UploadOrdersType" class="col-md-3 control-label">Upload Type</label>
                                                    <div class="col-md-9">
                                                        <select class="form-control" id="Type" name="Type" data-ng-model="options.UploadOrderType" ng-options="item.Key as item.Text for item in uploadOrderTypes" required autocomplete="off"></select>
                                                        <div class="error-container" ng-show="forms.submitted['uploadOrderType'] && forms.uploadOrderType.Type.$invalid">
                                                            <small class="error" ng-show="forms.uploadOrderType.Type.$error.required">{{getValidationMessage("ValidationMessages.FieldRequired","Upload Type")}}</small>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div data-ng-if="options.UploadOrderType==4" class="form-group">
                                                    <label for="CreditCard" class="col-md-3 control-label">Credit Card</label>
                                                    <div class="col-md-9">
                                                        <select class="form-control" id="CreditCard" name="CreditCard" data-ng-model="options.UploadOrderCreditCard" ng-options="item.Key as item.Text for item in uploadOrderCreditCards" required autocomplete="off"></select>
                                                        <div class="error-container" ng-show="forms.submitted['uploadOrderType'] && forms.uploadOrderType.CreditCard.$invalid">
                                                            <small class="error" ng-show="forms.uploadOrderType.CreditCard.$error.required">{{getValidationMessage("ValidationMessages.FieldRequired","Credit Card")}}</small>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div data-ng-if="options.UploadOrderType==3" class="form-group">
                                                    <label class="col-md-3 control-label"></label>
                                                    <div class="col-md-9 form-control-static">
                                                        <a target="_blank" href="/assets/templates/ds_template.csv">Get a template</a>
                                                    </div>
                                                </div>
                                                <div data-ng-if="options.UploadOrderType==4" class="form-group">
                                                    <label class="col-md-3 control-label"></label>
                                                    <div class="col-md-9 form-control-static">
                                                        <a target="_blank" href="/assets/templates/gl_template.csv">Get a template</a>
                                                    </div>
                                                </div>
                                                <div data-ng-if="options.UploadOrderType==8" class="form-group">
                                                    <label class="col-md-3 control-label"></label>
                                                    <div class="col-md-9 form-control-static">
                                                        <a target="_blank" href="/assets/templates/ds_aafes_template.csv">Get a template</a>
                                                    </div>
                                                </div>
                                                <div data-ng-if="options.selectedOrderImportFile" class="form-group">
                                                    <label class="col-md-3 control-label">File Name</label>
                                                    <div class="col-md-9 form-control-static">
                                                        <span>{{options.selectedOrderImportFile.name}}</span>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label class="col-md-3 control-label">File</label>
                                                    <div class="col-md-9">
                                                        <button class="btn btn-primary margin-right-8px" ngf-select ngf-change="setOrderImportFile($files)" accept=".csv,.edi">Locate file</button>
                                                        <button data-ng-if="options.selectedOrderImportFile" class="btn btn-success" data-ng-click="uploadOrderImportFile()" ladda="uploadingOrdersImport">Upload</button>
                                                    </div>
                                                </div>
                                            </fieldset>
                                        </form>
                                    </spinner-overlay>
                                </div>
                            </div>
                        </uib-tab>
                    </uib-tabset>
                </div>
            </div>
        </div>
    </div>
</div>