/*! VC.Admin 17-09-2016 */
function validElementString(a){try{return 0!==angular.element(a).length}catch(b){return!1}}function registerTextAngularTool(a,b){if(!a||""===a||taTools.hasOwnProperty(a))throw"textAngular Error: A unique name is required for a Tool Definition";if(b.display&&(""===b.display||!validElementString(b.display))||!b.display&&!b.buttontext&&!b.iconclass)throw'textAngular Error: Tool Definition for "'+a+'" does not have a valid display/iconclass/buttontext value';taTools[a]=b}function diff_match_patch(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}function ServerMessages(a){var b=this;b.Messages=a}if(function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){function c(a){var b=!!a&&"length"in a&&a.length,c=fa.type(a);return"function"===c||fa.isWindow(a)?!1:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}function d(a,b,c){if(fa.isFunction(b))return fa.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return fa.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(pa.test(b))return fa.filter(b,a,c);b=fa.filter(b,a)}return fa.grep(a,function(a){return _.call(b,a)>-1!==c})}function e(a,b){for(;(a=a[b])&&1!==a.nodeType;);return a}function f(a){var b={};return fa.each(a.match(va)||[],function(a,c){b[c]=!0}),b}function g(){X.removeEventListener("DOMContentLoaded",g),a.removeEventListener("load",g),fa.ready()}function h(){this.expando=fa.expando+h.uid++}function i(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(Ca,"-$&").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:Ba.test(c)?fa.parseJSON(c):c}catch(e){}Aa.set(a,b,c)}else c=void 0;return c}function j(a,b,c,d){var e,f=1,g=20,h=d?function(){return d.cur()}:function(){return fa.css(a,b,"")},i=h(),j=c&&c[3]||(fa.cssNumber[b]?"":"px"),k=(fa.cssNumber[b]||"px"!==j&&+i)&&Ea.exec(fa.css(a,b));if(k&&k[3]!==j){j=j||k[3],c=c||[],k=+i||1;do f=f||".5",k/=f,fa.style(a,b,k+j);while(f!==(f=h()/i)&&1!==f&&--g)}return c&&(k=+k||+i||0,e=c[1]?k+(c[1]+1)*c[2]:+c[2],d&&(d.unit=j,d.start=k,d.end=e)),e}function k(a,b){var c="undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName(b||"*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&fa.nodeName(a,b)?fa.merge([a],c):c}function l(a,b){for(var c=0,d=a.length;d>c;c++)za.set(a[c],"globalEval",!b||za.get(b[c],"globalEval"))}function m(a,b,c,d,e){for(var f,g,h,i,j,m,n=b.createDocumentFragment(),o=[],p=0,q=a.length;q>p;p++)if(f=a[p],f||0===f)if("object"===fa.type(f))fa.merge(o,f.nodeType?[f]:f);else if(La.test(f)){for(g=g||n.appendChild(b.createElement("div")),h=(Ia.exec(f)||["",""])[1].toLowerCase(),i=Ka[h]||Ka._default,g.innerHTML=i[1]+fa.htmlPrefilter(f)+i[2],m=i[0];m--;)g=g.lastChild;fa.merge(o,g.childNodes),g=n.firstChild,g.textContent=""}else o.push(b.createTextNode(f));for(n.textContent="",p=0;f=o[p++];)if(d&&fa.inArray(f,d)>-1)e&&e.push(f);else if(j=fa.contains(f.ownerDocument,f),g=k(n.appendChild(f),"script"),j&&l(g),c)for(m=0;f=g[m++];)Ja.test(f.type||"")&&c.push(f);return n}function n(){return!0}function o(){return!1}function p(){try{return X.activeElement}catch(a){}}function q(a,b,c,d,e,f){var g,h;if("object"==typeof b){"string"!=typeof c&&(d=d||c,c=void 0);for(h in b)q(a,h,c,d,b[h],f);return a}if(null==d&&null==e?(e=c,d=c=void 0):null==e&&("string"==typeof c?(e=d,d=void 0):(e=d,d=c,c=void 0)),e===!1)e=o;else if(!e)return a;return 1===f&&(g=e,e=function(a){return fa().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=fa.guid++)),a.each(function(){fa.event.add(this,b,e,d,c)})}function r(a,b){return fa.nodeName(a,"table")&&fa.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function s(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function t(a){var b=Sa.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function u(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(za.hasData(a)&&(f=za.access(a),g=za.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)fa.event.add(b,e,j[e][c])}Aa.hasData(a)&&(h=Aa.access(a),i=fa.extend({},h),Aa.set(b,i))}}function v(a,b){var c=b.nodeName.toLowerCase();"input"===c&&Ha.test(a.type)?b.checked=a.checked:"input"!==c&&"textarea"!==c||(b.defaultValue=a.defaultValue)}function w(a,b,c,d){b=Z.apply([],b);var e,f,g,h,i,j,l=0,n=a.length,o=n-1,p=b[0],q=fa.isFunction(p);if(q||n>1&&"string"==typeof p&&!da.checkClone&&Ra.test(p))return a.each(function(e){var f=a.eq(e);q&&(b[0]=p.call(this,e,f.html())),w(f,b,c,d)});if(n&&(e=m(b,a[0].ownerDocument,!1,a,d),f=e.firstChild,1===e.childNodes.length&&(e=f),f||d)){for(g=fa.map(k(e,"script"),s),h=g.length;n>l;l++)i=e,l!==o&&(i=fa.clone(i,!0,!0),h&&fa.merge(g,k(i,"script"))),c.call(a[l],i,l);if(h)for(j=g[g.length-1].ownerDocument,fa.map(g,t),l=0;h>l;l++)i=g[l],Ja.test(i.type||"")&&!za.access(i,"globalEval")&&fa.contains(j,i)&&(i.src?fa._evalUrl&&fa._evalUrl(i.src):fa.globalEval(i.textContent.replace(Ta,"")))}return a}function x(a,b,c){for(var d,e=b?fa.filter(b,a):a,f=0;null!=(d=e[f]);f++)c||1!==d.nodeType||fa.cleanData(k(d)),d.parentNode&&(c&&fa.contains(d.ownerDocument,d)&&l(k(d,"script")),d.parentNode.removeChild(d));return a}function y(a,b){var c=fa(b.createElement(a)).appendTo(b.body),d=fa.css(c[0],"display");return c.detach(),d}function z(a){var b=X,c=Va[a];return c||(c=y(a,b),"none"!==c&&c||(Ua=(Ua||fa("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=Ua[0].contentDocument,b.write(),b.close(),c=y(a,b),Ua.detach()),Va[a]=c),c}function A(a,b,c){var d,e,f,g,h=a.style;return c=c||Ya(a),g=c?c.getPropertyValue(b)||c[b]:void 0,""!==g&&void 0!==g||fa.contains(a.ownerDocument,a)||(g=fa.style(a,b)),c&&!da.pixelMarginRight()&&Xa.test(g)&&Wa.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f),void 0!==g?g+"":g}function B(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}function C(a){if(a in db)return a;for(var b=a[0].toUpperCase()+a.slice(1),c=cb.length;c--;)if(a=cb[c]+b,a in db)return a}function D(a,b,c){var d=Ea.exec(b);return d?Math.max(0,d[2]-(c||0))+(d[3]||"px"):b}function E(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=fa.css(a,c+Fa[f],!0,e)),d?("content"===c&&(g-=fa.css(a,"padding"+Fa[f],!0,e)),"margin"!==c&&(g-=fa.css(a,"border"+Fa[f]+"Width",!0,e))):(g+=fa.css(a,"padding"+Fa[f],!0,e),"padding"!==c&&(g+=fa.css(a,"border"+Fa[f]+"Width",!0,e)));return g}function F(b,c,d){var e=!0,f="width"===c?b.offsetWidth:b.offsetHeight,g=Ya(b),h="border-box"===fa.css(b,"boxSizing",!1,g);if(X.msFullscreenElement&&a.top!==a&&b.getClientRects().length&&(f=Math.round(100*b.getBoundingClientRect()[c])),0>=f||null==f){if(f=A(b,c,g),(0>f||null==f)&&(f=b.style[c]),Xa.test(f))return f;e=h&&(da.boxSizingReliable()||f===b.style[c]),f=parseFloat(f)||0}return f+E(b,c,d||(h?"border":"content"),e,g)+"px"}function G(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=za.get(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&Ga(d)&&(f[g]=za.access(d,"olddisplay",z(d.nodeName)))):(e=Ga(d),"none"===c&&e||za.set(d,"olddisplay",e?c:fa.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function H(a,b,c,d,e){return new H.prototype.init(a,b,c,d,e)}function I(){return a.setTimeout(function(){eb=void 0}),eb=fa.now()}function J(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b)c=Fa[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function K(a,b,c){for(var d,e=(N.tweeners[b]||[]).concat(N.tweeners["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function L(a,b,c){var d,e,f,g,h,i,j,k,l=this,m={},n=a.style,o=a.nodeType&&Ga(a),p=za.get(a,"fxshow");c.queue||(h=fa._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,fa.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[n.overflow,n.overflowX,n.overflowY],j=fa.css(a,"display"),k="none"===j?za.get(a,"olddisplay")||z(a.nodeName):j,"inline"===k&&"none"===fa.css(a,"float")&&(n.display="inline-block")),c.overflow&&(n.overflow="hidden",l.always(function(){n.overflow=c.overflow[0],n.overflowX=c.overflow[1],n.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],gb.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(o?"hide":"show")){if("show"!==e||!p||void 0===p[d])continue;o=!0}m[d]=p&&p[d]||fa.style(a,d)}else j=void 0;if(fa.isEmptyObject(m))"inline"===("none"===j?z(a.nodeName):j)&&(n.display=j);else{p?"hidden"in p&&(o=p.hidden):p=za.access(a,"fxshow",{}),f&&(p.hidden=!o),o?fa(a).show():l.done(function(){fa(a).hide()}),l.done(function(){var b;za.remove(a,"fxshow");for(b in m)fa.style(a,b,m[b])});for(d in m)g=K(o?p[d]:0,d,l),d in p||(p[d]=g.start,o&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function M(a,b){var c,d,e,f,g;for(c in a)if(d=fa.camelCase(c),e=b[d],f=a[c],fa.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=fa.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function N(a,b,c){var d,e,f=0,g=N.prefilters.length,h=fa.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=eb||I(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:fa.extend({},b),opts:fa.extend(!0,{specialEasing:{},easing:fa.easing._default},c),originalProperties:b,originalOptions:c,startTime:eb||I(),duration:c.duration,tweens:[],createTween:function(b,c){var d=fa.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?(h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j,b])):h.rejectWith(a,[j,b]),this}}),k=j.props;for(M(k,j.opts.specialEasing);g>f;f++)if(d=N.prefilters[f].call(j,a,k,j.opts))return fa.isFunction(d.stop)&&(fa._queueHooks(j.elem,j.opts.queue).stop=fa.proxy(d.stop,d)),d;return fa.map(k,K,j),fa.isFunction(j.opts.start)&&j.opts.start.call(a,j),fa.fx.timer(fa.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function O(a){return a.getAttribute&&a.getAttribute("class")||""}function P(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(va)||[];if(fa.isFunction(c))for(;d=f[e++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function Q(a,b,c,d){function e(h){var i;return f[h]=!0,fa.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||g||f[j]?g?!(i=j):void 0:(b.dataTypes.unshift(j),e(j),!1)}),i}var f={},g=a===Ab;return e(b.dataTypes[0])||!f["*"]&&e("*")}function R(a,b){var c,d,e=fa.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&fa.extend(!0,a,d),a}function S(a,b,c){for(var d,e,f,g,h=a.contents,i=a.dataTypes;"*"===i[0];)i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function T(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];for(f=k.shift();f;)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}function U(a,b,c,d){var e;if(fa.isArray(b))fa.each(b,function(b,e){c||Eb.test(a)?d(a,e):U(a+"["+("object"==typeof e&&null!=e?b:"")+"]",e,c,d)});else if(c||"object"!==fa.type(b))d(a,b);else for(e in b)U(a+"["+e+"]",b[e],c,d)}function V(a){return fa.isWindow(a)?a:9===a.nodeType&&a.defaultView}var W=[],X=a.document,Y=W.slice,Z=W.concat,$=W.push,_=W.indexOf,aa={},ba=aa.toString,ca=aa.hasOwnProperty,da={},ea="2.2.3",fa=function(a,b){return new fa.fn.init(a,b)},ga=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ha=/^-ms-/,ia=/-([\da-z])/gi,ja=function(a,b){return b.toUpperCase()};fa.fn=fa.prototype={jquery:ea,constructor:fa,selector:"",length:0,toArray:function(){return Y.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:Y.call(this)},pushStack:function(a){var b=fa.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a){return fa.each(this,a)},map:function(a){return this.pushStack(fa.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(Y.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor()},push:$,sort:W.sort,splice:W.splice},fa.extend=fa.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||fa.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(fa.isPlainObject(d)||(e=fa.isArray(d)))?(e?(e=!1,f=c&&fa.isArray(c)?c:[]):f=c&&fa.isPlainObject(c)?c:{},g[b]=fa.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},fa.extend({expando:"jQuery"+(ea+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===fa.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){var b=a&&a.toString();return!fa.isArray(a)&&b-parseFloat(b)+1>=0},isPlainObject:function(a){var b;if("object"!==fa.type(a)||a.nodeType||fa.isWindow(a))return!1;if(a.constructor&&!ca.call(a,"constructor")&&!ca.call(a.constructor.prototype||{},"isPrototypeOf"))return!1;for(b in a);return void 0===b||ca.call(a,b)},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?aa[ba.call(a)]||"object":typeof a},globalEval:function(a){var b,c=eval;a=fa.trim(a),a&&(1===a.indexOf("use strict")?(b=X.createElement("script"),b.text=a,X.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(ha,"ms-").replace(ia,ja)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b){var d,e=0;if(c(a))for(d=a.length;d>e&&b.call(a[e],e,a[e])!==!1;e++);else for(e in a)if(b.call(a[e],e,a[e])===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(ga,"")},makeArray:function(a,b){var d=b||[];return null!=a&&(c(Object(a))?fa.merge(d,"string"==typeof a?[a]:a):$.call(d,a)),d},inArray:function(a,b,c){return null==b?-1:_.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,d){var e,f,g=0,h=[];if(c(a))for(e=a.length;e>g;g++)f=b(a[g],g,d),null!=f&&h.push(f);else for(g in a)f=b(a[g],g,d),null!=f&&h.push(f);return Z.apply([],h)},guid:1,proxy:function(a,b){var c,d,e;return"string"==typeof b&&(c=a[b],b=a,a=c),fa.isFunction(a)?(d=Y.call(arguments,2),e=function(){return a.apply(b||this,d.concat(Y.call(arguments)))},e.guid=a.guid=a.guid||fa.guid++,e):void 0},now:Date.now,support:da}),"function"==typeof Symbol&&(fa.fn[Symbol.iterator]=W[Symbol.iterator]),fa.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,b){aa["[object "+b+"]"]=b.toLowerCase()});var ka=function(a){function b(a,b,c,d){var e,f,g,h,i,j,l,n,o=b&&b.ownerDocument,p=b?b.nodeType:9;if(c=c||[],"string"!=typeof a||!a||1!==p&&9!==p&&11!==p)return c;if(!d&&((b?b.ownerDocument||b:O)!==G&&F(b),b=b||G,I)){if(11!==p&&(j=ra.exec(a)))if(e=j[1]){if(9===p){if(!(g=b.getElementById(e)))return c;if(g.id===e)return c.push(g),c}else if(o&&(g=o.getElementById(e))&&M(b,g)&&g.id===e)return c.push(g),c}else{if(j[2])return $.apply(c,b.getElementsByTagName(a)),c;if((e=j[3])&&v.getElementsByClassName&&b.getElementsByClassName)return $.apply(c,b.getElementsByClassName(e)),c}if(v.qsa&&!T[a+" "]&&(!J||!J.test(a))){if(1!==p)o=b,n=a;else if("object"!==b.nodeName.toLowerCase()){for((h=b.getAttribute("id"))?h=h.replace(ta,"\\$&"):b.setAttribute("id",h=N),l=z(a),f=l.length,i=ma.test(h)?"#"+h:"[id='"+h+"']";f--;)l[f]=i+" "+m(l[f]);n=l.join(","),o=sa.test(a)&&k(b.parentNode)||b}if(n)try{return $.apply(c,o.querySelectorAll(n)),c}catch(q){}finally{h===N&&b.removeAttribute("id")}}}return B(a.replace(ha,"$1"),b,c,d)}function c(){function a(c,d){return b.push(c+" ")>w.cacheLength&&delete a[b.shift()],a[c+" "]=d}var b=[];return a}function d(a){return a[N]=!0,a}function e(a){var b=G.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function f(a,b){for(var c=a.split("|"),d=c.length;d--;)w.attrHandle[c[d]]=b}function g(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||V)-(~a.sourceIndex||V);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function h(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function i(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function j(a){return d(function(b){return b=+b,d(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function k(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}function l(){}function m(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function n(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=Q++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j,k=[P,f];if(g){for(;b=b[d];)if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e){if(j=b[N]||(b[N]={}),i=j[b.uniqueID]||(j[b.uniqueID]={}),(h=i[d])&&h[0]===P&&h[1]===f)return k[2]=h[2];if(i[d]=k,k[2]=a(b,c,g))return!0}}}function o(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function p(a,c,d){for(var e=0,f=c.length;f>e;e++)b(a,c[e],d);return d}function q(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function r(a,b,c,e,f,g){return e&&!e[N]&&(e=r(e)),f&&!f[N]&&(f=r(f,g)),d(function(d,g,h,i){var j,k,l,m=[],n=[],o=g.length,r=d||p(b||"*",h.nodeType?[h]:h,[]),s=!a||!d&&b?r:q(r,m,a,h,i),t=c?f||(d?a:o||e)?[]:g:s;if(c&&c(s,t,h,i),e)for(j=q(t,n),e(j,[],h,i),k=j.length;k--;)(l=j[k])&&(t[n[k]]=!(s[n[k]]=l));if(d){if(f||a){if(f){for(j=[],k=t.length;k--;)(l=t[k])&&j.push(s[k]=l);f(null,t=[],j,i)}for(k=t.length;k--;)(l=t[k])&&(j=f?aa(d,l):m[k])>-1&&(d[j]=!(g[j]=l))}}else t=q(t===g?t.splice(o,t.length):t),f?f(null,g,t,i):$.apply(g,t)})}function s(a){for(var b,c,d,e=a.length,f=w.relative[a[0].type],g=f||w.relative[" "],h=f?1:0,i=n(function(a){return a===b},g,!0),j=n(function(a){return aa(b,a)>-1},g,!0),k=[function(a,c,d){var e=!f&&(d||c!==C)||((b=c).nodeType?i(a,c,d):j(a,c,d));return b=null,e}];e>h;h++)if(c=w.relative[a[h].type])k=[n(o(k),c)];else{if(c=w.filter[a[h].type].apply(null,a[h].matches),c[N]){for(d=++h;e>d&&!w.relative[a[d].type];d++);return r(h>1&&o(k),h>1&&m(a.slice(0,h-1).concat({value:" "===a[h-2].type?"*":""})).replace(ha,"$1"),c,d>h&&s(a.slice(h,d)),e>d&&s(a=a.slice(d)),e>d&&m(a))}k.push(c)}return o(k)}function t(a,c){var e=c.length>0,f=a.length>0,g=function(d,g,h,i,j){var k,l,m,n=0,o="0",p=d&&[],r=[],s=C,t=d||f&&w.find.TAG("*",j),u=P+=null==s?1:Math.random()||.1,v=t.length;for(j&&(C=g===G||g||j);o!==v&&null!=(k=t[o]);o++){if(f&&k){for(l=0,g||k.ownerDocument===G||(F(k),h=!I);m=a[l++];)if(m(k,g||G,h)){i.push(k);break}j&&(P=u)}e&&((k=!m&&k)&&n--,d&&p.push(k))}if(n+=o,e&&o!==n){for(l=0;m=c[l++];)m(p,r,g,h);if(d){if(n>0)for(;o--;)p[o]||r[o]||(r[o]=Y.call(i));r=q(r)}$.apply(i,r),j&&!d&&r.length>0&&n+c.length>1&&b.uniqueSort(i)}return j&&(P=u,C=s),p};return e?d(g):g}var u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N="sizzle"+1*new Date,O=a.document,P=0,Q=0,R=c(),S=c(),T=c(),U=function(a,b){return a===b&&(E=!0),0},V=1<<31,W={}.hasOwnProperty,X=[],Y=X.pop,Z=X.push,$=X.push,_=X.slice,aa=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},ba="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ca="[\\x20\\t\\r\\n\\f]",da="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ea="\\["+ca+"*("+da+")(?:"+ca+"*([*^$|!~]?=)"+ca+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+da+"))|)"+ca+"*\\]",fa=":("+da+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ea+")*)|.*)\\)|)",ga=new RegExp(ca+"+","g"),ha=new RegExp("^"+ca+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ca+"+$","g"),ia=new RegExp("^"+ca+"*,"+ca+"*"),ja=new RegExp("^"+ca+"*([>+~]|"+ca+")"+ca+"*"),ka=new RegExp("="+ca+"*([^\\]'\"]*?)"+ca+"*\\]","g"),la=new RegExp(fa),ma=new RegExp("^"+da+"$"),na={ID:new RegExp("^#("+da+")"),CLASS:new RegExp("^\\.("+da+")"),TAG:new RegExp("^("+da+"|[*])"),ATTR:new RegExp("^"+ea),PSEUDO:new RegExp("^"+fa),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ca+"*(even|odd|(([+-]|)(\\d*)n|)"+ca+"*(?:([+-]|)"+ca+"*(\\d+)|))"+ca+"*\\)|)","i"),bool:new RegExp("^(?:"+ba+")$","i"),needsContext:new RegExp("^"+ca+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ca+"*((?:-\\d)?\\d*)"+ca+"*\\)|)(?=[^-]|$)","i")},oa=/^(?:input|select|textarea|button)$/i,pa=/^h\d$/i,qa=/^[^{]+\{\s*\[native \w/,ra=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,sa=/[+~]/,ta=/'|\\/g,ua=new RegExp("\\\\([\\da-f]{1,6}"+ca+"?|("+ca+")|.)","ig"),va=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},wa=function(){F()};try{$.apply(X=_.call(O.childNodes),O.childNodes),X[O.childNodes.length].nodeType}catch(xa){$={apply:X.length?function(a,b){Z.apply(a,_.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}v=b.support={},y=b.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},F=b.setDocument=function(a){var b,c,d=a?a.ownerDocument||a:O;return d!==G&&9===d.nodeType&&d.documentElement?(G=d,H=G.documentElement,I=!y(G),(c=G.defaultView)&&c.top!==c&&(c.addEventListener?c.addEventListener("unload",wa,!1):c.attachEvent&&c.attachEvent("onunload",wa)),v.attributes=e(function(a){return a.className="i",!a.getAttribute("className")}),v.getElementsByTagName=e(function(a){return a.appendChild(G.createComment("")),!a.getElementsByTagName("*").length}),v.getElementsByClassName=qa.test(G.getElementsByClassName),v.getById=e(function(a){return H.appendChild(a).id=N,!G.getElementsByName||!G.getElementsByName(N).length}),v.getById?(w.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&I){var c=b.getElementById(a);return c?[c]:[]}},w.filter.ID=function(a){var b=a.replace(ua,va);return function(a){return a.getAttribute("id")===b}}):(delete w.find.ID,w.filter.ID=function(a){var b=a.replace(ua,va);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),w.find.TAG=v.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):v.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},w.find.CLASS=v.getElementsByClassName&&function(a,b){return"undefined"!=typeof b.getElementsByClassName&&I?b.getElementsByClassName(a):void 0},K=[],J=[],(v.qsa=qa.test(G.querySelectorAll))&&(e(function(a){H.appendChild(a).innerHTML="<a id='"+N+"'></a><select id='"+N+"-\r\\' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&J.push("[*^$]="+ca+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||J.push("\\["+ca+"*(?:value|"+ba+")"),a.querySelectorAll("[id~="+N+"-]").length||J.push("~="),a.querySelectorAll(":checked").length||J.push(":checked"),a.querySelectorAll("a#"+N+"+*").length||J.push(".#.+[+~]")}),e(function(a){var b=G.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&J.push("name"+ca+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||J.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),J.push(",.*:")})),(v.matchesSelector=qa.test(L=H.matches||H.webkitMatchesSelector||H.mozMatchesSelector||H.oMatchesSelector||H.msMatchesSelector))&&e(function(a){v.disconnectedMatch=L.call(a,"div"),L.call(a,"[s!='']:x"),K.push("!=",fa)}),J=J.length&&new RegExp(J.join("|")),K=K.length&&new RegExp(K.join("|")),b=qa.test(H.compareDocumentPosition),M=b||qa.test(H.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},U=b?function(a,b){if(a===b)return E=!0,0;var c=!a.compareDocumentPosition-!b.compareDocumentPosition;return c?c:(c=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&c||!v.sortDetached&&b.compareDocumentPosition(a)===c?a===G||a.ownerDocument===O&&M(O,a)?-1:b===G||b.ownerDocument===O&&M(O,b)?1:D?aa(D,a)-aa(D,b):0:4&c?-1:1)}:function(a,b){if(a===b)return E=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,h=[a],i=[b];if(!e||!f)return a===G?-1:b===G?1:e?-1:f?1:D?aa(D,a)-aa(D,b):0;if(e===f)return g(a,b);for(c=a;c=c.parentNode;)h.unshift(c);for(c=b;c=c.parentNode;)i.unshift(c);for(;h[d]===i[d];)d++;return d?g(h[d],i[d]):h[d]===O?-1:i[d]===O?1:0},G):G},b.matches=function(a,c){return b(a,null,null,c)},b.matchesSelector=function(a,c){if((a.ownerDocument||a)!==G&&F(a),c=c.replace(ka,"='$1']"),v.matchesSelector&&I&&!T[c+" "]&&(!K||!K.test(c))&&(!J||!J.test(c)))try{var d=L.call(a,c);if(d||v.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return b(c,G,null,[a]).length>0},b.contains=function(a,b){return(a.ownerDocument||a)!==G&&F(a),M(a,b)},b.attr=function(a,b){(a.ownerDocument||a)!==G&&F(a);var c=w.attrHandle[b.toLowerCase()],d=c&&W.call(w.attrHandle,b.toLowerCase())?c(a,b,!I):void 0;return void 0!==d?d:v.attributes||!I?a.getAttribute(b):(d=a.getAttributeNode(b))&&d.specified?d.value:null},b.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},b.uniqueSort=function(a){var b,c=[],d=0,e=0;if(E=!v.detectDuplicates,D=!v.sortStable&&a.slice(0),a.sort(U),E){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return D=null,a},x=b.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=x(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d++];)c+=x(b);return c},w=b.selectors={cacheLength:50,createPseudo:d,match:na,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ua,va),a[3]=(a[3]||a[4]||a[5]||"").replace(ua,va),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return na.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&la.test(c)&&(b=z(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ua,va).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=R[a+" "];return b||(b=new RegExp("(^|"+ca+")"+a+"("+ca+"|$)"))&&R(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,c,d){return function(e){var f=b.attr(e,a);return null==f?"!="===c:c?(f+="","="===c?f===d:"!="===c?f!==d:"^="===c?d&&0===f.indexOf(d):"*="===c?d&&f.indexOf(d)>-1:"$="===c?d&&f.slice(-d.length)===d:"~="===c?(" "+f.replace(ga," ")+" ").indexOf(d)>-1:"|="===c?f===d||f.slice(0,d.length+1)===d+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h,t=!1;if(q){if(f){for(;p;){for(m=b;m=m[p];)if(h?m.nodeName.toLowerCase()===r:1===m.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(m=q,l=m[N]||(m[N]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===P&&j[1],t=n&&j[2],m=n&&q.childNodes[n];m=++n&&m&&m[p]||(t=n=0)||o.pop();)if(1===m.nodeType&&++t&&m===b){k[a]=[P,n,t];break}}else if(s&&(m=b,l=m[N]||(m[N]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===P&&j[1],t=n),t===!1)for(;(m=++n&&m&&m[p]||(t=n=0)||o.pop())&&((h?m.nodeName.toLowerCase()!==r:1!==m.nodeType)||!++t||(s&&(l=m[N]||(m[N]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),k[a]=[P,t]),m!==b)););return t-=e,t===d||t%d===0&&t/d>=0}}},PSEUDO:function(a,c){var e,f=w.pseudos[a]||w.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return f[N]?f(c):f.length>1?(e=[a,a,"",c],w.setFilters.hasOwnProperty(a.toLowerCase())?d(function(a,b){for(var d,e=f(a,c),g=e.length;g--;)d=aa(a,e[g]),a[d]=!(b[d]=e[g])}):function(a){return f(a,0,e)}):f}},pseudos:{not:d(function(a){var b=[],c=[],e=A(a.replace(ha,"$1"));return e[N]?d(function(a,b,c,d){for(var f,g=e(a,null,d,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,d,f){return b[0]=a,e(b,null,f,c),b[0]=null,!c.pop()}}),has:d(function(a){return function(c){return b(a,c).length>0}}),contains:d(function(a){return a=a.replace(ua,va),function(b){return(b.textContent||b.innerText||x(b)).indexOf(a)>-1}}),lang:d(function(a){return ma.test(a||"")||b.error("unsupported lang: "+a),a=a.replace(ua,va).toLowerCase(),function(b){var c;do if(c=I?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===H},focus:function(a){return a===G.activeElement&&(!G.hasFocus||G.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();
return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!w.pseudos.empty(a)},header:function(a){return pa.test(a.nodeName)},input:function(a){return oa.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:j(function(){return[0]}),last:j(function(a,b){return[b-1]}),eq:j(function(a,b,c){return[0>c?c+b:c]}),even:j(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:j(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:j(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:j(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},w.pseudos.nth=w.pseudos.eq;for(u in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[u]=h(u);for(u in{submit:!0,reset:!0})w.pseudos[u]=i(u);return l.prototype=w.filters=w.pseudos,w.setFilters=new l,z=b.tokenize=function(a,c){var d,e,f,g,h,i,j,k=S[a+" "];if(k)return c?0:k.slice(0);for(h=a,i=[],j=w.preFilter;h;){d&&!(e=ia.exec(h))||(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),d=!1,(e=ja.exec(h))&&(d=e.shift(),f.push({value:d,type:e[0].replace(ha," ")}),h=h.slice(d.length));for(g in w.filter)!(e=na[g].exec(h))||j[g]&&!(e=j[g](e))||(d=e.shift(),f.push({value:d,type:g,matches:e}),h=h.slice(d.length));if(!d)break}return c?h.length:h?b.error(a):S(a,i).slice(0)},A=b.compile=function(a,b){var c,d=[],e=[],f=T[a+" "];if(!f){for(b||(b=z(a)),c=b.length;c--;)f=s(b[c]),f[N]?d.push(f):e.push(f);f=T(a,t(e,d)),f.selector=a}return f},B=b.select=function(a,b,c,d){var e,f,g,h,i,j="function"==typeof a&&a,l=!d&&z(a=j.selector||a);if(c=c||[],1===l.length){if(f=l[0]=l[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&v.getById&&9===b.nodeType&&I&&w.relative[f[1].type]){if(b=(w.find.ID(g.matches[0].replace(ua,va),b)||[])[0],!b)return c;j&&(b=b.parentNode),a=a.slice(f.shift().value.length)}for(e=na.needsContext.test(a)?0:f.length;e--&&(g=f[e],!w.relative[h=g.type]);)if((i=w.find[h])&&(d=i(g.matches[0].replace(ua,va),sa.test(f[0].type)&&k(b.parentNode)||b))){if(f.splice(e,1),a=d.length&&m(f),!a)return $.apply(c,d),c;break}}return(j||A(a,l))(d,b,!I,c,!b||sa.test(a)&&k(b.parentNode)||b),c},v.sortStable=N.split("").sort(U).join("")===N,v.detectDuplicates=!!E,F(),v.sortDetached=e(function(a){return 1&a.compareDocumentPosition(G.createElement("div"))}),e(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||f("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),v.attributes&&e(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||f("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),e(function(a){return null==a.getAttribute("disabled")})||f(ba,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),b}(a);fa.find=ka,fa.expr=ka.selectors,fa.expr[":"]=fa.expr.pseudos,fa.uniqueSort=fa.unique=ka.uniqueSort,fa.text=ka.getText,fa.isXMLDoc=ka.isXML,fa.contains=ka.contains;var la=function(a,b,c){for(var d=[],e=void 0!==c;(a=a[b])&&9!==a.nodeType;)if(1===a.nodeType){if(e&&fa(a).is(c))break;d.push(a)}return d},ma=function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c},na=fa.expr.match.needsContext,oa=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,pa=/^.[^:#\[\.,]*$/;fa.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?fa.find.matchesSelector(d,a)?[d]:[]:fa.find.matches(a,fa.grep(b,function(a){return 1===a.nodeType}))},fa.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!=typeof a)return this.pushStack(fa(a).filter(function(){for(b=0;c>b;b++)if(fa.contains(e[b],this))return!0}));for(b=0;c>b;b++)fa.find(a,e[b],d);return d=this.pushStack(c>1?fa.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(d(this,a||[],!1))},not:function(a){return this.pushStack(d(this,a||[],!0))},is:function(a){return!!d(this,"string"==typeof a&&na.test(a)?fa(a):a||[],!1).length}});var qa,ra=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,sa=fa.fn.init=function(a,b,c){var d,e;if(!a)return this;if(c=c||qa,"string"==typeof a){if(d="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:ra.exec(a),!d||!d[1]&&b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);if(d[1]){if(b=b instanceof fa?b[0]:b,fa.merge(this,fa.parseHTML(d[1],b&&b.nodeType?b.ownerDocument||b:X,!0)),oa.test(d[1])&&fa.isPlainObject(b))for(d in b)fa.isFunction(this[d])?this[d](b[d]):this.attr(d,b[d]);return this}return e=X.getElementById(d[2]),e&&e.parentNode&&(this.length=1,this[0]=e),this.context=X,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):fa.isFunction(a)?void 0!==c.ready?c.ready(a):a(fa):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),fa.makeArray(a,this))};sa.prototype=fa.fn,qa=fa(X);var ta=/^(?:parents|prev(?:Until|All))/,ua={children:!0,contents:!0,next:!0,prev:!0};fa.fn.extend({has:function(a){var b=fa(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(fa.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=na.test(a)||"string"!=typeof a?fa(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&fa.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?fa.uniqueSort(f):f)},index:function(a){return a?"string"==typeof a?_.call(fa(a),this[0]):_.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(fa.uniqueSort(fa.merge(this.get(),fa(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),fa.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return la(a,"parentNode")},parentsUntil:function(a,b,c){return la(a,"parentNode",c)},next:function(a){return e(a,"nextSibling")},prev:function(a){return e(a,"previousSibling")},nextAll:function(a){return la(a,"nextSibling")},prevAll:function(a){return la(a,"previousSibling")},nextUntil:function(a,b,c){return la(a,"nextSibling",c)},prevUntil:function(a,b,c){return la(a,"previousSibling",c)},siblings:function(a){return ma((a.parentNode||{}).firstChild,a)},children:function(a){return ma(a.firstChild)},contents:function(a){return a.contentDocument||fa.merge([],a.childNodes)}},function(a,b){fa.fn[a]=function(c,d){var e=fa.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=fa.filter(d,e)),this.length>1&&(ua[a]||fa.uniqueSort(e),ta.test(a)&&e.reverse()),this.pushStack(e)}});var va=/\S+/g;fa.Callbacks=function(a){a="string"==typeof a?f(a):fa.extend({},a);var b,c,d,e,g=[],h=[],i=-1,j=function(){for(e=a.once,d=b=!0;h.length;i=-1)for(c=h.shift();++i<g.length;)g[i].apply(c[0],c[1])===!1&&a.stopOnFalse&&(i=g.length,c=!1);a.memory||(c=!1),b=!1,e&&(g=c?[]:"")},k={add:function(){return g&&(c&&!b&&(i=g.length-1,h.push(c)),function d(b){fa.each(b,function(b,c){fa.isFunction(c)?a.unique&&k.has(c)||g.push(c):c&&c.length&&"string"!==fa.type(c)&&d(c)})}(arguments),c&&!b&&j()),this},remove:function(){return fa.each(arguments,function(a,b){for(var c;(c=fa.inArray(b,g,c))>-1;)g.splice(c,1),i>=c&&i--}),this},has:function(a){return a?fa.inArray(a,g)>-1:g.length>0},empty:function(){return g&&(g=[]),this},disable:function(){return e=h=[],g=c="",this},disabled:function(){return!g},lock:function(){return e=h=[],c||(g=c=""),this},locked:function(){return!!e},fireWith:function(a,c){return e||(c=c||[],c=[a,c.slice?c.slice():c],h.push(c),b||j()),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!d}};return k},fa.extend({Deferred:function(a){var b=[["resolve","done",fa.Callbacks("once memory"),"resolved"],["reject","fail",fa.Callbacks("once memory"),"rejected"],["notify","progress",fa.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return fa.Deferred(function(c){fa.each(b,function(b,f){var g=fa.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&fa.isFunction(a.promise)?a.promise().progress(c.notify).done(c.resolve).fail(c.reject):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?fa.extend(a,d):d}},e={};return d.pipe=d.then,fa.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b,c,d,e=0,f=Y.call(arguments),g=f.length,h=1!==g||a&&fa.isFunction(a.promise)?g:0,i=1===h?a:fa.Deferred(),j=function(a,c,d){return function(e){c[a]=this,d[a]=arguments.length>1?Y.call(arguments):e,d===b?i.notifyWith(c,d):--h||i.resolveWith(c,d)}};if(g>1)for(b=new Array(g),c=new Array(g),d=new Array(g);g>e;e++)f[e]&&fa.isFunction(f[e].promise)?f[e].promise().progress(j(e,c,b)).done(j(e,d,f)).fail(i.reject):--h;return h||i.resolveWith(d,f),i.promise()}});var wa;fa.fn.ready=function(a){return fa.ready.promise().done(a),this},fa.extend({isReady:!1,readyWait:1,holdReady:function(a){a?fa.readyWait++:fa.ready(!0)},ready:function(a){(a===!0?--fa.readyWait:fa.isReady)||(fa.isReady=!0,a!==!0&&--fa.readyWait>0||(wa.resolveWith(X,[fa]),fa.fn.triggerHandler&&(fa(X).triggerHandler("ready"),fa(X).off("ready"))))}}),fa.ready.promise=function(b){return wa||(wa=fa.Deferred(),"complete"===X.readyState||"loading"!==X.readyState&&!X.documentElement.doScroll?a.setTimeout(fa.ready):(X.addEventListener("DOMContentLoaded",g),a.addEventListener("load",g))),wa.promise(b)},fa.ready.promise();var xa=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===fa.type(c)){e=!0;for(h in c)xa(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,fa.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(fa(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},ya=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};h.uid=1,h.prototype={register:function(a,b){var c=b||{};return a.nodeType?a[this.expando]=c:Object.defineProperty(a,this.expando,{value:c,writable:!0,configurable:!0}),a[this.expando]},cache:function(a){if(!ya(a))return{};var b=a[this.expando];return b||(b={},ya(a)&&(a.nodeType?a[this.expando]=b:Object.defineProperty(a,this.expando,{value:b,configurable:!0}))),b},set:function(a,b,c){var d,e=this.cache(a);if("string"==typeof b)e[b]=c;else for(d in b)e[d]=b[d];return e},get:function(a,b){return void 0===b?this.cache(a):a[this.expando]&&a[this.expando][b]},access:function(a,b,c){var d;return void 0===b||b&&"string"==typeof b&&void 0===c?(d=this.get(a,b),void 0!==d?d:this.get(a,fa.camelCase(b))):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e,f=a[this.expando];if(void 0!==f){if(void 0===b)this.register(a);else{fa.isArray(b)?d=b.concat(b.map(fa.camelCase)):(e=fa.camelCase(b),b in f?d=[b,e]:(d=e,d=d in f?[d]:d.match(va)||[])),c=d.length;for(;c--;)delete f[d[c]]}(void 0===b||fa.isEmptyObject(f))&&(a.nodeType?a[this.expando]=void 0:delete a[this.expando])}},hasData:function(a){var b=a[this.expando];return void 0!==b&&!fa.isEmptyObject(b)}};var za=new h,Aa=new h,Ba=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ca=/[A-Z]/g;fa.extend({hasData:function(a){return Aa.hasData(a)||za.hasData(a)},data:function(a,b,c){return Aa.access(a,b,c)},removeData:function(a,b){Aa.remove(a,b)},_data:function(a,b,c){return za.access(a,b,c)},_removeData:function(a,b){za.remove(a,b)}}),fa.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=Aa.get(f),1===f.nodeType&&!za.get(f,"hasDataAttrs"))){for(c=g.length;c--;)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=fa.camelCase(d.slice(5)),i(f,d,e[d])));za.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){Aa.set(this,a)}):xa(this,function(b){var c,d;if(f&&void 0===b){if(c=Aa.get(f,a)||Aa.get(f,a.replace(Ca,"-$&").toLowerCase()),void 0!==c)return c;if(d=fa.camelCase(a),c=Aa.get(f,d),void 0!==c)return c;if(c=i(f,d,void 0),void 0!==c)return c}else d=fa.camelCase(a),this.each(function(){var c=Aa.get(this,d);Aa.set(this,d,b),a.indexOf("-")>-1&&void 0!==c&&Aa.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){Aa.remove(this,a)})}}),fa.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=za.get(a,b),c&&(!d||fa.isArray(c)?d=za.access(a,b,fa.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=fa.queue(a,b),d=c.length,e=c.shift(),f=fa._queueHooks(a,b),g=function(){fa.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return za.get(a,c)||za.access(a,c,{empty:fa.Callbacks("once memory").add(function(){za.remove(a,[b+"queue",c])})})}}),fa.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?fa.queue(this[0],a):void 0===b?this:this.each(function(){var c=fa.queue(this,a,b);fa._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&fa.dequeue(this,a)})},dequeue:function(a){return this.each(function(){fa.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=fa.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};for("string"!=typeof a&&(b=a,a=void 0),a=a||"fx";g--;)c=za.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var Da=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ea=new RegExp("^(?:([+-])=|)("+Da+")([a-z%]*)$","i"),Fa=["Top","Right","Bottom","Left"],Ga=function(a,b){return a=b||a,"none"===fa.css(a,"display")||!fa.contains(a.ownerDocument,a)},Ha=/^(?:checkbox|radio)$/i,Ia=/<([\w:-]+)/,Ja=/^$|\/(?:java|ecma)script/i,Ka={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ka.optgroup=Ka.option,Ka.tbody=Ka.tfoot=Ka.colgroup=Ka.caption=Ka.thead,Ka.th=Ka.td;var La=/<|&#?\w+;/;!function(){var a=X.createDocumentFragment(),b=a.appendChild(X.createElement("div")),c=X.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),da.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",da.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var Ma=/^key/,Na=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Oa=/^([^.]*)(?:\.(.+)|)/;fa.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=za.get(a);if(q)for(c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=fa.guid++),(i=q.events)||(i=q.events={}),(g=q.handle)||(g=q.handle=function(b){return"undefined"!=typeof fa&&fa.event.triggered!==b.type?fa.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(va)||[""],j=b.length;j--;)h=Oa.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n&&(l=fa.event.special[n]||{},n=(e?l.delegateType:l.bindType)||n,l=fa.event.special[n]||{},k=fa.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&fa.expr.match.needsContext.test(e),namespace:o.join(".")},f),(m=i[n])||(m=i[n]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,o,g)!==!1||a.addEventListener&&a.addEventListener(n,g)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),fa.event.global[n]=!0)},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=za.hasData(a)&&za.get(a);if(q&&(i=q.events)){for(b=(b||"").match(va)||[""],j=b.length;j--;)if(h=Oa.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){for(l=fa.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=i[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;f--;)k=m[f],!e&&p!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||fa.removeEvent(a,n,q.handle),delete i[n])}else for(n in i)fa.event.remove(a,n+b[j],c,d,!0);fa.isEmptyObject(i)&&za.remove(a,"handle events")}},dispatch:function(a){a=fa.event.fix(a);var b,c,d,e,f,g=[],h=Y.call(arguments),i=(za.get(this,"events")||{})[a.type]||[],j=fa.event.special[a.type]||{};if(h[0]=a,a.delegateTarget=this,!j.preDispatch||j.preDispatch.call(this,a)!==!1){for(g=fa.event.handlers.call(this,a,i),b=0;(e=g[b++])&&!a.isPropagationStopped();)for(a.currentTarget=e.elem,c=0;(f=e.handlers[c++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!a.rnamespace.test(f.namespace)||(a.handleObj=f,a.data=f.data,d=((fa.event.special[f.origType]||{}).handle||f.handler).apply(e.elem,h),void 0!==d&&(a.result=d)===!1&&(a.preventDefault(),a.stopPropagation()));return j.postDispatch&&j.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&("click"!==a.type||isNaN(a.button)||a.button<1))for(;i!==this;i=i.parentNode||this)if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?fa(e,this).index(i)>-1:fa.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||X,d=c.documentElement,e=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},fix:function(a){if(a[fa.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];for(g||(this.fixHooks[e]=g=Na.test(e)?this.mouseHooks:Ma.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new fa.Event(f),b=d.length;b--;)c=d[b],a[c]=f[c];return a.target||(a.target=X),3===a.target.nodeType&&(a.target=a.target.parentNode),g.filter?g.filter(a,f):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==p()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===p()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&fa.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return fa.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}}},fa.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c)},fa.Event=function(a,b){return this instanceof fa.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?n:o):this.type=a,b&&fa.extend(this,b),this.timeStamp=a&&a.timeStamp||fa.now(),void(this[fa.expando]=!0)):new fa.Event(a,b)},fa.Event.prototype={constructor:fa.Event,isDefaultPrevented:o,isPropagationStopped:o,isImmediatePropagationStopped:o,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=n,a&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=n,a&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=n,a&&a.stopImmediatePropagation(),this.stopPropagation()}},fa.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){fa.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return e&&(e===d||fa.contains(d,e))||(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),fa.fn.extend({on:function(a,b,c,d){return q(this,a,b,c,d)},one:function(a,b,c,d){return q(this,a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,fa(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return b!==!1&&"function"!=typeof b||(c=b,b=void 0),c===!1&&(c=o),this.each(function(){fa.event.remove(this,a,c,b)})}});var Pa=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,Qa=/<script|<style|<link/i,Ra=/checked\s*(?:[^=]|=\s*.checked.)/i,Sa=/^true\/(.*)/,Ta=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;fa.extend({htmlPrefilter:function(a){return a.replace(Pa,"<$1></$2>")},clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=fa.contains(a.ownerDocument,a);if(!(da.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||fa.isXMLDoc(a)))for(g=k(h),f=k(a),d=0,e=f.length;e>d;d++)v(f[d],g[d]);if(b)if(c)for(f=f||k(a),g=g||k(h),d=0,e=f.length;e>d;d++)u(f[d],g[d]);else u(a,h);return g=k(h,"script"),g.length>0&&l(g,!i&&k(a,"script")),h},cleanData:function(a){for(var b,c,d,e=fa.event.special,f=0;void 0!==(c=a[f]);f++)if(ya(c)){if(b=c[za.expando]){if(b.events)for(d in b.events)e[d]?fa.event.remove(c,d):fa.removeEvent(c,d,b.handle);c[za.expando]=void 0}c[Aa.expando]&&(c[Aa.expando]=void 0)}}}),fa.fn.extend({domManip:w,detach:function(a){return x(this,a,!0)},remove:function(a){return x(this,a)},text:function(a){return xa(this,function(a){return void 0===a?fa.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=a)})},null,a,arguments.length)},append:function(){return w(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=r(this,a);b.appendChild(a)}})},prepend:function(){return w(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=r(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return w(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return w(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(fa.cleanData(k(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return fa.clone(this,a,b)})},html:function(a){return xa(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!Qa.test(a)&&!Ka[(Ia.exec(a)||["",""])[1].toLowerCase()]){a=fa.htmlPrefilter(a);try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(fa.cleanData(k(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return w(this,arguments,function(b){var c=this.parentNode;fa.inArray(this,a)<0&&(fa.cleanData(k(this)),c&&c.replaceChild(b,this))},a)}}),fa.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){fa.fn[a]=function(a){for(var c,d=[],e=fa(a),f=e.length-1,g=0;f>=g;g++)c=g===f?this:this.clone(!0),fa(e[g])[b](c),$.apply(d,c.get());return this.pushStack(d)}});var Ua,Va={HTML:"block",BODY:"block"},Wa=/^margin/,Xa=new RegExp("^("+Da+")(?!px)[a-z%]+$","i"),Ya=function(b){var c=b.ownerDocument.defaultView;return c&&c.opener||(c=a),c.getComputedStyle(b)},Za=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e},$a=X.documentElement;!function(){function b(){h.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",h.innerHTML="",$a.appendChild(g);var b=a.getComputedStyle(h);c="1%"!==b.top,f="2px"===b.marginLeft,d="4px"===b.width,h.style.marginRight="50%",e="4px"===b.marginRight,$a.removeChild(g)}var c,d,e,f,g=X.createElement("div"),h=X.createElement("div");h.style&&(h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",da.clearCloneStyle="content-box"===h.style.backgroundClip,g.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",g.appendChild(h),fa.extend(da,{pixelPosition:function(){return b(),c},boxSizingReliable:function(){return null==d&&b(),d},pixelMarginRight:function(){return null==d&&b(),e},reliableMarginLeft:function(){return null==d&&b(),f},reliableMarginRight:function(){var b,c=h.appendChild(X.createElement("div"));return c.style.cssText=h.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",c.style.marginRight=c.style.width="0",h.style.width="1px",$a.appendChild(g),b=!parseFloat(a.getComputedStyle(c).marginRight),$a.removeChild(g),h.removeChild(c),b}}))}();var _a=/^(none|table(?!-c[ea]).+)/,ab={position:"absolute",visibility:"hidden",display:"block"},bb={letterSpacing:"0",fontWeight:"400"},cb=["Webkit","O","Moz","ms"],db=X.createElement("div").style;fa.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=A(a,"opacity");return""===c?"1":c}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=fa.camelCase(b),i=a.style;return b=fa.cssProps[h]||(fa.cssProps[h]=C(h)||h),g=fa.cssHooks[b]||fa.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=Ea.exec(c))&&e[1]&&(c=j(a,b,e),f="number"),null!=c&&c===c&&("number"===f&&(c+=e&&e[3]||(fa.cssNumber[h]?"":"px")),da.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=fa.camelCase(b);return b=fa.cssProps[h]||(fa.cssProps[h]=C(h)||h),g=fa.cssHooks[b]||fa.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=A(a,b,d)),"normal"===e&&b in bb&&(e=bb[b]),""===c||c?(f=parseFloat(e),c===!0||isFinite(f)?f||0:e):e}}),fa.each(["height","width"],function(a,b){fa.cssHooks[b]={get:function(a,c,d){return c?_a.test(fa.css(a,"display"))&&0===a.offsetWidth?Za(a,ab,function(){return F(a,b,d)}):F(a,b,d):void 0},set:function(a,c,d){var e,f=d&&Ya(a),g=d&&E(a,b,d,"border-box"===fa.css(a,"boxSizing",!1,f),f);return g&&(e=Ea.exec(c))&&"px"!==(e[3]||"px")&&(a.style[b]=c,c=fa.css(a,b)),D(a,c,g)}}}),fa.cssHooks.marginLeft=B(da.reliableMarginLeft,function(a,b){return b?(parseFloat(A(a,"marginLeft"))||a.getBoundingClientRect().left-Za(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}))+"px":void 0}),fa.cssHooks.marginRight=B(da.reliableMarginRight,function(a,b){return b?Za(a,{display:"inline-block"},A,[a,"marginRight"]):void 0}),fa.each({margin:"",padding:"",border:"Width"},function(a,b){fa.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+Fa[d]+b]=f[d]||f[d-2]||f[0];return e}},Wa.test(a)||(fa.cssHooks[a+b].set=D)}),fa.fn.extend({css:function(a,b){return xa(this,function(a,b,c){var d,e,f={},g=0;if(fa.isArray(b)){for(d=Ya(a),e=b.length;e>g;g++)f[b[g]]=fa.css(a,b[g],!1,d);return f}return void 0!==c?fa.style(a,b,c):fa.css(a,b)},a,b,arguments.length>1)},show:function(){return G(this,!0)},hide:function(){return G(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){Ga(this)?fa(this).show():fa(this).hide()})}}),fa.Tween=H,H.prototype={constructor:H,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||fa.easing._default,this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(fa.cssNumber[c]?"":"px")},cur:function(){var a=H.propHooks[this.prop];return a&&a.get?a.get(this):H.propHooks._default.get(this)},run:function(a){var b,c=H.propHooks[this.prop];return this.options.duration?this.pos=b=fa.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):H.propHooks._default.set(this),this}},H.prototype.init.prototype=H.prototype,H.propHooks={_default:{get:function(a){var b;return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(b=fa.css(a.elem,a.prop,""),b&&"auto"!==b?b:0)},set:function(a){fa.fx.step[a.prop]?fa.fx.step[a.prop](a):1!==a.elem.nodeType||null==a.elem.style[fa.cssProps[a.prop]]&&!fa.cssHooks[a.prop]?a.elem[a.prop]=a.now:fa.style(a.elem,a.prop,a.now+a.unit)}}},H.propHooks.scrollTop=H.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},fa.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"},fa.fx=H.prototype.init,fa.fx.step={};var eb,fb,gb=/^(?:toggle|show|hide)$/,hb=/queueHooks$/;fa.Animation=fa.extend(N,{tweeners:{"*":[function(a,b){var c=this.createTween(a,b);return j(c.elem,a,Ea.exec(b),c),c}]},tweener:function(a,b){fa.isFunction(a)?(b=a,a=["*"]):a=a.match(va);for(var c,d=0,e=a.length;e>d;d++)c=a[d],N.tweeners[c]=N.tweeners[c]||[],N.tweeners[c].unshift(b)},prefilters:[L],prefilter:function(a,b){b?N.prefilters.unshift(a):N.prefilters.push(a)}}),fa.speed=function(a,b,c){var d=a&&"object"==typeof a?fa.extend({},a):{complete:c||!c&&b||fa.isFunction(a)&&a,duration:a,easing:c&&b||b&&!fa.isFunction(b)&&b};return d.duration=fa.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in fa.fx.speeds?fa.fx.speeds[d.duration]:fa.fx.speeds._default,null!=d.queue&&d.queue!==!0||(d.queue="fx"),d.old=d.complete,d.complete=function(){fa.isFunction(d.old)&&d.old.call(this),d.queue&&fa.dequeue(this,d.queue)},d},fa.fn.extend({fadeTo:function(a,b,c,d){return this.filter(Ga).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=fa.isEmptyObject(a),f=fa.speed(b,c,d),g=function(){var b=N(this,fa.extend({},a),f);(e||za.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=fa.timers,g=za.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&hb.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));!b&&c||fa.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=za.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=fa.timers,g=d?d.length:0;
for(c.finish=!0,fa.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),fa.each(["toggle","show","hide"],function(a,b){var c=fa.fn[b];fa.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(J(b,!0),a,d,e)}}),fa.each({slideDown:J("show"),slideUp:J("hide"),slideToggle:J("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){fa.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),fa.timers=[],fa.fx.tick=function(){var a,b=0,c=fa.timers;for(eb=fa.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||fa.fx.stop(),eb=void 0},fa.fx.timer=function(a){fa.timers.push(a),a()?fa.fx.start():fa.timers.pop()},fa.fx.interval=13,fa.fx.start=function(){fb||(fb=a.setInterval(fa.fx.tick,fa.fx.interval))},fa.fx.stop=function(){a.clearInterval(fb),fb=null},fa.fx.speeds={slow:600,fast:200,_default:400},fa.fn.delay=function(b,c){return b=fa.fx?fa.fx.speeds[b]||b:b,c=c||"fx",this.queue(c,function(c,d){var e=a.setTimeout(c,b);d.stop=function(){a.clearTimeout(e)}})},function(){var a=X.createElement("input"),b=X.createElement("select"),c=b.appendChild(X.createElement("option"));a.type="checkbox",da.checkOn=""!==a.value,da.optSelected=c.selected,b.disabled=!0,da.optDisabled=!c.disabled,a=X.createElement("input"),a.value="t",a.type="radio",da.radioValue="t"===a.value}();var ib,jb=fa.expr.attrHandle;fa.fn.extend({attr:function(a,b){return xa(this,fa.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){fa.removeAttr(this,a)})}}),fa.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return"undefined"==typeof a.getAttribute?fa.prop(a,b,c):(1===f&&fa.isXMLDoc(a)||(b=b.toLowerCase(),e=fa.attrHooks[b]||(fa.expr.match.bool.test(b)?ib:void 0)),void 0!==c?null===c?void fa.removeAttr(a,b):e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:(a.setAttribute(b,c+""),c):e&&"get"in e&&null!==(d=e.get(a,b))?d:(d=fa.find.attr(a,b),null==d?void 0:d))},attrHooks:{type:{set:function(a,b){if(!da.radioValue&&"radio"===b&&fa.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(va);if(f&&1===a.nodeType)for(;c=f[e++];)d=fa.propFix[c]||c,fa.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)}}),ib={set:function(a,b,c){return b===!1?fa.removeAttr(a,c):a.setAttribute(c,c),c}},fa.each(fa.expr.match.bool.source.match(/\w+/g),function(a,b){var c=jb[b]||fa.find.attr;jb[b]=function(a,b,d){var e,f;return d||(f=jb[b],jb[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,jb[b]=f),e}});var kb=/^(?:input|select|textarea|button)$/i,lb=/^(?:a|area)$/i;fa.fn.extend({prop:function(a,b){return xa(this,fa.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[fa.propFix[a]||a]})}}),fa.extend({prop:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return 1===f&&fa.isXMLDoc(a)||(b=fa.propFix[b]||b,e=fa.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=fa.find.attr(a,"tabindex");return b?parseInt(b,10):kb.test(a.nodeName)||lb.test(a.nodeName)&&a.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),da.optSelected||(fa.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null},set:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}}),fa.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){fa.propFix[this.toLowerCase()]=this});var mb=/[\t\r\n\f]/g;fa.fn.extend({addClass:function(a){var b,c,d,e,f,g,h,i=0;if(fa.isFunction(a))return this.each(function(b){fa(this).addClass(a.call(this,b,O(this)))});if("string"==typeof a&&a)for(b=a.match(va)||[];c=this[i++];)if(e=O(c),d=1===c.nodeType&&(" "+e+" ").replace(mb," ")){for(g=0;f=b[g++];)d.indexOf(" "+f+" ")<0&&(d+=f+" ");h=fa.trim(d),e!==h&&c.setAttribute("class",h)}return this},removeClass:function(a){var b,c,d,e,f,g,h,i=0;if(fa.isFunction(a))return this.each(function(b){fa(this).removeClass(a.call(this,b,O(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof a&&a)for(b=a.match(va)||[];c=this[i++];)if(e=O(c),d=1===c.nodeType&&(" "+e+" ").replace(mb," ")){for(g=0;f=b[g++];)for(;d.indexOf(" "+f+" ")>-1;)d=d.replace(" "+f+" "," ");h=fa.trim(d),e!==h&&c.setAttribute("class",h)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):fa.isFunction(a)?this.each(function(c){fa(this).toggleClass(a.call(this,c,O(this),b),b)}):this.each(function(){var b,d,e,f;if("string"===c)for(d=0,e=fa(this),f=a.match(va)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else void 0!==a&&"boolean"!==c||(b=O(this),b&&za.set(this,"__className__",b),this.setAttribute&&this.setAttribute("class",b||a===!1?"":za.get(this,"__className__")||""))})},hasClass:function(a){var b,c,d=0;for(b=" "+a+" ";c=this[d++];)if(1===c.nodeType&&(" "+O(c)+" ").replace(mb," ").indexOf(b)>-1)return!0;return!1}});var nb=/\r/g,ob=/[\x20\t\r\n\f]+/g;fa.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=fa.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,fa(this).val()):a,null==e?e="":"number"==typeof e?e+="":fa.isArray(e)&&(e=fa.map(e,function(a){return null==a?"":a+""})),b=fa.valHooks[this.type]||fa.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=fa.valHooks[e.type]||fa.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(nb,""):null==c?"":c)}}}),fa.extend({valHooks:{option:{get:function(a){var b=fa.find.attr(a,"value");return null!=b?b:fa.trim(fa.text(a)).replace(ob," ")}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],(c.selected||i===e)&&(da.optDisabled?!c.disabled:null===c.getAttribute("disabled"))&&(!c.parentNode.disabled||!fa.nodeName(c.parentNode,"optgroup"))){if(b=fa(c).val(),f)return b;g.push(b)}return g},set:function(a,b){for(var c,d,e=a.options,f=fa.makeArray(b),g=e.length;g--;)d=e[g],(d.selected=fa.inArray(fa.valHooks.option.get(d),f)>-1)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),fa.each(["radio","checkbox"],function(){fa.valHooks[this]={set:function(a,b){return fa.isArray(b)?a.checked=fa.inArray(fa(a).val(),b)>-1:void 0}},da.checkOn||(fa.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var pb=/^(?:focusinfocus|focusoutblur)$/;fa.extend(fa.event,{trigger:function(b,c,d,e){var f,g,h,i,j,k,l,m=[d||X],n=ca.call(b,"type")?b.type:b,o=ca.call(b,"namespace")?b.namespace.split("."):[];if(g=h=d=d||X,3!==d.nodeType&&8!==d.nodeType&&!pb.test(n+fa.event.triggered)&&(n.indexOf(".")>-1&&(o=n.split("."),n=o.shift(),o.sort()),j=n.indexOf(":")<0&&"on"+n,b=b[fa.expando]?b:new fa.Event(n,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=o.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:fa.makeArray(c,[b]),l=fa.event.special[n]||{},e||!l.trigger||l.trigger.apply(d,c)!==!1)){if(!e&&!l.noBubble&&!fa.isWindow(d)){for(i=l.delegateType||n,pb.test(i+n)||(g=g.parentNode);g;g=g.parentNode)m.push(g),h=g;h===(d.ownerDocument||X)&&m.push(h.defaultView||h.parentWindow||a)}for(f=0;(g=m[f++])&&!b.isPropagationStopped();)b.type=f>1?i:l.bindType||n,k=(za.get(g,"events")||{})[b.type]&&za.get(g,"handle"),k&&k.apply(g,c),k=j&&g[j],k&&k.apply&&ya(g)&&(b.result=k.apply(g,c),b.result===!1&&b.preventDefault());return b.type=n,e||b.isDefaultPrevented()||l._default&&l._default.apply(m.pop(),c)!==!1||!ya(d)||j&&fa.isFunction(d[n])&&!fa.isWindow(d)&&(h=d[j],h&&(d[j]=null),fa.event.triggered=n,d[n](),fa.event.triggered=void 0,h&&(d[j]=h)),b.result}},simulate:function(a,b,c){var d=fa.extend(new fa.Event,c,{type:a,isSimulated:!0});fa.event.trigger(d,null,b),d.isDefaultPrevented()&&c.preventDefault()}}),fa.fn.extend({trigger:function(a,b){return this.each(function(){fa.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?fa.event.trigger(a,b,c,!0):void 0}}),fa.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){fa.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),fa.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),da.focusin="onfocusin"in a,da.focusin||fa.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){fa.event.simulate(b,a.target,fa.event.fix(a))};fa.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=za.access(d,b);e||d.addEventListener(a,c,!0),za.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=za.access(d,b)-1;e?za.access(d,b,e):(d.removeEventListener(a,c,!0),za.remove(d,b))}}});var qb=a.location,rb=fa.now(),sb=/\?/;fa.parseJSON=function(a){return JSON.parse(a+"")},fa.parseXML=function(b){var c;if(!b||"string"!=typeof b)return null;try{c=(new a.DOMParser).parseFromString(b,"text/xml")}catch(d){c=void 0}return c&&!c.getElementsByTagName("parsererror").length||fa.error("Invalid XML: "+b),c};var tb=/#.*$/,ub=/([?&])_=[^&]*/,vb=/^(.*?):[ \t]*([^\r\n]*)$/gm,wb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,xb=/^(?:GET|HEAD)$/,yb=/^\/\//,zb={},Ab={},Bb="*/".concat("*"),Cb=X.createElement("a");Cb.href=qb.href,fa.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:qb.href,type:"GET",isLocal:wb.test(qb.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Bb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":fa.parseJSON,"text xml":fa.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?R(R(a,fa.ajaxSettings),b):R(fa.ajaxSettings,a)},ajaxPrefilter:P(zb),ajaxTransport:P(Ab),ajax:function(b,c){function d(b,c,d,h){var j,l,s,t,v,x=c;2!==u&&(u=2,i&&a.clearTimeout(i),e=void 0,g=h||"",w.readyState=b>0?4:0,j=b>=200&&300>b||304===b,d&&(t=S(m,w,d)),t=T(m,t,w,j),j?(m.ifModified&&(v=w.getResponseHeader("Last-Modified"),v&&(fa.lastModified[f]=v),v=w.getResponseHeader("etag"),v&&(fa.etag[f]=v)),204===b||"HEAD"===m.type?x="nocontent":304===b?x="notmodified":(x=t.state,l=t.data,s=t.error,j=!s)):(s=x,!b&&x||(x="error",0>b&&(b=0))),w.status=b,w.statusText=(c||x)+"",j?p.resolveWith(n,[l,x,w]):p.rejectWith(n,[w,x,s]),w.statusCode(r),r=void 0,k&&o.trigger(j?"ajaxSuccess":"ajaxError",[w,m,j?l:s]),q.fireWith(n,[w,x]),k&&(o.trigger("ajaxComplete",[w,m]),--fa.active||fa.event.trigger("ajaxStop")))}"object"==typeof b&&(c=b,b=void 0),c=c||{};var e,f,g,h,i,j,k,l,m=fa.ajaxSetup({},c),n=m.context||m,o=m.context&&(n.nodeType||n.jquery)?fa(n):fa.event,p=fa.Deferred(),q=fa.Callbacks("once memory"),r=m.statusCode||{},s={},t={},u=0,v="canceled",w={readyState:0,getResponseHeader:function(a){var b;if(2===u){if(!h)for(h={};b=vb.exec(g);)h[b[1].toLowerCase()]=b[2];b=h[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===u?g:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return u||(a=t[c]=t[c]||a,s[a]=b),this},overrideMimeType:function(a){return u||(m.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>u)for(b in a)r[b]=[r[b],a[b]];else w.always(a[w.status]);return this},abort:function(a){var b=a||v;return e&&e.abort(b),d(0,b),this}};if(p.promise(w).complete=q.add,w.success=w.done,w.error=w.fail,m.url=((b||m.url||qb.href)+"").replace(tb,"").replace(yb,qb.protocol+"//"),m.type=c.method||c.type||m.method||m.type,m.dataTypes=fa.trim(m.dataType||"*").toLowerCase().match(va)||[""],null==m.crossDomain){j=X.createElement("a");try{j.href=m.url,j.href=j.href,m.crossDomain=Cb.protocol+"//"+Cb.host!=j.protocol+"//"+j.host}catch(x){m.crossDomain=!0}}if(m.data&&m.processData&&"string"!=typeof m.data&&(m.data=fa.param(m.data,m.traditional)),Q(zb,m,c,w),2===u)return w;k=fa.event&&m.global,k&&0===fa.active++&&fa.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!xb.test(m.type),f=m.url,m.hasContent||(m.data&&(f=m.url+=(sb.test(f)?"&":"?")+m.data,delete m.data),m.cache===!1&&(m.url=ub.test(f)?f.replace(ub,"$1_="+rb++):f+(sb.test(f)?"&":"?")+"_="+rb++)),m.ifModified&&(fa.lastModified[f]&&w.setRequestHeader("If-Modified-Since",fa.lastModified[f]),fa.etag[f]&&w.setRequestHeader("If-None-Match",fa.etag[f])),(m.data&&m.hasContent&&m.contentType!==!1||c.contentType)&&w.setRequestHeader("Content-Type",m.contentType),w.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+Bb+"; q=0.01":""):m.accepts["*"]);for(l in m.headers)w.setRequestHeader(l,m.headers[l]);if(m.beforeSend&&(m.beforeSend.call(n,w,m)===!1||2===u))return w.abort();v="abort";for(l in{success:1,error:1,complete:1})w[l](m[l]);if(e=Q(Ab,m,c,w)){if(w.readyState=1,k&&o.trigger("ajaxSend",[w,m]),2===u)return w;m.async&&m.timeout>0&&(i=a.setTimeout(function(){w.abort("timeout")},m.timeout));try{u=1,e.send(s,d)}catch(x){if(!(2>u))throw x;d(-1,x)}}else d(-1,"No Transport");return w},getJSON:function(a,b,c){return fa.get(a,b,c,"json")},getScript:function(a,b){return fa.get(a,void 0,b,"script")}}),fa.each(["get","post"],function(a,b){fa[b]=function(a,c,d,e){return fa.isFunction(c)&&(e=e||d,d=c,c=void 0),fa.ajax(fa.extend({url:a,type:b,dataType:e,data:c,success:d},fa.isPlainObject(a)&&a))}}),fa._evalUrl=function(a){return fa.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},fa.fn.extend({wrapAll:function(a){var b;return fa.isFunction(a)?this.each(function(b){fa(this).wrapAll(a.call(this,b))}):(this[0]&&(b=fa(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstElementChild;)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return fa.isFunction(a)?this.each(function(b){fa(this).wrapInner(a.call(this,b))}):this.each(function(){var b=fa(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=fa.isFunction(a);return this.each(function(c){fa(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){fa.nodeName(this,"body")||fa(this).replaceWith(this.childNodes)}).end()}}),fa.expr.filters.hidden=function(a){return!fa.expr.filters.visible(a)},fa.expr.filters.visible=function(a){return a.offsetWidth>0||a.offsetHeight>0||a.getClientRects().length>0};var Db=/%20/g,Eb=/\[\]$/,Fb=/\r?\n/g,Gb=/^(?:submit|button|image|reset|file)$/i,Hb=/^(?:input|select|textarea|keygen)/i;fa.param=function(a,b){var c,d=[],e=function(a,b){b=fa.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=fa.ajaxSettings&&fa.ajaxSettings.traditional),fa.isArray(a)||a.jquery&&!fa.isPlainObject(a))fa.each(a,function(){e(this.name,this.value)});else for(c in a)U(c,a[c],b,e);return d.join("&").replace(Db,"+")},fa.fn.extend({serialize:function(){return fa.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=fa.prop(this,"elements");return a?fa.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!fa(this).is(":disabled")&&Hb.test(this.nodeName)&&!Gb.test(a)&&(this.checked||!Ha.test(a))}).map(function(a,b){var c=fa(this).val();return null==c?null:fa.isArray(c)?fa.map(c,function(a){return{name:b.name,value:a.replace(Fb,"\r\n")}}):{name:b.name,value:c.replace(Fb,"\r\n")}}).get()}}),fa.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(b){}};var Ib={0:200,1223:204},Jb=fa.ajaxSettings.xhr();da.cors=!!Jb&&"withCredentials"in Jb,da.ajax=Jb=!!Jb,fa.ajaxTransport(function(b){var c,d;return da.cors||Jb&&!b.crossDomain?{send:function(e,f){var g,h=b.xhr();if(h.open(b.type,b.url,b.async,b.username,b.password),b.xhrFields)for(g in b.xhrFields)h[g]=b.xhrFields[g];b.mimeType&&h.overrideMimeType&&h.overrideMimeType(b.mimeType),b.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");for(g in e)h.setRequestHeader(g,e[g]);c=function(a){return function(){c&&(c=d=h.onload=h.onerror=h.onabort=h.onreadystatechange=null,"abort"===a?h.abort():"error"===a?"number"!=typeof h.status?f(0,"error"):f(h.status,h.statusText):f(Ib[h.status]||h.status,h.statusText,"text"!==(h.responseType||"text")||"string"!=typeof h.responseText?{binary:h.response}:{text:h.responseText},h.getAllResponseHeaders()))}},h.onload=c(),d=h.onerror=c("error"),void 0!==h.onabort?h.onabort=d:h.onreadystatechange=function(){4===h.readyState&&a.setTimeout(function(){c&&d()})},c=c("abort");try{h.send(b.hasContent&&b.data||null)}catch(i){if(c)throw i}},abort:function(){c&&c()}}:void 0}),fa.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return fa.globalEval(a),a}}}),fa.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),fa.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=fa("<script>").prop({charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),X.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Kb=[],Lb=/(=)\?(?=&|$)|\?\?/;fa.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Kb.pop()||fa.expando+"_"+rb++;return this[a]=!0,a}}),fa.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Lb.test(b.url)?"url":"string"==typeof b.data&&0===(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Lb.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=fa.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Lb,"$1"+e):b.jsonp!==!1&&(b.url+=(sb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||fa.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){void 0===f?fa(a).removeProp(e):a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Kb.push(e)),g&&fa.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),fa.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||X;var d=oa.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=m([a],b,e),e&&e.length&&fa(e).remove(),fa.merge([],d.childNodes))};var Mb=fa.fn.load;fa.fn.load=function(a,b,c){if("string"!=typeof a&&Mb)return Mb.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>-1&&(d=fa.trim(a.slice(h)),a=a.slice(0,h)),fa.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&fa.ajax({url:a,type:e||"GET",dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?fa("<div>").append(fa.parseHTML(a)).find(d):a)}).always(c&&function(a,b){g.each(function(){c.apply(this,f||[a.responseText,b,a])})}),this},fa.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){fa.fn[b]=function(a){return this.on(b,a)}}),fa.expr.filters.animated=function(a){return fa.grep(fa.timers,function(b){return a===b.elem}).length},fa.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=fa.css(a,"position"),l=fa(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=fa.css(a,"top"),i=fa.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),fa.isFunction(b)&&(b=b.call(a,c,fa.extend({},h))),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},fa.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){fa.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;if(f)return b=f.documentElement,fa.contains(b,d)?(e=d.getBoundingClientRect(),c=V(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===fa.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),fa.nodeName(a[0],"html")||(d=a.offset()),d.top+=fa.css(a[0],"borderTopWidth",!0),d.left+=fa.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-fa.css(c,"marginTop",!0),left:b.left-d.left-fa.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent;a&&"static"===fa.css(a,"position");)a=a.offsetParent;return a||$a})}}),fa.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c="pageYOffset"===b;fa.fn[a]=function(d){return xa(this,function(a,d,e){var f=V(a);return void 0===e?f?f[b]:a[d]:void(f?f.scrollTo(c?f.pageXOffset:e,c?e:f.pageYOffset):a[d]=e)},a,d,arguments.length)}}),fa.each(["top","left"],function(a,b){fa.cssHooks[b]=B(da.pixelPosition,function(a,c){return c?(c=A(a,b),Xa.test(c)?fa(a).position()[b]+"px":c):void 0})}),fa.each({Height:"height",Width:"width"},function(a,b){fa.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){fa.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return xa(this,function(b,c,d){var e;return fa.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?fa.css(b,c,g):fa.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),fa.fn.extend({bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)},size:function(){return this.length}}),fa.fn.andSelf=fa.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return fa});var Nb=a.jQuery,Ob=a.$;return fa.noConflict=function(b){return a.$===fa&&(a.$=Ob),b&&a.jQuery===fa&&(a.jQuery=Nb),fa},b||(a.jQuery=a.$=fa),fa}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){function b(b,d){var e,f,g,h=b.nodeName.toLowerCase();return"area"===h?(e=b.parentNode,f=e.name,b.href&&f&&"map"===e.nodeName.toLowerCase()?(g=a("img[usemap='#"+f+"']")[0],!!g&&c(g)):!1):(/^(input|select|textarea|button|object)$/.test(h)?!b.disabled:"a"===h?b.href||d:d)&&c(b)}function c(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}function d(a){for(var b,c;a.length&&a[0]!==document;){if(b=a.css("position"),("absolute"===b||"relative"===b||"fixed"===b)&&(c=parseInt(a.css("zIndex"),10),!isNaN(c)&&0!==c))return c;a=a.parent()}return 0}function e(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},a.extend(this._defaults,this.regional[""]),this.regional.en=a.extend(!0,{},this.regional[""]),this.regional["en-US"]=a.extend(!0,{},this.regional.en),this.dpDiv=f(a("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function f(b){var c="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return b.delegate(c,"mouseout",function(){a(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&a(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&a(this).removeClass("ui-datepicker-next-hover")}).delegate(c,"mouseover",g)}function g(){a.datepicker._isDisabledDatepicker(r.inline?r.dpDiv.parent()[0]:r.input[0])||(a(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),a(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&a(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&a(this).addClass("ui-datepicker-next-hover"))}function h(b,c){a.extend(b,c);for(var d in c)null==c[d]&&(b[d]=c[d]);return b}function i(a){return function(){var b=this.element.val();a.apply(this,arguments),this._refresh(),b!==this.element.val()&&this._trigger("change")}}a.ui=a.ui||{},a.extend(a.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),a.fn.extend({scrollParent:function(b){var c=this.css("position"),d="absolute"===c,e=b?/(auto|scroll|hidden)/:/(auto|scroll)/,f=this.parents().filter(function(){var b=a(this);return d&&"static"===b.css("position")?!1:e.test(b.css("overflow")+b.css("overflow-y")+b.css("overflow-x"))}).eq(0);return"fixed"!==c&&f.length?f:a(this[0].ownerDocument||document)},uniqueId:function(){var a=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++a)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&a(this).removeAttr("id")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(c){return b(c,!isNaN(a.attr(c,"tabindex")))},tabbable:function(c){var d=a.attr(c,"tabindex"),e=isNaN(d);return(e||d>=0)&&b(c,!e)}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(b,c){function d(b,c,d,f){return a.each(e,function(){c-=parseFloat(a.css(b,"padding"+this))||0,d&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0),f&&(c-=parseFloat(a.css(b,"margin"+this))||0)}),c}var e="Width"===c?["Left","Right"]:["Top","Bottom"],f=c.toLowerCase(),g={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+c]=function(b){return void 0===b?g["inner"+c].call(this):this.each(function(){a(this).css(f,d(this,b)+"px")})},a.fn["outer"+c]=function(b,e){return"number"!=typeof b?g["outer"+c].call(this,b):this.each(function(){a(this).css(f,d(this,b,!0,e)+"px")})}}),a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=function(b){return function(c){return arguments.length?b.call(this,a.camelCase(c)):b.call(this)}}(a.fn.removeData)),a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),a.fn.extend({focus:function(b){return function(c,d){return"number"==typeof c?this.each(function(){var b=this;setTimeout(function(){a(b).focus(),d&&d.call(b)},c)}):b.apply(this,arguments)}}(a.fn.focus),disableSelection:function(){var a="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(a+".ui-disableSelection",function(a){a.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(b){if(void 0!==b)return this.css("zIndex",b);if(this.length)for(var c,d,e=a(this[0]);e.length&&e[0]!==document;){if(c=e.css("position"),("absolute"===c||"relative"===c||"fixed"===c)&&(d=parseInt(e.css("zIndex"),10),!isNaN(d)&&0!==d))return d;e=e.parent()}return 0}}),a.ui.plugin={add:function(b,c,d){var e,f=a.ui[b].prototype;for(e in d)f.plugins[e]=f.plugins[e]||[],f.plugins[e].push([c,d[e]])},call:function(a,b,c,d){var e,f=a.plugins[b];if(f&&(d||a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType))for(e=0;e<f.length;e++)a.options[f[e][0]]&&f[e][1].apply(a.element,c)}};var j=0,k=Array.prototype.slice;a.cleanData=function(b){return function(c){var d,e,f;for(f=0;null!=(e=c[f]);f++)try{d=a._data(e,"events"),d&&d.remove&&a(e).triggerHandler("remove")}catch(g){}b(c)}}(a.cleanData),a.widget=function(b,c,d){var e,f,g,h,i={},j=b.split(".")[0];return b=b.split(".")[1],e=j+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][e.toLowerCase()]=function(b){return!!a.data(b,e)},a[j]=a[j]||{},f=a[j][b],g=a[j][b]=function(a,b){return this._createWidget?void(arguments.length&&this._createWidget(a,b)):new g(a,b)},a.extend(g,f,{version:d.version,_proto:a.extend({},d),_childConstructors:[]}),h=new c,h.options=a.widget.extend({},h.options),a.each(d,function(b,d){return a.isFunction(d)?void(i[b]=function(){var a=function(){return c.prototype[b].apply(this,arguments)},e=function(a){return c.prototype[b].apply(this,a)};return function(){var b,c=this._super,f=this._superApply;return this._super=a,this._superApply=e,b=d.apply(this,arguments),this._super=c,this._superApply=f,b}}()):void(i[b]=d)}),g.prototype=a.widget.extend(h,{widgetEventPrefix:f?h.widgetEventPrefix||b:b},i,{constructor:g,namespace:j,widgetName:b,widgetFullName:e}),f?(a.each(f._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,g,c._proto)}),delete f._childConstructors):c._childConstructors.push(g),a.widget.bridge(b,g),g},a.widget.extend=function(b){for(var c,d,e=k.call(arguments,1),f=0,g=e.length;g>f;f++)for(c in e[f])d=e[f][c],e[f].hasOwnProperty(c)&&void 0!==d&&(a.isPlainObject(d)?b[c]=a.isPlainObject(b[c])?a.widget.extend({},b[c],d):a.widget.extend({},d):b[c]=d);return b},a.widget.bridge=function(b,c){var d=c.prototype.widgetFullName||b;a.fn[b]=function(e){var f="string"==typeof e,g=k.call(arguments,1),h=this;return f?this.each(function(){var c,f=a.data(this,d);return"instance"===e?(h=f,!1):f?a.isFunction(f[e])&&"_"!==e.charAt(0)?(c=f[e].apply(f,g),c!==f&&void 0!==c?(h=c&&c.jquery?h.pushStack(c.get()):c,!1):void 0):a.error("no such method '"+e+"' for "+b+" widget instance"):a.error("cannot call methods on "+b+" prior to initialization; attempted to call method '"+e+"'");
}):(g.length&&(e=a.widget.extend.apply(null,[e].concat(g))),this.each(function(){var b=a.data(this,d);b?(b.option(e||{}),b._init&&b._init()):a.data(this,d,new c(e,this))})),h}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,c){c=a(c||this.defaultElement||this)[0],this.element=a(c),this.uuid=j++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=a(),this.hoverable=a(),this.focusable=a(),c!==this&&(a.data(c,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===c&&this.destroy()}}),this.document=a(c.style?c.ownerDocument:c.document||c),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this.options=a.widget.extend({},this.options,this._getCreateOptions(),b),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(b,c){var d,e,f,g=b;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof b)if(g={},d=b.split("."),b=d.shift(),d.length){for(e=g[b]=a.widget.extend({},this.options[b]),f=0;f<d.length-1;f++)e[d[f]]=e[d[f]]||{},e=e[d[f]];if(b=d.pop(),1===arguments.length)return void 0===e[b]?null:e[b];e[b]=c}else{if(1===arguments.length)return void 0===this.options[b]?null:this.options[b];g[b]=c}return this._setOptions(g),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!b),b&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(b,c,d){var e,f=this;"boolean"!=typeof b&&(d=c,c=b,b=!1),d?(c=e=a(c),this.bindings=this.bindings.add(c)):(d=c,c=this.element,e=this.widget()),a.each(d,function(d,g){function h(){return b||f.options.disabled!==!0&&!a(this).hasClass("ui-state-disabled")?("string"==typeof g?f[g]:g).apply(f,arguments):void 0}"string"!=typeof g&&(h.guid=g.guid=g.guid||h.guid||a.guid++);var i=d.match(/^([\w:-]*)\s*(.*)$/),j=i[1]+f.eventNamespace,k=i[2];k?e.delegate(k,j,h):c.bind(j,h)})},_off:function(b,c){c=(c||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,b.unbind(c).undelegate(c),this.bindings=a(this.bindings.not(b).get()),this.focusable=a(this.focusable.not(b).get()),this.hoverable=a(this.hoverable.not(b).get())},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?e===!0||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}});var l=(a.widget,!1);a(document).mouseup(function(){l=!1});a.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){return!0===a.data(c.target,b.widgetName+".preventClickEvent")?(a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(!l){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(b),this._mouseDownEvent=b;var c=this,d=1===b.which,e="string"==typeof this.options.cancel&&b.target.nodeName?a(b.target).closest(this.options.cancel).length:!1;return d&&!e&&this._mouseCapture(b)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){c.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(b)!==!1,!this._mouseStarted)?(b.preventDefault(),!0):(!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return c._mouseMove(a)},this._mouseUpDelegate=function(a){return c._mouseUp(a)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),b.preventDefault(),l=!0,!0)):!0}},_mouseMove:function(b){if(this._mouseMoved){if(a.ui.ie&&(!document.documentMode||document.documentMode<9)&&!b.button)return this._mouseUp(b);if(!b.which)return this._mouseUp(b)}return(b.which||b.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted)},_mouseUp:function(b){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),l=!1,!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}});!function(){function b(a,b,c){return[parseFloat(a[0])*(n.test(a[0])?b/100:1),parseFloat(a[1])*(n.test(a[1])?c/100:1)]}function c(b,c){return parseInt(a.css(b,c),10)||0}function d(b){var c=b[0];return 9===c.nodeType?{width:b.width(),height:b.height(),offset:{top:0,left:0}}:a.isWindow(c)?{width:b.width(),height:b.height(),offset:{top:b.scrollTop(),left:b.scrollLeft()}}:c.preventDefault?{width:0,height:0,offset:{top:c.pageY,left:c.pageX}}:{width:b.outerWidth(),height:b.outerHeight(),offset:b.offset()}}a.ui=a.ui||{};var e,f,g=Math.max,h=Math.abs,i=Math.round,j=/left|center|right/,k=/top|center|bottom/,l=/[\+\-]\d+(\.[\d]+)?%?/,m=/^\w+/,n=/%$/,o=a.fn.position;a.position={scrollbarWidth:function(){if(void 0!==e)return e;var b,c,d=a("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),f=d.children()[0];return a("body").append(d),b=f.offsetWidth,d.css("overflow","scroll"),c=f.offsetWidth,b===c&&(c=d[0].clientWidth),d.remove(),e=b-c},getScrollInfo:function(b){var c=b.isWindow||b.isDocument?"":b.element.css("overflow-x"),d=b.isWindow||b.isDocument?"":b.element.css("overflow-y"),e="scroll"===c||"auto"===c&&b.width<b.element[0].scrollWidth,f="scroll"===d||"auto"===d&&b.height<b.element[0].scrollHeight;return{width:f?a.position.scrollbarWidth():0,height:e?a.position.scrollbarWidth():0}},getWithinInfo:function(b){var c=a(b||window),d=a.isWindow(c[0]),e=!!c[0]&&9===c[0].nodeType;return{element:c,isWindow:d,isDocument:e,offset:c.offset()||{left:0,top:0},scrollLeft:c.scrollLeft(),scrollTop:c.scrollTop(),width:d||e?c.width():c.outerWidth(),height:d||e?c.height():c.outerHeight()}}},a.fn.position=function(e){if(!e||!e.of)return o.apply(this,arguments);e=a.extend({},e);var n,p,q,r,s,t,u=a(e.of),v=a.position.getWithinInfo(e.within),w=a.position.getScrollInfo(v),x=(e.collision||"flip").split(" "),y={};return t=d(u),u[0].preventDefault&&(e.at="left top"),p=t.width,q=t.height,r=t.offset,s=a.extend({},r),a.each(["my","at"],function(){var a,b,c=(e[this]||"").split(" ");1===c.length&&(c=j.test(c[0])?c.concat(["center"]):k.test(c[0])?["center"].concat(c):["center","center"]),c[0]=j.test(c[0])?c[0]:"center",c[1]=k.test(c[1])?c[1]:"center",a=l.exec(c[0]),b=l.exec(c[1]),y[this]=[a?a[0]:0,b?b[0]:0],e[this]=[m.exec(c[0])[0],m.exec(c[1])[0]]}),1===x.length&&(x[1]=x[0]),"right"===e.at[0]?s.left+=p:"center"===e.at[0]&&(s.left+=p/2),"bottom"===e.at[1]?s.top+=q:"center"===e.at[1]&&(s.top+=q/2),n=b(y.at,p,q),s.left+=n[0],s.top+=n[1],this.each(function(){var d,j,k=a(this),l=k.outerWidth(),m=k.outerHeight(),o=c(this,"marginLeft"),t=c(this,"marginTop"),z=l+o+c(this,"marginRight")+w.width,A=m+t+c(this,"marginBottom")+w.height,B=a.extend({},s),C=b(y.my,k.outerWidth(),k.outerHeight());"right"===e.my[0]?B.left-=l:"center"===e.my[0]&&(B.left-=l/2),"bottom"===e.my[1]?B.top-=m:"center"===e.my[1]&&(B.top-=m/2),B.left+=C[0],B.top+=C[1],f||(B.left=i(B.left),B.top=i(B.top)),d={marginLeft:o,marginTop:t},a.each(["left","top"],function(b,c){a.ui.position[x[b]]&&a.ui.position[x[b]][c](B,{targetWidth:p,targetHeight:q,elemWidth:l,elemHeight:m,collisionPosition:d,collisionWidth:z,collisionHeight:A,offset:[n[0]+C[0],n[1]+C[1]],my:e.my,at:e.at,within:v,elem:k})}),e.using&&(j=function(a){var b=r.left-B.left,c=b+p-l,d=r.top-B.top,f=d+q-m,i={target:{element:u,left:r.left,top:r.top,width:p,height:q},element:{element:k,left:B.left,top:B.top,width:l,height:m},horizontal:0>c?"left":b>0?"right":"center",vertical:0>f?"top":d>0?"bottom":"middle"};l>p&&h(b+c)<p&&(i.horizontal="center"),m>q&&h(d+f)<q&&(i.vertical="middle"),g(h(b),h(c))>g(h(d),h(f))?i.important="horizontal":i.important="vertical",e.using.call(this,a,i)}),k.offset(a.extend(B,{using:j}))})},a.ui.position={fit:{left:function(a,b){var c,d=b.within,e=d.isWindow?d.scrollLeft:d.offset.left,f=d.width,h=a.left-b.collisionPosition.marginLeft,i=e-h,j=h+b.collisionWidth-f-e;b.collisionWidth>f?i>0&&0>=j?(c=a.left+i+b.collisionWidth-f-e,a.left+=i-c):j>0&&0>=i?a.left=e:i>j?a.left=e+f-b.collisionWidth:a.left=e:i>0?a.left+=i:j>0?a.left-=j:a.left=g(a.left-h,a.left)},top:function(a,b){var c,d=b.within,e=d.isWindow?d.scrollTop:d.offset.top,f=b.within.height,h=a.top-b.collisionPosition.marginTop,i=e-h,j=h+b.collisionHeight-f-e;b.collisionHeight>f?i>0&&0>=j?(c=a.top+i+b.collisionHeight-f-e,a.top+=i-c):j>0&&0>=i?a.top=e:i>j?a.top=e+f-b.collisionHeight:a.top=e:i>0?a.top+=i:j>0?a.top-=j:a.top=g(a.top-h,a.top)}},flip:{left:function(a,b){var c,d,e=b.within,f=e.offset.left+e.scrollLeft,g=e.width,i=e.isWindow?e.scrollLeft:e.offset.left,j=a.left-b.collisionPosition.marginLeft,k=j-i,l=j+b.collisionWidth-g-i,m="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,n="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?-b.targetWidth:0,o=-2*b.offset[0];0>k?(c=a.left+m+n+o+b.collisionWidth-g-f,(0>c||c<h(k))&&(a.left+=m+n+o)):l>0&&(d=a.left-b.collisionPosition.marginLeft+m+n+o-i,(d>0||h(d)<l)&&(a.left+=m+n+o))},top:function(a,b){var c,d,e=b.within,f=e.offset.top+e.scrollTop,g=e.height,i=e.isWindow?e.scrollTop:e.offset.top,j=a.top-b.collisionPosition.marginTop,k=j-i,l=j+b.collisionHeight-g-i,m="top"===b.my[1],n=m?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,o="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:0,p=-2*b.offset[1];0>k?(d=a.top+n+o+p+b.collisionHeight-g-f,(0>d||d<h(k))&&(a.top+=n+o+p)):l>0&&(c=a.top-b.collisionPosition.marginTop+n+o+p-i,(c>0||h(c)<l)&&(a.top+=n+o+p))}},flipfit:{left:function(){a.ui.position.flip.left.apply(this,arguments),a.ui.position.fit.left.apply(this,arguments)},top:function(){a.ui.position.flip.top.apply(this,arguments),a.ui.position.fit.top.apply(this,arguments)}}},function(){var b,c,d,e,g,h=document.getElementsByTagName("body")[0],i=document.createElement("div");b=document.createElement(h?"div":"body"),d={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},h&&a.extend(d,{position:"absolute",left:"-1000px",top:"-1000px"});for(g in d)b.style[g]=d[g];b.appendChild(i),c=h||document.documentElement,c.insertBefore(b,c.firstChild),i.style.cssText="position: absolute; left: 10.7432222px;",e=a(i).offset().left,f=e>10&&11>e,b.innerHTML="",c.removeChild(b)}()}();a.ui.position,a.widget("ui.accordion",{version:"1.11.4",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var b=this.options;this.prevShow=this.prevHide=a(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),b.collapsible||b.active!==!1&&null!=b.active||(b.active=0),this._processPanels(),b.active<0&&(b.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():a()}},_createIcons:function(){var b=this.options.icons;b&&(a("<span>").addClass("ui-accordion-header-icon ui-icon "+b.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(b.header).addClass(b.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var a;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").removeUniqueId(),this._destroyIcons(),a=this.headers.next().removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&a.css("height","")},_setOption:function(a,b){return"active"===a?void this._activate(b):("event"===a&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(b)),this._super(a,b),"collapsible"!==a||b||this.options.active!==!1||this._activate(0),"icons"===a&&(this._destroyIcons(),b&&this._createIcons()),void("disabled"===a&&(this.element.toggleClass("ui-state-disabled",!!b).attr("aria-disabled",b),this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!b))))},_keydown:function(b){if(!b.altKey&&!b.ctrlKey){var c=a.ui.keyCode,d=this.headers.length,e=this.headers.index(b.target),f=!1;switch(b.keyCode){case c.RIGHT:case c.DOWN:f=this.headers[(e+1)%d];break;case c.LEFT:case c.UP:f=this.headers[(e-1+d)%d];break;case c.SPACE:case c.ENTER:this._eventHandler(b);break;case c.HOME:f=this.headers[0];break;case c.END:f=this.headers[d-1]}f&&(a(b.target).attr("tabIndex",-1),a(f).attr("tabIndex",0),f.focus(),b.preventDefault())}},_panelKeyDown:function(b){b.keyCode===a.ui.keyCode.UP&&b.ctrlKey&&a(b.currentTarget).prev().focus()},refresh:function(){var b=this.options;this._processPanels(),b.active===!1&&b.collapsible===!0||!this.headers.length?(b.active=!1,this.active=a()):b.active===!1?this._activate(0):this.active.length&&!a.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(b.active=!1,this.active=a()):this._activate(Math.max(0,b.active-1)):b.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var a=this.headers,b=this.panels;this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-state-default ui-corner-all"),this.panels=this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide(),b&&(this._off(a.not(this.headers)),this._off(b.not(this.panels)))},_refresh:function(){var b,c=this.options,d=c.heightStyle,e=this.element.parent();this.active=this._findActive(c.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(){var b=a(this),c=b.uniqueId().attr("id"),d=b.next(),e=d.uniqueId().attr("id");b.attr("aria-controls",e),d.attr("aria-labelledby",c)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(c.event),"fill"===d?(b=e.height(),this.element.siblings(":visible").each(function(){var c=a(this),d=c.css("position");"absolute"!==d&&"fixed"!==d&&(b-=c.outerHeight(!0))}),this.headers.each(function(){b-=a(this).outerHeight(!0)}),this.headers.next().each(function(){a(this).height(Math.max(0,b-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")):"auto"===d&&(b=0,this.headers.next().each(function(){b=Math.max(b,a(this).css("height","").height())}).height(b))},_activate:function(b){var c=this._findActive(b)[0];c!==this.active[0]&&(c=c||this.active[0],this._eventHandler({target:c,currentTarget:c,preventDefault:a.noop}))},_findActive:function(b){return"number"==typeof b?this.headers.eq(b):a()},_setupEvents:function(b){var c={keydown:"_keydown"};b&&a.each(b.split(" "),function(a,b){c[b]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,c),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(b){var c=this.options,d=this.active,e=a(b.currentTarget),f=e[0]===d[0],g=f&&c.collapsible,h=g?a():e.next(),i=d.next(),j={oldHeader:d,oldPanel:i,newHeader:g?a():e,newPanel:h};b.preventDefault(),f&&!c.collapsible||this._trigger("beforeActivate",b,j)===!1||(c.active=g?!1:this.headers.index(e),this.active=f?a():e,this._toggle(j),d.removeClass("ui-accordion-header-active ui-state-active"),c.icons&&d.children(".ui-accordion-header-icon").removeClass(c.icons.activeHeader).addClass(c.icons.header),f||(e.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),c.icons&&e.children(".ui-accordion-header-icon").removeClass(c.icons.header).addClass(c.icons.activeHeader),e.next().addClass("ui-accordion-content-active")))},_toggle:function(b){var c=b.newPanel,d=this.prevShow.length?this.prevShow:b.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=c,this.prevHide=d,this.options.animate?this._animate(c,d,b):(d.hide(),c.show(),this._toggleComplete(b)),d.attr({"aria-hidden":"true"}),d.prev().attr({"aria-selected":"false","aria-expanded":"false"}),c.length&&d.length?d.prev().attr({tabIndex:-1,"aria-expanded":"false"}):c.length&&this.headers.filter(function(){return 0===parseInt(a(this).attr("tabIndex"),10)}).attr("tabIndex",-1),c.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(a,b,c){var d,e,f,g=this,h=0,i=a.css("box-sizing"),j=a.length&&(!b.length||a.index()<b.index()),k=this.options.animate||{},l=j&&k.down||k,m=function(){g._toggleComplete(c)};return"number"==typeof l&&(f=l),"string"==typeof l&&(e=l),e=e||l.easing||k.easing,f=f||l.duration||k.duration,b.length?a.length?(d=a.show().outerHeight(),b.animate(this.hideProps,{duration:f,easing:e,step:function(a,b){b.now=Math.round(a)}}),void a.hide().animate(this.showProps,{duration:f,easing:e,complete:m,step:function(a,c){c.now=Math.round(a),"height"!==c.prop?"content-box"===i&&(h+=c.now):"content"!==g.options.heightStyle&&(c.now=Math.round(d-b.outerHeight()-h),h=0)}})):b.animate(this.hideProps,f,e,m):a.animate(this.showProps,f,e,m)},_toggleComplete:function(a){var b=a.oldPanel;b.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),b.length&&(b.parent()[0].className=b.parent()[0].className),this._trigger("activate",null,a)}}),a.widget("ui.menu",{version:"1.11.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item":function(a){a.preventDefault()},"click .ui-menu-item":function(b){var c=a(b.target);!this.mouseHandled&&c.not(".ui-state-disabled").length&&(this.select(b),b.isPropagationStopped()||(this.mouseHandled=!0),c.has(".ui-menu").length?this.expand(b):!this.element.is(":focus")&&a(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(b){if(!this.previousFilter){var c=a(b.currentTarget);c.siblings(".ui-state-active").removeClass("ui-state-active"),this.focus(b,c)}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(a,b){var c=this.active||this.element.find(this.options.items).eq(0);b||this.focus(a,c)},blur:function(b){this._delay(function(){a.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(b)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(a){this._closeOnDocumentClick(a)&&this.collapseAll(a),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var b=a(this);b.data("ui-menu-submenu-carat")&&b.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(b){var c,d,e,f,g=!0;switch(b.keyCode){case a.ui.keyCode.PAGE_UP:this.previousPage(b);break;case a.ui.keyCode.PAGE_DOWN:this.nextPage(b);break;case a.ui.keyCode.HOME:this._move("first","first",b);break;case a.ui.keyCode.END:this._move("last","last",b);break;case a.ui.keyCode.UP:this.previous(b);break;case a.ui.keyCode.DOWN:this.next(b);break;case a.ui.keyCode.LEFT:this.collapse(b);break;case a.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(b);break;case a.ui.keyCode.ENTER:case a.ui.keyCode.SPACE:this._activate(b);break;case a.ui.keyCode.ESCAPE:this.collapse(b);break;default:g=!1,d=this.previousFilter||"",e=String.fromCharCode(b.keyCode),f=!1,clearTimeout(this.filterTimer),e===d?f=!0:e=d+e,c=this._filterMenuItems(e),c=f&&-1!==c.index(this.active.next())?this.active.nextAll(".ui-menu-item"):c,c.length||(e=String.fromCharCode(b.keyCode),c=this._filterMenuItems(e)),c.length?(this.focus(b,c),this.previousFilter=e,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}g&&b.preventDefault()},_activate:function(a){this.active.is(".ui-state-disabled")||(this.active.is("[aria-haspopup='true']")?this.expand(a):this.select(a))},refresh:function(){var b,c,d=this,e=this.options.icons.submenu,f=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),f.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var b=a(this),c=b.parent(),d=a("<span>").addClass("ui-menu-icon ui-icon "+e).data("ui-menu-submenu-carat",!0);c.attr("aria-haspopup","true").prepend(d),b.attr("aria-labelledby",c.attr("id"))}),b=f.add(this.element),c=b.find(this.options.items),c.not(".ui-menu-item").each(function(){var b=a(this);d._isDivider(b)&&b.addClass("ui-widget-content ui-menu-divider")}),c.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),c.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!a.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(a,b){"icons"===a&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(b.submenu),"disabled"===a&&this.element.toggleClass("ui-state-disabled",!!b).attr("aria-disabled",b),this._super(a,b)},focus:function(a,b){var c,d;this.blur(a,a&&"focus"===a.type),this._scrollIntoView(b),this.active=b.first(),d=this.active.addClass("ui-state-focus").removeClass("ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",d.attr("id")),this.active.parent().closest(".ui-menu-item").addClass("ui-state-active"),a&&"keydown"===a.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),c=b.children(".ui-menu"),c.length&&a&&/^mouse/.test(a.type)&&this._startOpening(c),this.activeMenu=b.parent(),this._trigger("focus",a,{item:b})},_scrollIntoView:function(b){var c,d,e,f,g,h;this._hasScroll()&&(c=parseFloat(a.css(this.activeMenu[0],"borderTopWidth"))||0,d=parseFloat(a.css(this.activeMenu[0],"paddingTop"))||0,e=b.offset().top-this.activeMenu.offset().top-c-d,f=this.activeMenu.scrollTop(),g=this.activeMenu.height(),h=b.outerHeight(),0>e?this.activeMenu.scrollTop(f+e):e+h>g&&this.activeMenu.scrollTop(f+e-g+h))},blur:function(a,b){b||clearTimeout(this.timer),this.active&&(this.active.removeClass("ui-state-focus"),this.active=null,this._trigger("blur",a,{item:this.active}))},_startOpening:function(a){clearTimeout(this.timer),"true"===a.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(a)},this.delay))},_open:function(b){var c=a.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(b.parents(".ui-menu")).hide().attr("aria-hidden","true"),b.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(c)},collapseAll:function(b,c){clearTimeout(this.timer),this.timer=this._delay(function(){var d=c?this.element:a(b&&b.target).closest(this.element.find(".ui-menu"));d.length||(d=this.element),this._close(d),this.blur(b),this.activeMenu=d},this.delay)},_close:function(a){a||(a=this.active?this.active.parent():this.element),a.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active")},_closeOnDocumentClick:function(b){return!a(b.target).closest(".ui-menu").length},_isDivider:function(a){return!/[^\-\u2014\u2013\s]/.test(a.text())},collapse:function(a){var b=this.active&&this.active.parent().closest(".ui-menu-item",this.element);b&&b.length&&(this._close(),this.focus(a,b))},expand:function(a){var b=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();b&&b.length&&(this._open(b.parent()),this._delay(function(){this.focus(a,b)}))},next:function(a){this._move("next","first",a)},previous:function(a){this._move("prev","last",a)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(a,b,c){var d;this.active&&(d="first"===a||"last"===a?this.active["first"===a?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[a+"All"](".ui-menu-item").eq(0)),d&&d.length&&this.active||(d=this.activeMenu.find(this.options.items)[b]()),this.focus(c,d)},nextPage:function(b){var c,d,e;return this.active?void(this.isLastItem()||(this._hasScroll()?(d=this.active.offset().top,e=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return c=a(this),c.offset().top-d-e<0}),this.focus(b,c)):this.focus(b,this.activeMenu.find(this.options.items)[this.active?"last":"first"]()))):void this.next(b)},previousPage:function(b){var c,d,e;return this.active?void(this.isFirstItem()||(this._hasScroll()?(d=this.active.offset().top,e=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return c=a(this),c.offset().top-d+e>0}),this.focus(b,c)):this.focus(b,this.activeMenu.find(this.options.items).first()))):void this.next(b)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(b){this.active=this.active||a(b.target).closest(".ui-menu-item");var c={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(b,!0),this._trigger("select",b,c)},_filterMenuItems:function(b){var c=b.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),d=new RegExp("^"+c,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return d.test(a.trim(a(this).text()))})}});a.widget("ui.autocomplete",{version:"1.11.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var b,c,d,e=this.element[0].nodeName.toLowerCase(),f="textarea"===e,g="input"===e;this.isMultiLine=f?!0:g?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[f||g?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(e){if(this.element.prop("readOnly"))return b=!0,d=!0,void(c=!0);b=!1,d=!1,c=!1;var f=a.ui.keyCode;switch(e.keyCode){case f.PAGE_UP:b=!0,this._move("previousPage",e);break;case f.PAGE_DOWN:b=!0,this._move("nextPage",e);break;case f.UP:b=!0,this._keyEvent("previous",e);break;case f.DOWN:b=!0,this._keyEvent("next",e);break;case f.ENTER:this.menu.active&&(b=!0,
e.preventDefault(),this.menu.select(e));break;case f.TAB:this.menu.active&&this.menu.select(e);break;case f.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(e),e.preventDefault());break;default:c=!0,this._searchTimeout(e)}},keypress:function(d){if(b)return b=!1,void(this.isMultiLine&&!this.menu.element.is(":visible")||d.preventDefault());if(!c){var e=a.ui.keyCode;switch(d.keyCode){case e.PAGE_UP:this._move("previousPage",d);break;case e.PAGE_DOWN:this._move("nextPage",d);break;case e.UP:this._keyEvent("previous",d);break;case e.DOWN:this._keyEvent("next",d)}}},input:function(a){return d?(d=!1,void a.preventDefault()):void this._searchTimeout(a)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(a){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(a),void this._change(a))}}),this._initSource(),this.menu=a("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._on(this.menu.element,{mousedown:function(b){b.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var c=this.menu.element[0];a(b.target).closest(".ui-menu-item").length||this._delay(function(){var b=this;this.document.one("mousedown",function(d){d.target===b.element[0]||d.target===c||a.contains(c,d.target)||b.close()})})},menufocus:function(b,c){var d,e;return this.isNewMenu&&(this.isNewMenu=!1,b.originalEvent&&/^mouse/.test(b.originalEvent.type))?(this.menu.blur(),void this.document.one("mousemove",function(){a(b.target).trigger(b.originalEvent)})):(e=c.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",b,{item:e})&&b.originalEvent&&/^key/.test(b.originalEvent.type)&&this._value(e.value),d=c.item.attr("aria-label")||e.value,void(d&&a.trim(d).length&&(this.liveRegion.children().hide(),a("<div>").text(d).appendTo(this.liveRegion))))},menuselect:function(a,b){var c=b.item.data("ui-autocomplete-item"),d=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=d,this._delay(function(){this.previous=d,this.selectedItem=c})),!1!==this._trigger("select",a,{item:c})&&this._value(c.value),this.term=this._value(),this.close(a),this.selectedItem=c}}),this.liveRegion=a("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(a,b){this._super(a,b),"source"===a&&this._initSource(),"appendTo"===a&&this.menu.element.appendTo(this._appendTo()),"disabled"===a&&b&&this.xhr&&this.xhr.abort()},_appendTo:function(){var b=this.options.appendTo;return b&&(b=b.jquery||b.nodeType?a(b):this.document.find(b).eq(0)),b&&b[0]||(b=this.element.closest(".ui-front")),b.length||(b=this.document[0].body),b},_initSource:function(){var b,c,d=this;a.isArray(this.options.source)?(b=this.options.source,this.source=function(c,d){d(a.ui.autocomplete.filter(b,c.term))}):"string"==typeof this.options.source?(c=this.options.source,this.source=function(b,e){d.xhr&&d.xhr.abort(),d.xhr=a.ajax({url:c,data:b,dataType:"json",success:function(a){e(a)},error:function(){e([])}})}):this.source=this.options.source},_searchTimeout:function(a){clearTimeout(this.searching),this.searching=this._delay(function(){var b=this.term===this._value(),c=this.menu.element.is(":visible"),d=a.altKey||a.ctrlKey||a.metaKey||a.shiftKey;b&&(!b||c||d)||(this.selectedItem=null,this.search(null,a))},this.options.delay)},search:function(a,b){return a=null!=a?a:this._value(),this.term=this._value(),a.length<this.options.minLength?this.close(b):this._trigger("search",b)!==!1?this._search(a):void 0},_search:function(a){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:a},this._response())},_response:function(){var b=++this.requestIndex;return a.proxy(function(a){b===this.requestIndex&&this.__response(a),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(a){a&&(a=this._normalize(a)),this._trigger("response",null,{content:a}),!this.options.disabled&&a&&a.length&&!this.cancelSearch?(this._suggest(a),this._trigger("open")):this._close()},close:function(a){this.cancelSearch=!0,this._close(a)},_close:function(a){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",a))},_change:function(a){this.previous!==this._value()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:a.map(b,function(b){return"string"==typeof b?{label:b,value:b}:a.extend({},b,{label:b.label||b.value,value:b.value||b.label})})},_suggest:function(b){var c=this.menu.element.empty();this._renderMenu(c,b),this.isNewMenu=!0,this.menu.refresh(),c.show(),this._resizeMenu(),c.position(a.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(b,c){var d=this;a.each(c,function(a,c){d._renderItemData(b,c)})},_renderItemData:function(a,b){return this._renderItem(a,b).data("ui-autocomplete-item",b)},_renderItem:function(b,c){return a("<li>").text(c.label).appendTo(b)},_move:function(a,b){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(a)||this.menu.isLastItem()&&/^next/.test(a)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[a](b):void this.search(null,b)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(a,b){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(a,b),b.preventDefault())}}),a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(b,c){var d=new RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(b,function(a){return d.test(a.label||a.value||a)})}}),a.widget("ui.autocomplete",a.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(a){return a+(a>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(b){var c;this._superApply(arguments),this.options.disabled||this.cancelSearch||(c=b&&b.length?this.options.messages.results(b.length):this.options.messages.noResults,this.liveRegion.children().hide(),a("<div>").text(c).appendTo(this.liveRegion))}});var m,n=(a.ui.autocomplete,"ui-button ui-widget ui-state-default ui-corner-all"),o="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",p=function(){var b=a(this);setTimeout(function(){b.find(":ui-button").button("refresh")},1)},q=function(b){var c=b.name,d=b.form,e=a([]);return c&&(c=c.replace(/'/g,"\\'"),e=d?a(d).find("[name='"+c+"'][type=radio]"):a("[name='"+c+"'][type=radio]",b.ownerDocument).filter(function(){return!this.form})),e};a.widget("ui.button",{version:"1.11.4",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,p),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var b=this,c=this.options,d="checkbox"===this.type||"radio"===this.type,e=d?"":"ui-state-active";null===c.label&&(c.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(n).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){c.disabled||this===m&&a(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){c.disabled||a(this).removeClass(e)}).bind("click"+this.eventNamespace,function(a){c.disabled&&(a.preventDefault(),a.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}}),d&&this.element.bind("change"+this.eventNamespace,function(){b.refresh()}),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return c.disabled?!1:void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(c.disabled)return!1;a(this).addClass("ui-state-active"),b.buttonElement.attr("aria-pressed","true");var d=b.element[0];q(d).not(d).map(function(){return a(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return c.disabled?!1:(a(this).addClass("ui-state-active"),m=this,void b.document.one("mouseup",function(){m=null}))}).bind("mouseup"+this.eventNamespace,function(){return c.disabled?!1:void a(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(b){return c.disabled?!1:void(b.keyCode!==a.ui.keyCode.SPACE&&b.keyCode!==a.ui.keyCode.ENTER||a(this).addClass("ui-state-active"))}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){a(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(b){b.keyCode===a.ui.keyCode.SPACE&&a(this).click()})),this._setOption("disabled",c.disabled),this._resetButton()},_determineButtonType:function(){var a,b,c;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button","checkbox"===this.type||"radio"===this.type?(a=this.element.parents().last(),b="label[for='"+this.element.attr("id")+"']",this.buttonElement=a.find(b),this.buttonElement.length||(a=a.length?a.siblings():this.element.siblings(),this.buttonElement=a.filter(b),this.buttonElement.length||(this.buttonElement=a.find(b))),this.element.addClass("ui-helper-hidden-accessible"),c=this.element.is(":checked"),c&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",c)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(n+" ui-state-active "+o).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(a,b){return this._super(a,b),"disabled"===a?(this.widget().toggleClass("ui-state-disabled",!!b),this.element.prop("disabled",!!b),void(b&&("checkbox"===this.type||"radio"===this.type?this.buttonElement.removeClass("ui-state-focus"):this.buttonElement.removeClass("ui-state-focus ui-state-active")))):void this._resetButton()},refresh:function(){var b=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");b!==this.options.disabled&&this._setOption("disabled",b),"radio"===this.type?q(this.element[0]).each(function(){a(this).is(":checked")?a(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):a(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var b=this.buttonElement.removeClass(o),c=a("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(b.empty()).text(),d=this.options.icons,e=d.primary&&d.secondary,f=[];d.primary||d.secondary?(this.options.text&&f.push("ui-button-text-icon"+(e?"s":d.primary?"-primary":"-secondary")),d.primary&&b.prepend("<span class='ui-button-icon-primary ui-icon "+d.primary+"'></span>"),d.secondary&&b.append("<span class='ui-button-icon-secondary ui-icon "+d.secondary+"'></span>"),this.options.text||(f.push(e?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||b.attr("title",a.trim(c)))):f.push("ui-button-text-only"),b.addClass(f.join(" "))}}),a.widget("ui.buttonset",{version:"1.11.4",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(a,b){"disabled"===a&&this.buttons.button("option",a,b),this._super(a,b)},refresh:function(){var b="rtl"===this.element.css("direction"),c=this.element.find(this.options.items),d=c.filter(":ui-button");c.not(":ui-button").button(),d.button("refresh"),this.buttons=c.map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(b?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(b?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}});a.ui.button;a.extend(a.ui,{datepicker:{version:"1.11.4"}});var r;a.extend(e.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){return h(this._defaults,a||{}),this},_attachDatepicker:function(b,c){var d,e,f;d=b.nodeName.toLowerCase(),e="div"===d||"span"===d,b.id||(this.uuid+=1,b.id="dp"+this.uuid),f=this._newInst(a(b),e),f.settings=a.extend({},c||{}),"input"===d?this._connectDatepicker(b,f):e&&this._inlineDatepicker(b,f)},_newInst:function(b,c){var d=b[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:d,input:b,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:c,dpDiv:c?f(a("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(b,c){var d=a(b);c.append=a([]),c.trigger=a([]),d.hasClass(this.markerClassName)||(this._attachments(d,c),d.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(c),a.data(b,"datepicker",c),c.settings.disabled&&this._disableDatepicker(b))},_attachments:function(b,c){var d,e,f,g=this._get(c,"appendText"),h=this._get(c,"isRTL");c.append&&c.append.remove(),g&&(c.append=a("<span class='"+this._appendClass+"'>"+g+"</span>"),b[h?"before":"after"](c.append)),b.unbind("focus",this._showDatepicker),c.trigger&&c.trigger.remove(),d=this._get(c,"showOn"),"focus"!==d&&"both"!==d||b.focus(this._showDatepicker),"button"!==d&&"both"!==d||(e=this._get(c,"buttonText"),f=this._get(c,"buttonImage"),c.trigger=a(this._get(c,"buttonImageOnly")?a("<img/>").addClass(this._triggerClass).attr({src:f,alt:e,title:e}):a("<button type='button'></button>").addClass(this._triggerClass).html(f?a("<img/>").attr({src:f,alt:e,title:e}):e)),b[h?"before":"after"](c.trigger),c.trigger.click(function(){return a.datepicker._datepickerShowing&&a.datepicker._lastInput===b[0]?a.datepicker._hideDatepicker():a.datepicker._datepickerShowing&&a.datepicker._lastInput!==b[0]?(a.datepicker._hideDatepicker(),a.datepicker._showDatepicker(b[0])):a.datepicker._showDatepicker(b[0]),!1}))},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b,c,d,e,f=new Date(2009,11,20),g=this._get(a,"dateFormat");g.match(/[DM]/)&&(b=function(a){for(c=0,d=0,e=0;e<a.length;e++)a[e].length>c&&(c=a[e].length,d=e);return d},f.setMonth(b(this._get(a,g.match(/MM/)?"monthNames":"monthNamesShort"))),f.setDate(b(this._get(a,g.match(/DD/)?"dayNames":"dayNamesShort"))+20-f.getDay())),a.input.attr("size",this._formatDate(a,f).length)}},_inlineDatepicker:function(b,c){var d=a(b);d.hasClass(this.markerClassName)||(d.addClass(this.markerClassName).append(c.dpDiv),a.data(b,"datepicker",c),this._setDate(c,this._getDefaultDate(c),!0),this._updateDatepicker(c),this._updateAlternate(c),c.settings.disabled&&this._disableDatepicker(b),c.dpDiv.css("display","block"))},_dialogDatepicker:function(b,c,d,e,f){var g,i,j,k,l,m=this._dialogInst;return m||(this.uuid+=1,g="dp"+this.uuid,this._dialogInput=a("<input type='text' id='"+g+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),a("body").append(this._dialogInput),m=this._dialogInst=this._newInst(this._dialogInput,!1),m.settings={},a.data(this._dialogInput[0],"datepicker",m)),h(m.settings,e||{}),c=c&&c.constructor===Date?this._formatDate(m,c):c,this._dialogInput.val(c),this._pos=f?f.length?f:[f.pageX,f.pageY]:null,this._pos||(i=document.documentElement.clientWidth,j=document.documentElement.clientHeight,k=document.documentElement.scrollLeft||document.body.scrollLeft,l=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[i/2-100+k,j/2-150+l]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),m.settings.onSelect=d,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),a.blockUI&&a.blockUI(this.dpDiv),a.data(this._dialogInput[0],"datepicker",m),this},_destroyDatepicker:function(b){var c,d=a(b),e=a.data(b,"datepicker");d.hasClass(this.markerClassName)&&(c=b.nodeName.toLowerCase(),a.removeData(b,"datepicker"),"input"===c?(e.append.remove(),e.trigger.remove(),d.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):"div"!==c&&"span"!==c||d.removeClass(this.markerClassName).empty(),r===e&&(r=null))},_enableDatepicker:function(b){var c,d,e=a(b),f=a.data(b,"datepicker");e.hasClass(this.markerClassName)&&(c=b.nodeName.toLowerCase(),"input"===c?(b.disabled=!1,f.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==c&&"span"!==c||(d=e.children("."+this._inlineClass),d.children().removeClass("ui-state-disabled"),d.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=a.map(this._disabledInputs,function(a){return a===b?null:a}))},_disableDatepicker:function(b){var c,d,e=a(b),f=a.data(b,"datepicker");e.hasClass(this.markerClassName)&&(c=b.nodeName.toLowerCase(),"input"===c?(b.disabled=!0,f.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==c&&"span"!==c||(d=e.children("."+this._inlineClass),d.children().addClass("ui-state-disabled"),d.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=a.map(this._disabledInputs,function(a){return a===b?null:a}),this._disabledInputs[this._disabledInputs.length]=b)},_isDisabledDatepicker:function(a){if(!a)return!1;for(var b=0;b<this._disabledInputs.length;b++)if(this._disabledInputs[b]===a)return!0;return!1},_getInst:function(b){try{return a.data(b,"datepicker")}catch(c){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(b,c,d){var e,f,g,i,j=this._getInst(b);return 2===arguments.length&&"string"==typeof c?"defaults"===c?a.extend({},a.datepicker._defaults):j?"all"===c?a.extend({},j.settings):this._get(j,c):null:(e=c||{},"string"==typeof c&&(e={},e[c]=d),void(j&&(this._curInst===j&&this._hideDatepicker(),f=this._getDateDatepicker(b,!0),g=this._getMinMaxDate(j,"min"),i=this._getMinMaxDate(j,"max"),h(j.settings,e),null!==g&&void 0!==e.dateFormat&&void 0===e.minDate&&(j.settings.minDate=this._formatDate(j,g)),null!==i&&void 0!==e.dateFormat&&void 0===e.maxDate&&(j.settings.maxDate=this._formatDate(j,i)),"disabled"in e&&(e.disabled?this._disableDatepicker(b):this._enableDatepicker(b)),this._attachments(a(b),j),this._autoSize(j),this._setDate(j,f),this._updateAlternate(j),this._updateDatepicker(j))))},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){var b=this._getInst(a);b&&this._updateDatepicker(b)},_setDateDatepicker:function(a,b){var c=this._getInst(a);c&&(this._setDate(c,b),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(a,b){var c=this._getInst(a);return c&&!c.inline&&this._setDateFromField(c,b),c?this._getDate(c):null},_doKeyDown:function(b){var c,d,e,f=a.datepicker._getInst(b.target),g=!0,h=f.dpDiv.is(".ui-datepicker-rtl");if(f._keyEvent=!0,a.datepicker._datepickerShowing)switch(b.keyCode){case 9:a.datepicker._hideDatepicker(),g=!1;break;case 13:return e=a("td."+a.datepicker._dayOverClass+":not(."+a.datepicker._currentClass+")",f.dpDiv),e[0]&&a.datepicker._selectDay(b.target,f.selectedMonth,f.selectedYear,e[0]),c=a.datepicker._get(f,"onSelect"),c?(d=a.datepicker._formatDate(f),c.apply(f.input?f.input[0]:null,[d,f])):a.datepicker._hideDatepicker(),!1;case 27:a.datepicker._hideDatepicker();break;case 33:a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(f,"stepBigMonths"):-a.datepicker._get(f,"stepMonths"),"M");break;case 34:a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(f,"stepBigMonths"):+a.datepicker._get(f,"stepMonths"),"M");break;case 35:(b.ctrlKey||b.metaKey)&&a.datepicker._clearDate(b.target),g=b.ctrlKey||b.metaKey;break;case 36:(b.ctrlKey||b.metaKey)&&a.datepicker._gotoToday(b.target),g=b.ctrlKey||b.metaKey;break;case 37:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,h?1:-1,"D"),g=b.ctrlKey||b.metaKey,b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(f,"stepBigMonths"):-a.datepicker._get(f,"stepMonths"),"M");break;case 38:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,-7,"D"),g=b.ctrlKey||b.metaKey;break;case 39:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,h?-1:1,"D"),g=b.ctrlKey||b.metaKey,b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(f,"stepBigMonths"):+a.datepicker._get(f,"stepMonths"),"M");break;case 40:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,7,"D"),g=b.ctrlKey||b.metaKey;break;default:g=!1}else 36===b.keyCode&&b.ctrlKey?a.datepicker._showDatepicker(this):g=!1;g&&(b.preventDefault(),b.stopPropagation())},_doKeyPress:function(b){var c,d,e=a.datepicker._getInst(b.target);return a.datepicker._get(e,"constrainInput")?(c=a.datepicker._possibleChars(a.datepicker._get(e,"dateFormat")),d=String.fromCharCode(null==b.charCode?b.keyCode:b.charCode),b.ctrlKey||b.metaKey||" ">d||!c||c.indexOf(d)>-1):void 0},_doKeyUp:function(b){var c,d=a.datepicker._getInst(b.target);if(d.input.val()!==d.lastVal)try{c=a.datepicker.parseDate(a.datepicker._get(d,"dateFormat"),d.input?d.input.val():null,a.datepicker._getFormatConfig(d)),c&&(a.datepicker._setDateFromField(d),a.datepicker._updateAlternate(d),a.datepicker._updateDatepicker(d))}catch(e){}return!0},_showDatepicker:function(b){if(b=b.target||b,"input"!==b.nodeName.toLowerCase()&&(b=a("input",b.parentNode)[0]),!a.datepicker._isDisabledDatepicker(b)&&a.datepicker._lastInput!==b){var c,e,f,g,i,j,k;c=a.datepicker._getInst(b),a.datepicker._curInst&&a.datepicker._curInst!==c&&(a.datepicker._curInst.dpDiv.stop(!0,!0),c&&a.datepicker._datepickerShowing&&a.datepicker._hideDatepicker(a.datepicker._curInst.input[0])),e=a.datepicker._get(c,"beforeShow"),f=e?e.apply(b,[b,c]):{},f!==!1&&(h(c.settings,f),c.lastVal=null,a.datepicker._lastInput=b,a.datepicker._setDateFromField(c),a.datepicker._inDialog&&(b.value=""),a.datepicker._pos||(a.datepicker._pos=a.datepicker._findPos(b),a.datepicker._pos[1]+=b.offsetHeight),g=!1,a(b).parents().each(function(){return g|="fixed"===a(this).css("position"),!g}),i={left:a.datepicker._pos[0],top:a.datepicker._pos[1]},a.datepicker._pos=null,c.dpDiv.empty(),c.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),a.datepicker._updateDatepicker(c),i=a.datepicker._checkOffset(c,i,g),c.dpDiv.css({position:a.datepicker._inDialog&&a.blockUI?"static":g?"fixed":"absolute",display:"none",left:i.left+"px",top:i.top+"px"}),c.inline||(j=a.datepicker._get(c,"showAnim"),k=a.datepicker._get(c,"duration"),c.dpDiv.css("z-index",d(a(b))+1),a.datepicker._datepickerShowing=!0,a.effects&&a.effects.effect[j]?c.dpDiv.show(j,a.datepicker._get(c,"showOptions"),k):c.dpDiv[j||"show"](j?k:null),a.datepicker._shouldFocusInput(c)&&c.input.focus(),a.datepicker._curInst=c))}},_updateDatepicker:function(b){this.maxRows=4,r=b,b.dpDiv.empty().append(this._generateHTML(b)),this._attachHandlers(b);var c,d=this._getNumberOfMonths(b),e=d[1],f=17,h=b.dpDiv.find("."+this._dayOverClass+" a");h.length>0&&g.apply(h.get(0)),b.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),e>1&&b.dpDiv.addClass("ui-datepicker-multi-"+e).css("width",f*e+"em"),b.dpDiv[(1!==d[0]||1!==d[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),b.dpDiv[(this._get(b,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),b===a.datepicker._curInst&&a.datepicker._datepickerShowing&&a.datepicker._shouldFocusInput(b)&&b.input.focus(),b.yearshtml&&(c=b.yearshtml,setTimeout(function(){c===b.yearshtml&&b.yearshtml&&b.dpDiv.find("select.ui-datepicker-year:first").replaceWith(b.yearshtml),c=b.yearshtml=null},0))},_shouldFocusInput:function(a){return a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&!a.input.is(":focus")},_checkOffset:function(b,c,d){var e=b.dpDiv.outerWidth(),f=b.dpDiv.outerHeight(),g=b.input?b.input.outerWidth():0,h=b.input?b.input.outerHeight():0,i=document.documentElement.clientWidth+(d?0:a(document).scrollLeft()),j=document.documentElement.clientHeight+(d?0:a(document).scrollTop());return c.left-=this._get(b,"isRTL")?e-g:0,c.left-=d&&c.left===b.input.offset().left?a(document).scrollLeft():0,c.top-=d&&c.top===b.input.offset().top+h?a(document).scrollTop():0,c.left-=Math.min(c.left,c.left+e>i&&i>e?Math.abs(c.left+e-i):0),c.top-=Math.min(c.top,c.top+f>j&&j>f?Math.abs(f+h):0),c},_findPos:function(b){for(var c,d=this._getInst(b),e=this._get(d,"isRTL");b&&("hidden"===b.type||1!==b.nodeType||a.expr.filters.hidden(b));)b=b[e?"previousSibling":"nextSibling"];return c=a(b).offset(),[c.left,c.top]},_hideDatepicker:function(b){var c,d,e,f,g=this._curInst;!g||b&&g!==a.data(b,"datepicker")||this._datepickerShowing&&(c=this._get(g,"showAnim"),d=this._get(g,"duration"),e=function(){a.datepicker._tidyDialog(g)},a.effects&&(a.effects.effect[c]||a.effects[c])?g.dpDiv.hide(c,a.datepicker._get(g,"showOptions"),d,e):g.dpDiv["slideDown"===c?"slideUp":"fadeIn"===c?"fadeOut":"hide"](c?d:null,e),c||e(),this._datepickerShowing=!1,f=this._get(g,"onClose"),f&&f.apply(g.input?g.input[0]:null,[g.input?g.input.val():"",g]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),a.blockUI&&(a.unblockUI(),a("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(b){if(a.datepicker._curInst){var c=a(b.target),d=a.datepicker._getInst(c[0]);(c[0].id===a.datepicker._mainDivId||0!==c.parents("#"+a.datepicker._mainDivId).length||c.hasClass(a.datepicker.markerClassName)||c.closest("."+a.datepicker._triggerClass).length||!a.datepicker._datepickerShowing||a.datepicker._inDialog&&a.blockUI)&&(!c.hasClass(a.datepicker.markerClassName)||a.datepicker._curInst===d)||a.datepicker._hideDatepicker()}},_adjustDate:function(b,c,d){var e=a(b),f=this._getInst(e[0]);this._isDisabledDatepicker(e[0])||(this._adjustInstDate(f,c+("M"===d?this._get(f,"showCurrentAtPos"):0),d),this._updateDatepicker(f))},_gotoToday:function(b){var c,d=a(b),e=this._getInst(d[0]);this._get(e,"gotoCurrent")&&e.currentDay?(e.selectedDay=e.currentDay,e.drawMonth=e.selectedMonth=e.currentMonth,e.drawYear=e.selectedYear=e.currentYear):(c=new Date,e.selectedDay=c.getDate(),e.drawMonth=e.selectedMonth=c.getMonth(),e.drawYear=e.selectedYear=c.getFullYear()),this._notifyChange(e),this._adjustDate(d)},_selectMonthYear:function(b,c,d){var e=a(b),f=this._getInst(e[0]);f["selected"+("M"===d?"Month":"Year")]=f["draw"+("M"===d?"Month":"Year")]=parseInt(c.options[c.selectedIndex].value,10),this._notifyChange(f),this._adjustDate(e)},_selectDay:function(b,c,d,e){var f,g=a(b);a(e).hasClass(this._unselectableClass)||this._isDisabledDatepicker(g[0])||(f=this._getInst(g[0]),f.selectedDay=f.currentDay=a("a",e).html(),f.selectedMonth=f.currentMonth=c,f.selectedYear=f.currentYear=d,this._selectDate(b,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear)))},_clearDate:function(b){var c=a(b);this._selectDate(c,"")},_selectDate:function(b,c){var d,e=a(b),f=this._getInst(e[0]);c=null!=c?c:this._formatDate(f),f.input&&f.input.val(c),this._updateAlternate(f),d=this._get(f,"onSelect"),d?d.apply(f.input?f.input[0]:null,[c,f]):f.input&&f.input.trigger("change"),f.inline?this._updateDatepicker(f):(this._hideDatepicker(),this._lastInput=f.input[0],"object"!=typeof f.input[0]&&f.input.focus(),this._lastInput=null)},_updateAlternate:function(b){var c,d,e,f=this._get(b,"altField");f&&(c=this._get(b,"altFormat")||this._get(b,"dateFormat"),d=this._getDate(b),e=this.formatDate(c,d,this._getFormatConfig(b)),a(f).each(function(){a(this).val(e)}))},noWeekends:function(a){var b=a.getDay();return[b>0&&6>b,""]},iso8601Week:function(a){var b,c=new Date(a.getTime());return c.setDate(c.getDate()+4-(c.getDay()||7)),b=c.getTime(),c.setMonth(0),c.setDate(1),Math.floor(Math.round((b-c)/864e5)/7)+1},parseDate:function(b,c,d){if(null==b||null==c)throw"Invalid arguments";if(c="object"==typeof c?c.toString():c+"",""===c)return null;var e,f,g,h,i=0,j=(d?d.shortYearCutoff:null)||this._defaults.shortYearCutoff,k="string"!=typeof j?j:(new Date).getFullYear()%100+parseInt(j,10),l=(d?d.dayNamesShort:null)||this._defaults.dayNamesShort,m=(d?d.dayNames:null)||this._defaults.dayNames,n=(d?d.monthNamesShort:null)||this._defaults.monthNamesShort,o=(d?d.monthNames:null)||this._defaults.monthNames,p=-1,q=-1,r=-1,s=-1,t=!1,u=function(a){var c=e+1<b.length&&b.charAt(e+1)===a;return c&&e++,c},v=function(a){var b=u(a),d="@"===a?14:"!"===a?20:"y"===a&&b?4:"o"===a?3:2,e="y"===a?d:1,f=new RegExp("^\\d{"+e+","+d+"}"),g=c.substring(i).match(f);if(!g)throw"Missing number at position "+i;return i+=g[0].length,parseInt(g[0],10)},w=function(b,d,e){var f=-1,g=a.map(u(b)?e:d,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)});if(a.each(g,function(a,b){var d=b[1];return c.substr(i,d.length).toLowerCase()===d.toLowerCase()?(f=b[0],i+=d.length,!1):void 0}),-1!==f)return f+1;throw"Unknown name at position "+i},x=function(){if(c.charAt(i)!==b.charAt(e))throw"Unexpected literal at position "+i;i++};for(e=0;e<b.length;e++)if(t)"'"!==b.charAt(e)||u("'")?x():t=!1;else switch(b.charAt(e)){case"d":r=v("d");break;case"D":w("D",l,m);break;case"o":s=v("o");break;case"m":q=v("m");break;case"M":q=w("M",n,o);break;case"y":p=v("y");break;case"@":h=new Date(v("@")),p=h.getFullYear(),q=h.getMonth()+1,r=h.getDate();break;case"!":h=new Date((v("!")-this._ticksTo1970)/1e4),p=h.getFullYear(),q=h.getMonth()+1,r=h.getDate();break;case"'":u("'")?x():t=!0;break;default:x()}if(i<c.length&&(g=c.substr(i),!/^\s+/.test(g)))throw"Extra/unparsed characters found in date: "+g;if(-1===p?p=(new Date).getFullYear():100>p&&(p+=(new Date).getFullYear()-(new Date).getFullYear()%100+(k>=p?0:-100)),s>-1)for(q=1,r=s;;){if(f=this._getDaysInMonth(p,q-1),f>=r)break;q++,r-=f}
if(h=this._daylightSavingAdjust(new Date(p,q-1,r)),h.getFullYear()!==p||h.getMonth()+1!==q||h.getDate()!==r)throw"Invalid date";return h},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(a,b,c){if(!b)return"";var d,e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,g=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,h=(c?c.monthNames:null)||this._defaults.monthNames,i=function(b){var c=d+1<a.length&&a.charAt(d+1)===b;return c&&d++,c},j=function(a,b,c){var d=""+b;if(i(a))for(;d.length<c;)d="0"+d;return d},k=function(a,b,c,d){return i(a)?d[b]:c[b]},l="",m=!1;if(b)for(d=0;d<a.length;d++)if(m)"'"!==a.charAt(d)||i("'")?l+=a.charAt(d):m=!1;else switch(a.charAt(d)){case"d":l+=j("d",b.getDate(),2);break;case"D":l+=k("D",b.getDay(),e,f);break;case"o":l+=j("o",Math.round((new Date(b.getFullYear(),b.getMonth(),b.getDate()).getTime()-new Date(b.getFullYear(),0,0).getTime())/864e5),3);break;case"m":l+=j("m",b.getMonth()+1,2);break;case"M":l+=k("M",b.getMonth(),g,h);break;case"y":l+=i("y")?b.getFullYear():(b.getYear()%100<10?"0":"")+b.getYear()%100;break;case"@":l+=b.getTime();break;case"!":l+=1e4*b.getTime()+this._ticksTo1970;break;case"'":i("'")?l+="'":m=!0;break;default:l+=a.charAt(d)}return l},_possibleChars:function(a){var b,c="",d=!1,e=function(c){var d=b+1<a.length&&a.charAt(b+1)===c;return d&&b++,d};for(b=0;b<a.length;b++)if(d)"'"!==a.charAt(b)||e("'")?c+=a.charAt(b):d=!1;else switch(a.charAt(b)){case"d":case"m":case"y":case"@":c+="0123456789";break;case"D":case"M":return null;case"'":e("'")?c+="'":d=!0;break;default:c+=a.charAt(b)}return c},_get:function(a,b){return void 0!==a.settings[b]?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()!==a.lastVal){var c=this._get(a,"dateFormat"),d=a.lastVal=a.input?a.input.val():null,e=this._getDefaultDate(a),f=e,g=this._getFormatConfig(a);try{f=this.parseDate(c,d,g)||e}catch(h){d=b?"":d}a.selectedDay=f.getDate(),a.drawMonth=a.selectedMonth=f.getMonth(),a.drawYear=a.selectedYear=f.getFullYear(),a.currentDay=d?f.getDate():0,a.currentMonth=d?f.getMonth():0,a.currentYear=d?f.getFullYear():0,this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(b,c,d){var e=function(a){var b=new Date;return b.setDate(b.getDate()+a),b},f=function(c){try{return a.datepicker.parseDate(a.datepicker._get(b,"dateFormat"),c,a.datepicker._getFormatConfig(b))}catch(d){}for(var e=(c.toLowerCase().match(/^c/)?a.datepicker._getDate(b):null)||new Date,f=e.getFullYear(),g=e.getMonth(),h=e.getDate(),i=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,j=i.exec(c);j;){switch(j[2]||"d"){case"d":case"D":h+=parseInt(j[1],10);break;case"w":case"W":h+=7*parseInt(j[1],10);break;case"m":case"M":g+=parseInt(j[1],10),h=Math.min(h,a.datepicker._getDaysInMonth(f,g));break;case"y":case"Y":f+=parseInt(j[1],10),h=Math.min(h,a.datepicker._getDaysInMonth(f,g))}j=i.exec(c)}return new Date(f,g,h)},g=null==c||""===c?d:"string"==typeof c?f(c):"number"==typeof c?isNaN(c)?d:e(c):new Date(c.getTime());return g=g&&"Invalid Date"===g.toString()?d:g,g&&(g.setHours(0),g.setMinutes(0),g.setSeconds(0),g.setMilliseconds(0)),this._daylightSavingAdjust(g)},_daylightSavingAdjust:function(a){return a?(a.setHours(a.getHours()>12?a.getHours()+2:0),a):null},_setDate:function(a,b,c){var d=!b,e=a.selectedMonth,f=a.selectedYear,g=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=g.getDate(),a.drawMonth=a.selectedMonth=a.currentMonth=g.getMonth(),a.drawYear=a.selectedYear=a.currentYear=g.getFullYear(),e===a.selectedMonth&&f===a.selectedYear||c||this._notifyChange(a),this._adjustInstDate(a),a.input&&a.input.val(d?"":this._formatDate(a))},_getDate:function(a){var b=!a.currentYear||a.input&&""===a.input.val()?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return b},_attachHandlers:function(b){var c=this._get(b,"stepMonths"),d="#"+b.id.replace(/\\\\/g,"\\");b.dpDiv.find("[data-handler]").map(function(){var b={prev:function(){a.datepicker._adjustDate(d,-c,"M")},next:function(){a.datepicker._adjustDate(d,+c,"M")},hide:function(){a.datepicker._hideDatepicker()},today:function(){a.datepicker._gotoToday(d)},selectDay:function(){return a.datepicker._selectDay(d,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return a.datepicker._selectMonthYear(d,this,"M"),!1},selectYear:function(){return a.datepicker._selectMonthYear(d,this,"Y"),!1}};a(this).bind(this.getAttribute("data-event"),b[this.getAttribute("data-handler")])})},_generateHTML:function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O=new Date,P=this._daylightSavingAdjust(new Date(O.getFullYear(),O.getMonth(),O.getDate())),Q=this._get(a,"isRTL"),R=this._get(a,"showButtonPanel"),S=this._get(a,"hideIfNoPrevNext"),T=this._get(a,"navigationAsDateFormat"),U=this._getNumberOfMonths(a),V=this._get(a,"showCurrentAtPos"),W=this._get(a,"stepMonths"),X=1!==U[0]||1!==U[1],Y=this._daylightSavingAdjust(a.currentDay?new Date(a.currentYear,a.currentMonth,a.currentDay):new Date(9999,9,9)),Z=this._getMinMaxDate(a,"min"),$=this._getMinMaxDate(a,"max"),_=a.drawMonth-V,aa=a.drawYear;if(0>_&&(_+=12,aa--),$)for(b=this._daylightSavingAdjust(new Date($.getFullYear(),$.getMonth()-U[0]*U[1]+1,$.getDate())),b=Z&&Z>b?Z:b;this._daylightSavingAdjust(new Date(aa,_,1))>b;)_--,0>_&&(_=11,aa--);for(a.drawMonth=_,a.drawYear=aa,c=this._get(a,"prevText"),c=T?this.formatDate(c,this._daylightSavingAdjust(new Date(aa,_-W,1)),this._getFormatConfig(a)):c,d=this._canAdjustMonth(a,-1,aa,_)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+c+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"e":"w")+"'>"+c+"</span></a>":S?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+c+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"e":"w")+"'>"+c+"</span></a>",e=this._get(a,"nextText"),e=T?this.formatDate(e,this._daylightSavingAdjust(new Date(aa,_+W,1)),this._getFormatConfig(a)):e,f=this._canAdjustMonth(a,1,aa,_)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+e+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"w":"e")+"'>"+e+"</span></a>":S?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+e+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"w":"e")+"'>"+e+"</span></a>",g=this._get(a,"currentText"),h=this._get(a,"gotoCurrent")&&a.currentDay?Y:P,g=T?this.formatDate(g,h,this._getFormatConfig(a)):g,i=a.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(a,"closeText")+"</button>",j=R?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(Q?i:"")+(this._isInRange(a,h)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+g+"</button>":"")+(Q?"":i)+"</div>":"",k=parseInt(this._get(a,"firstDay"),10),k=isNaN(k)?0:k,l=this._get(a,"showWeek"),m=this._get(a,"dayNames"),n=this._get(a,"dayNamesMin"),o=this._get(a,"monthNames"),p=this._get(a,"monthNamesShort"),q=this._get(a,"beforeShowDay"),r=this._get(a,"showOtherMonths"),s=this._get(a,"selectOtherMonths"),t=this._getDefaultDate(a),u="",w=0;w<U[0];w++){for(x="",this.maxRows=4,y=0;y<U[1];y++){if(z=this._daylightSavingAdjust(new Date(aa,_,a.selectedDay)),A=" ui-corner-all",B="",X){if(B+="<div class='ui-datepicker-group",U[1]>1)switch(y){case 0:B+=" ui-datepicker-group-first",A=" ui-corner-"+(Q?"right":"left");break;case U[1]-1:B+=" ui-datepicker-group-last",A=" ui-corner-"+(Q?"left":"right");break;default:B+=" ui-datepicker-group-middle",A=""}B+="'>"}for(B+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+A+"'>"+(/all|left/.test(A)&&0===w?Q?f:d:"")+(/all|right/.test(A)&&0===w?Q?d:f:"")+this._generateMonthYearHeader(a,_,aa,Z,$,w>0||y>0,o,p)+"</div><table class='ui-datepicker-calendar'><thead><tr>",C=l?"<th class='ui-datepicker-week-col'>"+this._get(a,"weekHeader")+"</th>":"",v=0;7>v;v++)D=(v+k)%7,C+="<th scope='col'"+((v+k+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+m[D]+"'>"+n[D]+"</span></th>";for(B+=C+"</tr></thead><tbody>",E=this._getDaysInMonth(aa,_),aa===a.selectedYear&&_===a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,E)),F=(this._getFirstDayOfMonth(aa,_)-k+7)%7,G=Math.ceil((F+E)/7),H=X&&this.maxRows>G?this.maxRows:G,this.maxRows=H,I=this._daylightSavingAdjust(new Date(aa,_,1-F)),J=0;H>J;J++){for(B+="<tr>",K=l?"<td class='ui-datepicker-week-col'>"+this._get(a,"calculateWeek")(I)+"</td>":"",v=0;7>v;v++)L=q?q.apply(a.input?a.input[0]:null,[I]):[!0,""],M=I.getMonth()!==_,N=M&&!s||!L[0]||Z&&Z>I||$&&I>$,K+="<td class='"+((v+k+6)%7>=5?" ui-datepicker-week-end":"")+(M?" ui-datepicker-other-month":"")+(I.getTime()===z.getTime()&&_===a.selectedMonth&&a._keyEvent||t.getTime()===I.getTime()&&t.getTime()===z.getTime()?" "+this._dayOverClass:"")+(N?" "+this._unselectableClass+" ui-state-disabled":"")+(M&&!r?"":" "+L[1]+(I.getTime()===Y.getTime()?" "+this._currentClass:"")+(I.getTime()===P.getTime()?" ui-datepicker-today":""))+"'"+(M&&!r||!L[2]?"":" title='"+L[2].replace(/'/g,"&#39;")+"'")+(N?"":" data-handler='selectDay' data-event='click' data-month='"+I.getMonth()+"' data-year='"+I.getFullYear()+"'")+">"+(M&&!r?"&#xa0;":N?"<span class='ui-state-default'>"+I.getDate()+"</span>":"<a class='ui-state-default"+(I.getTime()===P.getTime()?" ui-state-highlight":"")+(I.getTime()===Y.getTime()?" ui-state-active":"")+(M?" ui-priority-secondary":"")+"' href='#'>"+I.getDate()+"</a>")+"</td>",I.setDate(I.getDate()+1),I=this._daylightSavingAdjust(I);B+=K+"</tr>"}_++,_>11&&(_=0,aa++),B+="</tbody></table>"+(X?"</div>"+(U[0]>0&&y===U[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),x+=B}u+=x}return u+=j,a._keyEvent=!1,u},_generateMonthYearHeader:function(a,b,c,d,e,f,g,h){var i,j,k,l,m,n,o,p,q=this._get(a,"changeMonth"),r=this._get(a,"changeYear"),s=this._get(a,"showMonthAfterYear"),t="<div class='ui-datepicker-title'>",u="";if(f||!q)u+="<span class='ui-datepicker-month'>"+g[b]+"</span>";else{for(i=d&&d.getFullYear()===c,j=e&&e.getFullYear()===c,u+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",k=0;12>k;k++)(!i||k>=d.getMonth())&&(!j||k<=e.getMonth())&&(u+="<option value='"+k+"'"+(k===b?" selected='selected'":"")+">"+h[k]+"</option>");u+="</select>"}if(s||(t+=u+(!f&&q&&r?"":"&#xa0;")),!a.yearshtml)if(a.yearshtml="",f||!r)t+="<span class='ui-datepicker-year'>"+c+"</span>";else{for(l=this._get(a,"yearRange").split(":"),m=(new Date).getFullYear(),n=function(a){var b=a.match(/c[+\-].*/)?c+parseInt(a.substring(1),10):a.match(/[+\-].*/)?m+parseInt(a,10):parseInt(a,10);return isNaN(b)?m:b},o=n(l[0]),p=Math.max(o,n(l[1]||"")),o=d?Math.max(o,d.getFullYear()):o,p=e?Math.min(p,e.getFullYear()):p,a.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";p>=o;o++)a.yearshtml+="<option value='"+o+"'"+(o===c?" selected='selected'":"")+">"+o+"</option>";a.yearshtml+="</select>",t+=a.yearshtml,a.yearshtml=null}return t+=this._get(a,"yearSuffix"),s&&(t+=(!f&&q&&r?"":"&#xa0;")+u),t+="</div>"},_adjustInstDate:function(a,b,c){var d=a.drawYear+("Y"===c?b:0),e=a.drawMonth+("M"===c?b:0),f=Math.min(a.selectedDay,this._getDaysInMonth(d,e))+("D"===c?b:0),g=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(d,e,f)));a.selectedDay=g.getDate(),a.drawMonth=a.selectedMonth=g.getMonth(),a.drawYear=a.selectedYear=g.getFullYear(),"M"!==c&&"Y"!==c||this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max"),e=c&&c>b?c:b;return d&&e>d?d:e},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){var b=this._get(a,"numberOfMonths");return null==b?[1,1]:"number"==typeof b?[1,b]:b},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return new Date(a,b,1).getDay()},_canAdjustMonth:function(a,b,c,d){var e=this._getNumberOfMonths(a),f=this._daylightSavingAdjust(new Date(c,d+(0>b?b:e[0]*e[1]),1));return 0>b&&f.setDate(this._getDaysInMonth(f.getFullYear(),f.getMonth())),this._isInRange(a,f)},_isInRange:function(a,b){var c,d,e=this._getMinMaxDate(a,"min"),f=this._getMinMaxDate(a,"max"),g=null,h=null,i=this._get(a,"yearRange");return i&&(c=i.split(":"),d=(new Date).getFullYear(),g=parseInt(c[0],10),h=parseInt(c[1],10),c[0].match(/[+\-].*/)&&(g+=d),c[1].match(/[+\-].*/)&&(h+=d)),(!e||b.getTime()>=e.getTime())&&(!f||b.getTime()<=f.getTime())&&(!g||b.getFullYear()>=g)&&(!h||b.getFullYear()<=h)},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");return b="string"!=typeof b?b:(new Date).getFullYear()%100+parseInt(b,10),{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,d){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);var e=b?"object"==typeof b?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),e,this._getFormatConfig(a))}}),a.fn.datepicker=function(b){if(!this.length)return this;a.datepicker.initialized||(a(document).mousedown(a.datepicker._checkExternalClick),a.datepicker.initialized=!0),0===a("#"+a.datepicker._mainDivId).length&&a("body").append(a.datepicker.dpDiv);var c=Array.prototype.slice.call(arguments,1);return"string"!=typeof b||"isDisabled"!==b&&"getDate"!==b&&"widget"!==b?"option"===b&&2===arguments.length&&"string"==typeof arguments[1]?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c)):this.each(function(){"string"==typeof b?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this].concat(c)):a.datepicker._attachDatepicker(this,b)}):a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c))},a.datepicker=new e,a.datepicker.initialized=!1,a.datepicker.uuid=(new Date).getTime(),a.datepicker.version="1.11.4";a.datepicker;a.widget("ui.draggable",a.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(a,b){this._super(a,b),"handle"===a&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(b){var c=this.options;return this._blurActiveElement(b),this.helper||c.disabled||a(b.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(b),this.handle?(this._blockFrames(c.iframeFix===!0?"iframe":c.iframeFix),!0):!1)},_blockFrames:function(b){this.iframeBlocks=this.document.find(b).map(function(){var b=a(this);return a("<div>").css("position","absolute").appendTo(b.parent()).outerWidth(b.outerWidth()).outerHeight(b.outerHeight()).offset(b.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(b){var c=this.document[0];if(this.handleElement.is(b.target))try{c.activeElement&&"body"!==c.activeElement.nodeName.toLowerCase()&&a(c.activeElement).blur()}catch(d){}},_mouseStart:function(b){var c=this.options;return this.helper=this._createHelper(b),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===a(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(b),this.originalPosition=this.position=this._generatePosition(b,!1),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),this._setContainment(),this._trigger("start",b)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this._normalizeRightBottom(),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b),!0)},_refreshOffsets:function(a){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:a.pageX-this.offset.left,top:a.pageY-this.offset.top}},_mouseDrag:function(b,c){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(b,!0),this.positionAbs=this._convertPositionTo("absolute"),!c){var d=this._uiHash();if(this._trigger("drag",b,d)===!1)return this._mouseUp({}),!1;this.position=d.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var c=this,d=!1;return a.ui.ddmanager&&!this.options.dropBehaviour&&(d=a.ui.ddmanager.drop(this,b)),this.dropped&&(d=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!d||"valid"===this.options.revert&&d||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,d)?a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){c._trigger("stop",b)!==!1&&c._clear()}):this._trigger("stop",b)!==!1&&this._clear(),!1},_mouseUp:function(b){return this._unblockFrames(),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),this.handleElement.is(b.target)&&this.element.focus(),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){return this.options.handle?!!a(b.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper),e=d?a(c.helper.apply(this.element[0],[b])):"clone"===c.helper?this.element.clone().removeAttr("id"):this.element;return e.parents("body").length||e.appendTo("parent"===c.appendTo?this.element[0].parentNode:c.appendTo),d&&e[0]===this.element[0]&&this._setPositionRelative(),e[0]===this.element[0]||/(fixed|absolute)/.test(e.css("position"))||e.css("position","absolute"),e},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_isRootNode:function(a){return/(html|body)/i.test(a.tagName)||a===this.document[0]},_getParentOffset:function(){var b=this.offsetParent.offset(),c=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==c&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var a=this.element.position(),b=this._isRootNode(this.scrollParent[0]);return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+(b?0:this.scrollParent.scrollTop()),left:a.left-(parseInt(this.helper.css("left"),10)||0)+(b?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options,f=this.document[0];return this.relativeContainer=null,e.containment?"window"===e.containment?void(this.containment=[a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,a(window).scrollLeft()+a(window).width()-this.helperProportions.width-this.margins.left,a(window).scrollTop()+(a(window).height()||f.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===e.containment?void(this.containment=[0,0,a(f).width()-this.helperProportions.width-this.margins.left,(a(f).height()||f.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):e.containment.constructor===Array?void(this.containment=e.containment):("parent"===e.containment&&(e.containment=this.helper[0].parentNode),c=a(e.containment),d=c[0],void(d&&(b=/(scroll|auto)/.test(c.css("overflow")),this.containment=[(parseInt(c.css("borderLeftWidth"),10)||0)+(parseInt(c.css("paddingLeft"),10)||0),(parseInt(c.css("borderTopWidth"),10)||0)+(parseInt(c.css("paddingTop"),10)||0),(b?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(c.css("borderRightWidth"),10)||0)-(parseInt(c.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(b?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(c.css("borderBottomWidth"),10)||0)-(parseInt(c.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=c))):void(this.containment=null)},_convertPositionTo:function(a,b){b||(b=this.position);var c="absolute"===a?1:-1,d=this._isRootNode(this.scrollParent[0]);return{top:b.top+this.offset.relative.top*c+this.offset.parent.top*c-("fixed"===this.cssPosition?-this.offset.scroll.top:d?0:this.offset.scroll.top)*c,left:b.left+this.offset.relative.left*c+this.offset.parent.left*c-("fixed"===this.cssPosition?-this.offset.scroll.left:d?0:this.offset.scroll.left)*c}},_generatePosition:function(a,b){var c,d,e,f,g=this.options,h=this._isRootNode(this.scrollParent[0]),i=a.pageX,j=a.pageY;return h&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),b&&(this.containment&&(this.relativeContainer?(d=this.relativeContainer.offset(),c=[this.containment[0]+d.left,this.containment[1]+d.top,this.containment[2]+d.left,this.containment[3]+d.top]):c=this.containment,a.pageX-this.offset.click.left<c[0]&&(i=c[0]+this.offset.click.left),a.pageY-this.offset.click.top<c[1]&&(j=c[1]+this.offset.click.top),a.pageX-this.offset.click.left>c[2]&&(i=c[2]+this.offset.click.left),a.pageY-this.offset.click.top>c[3]&&(j=c[3]+this.offset.click.top)),g.grid&&(e=g.grid[1]?this.originalPageY+Math.round((j-this.originalPageY)/g.grid[1])*g.grid[1]:this.originalPageY,j=c?e-this.offset.click.top>=c[1]||e-this.offset.click.top>c[3]?e:e-this.offset.click.top>=c[1]?e-g.grid[1]:e+g.grid[1]:e,f=g.grid[0]?this.originalPageX+Math.round((i-this.originalPageX)/g.grid[0])*g.grid[0]:this.originalPageX,i=c?f-this.offset.click.left>=c[0]||f-this.offset.click.left>c[2]?f:f-this.offset.click.left>=c[0]?f-g.grid[0]:f+g.grid[0]:f),"y"===g.axis&&(i=this.originalPageX),"x"===g.axis&&(j=this.originalPageY)),{top:j-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:h?0:this.offset.scroll.top),left:i-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:h?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(b,c,d){return d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d,this],!0),/^(drag|start|stop)/.test(b)&&(this.positionAbs=this._convertPositionTo("absolute"),d.offset=this.positionAbs),a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c,d){var e=a.extend({},c,{item:d.element});d.sortables=[],a(d.options.connectToSortable).each(function(){var c=a(this).sortable("instance");c&&!c.options.disabled&&(d.sortables.push(c),c.refreshPositions(),c._trigger("activate",b,e))})},stop:function(b,c,d){var e=a.extend({},c,{item:d.element});d.cancelHelperRemoval=!1,a.each(d.sortables,function(){var a=this;a.isOver?(a.isOver=0,d.cancelHelperRemoval=!0,a.cancelHelperRemoval=!1,a._storedCSS={position:a.placeholder.css("position"),top:a.placeholder.css("top"),left:a.placeholder.css("left")},a._mouseStop(b),a.options.helper=a.options._helper):(a.cancelHelperRemoval=!0,a._trigger("deactivate",b,e))})},drag:function(b,c,d){a.each(d.sortables,function(){var e=!1,f=this;f.positionAbs=d.positionAbs,f.helperProportions=d.helperProportions,f.offset.click=d.offset.click,f._intersectsWith(f.containerCache)&&(e=!0,a.each(d.sortables,function(){return this.positionAbs=d.positionAbs,this.helperProportions=d.helperProportions,this.offset.click=d.offset.click,this!==f&&this._intersectsWith(this.containerCache)&&a.contains(f.element[0],this.element[0])&&(e=!1),e})),e?(f.isOver||(f.isOver=1,d._parent=c.helper.parent(),f.currentItem=c.helper.appendTo(f.element).data("ui-sortable-item",!0),f.options._helper=f.options.helper,f.options.helper=function(){return c.helper[0]},b.target=f.currentItem[0],f._mouseCapture(b,!0),f._mouseStart(b,!0,!0),f.offset.click.top=d.offset.click.top,f.offset.click.left=d.offset.click.left,f.offset.parent.left-=d.offset.parent.left-f.offset.parent.left,f.offset.parent.top-=d.offset.parent.top-f.offset.parent.top,d._trigger("toSortable",b),d.dropped=f.element,a.each(d.sortables,function(){this.refreshPositions()}),d.currentItem=d.element,f.fromOutside=d),f.currentItem&&(f._mouseDrag(b),c.position=f.position)):f.isOver&&(f.isOver=0,f.cancelHelperRemoval=!0,f.options._revert=f.options.revert,f.options.revert=!1,f._trigger("out",b,f._uiHash(f)),f._mouseStop(b,!0),f.options.revert=f.options._revert,f.options.helper=f.options._helper,f.placeholder&&f.placeholder.remove(),c.helper.appendTo(d._parent),d._refreshOffsets(b),c.position=d._generatePosition(b,!0),d._trigger("fromSortable",b),d.dropped=!1,a.each(d.sortables,function(){this.refreshPositions()}))})}}),a.ui.plugin.add("draggable","cursor",{start:function(b,c,d){var e=a("body"),f=d.options;e.css("cursor")&&(f._cursor=e.css("cursor")),e.css("cursor",f.cursor)},stop:function(b,c,d){var e=d.options;e._cursor&&a("body").css("cursor",e._cursor)}}),a.ui.plugin.add("draggable","opacity",{start:function(b,c,d){var e=a(c.helper),f=d.options;e.css("opacity")&&(f._opacity=e.css("opacity")),e.css("opacity",f.opacity)},stop:function(b,c,d){var e=d.options;e._opacity&&a(c.helper).css("opacity",e._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(a,b,c){c.scrollParentNotHidden||(c.scrollParentNotHidden=c.helper.scrollParent(!1)),c.scrollParentNotHidden[0]!==c.document[0]&&"HTML"!==c.scrollParentNotHidden[0].tagName&&(c.overflowOffset=c.scrollParentNotHidden.offset())},drag:function(b,c,d){var e=d.options,f=!1,g=d.scrollParentNotHidden[0],h=d.document[0];g!==h&&"HTML"!==g.tagName?(e.axis&&"x"===e.axis||(d.overflowOffset.top+g.offsetHeight-b.pageY<e.scrollSensitivity?g.scrollTop=f=g.scrollTop+e.scrollSpeed:b.pageY-d.overflowOffset.top<e.scrollSensitivity&&(g.scrollTop=f=g.scrollTop-e.scrollSpeed)),e.axis&&"y"===e.axis||(d.overflowOffset.left+g.offsetWidth-b.pageX<e.scrollSensitivity?g.scrollLeft=f=g.scrollLeft+e.scrollSpeed:b.pageX-d.overflowOffset.left<e.scrollSensitivity&&(g.scrollLeft=f=g.scrollLeft-e.scrollSpeed))):(e.axis&&"x"===e.axis||(b.pageY-a(h).scrollTop()<e.scrollSensitivity?f=a(h).scrollTop(a(h).scrollTop()-e.scrollSpeed):a(window).height()-(b.pageY-a(h).scrollTop())<e.scrollSensitivity&&(f=a(h).scrollTop(a(h).scrollTop()+e.scrollSpeed))),e.axis&&"y"===e.axis||(b.pageX-a(h).scrollLeft()<e.scrollSensitivity?f=a(h).scrollLeft(a(h).scrollLeft()-e.scrollSpeed):a(window).width()-(b.pageX-a(h).scrollLeft())<e.scrollSensitivity&&(f=a(h).scrollLeft(a(h).scrollLeft()+e.scrollSpeed)))),f!==!1&&a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(d,b)}}),a.ui.plugin.add("draggable","snap",{start:function(b,c,d){var e=d.options;d.snapElements=[],a(e.snap.constructor!==String?e.snap.items||":data(ui-draggable)":e.snap).each(function(){var b=a(this),c=b.offset();this!==d.element[0]&&d.snapElements.push({item:this,width:b.outerWidth(),height:b.outerHeight(),top:c.top,left:c.left})})},drag:function(b,c,d){var e,f,g,h,i,j,k,l,m,n,o=d.options,p=o.snapTolerance,q=c.offset.left,r=q+d.helperProportions.width,s=c.offset.top,t=s+d.helperProportions.height;for(m=d.snapElements.length-1;m>=0;m--)i=d.snapElements[m].left-d.margins.left,j=i+d.snapElements[m].width,k=d.snapElements[m].top-d.margins.top,l=k+d.snapElements[m].height,i-p>r||q>j+p||k-p>t||s>l+p||!a.contains(d.snapElements[m].item.ownerDocument,d.snapElements[m].item)?(d.snapElements[m].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[m].item})),d.snapElements[m].snapping=!1):("inner"!==o.snapMode&&(e=Math.abs(k-t)<=p,f=Math.abs(l-s)<=p,g=Math.abs(i-r)<=p,h=Math.abs(j-q)<=p,e&&(c.position.top=d._convertPositionTo("relative",{top:k-d.helperProportions.height,left:0}).top),f&&(c.position.top=d._convertPositionTo("relative",{top:l,left:0}).top),g&&(c.position.left=d._convertPositionTo("relative",{
top:0,left:i-d.helperProportions.width}).left),h&&(c.position.left=d._convertPositionTo("relative",{top:0,left:j}).left)),n=e||f||g||h,"outer"!==o.snapMode&&(e=Math.abs(k-s)<=p,f=Math.abs(l-t)<=p,g=Math.abs(i-q)<=p,h=Math.abs(j-r)<=p,e&&(c.position.top=d._convertPositionTo("relative",{top:k,left:0}).top),f&&(c.position.top=d._convertPositionTo("relative",{top:l-d.helperProportions.height,left:0}).top),g&&(c.position.left=d._convertPositionTo("relative",{top:0,left:i}).left),h&&(c.position.left=d._convertPositionTo("relative",{top:0,left:j-d.helperProportions.width}).left)),!d.snapElements[m].snapping&&(e||f||g||h||n)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[m].item})),d.snapElements[m].snapping=e||f||g||h||n)}}),a.ui.plugin.add("draggable","stack",{start:function(b,c,d){var e,f=d.options,g=a.makeArray(a(f.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});g.length&&(e=parseInt(a(g[0]).css("zIndex"),10)||0,a(g).each(function(b){a(this).css("zIndex",e+b)}),this.css("zIndex",e+g.length))}}),a.ui.plugin.add("draggable","zIndex",{start:function(b,c,d){var e=a(c.helper),f=d.options;e.css("zIndex")&&(f._zIndex=e.css("zIndex")),e.css("zIndex",f.zIndex)},stop:function(b,c,d){var e=d.options;e._zIndex&&a(c.helper).css("zIndex",e._zIndex)}});a.ui.draggable;a.widget("ui.resizable",a.ui.mouse,{version:"1.11.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(a){return parseInt(a,10)||0},_isNumber:function(a){return!isNaN(parseInt(a,10))},_hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)},_create:function(){var b,c,d,e,f,g=this,h=this.options;if(this.element.addClass("ui-resizable"),a.extend(this,{_aspectRatio:!!h.aspectRatio,aspectRatio:h.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:h.helper||h.ghost||h.animate?h.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(a("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=h.handles||(a(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=a(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),b=this.handles.split(","),this.handles={},c=0;c<b.length;c++)d=a.trim(b[c]),f="ui-resizable-"+d,e=a("<div class='ui-resizable-handle "+f+"'></div>"),e.css({zIndex:h.zIndex}),"se"===d&&e.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[d]=".ui-resizable-"+d,this.element.append(e);this._renderAxis=function(b){var c,d,e,f;b=b||this.element;for(c in this.handles)this.handles[c].constructor===String?this.handles[c]=this.element.children(this.handles[c]).first().show():(this.handles[c].jquery||this.handles[c].nodeType)&&(this.handles[c]=a(this.handles[c]),this._on(this.handles[c],{mousedown:g._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(d=a(this.handles[c],this.element),f=/sw|ne|nw|se|n|s/.test(c)?d.outerHeight():d.outerWidth(),e=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join(""),b.css(e,f),this._proportionallyResize()),this._handles=this._handles.add(this.handles[c])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.mouseover(function(){g.resizing||(this.className&&(e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),g.axis=e&&e[1]?e[1]:"se")}),h.autoHide&&(this._handles.hide(),a(this.element).addClass("ui-resizable-autohide").mouseenter(function(){h.disabled||(a(this).removeClass("ui-resizable-autohide"),g._handles.show())}).mouseleave(function(){h.disabled||g.resizing||(a(this).addClass("ui-resizable-autohide"),g._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var b,c=function(b){a(b).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(c(this.element),b=this.element,this.originalElement.css({position:b.css("position"),width:b.outerWidth(),height:b.outerHeight(),top:b.css("top"),left:b.css("left")}).insertAfter(b),b.remove()),this.originalElement.css("resize",this.originalResizeStyle),c(this.originalElement),this},_mouseCapture:function(b){var c,d,e=!1;for(c in this.handles)d=a(this.handles[c])[0],(d===b.target||a.contains(d,b.target))&&(e=!0);return!this.options.disabled&&e},_mouseStart:function(b){var c,d,e,f=this.options,g=this.element;return this.resizing=!0,this._renderProxy(),c=this._num(this.helper.css("left")),d=this._num(this.helper.css("top")),f.containment&&(c+=a(f.containment).scrollLeft()||0,d+=a(f.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:c,top:d},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:g.width(),height:g.height()},this.originalSize=this._helper?{width:g.outerWidth(),height:g.outerHeight()}:{width:g.width(),height:g.height()},this.sizeDiff={width:g.outerWidth()-g.width(),height:g.outerHeight()-g.height()},this.originalPosition={left:c,top:d},this.originalMousePosition={left:b.pageX,top:b.pageY},this.aspectRatio="number"==typeof f.aspectRatio?f.aspectRatio:this.originalSize.width/this.originalSize.height||1,e=a(".ui-resizable-"+this.axis).css("cursor"),a("body").css("cursor","auto"===e?this.axis+"-resize":e),g.addClass("ui-resizable-resizing"),this._propagate("start",b),!0},_mouseDrag:function(b){var c,d,e=this.originalMousePosition,f=this.axis,g=b.pageX-e.left||0,h=b.pageY-e.top||0,i=this._change[f];return this._updatePrevProperties(),i?(c=i.apply(this,[b,g,h]),this._updateVirtualBoundaries(b.shiftKey),(this._aspectRatio||b.shiftKey)&&(c=this._updateRatio(c,b)),c=this._respectSize(c,b),this._updateCache(c),this._propagate("resize",b),d=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),a.isEmptyObject(d)||(this._updatePrevProperties(),this._trigger("resize",b,this.ui()),this._applyChanges()),!1):!1},_mouseStop:function(b){this.resizing=!1;var c,d,e,f,g,h,i,j=this.options,k=this;return this._helper&&(c=this._proportionallyResizeElements,d=c.length&&/textarea/i.test(c[0].nodeName),e=d&&this._hasScroll(c[0],"left")?0:k.sizeDiff.height,f=d?0:k.sizeDiff.width,g={width:k.helper.width()-f,height:k.helper.height()-e},h=parseInt(k.element.css("left"),10)+(k.position.left-k.originalPosition.left)||null,i=parseInt(k.element.css("top"),10)+(k.position.top-k.originalPosition.top)||null,j.animate||this.element.css(a.extend(g,{top:i,left:h})),k.helper.height(k.size.height),k.helper.width(k.size.width),this._helper&&!j.animate&&this._proportionallyResize()),a("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",b),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var a={};return this.position.top!==this.prevPosition.top&&(a.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(a.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(a.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(a.height=this.size.height+"px"),this.helper.css(a),a},_updateVirtualBoundaries:function(a){var b,c,d,e,f,g=this.options;f={minWidth:this._isNumber(g.minWidth)?g.minWidth:0,maxWidth:this._isNumber(g.maxWidth)?g.maxWidth:1/0,minHeight:this._isNumber(g.minHeight)?g.minHeight:0,maxHeight:this._isNumber(g.maxHeight)?g.maxHeight:1/0},(this._aspectRatio||a)&&(b=f.minHeight*this.aspectRatio,d=f.minWidth/this.aspectRatio,c=f.maxHeight*this.aspectRatio,e=f.maxWidth/this.aspectRatio,b>f.minWidth&&(f.minWidth=b),d>f.minHeight&&(f.minHeight=d),c<f.maxWidth&&(f.maxWidth=c),e<f.maxHeight&&(f.maxHeight=e)),this._vBoundaries=f},_updateCache:function(a){this.offset=this.helper.offset(),this._isNumber(a.left)&&(this.position.left=a.left),this._isNumber(a.top)&&(this.position.top=a.top),this._isNumber(a.height)&&(this.size.height=a.height),this._isNumber(a.width)&&(this.size.width=a.width)},_updateRatio:function(a){var b=this.position,c=this.size,d=this.axis;return this._isNumber(a.height)?a.width=a.height*this.aspectRatio:this._isNumber(a.width)&&(a.height=a.width/this.aspectRatio),"sw"===d&&(a.left=b.left+(c.width-a.width),a.top=null),"nw"===d&&(a.top=b.top+(c.height-a.height),a.left=b.left+(c.width-a.width)),a},_respectSize:function(a){var b=this._vBoundaries,c=this.axis,d=this._isNumber(a.width)&&b.maxWidth&&b.maxWidth<a.width,e=this._isNumber(a.height)&&b.maxHeight&&b.maxHeight<a.height,f=this._isNumber(a.width)&&b.minWidth&&b.minWidth>a.width,g=this._isNumber(a.height)&&b.minHeight&&b.minHeight>a.height,h=this.originalPosition.left+this.originalSize.width,i=this.position.top+this.size.height,j=/sw|nw|w/.test(c),k=/nw|ne|n/.test(c);return f&&(a.width=b.minWidth),g&&(a.height=b.minHeight),d&&(a.width=b.maxWidth),e&&(a.height=b.maxHeight),f&&j&&(a.left=h-b.minWidth),d&&j&&(a.left=h-b.maxWidth),g&&k&&(a.top=i-b.minHeight),e&&k&&(a.top=i-b.maxHeight),a.width||a.height||a.left||!a.top?a.width||a.height||a.top||!a.left||(a.left=null):a.top=null,a},_getPaddingPlusBorderDimensions:function(a){for(var b=0,c=[],d=[a.css("borderTopWidth"),a.css("borderRightWidth"),a.css("borderBottomWidth"),a.css("borderLeftWidth")],e=[a.css("paddingTop"),a.css("paddingRight"),a.css("paddingBottom"),a.css("paddingLeft")];4>b;b++)c[b]=parseInt(d[b],10)||0,c[b]+=parseInt(e[b],10)||0;return{height:c[0]+c[2],width:c[1]+c[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var a,b=0,c=this.helper||this.element;b<this._proportionallyResizeElements.length;b++)a=this._proportionallyResizeElements[b],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(a)),a.css({height:c.height()-this.outerDimensions.height||0,width:c.width()-this.outerDimensions.width||0})},_renderProxy:function(){var b=this.element,c=this.options;this.elementOffset=b.offset(),this._helper?(this.helper=this.helper||a("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++c.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(a,b){return{width:this.originalSize.width+b}},w:function(a,b){var c=this.originalSize,d=this.originalPosition;return{left:d.left+b,width:c.width-b}},n:function(a,b,c){var d=this.originalSize,e=this.originalPosition;return{top:e.top+c,height:d.height-c}},s:function(a,b,c){return{height:this.originalSize.height+c}},se:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},sw:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,c,d]))},ne:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},nw:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,c,d]))}},_propagate:function(b,c){a.ui.plugin.call(this,b,[c,this.ui()]),"resize"!==b&&this._trigger(b,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),a.ui.plugin.add("resizable","animate",{stop:function(b){var c=a(this).resizable("instance"),d=c.options,e=c._proportionallyResizeElements,f=e.length&&/textarea/i.test(e[0].nodeName),g=f&&c._hasScroll(e[0],"left")?0:c.sizeDiff.height,h=f?0:c.sizeDiff.width,i={width:c.size.width-h,height:c.size.height-g},j=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,k=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null;c.element.animate(a.extend(i,k&&j?{top:k,left:j}:{}),{duration:d.animateDuration,easing:d.animateEasing,step:function(){var d={width:parseInt(c.element.css("width"),10),height:parseInt(c.element.css("height"),10),top:parseInt(c.element.css("top"),10),left:parseInt(c.element.css("left"),10)};e&&e.length&&a(e[0]).css({width:d.width,height:d.height}),c._updateCache(d),c._propagate("resize",b)}})}}),a.ui.plugin.add("resizable","containment",{start:function(){var b,c,d,e,f,g,h,i=a(this).resizable("instance"),j=i.options,k=i.element,l=j.containment,m=l instanceof a?l.get(0):/parent/.test(l)?k.parent().get(0):l;m&&(i.containerElement=a(m),/document/.test(l)||l===document?(i.containerOffset={left:0,top:0},i.containerPosition={left:0,top:0},i.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight}):(b=a(m),c=[],a(["Top","Right","Left","Bottom"]).each(function(a,d){c[a]=i._num(b.css("padding"+d))}),i.containerOffset=b.offset(),i.containerPosition=b.position(),i.containerSize={height:b.innerHeight()-c[3],width:b.innerWidth()-c[1]},d=i.containerOffset,e=i.containerSize.height,f=i.containerSize.width,g=i._hasScroll(m,"left")?m.scrollWidth:f,h=i._hasScroll(m)?m.scrollHeight:e,i.parentData={element:m,left:d.left,top:d.top,width:g,height:h}))},resize:function(b){var c,d,e,f,g=a(this).resizable("instance"),h=g.options,i=g.containerOffset,j=g.position,k=g._aspectRatio||b.shiftKey,l={top:0,left:0},m=g.containerElement,n=!0;m[0]!==document&&/static/.test(m.css("position"))&&(l=i),j.left<(g._helper?i.left:0)&&(g.size.width=g.size.width+(g._helper?g.position.left-i.left:g.position.left-l.left),k&&(g.size.height=g.size.width/g.aspectRatio,n=!1),g.position.left=h.helper?i.left:0),j.top<(g._helper?i.top:0)&&(g.size.height=g.size.height+(g._helper?g.position.top-i.top:g.position.top),k&&(g.size.width=g.size.height*g.aspectRatio,n=!1),g.position.top=g._helper?i.top:0),e=g.containerElement.get(0)===g.element.parent().get(0),f=/relative|absolute/.test(g.containerElement.css("position")),e&&f?(g.offset.left=g.parentData.left+g.position.left,g.offset.top=g.parentData.top+g.position.top):(g.offset.left=g.element.offset().left,g.offset.top=g.element.offset().top),c=Math.abs(g.sizeDiff.width+(g._helper?g.offset.left-l.left:g.offset.left-i.left)),d=Math.abs(g.sizeDiff.height+(g._helper?g.offset.top-l.top:g.offset.top-i.top)),c+g.size.width>=g.parentData.width&&(g.size.width=g.parentData.width-c,k&&(g.size.height=g.size.width/g.aspectRatio,n=!1)),d+g.size.height>=g.parentData.height&&(g.size.height=g.parentData.height-d,k&&(g.size.width=g.size.height*g.aspectRatio,n=!1)),n||(g.position.left=g.prevPosition.left,g.position.top=g.prevPosition.top,g.size.width=g.prevSize.width,g.size.height=g.prevSize.height)},stop:function(){var b=a(this).resizable("instance"),c=b.options,d=b.containerOffset,e=b.containerPosition,f=b.containerElement,g=a(b.helper),h=g.offset(),i=g.outerWidth()-b.sizeDiff.width,j=g.outerHeight()-b.sizeDiff.height;b._helper&&!c.animate&&/relative/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:j}),b._helper&&!c.animate&&/static/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:j})}}),a.ui.plugin.add("resizable","alsoResize",{start:function(){var b=a(this).resizable("instance"),c=b.options;a(c.alsoResize).each(function(){var b=a(this);b.data("ui-resizable-alsoresize",{width:parseInt(b.width(),10),height:parseInt(b.height(),10),left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10)})})},resize:function(b,c){var d=a(this).resizable("instance"),e=d.options,f=d.originalSize,g=d.originalPosition,h={height:d.size.height-f.height||0,width:d.size.width-f.width||0,top:d.position.top-g.top||0,left:d.position.left-g.left||0};a(e.alsoResize).each(function(){var b=a(this),d=a(this).data("ui-resizable-alsoresize"),e={},f=b.parents(c.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(f,function(a,b){var c=(d[b]||0)+(h[b]||0);c&&c>=0&&(e[b]=c||null)}),b.css(e)})},stop:function(){a(this).removeData("resizable-alsoresize")}}),a.ui.plugin.add("resizable","ghost",{start:function(){var b=a(this).resizable("instance"),c=b.options,d=b.size;b.ghost=b.originalElement.clone(),b.ghost.css({opacity:.25,display:"block",position:"relative",height:d.height,width:d.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof c.ghost?c.ghost:""),b.ghost.appendTo(b.helper)},resize:function(){var b=a(this).resizable("instance");b.ghost&&b.ghost.css({position:"relative",height:b.size.height,width:b.size.width})},stop:function(){var b=a(this).resizable("instance");b.ghost&&b.helper&&b.helper.get(0).removeChild(b.ghost.get(0))}}),a.ui.plugin.add("resizable","grid",{resize:function(){var b,c=a(this).resizable("instance"),d=c.options,e=c.size,f=c.originalSize,g=c.originalPosition,h=c.axis,i="number"==typeof d.grid?[d.grid,d.grid]:d.grid,j=i[0]||1,k=i[1]||1,l=Math.round((e.width-f.width)/j)*j,m=Math.round((e.height-f.height)/k)*k,n=f.width+l,o=f.height+m,p=d.maxWidth&&d.maxWidth<n,q=d.maxHeight&&d.maxHeight<o,r=d.minWidth&&d.minWidth>n,s=d.minHeight&&d.minHeight>o;d.grid=i,r&&(n+=j),s&&(o+=k),p&&(n-=j),q&&(o-=k),/^(se|s|e)$/.test(h)?(c.size.width=n,c.size.height=o):/^(ne)$/.test(h)?(c.size.width=n,c.size.height=o,c.position.top=g.top-m):/^(sw)$/.test(h)?(c.size.width=n,c.size.height=o,c.position.left=g.left-l):((0>=o-k||0>=n-j)&&(b=c._getPaddingPlusBorderDimensions(this)),o-k>0?(c.size.height=o,c.position.top=g.top-m):(o=k-b.height,c.size.height=o,c.position.top=g.top+f.height-o),n-j>0?(c.size.width=n,c.position.left=g.left-l):(n=j-b.width,c.size.width=n,c.position.left=g.left+f.width-n))}});a.ui.resizable,a.widget("ui.dialog",{version:"1.11.4",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"Close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(b){var c=a(this).css(b).offset().top;0>c&&a(this).css("top",b.top-c)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&a.fn.draggable&&this._makeDraggable(),this.options.resizable&&a.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var b=this.options.appendTo;return b&&(b.jquery||b.nodeType)?a(b):this.document.find(b||"body").eq(0)},_destroy:function(){var a,b=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),a=b.parent.children().eq(b.index),a.length&&a[0]!==this.element[0]?a.before(this.element):b.parent.append(this.element)},widget:function(){return this.uiDialog},disable:a.noop,enable:a.noop,close:function(b){var c,d=this;if(this._isOpen&&this._trigger("beforeClose",b)!==!1){if(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),!this.opener.filter(":focusable").focus().length)try{c=this.document[0].activeElement,c&&"body"!==c.nodeName.toLowerCase()&&a(c).blur()}catch(e){}this._hide(this.uiDialog,this.options.hide,function(){d._trigger("close",b)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(b,c){var d=!1,e=this.uiDialog.siblings(".ui-front:visible").map(function(){return+a(this).css("z-index")}).get(),f=Math.max.apply(null,e);return f>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",f+1),d=!0),d&&!c&&this._trigger("focus",b),d},open:function(){var b=this;return this._isOpen?void(this._moveToTop()&&this._focusTabbable()):(this._isOpen=!0,this.opener=a(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){b._focusTabbable(),b._trigger("focus")}),this._makeFocusTarget(),void this._trigger("open"))},_focusTabbable:function(){var a=this._focusedElement;a||(a=this.element.find("[autofocus]")),a.length||(a=this.element.find(":tabbable")),a.length||(a=this.uiDialogButtonPane.find(":tabbable")),a.length||(a=this.uiDialogTitlebarClose.filter(":tabbable")),a.length||(a=this.uiDialog),a.eq(0).focus()},_keepFocus:function(b){function c(){var b=this.document[0].activeElement,c=this.uiDialog[0]===b||a.contains(this.uiDialog[0],b);c||this._focusTabbable()}b.preventDefault(),c.call(this),this._delay(c)},_createWrapper:function(){this.uiDialog=a("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(b){if(this.options.closeOnEscape&&!b.isDefaultPrevented()&&b.keyCode&&b.keyCode===a.ui.keyCode.ESCAPE)return b.preventDefault(),void this.close(b);if(b.keyCode===a.ui.keyCode.TAB&&!b.isDefaultPrevented()){var c=this.uiDialog.find(":tabbable"),d=c.filter(":first"),e=c.filter(":last");b.target!==e[0]&&b.target!==this.uiDialog[0]||b.shiftKey?b.target!==d[0]&&b.target!==this.uiDialog[0]||!b.shiftKey||(this._delay(function(){e.focus()}),b.preventDefault()):(this._delay(function(){d.focus()}),b.preventDefault())}},mousedown:function(a){this._moveToTop(a)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var b;this.uiDialogTitlebar=a("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(b){a(b.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=a("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(a){a.preventDefault(),this.close(a)}}),b=a("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(b),this.uiDialog.attr({"aria-labelledby":b.attr("id")})},_title:function(a){this.options.title||a.html("&#160;"),a.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=a("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=a("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var b=this,c=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),a.isEmptyObject(c)||a.isArray(c)&&!c.length?void this.uiDialog.removeClass("ui-dialog-buttons"):(a.each(c,function(c,d){var e,f;d=a.isFunction(d)?{click:d,text:c}:d,d=a.extend({type:"button"},d),e=d.click,d.click=function(){e.apply(b.element[0],arguments)},f={icons:d.icons,text:d.showText},delete d.icons,delete d.showText,a("<button></button>",d).button(f).appendTo(b.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),void this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function b(a){return{position:a.position,offset:a.offset}}var c=this,d=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(d,e){a(this).addClass("ui-dialog-dragging"),c._blockFrames(),c._trigger("dragStart",d,b(e))},drag:function(a,d){c._trigger("drag",a,b(d))},stop:function(e,f){var g=f.offset.left-c.document.scrollLeft(),h=f.offset.top-c.document.scrollTop();d.position={my:"left top",at:"left"+(g>=0?"+":"")+g+" top"+(h>=0?"+":"")+h,of:c.window},a(this).removeClass("ui-dialog-dragging"),c._unblockFrames(),c._trigger("dragStop",e,b(f))}})},_makeResizable:function(){function b(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}var c=this,d=this.options,e=d.resizable,f=this.uiDialog.css("position"),g="string"==typeof e?e:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:d.maxWidth,maxHeight:d.maxHeight,minWidth:d.minWidth,minHeight:this._minHeight(),handles:g,start:function(d,e){a(this).addClass("ui-dialog-resizing"),c._blockFrames(),c._trigger("resizeStart",d,b(e))},resize:function(a,d){c._trigger("resize",a,b(d))},stop:function(e,f){var g=c.uiDialog.offset(),h=g.left-c.document.scrollLeft(),i=g.top-c.document.scrollTop();d.height=c.uiDialog.height(),d.width=c.uiDialog.width(),d.position={my:"left top",at:"left"+(h>=0?"+":"")+h+" top"+(i>=0?"+":"")+i,of:c.window},a(this).removeClass("ui-dialog-resizing"),c._unblockFrames(),c._trigger("resizeStop",e,b(f))}}).css("position",f)},_trackFocus:function(){this._on(this.widget(),{focusin:function(b){this._makeFocusTarget(),this._focusedElement=a(b.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var b=this._trackingInstances(),c=a.inArray(this,b);-1!==c&&b.splice(c,1)},_trackingInstances:function(){var a=this.document.data("ui-dialog-instances");return a||(a=[],this.document.data("ui-dialog-instances",a)),a},_minHeight:function(){var a=this.options;return"auto"===a.height?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(){var a=this.uiDialog.is(":visible");a||this.uiDialog.show(),this.uiDialog.position(this.options.position),a||this.uiDialog.hide()},_setOptions:function(b){var c=this,d=!1,e={};a.each(b,function(a,b){c._setOption(a,b),a in c.sizeRelatedOptions&&(d=!0),a in c.resizableRelatedOptions&&(e[a]=b)}),d&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",e)},_setOption:function(a,b){var c,d,e=this.uiDialog;"dialogClass"===a&&e.removeClass(this.options.dialogClass).addClass(b),"disabled"!==a&&(this._super(a,b),"appendTo"===a&&this.uiDialog.appendTo(this._appendTo()),"buttons"===a&&this._createButtons(),"closeText"===a&&this.uiDialogTitlebarClose.button({label:""+b}),"draggable"===a&&(c=e.is(":data(ui-draggable)"),c&&!b&&e.draggable("destroy"),!c&&b&&this._makeDraggable()),"position"===a&&this._position(),"resizable"===a&&(d=e.is(":data(ui-resizable)"),d&&!b&&e.resizable("destroy"),d&&"string"==typeof b&&e.resizable("option","handles",b),d||b===!1||this._makeResizable()),"title"===a&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var a,b,c,d=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),d.minWidth>d.width&&(d.width=d.minWidth),a=this.uiDialog.css({height:"auto",width:d.width}).outerHeight(),b=Math.max(0,d.minHeight-a),c="number"==typeof d.maxHeight?Math.max(0,d.maxHeight-a):"none","auto"===d.height?this.element.css({minHeight:b,maxHeight:c,height:"auto"}):this.element.height(Math.max(0,d.height-a)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var b=a(this);return a("<div>").css({position:"absolute",width:b.outerWidth(),height:b.outerHeight()}).appendTo(b.parent()).offset(b.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(b){return a(b.target).closest(".ui-dialog").length?!0:!!a(b.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var b=!0;this._delay(function(){b=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(a){b||this._allowInteraction(a)||(a.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=a("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var a=this.document.data("ui-dialog-overlays")-1;a?this.document.data("ui-dialog-overlays",a):this.document.unbind("focusin").removeData("ui-dialog-overlays"),this.overlay.remove(),this.overlay=null}}});a.widget("ui.droppable",{version:"1.11.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var b,c=this.options,d=c.accept;this.isover=!1,this.isout=!0,this.accept=a.isFunction(d)?d:function(a){return a.is(d)},this.proportions=function(){return arguments.length?void(b=arguments[0]):b?b:b={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(c.scope),c.addClasses&&this.element.addClass("ui-droppable")},_addToManager:function(b){a.ui.ddmanager.droppables[b]=a.ui.ddmanager.droppables[b]||[],a.ui.ddmanager.droppables[b].push(this)},_splice:function(a){for(var b=0;b<a.length;b++)a[b]===this&&a.splice(b,1);
},_destroy:function(){var b=a.ui.ddmanager.droppables[this.options.scope];this._splice(b),this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(b,c){if("accept"===b)this.accept=a.isFunction(c)?c:function(a){return a.is(c)};else if("scope"===b){var d=a.ui.ddmanager.droppables[this.options.scope];this._splice(d),this._addToManager(c)}this._super(b,c)},_activate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),c&&this._trigger("activate",b,this.ui(c))},_deactivate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),c&&this._trigger("deactivate",b,this.ui(c))},_over:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!==this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",b,this.ui(c)))},_out:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!==this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",b,this.ui(c)))},_drop:function(b,c){var d=c||a.ui.ddmanager.current,e=!1;return d&&(d.currentItem||d.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var c=a(this).droppable("instance");return c.options.greedy&&!c.options.disabled&&c.options.scope===d.options.scope&&c.accept.call(c.element[0],d.currentItem||d.element)&&a.ui.intersect(d,a.extend(c,{offset:c.element.offset()}),c.options.tolerance,b)?(e=!0,!1):void 0}),e?!1:this.accept.call(this.element[0],d.currentItem||d.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",b,this.ui(d)),this.element):!1):!1},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}}),a.ui.intersect=function(){function a(a,b,c){return a>=b&&b+c>a}return function(b,c,d,e){if(!c.offset)return!1;var f=(b.positionAbs||b.position.absolute).left+b.margins.left,g=(b.positionAbs||b.position.absolute).top+b.margins.top,h=f+b.helperProportions.width,i=g+b.helperProportions.height,j=c.offset.left,k=c.offset.top,l=j+c.proportions().width,m=k+c.proportions().height;switch(d){case"fit":return f>=j&&l>=h&&g>=k&&m>=i;case"intersect":return j<f+b.helperProportions.width/2&&h-b.helperProportions.width/2<l&&k<g+b.helperProportions.height/2&&i-b.helperProportions.height/2<m;case"pointer":return a(e.pageY,k,c.proportions().height)&&a(e.pageX,j,c.proportions().width);case"touch":return(g>=k&&m>=g||i>=k&&m>=i||k>g&&i>m)&&(f>=j&&l>=f||h>=j&&l>=h||j>f&&h>l);default:return!1}}}(),a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(b,c){var d,e,f=a.ui.ddmanager.droppables[b.options.scope]||[],g=c?c.type:null,h=(b.currentItem||b.element).find(":data(ui-droppable)").addBack();a:for(d=0;d<f.length;d++)if(!(f[d].options.disabled||b&&!f[d].accept.call(f[d].element[0],b.currentItem||b.element))){for(e=0;e<h.length;e++)if(h[e]===f[d].element[0]){f[d].proportions().height=0;continue a}f[d].visible="none"!==f[d].element.css("display"),f[d].visible&&("mousedown"===g&&f[d]._activate.call(f[d],c),f[d].offset=f[d].element.offset(),f[d].proportions({width:f[d].element[0].offsetWidth,height:f[d].element[0].offsetHeight}))}},drop:function(b,c){var d=!1;return a.each((a.ui.ddmanager.droppables[b.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&a.ui.intersect(b,this,this.options.tolerance,c)&&(d=this._drop.call(this,c)||d),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,c)))}),d},dragStart:function(b,c){b.element.parentsUntil("body").bind("scroll.droppable",function(){b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)})},drag:function(b,c){b.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(b,c),a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var d,e,f,g=a.ui.intersect(b,this,this.options.tolerance,c),h=!g&&this.isover?"isout":g&&!this.isover?"isover":null;h&&(this.options.greedy&&(e=this.options.scope,f=this.element.parents(":data(ui-droppable)").filter(function(){return a(this).droppable("instance").options.scope===e}),f.length&&(d=a(f[0]).droppable("instance"),d.greedyChild="isover"===h)),d&&"isover"===h&&(d.isover=!1,d.isout=!0,d._out.call(d,c)),this[h]=!0,this["isout"===h?"isover":"isout"]=!1,this["isover"===h?"_over":"_out"].call(this,c),d&&"isout"===h&&(d.isout=!1,d.isover=!0,d._over.call(d,c)))}})},dragStop:function(b,c){b.element.parentsUntil("body").unbind("scroll.droppable"),b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)}};var s=(a.ui.droppable,"ui-effects-"),t=a;a.effects={effect:{}},function(a,b){function c(a,b,c){var d=l[b.type]||{};return null==a?c||!b.def?null:b.def:(a=d.floor?~~a:parseFloat(a),isNaN(a)?b.def:d.mod?(a+d.mod)%d.mod:0>a?0:d.max<a?d.max:a)}function d(b){var c=j(),d=c._rgba=[];return b=b.toLowerCase(),o(i,function(a,e){var f,g=e.re.exec(b),h=g&&e.parse(g),i=e.space||"rgba";return h?(f=c[i](h),c[k[i].cache]=f[k[i].cache],d=c._rgba=f._rgba,!1):void 0}),d.length?("0,0,0,0"===d.join()&&a.extend(d,f.transparent),c):f[b]}function e(a,b,c){return c=(c+1)%1,1>6*c?a+(b-a)*c*6:1>2*c?b:2>3*c?a+(b-a)*(2/3-c)*6:a}var f,g="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",h=/^([\-+])=\s*(\d+\.?\d*)/,i=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],j=a.Color=function(b,c,d,e){return new a.Color.fn.parse(b,c,d,e)},k={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},l={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},m=j.support={},n=a("<p>")[0],o=a.each;n.style.cssText="background-color:rgba(1,1,1,.5)",m.rgba=n.style.backgroundColor.indexOf("rgba")>-1,o(k,function(a,b){b.cache="_"+a,b.props.alpha={idx:3,type:"percent",def:1}}),j.fn=a.extend(j.prototype,{parse:function(e,g,h,i){if(e===b)return this._rgba=[null,null,null,null],this;(e.jquery||e.nodeType)&&(e=a(e).css(g),g=b);var l=this,m=a.type(e),n=this._rgba=[];return g!==b&&(e=[e,g,h,i],m="array"),"string"===m?this.parse(d(e)||f._default):"array"===m?(o(k.rgba.props,function(a,b){n[b.idx]=c(e[b.idx],b)}),this):"object"===m?(e instanceof j?o(k,function(a,b){e[b.cache]&&(l[b.cache]=e[b.cache].slice())}):o(k,function(b,d){var f=d.cache;o(d.props,function(a,b){if(!l[f]&&d.to){if("alpha"===a||null==e[a])return;l[f]=d.to(l._rgba)}l[f][b.idx]=c(e[a],b,!0)}),l[f]&&a.inArray(null,l[f].slice(0,3))<0&&(l[f][3]=1,d.from&&(l._rgba=d.from(l[f])))}),this):void 0},is:function(a){var b=j(a),c=!0,d=this;return o(k,function(a,e){var f,g=b[e.cache];return g&&(f=d[e.cache]||e.to&&e.to(d._rgba)||[],o(e.props,function(a,b){return null!=g[b.idx]?c=g[b.idx]===f[b.idx]:void 0})),c}),c},_space:function(){var a=[],b=this;return o(k,function(c,d){b[d.cache]&&a.push(c)}),a.pop()},transition:function(a,b){var d=j(a),e=d._space(),f=k[e],g=0===this.alpha()?j("transparent"):this,h=g[f.cache]||f.to(g._rgba),i=h.slice();return d=d[f.cache],o(f.props,function(a,e){var f=e.idx,g=h[f],j=d[f],k=l[e.type]||{};null!==j&&(null===g?i[f]=j:(k.mod&&(j-g>k.mod/2?g+=k.mod:g-j>k.mod/2&&(g-=k.mod)),i[f]=c((j-g)*b+g,e)))}),this[e](i)},blend:function(b){if(1===this._rgba[3])return this;var c=this._rgba.slice(),d=c.pop(),e=j(b)._rgba;return j(a.map(c,function(a,b){return(1-d)*e[b]+d*a}))},toRgbaString:function(){var b="rgba(",c=a.map(this._rgba,function(a,b){return null==a?b>2?1:0:a});return 1===c[3]&&(c.pop(),b="rgb("),b+c.join()+")"},toHslaString:function(){var b="hsla(",c=a.map(this.hsla(),function(a,b){return null==a&&(a=b>2?1:0),b&&3>b&&(a=Math.round(100*a)+"%"),a});return 1===c[3]&&(c.pop(),b="hsl("),b+c.join()+")"},toHexString:function(b){var c=this._rgba.slice(),d=c.pop();return b&&c.push(~~(255*d)),"#"+a.map(c,function(a){return a=(a||0).toString(16),1===a.length?"0"+a:a}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),j.fn.parse.prototype=j.fn,k.hsla.to=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b,c,d=a[0]/255,e=a[1]/255,f=a[2]/255,g=a[3],h=Math.max(d,e,f),i=Math.min(d,e,f),j=h-i,k=h+i,l=.5*k;return b=i===h?0:d===h?60*(e-f)/j+360:e===h?60*(f-d)/j+120:60*(d-e)/j+240,c=0===j?0:.5>=l?j/k:j/(2-k),[Math.round(b)%360,c,l,null==g?1:g]},k.hsla.from=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b=a[0]/360,c=a[1],d=a[2],f=a[3],g=.5>=d?d*(1+c):d+c-d*c,h=2*d-g;return[Math.round(255*e(h,g,b+1/3)),Math.round(255*e(h,g,b)),Math.round(255*e(h,g,b-1/3)),f]},o(k,function(d,e){var f=e.props,g=e.cache,i=e.to,k=e.from;j.fn[d]=function(d){if(i&&!this[g]&&(this[g]=i(this._rgba)),d===b)return this[g].slice();var e,h=a.type(d),l="array"===h||"object"===h?d:arguments,m=this[g].slice();return o(f,function(a,b){var d=l["object"===h?a:b.idx];null==d&&(d=m[b.idx]),m[b.idx]=c(d,b)}),k?(e=j(k(m)),e[g]=m,e):j(m)},o(f,function(b,c){j.fn[b]||(j.fn[b]=function(e){var f,g=a.type(e),i="alpha"===b?this._hsla?"hsla":"rgba":d,j=this[i](),k=j[c.idx];return"undefined"===g?k:("function"===g&&(e=e.call(this,k),g=a.type(e)),null==e&&c.empty?this:("string"===g&&(f=h.exec(e),f&&(e=k+parseFloat(f[2])*("+"===f[1]?1:-1))),j[c.idx]=e,this[i](j)))})})}),j.hook=function(b){var c=b.split(" ");o(c,function(b,c){a.cssHooks[c]={set:function(b,e){var f,g,h="";if("transparent"!==e&&("string"!==a.type(e)||(f=d(e)))){if(e=j(f||e),!m.rgba&&1!==e._rgba[3]){for(g="backgroundColor"===c?b.parentNode:b;(""===h||"transparent"===h)&&g&&g.style;)try{h=a.css(g,"backgroundColor"),g=g.parentNode}catch(i){}e=e.blend(h&&"transparent"!==h?h:"_default")}e=e.toRgbaString()}try{b.style[c]=e}catch(i){}}},a.fx.step[c]=function(b){b.colorInit||(b.start=j(b.elem,c),b.end=j(b.end),b.colorInit=!0),a.cssHooks[c].set(b.elem,b.start.transition(b.end,b.pos))}})},j.hook(g),a.cssHooks.borderColor={expand:function(a){var b={};return o(["Top","Right","Bottom","Left"],function(c,d){b["border"+d+"Color"]=a}),b}},f=a.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(t),function(){function b(b){var c,d,e=b.ownerDocument.defaultView?b.ownerDocument.defaultView.getComputedStyle(b,null):b.currentStyle,f={};if(e&&e.length&&e[0]&&e[e[0]])for(d=e.length;d--;)c=e[d],"string"==typeof e[c]&&(f[a.camelCase(c)]=e[c]);else for(c in e)"string"==typeof e[c]&&(f[c]=e[c]);return f}function c(b,c){var d,f,g={};for(d in c)f=c[d],b[d]!==f&&(e[d]||!a.fx.step[d]&&isNaN(parseFloat(f))||(g[d]=f));return g}var d=["add","remove","toggle"],e={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(b,c){a.fx.step[c]=function(a){("none"!==a.end&&!a.setAttr||1===a.pos&&!a.setAttr)&&(t.style(a.elem,c,a.end),a.setAttr=!0)}}),a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),a.effects.animateClass=function(e,f,g,h){var i=a.speed(f,g,h);return this.queue(function(){var f,g=a(this),h=g.attr("class")||"",j=i.children?g.find("*").addBack():g;j=j.map(function(){var c=a(this);return{el:c,start:b(this)}}),f=function(){a.each(d,function(a,b){e[b]&&g[b+"Class"](e[b])})},f(),j=j.map(function(){return this.end=b(this.el[0]),this.diff=c(this.start,this.end),this}),g.attr("class",h),j=j.map(function(){var b=this,c=a.Deferred(),d=a.extend({},i,{queue:!1,complete:function(){c.resolve(b)}});return this.el.animate(this.diff,d),c.promise()}),a.when.apply(a,j.get()).done(function(){f(),a.each(arguments,function(){var b=this.el;a.each(this.diff,function(a){b.css(a,"")})}),i.complete.call(g[0])})})},a.fn.extend({addClass:function(b){return function(c,d,e,f){return d?a.effects.animateClass.call(this,{add:c},d,e,f):b.apply(this,arguments)}}(a.fn.addClass),removeClass:function(b){return function(c,d,e,f){return arguments.length>1?a.effects.animateClass.call(this,{remove:c},d,e,f):b.apply(this,arguments)}}(a.fn.removeClass),toggleClass:function(b){return function(c,d,e,f,g){return"boolean"==typeof d||void 0===d?e?a.effects.animateClass.call(this,d?{add:c}:{remove:c},e,f,g):b.apply(this,arguments):a.effects.animateClass.call(this,{toggle:c},d,e,f)}}(a.fn.toggleClass),switchClass:function(b,c,d,e,f){return a.effects.animateClass.call(this,{add:c,remove:b},d,e,f)}})}(),function(){function b(b,c,d,e){return a.isPlainObject(b)&&(c=b,b=b.effect),b={effect:b},null==c&&(c={}),a.isFunction(c)&&(e=c,d=null,c={}),("number"==typeof c||a.fx.speeds[c])&&(e=d,d=c,c={}),a.isFunction(d)&&(e=d,d=null),c&&a.extend(b,c),d=d||c.duration,b.duration=a.fx.off?0:"number"==typeof d?d:d in a.fx.speeds?a.fx.speeds[d]:a.fx.speeds._default,b.complete=e||c.complete,b}function c(b){return!b||"number"==typeof b||a.fx.speeds[b]?!0:"string"!=typeof b||a.effects.effect[b]?a.isFunction(b)?!0:"object"==typeof b&&!b.effect:!0}a.extend(a.effects,{version:"1.11.4",save:function(a,b){for(var c=0;c<b.length;c++)null!==b[c]&&a.data(s+b[c],a[0].style[b[c]])},restore:function(a,b){var c,d;for(d=0;d<b.length;d++)null!==b[d]&&(c=a.data(s+b[d]),void 0===c&&(c=""),a.css(b[d],c))},setMode:function(a,b){return"toggle"===b&&(b=a.is(":hidden")?"show":"hide"),b},getBaseline:function(a,b){var c,d;switch(a[0]){case"top":c=0;break;case"middle":c=.5;break;case"bottom":c=1;break;default:c=a[0]/b.height}switch(a[1]){case"left":d=0;break;case"center":d=.5;break;case"right":d=1;break;default:d=a[1]/b.width}return{x:d,y:c}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var c={width:b.outerWidth(!0),height:b.outerHeight(!0),"float":b.css("float")},d=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e={width:b.width(),height:b.height()},f=document.activeElement;try{f.id}catch(g){f=document.body}return b.wrap(d),(b[0]===f||a.contains(b[0],f))&&a(f).focus(),d=b.parent(),"static"===b.css("position")?(d.css({position:"relative"}),b.css({position:"relative"})):(a.extend(c,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(a,d){c[d]=b.css(d),isNaN(parseInt(c[d],10))&&(c[d]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),b.css(e),d.css(c).show()},removeWrapper:function(b){var c=document.activeElement;return b.parent().is(".ui-effects-wrapper")&&(b.parent().replaceWith(b),(b[0]===c||a.contains(b[0],c))&&a(c).focus()),b},setTransition:function(b,c,d,e){return e=e||{},a.each(c,function(a,c){var f=b.cssUnit(c);f[0]>0&&(e[c]=f[0]*d+f[1])}),e}}),a.fn.extend({effect:function(){function c(b){function c(){a.isFunction(f)&&f.call(e[0]),a.isFunction(b)&&b()}var e=a(this),f=d.complete,h=d.mode;(e.is(":hidden")?"hide"===h:"show"===h)?(e[h](),c()):g.call(e[0],d,c)}var d=b.apply(this,arguments),e=d.mode,f=d.queue,g=a.effects.effect[d.effect];return a.fx.off||!g?e?this[e](d.duration,d.complete):this.each(function(){d.complete&&d.complete.call(this)}):f===!1?this.each(c):this.queue(f||"fx",c)},show:function(a){return function(d){if(c(d))return a.apply(this,arguments);var e=b.apply(this,arguments);return e.mode="show",this.effect.call(this,e)}}(a.fn.show),hide:function(a){return function(d){if(c(d))return a.apply(this,arguments);var e=b.apply(this,arguments);return e.mode="hide",this.effect.call(this,e)}}(a.fn.hide),toggle:function(a){return function(d){if(c(d)||"boolean"==typeof d)return a.apply(this,arguments);var e=b.apply(this,arguments);return e.mode="toggle",this.effect.call(this,e)}}(a.fn.toggle),cssUnit:function(b){var c=this.css(b),d=[];return a.each(["em","px","%","pt"],function(a,b){c.indexOf(b)>0&&(d=[parseFloat(c),b])}),d}})}(),function(){var b={};a.each(["Quad","Cubic","Quart","Quint","Expo"],function(a,c){b[c]=function(b){return Math.pow(b,a+2)}}),a.extend(b,{Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Circ:function(a){return 1-Math.sqrt(1-a*a)},Elastic:function(a){return 0===a||1===a?a:-Math.pow(2,8*(a-1))*Math.sin((80*(a-1)-7.5)*Math.PI/15)},Back:function(a){return a*a*(3*a-2)},Bounce:function(a){for(var b,c=4;a<((b=Math.pow(2,--c))-1)/11;);return 1/Math.pow(4,3-c)-7.5625*Math.pow((3*b-2)/22-a,2)}}),a.each(b,function(b,c){a.easing["easeIn"+b]=c,a.easing["easeOut"+b]=function(a){return 1-c(1-a)},a.easing["easeInOut"+b]=function(a){return.5>a?c(2*a)/2:1-c(-2*a+2)/2}})}();a.effects,a.effects.effect.blind=function(b,c){var d,e,f,g=a(this),h=/up|down|vertical/,i=/up|left|vertical|horizontal/,j=["position","top","bottom","left","right","height","width"],k=a.effects.setMode(g,b.mode||"hide"),l=b.direction||"up",m=h.test(l),n=m?"height":"width",o=m?"top":"left",p=i.test(l),q={},r="show"===k;g.parent().is(".ui-effects-wrapper")?a.effects.save(g.parent(),j):a.effects.save(g,j),g.show(),d=a.effects.createWrapper(g).css({overflow:"hidden"}),e=d[n](),f=parseFloat(d.css(o))||0,q[n]=r?e:0,p||(g.css(m?"bottom":"right",0).css(m?"top":"left","auto").css({position:"absolute"}),q[o]=r?f:e+f),r&&(d.css(n,0),p||d.css(o,f+e)),d.animate(q,{duration:b.duration,easing:b.easing,queue:!1,complete:function(){"hide"===k&&g.hide(),a.effects.restore(g,j),a.effects.removeWrapper(g),c()}})},a.effects.effect.bounce=function(b,c){var d,e,f,g=a(this),h=["position","top","bottom","left","right","height","width"],i=a.effects.setMode(g,b.mode||"effect"),j="hide"===i,k="show"===i,l=b.direction||"up",m=b.distance,n=b.times||5,o=2*n+(k||j?1:0),p=b.duration/o,q=b.easing,r="up"===l||"down"===l?"top":"left",s="up"===l||"left"===l,t=g.queue(),u=t.length;for((k||j)&&h.push("opacity"),a.effects.save(g,h),g.show(),a.effects.createWrapper(g),m||(m=g["top"===r?"outerHeight":"outerWidth"]()/3),k&&(f={opacity:1},f[r]=0,g.css("opacity",0).css(r,s?2*-m:2*m).animate(f,p,q)),j&&(m/=Math.pow(2,n-1)),f={},f[r]=0,d=0;n>d;d++)e={},e[r]=(s?"-=":"+=")+m,g.animate(e,p,q).animate(f,p,q),m=j?2*m:m/2;j&&(e={opacity:0},e[r]=(s?"-=":"+=")+m,g.animate(e,p,q)),g.queue(function(){j&&g.hide(),a.effects.restore(g,h),a.effects.removeWrapper(g),c()}),u>1&&t.splice.apply(t,[1,0].concat(t.splice(u,o+1))),g.dequeue()},a.effects.effect.clip=function(b,c){var d,e,f,g=a(this),h=["position","top","bottom","left","right","height","width"],i=a.effects.setMode(g,b.mode||"hide"),j="show"===i,k=b.direction||"vertical",l="vertical"===k,m=l?"height":"width",n=l?"top":"left",o={};a.effects.save(g,h),g.show(),d=a.effects.createWrapper(g).css({overflow:"hidden"}),e="IMG"===g[0].tagName?d:g,f=e[m](),j&&(e.css(m,0),e.css(n,f/2)),o[m]=j?f:0,o[n]=j?0:f/2,e.animate(o,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){j||g.hide(),a.effects.restore(g,h),a.effects.removeWrapper(g),c()}})},a.effects.effect.drop=function(b,c){var d,e=a(this),f=["position","top","bottom","left","right","opacity","height","width"],g=a.effects.setMode(e,b.mode||"hide"),h="show"===g,i=b.direction||"left",j="up"===i||"down"===i?"top":"left",k="up"===i||"left"===i?"pos":"neg",l={opacity:h?1:0};a.effects.save(e,f),e.show(),a.effects.createWrapper(e),d=b.distance||e["top"===j?"outerHeight":"outerWidth"](!0)/2,h&&e.css("opacity",0).css(j,"pos"===k?-d:d),l[j]=(h?"pos"===k?"+=":"-=":"pos"===k?"-=":"+=")+d,e.animate(l,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){"hide"===g&&e.hide(),a.effects.restore(e,f),a.effects.removeWrapper(e),c()}})},a.effects.effect.explode=function(b,c){function d(){t.push(this),t.length===l*m&&e()}function e(){n.css({visibility:"visible"}),a(t).remove(),p||n.hide(),c()}var f,g,h,i,j,k,l=b.pieces?Math.round(Math.sqrt(b.pieces)):3,m=l,n=a(this),o=a.effects.setMode(n,b.mode||"hide"),p="show"===o,q=n.show().css("visibility","hidden").offset(),r=Math.ceil(n.outerWidth()/m),s=Math.ceil(n.outerHeight()/l),t=[];for(f=0;l>f;f++)for(i=q.top+f*s,k=f-(l-1)/2,g=0;m>g;g++)h=q.left+g*r,j=g-(m-1)/2,n.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-g*r,top:-f*s}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:r,height:s,left:h+(p?j*r:0),top:i+(p?k*s:0),opacity:p?0:1}).animate({left:h+(p?0:j*r),top:i+(p?0:k*s),opacity:p?1:0},b.duration||500,b.easing,d)},a.effects.effect.fade=function(b,c){var d=a(this),e=a.effects.setMode(d,b.mode||"toggle");d.animate({opacity:e},{queue:!1,duration:b.duration,easing:b.easing,complete:c})},a.effects.effect.fold=function(b,c){var d,e,f=a(this),g=["position","top","bottom","left","right","height","width"],h=a.effects.setMode(f,b.mode||"hide"),i="show"===h,j="hide"===h,k=b.size||15,l=/([0-9]+)%/.exec(k),m=!!b.horizFirst,n=i!==m,o=n?["width","height"]:["height","width"],p=b.duration/2,q={},r={};a.effects.save(f,g),f.show(),d=a.effects.createWrapper(f).css({overflow:"hidden"}),e=n?[d.width(),d.height()]:[d.height(),d.width()],l&&(k=parseInt(l[1],10)/100*e[j?0:1]),i&&d.css(m?{height:0,width:k}:{height:k,width:0}),q[o[0]]=i?e[0]:k,r[o[1]]=i?e[1]:0,d.animate(q,p,b.easing).animate(r,p,b.easing,function(){j&&f.hide(),a.effects.restore(f,g),a.effects.removeWrapper(f),c()})},a.effects.effect.highlight=function(b,c){var d=a(this),e=["backgroundImage","backgroundColor","opacity"],f=a.effects.setMode(d,b.mode||"show"),g={backgroundColor:d.css("backgroundColor")};"hide"===f&&(g.opacity=0),a.effects.save(d,e),d.show().css({backgroundImage:"none",backgroundColor:b.color||"#ffff99"}).animate(g,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){"hide"===f&&d.hide(),a.effects.restore(d,e),c()}})},a.effects.effect.size=function(b,c){var d,e,f,g=a(this),h=["position","top","bottom","left","right","width","height","overflow","opacity"],i=["position","top","bottom","left","right","overflow","opacity"],j=["width","height","overflow"],k=["fontSize"],l=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],m=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],n=a.effects.setMode(g,b.mode||"effect"),o=b.restore||"effect"!==n,p=b.scale||"both",q=b.origin||["middle","center"],r=g.css("position"),s=o?h:i,t={height:0,width:0,outerHeight:0,outerWidth:0};"show"===n&&g.show(),d={height:g.height(),width:g.width(),outerHeight:g.outerHeight(),outerWidth:g.outerWidth()},"toggle"===b.mode&&"show"===n?(g.from=b.to||t,g.to=b.from||d):(g.from=b.from||("show"===n?t:d),g.to=b.to||("hide"===n?t:d)),f={from:{y:g.from.height/d.height,x:g.from.width/d.width},to:{y:g.to.height/d.height,x:g.to.width/d.width}},"box"!==p&&"both"!==p||(f.from.y!==f.to.y&&(s=s.concat(l),g.from=a.effects.setTransition(g,l,f.from.y,g.from),g.to=a.effects.setTransition(g,l,f.to.y,g.to)),f.from.x!==f.to.x&&(s=s.concat(m),g.from=a.effects.setTransition(g,m,f.from.x,g.from),g.to=a.effects.setTransition(g,m,f.to.x,g.to))),"content"!==p&&"both"!==p||f.from.y!==f.to.y&&(s=s.concat(k).concat(j),g.from=a.effects.setTransition(g,k,f.from.y,g.from),g.to=a.effects.setTransition(g,k,f.to.y,g.to)),a.effects.save(g,s),g.show(),a.effects.createWrapper(g),g.css("overflow","hidden").css(g.from),q&&(e=a.effects.getBaseline(q,d),g.from.top=(d.outerHeight-g.outerHeight())*e.y,g.from.left=(d.outerWidth-g.outerWidth())*e.x,g.to.top=(d.outerHeight-g.to.outerHeight)*e.y,g.to.left=(d.outerWidth-g.to.outerWidth)*e.x),g.css(g.from),"content"!==p&&"both"!==p||(l=l.concat(["marginTop","marginBottom"]).concat(k),m=m.concat(["marginLeft","marginRight"]),j=h.concat(l).concat(m),g.find("*[width]").each(function(){var c=a(this),d={height:c.height(),width:c.width(),outerHeight:c.outerHeight(),outerWidth:c.outerWidth()};o&&a.effects.save(c,j),c.from={height:d.height*f.from.y,width:d.width*f.from.x,outerHeight:d.outerHeight*f.from.y,outerWidth:d.outerWidth*f.from.x},c.to={height:d.height*f.to.y,width:d.width*f.to.x,outerHeight:d.height*f.to.y,outerWidth:d.width*f.to.x},f.from.y!==f.to.y&&(c.from=a.effects.setTransition(c,l,f.from.y,c.from),c.to=a.effects.setTransition(c,l,f.to.y,c.to)),f.from.x!==f.to.x&&(c.from=a.effects.setTransition(c,m,f.from.x,c.from),c.to=a.effects.setTransition(c,m,f.to.x,c.to)),c.css(c.from),c.animate(c.to,b.duration,b.easing,function(){o&&a.effects.restore(c,j)})})),g.animate(g.to,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){0===g.to.opacity&&g.css("opacity",g.from.opacity),"hide"===n&&g.hide(),a.effects.restore(g,s),o||("static"===r?g.css({position:"relative",top:g.to.top,left:g.to.left}):a.each(["top","left"],function(a,b){g.css(b,function(b,c){var d=parseInt(c,10),e=a?g.to.left:g.to.top;return"auto"===c?e+"px":d+e+"px"})})),a.effects.removeWrapper(g),c()}})},a.effects.effect.scale=function(b,c){var d=a(this),e=a.extend(!0,{},b),f=a.effects.setMode(d,b.mode||"effect"),g=parseInt(b.percent,10)||(0===parseInt(b.percent,10)?0:"hide"===f?0:100),h=b.direction||"both",i=b.origin,j={height:d.height(),width:d.width(),outerHeight:d.outerHeight(),outerWidth:d.outerWidth()},k={y:"horizontal"!==h?g/100:1,x:"vertical"!==h?g/100:1};e.effect="size",e.queue=!1,e.complete=c,"effect"!==f&&(e.origin=i||["middle","center"],e.restore=!0),e.from=b.from||("show"===f?{height:0,width:0,outerHeight:0,outerWidth:0}:j),e.to={height:j.height*k.y,width:j.width*k.x,outerHeight:j.outerHeight*k.y,outerWidth:j.outerWidth*k.x},e.fade&&("show"===f&&(e.from.opacity=0,e.to.opacity=1),"hide"===f&&(e.from.opacity=1,e.to.opacity=0)),d.effect(e)},a.effects.effect.puff=function(b,c){var d=a(this),e=a.effects.setMode(d,b.mode||"hide"),f="hide"===e,g=parseInt(b.percent,10)||150,h=g/100,i={height:d.height(),width:d.width(),outerHeight:d.outerHeight(),outerWidth:d.outerWidth()};a.extend(b,{effect:"scale",queue:!1,fade:!0,mode:e,complete:c,percent:f?g:100,from:f?i:{height:i.height*h,width:i.width*h,outerHeight:i.outerHeight*h,outerWidth:i.outerWidth*h}}),d.effect(b)},a.effects.effect.pulsate=function(b,c){var d,e=a(this),f=a.effects.setMode(e,b.mode||"show"),g="show"===f,h="hide"===f,i=g||"hide"===f,j=2*(b.times||5)+(i?1:0),k=b.duration/j,l=0,m=e.queue(),n=m.length;for(!g&&e.is(":visible")||(e.css("opacity",0).show(),l=1),d=1;j>d;d++)e.animate({opacity:l},k,b.easing),l=1-l;e.animate({opacity:l},k,b.easing),e.queue(function(){h&&e.hide(),c()}),n>1&&m.splice.apply(m,[1,0].concat(m.splice(n,j+1))),e.dequeue()},a.effects.effect.shake=function(b,c){var d,e=a(this),f=["position","top","bottom","left","right","height","width"],g=a.effects.setMode(e,b.mode||"effect"),h=b.direction||"left",i=b.distance||20,j=b.times||3,k=2*j+1,l=Math.round(b.duration/k),m="up"===h||"down"===h?"top":"left",n="up"===h||"left"===h,o={},p={},q={},r=e.queue(),s=r.length;for(a.effects.save(e,f),e.show(),a.effects.createWrapper(e),o[m]=(n?"-=":"+=")+i,p[m]=(n?"+=":"-=")+2*i,q[m]=(n?"-=":"+=")+2*i,e.animate(o,l,b.easing),d=1;j>d;d++)e.animate(p,l,b.easing).animate(q,l,b.easing);e.animate(p,l,b.easing).animate(o,l/2,b.easing).queue(function(){"hide"===g&&e.hide(),a.effects.restore(e,f),a.effects.removeWrapper(e),c()}),s>1&&r.splice.apply(r,[1,0].concat(r.splice(s,k+1))),e.dequeue()},a.effects.effect.slide=function(b,c){var d,e=a(this),f=["position","top","bottom","left","right","width","height"],g=a.effects.setMode(e,b.mode||"show"),h="show"===g,i=b.direction||"left",j="up"===i||"down"===i?"top":"left",k="up"===i||"left"===i,l={};a.effects.save(e,f),e.show(),d=b.distance||e["top"===j?"outerHeight":"outerWidth"](!0),a.effects.createWrapper(e).css({overflow:"hidden"}),h&&e.css(j,k?isNaN(d)?"-"+d:-d:d),l[j]=(h?k?"+=":"-=":k?"-=":"+=")+d,e.animate(l,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){"hide"===g&&e.hide(),a.effects.restore(e,f),a.effects.removeWrapper(e),c()}})},a.effects.effect.transfer=function(b,c){var d=a(this),e=a(b.to),f="fixed"===e.css("position"),g=a("body"),h=f?g.scrollTop():0,i=f?g.scrollLeft():0,j=e.offset(),k={top:j.top-h,left:j.left-i,height:e.innerHeight(),width:e.innerWidth()},l=d.offset(),m=a("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(b.className).css({top:l.top-h,left:l.left-i,height:d.innerHeight(),width:d.innerWidth(),position:f?"fixed":"absolute"}).animate(k,b.duration,b.easing,function(){m.remove(),c()})},a.widget("ui.progressbar",{version:"1.11.4",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=a("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(a){return void 0===a?this.options.value:(this.options.value=this._constrainedValue(a),void this._refreshValue())},_constrainedValue:function(a){return void 0===a&&(a=this.options.value),this.indeterminate=a===!1,"number"!=typeof a&&(a=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,a))},_setOptions:function(a){var b=a.value;delete a.value,this._super(a),this.options.value=this._constrainedValue(b),this._refreshValue()},_setOption:function(a,b){"max"===a&&(b=Math.max(this.min,b)),"disabled"===a&&this.element.toggleClass("ui-state-disabled",!!b).attr("aria-disabled",b),this._super(a,b)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var b=this.options.value,c=this._percentage();this.valueDiv.toggle(this.indeterminate||b>this.min).toggleClass("ui-corner-right",b===this.options.max).width(c.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=a("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":b}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==b&&(this.oldValue=b,this._trigger("change")),b===this.options.max&&this._trigger("complete")}}),a.widget("ui.selectable",a.ui.mouse,{version:"1.11.4",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var b,c=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){b=a(c.options.filter,c.element[0]),b.addClass("ui-selectee"),
b.each(function(){var b=a(this),c=b.offset();a.data(this,"selectable-item",{element:this,$element:b,left:c.left,top:c.top,right:c.left+b.outerWidth(),bottom:c.top+b.outerHeight(),startselected:!1,selected:b.hasClass("ui-selected"),selecting:b.hasClass("ui-selecting"),unselecting:b.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=b.addClass("ui-selectee"),this._mouseInit(),this.helper=a("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(b){var c=this,d=this.options;this.opos=[b.pageX,b.pageY],this.options.disabled||(this.selectees=a(d.filter,this.element[0]),this._trigger("start",b),a(d.appendTo).append(this.helper),this.helper.css({left:b.pageX,top:b.pageY,width:0,height:0}),d.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var d=a.data(this,"selectable-item");d.startselected=!0,b.metaKey||b.ctrlKey||(d.$element.removeClass("ui-selected"),d.selected=!1,d.$element.addClass("ui-unselecting"),d.unselecting=!0,c._trigger("unselecting",b,{unselecting:d.element}))}),a(b.target).parents().addBack().each(function(){var d,e=a.data(this,"selectable-item");return e?(d=!b.metaKey&&!b.ctrlKey||!e.$element.hasClass("ui-selected"),e.$element.removeClass(d?"ui-unselecting":"ui-selected").addClass(d?"ui-selecting":"ui-unselecting"),e.unselecting=!d,e.selecting=d,e.selected=d,d?c._trigger("selecting",b,{selecting:e.element}):c._trigger("unselecting",b,{unselecting:e.element}),!1):void 0}))},_mouseDrag:function(b){if(this.dragged=!0,!this.options.disabled){var c,d=this,e=this.options,f=this.opos[0],g=this.opos[1],h=b.pageX,i=b.pageY;return f>h&&(c=h,h=f,f=c),g>i&&(c=i,i=g,g=c),this.helper.css({left:f,top:g,width:h-f,height:i-g}),this.selectees.each(function(){var c=a.data(this,"selectable-item"),j=!1;c&&c.element!==d.element[0]&&("touch"===e.tolerance?j=!(c.left>h||c.right<f||c.top>i||c.bottom<g):"fit"===e.tolerance&&(j=c.left>f&&c.right<h&&c.top>g&&c.bottom<i),j?(c.selected&&(c.$element.removeClass("ui-selected"),c.selected=!1),c.unselecting&&(c.$element.removeClass("ui-unselecting"),c.unselecting=!1),c.selecting||(c.$element.addClass("ui-selecting"),c.selecting=!0,d._trigger("selecting",b,{selecting:c.element}))):(c.selecting&&((b.metaKey||b.ctrlKey)&&c.startselected?(c.$element.removeClass("ui-selecting"),c.selecting=!1,c.$element.addClass("ui-selected"),c.selected=!0):(c.$element.removeClass("ui-selecting"),c.selecting=!1,c.startselected&&(c.$element.addClass("ui-unselecting"),c.unselecting=!0),d._trigger("unselecting",b,{unselecting:c.element}))),c.selected&&(b.metaKey||b.ctrlKey||c.startselected||(c.$element.removeClass("ui-selected"),c.selected=!1,c.$element.addClass("ui-unselecting"),c.unselecting=!0,d._trigger("unselecting",b,{unselecting:c.element})))))}),!1}},_mouseStop:function(b){var c=this;return this.dragged=!1,a(".ui-unselecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-unselecting"),d.unselecting=!1,d.startselected=!1,c._trigger("unselected",b,{unselected:d.element})}),a(".ui-selecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-selecting").addClass("ui-selected"),d.selecting=!1,d.selected=!0,d.startselected=!0,c._trigger("selected",b,{selected:d.element})}),this._trigger("stop",b),this.helper.remove(),!1}}),a.widget("ui.selectmenu",{version:"1.11.4",defaultElement:"<select>",options:{appendTo:null,disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:null,change:null,close:null,focus:null,open:null,select:null},_create:function(){var a=this.element.uniqueId().attr("id");this.ids={element:a,button:a+"-button",menu:a+"-menu"},this._drawButton(),this._drawMenu(),this.options.disabled&&this.disable()},_drawButton:function(){var b=this;this.label=a("label[for='"+this.ids.element+"']").attr("for",this.ids.button),this._on(this.label,{click:function(a){this.button.focus(),a.preventDefault()}}),this.element.hide(),this.button=a("<span>",{"class":"ui-selectmenu-button ui-widget ui-state-default ui-corner-all",tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true"}).insertAfter(this.element),a("<span>",{"class":"ui-icon "+this.options.icons.button}).prependTo(this.button),this.buttonText=a("<span>",{"class":"ui-selectmenu-text"}).appendTo(this.button),this._setText(this.buttonText,this.element.find("option:selected").text()),this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){b.menuItems||b._refreshMenu()}),this._hoverable(this.button),this._focusable(this.button)},_drawMenu:function(){var b=this;this.menu=a("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=a("<div>",{"class":"ui-selectmenu-menu ui-front"}).append(this.menu).appendTo(this._appendTo()),this.menuInstance=this.menu.menu({role:"listbox",select:function(a,c){a.preventDefault(),b._setSelection(),b._select(c.item.data("ui-selectmenu-item"),a)},focus:function(a,c){var d=c.item.data("ui-selectmenu-item");null!=b.focusIndex&&d.index!==b.focusIndex&&(b._trigger("focus",a,{item:d}),b.isOpen||b._select(d,a)),b.focusIndex=d.index,b.button.attr("aria-activedescendant",b.menuItems.eq(d.index).attr("id"))}}).menu("instance"),this.menu.addClass("ui-corner-bottom").removeClass("ui-corner-all"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this._setText(this.buttonText,this._getSelectedItem().text()),this.options.width||this._resizeButton()},_refreshMenu:function(){this.menu.empty();var a,b=this.element.find("option");b.length&&(this._parseOptions(b),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup"),a=this._getSelectedItem(),this.menuInstance.focus(null,a),this._setAria(a.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(a){this.options.disabled||(this.menuItems?(this.menu.find(".ui-state-focus").removeClass("ui-state-focus"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",a))},_position:function(){this.menuWrap.position(a.extend({of:this.button},this.options.position))},close:function(a){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",a))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderMenu:function(b,c){var d=this,e="";a.each(c,function(c,f){f.optgroup!==e&&(a("<li>",{"class":"ui-selectmenu-optgroup ui-menu-divider"+(f.element.parent("optgroup").prop("disabled")?" ui-state-disabled":""),text:f.optgroup}).appendTo(b),e=f.optgroup),d._renderItemData(b,f)})},_renderItemData:function(a,b){return this._renderItem(a,b).data("ui-selectmenu-item",b)},_renderItem:function(b,c){var d=a("<li>");return c.disabled&&d.addClass("ui-state-disabled"),this._setText(d,c.label),d.appendTo(b)},_setText:function(a,b){b?a.text(b):a.html("&#160;")},_move:function(a,b){var c,d,e=".ui-menu-item";this.isOpen?c=this.menuItems.eq(this.focusIndex):(c=this.menuItems.eq(this.element[0].selectedIndex),e+=":not(.ui-state-disabled)"),d="first"===a||"last"===a?c["first"===a?"prevAll":"nextAll"](e).eq(-1):c[a+"All"](e).eq(0),d.length&&this.menuInstance.focus(b,d)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex)},_toggle:function(a){this[this.isOpen?"close":"open"](a)},_setSelection:function(){var a;this.range&&(window.getSelection?(a=window.getSelection(),a.removeAllRanges(),a.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(b){this.isOpen&&(a(b.target).closest(".ui-selectmenu-menu, #"+this.ids.button).length||this.close(b))}},_buttonEvents:{mousedown:function(){var a;window.getSelection?(a=window.getSelection(),a.rangeCount&&(this.range=a.getRangeAt(0))):this.range=document.selection.createRange()},click:function(a){this._setSelection(),this._toggle(a)},keydown:function(b){var c=!0;switch(b.keyCode){case a.ui.keyCode.TAB:case a.ui.keyCode.ESCAPE:this.close(b),c=!1;break;case a.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(b);break;case a.ui.keyCode.UP:b.altKey?this._toggle(b):this._move("prev",b);break;case a.ui.keyCode.DOWN:b.altKey?this._toggle(b):this._move("next",b);break;case a.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(b):this._toggle(b);break;case a.ui.keyCode.LEFT:this._move("prev",b);break;case a.ui.keyCode.RIGHT:this._move("next",b);break;case a.ui.keyCode.HOME:case a.ui.keyCode.PAGE_UP:this._move("first",b);break;case a.ui.keyCode.END:case a.ui.keyCode.PAGE_DOWN:this._move("last",b);break;default:this.menu.trigger(b),c=!1}c&&b.preventDefault()}},_selectFocusedItem:function(a){var b=this.menuItems.eq(this.focusIndex);b.hasClass("ui-state-disabled")||this._select(b.data("ui-selectmenu-item"),a)},_select:function(a,b){var c=this.element[0].selectedIndex;this.element[0].selectedIndex=a.index,this._setText(this.buttonText,a.label),this._setAria(a),this._trigger("select",b,{item:a}),a.index!==c&&this._trigger("change",b,{item:a}),this.close(b)},_setAria:function(a){var b=this.menuItems.eq(a.index).attr("id");this.button.attr({"aria-labelledby":b,"aria-activedescendant":b}),this.menu.attr("aria-activedescendant",b)},_setOption:function(a,b){"icons"===a&&this.button.find("span.ui-icon").removeClass(this.options.icons.button).addClass(b.button),this._super(a,b),"appendTo"===a&&this.menuWrap.appendTo(this._appendTo()),"disabled"===a&&(this.menuInstance.option("disabled",b),this.button.toggleClass("ui-state-disabled",b).attr("aria-disabled",b),this.element.prop("disabled",b),b?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)),"width"===a&&this._resizeButton()},_appendTo:function(){var b=this.options.appendTo;return b&&(b=b.jquery||b.nodeType?a(b):this.document.find(b).eq(0)),b&&b[0]||(b=this.element.closest(".ui-front")),b.length||(b=this.document[0].body),b},_toggleAttr:function(){this.button.toggleClass("ui-corner-top",this.isOpen).toggleClass("ui-corner-all",!this.isOpen).attr("aria-expanded",this.isOpen),this.menuWrap.toggleClass("ui-selectmenu-open",this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var a=this.options.width;a||(a=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(a)},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){return{disabled:this.element.prop("disabled")}},_parseOptions:function(b){var c=[];b.each(function(b,d){var e=a(d),f=e.parent("optgroup");c.push({element:e,index:b,value:e.val(),label:e.text(),optgroup:f.attr("label")||"",disabled:f.prop("disabled")||e.prop("disabled")})}),this.items=c},_destroy:function(){this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.label.attr("for",this.ids.element)}}),a.widget("ui.slider",a.ui.mouse,{version:"1.11.4",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var b,c,d=this.options,e=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),f="<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>",g=[];for(c=d.values&&d.values.length||1,e.length>c&&(e.slice(c).remove(),e=e.slice(0,c)),b=e.length;c>b;b++)g.push(f);this.handles=e.add(a(g.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(b){a(this).data("ui-slider-handle-index",b)})},_createRange:function(){var b=this.options,c="";b.range?(b.range===!0&&(b.values?b.values.length&&2!==b.values.length?b.values=[b.values[0],b.values[0]]:a.isArray(b.values)&&(b.values=b.values.slice(0)):b.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=a("<div></div>").appendTo(this.element),c="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(c+("min"===b.range||"max"===b.range?" ui-slider-range-"+b.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(b){var c,d,e,f,g,h,i,j,k=this,l=this.options;return l.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),c={x:b.pageX,y:b.pageY},d=this._normValueFromMouse(c),e=this._valueMax()-this._valueMin()+1,this.handles.each(function(b){var c=Math.abs(d-k.values(b));(e>c||e===c&&(b===k._lastChangedValue||k.values(b)===l.min))&&(e=c,f=a(this),g=b)}),h=this._start(b,g),h===!1?!1:(this._mouseSliding=!0,this._handleIndex=g,f.addClass("ui-state-active").focus(),i=f.offset(),j=!a(b.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=j?{left:0,top:0}:{left:b.pageX-i.left-f.width()/2,top:b.pageY-i.top-f.height()/2-(parseInt(f.css("borderTopWidth"),10)||0)-(parseInt(f.css("borderBottomWidth"),10)||0)+(parseInt(f.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(b,g,d),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(a){var b={x:a.pageX,y:a.pageY},c=this._normValueFromMouse(b);return this._slide(a,this._handleIndex,c),!1},_mouseStop:function(a){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(a,this._handleIndex),this._change(a,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(a){var b,c,d,e,f;return"horizontal"===this.orientation?(b=this.elementSize.width,c=a.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(b=this.elementSize.height,c=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),d=c/b,d>1&&(d=1),0>d&&(d=0),"vertical"===this.orientation&&(d=1-d),e=this._valueMax()-this._valueMin(),f=this._valueMin()+d*e,this._trimAlignValue(f)},_start:function(a,b){var c={handle:this.handles[b],value:this.value()};return this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("start",a,c)},_slide:function(a,b,c){var d,e,f;this.options.values&&this.options.values.length?(d=this.values(b?0:1),2===this.options.values.length&&this.options.range===!0&&(0===b&&c>d||1===b&&d>c)&&(c=d),c!==this.values(b)&&(e=this.values(),e[b]=c,f=this._trigger("slide",a,{handle:this.handles[b],value:c,values:e}),d=this.values(b?0:1),f!==!1&&this.values(b,c))):c!==this.value()&&(f=this._trigger("slide",a,{handle:this.handles[b],value:c}),f!==!1&&this.value(c))},_stop:function(a,b){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("stop",a,c)},_change:function(a,b){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._lastChangedValue=b,this._trigger("change",a,c)}},value:function(a){return arguments.length?(this.options.value=this._trimAlignValue(a),this._refreshValue(),void this._change(null,0)):this._value()},values:function(b,c){var d,e,f;if(arguments.length>1)return this.options.values[b]=this._trimAlignValue(c),this._refreshValue(),void this._change(null,b);if(!arguments.length)return this._values();if(!a.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(b):this.value();for(d=this.options.values,e=arguments[0],f=0;f<d.length;f+=1)d[f]=this._trimAlignValue(e[f]),this._change(null,f);this._refreshValue()},_setOption:function(b,c){var d,e=0;switch("range"===b&&this.options.range===!0&&("min"===c?(this.options.value=this._values(0),this.options.values=null):"max"===c&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),a.isArray(this.options.values)&&(e=this.options.values.length),"disabled"===b&&this.element.toggleClass("ui-state-disabled",!!c),this._super(b,c),b){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue(),this.handles.css("horizontal"===c?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),d=0;e>d;d+=1)this._change(null,d);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var a=this.options.value;return a=this._trimAlignValue(a)},_values:function(a){var b,c,d;if(arguments.length)return b=this.options.values[a],b=this._trimAlignValue(b);if(this.options.values&&this.options.values.length){for(c=this.options.values.slice(),d=0;d<c.length;d+=1)c[d]=this._trimAlignValue(c[d]);return c}return[]},_trimAlignValue:function(a){if(a<=this._valueMin())return this._valueMin();if(a>=this._valueMax())return this._valueMax();var b=this.options.step>0?this.options.step:1,c=(a-this._valueMin())%b,d=a-c;return 2*Math.abs(c)>=b&&(d+=c>0?b:-b),parseFloat(d.toFixed(5))},_calculateNewMax:function(){var a=this.options.max,b=this._valueMin(),c=this.options.step,d=Math.floor(+(a-b).toFixed(this._precision())/c)*c;a=d+b,this.max=parseFloat(a.toFixed(this._precision()))},_precision:function(){var a=this._precisionOf(this.options.step);return null!==this.options.min&&(a=Math.max(a,this._precisionOf(this.options.min))),a},_precisionOf:function(a){var b=a.toString(),c=b.indexOf(".");return-1===c?0:b.length-c-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshValue:function(){var b,c,d,e,f,g=this.options.range,h=this.options,i=this,j=this._animateOff?!1:h.animate,k={};this.options.values&&this.options.values.length?this.handles.each(function(d){c=(i.values(d)-i._valueMin())/(i._valueMax()-i._valueMin())*100,k["horizontal"===i.orientation?"left":"bottom"]=c+"%",a(this).stop(1,1)[j?"animate":"css"](k,h.animate),i.options.range===!0&&("horizontal"===i.orientation?(0===d&&i.range.stop(1,1)[j?"animate":"css"]({left:c+"%"},h.animate),1===d&&i.range[j?"animate":"css"]({width:c-b+"%"},{queue:!1,duration:h.animate})):(0===d&&i.range.stop(1,1)[j?"animate":"css"]({bottom:c+"%"},h.animate),1===d&&i.range[j?"animate":"css"]({height:c-b+"%"},{queue:!1,duration:h.animate}))),b=c}):(d=this.value(),e=this._valueMin(),f=this._valueMax(),c=f!==e?(d-e)/(f-e)*100:0,k["horizontal"===this.orientation?"left":"bottom"]=c+"%",this.handle.stop(1,1)[j?"animate":"css"](k,h.animate),"min"===g&&"horizontal"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({width:c+"%"},h.animate),"max"===g&&"horizontal"===this.orientation&&this.range[j?"animate":"css"]({width:100-c+"%"},{queue:!1,duration:h.animate}),"min"===g&&"vertical"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({height:c+"%"},h.animate),"max"===g&&"vertical"===this.orientation&&this.range[j?"animate":"css"]({height:100-c+"%"},{queue:!1,duration:h.animate}))},_handleEvents:{keydown:function(b){var c,d,e,f,g=a(b.target).data("ui-slider-handle-index");switch(b.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(b.preventDefault(),!this._keySliding&&(this._keySliding=!0,a(b.target).addClass("ui-state-active"),c=this._start(b,g),c===!1))return}switch(f=this.options.step,d=e=this.options.values&&this.options.values.length?this.values(g):this.value(),b.keyCode){case a.ui.keyCode.HOME:e=this._valueMin();break;case a.ui.keyCode.END:e=this._valueMax();break;case a.ui.keyCode.PAGE_UP:e=this._trimAlignValue(d+(this._valueMax()-this._valueMin())/this.numPages);break;case a.ui.keyCode.PAGE_DOWN:e=this._trimAlignValue(d-(this._valueMax()-this._valueMin())/this.numPages);break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(d===this._valueMax())return;e=this._trimAlignValue(d+f);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(d===this._valueMin())return;e=this._trimAlignValue(d-f)}this._slide(b,g,e)},keyup:function(b){var c=a(b.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(b,c),this._change(b,c),a(b.target).removeClass("ui-state-active"))}}}),a.widget("ui.sortable",a.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(a,b,c){return a>=b&&b+c>a},_isFloating:function(a){return/left|right/.test(a.css("float"))||/inline|table-cell/.test(a.css("display"))},_create:function(){this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(a,b){this._super(a,b),"handle"===a&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),a.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var a=this.items.length-1;a>=0;a--)this.items[a].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(b,c){var d=null,e=!1,f=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(b),a(b.target).parents().each(function(){return a.data(this,f.widgetName+"-item")===f?(d=a(this),!1):void 0}),a.data(b.target,f.widgetName+"-item")===f&&(d=a(b.target)),d&&(!this.options.handle||c||(a(this.options.handle,d).find("*").addBack().each(function(){this===b.target&&(e=!0)}),e))?(this.currentItem=d,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(b,c,d){var e,f,g=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(b),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,g.cursorAt&&this._adjustOffsetFromHelper(g.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),g.containment&&this._setContainment(),g.cursor&&"auto"!==g.cursor&&(f=this.document.find("body"),this.storedCursor=f.css("cursor"),f.css("cursor",g.cursor),this.storedStylesheet=a("<style>*{ cursor: "+g.cursor+" !important; }</style>").appendTo(f)),g.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",g.opacity)),g.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",g.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",b,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!d)for(e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("activate",b,this._uiHash(this));return a.ui.ddmanager&&(a.ui.ddmanager.current=this),a.ui.ddmanager&&!g.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(b),!0},_mouseDrag:function(b){var c,d,e,f,g=this.options,h=!1;for(this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<g.scrollSensitivity?this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop+g.scrollSpeed:b.pageY-this.overflowOffset.top<g.scrollSensitivity&&(this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop-g.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<g.scrollSensitivity?this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft+g.scrollSpeed:b.pageX-this.overflowOffset.left<g.scrollSensitivity&&(this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft-g.scrollSpeed)):(b.pageY-this.document.scrollTop()<g.scrollSensitivity?h=this.document.scrollTop(this.document.scrollTop()-g.scrollSpeed):this.window.height()-(b.pageY-this.document.scrollTop())<g.scrollSensitivity&&(h=this.document.scrollTop(this.document.scrollTop()+g.scrollSpeed)),b.pageX-this.document.scrollLeft()<g.scrollSensitivity?h=this.document.scrollLeft(this.document.scrollLeft()-g.scrollSpeed):this.window.width()-(b.pageX-this.document.scrollLeft())<g.scrollSensitivity&&(h=this.document.scrollLeft(this.document.scrollLeft()+g.scrollSpeed))),h!==!1&&a.ui.ddmanager&&!g.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),c=this.items.length-1;c>=0;c--)if(d=this.items[c],e=d.item[0],f=this._intersectsWithPointer(d),f&&d.instance===this.currentContainer&&e!==this.currentItem[0]&&this.placeholder[1===f?"next":"prev"]()[0]!==e&&!a.contains(this.placeholder[0],e)&&("semi-dynamic"===this.options.type?!a.contains(this.element[0],e):!0)){if(this.direction=1===f?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(d))break;this._rearrange(b,d),this._trigger("change",b,this._uiHash());break}return this._contactContainers(b),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),this._trigger("sort",b,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(b,c){if(b){if(a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b),this.options.revert){var d=this,e=this.placeholder.offset(),f=this.options.axis,g={};f&&"x"!==f||(g.left=e.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),f&&"y"!==f||(g.top=e.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,a(this.helper).animate(g,parseInt(this.options.revert,10)||500,function(){d._clear(b)})}else this._clear(b,c);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var b=this.containers.length-1;b>=0;b--)this.containers[b]._trigger("deactivate",null,this._uiHash(this)),this.containers[b].containerCache.over&&(this.containers[b]._trigger("out",null,this._uiHash(this)),this.containers[b].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},a(c).each(function(){var c=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[\-=_](.+)/);c&&d.push((b.key||c[1]+"[]")+"="+(b.key&&b.expression?c[1]:c[2]))}),!d.length&&b.key&&d.push(b.key+"="),d.join("&")},toArray:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},c.each(function(){d.push(a(b.item||this).attr(b.attribute||"id")||"")}),d},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,d=this.positionAbs.top,e=d+this.helperProportions.height,f=a.left,g=f+a.width,h=a.top,i=h+a.height,j=this.offset.click.top,k=this.offset.click.left,l="x"===this.options.axis||d+j>h&&i>d+j,m="y"===this.options.axis||b+k>f&&g>b+k,n=l&&m;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?n:f<b+this.helperProportions.width/2&&c-this.helperProportions.width/2<g&&h<d+this.helperProportions.height/2&&e-this.helperProportions.height/2<i},_intersectsWithPointer:function(a){var b="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,a.top,a.height),c="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,a.left,a.width),d=b&&c,e=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();return d?this.floating?f&&"right"===f||"down"===e?2:1:e&&("down"===e?2:1):!1},_intersectsWithSides:function(a){var b=this._isOverAxis(this.positionAbs.top+this.offset.click.top,a.top+a.height/2,a.height),c=this._isOverAxis(this.positionAbs.left+this.offset.click.left,a.left+a.width/2,a.width),d=this._getDragVerticalDirection(),e=this._getDragHorizontalDirection();return this.floating&&e?"right"===e&&c||"left"===e&&!c:d&&("down"===d&&b||"up"===d&&!b);
},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return 0!==a&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!==a&&(a>0?"right":"left")},refresh:function(a){return this._refreshItems(a),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var a=this.options;return a.connectWith.constructor===String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(b){function c(){h.push(this)}var d,e,f,g,h=[],i=[],j=this._connectWith();if(j&&b)for(d=j.length-1;d>=0;d--)for(f=a(j[d],this.document[0]),e=f.length-1;e>=0;e--)g=a.data(f[e],this.widgetFullName),g&&g!==this&&!g.options.disabled&&i.push([a.isFunction(g.options.items)?g.options.items.call(g.element):a(g.options.items,g.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),g]);for(i.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),d=i.length-1;d>=0;d--)i[d][0].each(c);return a(h)},_removeCurrentsFromItems:function(){var b=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=a.grep(this.items,function(a){for(var c=0;c<b.length;c++)if(b[c]===a.item[0])return!1;return!0})},_refreshItems:function(b){this.items=[],this.containers=[this];var c,d,e,f,g,h,i,j,k=this.items,l=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]],m=this._connectWith();if(m&&this.ready)for(c=m.length-1;c>=0;c--)for(e=a(m[c],this.document[0]),d=e.length-1;d>=0;d--)f=a.data(e[d],this.widgetFullName),f&&f!==this&&!f.options.disabled&&(l.push([a.isFunction(f.options.items)?f.options.items.call(f.element[0],b,{item:this.currentItem}):a(f.options.items,f.element),f]),this.containers.push(f));for(c=l.length-1;c>=0;c--)for(g=l[c][1],h=l[c][0],d=0,j=h.length;j>d;d++)i=a(h[d]),i.data(this.widgetName+"-item",g),k.push({item:i,instance:g,width:0,height:0,left:0,top:0})},refreshPositions:function(b){this.floating=this.items.length?"x"===this.options.axis||this._isFloating(this.items[0].item):!1,this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var c,d,e,f;for(c=this.items.length-1;c>=0;c--)d=this.items[c],d.instance!==this.currentContainer&&this.currentContainer&&d.item[0]!==this.currentItem[0]||(e=this.options.toleranceElement?a(this.options.toleranceElement,d.item):d.item,b||(d.width=e.outerWidth(),d.height=e.outerHeight()),f=e.offset(),d.left=f.left,d.top=f.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(c=this.containers.length-1;c>=0;c--)f=this.containers[c].element.offset(),this.containers[c].containerCache.left=f.left,this.containers[c].containerCache.top=f.top,this.containers[c].containerCache.width=this.containers[c].element.outerWidth(),this.containers[c].containerCache.height=this.containers[c].element.outerHeight();return this},_createPlaceholder:function(b){b=b||this;var c,d=b.options;d.placeholder&&d.placeholder.constructor!==String||(c=d.placeholder,d.placeholder={element:function(){var d=b.currentItem[0].nodeName.toLowerCase(),e=a("<"+d+">",b.document[0]).addClass(c||b.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tbody"===d?b._createTrPlaceholder(b.currentItem.find("tr").eq(0),a("<tr>",b.document[0]).appendTo(e)):"tr"===d?b._createTrPlaceholder(b.currentItem,e):"img"===d&&e.attr("src",b.currentItem.attr("src")),c||e.css("visibility","hidden"),e},update:function(a,e){c&&!d.forcePlaceholderSize||(e.height()||e.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10)),e.width()||e.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||0,10)))}}),b.placeholder=a(d.placeholder.element.call(b.element,b.currentItem)),b.currentItem.after(b.placeholder),d.placeholder.update(b,b.placeholder)},_createTrPlaceholder:function(b,c){var d=this;b.children().each(function(){a("<td>&#160;</td>",d.document[0]).attr("colspan",a(this).attr("colspan")||1).appendTo(c)})},_contactContainers:function(b){var c,d,e,f,g,h,i,j,k,l,m=null,n=null;for(c=this.containers.length-1;c>=0;c--)if(!a.contains(this.currentItem[0],this.containers[c].element[0]))if(this._intersectsWith(this.containers[c].containerCache)){if(m&&a.contains(this.containers[c].element[0],m.element[0]))continue;m=this.containers[c],n=c}else this.containers[c].containerCache.over&&(this.containers[c]._trigger("out",b,this._uiHash(this)),this.containers[c].containerCache.over=0);if(m)if(1===this.containers.length)this.containers[n].containerCache.over||(this.containers[n]._trigger("over",b,this._uiHash(this)),this.containers[n].containerCache.over=1);else{for(e=1e4,f=null,k=m.floating||this._isFloating(this.currentItem),g=k?"left":"top",h=k?"width":"height",l=k?"clientX":"clientY",d=this.items.length-1;d>=0;d--)a.contains(this.containers[n].element[0],this.items[d].item[0])&&this.items[d].item[0]!==this.currentItem[0]&&(i=this.items[d].item.offset()[g],j=!1,b[l]-i>this.items[d][h]/2&&(j=!0),Math.abs(b[l]-i)<e&&(e=Math.abs(b[l]-i),f=this.items[d],this.direction=j?"up":"down"));if(!f&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[n])return void(this.currentContainer.containerCache.over||(this.containers[n]._trigger("over",b,this._uiHash()),this.currentContainer.containerCache.over=1));f?this._rearrange(b,f,null,!0):this._rearrange(b,null,this.containers[n].element,!0),this._trigger("change",b,this._uiHash()),this.containers[n]._trigger("change",b,this._uiHash(this)),this.currentContainer=this.containers[n],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[n]._trigger("over",b,this._uiHash(this)),this.containers[n].containerCache.over=1}},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b,this.currentItem])):"clone"===c.helper?this.currentItem.clone():this.currentItem;return d.parents("body").length||a("parent"!==c.appendTo?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(d[0]),d[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),d[0].style.width&&!c.forceHelperSize||d.width(this.currentItem.width()),d[0].style.height&&!c.forceHelperSize||d.height(this.currentItem.height()),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options;"parent"===e.containment&&(e.containment=this.helper[0].parentNode),"document"!==e.containment&&"window"!==e.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===e.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===e.containment?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(e.containment)||(b=a(e.containment)[0],c=a(e.containment).offset(),d="hidden"!==a(b).css("overflow"),this.containment=[c.left+(parseInt(a(b).css("borderLeftWidth"),10)||0)+(parseInt(a(b).css("paddingLeft"),10)||0)-this.margins.left,c.top+(parseInt(a(b).css("borderTopWidth"),10)||0)+(parseInt(a(b).css("paddingTop"),10)||0)-this.margins.top,c.left+(d?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(a(b).css("borderLeftWidth"),10)||0)-(parseInt(a(b).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,c.top+(d?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(a(b).css("borderTopWidth"),10)||0)-(parseInt(a(b).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"===b?1:-1,e="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(e[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():f?0:e.scrollTop())*d,left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*d}},_generatePosition:function(b){var c,d,e=this.options,f=b.pageX,g=b.pageY,h="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(h[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(g=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(g=this.containment[3]+this.offset.click.top)),e.grid&&(c=this.originalPageY+Math.round((g-this.originalPageY)/e.grid[1])*e.grid[1],g=this.containment?c-this.offset.click.top>=this.containment[1]&&c-this.offset.click.top<=this.containment[3]?c:c-this.offset.click.top>=this.containment[1]?c-e.grid[1]:c+e.grid[1]:c,d=this.originalPageX+Math.round((f-this.originalPageX)/e.grid[0])*e.grid[0],f=this.containment?d-this.offset.click.left>=this.containment[0]&&d-this.offset.click.left<=this.containment[2]?d:d-this.offset.click.left>=this.containment[0]?d-e.grid[0]:d+e.grid[0]:d)),{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():i?0:h.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():i?0:h.scrollLeft())}},_rearrange:function(a,b,c,d){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?b.item[0]:b.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var e=this.counter;this._delay(function(){e===this.counter&&this.refreshPositions(!d)})},_clear:function(a,b){function c(a,b,c){return function(d){c._trigger(a,d,b._uiHash(b))}}this.reverting=!1;var d,e=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(d in this._storedCSS)"auto"!==this._storedCSS[d]&&"static"!==this._storedCSS[d]||(this._storedCSS[d]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!b&&e.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||b||e.push(function(a){this._trigger("update",a,this._uiHash())}),this!==this.currentContainer&&(b||(e.push(function(a){this._trigger("remove",a,this._uiHash())}),e.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.currentContainer)),e.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.currentContainer)))),d=this.containers.length-1;d>=0;d--)b||e.push(c("deactivate",this,this.containers[d])),this.containers[d].containerCache.over&&(e.push(c("out",this,this.containers[d])),this.containers[d].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,b||this._trigger("beforeStop",a,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!b){for(d=0;d<e.length;d++)e[d].call(this,a);this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){a.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(b){var c=b||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:b?b.element:null}}}),a.widget("ui.spinner",{version:"1.11.4",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var b={},c=this.element;return a.each(["min","max","step"],function(a,d){var e=c.attr(d);void 0!==e&&e.length&&(b[d]=e)}),b},_events:{keydown:function(a){this._start(a)&&this._keydown(a)&&a.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(a){return this.cancelBlur?void delete this.cancelBlur:(this._stop(),this._refresh(),void(this.previous!==this.element.val()&&this._trigger("change",a)))},mousewheel:function(a,b){if(b){if(!this.spinning&&!this._start(a))return!1;this._spin((b>0?1:-1)*this.options.step,a),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(a)},100),a.preventDefault()}},"mousedown .ui-spinner-button":function(b){function c(){var a=this.element[0]===this.document[0].activeElement;a||(this.element.focus(),this.previous=d,this._delay(function(){this.previous=d}))}var d;d=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),b.preventDefault(),c.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,c.call(this)}),this._start(b)!==!1&&this._repeat(null,a(b.currentTarget).hasClass("ui-spinner-up")?1:-1,b)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(b){return a(b.currentTarget).hasClass("ui-state-active")?this._start(b)===!1?!1:void this._repeat(null,a(b.currentTarget).hasClass("ui-spinner-up")?1:-1,b):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var a=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=a.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*a.height())&&a.height()>0&&a.height(a.height()),this.options.disabled&&this.disable()},_keydown:function(b){var c=this.options,d=a.ui.keyCode;switch(b.keyCode){case d.UP:return this._repeat(null,1,b),!0;case d.DOWN:return this._repeat(null,-1,b),!0;case d.PAGE_UP:return this._repeat(null,c.page,b),!0;case d.PAGE_DOWN:return this._repeat(null,-c.page,b),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(a){return this.spinning||this._trigger("start",a)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(a,b,c){a=a||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,b,c)},a),this._spin(b*this.options.step,c)},_spin:function(a,b){var c=this.value()||0;this.counter||(this.counter=1),c=this._adjustValue(c+a*this._increment(this.counter)),this.spinning&&this._trigger("spin",b,{value:c})===!1||(this._value(c),this.counter++)},_increment:function(b){var c=this.options.incremental;return c?a.isFunction(c)?c(b):Math.floor(b*b*b/5e4-b*b/500+17*b/200+1):1},_precision:function(){var a=this._precisionOf(this.options.step);return null!==this.options.min&&(a=Math.max(a,this._precisionOf(this.options.min))),a},_precisionOf:function(a){var b=a.toString(),c=b.indexOf(".");return-1===c?0:b.length-c-1},_adjustValue:function(a){var b,c,d=this.options;return b=null!==d.min?d.min:0,c=a-b,c=Math.round(c/d.step)*d.step,a=b+c,a=parseFloat(a.toFixed(this._precision())),null!==d.max&&a>d.max?d.max:null!==d.min&&a<d.min?d.min:a},_stop:function(a){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",a))},_setOption:function(a,b){if("culture"===a||"numberFormat"===a){var c=this._parse(this.element.val());return this.options[a]=b,void this.element.val(this._format(c))}"max"!==a&&"min"!==a&&"step"!==a||"string"==typeof b&&(b=this._parse(b)),"icons"===a&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(b.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(b.down)),this._super(a,b),"disabled"===a&&(this.widget().toggleClass("ui-state-disabled",!!b),this.element.prop("disabled",!!b),this.buttons.button(b?"disable":"enable"))},_setOptions:i(function(a){this._super(a)}),_parse:function(a){return"string"==typeof a&&""!==a&&(a=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(a,10,this.options.culture):+a),""===a||isNaN(a)?null:a},_format:function(a){return""===a?"":window.Globalize&&this.options.numberFormat?Globalize.format(a,this.options.numberFormat,this.options.culture):a},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var a=this.value();return null===a?!1:a===this._adjustValue(a)},_value:function(a,b){var c;""!==a&&(c=this._parse(a),null!==c&&(b||(c=this._adjustValue(c)),a=this._format(c))),this.element.val(a),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:i(function(a){this._stepUp(a)}),_stepUp:function(a){this._start()&&(this._spin((a||1)*this.options.step),this._stop())},stepDown:i(function(a){this._stepDown(a)}),_stepDown:function(a){this._start()&&(this._spin((a||1)*-this.options.step),this._stop())},pageUp:i(function(a){this._stepUp((a||1)*this.options.page)}),pageDown:i(function(a){this._stepDown((a||1)*this.options.page)}),value:function(a){return arguments.length?void i(this._value).call(this,a):this._parse(this.element.val())},widget:function(){return this.uiSpinner}}),a.widget("ui.tabs",{version:"1.11.4",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var a=/#.*$/;return function(b){var c,d;b=b.cloneNode(!1),c=b.href.replace(a,""),d=location.href.replace(a,"");try{c=decodeURIComponent(c)}catch(e){}try{d=decodeURIComponent(d)}catch(e){}return b.hash.length>1&&c===d}}(),_create:function(){var b=this,c=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",c.collapsible),this._processTabs(),c.active=this._initialActive(),a.isArray(c.disabled)&&(c.disabled=a.unique(c.disabled.concat(a.map(this.tabs.filter(".ui-state-disabled"),function(a){return b.tabs.index(a)}))).sort()),this.options.active!==!1&&this.anchors.length?this.active=this._findActive(c.active):this.active=a(),this._refresh(),this.active.length&&this.load(c.active)},_initialActive:function(){var b=this.options.active,c=this.options.collapsible,d=location.hash.substring(1);return null===b&&(d&&this.tabs.each(function(c,e){return a(e).attr("aria-controls")===d?(b=c,!1):void 0}),null===b&&(b=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null!==b&&-1!==b||(b=this.tabs.length?0:!1)),b!==!1&&(b=this.tabs.index(this.tabs.eq(b)),-1===b&&(b=c?!1:0)),!c&&b===!1&&this.anchors.length&&(b=0),b},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):a()}},_tabKeydown:function(b){var c=a(this.document[0].activeElement).closest("li"),d=this.tabs.index(c),e=!0;if(!this._handlePageNav(b)){switch(b.keyCode){case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:d++;break;case a.ui.keyCode.UP:case a.ui.keyCode.LEFT:e=!1,d--;break;case a.ui.keyCode.END:d=this.anchors.length-1;break;case a.ui.keyCode.HOME:d=0;break;case a.ui.keyCode.SPACE:return b.preventDefault(),clearTimeout(this.activating),void this._activate(d);case a.ui.keyCode.ENTER:return b.preventDefault(),clearTimeout(this.activating),void this._activate(d===this.options.active?!1:d);default:return}b.preventDefault(),clearTimeout(this.activating),d=this._focusNextTab(d,e),b.ctrlKey||b.metaKey||(c.attr("aria-selected","false"),this.tabs.eq(d).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",d)},this.delay))}},_panelKeydown:function(b){this._handlePageNav(b)||b.ctrlKey&&b.keyCode===a.ui.keyCode.UP&&(b.preventDefault(),this.active.focus())},_handlePageNav:function(b){return b.altKey&&b.keyCode===a.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):b.altKey&&b.keyCode===a.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(b,c){function d(){return b>e&&(b=0),0>b&&(b=e),b}for(var e=this.tabs.length-1;-1!==a.inArray(d(),this.options.disabled);)b=c?b+1:b-1;return b},_focusNextTab:function(a,b){return a=this._findNextTab(a,b),this.tabs.eq(a).focus(),a},_setOption:function(a,b){return"active"===a?void this._activate(b):"disabled"===a?void this._setupDisabled(b):(this._super(a,b),"collapsible"===a&&(this.element.toggleClass("ui-tabs-collapsible",b),b||this.options.active!==!1||this._activate(0)),"event"===a&&this._setupEvents(b),void("heightStyle"===a&&this._setupHeightStyle(b)))},_sanitizeSelector:function(a){return a?a.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var b=this.options,c=this.tablist.children(":has(a[href])");b.disabled=a.map(c.filter(".ui-state-disabled"),function(a){return c.index(a)}),this._processTabs(),b.active!==!1&&this.anchors.length?this.active.length&&!a.contains(this.tablist[0],this.active[0])?this.tabs.length===b.disabled.length?(b.active=!1,this.active=a()):this._activate(this._findNextTab(Math.max(0,b.active-1),!1)):b.active=this.tabs.index(this.active):(b.active=!1,this.active=a()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var b=this,c=this.tabs,d=this.anchors,e=this.panels;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist").delegate("> li","mousedown"+this.eventNamespace,function(b){a(this).is(".ui-state-disabled")&&b.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){a(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return a("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=a(),this.anchors.each(function(c,d){var e,f,g,h=a(d).uniqueId().attr("id"),i=a(d).closest("li"),j=i.attr("aria-controls");b._isLocal(d)?(e=d.hash,g=e.substring(1),f=b.element.find(b._sanitizeSelector(e))):(g=i.attr("aria-controls")||a({}).uniqueId()[0].id,e="#"+g,f=b.element.find(e),f.length||(f=b._createPanel(g),f.insertAfter(b.panels[c-1]||b.tablist)),f.attr("aria-live","polite")),f.length&&(b.panels=b.panels.add(f)),j&&i.data("ui-tabs-aria-controls",j),i.attr({"aria-controls":g,"aria-labelledby":h}),f.attr("aria-labelledby",h)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel"),c&&(this._off(c.not(this.tabs)),this._off(d.not(this.anchors)),this._off(e.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0)},_createPanel:function(b){return a("<div>").attr("id",b).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(b){a.isArray(b)&&(b.length?b.length===this.anchors.length&&(b=!0):b=!1);for(var c,d=0;c=this.tabs[d];d++)b===!0||-1!==a.inArray(d,b)?a(c).addClass("ui-state-disabled").attr("aria-disabled","true"):a(c).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=b},_setupEvents:function(b){var c={};b&&a.each(b.split(" "),function(a,b){c[b]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(a){a.preventDefault()}}),this._on(this.anchors,c),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(b){var c,d=this.element.parent();"fill"===b?(c=d.height(),c-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var b=a(this),d=b.css("position");"absolute"!==d&&"fixed"!==d&&(c-=b.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){c-=a(this).outerHeight(!0)}),this.panels.each(function(){a(this).height(Math.max(0,c-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")):"auto"===b&&(c=0,this.panels.each(function(){c=Math.max(c,a(this).height("").height())}).height(c))},_eventHandler:function(b){var c=this.options,d=this.active,e=a(b.currentTarget),f=e.closest("li"),g=f[0]===d[0],h=g&&c.collapsible,i=h?a():this._getPanelForTab(f),j=d.length?this._getPanelForTab(d):a(),k={oldTab:d,oldPanel:j,newTab:h?a():f,newPanel:i};b.preventDefault(),f.hasClass("ui-state-disabled")||f.hasClass("ui-tabs-loading")||this.running||g&&!c.collapsible||this._trigger("beforeActivate",b,k)===!1||(c.active=h?!1:this.tabs.index(f),this.active=g?a():f,this.xhr&&this.xhr.abort(),j.length||i.length||a.error("jQuery UI Tabs: Mismatching fragment identifier."),i.length&&this.load(this.tabs.index(f),b),this._toggle(b,k))},_toggle:function(b,c){function d(){f.running=!1,f._trigger("activate",b,c)}function e(){c.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),g.length&&f.options.show?f._show(g,f.options.show,d):(g.show(),d())}var f=this,g=c.newPanel,h=c.oldPanel;this.running=!0,h.length&&this.options.hide?this._hide(h,this.options.hide,function(){c.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),e()}):(c.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),h.hide(),e()),h.attr("aria-hidden","true"),c.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),g.length&&h.length?c.oldTab.attr("tabIndex",-1):g.length&&this.tabs.filter(function(){return 0===a(this).attr("tabIndex")}).attr("tabIndex",-1),g.attr("aria-hidden","false"),c.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(b){var c,d=this._findActive(b);d[0]!==this.active[0]&&(d.length||(d=this.active),c=d.find(".ui-tabs-anchor")[0],this._eventHandler({target:c,currentTarget:c,preventDefault:a.noop}))},_findActive:function(b){return b===!1?a():this.tabs.eq(b)},_getIndex:function(a){return"string"==typeof a&&(a=this.anchors.index(this.anchors.filter("[href$='"+a+"']"))),a},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tablist.unbind(this.eventNamespace),this.tabs.add(this.panels).each(function(){a.data(this,"ui-tabs-destroy")?a(this).remove():a(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var b=a(this),c=b.data("ui-tabs-aria-controls");c?b.attr("aria-controls",c).removeData("ui-tabs-aria-controls"):b.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(b){var c=this.options.disabled;c!==!1&&(void 0===b?c=!1:(b=this._getIndex(b),c=a.isArray(c)?a.map(c,function(a){return a!==b?a:null}):a.map(this.tabs,function(a,c){return c!==b?c:null})),this._setupDisabled(c));
},disable:function(b){var c=this.options.disabled;if(c!==!0){if(void 0===b)c=!0;else{if(b=this._getIndex(b),-1!==a.inArray(b,c))return;c=a.isArray(c)?a.merge([b],c).sort():[b]}this._setupDisabled(c)}},load:function(b,c){b=this._getIndex(b);var d=this,e=this.tabs.eq(b),f=e.find(".ui-tabs-anchor"),g=this._getPanelForTab(e),h={tab:e,panel:g},i=function(a,b){"abort"===b&&d.panels.stop(!1,!0),e.removeClass("ui-tabs-loading"),g.removeAttr("aria-busy"),a===d.xhr&&delete d.xhr};this._isLocal(f[0])||(this.xhr=a.ajax(this._ajaxSettings(f,c,h)),this.xhr&&"canceled"!==this.xhr.statusText&&(e.addClass("ui-tabs-loading"),g.attr("aria-busy","true"),this.xhr.done(function(a,b,e){setTimeout(function(){g.html(a),d._trigger("load",c,h),i(e,b)},1)}).fail(function(a,b){setTimeout(function(){i(a,b)},1)})))},_ajaxSettings:function(b,c,d){var e=this;return{url:b.attr("href"),beforeSend:function(b,f){return e._trigger("beforeLoad",c,a.extend({jqXHR:b,ajaxSettings:f},d))}}},_getPanelForTab:function(b){var c=a(b).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+c))}}),a.widget("ui.tooltip",{version:"1.11.4",options:{content:function(){var b=a(this).attr("title")||"";return a("<a>").text(b).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_addDescribedBy:function(b,c){var d=(b.attr("aria-describedby")||"").split(/\s+/);d.push(c),b.data("ui-tooltip-id",c).attr("aria-describedby",a.trim(d.join(" ")))},_removeDescribedBy:function(b){var c=b.data("ui-tooltip-id"),d=(b.attr("aria-describedby")||"").split(/\s+/),e=a.inArray(c,d);-1!==e&&d.splice(e,1),b.removeData("ui-tooltip-id"),d=a.trim(d.join(" ")),d?b.attr("aria-describedby",d):b.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable(),this.liveRegion=a("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body)},_setOption:function(b,c){var d=this;return"disabled"===b?(this[c?"_disable":"_enable"](),void(this.options[b]=c)):(this._super(b,c),void("content"===b&&a.each(this.tooltips,function(a,b){d._updateContent(b.element)})))},_disable:function(){var b=this;a.each(this.tooltips,function(c,d){var e=a.Event("blur");e.target=e.currentTarget=d.element[0],b.close(e,!0)}),this.element.find(this.options.items).addBack().each(function(){var b=a(this);b.is("[title]")&&b.data("ui-tooltip-title",b.attr("title")).removeAttr("title")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var b=a(this);b.data("ui-tooltip-title")&&b.attr("title",b.data("ui-tooltip-title"))})},open:function(b){var c=this,d=a(b?b.target:this.element).closest(this.options.items);d.length&&!d.data("ui-tooltip-id")&&(d.attr("title")&&d.data("ui-tooltip-title",d.attr("title")),d.data("ui-tooltip-open",!0),b&&"mouseover"===b.type&&d.parents().each(function(){var b,d=a(this);d.data("ui-tooltip-open")&&(b=a.Event("blur"),b.target=b.currentTarget=this,c.close(b,!0)),d.attr("title")&&(d.uniqueId(),c.parents[this.id]={element:this,title:d.attr("title")},d.attr("title",""))}),this._registerCloseHandlers(b,d),this._updateContent(d,b))},_updateContent:function(a,b){var c,d=this.options.content,e=this,f=b?b.type:null;return"string"==typeof d?this._open(b,a,d):(c=d.call(a[0],function(c){e._delay(function(){a.data("ui-tooltip-open")&&(b&&(b.type=f),this._open(b,a,c))})}),void(c&&this._open(b,a,c)))},_open:function(b,c,d){function e(a){j.of=a,g.is(":hidden")||g.position(j)}var f,g,h,i,j=a.extend({},this.options.position);if(d){if(f=this._find(c))return void f.tooltip.find(".ui-tooltip-content").html(d);c.is("[title]")&&(b&&"mouseover"===b.type?c.attr("title",""):c.removeAttr("title")),f=this._tooltip(c),g=f.tooltip,this._addDescribedBy(c,g.attr("id")),g.find(".ui-tooltip-content").html(d),this.liveRegion.children().hide(),d.clone?(i=d.clone(),i.removeAttr("id").find("[id]").removeAttr("id")):i=d,a("<div>").html(i).appendTo(this.liveRegion),this.options.track&&b&&/^mouse/.test(b.type)?(this._on(this.document,{mousemove:e}),e(b)):g.position(a.extend({of:c},this.options.position)),g.hide(),this._show(g,this.options.show),this.options.show&&this.options.show.delay&&(h=this.delayedShow=setInterval(function(){g.is(":visible")&&(e(j.of),clearInterval(h))},a.fx.interval)),this._trigger("open",b,{tooltip:g})}},_registerCloseHandlers:function(b,c){var d={keyup:function(b){if(b.keyCode===a.ui.keyCode.ESCAPE){var d=a.Event(b);d.currentTarget=c[0],this.close(d,!0)}}};c[0]!==this.element[0]&&(d.remove=function(){this._removeTooltip(this._find(c).tooltip)}),b&&"mouseover"!==b.type||(d.mouseleave="close"),b&&"focusin"!==b.type||(d.focusout="close"),this._on(!0,c,d)},close:function(b){var c,d=this,e=a(b?b.currentTarget:this.element),f=this._find(e);return f?(c=f.tooltip,void(f.closing||(clearInterval(this.delayedShow),e.data("ui-tooltip-title")&&!e.attr("title")&&e.attr("title",e.data("ui-tooltip-title")),this._removeDescribedBy(e),f.hiding=!0,c.stop(!0),this._hide(c,this.options.hide,function(){d._removeTooltip(a(this))}),e.removeData("ui-tooltip-open"),this._off(e,"mouseleave focusout keyup"),e[0]!==this.element[0]&&this._off(e,"remove"),this._off(this.document,"mousemove"),b&&"mouseleave"===b.type&&a.each(this.parents,function(b,c){a(c.element).attr("title",c.title),delete d.parents[b]}),f.closing=!0,this._trigger("close",b,{tooltip:c}),f.hiding||(f.closing=!1)))):void e.removeData("ui-tooltip-open")},_tooltip:function(b){var c=a("<div>").attr("role","tooltip").addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||"")),d=c.uniqueId().attr("id");return a("<div>").addClass("ui-tooltip-content").appendTo(c),c.appendTo(this.document[0].body),this.tooltips[d]={element:b,tooltip:c}},_find:function(a){var b=a.data("ui-tooltip-id");return b?this.tooltips[b]:null},_removeTooltip:function(a){a.remove(),delete this.tooltips[a.attr("id")]},_destroy:function(){var b=this;a.each(this.tooltips,function(c,d){var e=a.Event("blur"),f=d.element;e.target=e.currentTarget=f[0],b.close(e,!0),a("#"+c).remove(),f.data("ui-tooltip-title")&&(f.attr("title")||f.attr("title",f.data("ui-tooltip-title")),f.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}})}),!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){var b,c=navigator.userAgent,d=/iphone/i.test(c),e=/chrome/i.test(c),f=/android/i.test(c);a.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},autoclear:!0,dataName:"rawMaskFn",placeholder:"_"},a.fn.extend({caret:function(a,b){var c;return 0===this.length||this.is(":hidden")?void 0:"number"==typeof a?(b="number"==typeof b?b:a,this.each(function(){this.setSelectionRange?this.setSelectionRange(a,b):this.createTextRange&&(c=this.createTextRange(),c.collapse(!0),c.moveEnd("character",b),c.moveStart("character",a),c.select())})):(this[0].setSelectionRange?(a=this[0].selectionStart,b=this[0].selectionEnd):document.selection&&document.selection.createRange&&(c=document.selection.createRange(),a=0-c.duplicate().moveStart("character",-1e5),b=a+c.text.length),{begin:a,end:b})},unmask:function(){return this.trigger("unmask")},mask:function(c,g){var h,i,j,k,l,m,n,o;if(!c&&this.length>0){h=a(this[0]);var p=h.data(a.mask.dataName);return p?p():void 0}return g=a.extend({autoclear:a.mask.autoclear,placeholder:a.mask.placeholder,completed:null},g),i=a.mask.definitions,j=[],k=n=c.length,l=null,a.each(c.split(""),function(a,b){"?"==b?(n--,k=a):i[b]?(j.push(new RegExp(i[b])),null===l&&(l=j.length-1),k>a&&(m=j.length-1)):j.push(null)}),this.trigger("unmask").each(function(){function h(){if(g.completed){for(var a=l;m>=a;a++)if(j[a]&&C[a]===p(a))return;g.completed.call(B)}}function p(a){return g.placeholder.charAt(a<g.placeholder.length?a:0)}function q(a){for(;++a<n&&!j[a];);return a}function r(a){for(;--a>=0&&!j[a];);return a}function s(a,b){var c,d;if(!(0>a)){for(c=a,d=q(b);n>c;c++)if(j[c]){if(!(n>d&&j[c].test(C[d])))break;C[c]=C[d],C[d]=p(d),d=q(d)}z(),B.caret(Math.max(l,a))}}function t(a){var b,c,d,e;for(b=a,c=p(a);n>b;b++)if(j[b]){if(d=q(b),e=C[b],C[b]=c,!(n>d&&j[d].test(e)))break;c=e}}function u(){var a=B.val(),b=B.caret();if(o&&o.length&&o.length>a.length){for(A(!0);b.begin>0&&!j[b.begin-1];)b.begin--;if(0===b.begin)for(;b.begin<l&&!j[b.begin];)b.begin++;B.caret(b.begin,b.begin)}else{for(A(!0);b.begin<n&&!j[b.begin];)b.begin++;B.caret(b.begin,b.begin)}h()}function v(){A(),B.val()!=E&&B.change()}function w(a){if(!B.prop("readonly")){var b,c,e,f=a.which||a.keyCode;o=B.val(),8===f||46===f||d&&127===f?(b=B.caret(),c=b.begin,e=b.end,e-c===0&&(c=46!==f?r(c):e=q(c-1),e=46===f?q(e):e),y(c,e),s(c,e-1),a.preventDefault()):13===f?v.call(this,a):27===f&&(B.val(E),B.caret(0,A()),a.preventDefault())}}function x(b){if(!B.prop("readonly")){var c,d,e,g=b.which||b.keyCode,i=B.caret();if(!(b.ctrlKey||b.altKey||b.metaKey||32>g)&&g&&13!==g){if(i.end-i.begin!==0&&(y(i.begin,i.end),s(i.begin,i.end-1)),c=q(i.begin-1),n>c&&(d=String.fromCharCode(g),j[c].test(d))){if(t(c),C[c]=d,z(),e=q(c),f){var k=function(){a.proxy(a.fn.caret,B,e)()};setTimeout(k,0)}else B.caret(e);i.begin<=m&&h()}b.preventDefault()}}}function y(a,b){var c;for(c=a;b>c&&n>c;c++)j[c]&&(C[c]=p(c))}function z(){B.val(C.join(""))}function A(a){var b,c,d,e=B.val(),f=-1;for(b=0,d=0;n>b;b++)if(j[b]){for(C[b]=p(b);d++<e.length;)if(c=e.charAt(d-1),j[b].test(c)){C[b]=c,f=b;break}if(d>e.length){y(b+1,n);break}}else C[b]===e.charAt(d)&&d++,k>b&&(f=b);return a?z():k>f+1?g.autoclear||C.join("")===D?(B.val()&&B.val(""),y(0,n)):z():(z(),B.val(B.val().substring(0,f+1))),k?b:l}var B=a(this),C=a.map(c.split(""),function(a,b){return"?"!=a?i[a]?p(b):a:void 0}),D=C.join(""),E=B.val();B.data(a.mask.dataName,function(){return a.map(C,function(a,b){return j[b]&&a!=p(b)?a:null}).join("")}),B.one("unmask",function(){B.off(".mask").removeData(a.mask.dataName)}).on("focus.mask",function(){if(!B.prop("readonly")){clearTimeout(b);var a;E=B.val(),a=A(),b=setTimeout(function(){B.get(0)===document.activeElement&&(z(),a==c.replace("?","").length?B.caret(0,a):B.caret(a))},10)}}).on("blur.mask",v).on("keydown.mask",w).on("keypress.mask",x).on("input.mask paste.mask",function(){B.prop("readonly")||setTimeout(function(){var a=A(!0);B.caret(a),h()},0)}),e&&f&&B.off("input.mask").on("input.mask",u),A()})}})}),function(){function a(a){var b=c;a&&(c[a]||(c[a]={}),b=c[a]),b.define&&b.define.packaged||(d.original=b.define,b.define=d,b.define.packaged=!0),b.require&&b.require.packaged||(f.original=b.require,b.require=f,b.require.packaged=!0)}var b="ace",c=function(){return this}();if(!c&&"undefined"!=typeof window&&(c=window),b||"undefined"==typeof requirejs){var d=function(a,b,c){return"string"!=typeof a?void(d.original?d.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace())):(2==arguments.length&&(c=b),void(d.modules[a]||(d.payloads[a]=c,d.modules[a]=null)))};d.modules={},d.payloads={};var e=function(a,b,c){if("string"==typeof b){var d=h(a,b);if(void 0!=d)return c&&c(),d}else if("[object Array]"===Object.prototype.toString.call(b)){for(var e=[],g=0,i=b.length;i>g;++g){var j=h(a,b[g]);if(void 0==j&&f.original)return;e.push(j)}return c&&c.apply(null,e)||!0}},f=function(a,b){var c=e("",a,b);return void 0==c&&f.original?f.original.apply(this,arguments):c},g=function(a,b){if(-1!==b.indexOf("!")){var c=b.split("!");return g(a,c[0])+"!"+g(a,c[1])}if("."==b.charAt(0)){var d=a.split("/").slice(0,-1).join("/");for(b=d+"/"+b;-1!==b.indexOf(".")&&e!=b;){var e=b;b=b.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return b},h=function(a,b){b=g(a,b);var c=d.modules[b];if(!c){if(c=d.payloads[b],"function"==typeof c){var f={},h={id:b,uri:"",exports:f,packaged:!0},i=function(a,c){return e(b,a,c)},j=c(i,f,h);f=j||h.exports,d.modules[b]=f,delete d.payloads[b]}c=d.modules[b]=f||c}return c};a(b)}}(),ace.define("ace/lib/regexp",["require","exports","module"],function(a,b,c){"use strict";function d(a){return(a.global?"g":"")+(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.extended?"x":"")+(a.sticky?"y":"")}function e(a,b,c){if(Array.prototype.indexOf)return a.indexOf(b,c);for(var d=c||0;d<a.length;d++)if(a[d]===b)return d;return-1}var f={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},g=void 0===f.exec.call(/()??/,"")[1],h=function(){var a=/^/g;return f.test.call(a,""),!a.lastIndex}();h&&g||(RegExp.prototype.exec=function(a){var b,c,i=f.exec.apply(this,arguments);if("string"==typeof a&&i){if(!g&&i.length>1&&e(i,"")>-1&&(c=RegExp(this.source,f.replace.call(d(this),"g","")),f.replace.call(a.slice(i.index),c,function(){for(var a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(i[a]=void 0)})),this._xregexp&&this._xregexp.captureNames)for(var j=1;j<i.length;j++)b=this._xregexp.captureNames[j-1],b&&(i[b]=i[j]);!h&&this.global&&!i[0].length&&this.lastIndex>i.index&&this.lastIndex--}return i},h||(RegExp.prototype.test=function(a){var b=f.exec.call(this,a);return b&&this.global&&!b[0].length&&this.lastIndex>b.index&&this.lastIndex--,!!b}))}),ace.define("ace/lib/es5-shim",["require","exports","module"],function(a,b,c){function d(){}function e(a){try{return Object.defineProperty(a,"sentinel",{}),"sentinel"in a}catch(b){}}function f(a){return a=+a,a!==a?a=0:0!==a&&a!==1/0&&a!==-1/0&&(a=(a>0||-1)*Math.floor(Math.abs(a))),a}Function.prototype.bind||(Function.prototype.bind=function(a){var b=this;if("function"!=typeof b)throw new TypeError("Function.prototype.bind called on incompatible "+b);var c=o.call(arguments,1),e=function(){if(this instanceof e){var d=b.apply(this,c.concat(o.call(arguments)));return Object(d)===d?d:this}return b.apply(a,c.concat(o.call(arguments)))};return b.prototype&&(d.prototype=b.prototype,e.prototype=new d,d.prototype=null),e});var g,h,i,j,k,l=Function.prototype.call,m=Array.prototype,n=Object.prototype,o=m.slice,p=l.bind(n.toString),q=l.bind(n.hasOwnProperty);if((k=q(n,"__defineGetter__"))&&(g=l.bind(n.__defineGetter__),h=l.bind(n.__defineSetter__),i=l.bind(n.__lookupGetter__),j=l.bind(n.__lookupSetter__)),2!=[1,2].splice(0).length)if(function(){function a(a){var b=new Array(a+2);return b[0]=b[1]=0,b}var b,c=[];return c.splice.apply(c,a(20)),c.splice.apply(c,a(26)),b=c.length,c.splice(5,0,"XXX"),b+1==c.length,b+1==c.length?!0:void 0}()){var r=Array.prototype.splice;Array.prototype.splice=function(a,b){return arguments.length?r.apply(this,[void 0===a?0:a,void 0===b?this.length-a:b].concat(o.call(arguments,2))):[]}}else Array.prototype.splice=function(a,b){var c=this.length;a>0?a>c&&(a=c):void 0==a?a=0:0>a&&(a=Math.max(c+a,0)),c>a+b||(b=c-a);var d=this.slice(a,a+b),e=o.call(arguments,2),f=e.length;if(a===c)f&&this.push.apply(this,e);else{var g=Math.min(b,c-a),h=a+g,i=h+f-g,j=c-h,k=c-g;if(h>i)for(var l=0;j>l;++l)this[i+l]=this[h+l];else if(i>h)for(l=j;l--;)this[i+l]=this[h+l];if(f&&a===k)this.length=k,this.push.apply(this,e);else for(this.length=k+f,l=0;f>l;++l)this[a+l]=e[l]}return d};Array.isArray||(Array.isArray=function(a){return"[object Array]"==p(a)});var s=Object("a"),t="a"!=s[0]||!(0 in s);if(Array.prototype.forEach||(Array.prototype.forEach=function(a){var b=K(this),c=t&&"[object String]"==p(this)?this.split(""):b,d=arguments[1],e=-1,f=c.length>>>0;if("[object Function]"!=p(a))throw new TypeError;for(;++e<f;)e in c&&a.call(d,c[e],e,b)}),Array.prototype.map||(Array.prototype.map=function(a){var b=K(this),c=t&&"[object String]"==p(this)?this.split(""):b,d=c.length>>>0,e=Array(d),f=arguments[1];if("[object Function]"!=p(a))throw new TypeError(a+" is not a function");for(var g=0;d>g;g++)g in c&&(e[g]=a.call(f,c[g],g,b));return e}),Array.prototype.filter||(Array.prototype.filter=function(a){var b,c=K(this),d=t&&"[object String]"==p(this)?this.split(""):c,e=d.length>>>0,f=[],g=arguments[1];if("[object Function]"!=p(a))throw new TypeError(a+" is not a function");for(var h=0;e>h;h++)h in d&&(b=d[h],a.call(g,b,h,c)&&f.push(b));return f}),Array.prototype.every||(Array.prototype.every=function(a){var b=K(this),c=t&&"[object String]"==p(this)?this.split(""):b,d=c.length>>>0,e=arguments[1];if("[object Function]"!=p(a))throw new TypeError(a+" is not a function");for(var f=0;d>f;f++)if(f in c&&!a.call(e,c[f],f,b))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(a){var b=K(this),c=t&&"[object String]"==p(this)?this.split(""):b,d=c.length>>>0,e=arguments[1];if("[object Function]"!=p(a))throw new TypeError(a+" is not a function");for(var f=0;d>f;f++)if(f in c&&a.call(e,c[f],f,b))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(a){var b=K(this),c=t&&"[object String]"==p(this)?this.split(""):b,d=c.length>>>0;if("[object Function]"!=p(a))throw new TypeError(a+" is not a function");if(!d&&1==arguments.length)throw new TypeError("reduce of empty array with no initial value");var e,f=0;if(arguments.length>=2)e=arguments[1];else for(;;){if(f in c){e=c[f++];break}if(++f>=d)throw new TypeError("reduce of empty array with no initial value")}for(;d>f;f++)f in c&&(e=a.call(void 0,e,c[f],f,b));return e}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(a){var b=K(this),c=t&&"[object String]"==p(this)?this.split(""):b,d=c.length>>>0;if("[object Function]"!=p(a))throw new TypeError(a+" is not a function");if(!d&&1==arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var e,f=d-1;if(arguments.length>=2)e=arguments[1];else for(;;){if(f in c){e=c[f--];break}if(--f<0)throw new TypeError("reduceRight of empty array with no initial value")}do f in this&&(e=a.call(void 0,e,c[f],f,b));while(f--);return e}),Array.prototype.indexOf&&-1==[0,1].indexOf(1,2)||(Array.prototype.indexOf=function(a){var b=t&&"[object String]"==p(this)?this.split(""):K(this),c=b.length>>>0;if(!c)return-1;var d=0;for(arguments.length>1&&(d=f(arguments[1])),d=d>=0?d:Math.max(0,c+d);c>d;d++)if(d in b&&b[d]===a)return d;return-1}),Array.prototype.lastIndexOf&&-1==[0,1].lastIndexOf(0,-3)||(Array.prototype.lastIndexOf=function(a){var b=t&&"[object String]"==p(this)?this.split(""):K(this),c=b.length>>>0;if(!c)return-1;var d=c-1;for(arguments.length>1&&(d=Math.min(d,f(arguments[1]))),d=d>=0?d:c-Math.abs(d);d>=0;d--)if(d in b&&a===b[d])return d;return-1}),Object.getPrototypeOf||(Object.getPrototypeOf=function(a){return a.__proto__||(a.constructor?a.constructor.prototype:n)}),!Object.getOwnPropertyDescriptor){var u="Object.getOwnPropertyDescriptor called on a non-object: ";Object.getOwnPropertyDescriptor=function(a,b){if("object"!=typeof a&&"function"!=typeof a||null===a)throw new TypeError(u+a);if(q(a,b)){var c,d,e;if(c={enumerable:!0,configurable:!0},k){var f=a.__proto__;a.__proto__=n;var d=i(a,b),e=j(a,b);if(a.__proto__=f,d||e)return d&&(c.get=d),e&&(c.set=e),c}return c.value=a[b],c}}}if(Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(a){return Object.keys(a)}),!Object.create){var v;v=null===Object.prototype.__proto__?function(){return{__proto__:null}}:function(){var a={};for(var b in a)a[b]=null;return a.constructor=a.hasOwnProperty=a.propertyIsEnumerable=a.isPrototypeOf=a.toLocaleString=a.toString=a.valueOf=a.__proto__=null,a},Object.create=function(a,b){var c;if(null===a)c=v();else{if("object"!=typeof a)throw new TypeError("typeof prototype["+typeof a+"] != 'object'");var d=function(){};d.prototype=a,c=new d,c.__proto__=a}return void 0!==b&&Object.defineProperties(c,b),c}}if(Object.defineProperty){var w=e({}),x="undefined"==typeof document||e(document.createElement("div"));if(!w||!x)var y=Object.defineProperty}if(!Object.defineProperty||y){var z="Property description must be an object: ",A="Object.defineProperty called on non-object: ",B="getters & setters can not be defined on this javascript engine";Object.defineProperty=function(a,b,c){if("object"!=typeof a&&"function"!=typeof a||null===a)throw new TypeError(A+a);if("object"!=typeof c&&"function"!=typeof c||null===c)throw new TypeError(z+c);if(y)try{return y.call(Object,a,b,c)}catch(d){}if(q(c,"value"))if(k&&(i(a,b)||j(a,b))){var e=a.__proto__;a.__proto__=n,delete a[b],a[b]=c.value,a.__proto__=e}else a[b]=c.value;else{if(!k)throw new TypeError(B);q(c,"get")&&g(a,b,c.get),q(c,"set")&&h(a,b,c.set)}return a}}Object.defineProperties||(Object.defineProperties=function(a,b){for(var c in b)q(b,c)&&Object.defineProperty(a,c,b[c]);return a}),Object.seal||(Object.seal=function(a){return a}),Object.freeze||(Object.freeze=function(a){return a});try{Object.freeze(function(){})}catch(C){Object.freeze=function(a){return function(b){return"function"==typeof b?b:a(b)}}(Object.freeze)}if(Object.preventExtensions||(Object.preventExtensions=function(a){return a}),Object.isSealed||(Object.isSealed=function(a){return!1}),Object.isFrozen||(Object.isFrozen=function(a){return!1}),Object.isExtensible||(Object.isExtensible=function(a){if(Object(a)===a)throw new TypeError;for(var b="";q(a,b);)b+="?";a[b]=!0;var c=q(a,b);return delete a[b],c}),!Object.keys){var D=!0,E=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],F=E.length;for(var G in{toString:null})D=!1;Object.keys=function L(a){if("object"!=typeof a&&"function"!=typeof a||null===a)throw new TypeError("Object.keys called on a non-object");var L=[];for(var b in a)q(a,b)&&L.push(b);if(D)for(var c=0,d=F;d>c;c++){var e=E[c];q(a,e)&&L.push(e)}return L}}Date.now||(Date.now=function(){return(new Date).getTime()});var H="	\n\x0B\f\r \u2028\u2029\ufeff";if(!String.prototype.trim||H.trim()){H="["+H+"]";var I=new RegExp("^"+H+H+"*"),J=new RegExp(H+H+"*$");String.prototype.trim=function(){return String(this).replace(I,"").replace(J,"")}}var K=function(a){if(null==a)throw new TypeError("can't convert "+a+" to object");return Object(a)}}),ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/regexp","ace/lib/es5-shim"],function(a,b,c){"use strict";a("./regexp"),a("./es5-shim")}),ace.define("ace/lib/dom",["require","exports","module"],function(a,b,c){"use strict";var d="http://www.w3.org/1999/xhtml";return b.getDocumentHead=function(a){return a||(a=document),a.head||a.getElementsByTagName("head")[0]||a.documentElement},b.createElement=function(a,b){return document.createElementNS?document.createElementNS(b||d,a):document.createElement(a)},b.hasCssClass=function(a,b){var c=(a.className||"").split(/\s+/g);return-1!==c.indexOf(b)},b.addCssClass=function(a,c){b.hasCssClass(a,c)||(a.className+=" "+c)},b.removeCssClass=function(a,b){for(var c=a.className.split(/\s+/g);;){var d=c.indexOf(b);if(-1==d)break;c.splice(d,1)}a.className=c.join(" ")},b.toggleCssClass=function(a,b){for(var c=a.className.split(/\s+/g),d=!0;;){var e=c.indexOf(b);if(-1==e)break;d=!1,c.splice(e,1)}return d&&c.push(b),a.className=c.join(" "),d},b.setCssClass=function(a,c,d){d?b.addCssClass(a,c):b.removeCssClass(a,c)},b.hasCssString=function(a,b){var c,d=0;if(b=b||document,b.createStyleSheet&&(c=b.styleSheets)){for(;d<c.length;)if(c[d++].owningElement.id===a)return!0}else if(c=b.getElementsByTagName("style"))for(;d<c.length;)if(c[d++].id===a)return!0;return!1},b.importCssString=function(a,c,d){if(d=d||document,c&&b.hasCssString(c,d))return null;var e;c&&(a+="\n/*# sourceURL=ace/css/"+c+" */"),d.createStyleSheet?(e=d.createStyleSheet(),e.cssText=a,c&&(e.owningElement.id=c)):(e=b.createElement("style"),e.appendChild(d.createTextNode(a)),c&&(e.id=c),b.getDocumentHead(d).appendChild(e))},b.importCssStylsheet=function(a,c){if(c.createStyleSheet)c.createStyleSheet(a);else{var d=b.createElement("link");d.rel="stylesheet",d.href=a,b.getDocumentHead(c).appendChild(d)}},b.getInnerWidth=function(a){return parseInt(b.computedStyle(a,"paddingLeft"),10)+parseInt(b.computedStyle(a,"paddingRight"),10)+a.clientWidth},b.getInnerHeight=function(a){return parseInt(b.computedStyle(a,"paddingTop"),10)+parseInt(b.computedStyle(a,"paddingBottom"),10)+a.clientHeight},b.scrollbarWidth=function(a){var c=b.createElement("ace_inner");c.style.width="100%",c.style.minWidth="0px",c.style.height="200px",c.style.display="block";var d=b.createElement("ace_outer"),e=d.style;e.position="absolute",e.left="-10000px",e.overflow="hidden",e.width="200px",e.minWidth="0px",e.height="150px",e.display="block",d.appendChild(c);var f=a.documentElement;f.appendChild(d);var g=c.offsetWidth;e.overflow="scroll";var h=c.offsetWidth;return g==h&&(h=d.clientWidth),f.removeChild(d),g-h},"undefined"==typeof document?void(b.importCssString=function(){}):(void 0!==window.pageYOffset?(b.getPageScrollTop=function(){return window.pageYOffset},b.getPageScrollLeft=function(){return window.pageXOffset}):(b.getPageScrollTop=function(){return document.body.scrollTop},b.getPageScrollLeft=function(){return document.body.scrollLeft}),window.getComputedStyle?b.computedStyle=function(a,b){return b?(window.getComputedStyle(a,"")||{})[b]||"":window.getComputedStyle(a,"")||{}}:b.computedStyle=function(a,b){return b?a.currentStyle[b]:a.currentStyle},b.setInnerHtml=function(a,b){var c=a.cloneNode(!1);return c.innerHTML=b,a.parentNode.replaceChild(c,a),c},"textContent"in document.documentElement?(b.setInnerText=function(a,b){a.textContent=b},b.getInnerText=function(a){return a.textContent}):(b.setInnerText=function(a,b){a.innerText=b},b.getInnerText=function(a){return a.innerText}),b.getParentWindow=function(a){return a.defaultView||a.parentWindow},void 0)}),ace.define("ace/lib/oop",["require","exports","module"],function(a,b,c){"use strict";b.inherits=function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})},b.mixin=function(a,b){for(var c in b)a[c]=b[c];return a},b.implement=function(a,c){b.mixin(a,c)}}),ace.define("ace/lib/keys",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop"],function(a,b,c){"use strict";a("./fixoldbrowsers");var d=a("./oop"),e=function(){var a,b,c={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,"super":8,meta:8,command:8,cmd:8},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}};for(b in c.FUNCTION_KEYS)a=c.FUNCTION_KEYS[b].toLowerCase(),c[a]=parseInt(b,10);for(b in c.PRINTABLE_KEYS)a=c.PRINTABLE_KEYS[b].toLowerCase(),c[a]=parseInt(b,10);return d.mixin(c,c.MODIFIER_KEYS),d.mixin(c,c.PRINTABLE_KEYS),d.mixin(c,c.FUNCTION_KEYS),c.enter=c["return"],c.escape=c.esc,c.del=c["delete"],c[173]="-",function(){for(var a=["cmd","ctrl","alt","shift"],b=Math.pow(2,a.length);b--;)c.KEY_MODS[b]=a.filter(function(a){return b&c.KEY_MODS[a]}).join("-")+"-"}(),c.KEY_MODS[0]="",c.KEY_MODS[-1]="input-",c}();d.mixin(b,e),b.keyCodeToString=function(a){var b=e[a];return"string"!=typeof b&&(b=String.fromCharCode(a)),b.toLowerCase()}}),ace.define("ace/lib/useragent",["require","exports","module"],function(a,b,c){"use strict";if(b.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},b.getOS=function(){return b.isMac?b.OS.MAC:b.isLinux?b.OS.LINUX:b.OS.WINDOWS},"object"==typeof navigator){var d=(navigator.platform.match(/mac|win|linux/i)||["other"])[0].toLowerCase(),e=navigator.userAgent;b.isWin="win"==d,b.isMac="mac"==d,b.isLinux="linux"==d,b.isIE="Microsoft Internet Explorer"==navigator.appName||navigator.appName.indexOf("MSAppHost")>=0?parseFloat((e.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((e.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),b.isOldIE=b.isIE&&b.isIE<9,b.isGecko=b.isMozilla=(window.Controllers||window.controllers)&&"Gecko"===window.navigator.product,b.isOldGecko=b.isGecko&&parseInt((e.match(/rv\:(\d+)/)||[])[1],10)<4,b.isOpera=window.opera&&"[object Opera]"==Object.prototype.toString.call(window.opera),b.isWebKit=parseFloat(e.split("WebKit/")[1])||void 0,b.isChrome=parseFloat(e.split(" Chrome/")[1])||void 0,b.isAIR=e.indexOf("AdobeAIR")>=0,b.isIPad=e.indexOf("iPad")>=0,b.isTouchPad=e.indexOf("TouchPad")>=0,b.isChromeOS=e.indexOf(" CrOS ")>=0}}),ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(a,b,c){"use strict";function d(a,b,c){var d=j(b);if(!g.isMac&&h){if(h.OSKey&&(d|=8),h.altGr){if(3==(3&d))return;h.altGr=0}if(18===c||17===c){var e="location"in b?b.location:b.keyLocation;if(17===c&&1===e)1==h[c]&&(i=b.timeStamp);else if(18===c&&3===d&&2===e){var k=b.timeStamp-i;50>k&&(h.altGr=!0)}}}if(c in f.MODIFIER_KEYS&&(c=-1),8&d&&c>=91&&93>=c&&(c=-1),!d&&13===c){var e="location"in b?b.location:b.keyLocation;if(3===e&&(a(b,d,-c),b.defaultPrevented))return}if(g.isChromeOS&&8&d){if(a(b,d,c),b.defaultPrevented)return;d&=-9}return d||c in f.FUNCTION_KEYS||c in f.PRINTABLE_KEYS?a(b,d,c):!1}function e(){h=Object.create(null),h.count=0,h.lastT=0}var f=a("./keys"),g=a("./useragent"),h=null,i=0;b.addListener=function(a,b,c){if(a.addEventListener)return a.addEventListener(b,c,!1);if(a.attachEvent){var d=function(){c.call(a,window.event)};c._wrapper=d,a.attachEvent("on"+b,d)}},b.removeListener=function(a,b,c){return a.removeEventListener?a.removeEventListener(b,c,!1):void(a.detachEvent&&a.detachEvent("on"+b,c._wrapper||c))},b.stopEvent=function(a){return b.stopPropagation(a),b.preventDefault(a),!1},b.stopPropagation=function(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},b.preventDefault=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1},b.getButton=function(a){return"dblclick"==a.type?0:"contextmenu"==a.type||g.isMac&&a.ctrlKey&&!a.altKey&&!a.shiftKey?2:a.preventDefault?a.button:{1:0,2:2,4:1}[a.button]},b.capture=function(a,c,d){function e(a){c&&c(a),d&&d(a),b.removeListener(document,"mousemove",c,!0),b.removeListener(document,"mouseup",e,!0),b.removeListener(document,"dragstart",e,!0)}return b.addListener(document,"mousemove",c,!0),b.addListener(document,"mouseup",e,!0),b.addListener(document,"dragstart",e,!0),e},b.addTouchMoveListener=function(a,c){if("ontouchmove"in a){var d,e;b.addListener(a,"touchstart",function(a){var b=a.changedTouches[0];d=b.clientX,e=b.clientY}),b.addListener(a,"touchmove",function(a){var b=1,f=a.changedTouches[0];a.wheelX=-(f.clientX-d)/b,a.wheelY=-(f.clientY-e)/b,d=f.clientX,e=f.clientY,c(a)})}},b.addMouseWheelListener=function(a,c){"onmousewheel"in a?b.addListener(a,"mousewheel",function(a){var b=8;void 0!==a.wheelDeltaX?(a.wheelX=-a.wheelDeltaX/b,a.wheelY=-a.wheelDeltaY/b):(a.wheelX=0,a.wheelY=-a.wheelDelta/b),c(a)}):"onwheel"in a?b.addListener(a,"wheel",function(a){var b=.35;switch(a.deltaMode){case a.DOM_DELTA_PIXEL:a.wheelX=a.deltaX*b||0,a.wheelY=a.deltaY*b||0;break;case a.DOM_DELTA_LINE:case a.DOM_DELTA_PAGE:a.wheelX=5*(a.deltaX||0),a.wheelY=5*(a.deltaY||0)}c(a)}):b.addListener(a,"DOMMouseScroll",function(a){a.axis&&a.axis==a.HORIZONTAL_AXIS?(a.wheelX=5*(a.detail||0),a.wheelY=0):(a.wheelX=0,a.wheelY=5*(a.detail||0)),c(a)})},b.addMultiMouseDownListener=function(a,c,d,e){function f(a){if(0!==b.getButton(a)?l=0:a.detail>1?(l++,l>4&&(l=1)):l=1,
g.isIE){var f=Math.abs(a.clientX-i)>5||Math.abs(a.clientY-j)>5;k&&!f||(l=1),k&&clearTimeout(k),k=setTimeout(function(){k=null},c[l-1]||600),1==l&&(i=a.clientX,j=a.clientY)}if(a._clicks=l,d[e]("mousedown",a),l>4)l=0;else if(l>1)return d[e](m[l],a)}function h(a){l=2,k&&clearTimeout(k),k=setTimeout(function(){k=null},c[l-1]||600),d[e]("mousedown",a),d[e](m[l],a)}var i,j,k,l=0,m={2:"dblclick",3:"tripleclick",4:"quadclick"};Array.isArray(a)||(a=[a]),a.forEach(function(a){b.addListener(a,"mousedown",f),g.isOldIE&&b.addListener(a,"dblclick",h)})};var j=!g.isMac||!g.isOpera||"KeyboardEvent"in window?function(a){return 0|(a.ctrlKey?1:0)|(a.altKey?2:0)|(a.shiftKey?4:0)|(a.metaKey?8:0)}:function(a){return 0|(a.metaKey?1:0)|(a.altKey?2:0)|(a.shiftKey?4:0)|(a.ctrlKey?8:0)};if(b.getModifierString=function(a){return f.KEY_MODS[j(a)]},b.addCommandKeyListener=function(a,c){var f=b.addListener;if(g.isOldGecko||g.isOpera&&!("KeyboardEvent"in window)){var i=null;f(a,"keydown",function(a){i=a.keyCode}),f(a,"keypress",function(a){return d(c,a,i)})}else{var j=null;f(a,"keydown",function(a){var b=a.keyCode;h[b]=(h[b]||0)+1,91==b||92==b?h.OSKey=!0:h.OSKey&&a.timeStamp-h.lastT>200&&1==h.count&&e(),1==h[b]&&h.count++,h.lastT=a.timeStamp;var f=d(c,a,b);return j=a.defaultPrevented,f}),f(a,"keypress",function(a){j&&(a.ctrlKey||a.altKey||a.shiftKey||a.metaKey)&&(b.stopEvent(a),j=null)}),f(a,"keyup",function(a){var b=a.keyCode;h[b]?h.count=Math.max(h.count-1,0):e(),91!=b&&92!=b||(h.OSKey=!1),h[b]=null}),h||(e(),f(window,"focus",e))}},"object"==typeof window&&window.postMessage&&!g.isOldIE){var k=1;b.nextTick=function(a,c){c=c||window;var d="zero-timeout-message-"+k;b.addListener(c,"message",function e(f){f.data==d&&(b.stopPropagation(f),b.removeListener(c,"message",e),a())}),c.postMessage(d,"*")}}b.nextFrame="object"==typeof window&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),b.nextFrame?b.nextFrame=b.nextFrame.bind(window):b.nextFrame=function(a){setTimeout(a,17)}}),ace.define("ace/lib/lang",["require","exports","module"],function(a,b,c){"use strict";b.last=function(a){return a[a.length-1]},b.stringReverse=function(a){return a.split("").reverse().join("")},b.stringRepeat=function(a,b){for(var c="";b>0;)1&b&&(c+=a),(b>>=1)&&(a+=a);return c};var d=/^\s\s*/,e=/\s\s*$/;b.stringTrimLeft=function(a){return a.replace(d,"")},b.stringTrimRight=function(a){return a.replace(e,"")},b.copyObject=function(a){var b={};for(var c in a)b[c]=a[c];return b},b.copyArray=function(a){for(var b=[],c=0,d=a.length;d>c;c++)a[c]&&"object"==typeof a[c]?b[c]=this.copyObject(a[c]):b[c]=a[c];return b},b.deepCopy=function f(a){if("object"!=typeof a||!a)return a;var b;if(Array.isArray(a)){b=[];for(var c=0;c<a.length;c++)b[c]=f(a[c]);return b}var d=a.constructor;if(d===RegExp)return a;b=d();for(var c in a)b[c]=f(a[c]);return b},b.arrayToMap=function(a){for(var b={},c=0;c<a.length;c++)b[a[c]]=1;return b},b.createMap=function(a){var b=Object.create(null);for(var c in a)b[c]=a[c];return b},b.arrayRemove=function(a,b){for(var c=0;c<=a.length;c++)b===a[c]&&a.splice(c,1)},b.escapeRegExp=function(a){return a.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},b.escapeHTML=function(a){return a.replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},b.getMatchOffsets=function(a,b){var c=[];return a.replace(b,function(a){c.push({offset:arguments[arguments.length-2],length:a.length})}),c},b.deferredCall=function(a){var b=null,c=function(){b=null,a()},d=function(a){return d.cancel(),b=setTimeout(c,a||0),d};return d.schedule=d,d.call=function(){return this.cancel(),a(),d},d.cancel=function(){return clearTimeout(b),b=null,d},d.isPending=function(){return b},d},b.delayedCall=function(a,b){var c=null,d=function(){c=null,a()},e=function(a){null==c&&(c=setTimeout(d,a||b))};return e.delay=function(a){c&&clearTimeout(c),c=setTimeout(d,a||b)},e.schedule=e,e.call=function(){this.cancel(),a()},e.cancel=function(){c&&clearTimeout(c),c=null},e.isPending=function(){return c},e}}),ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/lib/dom","ace/lib/lang"],function(a,b,c){"use strict";var d=a("../lib/event"),e=a("../lib/useragent"),f=a("../lib/dom"),g=a("../lib/lang"),h=e.isChrome<18,i=e.isIE,j=function(a,b){function c(a){if(!p){if(p=!0,C)b=0,c=a?0:l.value.length-1;else var b=a?2:1,c=2;try{l.setSelectionRange(b,c)}catch(d){}p=!1}}function j(){p||(l.value=m,e.isWebKit&&v.schedule())}function k(){clearTimeout(P),P=setTimeout(function(){q&&(l.style.cssText=q,q=""),null==b.renderer.$keepTextAreaAtCursor&&(b.renderer.$keepTextAreaAtCursor=!0,b.renderer.$moveTextAreaToCursor())},e.isOldIE?200:0)}var l=f.createElement("textarea");l.className="ace_text-input",e.isTouchPad&&l.setAttribute("x-palm-disable-auto-cap",!0),l.setAttribute("wrap","off"),l.setAttribute("autocorrect","off"),l.setAttribute("autocapitalize","off"),l.setAttribute("spellcheck",!1),l.style.opacity="0",e.isOldIE&&(l.style.top="-1000px"),a.insertBefore(l,a.firstChild);var m="",n=!1,o=!1,p=!1,q="",r=!0;try{var s=document.activeElement===l}catch(t){}d.addListener(l,"blur",function(a){b.onBlur(a),s=!1}),d.addListener(l,"focus",function(a){s=!0,b.onFocus(a),c()}),this.focus=function(){if(q)return l.focus();var a=l.style.top;l.style.position="fixed",l.style.top="0px",l.focus(),setTimeout(function(){l.style.position="","0px"==l.style.top&&(l.style.top=a)},0)},this.blur=function(){l.blur()},this.isFocused=function(){return s};var u=g.delayedCall(function(){s&&c(r)}),v=g.delayedCall(function(){p||(l.value=m,s&&c())});e.isWebKit||b.addEventListener("changeSelection",function(){b.selection.isEmpty()!=r&&(r=!r,u.schedule())}),j(),s&&b.onFocus();var w=function(a){return 0===a.selectionStart&&a.selectionEnd===a.value.length};if(!l.setSelectionRange&&l.createTextRange&&(l.setSelectionRange=function(a,b){var c=this.createTextRange();c.collapse(!0),c.moveStart("character",a),c.moveEnd("character",b),c.select()},w=function(a){try{var b=a.ownerDocument.selection.createRange()}catch(c){}return b&&b.parentElement()==a?b.text==a.value:!1}),e.isOldIE){var x=!1,y=function(a){if(!x){var b=l.value;if(!p&&b&&b!=m)return a&&b==m[0]?z.schedule():(E(b),x=!0,j(),x=!1,void 0)}},z=g.delayedCall(y);d.addListener(l,"propertychange",y);var A={13:1,27:1};d.addListener(l,"keyup",function(a){return p&&(!l.value||A[a.keyCode])&&setTimeout(N,0),(l.value.charCodeAt(0)||0)<129?z.call():void(p?M():L())}),d.addListener(l,"keydown",function(a){z.schedule(50)})}var B=function(a){n?n=!1:w(l)?(b.selectAll(),c()):C&&c(b.selection.isEmpty())},C=null;this.setInputHandler=function(a){C=a},this.getInputHandler=function(){return C};var D=!1,E=function(a){C&&(a=C(a),C=null),o?(c(),a&&b.onPaste(a),o=!1):a==m.charAt(0)?D?b.execCommand("del",{source:"ace"}):b.execCommand("backspace",{source:"ace"}):(a.substring(0,2)==m?a=a.substr(2):a.charAt(0)==m.charAt(0)?a=a.substr(1):a.charAt(a.length-1)==m.charAt(0)&&(a=a.slice(0,-1)),a.charAt(a.length-1)==m.charAt(0)&&(a=a.slice(0,-1)),a&&b.onTextInput(a)),D&&(D=!1)},F=function(a){if(!p){var b=l.value;E(b),j()}},G=function(a,b){var c=a.clipboardData||window.clipboardData;if(c&&!h){var d=i?"Text":"text/plain";return b?c.setData(d,b)!==!1:c.getData(d)}},H=function(a,e){var f=b.getCopyText();return f?void(G(a,f)?(e?b.onCut():b.onCopy(),d.preventDefault(a)):(n=!0,l.value=f,l.select(),setTimeout(function(){n=!1,j(),c(),e?b.onCut():b.onCopy()}))):d.preventDefault(a)},I=function(a){H(a,!0)},J=function(a){H(a,!1)},K=function(a){var f=G(a);"string"==typeof f?(f&&b.onPaste(f,a),e.isIE&&setTimeout(c),d.preventDefault(a)):(l.value="",o=!0)};d.addCommandKeyListener(l,b.onCommandKey.bind(b)),d.addListener(l,"select",B),d.addListener(l,"input",F),d.addListener(l,"cut",I),d.addListener(l,"copy",J),d.addListener(l,"paste",K),(!("oncut"in l)||!("oncopy"in l)||!("onpaste"in l))&&d.addListener(a,"keydown",function(a){if((!e.isMac||a.metaKey)&&a.ctrlKey)switch(a.keyCode){case 67:J(a);break;case 86:K(a);break;case 88:I(a)}});var L=function(a){p||!b.onCompositionStart||b.$readOnly||(p={},b.onCompositionStart(),setTimeout(M,0),b.on("mousedown",N),b.selection.isEmpty()||(b.insert(""),b.session.markUndoGroup(),b.selection.clearSelection()),b.session.markUndoGroup())},M=function(){if(p&&b.onCompositionUpdate&&!b.$readOnly){var a=l.value.replace(/\x01/g,"");if(p.lastValue!==a&&(b.onCompositionUpdate(a),p.lastValue&&b.undo(),p.lastValue=a,p.lastValue)){var c=b.selection.getRange();b.insert(p.lastValue),b.session.markUndoGroup(),p.range=b.selection.getRange(),b.selection.setRange(c),b.selection.clearSelection()}}},N=function(a){if(b.onCompositionEnd&&!b.$readOnly){var c=p;p=!1;var d=setTimeout(function(){d=null;var a=l.value.replace(/\x01/g,"");p||(a==c.lastValue?j():!c.lastValue&&a&&(j(),E(a)))});C=function(a){return d&&clearTimeout(d),a=a.replace(/\x01/g,""),a==c.lastValue?"":(c.lastValue&&d&&b.undo(),a)},b.onCompositionEnd(),b.removeListener("mousedown",N),"compositionend"==a.type&&c.range&&b.selection.setRange(c.range)}},O=g.delayedCall(M,50);d.addListener(l,"compositionstart",L),e.isGecko?d.addListener(l,"text",function(){O.schedule()}):(d.addListener(l,"keyup",function(){O.schedule()}),d.addListener(l,"keydown",function(){O.schedule()})),d.addListener(l,"compositionend",N),this.getElement=function(){return l},this.setReadOnly=function(a){l.readOnly=a},this.onContextMenu=function(a){D=!0,c(b.selection.isEmpty()),b._emit("nativecontextmenu",{target:b,domEvent:a}),this.moveToMouse(a,!0)},this.moveToMouse=function(a,c){if(c||!e.isOldIE){q||(q=l.style.cssText),l.style.cssText=(c?"z-index:100000;":"")+"height:"+l.style.height+";"+(e.isIE?"opacity:0.1;":"");var g=b.container.getBoundingClientRect(),h=f.computedStyle(b.container),i=g.top+(parseInt(h.borderTopWidth)||0),j=g.left+(parseInt(g.borderLeftWidth)||0),m=g.bottom-i-l.clientHeight-2,n=function(a){l.style.left=a.clientX-j-2+"px",l.style.top=Math.min(a.clientY-i-2,m)+"px"};n(a),"mousedown"==a.type&&(b.renderer.$keepTextAreaAtCursor&&(b.renderer.$keepTextAreaAtCursor=null),clearTimeout(P),e.isWin&&!e.isOldIE&&d.capture(b.container,n,k))}},this.onContextMenuClose=k;var P,Q=function(a){b.textInput.onContextMenu(a),k()};d.addListener(l,"mouseup",Q),d.addListener(l,"mousedown",function(a){a.preventDefault(),k()}),d.addListener(b.renderer.scroller,"contextmenu",Q),d.addListener(l,"contextmenu",Q)};b.TextInput=j}),ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(a,b,c){"use strict";function d(a){a.$clickSelection=null;var b=a.editor;b.setDefaultHandler("mousedown",this.onMouseDown.bind(a)),b.setDefaultHandler("dblclick",this.onDoubleClick.bind(a)),b.setDefaultHandler("tripleclick",this.onTripleClick.bind(a)),b.setDefaultHandler("quadclick",this.onQuadClick.bind(a)),b.setDefaultHandler("mousewheel",this.onMouseWheel.bind(a)),b.setDefaultHandler("touchmove",this.onTouchMove.bind(a));var c=["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"];c.forEach(function(b){a[b]=this[b]},this),a.selectByLines=this.extendSelectionBy.bind(a,"getLineRange"),a.selectByWords=this.extendSelectionBy.bind(a,"getWordRange")}function e(a,b,c,d){return Math.sqrt(Math.pow(c-a,2)+Math.pow(d-b,2))}function f(a,b){if(a.start.row==a.end.row)var c=2*b.column-a.start.column-a.end.column;else if(a.start.row!=a.end.row-1||a.start.column||a.end.column)var c=2*b.row-a.start.row-a.end.row;else var c=b.column-4;return 0>c?{cursor:a.start,anchor:a.end}:{cursor:a.end,anchor:a.start}}var g=(a("../lib/dom"),a("../lib/event"),a("../lib/useragent"),0);(function(){this.onMouseDown=function(a){var b=a.inSelection(),c=a.getDocumentPosition();this.mousedownEvent=a;var d=this.editor,e=a.getButton();if(0!==e){var f=d.getSelectionRange(),g=f.isEmpty();return d.$blockScrolling++,(g||1==e)&&d.selection.moveToPosition(c),d.$blockScrolling--,2==e&&d.textInput.onContextMenu(a.domEvent),void 0}return this.mousedownEvent.time=Date.now(),!b||d.isFocused()||(d.focus(),!this.$focusTimout||this.$clickSelection||d.inMultiSelectMode)?(this.captureMouse(a),this.startSelect(c,a.domEvent._clicks>1),a.preventDefault()):(this.setState("focusWait"),void this.captureMouse(a))},this.startSelect=function(a,b){a=a||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var c=this.editor;c.$blockScrolling++,this.mousedownEvent.getShiftKey()?c.selection.selectToPosition(a):b||c.selection.moveToPosition(a),b||this.select(),c.renderer.scroller.setCapture&&c.renderer.scroller.setCapture(),c.setStyle("ace_selecting"),this.setState("select"),c.$blockScrolling--},this.select=function(){var a,b=this.editor,c=b.renderer.screenToTextCoordinates(this.x,this.y);if(b.$blockScrolling++,this.$clickSelection){var d=this.$clickSelection.comparePoint(c);if(-1==d)a=this.$clickSelection.end;else if(1==d)a=this.$clickSelection.start;else{var e=f(this.$clickSelection,c);c=e.cursor,a=e.anchor}b.selection.setSelectionAnchor(a.row,a.column)}b.selection.selectToPosition(c),b.$blockScrolling--,b.renderer.scrollCursorIntoView()},this.extendSelectionBy=function(a){var b,c=this.editor,d=c.renderer.screenToTextCoordinates(this.x,this.y),e=c.selection[a](d.row,d.column);if(c.$blockScrolling++,this.$clickSelection){var g=this.$clickSelection.comparePoint(e.start),h=this.$clickSelection.comparePoint(e.end);if(-1==g&&0>=h)b=this.$clickSelection.end,e.end.row==d.row&&e.end.column==d.column||(d=e.start);else if(1==h&&g>=0)b=this.$clickSelection.start,e.start.row==d.row&&e.start.column==d.column||(d=e.end);else if(-1==g&&1==h)d=e.end,b=e.start;else{var i=f(this.$clickSelection,d);d=i.cursor,b=i.anchor}c.selection.setSelectionAnchor(b.row,b.column)}c.selection.selectToPosition(d),c.$blockScrolling--,c.renderer.scrollCursorIntoView()},this.selectEnd=this.selectAllEnd=this.selectByWordsEnd=this.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting"),this.editor.renderer.scroller.releaseCapture&&this.editor.renderer.scroller.releaseCapture()},this.focusWait=function(){var a=e(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),b=Date.now();(a>g||b-this.mousedownEvent.time>this.$focusTimout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},this.onDoubleClick=function(a){var b=a.getDocumentPosition(),c=this.editor,d=c.session,e=d.getBracketRange(b);e?(e.isEmpty()&&(e.start.column--,e.end.column++),this.setState("select")):(e=c.selection.getWordRange(b.row,b.column),this.setState("selectByWords")),this.$clickSelection=e,this.select()},this.onTripleClick=function(a){var b=a.getDocumentPosition(),c=this.editor;this.setState("selectByLines");var d=c.getSelectionRange();d.isMultiLine()&&d.contains(b.row,b.column)?(this.$clickSelection=c.selection.getLineRange(d.start.row),this.$clickSelection.end=c.selection.getLineRange(d.end.row).end):this.$clickSelection=c.selection.getLineRange(b.row),this.select()},this.onQuadClick=function(a){var b=this.editor;b.selectAll(),this.$clickSelection=b.getSelectionRange(),this.setState("selectAll")},this.onMouseWheel=function(a){if(!a.getAccelKey()){a.getShiftKey()&&a.wheelY&&!a.wheelX&&(a.wheelX=a.wheelY,a.wheelY=0);var b=a.domEvent.timeStamp,c=b-(this.$lastScrollTime||0),d=this.editor,e=d.renderer.isScrollableBy(a.wheelX*a.speed,a.wheelY*a.speed);return e||200>c?(this.$lastScrollTime=b,d.renderer.scrollBy(a.wheelX*a.speed,a.wheelY*a.speed),a.stop()):void 0}},this.onTouchMove=function(a){var b=a.domEvent.timeStamp,c=b-(this.$lastScrollTime||0),d=this.editor,e=d.renderer.isScrollableBy(a.wheelX*a.speed,a.wheelY*a.speed);return e||200>c?(this.$lastScrollTime=b,d.renderer.scrollBy(a.wheelX*a.speed,a.wheelY*a.speed),a.stop()):void 0}}).call(d.prototype),b.DefaultHandlers=d}),ace.define("ace/tooltip",["require","exports","module","ace/lib/oop","ace/lib/dom"],function(a,b,c){"use strict";function d(a){this.isOpen=!1,this.$element=null,this.$parentNode=a}var e=(a("./lib/oop"),a("./lib/dom"));(function(){this.$init=function(){return this.$element=e.createElement("div"),this.$element.className="ace_tooltip",this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},this.getElement=function(){return this.$element||this.$init()},this.setText=function(a){e.setInnerText(this.getElement(),a)},this.setHtml=function(a){this.getElement().innerHTML=a},this.setPosition=function(a,b){this.getElement().style.left=a+"px",this.getElement().style.top=b+"px"},this.setClassName=function(a){e.addCssClass(this.getElement(),a)},this.show=function(a,b,c){null!=a&&this.setText(a),null!=b&&null!=c&&this.setPosition(b,c),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},this.hide=function(){this.isOpen&&(this.getElement().style.display="none",this.isOpen=!1)},this.getHeight=function(){return this.getElement().offsetHeight},this.getWidth=function(){return this.getElement().offsetWidth}}).call(d.prototype),b.Tooltip=d}),ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event","ace/tooltip"],function(a,b,c){"use strict";function d(a){function b(){var b=l.getDocumentPosition().row,e=i.$annotations[b];if(!e)return c();var f=g.session.getLength();if(b==f){var h=g.renderer.pixelToScreenCoordinates(0,l.y).row,k=l.$pos;if(h>g.session.documentToScreenRow(k.row,k.column))return c()}if(m!=e)if(m=e.text.join("<br/>"),j.setHtml(m),j.show(),g.on("mousewheel",c),a.$tooltipFollowsMouse)d(l);else{var n=l.domEvent.target,o=n.getBoundingClientRect(),p=j.getElement().style;p.left=o.right+"px",p.top=o.bottom+"px"}}function c(){k&&(k=clearTimeout(k)),m&&(j.hide(),m=null,g.removeEventListener("mousewheel",c))}function d(a){j.setPosition(a.x,a.y)}var g=a.editor,i=g.renderer.$gutterLayer,j=new e(g.container);a.editor.setDefaultHandler("guttermousedown",function(b){if(g.isFocused()&&0==b.getButton()){var c=i.getRegion(b);if("foldWidgets"!=c){var d=b.getDocumentPosition().row,e=g.session.selection;if(b.getShiftKey())e.selectTo(d,0);else{if(2==b.domEvent.detail)return g.selectAll(),b.preventDefault();a.$clickSelection=g.selection.getLineRange(d)}return a.setState("selectByLines"),a.captureMouse(b),b.preventDefault()}}});var k,l,m;a.editor.setDefaultHandler("guttermousemove",function(e){var g=e.domEvent.target||e.domEvent.srcElement;return f.hasCssClass(g,"ace_fold-widget")?c():(m&&a.$tooltipFollowsMouse&&d(e),l=e,void(k||(k=setTimeout(function(){k=null,l&&!a.isMousePressed?b():c()},50))))}),h.addListener(g.renderer.$gutter,"mouseout",function(a){l=null,m&&!k&&(k=setTimeout(function(){k=null,c()},50))}),g.on("changeSession",c)}function e(a){i.call(this,a)}var f=a("../lib/dom"),g=a("../lib/oop"),h=a("../lib/event"),i=a("../tooltip").Tooltip;g.inherits(e,i),function(){this.setPosition=function(a,b){var c=window.innerWidth||document.documentElement.clientWidth,d=window.innerHeight||document.documentElement.clientHeight,e=this.getWidth(),f=this.getHeight();a+=15,b+=15,a+e>c&&(a-=a+e-c),b+f>d&&(b-=20+f),i.prototype.setPosition.call(this,a,b)}}.call(e.prototype),b.GutterHandler=d}),ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(a,b,c){"use strict";var d=a("../lib/event"),e=a("../lib/useragent"),f=b.MouseEvent=function(a,b){this.domEvent=a,this.editor=b,this.x=this.clientX=a.clientX,this.y=this.clientY=a.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1};(function(){this.stopPropagation=function(){d.stopPropagation(this.domEvent),this.propagationStopped=!0},this.preventDefault=function(){d.preventDefault(this.domEvent),this.defaultPrevented=!0},this.stop=function(){this.stopPropagation(),this.preventDefault()},this.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},this.inSelection=function(){if(null!==this.$inSelection)return this.$inSelection;var a=this.editor,b=a.getSelectionRange();if(b.isEmpty())this.$inSelection=!1;else{var c=this.getDocumentPosition();this.$inSelection=b.contains(c.row,c.column)}return this.$inSelection},this.getButton=function(){return d.getButton(this.domEvent)},this.getShiftKey=function(){return this.domEvent.shiftKey},this.getAccelKey=e.isMac?function(){return this.domEvent.metaKey}:function(){return this.domEvent.ctrlKey}}).call(f.prototype)}),ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(a,b,c){"use strict";function d(a){function b(a,b){var c=Date.now(),d=!b||a.row!=b.row,f=!b||a.column!=b.column;if(!C||d||f)q.$blockScrolling+=1,q.moveCursorToPosition(a),q.$blockScrolling-=1,C=c,D={x:u,y:v};else{var g=e(D.x,D.y,u,v);g>k?C=null:c-C>=j&&(q.renderer.scrollCursorIntoView(),C=null)}}function c(a,b){var c=Date.now(),d=q.renderer.layerConfig.lineHeight,e=q.renderer.layerConfig.characterWidth,f=q.renderer.scroller.getBoundingClientRect(),g={x:{left:u-f.left,right:f.right-u},y:{top:v-f.top,bottom:f.bottom-v}},h=Math.min(g.x.left,g.x.right),j=Math.min(g.y.top,g.y.bottom),k={row:a.row,column:a.column};2>=h/e&&(k.column+=g.x.left<g.x.right?-3:2),1>=j/d&&(k.row+=g.y.top<g.y.bottom?-1:1);var l=a.row!=k.row,m=a.column!=k.column,n=!b||a.row!=b.row;l||m&&!n?B?c-B>=i&&q.renderer.scrollCursorIntoView(k):B=c:B=null}function d(){var a=y;y=q.renderer.screenToTextCoordinates(u,v),b(y,a),c(y,a)}function l(){x=q.selection.toOrientedRange(),t=q.session.addMarker(x,"ace_selection",q.getSelectionStyle()),q.clearSelection(),q.isFocused()&&q.renderer.$cursorLayer.setBlinking(!1),clearInterval(w),d(),w=setInterval(d,20),F=0,g.addListener(document,"mousemove",n)}function m(){clearInterval(w),q.session.removeMarker(t),t=null,q.$blockScrolling+=1,q.selection.fromOrientedRange(x),q.$blockScrolling-=1,q.isFocused()&&!A&&q.renderer.$cursorLayer.setBlinking(!q.getReadOnly()),x=null,y=null,F=0,B=null,C=null,g.removeListener(document,"mousemove",n)}function n(){null==G&&(G=setTimeout(function(){null!=G&&t&&m()},20))}function o(a){var b=a.types;return!b||Array.prototype.some.call(b,function(a){return"text/plain"==a||"Text"==a})}function p(a){var b=["copy","copymove","all","uninitialized"],c=["move","copymove","linkmove","all","uninitialized"],d=h.isMac?a.altKey:a.ctrlKey,e="uninitialized";try{e=a.dataTransfer.effectAllowed.toLowerCase()}catch(a){}var f="none";return d&&b.indexOf(e)>=0?f="copy":c.indexOf(e)>=0?f="move":b.indexOf(e)>=0&&(f="copy"),f}var q=a.editor,r=f.createElement("img");r.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",h.isOpera&&(r.style.cssText="width:1px;height:1px;position:fixed;top:0;left:0;z-index:2147483647;opacity:0;");var s=["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"];s.forEach(function(b){a[b]=this[b]},this),q.addEventListener("mousedown",this.onMouseDown.bind(a));var t,u,v,w,x,y,z,A,B,C,D,E=q.container,F=0;this.onDragStart=function(a){if(this.cancelDrag||!E.draggable){var b=this;return setTimeout(function(){b.startSelect(),b.captureMouse(a)},0),a.preventDefault()}x=q.getSelectionRange();var c=a.dataTransfer;c.effectAllowed=q.getReadOnly()?"copy":"copyMove",h.isOpera&&(q.container.appendChild(r),r.scrollTop=0),c.setDragImage&&c.setDragImage(r,0,0),h.isOpera&&q.container.removeChild(r),c.clearData(),c.setData("Text",q.session.getTextRange()),A=!0,this.setState("drag")},this.onDragEnd=function(a){if(E.draggable=!1,A=!1,this.setState(null),!q.getReadOnly()){var b=a.dataTransfer.dropEffect;!z&&"move"==b&&q.session.remove(q.getSelectionRange()),q.renderer.$cursorLayer.setBlinking(!0)}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(a){return!q.getReadOnly()&&o(a.dataTransfer)?(u=a.clientX,v=a.clientY,t||l(),F++,a.dataTransfer.dropEffect=z=p(a),g.preventDefault(a)):void 0},this.onDragOver=function(a){return!q.getReadOnly()&&o(a.dataTransfer)?(u=a.clientX,v=a.clientY,t||(l(),F++),null!==G&&(G=null),a.dataTransfer.dropEffect=z=p(a),g.preventDefault(a)):void 0},this.onDragLeave=function(a){return F--,0>=F&&t?(m(),z=null,g.preventDefault(a)):void 0},this.onDrop=function(a){if(y){var b=a.dataTransfer;if(A)switch(z){case"move":x=x.contains(y.row,y.column)?{start:y,end:y}:q.moveText(x,y);break;case"copy":x=q.moveText(x,y,!0)}else{var c=b.getData("Text");x={start:y,end:q.session.insert(y,c)},q.focus(),z=null}return m(),g.preventDefault(a)}},g.addListener(E,"dragstart",this.onDragStart.bind(a)),g.addListener(E,"dragend",this.onDragEnd.bind(a)),g.addListener(E,"dragenter",this.onDragEnter.bind(a)),g.addListener(E,"dragover",this.onDragOver.bind(a)),g.addListener(E,"dragleave",this.onDragLeave.bind(a)),g.addListener(E,"drop",this.onDrop.bind(a));var G=null}function e(a,b,c,d){return Math.sqrt(Math.pow(c-a,2)+Math.pow(d-b,2))}var f=a("../lib/dom"),g=a("../lib/event"),h=a("../lib/useragent"),i=200,j=200,k=5;(function(){this.dragWait=function(){var a=Date.now()-this.mousedownEvent.time;a>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){var a=this.editor.container;a.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(a){this.editor.renderer.$cursorLayer.setBlinking(!this.editor.getReadOnly()),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var a=this.editor,b=a.container;b.draggable=!0,a.renderer.$cursorLayer.setBlinking(!1),a.setStyle("ace_dragging");var c=h.isWin?"default":"move";a.renderer.setCursorStyle(c),this.setState("dragReady")},this.onMouseDrag=function(a){var b=this.editor.container;if(h.isIE&&"dragReady"==this.state){var c=e(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);c>3&&b.dragDrop()}if("dragWait"===this.state){var c=e(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);c>0&&(b.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))}},this.onMouseDown=function(a){if(this.$dragEnabled){this.mousedownEvent=a;var b=this.editor,c=a.inSelection(),d=a.getButton(),e=a.domEvent.detail||1;if(1===e&&0===d&&c){if(a.editor.inMultiSelectMode&&(a.getAccelKey()||a.getShiftKey()))return;this.mousedownEvent.time=Date.now();var f=a.domEvent.target||a.domEvent.srcElement;if("unselectable"in f&&(f.unselectable="on"),b.getDragDelay()){if(h.isWebKit){this.cancelDrag=!0;var g=b.container;g.draggable=!0}this.setState("dragWait")}else this.startDrag();this.captureMouse(a,this.onMouseDrag.bind(this)),a.defaultPrevented=!0}}}}).call(d.prototype),b.DragdropHandler=d}),ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(a,b,c){"use strict";var d=a("./dom");b.get=function(a,b){var c=new XMLHttpRequest;c.open("GET",a,!0),c.onreadystatechange=function(){4===c.readyState&&b(c.responseText)},c.send(null)},b.loadScript=function(a,b){var c=d.getDocumentHead(),e=document.createElement("script");e.src=a,c.appendChild(e),e.onload=e.onreadystatechange=function(a,c){!c&&e.readyState&&"loaded"!=e.readyState&&"complete"!=e.readyState||(e=e.onload=e.onreadystatechange=null,c||b())}},b.qualifyURL=function(a){var b=document.createElement("a");return b.href=a,b.href}}),ace.define("ace/lib/event_emitter",["require","exports","module"],function(a,b,c){"use strict";var d={},e=function(){this.propagationStopped=!0},f=function(){this.defaultPrevented=!0};d._emit=d._dispatchEvent=function(a,b){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var c=this._eventRegistry[a]||[],d=this._defaultHandlers[a];if(c.length||d){"object"==typeof b&&b||(b={}),b.type||(b.type=a),b.stopPropagation||(b.stopPropagation=e),b.preventDefault||(b.preventDefault=f),c=c.slice();for(var g=0;g<c.length&&(c[g](b,this),!b.propagationStopped);g++);return d&&!b.defaultPrevented?d(b,this):void 0}},d._signal=function(a,b){var c=(this._eventRegistry||{})[a];if(c){c=c.slice();for(var d=0;d<c.length;d++)c[d](b,this)}},d.once=function(a,b){var c=this;b&&this.addEventListener(a,function d(){c.removeEventListener(a,d),b.apply(null,arguments)})},d.setDefaultHandler=function(a,b){var c=this._defaultHandlers;if(c||(c=this._defaultHandlers={_disabled_:{}}),c[a]){var d=c[a],e=c._disabled_[a];e||(c._disabled_[a]=e=[]),e.push(d);var f=e.indexOf(b);-1!=f&&e.splice(f,1)}c[a]=b},d.removeDefaultHandler=function(a,b){var c=this._defaultHandlers;if(c){var d=c._disabled_[a];if(c[a]==b){c[a];d&&this.setDefaultHandler(a,d.pop())}else if(d){var e=d.indexOf(b);-1!=e&&d.splice(e,1)}}},d.on=d.addEventListener=function(a,b,c){this._eventRegistry=this._eventRegistry||{};var d=this._eventRegistry[a];return d||(d=this._eventRegistry[a]=[]),-1==d.indexOf(b)&&d[c?"unshift":"push"](b),b},d.off=d.removeListener=d.removeEventListener=function(a,b){this._eventRegistry=this._eventRegistry||{};var c=this._eventRegistry[a];if(c){var d=c.indexOf(b);-1!==d&&c.splice(d,1)}},d.removeAllListeners=function(a){this._eventRegistry&&(this._eventRegistry[a]=[])},b.EventEmitter=d}),ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(a,b,c){"no use strict";function d(a){"undefined"!=typeof console&&console.warn&&console.warn.apply(console,arguments)}function e(a,b){var c=new Error(a);c.data=b,"object"==typeof console&&console.error&&console.error(c),setTimeout(function(){throw c})}var f=a("./oop"),g=a("./event_emitter").EventEmitter,h={setOptions:function(a){Object.keys(a).forEach(function(b){this.setOption(b,a[b])},this)},getOptions:function(a){var b={};return a?Array.isArray(a)||(b=a,a=Object.keys(b)):a=Object.keys(this.$options),a.forEach(function(a){b[a]=this.getOption(a)},this),b},setOption:function(a,b){if(this["$"+a]!==b){var c=this.$options[a];return c?c.forwardTo?this[c.forwardTo]&&this[c.forwardTo].setOption(a,b):(c.handlesSet||(this["$"+a]=b),void(c&&c.set&&c.set.call(this,b))):d('misspelled option "'+a+'"')}},getOption:function(a){var b=this.$options[a];return b?b.forwardTo?this[b.forwardTo]&&this[b.forwardTo].getOption(a):b&&b.get?b.get.call(this):this["$"+a]:d('misspelled option "'+a+'"')}},i=function(){this.$defaultOptions={}};(function(){f.implement(this,g),this.defineOptions=function(a,b,c){return a.$options||(this.$defaultOptions[b]=a.$options={}),Object.keys(c).forEach(function(b){var d=c[b];"string"==typeof d&&(d={forwardTo:d}),d.name||(d.name=b),a.$options[d.name]=d,"initialValue"in d&&(a["$"+d.name]=d.initialValue)}),f.implement(a,h),this},this.resetOptions=function(a){Object.keys(a.$options).forEach(function(b){var c=a.$options[b];"value"in c&&a.setOption(b,c.value)})},this.setDefaultValue=function(a,b,c){var d=this.$defaultOptions[a]||(this.$defaultOptions[a]={});d[b]&&(d.forwardTo?this.setDefaultValue(d.forwardTo,b,c):d[b].value=c)},this.setDefaultValues=function(a,b){Object.keys(b).forEach(function(c){this.setDefaultValue(a,c,b[c])},this)},this.warn=d,this.reportError=e}).call(i.prototype),b.AppConfig=i}),ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/lib/net","ace/lib/app_config"],function(a,b,c){"no use strict";function d(d){if(i&&i.document){j.packaged=d||a.packaged||c.packaged||i.define&&define.packaged;for(var f={},g="",h=document.currentScript||document._currentScript,k=h&&h.ownerDocument||document,l=k.getElementsByTagName("script"),m=0;m<l.length;m++){var n=l[m],o=n.src||n.getAttribute("src");if(o){for(var p=n.attributes,q=0,r=p.length;r>q;q++){var s=p[q];0===s.name.indexOf("data-ace-")&&(f[e(s.name.replace(/^data-ace-/,""))]=s.value)}var t=o.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/);t&&(g=t[1])}}g&&(f.base=f.base||g,f.packaged=!0),f.basePath=f.base,f.workerPath=f.workerPath||f.base,f.modePath=f.modePath||f.base,f.themePath=f.themePath||f.base,delete f.base;for(var u in f)"undefined"!=typeof f[u]&&b.set(u,f[u])}}function e(a){return a.replace(/-(.)/g,function(a,b){
return b.toUpperCase()})}var f=a("./lib/lang"),g=(a("./lib/oop"),a("./lib/net")),h=a("./lib/app_config").AppConfig;c.exports=b=new h;var i=function(){return this||"undefined"!=typeof window&&window}(),j={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{}};b.get=function(a){if(!j.hasOwnProperty(a))throw new Error("Unknown config key: "+a);return j[a]},b.set=function(a,b){if(!j.hasOwnProperty(a))throw new Error("Unknown config key: "+a);j[a]=b},b.all=function(){return f.copyObject(j)},b.moduleUrl=function(a,b){if(j.$moduleUrls[a])return j.$moduleUrls[a];var c=a.split("/");b=b||c[c.length-2]||"";var d="snippets"==b?"/":"-",e=c[c.length-1];if("worker"==b&&"-"==d){var f=new RegExp("^"+b+"[\\-_]|[\\-_]"+b+"$","g");e=e.replace(f,"")}(!e||e==b)&&c.length>1&&(e=c[c.length-2]);var g=j[b+"Path"];return null==g?g=j.basePath:"/"==d&&(b=d=""),g&&"/"!=g.slice(-1)&&(g+="/"),g+b+d+e+this.get("suffix")},b.setModuleUrl=function(a,b){return j.$moduleUrls[a]=b},b.$loading={},b.loadModule=function(c,d){var e,f;Array.isArray(c)&&(f=c[0],c=c[1]);try{e=a(c)}catch(h){}if(e&&!b.$loading[c])return d&&d(e);if(b.$loading[c]||(b.$loading[c]=[]),b.$loading[c].push(d),!(b.$loading[c].length>1)){var i=function(){a([c],function(a){b._emit("load.module",{name:c,module:a});var d=b.$loading[c];b.$loading[c]=null,d.forEach(function(b){b&&b(a)})})};return b.get("packaged")?void g.loadScript(b.moduleUrl(c,f),i):i()}},b.init=d}),ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/config"],function(a,b,c){"use strict";var d=a("../lib/event"),e=a("../lib/useragent"),f=a("./default_handlers").DefaultHandlers,g=a("./default_gutter_handler").GutterHandler,h=a("./mouse_event").MouseEvent,i=a("./dragdrop_handler").DragdropHandler,j=a("../config"),k=function(a){var b=this;this.editor=a,new f(this),new g(this),new i(this);var c=function(b){var c=!document.hasFocus||!document.hasFocus()||!a.isFocused()&&document.activeElement==(a.textInput&&a.textInput.getElement());c&&window.focus(),a.focus()},h=a.renderer.getMouseEventTarget();d.addListener(h,"click",this.onMouseEvent.bind(this,"click")),d.addListener(h,"mousemove",this.onMouseMove.bind(this,"mousemove")),d.addMultiMouseDownListener([h,a.renderer.scrollBarV&&a.renderer.scrollBarV.inner,a.renderer.scrollBarH&&a.renderer.scrollBarH.inner,a.textInput&&a.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent"),d.addMouseWheelListener(a.container,this.onMouseWheel.bind(this,"mousewheel")),d.addTouchMoveListener(a.container,this.onTouchMove.bind(this,"touchmove"));var j=a.renderer.$gutter;d.addListener(j,"mousedown",this.onMouseEvent.bind(this,"guttermousedown")),d.addListener(j,"click",this.onMouseEvent.bind(this,"gutterclick")),d.addListener(j,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick")),d.addListener(j,"mousemove",this.onMouseEvent.bind(this,"guttermousemove")),d.addListener(h,"mousedown",c),d.addListener(j,"mousedown",c),e.isIE&&a.renderer.scrollBarV&&(d.addListener(a.renderer.scrollBarV.element,"mousedown",c),d.addListener(a.renderer.scrollBarH.element,"mousedown",c)),a.on("mousemove",function(c){if(!b.state&&!b.$dragDelay&&b.$dragEnabled){var d=a.renderer.screenToTextCoordinates(c.x,c.y),e=a.session.selection.getRange(),f=a.renderer;!e.isEmpty()&&e.insideStart(d.row,d.column)?f.setCursorStyle("default"):f.setCursorStyle("")}})};(function(){this.onMouseEvent=function(a,b){this.editor._emit(a,new h(b,this.editor))},this.onMouseMove=function(a,b){var c=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;c&&c.length&&this.editor._emit(a,new h(b,this.editor))},this.onMouseWheel=function(a,b){var c=new h(b,this.editor);c.speed=2*this.$scrollSpeed,c.wheelX=b.wheelX,c.wheelY=b.wheelY,this.editor._emit(a,c)},this.onTouchMove=function(a,b){var c=new h(b,this.editor);c.speed=1,c.wheelX=b.wheelX,c.wheelY=b.wheelY,this.editor._emit(a,c)},this.setState=function(a){this.state=a},this.captureMouse=function(a,b){this.x=a.x,this.y=a.y,this.isMousePressed=!0;var c=this.editor.renderer;c.$keepTextAreaAtCursor&&(c.$keepTextAreaAtCursor=null);var f=this,g=function(a){return a?e.isWebKit&&!a.which&&f.releaseMouse?f.releaseMouse():(f.x=a.clientX,f.y=a.clientY,b&&b(a),f.mouseEvent=new h(a,f.editor),f.$mouseMoved=!0,void 0):void 0},i=function(a){clearInterval(k),j(),f[f.state+"End"]&&f[f.state+"End"](a),f.state="",null==c.$keepTextAreaAtCursor&&(c.$keepTextAreaAtCursor=!0,c.$moveTextAreaToCursor()),f.isMousePressed=!1,f.$onCaptureMouseMove=f.releaseMouse=null,a&&f.onMouseEvent("mouseup",a)},j=function(){f[f.state]&&f[f.state](),f.$mouseMoved=!1};if(e.isOldIE&&"dblclick"==a.domEvent.type)return setTimeout(function(){i(a)});f.$onCaptureMouseMove=g,f.releaseMouse=d.capture(this.editor.container,g,i);var k=setInterval(j,20)},this.releaseMouse=null,this.cancelContextMenu=function(){var a=function(b){b&&b.domEvent&&"contextmenu"!=b.domEvent.type||(this.editor.off("nativecontextmenu",a),b&&b.domEvent&&d.stopEvent(b.domEvent))}.bind(this);setTimeout(a,10),this.editor.on("nativecontextmenu",a)}}).call(k.prototype),j.defineOptions(k.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:e.isMac?150:0},dragEnabled:{initialValue:!0},focusTimout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),b.MouseHandler=k}),ace.define("ace/mouse/fold_handler",["require","exports","module"],function(a,b,c){"use strict";function d(a){a.on("click",function(b){var c=b.getDocumentPosition(),d=a.session,e=d.getFoldAt(c.row,c.column,1);e&&(b.getAccelKey()?d.removeFold(e):d.expandFold(e),b.stop())}),a.on("gutterclick",function(b){var c=a.renderer.$gutterLayer.getRegion(b);if("foldWidgets"==c){var d=b.getDocumentPosition().row,e=a.session;e.foldWidgets&&e.foldWidgets[d]&&a.session.onFoldWidgetClick(d,b),a.isFocused()||a.focus(),b.stop()}}),a.on("gutterdblclick",function(b){var c=a.renderer.$gutterLayer.getRegion(b);if("foldWidgets"==c){var d=b.getDocumentPosition().row,e=a.session,f=e.getParentFoldRangeData(d,!0),g=f.range||f.firstRange;if(g){d=g.start.row;var h=e.getFoldAt(d,e.getLine(d).length,1);h?e.removeFold(h):(e.addFold("...",g),a.renderer.scrollCursorIntoView({row:g.start.row,column:0}))}b.stop()}})}b.FoldHandler=d}),ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(a,b,c){"use strict";var d=a("../lib/keys"),e=a("../lib/event"),f=function(a){this.$editor=a,this.$data={editor:a},this.$handlers=[],this.setDefaultHandler(a.commands)};(function(){this.setDefaultHandler=function(a){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=a,this.addKeyboardHandler(a,0)},this.setKeyboardHandler=function(a){var b=this.$handlers;if(b[b.length-1]!=a){for(;b[b.length-1]&&b[b.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(b[b.length-1]);this.addKeyboardHandler(a,1)}},this.addKeyboardHandler=function(a,b){if(a){"function"==typeof a&&!a.handleKeyboard&&(a.handleKeyboard=a);var c=this.$handlers.indexOf(a);-1!=c&&this.$handlers.splice(c,1),void 0==b?this.$handlers.push(a):this.$handlers.splice(b,0,a),-1==c&&a.attach&&a.attach(this.$editor)}},this.removeKeyboardHandler=function(a){var b=this.$handlers.indexOf(a);return-1==b?!1:(this.$handlers.splice(b,1),a.detach&&a.detach(this.$editor),!0)},this.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},this.getStatusText=function(){var a=this.$data,b=a.editor;return this.$handlers.map(function(c){return c.getStatusText&&c.getStatusText(b,a)||""}).filter(Boolean).join(" ")},this.$callKeyboardHandlers=function(a,b,c,d){for(var f,g=!1,h=this.$editor.commands,i=this.$handlers.length;i--&&(f=this.$handlers[i].handleKeyboard(this.$data,a,b,c,d),!(f&&f.command&&(g="null"==f.command?!0:h.exec(f.command,this.$editor,f.args,d),g&&d&&-1!=a&&1!=f.passEvent&&1!=f.command.passEvent&&e.stopEvent(d),g))););return!g&&-1==a&&(f={command:"insertstring"},g=h.exec("insertstring",this.$editor,b)),g&&this.$editor._signal("keyboardActivity",f),g},this.onCommandKey=function(a,b,c){var e=d.keyCodeToString(c);this.$callKeyboardHandlers(b,e,c,a)},this.onTextInput=function(a){this.$callKeyboardHandlers(-1,a)}}).call(f.prototype),b.KeyBinding=f}),ace.define("ace/range",["require","exports","module"],function(a,b,c){"use strict";var d=function(a,b){return a.row-b.row||a.column-b.column},e=function(a,b,c,d){this.start={row:a,column:b},this.end={row:c,column:d}};(function(){this.isEqual=function(a){return this.start.row===a.start.row&&this.end.row===a.end.row&&this.start.column===a.start.column&&this.end.column===a.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(a,b){return 0==this.compare(a,b)},this.compareRange=function(a){var b,c=a.end,d=a.start;return b=this.compare(c.row,c.column),1==b?(b=this.compare(d.row,d.column),1==b?2:0==b?1:0):-1==b?-2:(b=this.compare(d.row,d.column),-1==b?-1:1==b?42:0)},this.comparePoint=function(a){return this.compare(a.row,a.column)},this.containsRange=function(a){return 0==this.comparePoint(a.start)&&0==this.comparePoint(a.end)},this.intersects=function(a){var b=this.compareRange(a);return-1==b||0==b||1==b},this.isEnd=function(a,b){return this.end.row==a&&this.end.column==b},this.isStart=function(a,b){return this.start.row==a&&this.start.column==b},this.setStart=function(a,b){"object"==typeof a?(this.start.column=a.column,this.start.row=a.row):(this.start.row=a,this.start.column=b)},this.setEnd=function(a,b){"object"==typeof a?(this.end.column=a.column,this.end.row=a.row):(this.end.row=a,this.end.column=b)},this.inside=function(a,b){return 0==this.compare(a,b)?!this.isEnd(a,b)&&!this.isStart(a,b):!1},this.insideStart=function(a,b){return 0==this.compare(a,b)?!this.isEnd(a,b):!1},this.insideEnd=function(a,b){return 0==this.compare(a,b)?!this.isStart(a,b):!1},this.compare=function(a,b){return this.isMultiLine()||a!==this.start.row?a<this.start.row?-1:a>this.end.row?1:this.start.row===a?b>=this.start.column?0:-1:this.end.row===a?b<=this.end.column?0:1:0:b<this.start.column?-1:b>this.end.column?1:0},this.compareStart=function(a,b){return this.start.row==a&&this.start.column==b?-1:this.compare(a,b)},this.compareEnd=function(a,b){return this.end.row==a&&this.end.column==b?1:this.compare(a,b)},this.compareInside=function(a,b){return this.end.row==a&&this.end.column==b?1:this.start.row==a&&this.start.column==b?-1:this.compare(a,b)},this.clipRows=function(a,b){if(this.end.row>b)var c={row:b+1,column:0};else if(this.end.row<a)var c={row:a,column:0};if(this.start.row>b)var d={row:b+1,column:0};else if(this.start.row<a)var d={row:a,column:0};return e.fromPoints(d||this.start,c||this.end)},this.extend=function(a,b){var c=this.compare(a,b);if(0==c)return this;if(-1==c)var d={row:a,column:b};else var f={row:a,column:b};return e.fromPoints(d||this.start,f||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return e.fromPoints(this.start,this.end)},this.collapseRows=function(){return 0==this.end.column?new e(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new e(this.start.row,0,this.end.row,0)},this.toScreenRange=function(a){var b=a.documentToScreenPosition(this.start),c=a.documentToScreenPosition(this.end);return new e(b.row,b.column,c.row,c.column)},this.moveBy=function(a,b){this.start.row+=a,this.start.column+=b,this.end.row+=a,this.end.column+=b}}).call(e.prototype),e.fromPoints=function(a,b){return new e(a.row,a.column,b.row,b.column)},e.comparePoints=d,e.comparePoints=function(a,b){return a.row-b.row||a.column-b.column},b.Range=e}),ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(a,b,c){"use strict";var d=a("./lib/oop"),e=a("./lib/lang"),f=a("./lib/event_emitter").EventEmitter,g=a("./range").Range,h=function(a){this.session=a,this.doc=a.getDocument(),this.clearSelection(),this.lead=this.selectionLead=this.doc.createAnchor(0,0),this.anchor=this.selectionAnchor=this.doc.createAnchor(0,0);var b=this;this.lead.on("change",function(a){b._emit("changeCursor"),b.$isEmpty||b._emit("changeSelection"),!b.$keepDesiredColumnOnChange&&a.old.column!=a.value.column&&(b.$desiredColumn=null)}),this.selectionAnchor.on("change",function(){b.$isEmpty||b._emit("changeSelection")})};(function(){d.implement(this,f),this.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},this.isMultiLine=function(){return this.isEmpty()?!1:this.getRange().isMultiLine()},this.getCursor=function(){return this.lead.getPosition()},this.setSelectionAnchor=function(a,b){this.anchor.setPosition(a,b),this.$isEmpty&&(this.$isEmpty=!1,this._emit("changeSelection"))},this.getSelectionAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},this.getSelectionLead=function(){return this.lead.getPosition()},this.shiftSelection=function(a){if(this.$isEmpty)return void this.moveCursorTo(this.lead.row,this.lead.column+a);var b=this.getSelectionAnchor(),c=this.getSelectionLead(),d=this.isBackwards();(!d||0!==b.column)&&this.setSelectionAnchor(b.row,b.column+a),(d||0!==c.column)&&this.$moveSelection(function(){this.moveCursorTo(c.row,c.column+a)})},this.isBackwards=function(){var a=this.anchor,b=this.lead;return a.row>b.row||a.row==b.row&&a.column>b.column},this.getRange=function(){var a=this.anchor,b=this.lead;return this.isEmpty()?g.fromPoints(b,b):this.isBackwards()?g.fromPoints(b,a):g.fromPoints(a,b)},this.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},this.selectAll=function(){var a=this.doc.getLength()-1;this.setSelectionAnchor(0,0),this.moveCursorTo(a,this.doc.getLine(a).length)},this.setRange=this.setSelectionRange=function(a,b){b?(this.setSelectionAnchor(a.end.row,a.end.column),this.selectTo(a.start.row,a.start.column)):(this.setSelectionAnchor(a.start.row,a.start.column),this.selectTo(a.end.row,a.end.column)),this.getRange().isEmpty()&&(this.$isEmpty=!0),this.$desiredColumn=null},this.$moveSelection=function(a){var b=this.lead;this.$isEmpty&&this.setSelectionAnchor(b.row,b.column),a.call(this)},this.selectTo=function(a,b){this.$moveSelection(function(){this.moveCursorTo(a,b)})},this.selectToPosition=function(a){this.$moveSelection(function(){this.moveCursorToPosition(a)})},this.moveTo=function(a,b){this.clearSelection(),this.moveCursorTo(a,b)},this.moveToPosition=function(a){this.clearSelection(),this.moveCursorToPosition(a)},this.selectUp=function(){this.$moveSelection(this.moveCursorUp)},this.selectDown=function(){this.$moveSelection(this.moveCursorDown)},this.selectRight=function(){this.$moveSelection(this.moveCursorRight)},this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},this.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},this.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},this.getWordRange=function(a,b){if("undefined"==typeof b){var c=a||this.lead;a=c.row,b=c.column}return this.session.getWordRange(a,b)},this.selectWord=function(){this.setSelectionRange(this.getWordRange())},this.selectAWord=function(){var a=this.getCursor(),b=this.session.getAWordRange(a.row,a.column);this.setSelectionRange(b)},this.getLineRange=function(a,b){var c,d="number"==typeof a?a:this.lead.row,e=this.session.getFoldLine(d);return e?(d=e.start.row,c=e.end.row):c=d,b===!0?new g(d,0,c,this.session.getLine(c).length):new g(d,0,c+1,0)},this.selectLine=function(){this.setSelectionRange(this.getLineRange())},this.moveCursorUp=function(){this.moveCursorBy(-1,0)},this.moveCursorDown=function(){this.moveCursorBy(1,0)},this.moveCursorLeft=function(){var a,b=this.lead.getPosition();if(a=this.session.getFoldAt(b.row,b.column,-1))this.moveCursorTo(a.start.row,a.start.column);else if(0===b.column)b.row>0&&this.moveCursorTo(b.row-1,this.doc.getLine(b.row-1).length);else{var c=this.session.getTabSize();this.session.isTabStop(b)&&this.doc.getLine(b.row).slice(b.column-c,b.column).split(" ").length-1==c?this.moveCursorBy(0,-c):this.moveCursorBy(0,-1)}},this.moveCursorRight=function(){var a,b=this.lead.getPosition();if(a=this.session.getFoldAt(b.row,b.column,1))this.moveCursorTo(a.end.row,a.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var c=this.session.getTabSize(),b=this.lead;this.session.isTabStop(b)&&this.doc.getLine(b.row).slice(b.column,b.column+c).split(" ").length-1==c?this.moveCursorBy(0,c):this.moveCursorBy(0,1)}},this.moveCursorLineStart=function(){var a=this.lead.row,b=this.lead.column,c=this.session.documentToScreenRow(a,b),d=this.session.screenToDocumentPosition(c,0),e=this.session.getDisplayLine(a,null,d.row,d.column),f=e.match(/^\s*/);f[0].length!=b&&!this.session.$useEmacsStyleLineStart&&(d.column+=f[0].length),this.moveCursorToPosition(d)},this.moveCursorLineEnd=function(){var a=this.lead,b=this.session.getDocumentLastRowColumnPosition(a.row,a.column);if(this.lead.column==b.column){var c=this.session.getLine(b.row);if(b.column==c.length){var d=c.search(/\s+$/);d>0&&(b.column=d)}}this.moveCursorTo(b.row,b.column)},this.moveCursorFileEnd=function(){var a=this.doc.getLength()-1,b=this.doc.getLine(a).length;this.moveCursorTo(a,b)},this.moveCursorFileStart=function(){this.moveCursorTo(0,0)},this.moveCursorLongWordRight=function(){var a,b=this.lead.row,c=this.lead.column,d=this.doc.getLine(b),e=d.substring(c);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var f=this.session.getFoldAt(b,c,1);return f?void this.moveCursorTo(f.end.row,f.end.column):((a=this.session.nonTokenRe.exec(e))&&(c+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,e=d.substring(c)),c>=d.length?(this.moveCursorTo(b,d.length),this.moveCursorRight(),b<this.doc.getLength()-1&&this.moveCursorWordRight(),void 0):((a=this.session.tokenRe.exec(e))&&(c+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),void this.moveCursorTo(b,c)))},this.moveCursorLongWordLeft=function(){var a,b=this.lead.row,c=this.lead.column;if(a=this.session.getFoldAt(b,c,-1))return void this.moveCursorTo(a.start.row,a.start.column);var d=this.session.getFoldStringAt(b,c,-1);null==d&&(d=this.doc.getLine(b).substring(0,c));var f,g=e.stringReverse(d);return this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,(f=this.session.nonTokenRe.exec(g))&&(c-=this.session.nonTokenRe.lastIndex,g=g.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),0>=c?(this.moveCursorTo(b,0),this.moveCursorLeft(),b>0&&this.moveCursorWordLeft(),void 0):((f=this.session.tokenRe.exec(g))&&(c-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),void this.moveCursorTo(b,c))},this.$shortWordEndIndex=function(a){var b,c,d=0,e=/\s/,f=this.session.tokenRe;if(f.lastIndex=0,b=this.session.tokenRe.exec(a))d=this.session.tokenRe.lastIndex;else{for(;(c=a[d])&&e.test(c);)d++;if(1>d)for(f.lastIndex=0;(c=a[d])&&!f.test(c);)if(f.lastIndex=0,d++,e.test(c)){if(d>2){d--;break}for(;(c=a[d])&&e.test(c);)d++;if(d>2)break}}return f.lastIndex=0,d},this.moveCursorShortWordRight=function(){var a=this.lead.row,b=this.lead.column,c=this.doc.getLine(a),d=c.substring(b),e=this.session.getFoldAt(a,b,1);if(e)return this.moveCursorTo(e.end.row,e.end.column);if(b==c.length){var f=this.doc.getLength();do a++,d=this.doc.getLine(a);while(f>a&&/^\s*$/.test(d));/^\s+/.test(d)||(d=""),b=0}var g=this.$shortWordEndIndex(d);this.moveCursorTo(a,b+g)},this.moveCursorShortWordLeft=function(){var a,b=this.lead.row,c=this.lead.column;if(a=this.session.getFoldAt(b,c,-1))return this.moveCursorTo(a.start.row,a.start.column);var d=this.session.getLine(b).substring(0,c);if(0===c){do b--,d=this.doc.getLine(b);while(b>0&&/^\s*$/.test(d));c=d.length,/\s+$/.test(d)||(d="")}var f=e.stringReverse(d),g=this.$shortWordEndIndex(f);return this.moveCursorTo(b,c-g)},this.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},this.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},this.moveCursorBy=function(a,b){var c=this.session.documentToScreenPosition(this.lead.row,this.lead.column);0===b&&(this.$desiredColumn?c.column=this.$desiredColumn:this.$desiredColumn=c.column);var d=this.session.screenToDocumentPosition(c.row+a,c.column);0!==a&&0===b&&d.row===this.lead.row&&d.column===this.lead.column&&this.session.lineWidgets&&this.session.lineWidgets[d.row]&&(d.row>0||a>0)&&d.row++,this.moveCursorTo(d.row,d.column+b,0===b)},this.moveCursorToPosition=function(a){this.moveCursorTo(a.row,a.column)},this.moveCursorTo=function(a,b,c){var d=this.session.getFoldAt(a,b,1);d&&(a=d.start.row,b=d.start.column),this.$keepDesiredColumnOnChange=!0,this.lead.setPosition(a,b),this.$keepDesiredColumnOnChange=!1,c||(this.$desiredColumn=null)},this.moveCursorToScreen=function(a,b,c){var d=this.session.screenToDocumentPosition(a,b);this.moveCursorTo(d.row,d.column,c)},this.detach=function(){this.lead.detach(),this.anchor.detach(),this.session=this.doc=null},this.fromOrientedRange=function(a){this.setSelectionRange(a,a.cursor==a.start),this.$desiredColumn=a.desiredColumn||this.$desiredColumn},this.toOrientedRange=function(a){var b=this.getRange();return a?(a.start.column=b.start.column,a.start.row=b.start.row,a.end.column=b.end.column,a.end.row=b.end.row):a=b,a.cursor=this.isBackwards()?a.start:a.end,a.desiredColumn=this.$desiredColumn,a},this.getRangeOfMovements=function(a){var b=this.getCursor();try{a(this);var c=this.getCursor();return g.fromPoints(b,c)}catch(d){return g.fromPoints(b,b)}finally{this.moveCursorToPosition(b)}},this.toJSON=function(){if(this.rangeCount)var a=this.ranges.map(function(a){var b=a.clone();return b.isBackwards=a.cursor==a.start,b});else{var a=this.getRange();a.isBackwards=this.isBackwards()}return a},this.fromJSON=function(a){if(void 0==a.start){if(this.rangeList){this.toSingleRange(a[0]);for(var b=a.length;b--;){var c=g.fromPoints(a[b].start,a[b].end);a[b].isBackwards&&(c.cursor=c.start),this.addRange(c,!0)}return}a=a[0]}this.rangeList&&this.toSingleRange(a),this.setSelectionRange(a,a.isBackwards)},this.isEqual=function(a){if((a.length||this.rangeCount)&&a.length!=this.rangeCount)return!1;if(!a.length||!this.ranges)return this.getRange().isEqual(a);for(var b=this.ranges.length;b--;)if(!this.ranges[b].isEqual(a[b]))return!1;return!0}}).call(h.prototype),b.Selection=h}),ace.define("ace/tokenizer",["require","exports","module","ace/config"],function(a,b,c){"use strict";var d=a("./config"),e=2e3,f=function(a){this.states=a,this.regExps={},this.matchMappings={};for(var b in this.states){for(var c=this.states[b],d=[],e=0,f=this.matchMappings[b]={defaultToken:"text"},g="g",h=[],i=0;i<c.length;i++){var j=c[i];if(j.defaultToken&&(f.defaultToken=j.defaultToken),j.caseInsensitive&&(g="gi"),null!=j.regex){j.regex instanceof RegExp&&(j.regex=j.regex.toString().slice(1,-1));var k=j.regex,l=new RegExp("(?:("+k+")|(.))").exec("a").length-2;Array.isArray(j.token)?1==j.token.length||1==l?j.token=j.token[0]:l-1!=j.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:j,groupCount:l-1}),j.token=j.token[0]):(j.tokenArray=j.token,j.token=null,j.onMatch=this.$arrayTokens):"function"==typeof j.token&&!j.onMatch&&(l>1?j.onMatch=this.$applyToken:j.onMatch=j.token),l>1&&(/\\\d/.test(j.regex)?k=j.regex.replace(/\\([0-9]+)/g,function(a,b){return"\\"+(parseInt(b,10)+e+1)}):(l=1,k=this.removeCapturingGroups(j.regex)),!j.splitRegex&&"string"!=typeof j.token&&h.push(j)),f[e]=i,e+=l,d.push(k),j.onMatch||(j.onMatch=null)}}d.length||(f[0]=0,d.push("$")),h.forEach(function(a){a.splitRegex=this.createSplitterRegexp(a.regex,g)},this),this.regExps[b]=new RegExp("("+d.join(")|(")+")|($)",g)}};(function(){this.$setMaxTokenCount=function(a){e=0|a},this.$applyToken=function(a){var b=this.splitRegex.exec(a).slice(1),c=this.token.apply(this,b);if("string"==typeof c)return[{type:c,value:a}];for(var d=[],e=0,f=c.length;f>e;e++)b[e]&&(d[d.length]={type:c[e],value:b[e]});return d},this.$arrayTokens=function(a){if(!a)return[];var b=this.splitRegex.exec(a);if(!b)return"text";for(var c=[],d=this.tokenArray,e=0,f=d.length;f>e;e++)b[e+1]&&(c[c.length]={type:d[e],value:b[e+1]});return c},this.removeCapturingGroups=function(a){var b=a.replace(/\[(?:\\.|[^\]])*?\]|\\.|\(\?[:=!]|(\()/g,function(a,b){return b?"(?:":a});return b},this.createSplitterRegexp=function(a,b){if(-1!=a.indexOf("(?=")){var c=0,d=!1,e={};a.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(a,b,f,g,h,i){return d?d="]"!=h:h?d=!0:g?(c==e.stack&&(e.end=i+1,e.stack=-1),c--):f&&(c++,1!=f.length&&(e.stack=c,e.start=i)),a}),null!=e.end&&/^\)*$/.test(a.substr(e.end))&&(a=a.substring(0,e.start)+a.substr(e.end))}return"^"!=a.charAt(0)&&(a="^"+a),"$"!=a.charAt(a.length-1)&&(a+="$"),new RegExp(a,(b||"").replace("g",""))},this.getLineTokens=function(a,b){if(b&&"string"!=typeof b){var c=b.slice(0);b=c[0],"#tmp"===b&&(c.shift(),b=c.shift())}else var c=[];var d=b||"start",f=this.states[d];f||(d="start",f=this.states[d]);var g=this.matchMappings[d],h=this.regExps[d];h.lastIndex=0;for(var i,j=[],k=0,l=0,m={type:null,value:""};i=h.exec(a);){var n=g.defaultToken,o=null,p=i[0],q=h.lastIndex;if(q-p.length>k){var r=a.substring(k,q-p.length);m.type==n?m.value+=r:(m.type&&j.push(m),m={type:n,value:r})}for(var s=0;s<i.length-2;s++)if(void 0!==i[s+1]){o=f[g[s]],n=o.onMatch?o.onMatch(p,d,c):o.token,o.next&&(d="string"==typeof o.next?o.next:o.next(d,c),f=this.states[d],f||(this.reportError("state doesn't exist",d),d="start",f=this.states[d]),g=this.matchMappings[d],k=q,h=this.regExps[d],h.lastIndex=q);break}if(p)if("string"==typeof n)o&&o.merge===!1||m.type!==n?(m.type&&j.push(m),m={type:n,value:p}):m.value+=p;else if(n){m.type&&j.push(m),m={type:null,value:""};for(var s=0;s<n.length;s++)j.push(n[s])}if(k==a.length)break;if(k=q,l++>e){for(l>2*a.length&&this.reportError("infinite loop with in ace tokenizer",{startState:b,line:a});k<a.length;)m.type&&j.push(m),m={value:a.substring(k,k+=2e3),type:"overflow"};d="start",c=[];break}}return m.type&&j.push(m),c.length>1&&c[0]!==d&&c.unshift("#tmp",d),{tokens:j,state:c.length?c:d}},this.reportError=d.reportError}).call(f.prototype),b.Tokenizer=f}),ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/lang"],function(a,b,c){"use strict";var d=a("../lib/lang"),e=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}};(function(){this.addRules=function(a,b){if(b)for(var c in a){for(var d=a[c],e=0;e<d.length;e++){var f=d[e];(f.next||f.onMatch)&&("string"==typeof f.next&&0!==f.next.indexOf(b)&&(f.next=b+f.next),f.nextState&&0!==f.nextState.indexOf(b)&&(f.nextState=b+f.nextState))}this.$rules[b+c]=d}else for(var c in a)this.$rules[c]=a[c]},this.getRules=function(){return this.$rules},this.embedRules=function(a,b,c,e,f){var g="function"==typeof a?(new a).getRules():a;if(e)for(var h=0;h<e.length;h++)e[h]=b+e[h];else{e=[];for(var i in g)e.push(b+i)}if(this.addRules(g,b),c)for(var j=Array.prototype[f?"push":"unshift"],h=0;h<e.length;h++)j.apply(this.$rules[e[h]],d.deepCopy(c));this.$embeds||(this.$embeds=[]),this.$embeds.push(b)},this.getEmbeds=function(){return this.$embeds};var a=function(a,b){return("start"!=a||b.length)&&b.unshift(this.nextState,a),this.nextState},b=function(a,b){return b.shift(),b.shift()||"start"};this.normalizeRules=function(){function c(f){var g=e[f];g.processed=!0;for(var h=0;h<g.length;h++){var i=g[h];!i.regex&&i.start&&(i.regex=i.start,i.next||(i.next=[]),i.next.push({defaultToken:i.token},{token:i.token+".end",regex:i.end||i.start,next:"pop"}),i.token=i.token+".start",i.push=!0);var j=i.next||i.push;if(j&&Array.isArray(j)){var k=i.stateName;k||(k=i.token,"string"!=typeof k&&(k=k[0]||""),e[k]&&(k+=d++)),e[k]=j,i.next=k,c(k)}else"pop"==j&&(i.next=b);if(i.push&&(i.nextState=i.next||i.push,i.next=a,delete i.push),i.rules)for(var l in i.rules)e[l]?e[l].push&&e[l].push.apply(e[l],i.rules[l]):e[l]=i.rules[l];if(i.include||"string"==typeof i)var m=i.include||i,n=e[m];else Array.isArray(i)&&(n=i);if(n){var o=[h,1].concat(n);i.noEscape&&(o=o.filter(function(a){return!a.next})),g.splice.apply(g,o),h--,n=null}i.keywordMap&&(i.token=this.createKeywordMapper(i.keywordMap,i.defaultToken||"text",i.caseInsensitive),delete i.defaultToken)}}var d=0,e=this.$rules;Object.keys(e).forEach(c,this)},this.createKeywordMapper=function(a,b,c,d){var e=Object.create(null);return Object.keys(a).forEach(function(b){var f=a[b];c&&(f=f.toLowerCase());for(var g=f.split(d||"|"),h=g.length;h--;)e[g[h]]=b}),Object.getPrototypeOf(e)&&(e.__proto__=null),this.$keywordList=Object.keys(e),a=null,c?function(a){return e[a.toLowerCase()]||b}:function(a){return e[a]||b}},this.getKeywords=function(){return this.$keywords}}).call(e.prototype),b.TextHighlightRules=e}),ace.define("ace/mode/behaviour",["require","exports","module"],function(a,b,c){"use strict";var d=function(){this.$behaviours={}};(function(){this.add=function(a,b,c){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[a]:this.$behaviours[a]={}}this.$behaviours[a][b]=c},this.addBehaviours=function(a){for(var b in a)for(var c in a[b])this.add(b,c,a[b][c])},this.remove=function(a){this.$behaviours&&this.$behaviours[a]&&delete this.$behaviours[a]},this.inherit=function(a,b){if("function"==typeof a)var c=(new a).getBehaviours(b);else var c=a.getBehaviours(b);this.addBehaviours(c)},this.getBehaviours=function(a){if(!a)return this.$behaviours;for(var b={},c=0;c<a.length;c++)this.$behaviours[a[c]]&&(b[a[c]]=this.$behaviours[a[c]]);return b}}).call(d.prototype),b.Behaviour=d}),ace.define("ace/unicode",["require","exports","module"],function(a,b,c){"use strict";function d(a){var c=/\w{4}/g;for(var d in a)b.packages[d]=a[d].replace(c,"\\u$&")}b.packages={},d({L:"0041-005A0061-007A00AA00B500BA00C0-00D600D8-00F600F8-02C102C6-02D102E0-02E402EC02EE0370-037403760377037A-037D03860388-038A038C038E-03A103A3-03F503F7-0481048A-05250531-055605590561-058705D0-05EA05F0-05F20621-064A066E066F0671-06D306D506E506E606EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA07F407F507FA0800-0815081A082408280904-0939093D09500958-0961097109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E460E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EC60EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10A0-10C510D0-10FA10FC1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317D717DC1820-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541AA71B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C7D1CE9-1CEC1CEE-1CF11D00-1DBF1E00-1F151F18-1F1D1F20-1F451F48-1F4D1F50-1F571F591F5B1F5D1F5F-1F7D1F80-1FB41FB6-1FBC1FBE1FC2-1FC41FC6-1FCC1FD0-1FD31FD6-1FDB1FE0-1FEC1FF2-1FF41FF6-1FFC2071207F2090-209421022107210A-211321152119-211D212421262128212A-212D212F-2139213C-213F2145-2149214E218321842C00-2C2E2C30-2C5E2C60-2CE42CEB-2CEE2D00-2D252D30-2D652D6F2D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE2E2F300530063031-3035303B303C3041-3096309D-309F30A1-30FA30FC-30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A48CA4D0-A4FDA500-A60CA610-A61FA62AA62BA640-A65FA662-A66EA67F-A697A6A0-A6E5A717-A71FA722-A788A78BA78CA7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2A9CFAA00-AA28AA40-AA42AA44-AA4BAA60-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADB-AADDABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB00-FB06FB13-FB17FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF21-FF3AFF41-FF5AFF66-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",
Ll:"0061-007A00AA00B500BA00DF-00F600F8-00FF01010103010501070109010B010D010F01110113011501170119011B011D011F01210123012501270129012B012D012F01310133013501370138013A013C013E014001420144014601480149014B014D014F01510153015501570159015B015D015F01610163016501670169016B016D016F0171017301750177017A017C017E-0180018301850188018C018D019201950199-019B019E01A101A301A501A801AA01AB01AD01B001B401B601B901BA01BD-01BF01C601C901CC01CE01D001D201D401D601D801DA01DC01DD01DF01E101E301E501E701E901EB01ED01EF01F001F301F501F901FB01FD01FF02010203020502070209020B020D020F02110213021502170219021B021D021F02210223022502270229022B022D022F02310233-0239023C023F0240024202470249024B024D024F-02930295-02AF037103730377037B-037D039003AC-03CE03D003D103D5-03D703D903DB03DD03DF03E103E303E503E703E903EB03ED03EF-03F303F503F803FB03FC0430-045F04610463046504670469046B046D046F04710473047504770479047B047D047F0481048B048D048F04910493049504970499049B049D049F04A104A304A504A704A904AB04AD04AF04B104B304B504B704B904BB04BD04BF04C204C404C604C804CA04CC04CE04CF04D104D304D504D704D904DB04DD04DF04E104E304E504E704E904EB04ED04EF04F104F304F504F704F904FB04FD04FF05010503050505070509050B050D050F05110513051505170519051B051D051F0521052305250561-05871D00-1D2B1D62-1D771D79-1D9A1E011E031E051E071E091E0B1E0D1E0F1E111E131E151E171E191E1B1E1D1E1F1E211E231E251E271E291E2B1E2D1E2F1E311E331E351E371E391E3B1E3D1E3F1E411E431E451E471E491E4B1E4D1E4F1E511E531E551E571E591E5B1E5D1E5F1E611E631E651E671E691E6B1E6D1E6F1E711E731E751E771E791E7B1E7D1E7F1E811E831E851E871E891E8B1E8D1E8F1E911E931E95-1E9D1E9F1EA11EA31EA51EA71EA91EAB1EAD1EAF1EB11EB31EB51EB71EB91EBB1EBD1EBF1EC11EC31EC51EC71EC91ECB1ECD1ECF1ED11ED31ED51ED71ED91EDB1EDD1EDF1EE11EE31EE51EE71EE91EEB1EED1EEF1EF11EF31EF51EF71EF91EFB1EFD1EFF-1F071F10-1F151F20-1F271F30-1F371F40-1F451F50-1F571F60-1F671F70-1F7D1F80-1F871F90-1F971FA0-1FA71FB0-1FB41FB61FB71FBE1FC2-1FC41FC61FC71FD0-1FD31FD61FD71FE0-1FE71FF2-1FF41FF61FF7210A210E210F2113212F21342139213C213D2146-2149214E21842C30-2C5E2C612C652C662C682C6A2C6C2C712C732C742C76-2C7C2C812C832C852C872C892C8B2C8D2C8F2C912C932C952C972C992C9B2C9D2C9F2CA12CA32CA52CA72CA92CAB2CAD2CAF2CB12CB32CB52CB72CB92CBB2CBD2CBF2CC12CC32CC52CC72CC92CCB2CCD2CCF2CD12CD32CD52CD72CD92CDB2CDD2CDF2CE12CE32CE42CEC2CEE2D00-2D25A641A643A645A647A649A64BA64DA64FA651A653A655A657A659A65BA65DA65FA663A665A667A669A66BA66DA681A683A685A687A689A68BA68DA68FA691A693A695A697A723A725A727A729A72BA72DA72F-A731A733A735A737A739A73BA73DA73FA741A743A745A747A749A74BA74DA74FA751A753A755A757A759A75BA75DA75FA761A763A765A767A769A76BA76DA76FA771-A778A77AA77CA77FA781A783A785A787A78CFB00-FB06FB13-FB17FF41-FF5A",Lu:"0041-005A00C0-00D600D8-00DE01000102010401060108010A010C010E01100112011401160118011A011C011E01200122012401260128012A012C012E01300132013401360139013B013D013F0141014301450147014A014C014E01500152015401560158015A015C015E01600162016401660168016A016C016E017001720174017601780179017B017D018101820184018601870189-018B018E-0191019301940196-0198019C019D019F01A001A201A401A601A701A901AC01AE01AF01B1-01B301B501B701B801BC01C401C701CA01CD01CF01D101D301D501D701D901DB01DE01E001E201E401E601E801EA01EC01EE01F101F401F6-01F801FA01FC01FE02000202020402060208020A020C020E02100212021402160218021A021C021E02200222022402260228022A022C022E02300232023A023B023D023E02410243-02460248024A024C024E03700372037603860388-038A038C038E038F0391-03A103A3-03AB03CF03D2-03D403D803DA03DC03DE03E003E203E403E603E803EA03EC03EE03F403F703F903FA03FD-042F04600462046404660468046A046C046E04700472047404760478047A047C047E0480048A048C048E04900492049404960498049A049C049E04A004A204A404A604A804AA04AC04AE04B004B204B404B604B804BA04BC04BE04C004C104C304C504C704C904CB04CD04D004D204D404D604D804DA04DC04DE04E004E204E404E604E804EA04EC04EE04F004F204F404F604F804FA04FC04FE05000502050405060508050A050C050E05100512051405160518051A051C051E0520052205240531-055610A0-10C51E001E021E041E061E081E0A1E0C1E0E1E101E121E141E161E181E1A1E1C1E1E1E201E221E241E261E281E2A1E2C1E2E1E301E321E341E361E381E3A1E3C1E3E1E401E421E441E461E481E4A1E4C1E4E1E501E521E541E561E581E5A1E5C1E5E1E601E621E641E661E681E6A1E6C1E6E1E701E721E741E761E781E7A1E7C1E7E1E801E821E841E861E881E8A1E8C1E8E1E901E921E941E9E1EA01EA21EA41EA61EA81EAA1EAC1EAE1EB01EB21EB41EB61EB81EBA1EBC1EBE1EC01EC21EC41EC61EC81ECA1ECC1ECE1ED01ED21ED41ED61ED81EDA1EDC1EDE1EE01EE21EE41EE61EE81EEA1EEC1EEE1EF01EF21EF41EF61EF81EFA1EFC1EFE1F08-1F0F1F18-1F1D1F28-1F2F1F38-1F3F1F48-1F4D1F591F5B1F5D1F5F1F68-1F6F1FB8-1FBB1FC8-1FCB1FD8-1FDB1FE8-1FEC1FF8-1FFB21022107210B-210D2110-211221152119-211D212421262128212A-212D2130-2133213E213F214521832C00-2C2E2C602C62-2C642C672C692C6B2C6D-2C702C722C752C7E-2C802C822C842C862C882C8A2C8C2C8E2C902C922C942C962C982C9A2C9C2C9E2CA02CA22CA42CA62CA82CAA2CAC2CAE2CB02CB22CB42CB62CB82CBA2CBC2CBE2CC02CC22CC42CC62CC82CCA2CCC2CCE2CD02CD22CD42CD62CD82CDA2CDC2CDE2CE02CE22CEB2CEDA640A642A644A646A648A64AA64CA64EA650A652A654A656A658A65AA65CA65EA662A664A666A668A66AA66CA680A682A684A686A688A68AA68CA68EA690A692A694A696A722A724A726A728A72AA72CA72EA732A734A736A738A73AA73CA73EA740A742A744A746A748A74AA74CA74EA750A752A754A756A758A75AA75CA75EA760A762A764A766A768A76AA76CA76EA779A77BA77DA77EA780A782A784A786A78BFF21-FF3A",Lt:"01C501C801CB01F21F88-1F8F1F98-1F9F1FA8-1FAF1FBC1FCC1FFC",Lm:"02B0-02C102C6-02D102E0-02E402EC02EE0374037A0559064006E506E607F407F507FA081A0824082809710E460EC610FC17D718431AA71C78-1C7D1D2C-1D611D781D9B-1DBF2071207F2090-20942C7D2D6F2E2F30053031-3035303B309D309E30FC-30FEA015A4F8-A4FDA60CA67FA717-A71FA770A788A9CFAA70AADDFF70FF9EFF9F",Lo:"01BB01C0-01C3029405D0-05EA05F0-05F20621-063F0641-064A066E066F0671-06D306D506EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA0800-08150904-0939093D09500958-096109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E450E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10D0-10FA1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317DC1820-18421844-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C771CE9-1CEC1CEE-1CF12135-21382D30-2D652D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE3006303C3041-3096309F30A1-30FA30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A014A016-A48CA4D0-A4F7A500-A60BA610-A61FA62AA62BA66EA6A0-A6E5A7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2AA00-AA28AA40-AA42AA44-AA4BAA60-AA6FAA71-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADBAADCABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF66-FF6FFF71-FF9DFFA0-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",M:"0300-036F0483-04890591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DE-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0903093C093E-094E0951-0955096209630981-098309BC09BE-09C409C709C809CB-09CD09D709E209E30A01-0A030A3C0A3E-0A420A470A480A4B-0A4D0A510A700A710A750A81-0A830ABC0ABE-0AC50AC7-0AC90ACB-0ACD0AE20AE30B01-0B030B3C0B3E-0B440B470B480B4B-0B4D0B560B570B620B630B820BBE-0BC20BC6-0BC80BCA-0BCD0BD70C01-0C030C3E-0C440C46-0C480C4A-0C4D0C550C560C620C630C820C830CBC0CBE-0CC40CC6-0CC80CCA-0CCD0CD50CD60CE20CE30D020D030D3E-0D440D46-0D480D4A-0D4D0D570D620D630D820D830DCA0DCF-0DD40DD60DD8-0DDF0DF20DF30E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F3E0F3F0F71-0F840F860F870F90-0F970F99-0FBC0FC6102B-103E1056-1059105E-10601062-10641067-106D1071-10741082-108D108F109A-109D135F1712-17141732-1734175217531772177317B6-17D317DD180B-180D18A91920-192B1930-193B19B0-19C019C819C91A17-1A1B1A55-1A5E1A60-1A7C1A7F1B00-1B041B34-1B441B6B-1B731B80-1B821BA1-1BAA1C24-1C371CD0-1CD21CD4-1CE81CED1CF21DC0-1DE61DFD-1DFF20D0-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66F-A672A67CA67DA6F0A6F1A802A806A80BA823-A827A880A881A8B4-A8C4A8E0-A8F1A926-A92DA947-A953A980-A983A9B3-A9C0AA29-AA36AA43AA4CAA4DAA7BAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE3-ABEAABECABEDFB1EFE00-FE0FFE20-FE26",Mn:"0300-036F0483-04870591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DF-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0902093C0941-0948094D0951-095509620963098109BC09C1-09C409CD09E209E30A010A020A3C0A410A420A470A480A4B-0A4D0A510A700A710A750A810A820ABC0AC1-0AC50AC70AC80ACD0AE20AE30B010B3C0B3F0B41-0B440B4D0B560B620B630B820BC00BCD0C3E-0C400C46-0C480C4A-0C4D0C550C560C620C630CBC0CBF0CC60CCC0CCD0CE20CE30D41-0D440D4D0D620D630DCA0DD2-0DD40DD60E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F71-0F7E0F80-0F840F860F870F90-0F970F99-0FBC0FC6102D-10301032-10371039103A103D103E10581059105E-10601071-1074108210851086108D109D135F1712-17141732-1734175217531772177317B7-17BD17C617C9-17D317DD180B-180D18A91920-19221927192819321939-193B1A171A181A561A58-1A5E1A601A621A65-1A6C1A73-1A7C1A7F1B00-1B031B341B36-1B3A1B3C1B421B6B-1B731B801B811BA2-1BA51BA81BA91C2C-1C331C361C371CD0-1CD21CD4-1CE01CE2-1CE81CED1DC0-1DE61DFD-1DFF20D0-20DC20E120E5-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66FA67CA67DA6F0A6F1A802A806A80BA825A826A8C4A8E0-A8F1A926-A92DA947-A951A980-A982A9B3A9B6-A9B9A9BCAA29-AA2EAA31AA32AA35AA36AA43AA4CAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE5ABE8ABEDFB1EFE00-FE0FFE20-FE26",Mc:"0903093E-09400949-094C094E0982098309BE-09C009C709C809CB09CC09D70A030A3E-0A400A830ABE-0AC00AC90ACB0ACC0B020B030B3E0B400B470B480B4B0B4C0B570BBE0BBF0BC10BC20BC6-0BC80BCA-0BCC0BD70C01-0C030C41-0C440C820C830CBE0CC0-0CC40CC70CC80CCA0CCB0CD50CD60D020D030D3E-0D400D46-0D480D4A-0D4C0D570D820D830DCF-0DD10DD8-0DDF0DF20DF30F3E0F3F0F7F102B102C10311038103B103C105610571062-10641067-106D108310841087-108C108F109A-109C17B617BE-17C517C717C81923-19261929-192B193019311933-193819B0-19C019C819C91A19-1A1B1A551A571A611A631A641A6D-1A721B041B351B3B1B3D-1B411B431B441B821BA11BA61BA71BAA1C24-1C2B1C341C351CE11CF2A823A824A827A880A881A8B4-A8C3A952A953A983A9B4A9B5A9BAA9BBA9BD-A9C0AA2FAA30AA33AA34AA4DAA7BABE3ABE4ABE6ABE7ABE9ABEAABEC",Me:"0488048906DE20DD-20E020E2-20E4A670-A672",N:"0030-003900B200B300B900BC-00BE0660-066906F0-06F907C0-07C90966-096F09E6-09EF09F4-09F90A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BF20C66-0C6F0C78-0C7E0CE6-0CEF0D66-0D750E50-0E590ED0-0ED90F20-0F331040-10491090-10991369-137C16EE-16F017E0-17E917F0-17F91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C5920702074-20792080-20892150-21822185-21892460-249B24EA-24FF2776-27932CFD30073021-30293038-303A3192-31953220-32293251-325F3280-328932B1-32BFA620-A629A6E6-A6EFA830-A835A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",Nd:"0030-00390660-066906F0-06F907C0-07C90966-096F09E6-09EF0A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BEF0C66-0C6F0CE6-0CEF0D66-0D6F0E50-0E590ED0-0ED90F20-0F291040-10491090-109917E0-17E91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C59A620-A629A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",Nl:"16EE-16F02160-21822185-218830073021-30293038-303AA6E6-A6EF",No:"00B200B300B900BC-00BE09F4-09F90BF0-0BF20C78-0C7E0D70-0D750F2A-0F331369-137C17F0-17F920702074-20792080-20892150-215F21892460-249B24EA-24FF2776-27932CFD3192-31953220-32293251-325F3280-328932B1-32BFA830-A835",P:"0021-00230025-002A002C-002F003A003B003F0040005B-005D005F007B007D00A100AB00B700BB00BF037E0387055A-055F0589058A05BE05C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F3A-0F3D0F850FD0-0FD4104A-104F10FB1361-13681400166D166E169B169C16EB-16ED1735173617D4-17D617D8-17DA1800-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD32010-20272030-20432045-20512053-205E207D207E208D208E2329232A2768-277527C527C627E6-27EF2983-299829D8-29DB29FC29FD2CF9-2CFC2CFE2CFF2E00-2E2E2E302E313001-30033008-30113014-301F3030303D30A030FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFD3EFD3FFE10-FE19FE30-FE52FE54-FE61FE63FE68FE6AFE6BFF01-FF03FF05-FF0AFF0C-FF0FFF1AFF1BFF1FFF20FF3B-FF3DFF3FFF5BFF5DFF5F-FF65",Pd:"002D058A05BE140018062010-20152E172E1A301C303030A0FE31FE32FE58FE63FF0D",Ps:"0028005B007B0F3A0F3C169B201A201E2045207D208D23292768276A276C276E27702772277427C527E627E827EA27EC27EE2983298529872989298B298D298F299129932995299729D829DA29FC2E222E242E262E283008300A300C300E3010301430163018301A301DFD3EFE17FE35FE37FE39FE3BFE3DFE3FFE41FE43FE47FE59FE5BFE5DFF08FF3BFF5BFF5FFF62",Pe:"0029005D007D0F3B0F3D169C2046207E208E232A2769276B276D276F27712773277527C627E727E927EB27ED27EF298429862988298A298C298E2990299229942996299829D929DB29FD2E232E252E272E293009300B300D300F3011301530173019301B301E301FFD3FFE18FE36FE38FE3AFE3CFE3EFE40FE42FE44FE48FE5AFE5CFE5EFF09FF3DFF5DFF60FF63",Pi:"00AB2018201B201C201F20392E022E042E092E0C2E1C2E20",Pf:"00BB2019201D203A2E032E052E0A2E0D2E1D2E21",Pc:"005F203F20402054FE33FE34FE4D-FE4FFF3F",Po:"0021-00230025-0027002A002C002E002F003A003B003F0040005C00A100B700BF037E0387055A-055F058905C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F850FD0-0FD4104A-104F10FB1361-1368166D166E16EB-16ED1735173617D4-17D617D8-17DA1800-18051807-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD3201620172020-20272030-2038203B-203E2041-20432047-205120532055-205E2CF9-2CFC2CFE2CFF2E002E012E06-2E082E0B2E0E-2E162E182E192E1B2E1E2E1F2E2A-2E2E2E302E313001-3003303D30FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFE10-FE16FE19FE30FE45FE46FE49-FE4CFE50-FE52FE54-FE57FE5F-FE61FE68FE6AFE6BFF01-FF03FF05-FF07FF0AFF0CFF0EFF0FFF1AFF1BFF1FFF20FF3CFF61FF64FF65",S:"0024002B003C-003E005E0060007C007E00A2-00A900AC00AE-00B100B400B600B800D700F702C2-02C502D2-02DF02E5-02EB02ED02EF-02FF03750384038503F604820606-0608060B060E060F06E906FD06FE07F609F209F309FA09FB0AF10B700BF3-0BFA0C7F0CF10CF20D790E3F0F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-139917DB194019E0-19FF1B61-1B6A1B74-1B7C1FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE20442052207A-207C208A-208C20A0-20B8210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B2140-2144214A-214D214F2190-2328232B-23E82400-24262440-244A249C-24E92500-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE27C0-27C427C7-27CA27CC27D0-27E527F0-29822999-29D729DC-29FB29FE-2B4C2B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F309B309C319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A700-A716A720A721A789A78AA828-A82BA836-A839AA77-AA79FB29FDFCFDFDFE62FE64-FE66FE69FF04FF0BFF1C-FF1EFF3EFF40FF5CFF5EFFE0-FFE6FFE8-FFEEFFFCFFFD",Sm:"002B003C-003E007C007E00AC00B100D700F703F60606-060820442052207A-207C208A-208C2140-2144214B2190-2194219A219B21A021A321A621AE21CE21CF21D221D421F4-22FF2308-230B23202321237C239B-23B323DC-23E125B725C125F8-25FF266F27C0-27C427C7-27CA27CC27D0-27E527F0-27FF2900-29822999-29D729DC-29FB29FE-2AFF2B30-2B442B47-2B4CFB29FE62FE64-FE66FF0BFF1C-FF1EFF5CFF5EFFE2FFE9-FFEC",Sc:"002400A2-00A5060B09F209F309FB0AF10BF90E3F17DB20A0-20B8A838FDFCFE69FF04FFE0FFE1FFE5FFE6",Sk:"005E006000A800AF00B400B802C2-02C502D2-02DF02E5-02EB02ED02EF-02FF0375038403851FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE309B309CA700-A716A720A721A789A78AFF3EFF40FFE3",So:"00A600A700A900AE00B000B60482060E060F06E906FD06FE07F609FA0B700BF3-0BF80BFA0C7F0CF10CF20D790F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-1399194019E0-19FF1B61-1B6A1B74-1B7C210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B214A214C214D214F2195-2199219C-219F21A121A221A421A521A7-21AD21AF-21CD21D021D121D321D5-21F32300-2307230C-231F2322-2328232B-237B237D-239A23B4-23DB23E2-23E82400-24262440-244A249C-24E92500-25B625B8-25C025C2-25F72600-266E2670-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE2800-28FF2B00-2B2F2B452B462B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A828-A82BA836A837A839AA77-AA79FDFDFFE4FFE8FFEDFFEEFFFCFFFD",Z:"002000A01680180E2000-200A20282029202F205F3000",Zs:"002000A01680180E2000-200A202F205F3000",Zl:"2028",Zp:"2029",C:"0000-001F007F-009F00AD03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-0605061C061D0620065F06DD070E070F074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17B417B517DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF200B-200F202A-202E2060-206F20722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-F8FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFD-FF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFFBFFFEFFFF",Cc:"0000-001F007F-009F",Cf:"00AD0600-060306DD070F17B417B5200B-200F202A-202E2060-2064206A-206FFEFFFFF9-FFFB",Co:"E000-F8FF",Cs:"D800-DFFF",Cn:"03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-05FF06040605061C061D0620065F070E074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF2065-206920722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-D7FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFDFEFEFF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFF8FFFEFFFF"})}),ace.define("ace/token_iterator",["require","exports","module"],function(a,b,c){"use strict";var d=function(a,b,c){this.$session=a,this.$row=b,this.$rowTokens=a.getTokens(b);var d=a.getTokenAt(b,c);this.$tokenIndex=d?d.index:-1};(function(){this.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},this.stepForward=function(){this.$tokenIndex+=1;for(var a;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,a||(a=this.$session.getLength()),this.$row>=a)return this.$row=a-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},this.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},this.getCurrentTokenRow=function(){return this.$row},this.getCurrentTokenColumn=function(){var a=this.$rowTokens,b=this.$tokenIndex,c=a[b].start;if(void 0!==c)return c;for(c=0;b>0;)b-=1,c+=a[b].value.length;return c},this.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}}}).call(d.prototype),b.TokenIterator=d}),ace.define("ace/mode/text",["require","exports","module","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(a,b,c){"use strict";var d=a("../tokenizer").Tokenizer,e=a("./text_highlight_rules").TextHighlightRules,f=a("./behaviour").Behaviour,g=a("../unicode"),h=a("../lib/lang"),i=a("../token_iterator").TokenIterator,j=a("../range").Range,k=function(){this.HighlightRules=e,this.$behaviour=new f};(function(){this.tokenRe=new RegExp("^["+g.packages.L+g.packages.Mn+g.packages.Mc+g.packages.Nd+g.packages.Pc+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+g.packages.L+g.packages.Mn+g.packages.Mc+g.packages.Nd+g.packages.Pc+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules,this.$tokenizer=new d(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(a,b,c,d){function e(a){for(var b=c;d>=b;b++)a(f.getLine(b),b)}var f=b.doc,g=!0,i=!0,j=1/0,k=b.getTabSize(),l=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))var m=this.lineCommentStart.map(h.escapeRegExp).join("|"),n=this.lineCommentStart[0];else var m=h.escapeRegExp(this.lineCommentStart),n=this.lineCommentStart;m=new RegExp("^(\\s*)(?:"+m+") ?"),l=b.getUseSoftTabs();var o=function(a,b){var c=a.match(m);if(c){var d=c[1].length,e=c[0].length;!s(a,d,e)&&" "==c[0][e-1]&&e--,f.removeInLine(b,d,e)}},p=n+" ",q=function(a,b){g&&!/\S/.test(a)||(s(a,j,j)?f.insertInLine({row:b,column:j},p):f.insertInLine({row:b,column:j},n))},r=function(a,b){return m.test(a)},s=function(a,b,c){for(var d=0;b--&&" "==a.charAt(b);)d++;if(d%k!=0)return!1;for(var d=0;" "==a.charAt(c++);)d++;return k>2?d%k!=k-1:d%k==0}}else{if(!this.blockComment)return!1;var n=this.blockComment.start,t=this.blockComment.end,m=new RegExp("^(\\s*)(?:"+h.escapeRegExp(n)+")"),u=new RegExp("(?:"+h.escapeRegExp(t)+")\\s*$"),q=function(a,b){r(a,b)||g&&!/\S/.test(a)||(f.insertInLine({row:b,column:a.length},t),f.insertInLine({row:b,column:j},n))},o=function(a,b){var c;(c=a.match(u))&&f.removeInLine(b,a.length-c[0].length,a.length),(c=a.match(m))&&f.removeInLine(b,c[1].length,c[0].length)},r=function(a,c){if(m.test(a))return!0;for(var d=b.getTokens(c),e=0;e<d.length;e++)if("comment"===d[e].type)return!0}}var v=1/0;e(function(a,b){var c=a.search(/\S/);-1!==c?(j>c&&(j=c),i&&!r(a,b)&&(i=!1)):v>a.length&&(v=a.length)}),j==1/0&&(j=v,g=!1,i=!1),l&&j%k!=0&&(j=Math.floor(j/k)*k),e(i?o:q)},this.toggleBlockComment=function(a,b,c,d){var e=this.blockComment;if(e){!e.start&&e[0]&&(e=e[0]);var f,g,h=new i(b,d.row,d.column),k=h.getCurrentToken(),l=(b.selection,b.selection.toOrientedRange());if(k&&/comment/.test(k.type)){for(var m,n;k&&/comment/.test(k.type);){var o=k.value.indexOf(e.start);if(-1!=o){var p=h.getCurrentTokenRow(),q=h.getCurrentTokenColumn()+o;m=new j(p,q,p,q+e.start.length);break}k=h.stepBackward()}for(var h=new i(b,d.row,d.column),k=h.getCurrentToken();k&&/comment/.test(k.type);){var o=k.value.indexOf(e.end);if(-1!=o){var p=h.getCurrentTokenRow(),q=h.getCurrentTokenColumn()+o;n=new j(p,q,p,q+e.end.length);break}k=h.stepForward()}n&&b.remove(n),m&&(b.remove(m),f=m.start.row,g=-e.start.length)}else g=e.start.length,f=c.start.row,b.insert(c.end,e.end),b.insert(c.start,e.start);l.start.row==f&&(l.start.column+=g),l.end.row==f&&(l.end.column+=g),b.selection.fromOrientedRange(l)}},this.getNextLineIndent=function(a,b,c){return this.$getIndent(b)},this.checkOutdent=function(a,b,c){return!1},this.autoOutdent=function(a,b,c){},this.$getIndent=function(a){return a.match(/^\s*/)[0]},this.createWorker=function(a){return null},this.createModeDelegates=function(a){this.$embeds=[],this.$modes={};for(var b in a)a[b]&&(this.$embeds.push(b),this.$modes[b]=new a[b]);for(var c=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"],b=0;b<c.length;b++)(function(a){var d=c[b],e=a[d];a[c[b]]=function(){return this.$delegator(d,arguments,e)}})(this)},this.$delegator=function(a,b,c){var d=b[0];"string"!=typeof d&&(d=d[0]);for(var e=0;e<this.$embeds.length;e++)if(this.$modes[this.$embeds[e]]){var f=d.split(this.$embeds[e]);if(!f[0]&&f[1]){b[0]=f[1];var g=this.$modes[this.$embeds[e]];return g[a].apply(g,b)}}var h=c.apply(this,b);return c?h:void 0},this.transformAction=function(a,b,c,d,e){if(this.$behaviour){var f=this.$behaviour.getBehaviours();for(var g in f)if(f[g][b]){var h=f[g][b].apply(this,arguments);if(h)return h}}},this.getKeywords=function(a){if(!this.completionKeywords){var b=this.$tokenizer.rules,c=[];for(var d in b)for(var e=b[d],f=0,g=e.length;g>f;f++)if("string"==typeof e[f].token)/keyword|support|storage/.test(e[f].token)&&c.push(e[f].regex);else if("object"==typeof e[f].token)for(var h=0,i=e[f].token.length;i>h;h++)if(/keyword|support|storage/.test(e[f].token[h])){var d=e[f].regex.match(/\(.+?\)/g)[h];c.push(d.substr(1,d.length-2))}this.completionKeywords=c}return a?c.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(a,b,c,d){var e=this.$keywordList||this.$createKeywordList();return e.map(function(a){return{name:a,value:a,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}).call(k.prototype),b.Mode=k}),ace.define("ace/apply_delta",["require","exports","module"],function(a,b,c){"use strict";function d(a,b){throw console.log("Invalid Delta:",a),"Invalid Delta: "+b}function e(a,b){return b.row>=0&&b.row<a.length&&b.column>=0&&b.column<=a[b.row].length}b.applyDelta=function(a,b,c){var d=b.start.row,e=b.start.column,f=a[d]||"";switch(b.action){case"insert":var g=b.lines;if(1===g.length)a[d]=f.substring(0,e)+b.lines[0]+f.substring(e);else{var h=[d,1].concat(b.lines);a.splice.apply(a,h),a[d]=f.substring(0,e)+a[d],a[d+b.lines.length-1]+=f.substring(e)}break;case"remove":var i=b.end.column,j=b.end.row;d===j?a[d]=f.substring(0,e)+f.substring(i):a.splice(d,j-d+1,f.substring(0,e)+a[j].substring(i))}}}),ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(a,b,c){"use strict";var d=a("./lib/oop"),e=a("./lib/event_emitter").EventEmitter,f=b.Anchor=function(a,b,c){this.$onChange=this.onChange.bind(this),this.attach(a),"undefined"==typeof c?this.setPosition(b.row,b.column):this.setPosition(b,c)};(function(){function a(a,b,c){var d=c?a.column<=b.column:a.column<b.column;return a.row<b.row||a.row==b.row&&d}function b(b,c,d){var e="insert"==b.action,f=(e?1:-1)*(b.end.row-b.start.row),g=(e?1:-1)*(b.end.column-b.start.column),h=b.start,i=e?h:b.end;return a(c,h,d)?{row:c.row,column:c.column}:a(i,c,!d)?{row:c.row+f,column:c.column+(c.row==i.row?g:0)}:{row:h.row,column:h.column}}d.implement(this,e),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(a){if(!(a.start.row==a.end.row&&a.start.row!=this.row||a.start.row>this.row)){var c=b(a,{row:this.row,column:this.column},this.$insertRight);this.setPosition(c.row,c.column,!0)}},this.setPosition=function(a,b,c){var d;if(d=c?{row:a,column:b}:this.$clipPositionToDocument(a,b),this.row!=d.row||this.column!=d.column){var e={row:this.row,column:this.column};this.row=d.row,this.column=d.column,this._signal("change",{old:e,value:d})}},this.detach=function(){this.document.removeEventListener("change",this.$onChange)},this.attach=function(a){this.document=a||this.document,this.document.on("change",this.$onChange)},this.$clipPositionToDocument=function(a,b){var c={};return a>=this.document.getLength()?(c.row=Math.max(0,this.document.getLength()-1),c.column=this.document.getLine(c.row).length):0>a?(c.row=0,c.column=0):(c.row=a,c.column=Math.min(this.document.getLine(c.row).length,Math.max(0,b))),0>b&&(c.column=0),c}}).call(f.prototype)}),ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],function(a,b,c){
"use strict";var d=a("./lib/oop"),e=a("./apply_delta").applyDelta,f=a("./lib/event_emitter").EventEmitter,g=a("./range").Range,h=a("./anchor").Anchor,i=function(a){this.$lines=[""],0===a.length?this.$lines=[""]:Array.isArray(a)?this.insertMergedLines({row:0,column:0},a):this.insert({row:0,column:0},a)};(function(){d.implement(this,f),this.setValue=function(a){var b=this.getLength()-1;this.remove(new g(0,0,b,this.getLine(b).length)),this.insert({row:0,column:0},a)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(a,b){return new h(this,a,b)},0==="aaa".split(/a/).length?this.$split=function(a){return a.replace(/\r\n|\r/g,"\n").split("\n")}:this.$split=function(a){return a.split(/\r\n|\r|\n/)},this.$detectNewLine=function(a){var b=a.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=b?b[1]:"\n",this._signal("changeNewLineMode")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\r\n";case"unix":return"\n";default:return this.$autoNewLine||"\n"}},this.$autoNewLine="",this.$newLineMode="auto",this.setNewLineMode=function(a){this.$newLineMode!==a&&(this.$newLineMode=a,this._signal("changeNewLineMode"))},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(a){return"\r\n"==a||"\r"==a||"\n"==a},this.getLine=function(a){return this.$lines[a]||""},this.getLines=function(a,b){return this.$lines.slice(a,b+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(a){return this.getLinesForRange(a).join(this.getNewLineCharacter())},this.getLinesForRange=function(a){var b;if(a.start.row===a.end.row)b=[this.getLine(a.start.row).substring(a.start.column,a.end.column)];else{b=this.getLines(a.start.row,a.end.row),b[0]=(b[0]||"").substring(a.start.column);var c=b.length-1;a.end.row-a.start.row==c&&(b[c]=b[c].substring(0,a.end.column))}return b},this.insertLines=function(a,b){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(a,b)},this.removeLines=function(a,b){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(a,b)},this.insertNewLine=function(a){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(a,["",""])},this.insert=function(a,b){return this.getLength()<=1&&this.$detectNewLine(b),this.insertMergedLines(a,this.$split(b))},this.insertInLine=function(a,b){var c=this.clippedPos(a.row,a.column),d=this.pos(a.row,a.column+b.length);return this.applyDelta({start:c,end:d,action:"insert",lines:[b]},!0),this.clonePos(d)},this.clippedPos=function(a,b){var c=this.getLength();void 0===a?a=c:0>a?a=0:a>=c&&(a=c-1,b=void 0);var d=this.getLine(a);return void 0==b&&(b=d.length),b=Math.min(Math.max(b,0),d.length),{row:a,column:b}},this.clonePos=function(a){return{row:a.row,column:a.column}},this.pos=function(a,b){return{row:a,column:b}},this.$clipPosition=function(a){var b=this.getLength();return a.row>=b?(a.row=Math.max(0,b-1),a.column=this.getLine(b-1).length):(a.row=Math.max(0,a.row),a.column=Math.min(Math.max(a.column,0),this.getLine(a.row).length)),a},this.insertFullLines=function(a,b){a=Math.min(Math.max(a,0),this.getLength());var c=0;a<this.getLength()?(b=b.concat([""]),c=0):(b=[""].concat(b),a--,c=this.$lines[a].length),this.insertMergedLines({row:a,column:c},b)},this.insertMergedLines=function(a,b){var c=this.clippedPos(a.row,a.column),d={row:c.row+b.length-1,column:(1==b.length?c.column:0)+b[b.length-1].length};return this.applyDelta({start:c,end:d,action:"insert",lines:b}),this.clonePos(d)},this.remove=function(a){var b=this.clippedPos(a.start.row,a.start.column),c=this.clippedPos(a.end.row,a.end.column);return this.applyDelta({start:b,end:c,action:"remove",lines:this.getLinesForRange({start:b,end:c})}),this.clonePos(b)},this.removeInLine=function(a,b,c){var d=this.clippedPos(a,b),e=this.clippedPos(a,c);return this.applyDelta({start:d,end:e,action:"remove",lines:this.getLinesForRange({start:d,end:e})},!0),this.clonePos(d)},this.removeFullLines=function(a,b){a=Math.min(Math.max(0,a),this.getLength()-1),b=Math.min(Math.max(0,b),this.getLength()-1);var c=b==this.getLength()-1&&a>0,d=b<this.getLength()-1,e=c?a-1:a,f=c?this.getLine(e).length:0,h=d?b+1:b,i=d?0:this.getLine(h).length,j=new g(e,f,h,i),k=this.$lines.slice(a,b+1);return this.applyDelta({start:j.start,end:j.end,action:"remove",lines:this.getLinesForRange(j)}),k},this.removeNewLine=function(a){a<this.getLength()-1&&a>=0&&this.applyDelta({start:this.pos(a,this.getLine(a).length),end:this.pos(a+1,0),action:"remove",lines:["",""]})},this.replace=function(a,b){if(a instanceof g||(a=g.fromPoints(a.start,a.end)),0===b.length&&a.isEmpty())return a.start;if(b==this.getTextRange(a))return a.end;this.remove(a);var c;return c=b?this.insert(a.start,b):a.start},this.applyDeltas=function(a){for(var b=0;b<a.length;b++)this.applyDelta(a[b])},this.revertDeltas=function(a){for(var b=a.length-1;b>=0;b--)this.revertDelta(a[b])},this.applyDelta=function(a,b){var c="insert"==a.action;(c?a.lines.length<=1&&!a.lines[0]:!g.comparePoints(a.start,a.end))||(c&&a.lines.length>2e4&&this.$splitAndapplyLargeDelta(a,2e4),e(this.$lines,a,b),this._signal("change",a))},this.$splitAndapplyLargeDelta=function(a,b){for(var c=a.lines,d=c.length,e=a.start.row,f=a.start.column,g=0,h=0;;){g=h,h+=b-1;var i=c.slice(g,h);if(h>d){a.lines=i,a.start.row=e+g,a.start.column=f;break}i.push(""),this.applyDelta({start:this.pos(e+g,f),end:this.pos(e+h,f=0),action:a.action,lines:i},!0)}},this.revertDelta=function(a){this.applyDelta({start:this.clonePos(a.start),end:this.clonePos(a.end),action:"insert"==a.action?"remove":"insert",lines:a.lines.slice()})},this.indexToPosition=function(a,b){for(var c=this.$lines||this.getAllLines(),d=this.getNewLineCharacter().length,e=b||0,f=c.length;f>e;e++)if(a-=c[e].length+d,0>a)return{row:e,column:a+c[e].length+d};return{row:f-1,column:c[f-1].length}},this.positionToIndex=function(a,b){for(var c=this.$lines||this.getAllLines(),d=this.getNewLineCharacter().length,e=0,f=Math.min(a.row,c.length),g=b||0;f>g;++g)e+=c[g].length+d;return e+a.column}}).call(i.prototype),b.Document=i}),ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(a,b,c){"use strict";var d=a("./lib/oop"),e=a("./lib/event_emitter").EventEmitter,f=function(a,b){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=a;var c=this;this.$worker=function(){if(c.running){for(var a=new Date,b=c.currentLine,d=-1,e=c.doc,f=b;c.lines[b];)b++;var g=e.getLength(),h=0;for(c.running=!1;g>b;){c.$tokenizeRow(b),d=b;do b++;while(c.lines[b]);if(h++,h%5===0&&new Date-a>20){c.running=setTimeout(c.$worker,20);break}}c.currentLine=b,d>=f&&c.fireUpdateEvent(f,d)}}};(function(){d.implement(this,e),this.setTokenizer=function(a){this.tokenizer=a,this.lines=[],this.states=[],this.start(0)},this.setDocument=function(a){this.doc=a,this.lines=[],this.states=[],this.stop()},this.fireUpdateEvent=function(a,b){var c={first:a,last:b};this._signal("update",{data:c})},this.start=function(a){this.currentLine=Math.min(a||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},this.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},this.$updateOnChange=function(a){var b=a.start.row,c=a.end.row-b;if(0===c)this.lines[b]=null;else if("remove"==a.action)this.lines.splice(b,c+1,null),this.states.splice(b,c+1,null);else{var d=Array(c+1);d.unshift(b,1),this.lines.splice.apply(this.lines,d),this.states.splice.apply(this.states,d)}this.currentLine=Math.min(b,this.currentLine,this.doc.getLength()),this.stop()},this.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},this.getTokens=function(a){return this.lines[a]||this.$tokenizeRow(a)},this.getState=function(a){return this.currentLine==a&&this.$tokenizeRow(a),this.states[a]||"start"},this.$tokenizeRow=function(a){var b=this.doc.getLine(a),c=this.states[a-1],d=this.tokenizer.getLineTokens(b,c,a);return this.states[a]+""!=d.state+""?(this.states[a]=d.state,this.lines[a+1]=null,this.currentLine>a+1&&(this.currentLine=a+1)):this.currentLine==a&&(this.currentLine=a+1),this.lines[a]=d.tokens}}).call(f.prototype),b.BackgroundTokenizer=f}),ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(a,b,c){"use strict";var d=a("./lib/lang"),e=(a("./lib/oop"),a("./range").Range),f=function(a,b,c){this.setRegexp(a),this.clazz=b,this.type=c||"text"};(function(){this.MAX_RANGES=500,this.setRegexp=function(a){this.regExp+""!=a+""&&(this.regExp=a,this.cache=[])},this.update=function(a,b,c,f){if(this.regExp)for(var g=f.firstRow,h=f.lastRow,i=g;h>=i;i++){var j=this.cache[i];null==j&&(j=d.getMatchOffsets(c.getLine(i),this.regExp),j.length>this.MAX_RANGES&&(j=j.slice(0,this.MAX_RANGES)),j=j.map(function(a){return new e(i,a.offset,i,a.offset+a.length)}),this.cache[i]=j.length?j:"");for(var k=j.length;k--;)b.drawSingleLineMarker(a,j[k].toScreenRange(c),this.clazz,f)}}}).call(f.prototype),b.SearchHighlight=f}),ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(a,b,c){"use strict";function d(a,b){this.foldData=a,Array.isArray(b)?this.folds=b:b=this.folds=[b];var c=b[b.length-1];this.range=new e(b[0].start.row,b[0].start.column,c.end.row,c.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(a){a.setFoldLine(this)},this)}var e=a("../range").Range;(function(){this.shiftRow=function(a){this.start.row+=a,this.end.row+=a,this.folds.forEach(function(b){b.start.row+=a,b.end.row+=a})},this.addFold=function(a){if(a.sameRow){if(a.start.row<this.startRow||a.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(a),this.folds.sort(function(a,b){return-a.range.compareEnd(b.start.row,b.start.column)}),this.range.compareEnd(a.start.row,a.start.column)>0?(this.end.row=a.end.row,this.end.column=a.end.column):this.range.compareStart(a.end.row,a.end.column)<0&&(this.start.row=a.start.row,this.start.column=a.start.column)}else if(a.start.row==this.end.row)this.folds.push(a),this.end.row=a.end.row,this.end.column=a.end.column;else{if(a.end.row!=this.start.row)throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");this.folds.unshift(a),this.start.row=a.start.row,this.start.column=a.start.column}a.foldLine=this},this.containsRow=function(a){return a>=this.start.row&&a<=this.end.row},this.walk=function(a,b,c){var d,e,f,g=0,h=this.folds,i=!0;null==b&&(b=this.end.row,c=this.end.column);for(var j=0;j<h.length;j++){if(d=h[j],e=d.range.compareStart(b,c),-1==e)return void a(null,b,c,g,i);if(f=a(null,d.start.row,d.start.column,g,i),f=!f&&a(d.placeholder,d.start.row,d.start.column,g),f||0===e)return;i=!d.sameRow,g=d.end.column}a(null,b,c,g,i)},this.getNextFoldTo=function(a,b){for(var c,d,e=0;e<this.folds.length;e++){if(c=this.folds[e],d=c.range.compareEnd(a,b),-1==d)return{fold:c,kind:"after"};if(0===d)return{fold:c,kind:"inside"}}return null},this.addRemoveChars=function(a,b,c){var d,e,f=this.getNextFoldTo(a,b);if(f)if(d=f.fold,"inside"==f.kind&&d.start.column!=b&&d.start.row!=a)window.console&&window.console.log(a,b,d);else if(d.start.row==a){e=this.folds;var g=e.indexOf(d);for(0===g&&(this.start.column+=c),g;g<e.length;g++){if(d=e[g],d.start.column+=c,!d.sameRow)return;d.end.column+=c}this.end.column+=c}},this.split=function(a,b){var c=this.getNextFoldTo(a,b);if(!c||"inside"==c.kind)return null;var e=c.fold,f=this.folds,g=this.foldData,h=f.indexOf(e),i=f[h-1];this.end.row=i.end.row,this.end.column=i.end.column,f=f.splice(h,f.length-h);var j=new d(g,f);return g.splice(g.indexOf(this)+1,0,j),j},this.merge=function(a){for(var b=a.folds,c=0;c<b.length;c++)this.addFold(b[c]);var d=this.foldData;d.splice(d.indexOf(a),1)},this.toString=function(){var a=[this.range.toString()+": ["];return this.folds.forEach(function(b){a.push("  "+b.toString())}),a.push("]"),a.join("\n")},this.idxToPosition=function(a){for(var b=0,c=0;c<this.folds.length;c++){var d=this.folds[c];if(a-=d.start.column-b,0>a)return{row:d.start.row,column:d.start.column+a};if(a-=d.placeholder.length,0>a)return d.start;b=d.end.column}return{row:this.end.row,column:this.end.column+a}}}).call(d.prototype),b.FoldLine=d}),ace.define("ace/range_list",["require","exports","module","ace/range"],function(a,b,c){"use strict";var d=a("./range").Range,e=d.comparePoints,f=function(){this.ranges=[]};(function(){this.comparePoints=e,this.pointIndex=function(a,b,c){for(var d=this.ranges,f=c||0;f<d.length;f++){var g=d[f],h=e(a,g.end);if(!(h>0)){var i=e(a,g.start);return 0===h?b&&0!==i?-f-2:f:i>0||0===i&&!b?f:-f-1}}return-f-1},this.add=function(a){var b=!a.isEmpty(),c=this.pointIndex(a.start,b);0>c&&(c=-c-1);var d=this.pointIndex(a.end,b,c);return 0>d?d=-d-1:d++,this.ranges.splice(c,d-c,a)},this.addList=function(a){for(var b=[],c=a.length;c--;)b.push.apply(b,this.add(a[c]));return b},this.substractPoint=function(a){var b=this.pointIndex(a);return b>=0?this.ranges.splice(b,1):void 0},this.merge=function(){var a=[],b=this.ranges;b=b.sort(function(a,b){return e(a.start,b.start)});for(var c,d=b[0],f=1;f<b.length;f++){c=d,d=b[f];var g=e(c.end,d.start);0>g||(0!=g||c.isEmpty()||d.isEmpty())&&(e(c.end,d.end)<0&&(c.end.row=d.end.row,c.end.column=d.end.column),b.splice(f,1),a.push(d),d=c,f--)}return this.ranges=b,a},this.contains=function(a,b){return this.pointIndex({row:a,column:b})>=0},this.containsPoint=function(a){return this.pointIndex(a)>=0},this.rangeAtPoint=function(a){var b=this.pointIndex(a);return b>=0?this.ranges[b]:void 0},this.clipRows=function(a,b){var c=this.ranges;if(c[0].start.row>b||c[c.length-1].start.row<a)return[];var d=this.pointIndex({row:a,column:0});0>d&&(d=-d-1);var e=this.pointIndex({row:b,column:0},d);0>e&&(e=-e-1);for(var f=[],g=d;e>g;g++)f.push(c[g]);return f},this.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},this.attach=function(a){this.session&&this.detach(),this.session=a,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},this.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},this.$onChange=function(a){if("insert"==a.action)var b=a.start,c=a.end;else var c=a.start,b=a.end;for(var d=b.row,e=c.row,f=e-d,g=-b.column+c.column,h=this.ranges,i=0,j=h.length;j>i;i++){var k=h[i];if(!(k.end.row<d)){if(k.start.row>d)break;if(k.start.row==d&&k.start.column>=b.column&&(k.start.column!=b.column||!this.$insertRight)&&(k.start.column+=g,k.start.row+=f),k.end.row==d&&k.end.column>=b.column){if(k.end.column==b.column&&this.$insertRight)continue;k.end.column==b.column&&g>0&&j-1>i&&k.end.column>k.start.column&&k.end.column==h[i+1].start.column&&(k.end.column-=g),k.end.column+=g,k.end.row+=f}}}if(0!=f&&j>i)for(;j>i;i++){var k=h[i];k.start.row+=f,k.end.row+=f}}}).call(f.prototype),b.RangeList=f}),ace.define("ace/edit_session/fold",["require","exports","module","ace/range","ace/range_list","ace/lib/oop"],function(a,b,c){"use strict";function d(a,b){a.row-=b.row,0==a.row&&(a.column-=b.column)}function e(a,b){d(a.start,b),d(a.end,b)}function f(a,b){0==a.row&&(a.column+=b.column),a.row+=b.row}function g(a,b){f(a.start,b),f(a.end,b)}var h=(a("../range").Range,a("../range_list").RangeList),i=a("../lib/oop"),j=b.Fold=function(a,b){this.foldLine=null,this.placeholder=b,this.range=a,this.start=a.start,this.end=a.end,this.sameRow=a.start.row==a.end.row,this.subFolds=this.ranges=[]};i.inherits(j,h),function(){this.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},this.setFoldLine=function(a){this.foldLine=a,this.subFolds.forEach(function(b){b.setFoldLine(a)})},this.clone=function(){var a=this.range.clone(),b=new j(a,this.placeholder);return this.subFolds.forEach(function(a){b.subFolds.push(a.clone())}),b.collapseChildren=this.collapseChildren,b},this.addSubFold=function(a){if(!this.range.isEqual(a)){if(!this.range.containsRange(a))throw new Error("A fold can't intersect already existing fold"+a.range+this.range);e(a,this.start);for(var b=a.start.row,c=a.start.column,d=0,f=-1;d<this.subFolds.length&&(f=this.subFolds[d].range.compare(b,c),1==f);d++);var g=this.subFolds[d];if(0==f)return g.addSubFold(a);for(var b=a.range.end.row,c=a.range.end.column,h=d,f=-1;h<this.subFolds.length&&(f=this.subFolds[h].range.compare(b,c),1==f);h++);this.subFolds[h];if(0==f)throw new Error("A fold can't intersect already existing fold"+a.range+this.range);this.subFolds.splice(d,h-d,a);return a.setFoldLine(this.foldLine),a}},this.restoreRange=function(a){return g(a,this.start)}}.call(j.prototype)}),ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator"],function(a,b,c){"use strict";function d(){this.getFoldAt=function(a,b,c){var d=this.getFoldLine(a);if(!d)return null;for(var e=d.folds,f=0;f<e.length;f++){var g=e[f];if(g.range.contains(a,b)){if(1==c&&g.range.isEnd(a,b))continue;if(-1==c&&g.range.isStart(a,b))continue;return g}}},this.getFoldsInRange=function(a){var b=a.start,c=a.end,d=this.$foldData,e=[];b.column+=1,c.column-=1;for(var f=0;f<d.length;f++){var g=d[f].range.compareRange(a);if(2!=g){if(-2==g)break;for(var h=d[f].folds,i=0;i<h.length;i++){var j=h[i];if(g=j.range.compareRange(a),-2==g)break;if(2!=g){if(42==g)break;e.push(j)}}}}return b.column-=1,c.column+=1,e},this.getFoldsInRangeList=function(a){if(Array.isArray(a)){var b=[];a.forEach(function(a){b=b.concat(this.getFoldsInRange(a))},this)}else var b=this.getFoldsInRange(a);return b},this.getAllFolds=function(){for(var a=[],b=this.$foldData,c=0;c<b.length;c++)for(var d=0;d<b[c].folds.length;d++)a.push(b[c].folds[d]);return a},this.getFoldStringAt=function(a,b,c,d){if(d=d||this.getFoldLine(a),!d)return null;for(var e,f,g={end:{column:0}},h=0;h<d.folds.length;h++){f=d.folds[h];var i=f.range.compareEnd(a,b);if(-1==i){e=this.getLine(f.start.row).substring(g.end.column,f.start.column);break}if(0===i)return null;g=f}return e||(e=this.getLine(f.start.row).substring(g.end.column)),-1==c?e.substring(0,b-g.end.column):1==c?e.substring(b-g.end.column):e},this.getFoldLine=function(a,b){var c=this.$foldData,d=0;for(b&&(d=c.indexOf(b)),-1==d&&(d=0),d;d<c.length;d++){var e=c[d];if(e.start.row<=a&&e.end.row>=a)return e;if(e.end.row>a)return null}return null},this.getNextFoldLine=function(a,b){var c=this.$foldData,d=0;for(b&&(d=c.indexOf(b)),-1==d&&(d=0),d;d<c.length;d++){var e=c[d];if(e.end.row>=a)return e}return null},this.getFoldedRowCount=function(a,b){for(var c=this.$foldData,d=b-a+1,e=0;e<c.length;e++){var f=c[e],g=f.end.row,h=f.start.row;if(g>=b){b>h&&(h>=a?d-=b-h:d=0);break}g>=a&&(d-=h>=a?g-h:g-a+1)}return d},this.$addFoldLine=function(a){return this.$foldData.push(a),this.$foldData.sort(function(a,b){return a.start.row-b.start.row}),a},this.addFold=function(a,b){var c,d=this.$foldData,e=!1;a instanceof g?c=a:(c=new g(b,a),c.collapseChildren=b.collapseChildren),this.$clipRangeToDocument(c.range);var h=c.start.row,i=c.start.column,j=c.end.row,k=c.end.column;if(j>h||h==j&&k-2>=i){var l=this.getFoldAt(h,i,1),m=this.getFoldAt(j,k,-1);if(l&&m==l)return l.addSubFold(c);l&&!l.range.isStart(h,i)&&this.removeFold(l),m&&!m.range.isEnd(j,k)&&this.removeFold(m);var n=this.getFoldsInRange(c.range);n.length>0&&(this.removeFolds(n),n.forEach(function(a){c.addSubFold(a)}));for(var o=0;o<d.length;o++){var p=d[o];if(j==p.start.row){p.addFold(c),e=!0;break}if(h==p.end.row){if(p.addFold(c),e=!0,!c.sameRow){var q=d[o+1];if(q&&q.start.row==j){p.merge(q);break}}break}if(j<=p.start.row)break}return e||(p=this.$addFoldLine(new f(this.$foldData,c))),this.$useWrapMode?this.$updateWrapData(p.start.row,p.start.row):this.$updateRowLengthCache(p.start.row,p.start.row),this.$modified=!0,this._signal("changeFold",{data:c,action:"add"}),c}throw new Error("The range has to be at least 2 characters width")},this.addFolds=function(a){a.forEach(function(a){this.addFold(a)},this)},this.removeFold=function(a){var b=a.foldLine,c=b.start.row,d=b.end.row,e=this.$foldData,f=b.folds;if(1==f.length)e.splice(e.indexOf(b),1);else if(b.range.isEnd(a.end.row,a.end.column))f.pop(),b.end.row=f[f.length-1].end.row,b.end.column=f[f.length-1].end.column;else if(b.range.isStart(a.start.row,a.start.column))f.shift(),b.start.row=f[0].start.row,b.start.column=f[0].start.column;else if(a.sameRow)f.splice(f.indexOf(a),1);else{var g=b.split(a.start.row,a.start.column);f=g.folds,f.shift(),g.start.row=f[0].start.row,g.start.column=f[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(c,d):this.$updateRowLengthCache(c,d)),this.$modified=!0,this._signal("changeFold",{data:a,action:"remove"})},this.removeFolds=function(a){for(var b=[],c=0;c<a.length;c++)b.push(a[c]);b.forEach(function(a){this.removeFold(a)},this),this.$modified=!0},this.expandFold=function(a){this.removeFold(a),a.subFolds.forEach(function(b){a.restoreRange(b),this.addFold(b)},this),a.collapseChildren>0&&this.foldAll(a.start.row+1,a.end.row,a.collapseChildren-1),a.subFolds=[]},this.expandFolds=function(a){a.forEach(function(a){this.expandFold(a)},this)},this.unfold=function(a,b){var c,d;if(null==a?(c=new e(0,0,this.getLength(),0),b=!0):c="number"==typeof a?new e(a,0,a,this.getLine(a).length):"row"in a?e.fromPoints(a,a):a,d=this.getFoldsInRangeList(c),b)this.removeFolds(d);else for(var f=d;f.length;)this.expandFolds(f),f=this.getFoldsInRangeList(c);return d.length?d:void 0},this.isRowFolded=function(a,b){return!!this.getFoldLine(a,b)},this.getRowFoldEnd=function(a,b){var c=this.getFoldLine(a,b);return c?c.end.row:a},this.getRowFoldStart=function(a,b){var c=this.getFoldLine(a,b);return c?c.start.row:a},this.getFoldDisplayLine=function(a,b,c,d,e){null==d&&(d=a.start.row),null==e&&(e=0),null==b&&(b=a.end.row),null==c&&(c=this.getLine(b).length);var f=this.doc,g="";return a.walk(function(a,b,c,h){if(!(d>b)){if(b==d){if(e>c)return;h=Math.max(e,h)}g+=null!=a?a:f.getLine(b).substring(h,c)}},b,c),g},this.getDisplayLine=function(a,b,c,d){var e=this.getFoldLine(a);if(!e){var f;return f=this.doc.getLine(a),f.substring(d||0,b||f.length)}return this.getFoldDisplayLine(e,a,b,c,d)},this.$cloneFoldData=function(){var a=[];return a=this.$foldData.map(function(b){var c=b.folds.map(function(a){return a.clone()});return new f(a,c)})},this.toggleFold=function(a){var b,c,d=this.selection,e=d.getRange();if(e.isEmpty()){var f=e.start;if(b=this.getFoldAt(f.row,f.column))return void this.expandFold(b);(c=this.findMatchingBracket(f))?1==e.comparePoint(c)?e.end=c:(e.start=c,e.start.column++,e.end.column--):(c=this.findMatchingBracket({row:f.row,column:f.column+1}))?(1==e.comparePoint(c)?e.end=c:e.start=c,e.start.column++):e=this.getCommentFoldRange(f.row,f.column)||e}else{var g=this.getFoldsInRange(e);if(a&&g.length)return void this.expandFolds(g);1==g.length&&(b=g[0])}if(b||(b=this.getFoldAt(e.start.row,e.start.column)),b&&b.range.toString()==e.toString())return void this.expandFold(b);var h="...";if(!e.isMultiLine()){if(h=this.getTextRange(e),h.length<4)return;h=h.trim().substring(0,2)+".."}this.addFold(h,e)},this.getCommentFoldRange=function(a,b,c){var d=new h(this,a,b),f=d.getCurrentToken();if(f&&/^comment|string/.test(f.type)){var g=new e,i=new RegExp(f.type.replace(/\..*/,"\\."));if(1!=c){do f=d.stepBackward();while(f&&i.test(f.type));d.stepForward()}if(g.start.row=d.getCurrentTokenRow(),g.start.column=d.getCurrentTokenColumn()+2,d=new h(this,a,b),-1!=c){do f=d.stepForward();while(f&&i.test(f.type));f=d.stepBackward()}else f=d.getCurrentToken();return g.end.row=d.getCurrentTokenRow(),g.end.column=d.getCurrentTokenColumn()+f.value.length-2,g}},this.foldAll=function(a,b,c){void 0==c&&(c=1e5);var d=this.foldWidgets;if(d){b=b||this.getLength(),a=a||0;for(var e=a;b>e;e++)if(null==d[e]&&(d[e]=this.getFoldWidget(e)),"start"==d[e]){var f=this.getFoldWidgetRange(e);if(f&&f.isMultiLine()&&f.end.row<=b&&f.start.row>=a){e=f.end.row;try{var g=this.addFold("...",f);g&&(g.collapseChildren=c)}catch(h){}}}}},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(a){if(!this.$foldStyles[a])throw new Error("invalid fold style: "+a+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=a){this.$foldStyle=a,"manual"==a&&this.unfold();var b=this.$foldMode;this.$setFolding(null),this.$setFolding(b)}},this.$setFolding=function(a){return this.$foldMode!=a?(this.$foldMode=a,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation"),a&&"manual"!=this.$foldStyle?(this.foldWidgets=[],this.getFoldWidget=a.getFoldWidget.bind(a,this,this.$foldStyle),this.getFoldWidgetRange=a.getFoldWidgetRange.bind(a,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),void 0):void(this.foldWidgets=null)):void 0},this.getParentFoldRangeData=function(a,b){var c=this.foldWidgets;if(!c||b&&c[a])return{};for(var d,e=a-1;e>=0;){var f=c[e];if(null==f&&(f=c[e]=this.getFoldWidget(e)),"start"==f){var g=this.getFoldWidgetRange(e);if(d||(d=g),g&&g.end.row>=a)break}e--}return{range:-1!==e&&g,firstRange:d}},this.onFoldWidgetClick=function(a,b){b=b.domEvent;var c={children:b.shiftKey,all:b.ctrlKey||b.metaKey,siblings:b.altKey},d=this.$toggleFoldWidget(a,c);if(!d){var e=b.target||b.srcElement;e&&/ace_fold-widget/.test(e.className)&&(e.className+=" ace_invalid")}},this.$toggleFoldWidget=function(a,b){if(this.getFoldWidget){var c=this.getFoldWidget(a),d=this.getLine(a),e="end"===c?-1:1,f=this.getFoldAt(a,-1===e?0:d.length,e);if(f)return void(b.children||b.all?this.removeFold(f):this.expandFold(f));var g=this.getFoldWidgetRange(a,!0);if(g&&!g.isMultiLine()&&(f=this.getFoldAt(g.start.row,g.start.column,1),f&&g.isEqual(f.range)))return void this.removeFold(f);if(b.siblings){var h=this.getParentFoldRangeData(a);if(h.range)var i=h.range.start.row+1,j=h.range.end.row;this.foldAll(i,j,b.all?1e4:0)}else b.children?(j=g?g.end.row:this.getLength(),this.foldAll(a+1,j,b.all?1e4:0)):g&&(b.all&&(g.collapseChildren=1e4),this.addFold("...",g));return g}},this.toggleFoldWidget=function(a){var b=this.selection.getCursor().row;b=this.getRowFoldStart(b);var c=this.$toggleFoldWidget(b,{});if(!c){var d=this.getParentFoldRangeData(b,!0);if(c=d.range||d.firstRange){b=c.start.row;var e=this.getFoldAt(b,this.getLine(b).length,1);e?this.removeFold(e):this.addFold("...",c)}}},this.updateFoldWidgets=function(a){var b=a.start.row,c=a.end.row-b;if(0===c)this.foldWidgets[b]=null;else if("remove"==a.action)this.foldWidgets.splice(b,c+1,null);else{var d=Array(c+1);d.unshift(b,1),this.foldWidgets.splice.apply(this.foldWidgets,d)}},this.tokenizerUpdateFoldWidgets=function(a){var b=a.data;b.first!=b.last&&this.foldWidgets.length>b.first&&this.foldWidgets.splice(b.first,this.foldWidgets.length)}}var e=a("../range").Range,f=a("./fold_line").FoldLine,g=a("./fold").Fold,h=a("../token_iterator").TokenIterator;b.Folding=d}),ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(a,b,c){"use strict";function d(){this.findMatchingBracket=function(a,b){if(0==a.column)return null;var c=b||this.getLine(a.row).charAt(a.column-1);if(""==c)return null;var d=c.match(/([\(\[\{])|([\)\]\}])/);return d?d[1]?this.$findClosingBracket(d[1],a):this.$findOpeningBracket(d[2],a):null},this.getBracketRange=function(a){var b,c=this.getLine(a.row),d=!0,e=c.charAt(a.column-1),g=e&&e.match(/([\(\[\{])|([\)\]\}])/);if(g||(e=c.charAt(a.column),a={row:a.row,column:a.column+1},g=e&&e.match(/([\(\[\{])|([\)\]\}])/),d=!1),!g)return null;if(g[1]){var h=this.$findClosingBracket(g[1],a);if(!h)return null;b=f.fromPoints(a,h),d||(b.end.column++,b.start.column--),b.cursor=b.end}else{var h=this.$findOpeningBracket(g[2],a);if(!h)return null;b=f.fromPoints(h,a),d||(b.start.column++,b.end.column--),b.cursor=b.start}return b},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{"},this.$findOpeningBracket=function(a,b,c){var d=this.$brackets[a],f=1,g=new e(this,b.row,b.column),h=g.getCurrentToken();if(h||(h=g.stepForward()),h){c||(c=new RegExp("(\\.?"+h.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)")+")+"));for(var i=b.column-g.getCurrentTokenColumn()-2,j=h.value;;){for(;i>=0;){var k=j.charAt(i);if(k==d){if(f-=1,0==f)return{row:g.getCurrentTokenRow(),column:i+g.getCurrentTokenColumn()}}else k==a&&(f+=1);i-=1}do h=g.stepBackward();while(h&&!c.test(h.type));if(null==h)break;j=h.value,i=j.length-1}return null}},this.$findClosingBracket=function(a,b,c){var d=this.$brackets[a],f=1,g=new e(this,b.row,b.column),h=g.getCurrentToken();if(h||(h=g.stepForward()),h){c||(c=new RegExp("(\\.?"+h.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)")+")+"));for(var i=b.column-g.getCurrentTokenColumn();;){for(var j=h.value,k=j.length;k>i;){var l=j.charAt(i);if(l==d){if(f-=1,0==f)return{row:g.getCurrentTokenRow(),column:i+g.getCurrentTokenColumn()}}else l==a&&(f+=1);i+=1}do h=g.stepForward();while(h&&!c.test(h.type));if(null==h)break;i=0}return null}}}var e=a("../token_iterator").TokenIterator,f=a("../range").Range;b.BracketMatch=d}),ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/edit_session/folding","ace/edit_session/bracket_match"],function(a,b,c){"use strict";var d=a("./lib/oop"),e=a("./lib/lang"),f=a("./config"),g=a("./lib/event_emitter").EventEmitter,h=a("./selection").Selection,i=a("./mode/text").Mode,j=a("./range").Range,k=a("./document").Document,l=a("./background_tokenizer").BackgroundTokenizer,m=a("./search_highlight").SearchHighlight,n=function(a,b){this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.$foldData.toString=function(){return this.join("\n")},this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),"object"==typeof a&&a.getLine||(a=new k(a)),this.setDocument(a),this.selection=new h(this),f.resetOptions(this),this.setMode(b),f._signal("session",this)};(function(){function a(a){return 4352>a?!1:a>=4352&&4447>=a||a>=4515&&4519>=a||a>=4602&&4607>=a||a>=9001&&9002>=a||a>=11904&&11929>=a||a>=11931&&12019>=a||a>=12032&&12245>=a||a>=12272&&12283>=a||a>=12288&&12350>=a||a>=12353&&12438>=a||a>=12441&&12543>=a||a>=12549&&12589>=a||a>=12593&&12686>=a||a>=12688&&12730>=a||a>=12736&&12771>=a||a>=12784&&12830>=a||a>=12832&&12871>=a||a>=12880&&13054>=a||a>=13056&&19903>=a||a>=19968&&42124>=a||a>=42128&&42182>=a||a>=43360&&43388>=a||a>=44032&&55203>=a||a>=55216&&55238>=a||a>=55243&&55291>=a||a>=63744&&64255>=a||a>=65040&&65049>=a||a>=65072&&65106>=a||a>=65108&&65126>=a||a>=65128&&65131>=a||a>=65281&&65376>=a||a>=65504&&65510>=a}d.implement(this,g),this.setDocument=function(a){this.doc&&this.doc.removeListener("change",this.$onChange),this.doc=a,a.on("change",this.$onChange),this.bgTokenizer&&this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},this.getDocument=function(){return this.doc},this.$resetRowCache=function(a){if(!a)return this.$docRowCache=[],void(this.$screenRowCache=[]);var b=this.$docRowCache.length,c=this.$getRowCacheIndex(this.$docRowCache,a)+1;
b>c&&(this.$docRowCache.splice(c,b),this.$screenRowCache.splice(c,b))},this.$getRowCacheIndex=function(a,b){for(var c=0,d=a.length-1;d>=c;){var e=c+d>>1,f=a[e];if(b>f)c=e+1;else{if(!(f>b))return e;d=e-1}}return c-1},this.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.bgTokenizer&&this.bgTokenizer.start(0)},this.onChangeFold=function(a){var b=a.data;this.$resetRowCache(b.start.row)},this.onChange=function(a){this.$modified=!0,this.$resetRowCache(a.start.row);var b=this.$updateInternalDataOnChange(a);!this.$fromUndo&&this.$undoManager&&!a.ignore&&(this.$deltasDoc.push(a),b&&0!=b.length&&this.$deltasFold.push({action:"removeFolds",folds:b}),this.$informUndoManager.schedule()),this.bgTokenizer&&this.bgTokenizer.$updateOnChange(a),this._signal("change",a)},this.setValue=function(a){this.doc.setValue(a),this.selection.moveTo(0,0),this.$resetRowCache(0),this.$deltas=[],this.$deltasDoc=[],this.$deltasFold=[],this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},this.getValue=this.toString=function(){return this.doc.getValue()},this.getSelection=function(){return this.selection},this.getState=function(a){return this.bgTokenizer.getState(a)},this.getTokens=function(a){return this.bgTokenizer.getTokens(a)},this.getTokenAt=function(a,b){var c,d=this.bgTokenizer.getTokens(a),e=0;if(null==b)f=d.length-1,e=this.getLine(a).length;else for(var f=0;f<d.length&&(e+=d[f].value.length,!(e>=b));f++);return c=d[f],c?(c.index=f,c.start=e-c.value.length,c):null},this.setUndoManager=function(a){if(this.$undoManager=a,this.$deltas=[],this.$deltasDoc=[],this.$deltasFold=[],this.$informUndoManager&&this.$informUndoManager.cancel(),a){var b=this;this.$syncInformUndoManager=function(){b.$informUndoManager.cancel(),b.$deltasFold.length&&(b.$deltas.push({group:"fold",deltas:b.$deltasFold}),b.$deltasFold=[]),b.$deltasDoc.length&&(b.$deltas.push({group:"doc",deltas:b.$deltasDoc}),b.$deltasDoc=[]),b.$deltas.length>0&&a.execute({action:"aceupdate",args:[b.$deltas,b],merge:b.mergeUndoDeltas}),b.mergeUndoDeltas=!1,b.$deltas=[]},this.$informUndoManager=e.delayedCall(this.$syncInformUndoManager)}},this.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},this.$defaultUndoManager={undo:function(){},redo:function(){},reset:function(){}},this.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},this.getTabString=function(){return this.getUseSoftTabs()?e.stringRepeat(" ",this.getTabSize()):"	"},this.setUseSoftTabs=function(a){this.setOption("useSoftTabs",a)},this.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},this.setTabSize=function(a){this.setOption("tabSize",a)},this.getTabSize=function(){return this.$tabSize},this.isTabStop=function(a){return this.$useSoftTabs&&a.column%this.$tabSize===0},this.$overwrite=!1,this.setOverwrite=function(a){this.setOption("overwrite",a)},this.getOverwrite=function(){return this.$overwrite},this.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},this.addGutterDecoration=function(a,b){this.$decorations[a]||(this.$decorations[a]=""),this.$decorations[a]+=" "+b,this._signal("changeBreakpoint",{})},this.removeGutterDecoration=function(a,b){this.$decorations[a]=(this.$decorations[a]||"").replace(" "+b,""),this._signal("changeBreakpoint",{})},this.getBreakpoints=function(){return this.$breakpoints},this.setBreakpoints=function(a){this.$breakpoints=[];for(var b=0;b<a.length;b++)this.$breakpoints[a[b]]="ace_breakpoint";this._signal("changeBreakpoint",{})},this.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},this.setBreakpoint=function(a,b){void 0===b&&(b="ace_breakpoint"),b?this.$breakpoints[a]=b:delete this.$breakpoints[a],this._signal("changeBreakpoint",{})},this.clearBreakpoint=function(a){delete this.$breakpoints[a],this._signal("changeBreakpoint",{})},this.addMarker=function(a,b,c,d){var e=this.$markerId++,f={range:a,type:c||"line",renderer:"function"==typeof c?c:null,clazz:b,inFront:!!d,id:e};return d?(this.$frontMarkers[e]=f,this._signal("changeFrontMarker")):(this.$backMarkers[e]=f,this._signal("changeBackMarker")),e},this.addDynamicMarker=function(a,b){if(a.update){var c=this.$markerId++;return a.id=c,a.inFront=!!b,b?(this.$frontMarkers[c]=a,this._signal("changeFrontMarker")):(this.$backMarkers[c]=a,this._signal("changeBackMarker")),a}},this.removeMarker=function(a){var b=this.$frontMarkers[a]||this.$backMarkers[a];if(b){var c=b.inFront?this.$frontMarkers:this.$backMarkers;b&&(delete c[a],this._signal(b.inFront?"changeFrontMarker":"changeBackMarker"))}},this.getMarkers=function(a){return a?this.$frontMarkers:this.$backMarkers},this.highlight=function(a){if(!this.$searchHighlight){var b=new m(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(b)}this.$searchHighlight.setRegexp(a)},this.highlightLines=function(a,b,c,d){"number"!=typeof b&&(c=b,b=a),c||(c="ace_step");var e=new j(a,0,b,1/0);return e.id=this.addMarker(e,c,"fullLine",d),e},this.setAnnotations=function(a){this.$annotations=a,this._signal("changeAnnotation",{})},this.getAnnotations=function(){return this.$annotations||[]},this.clearAnnotations=function(){this.setAnnotations([])},this.$detectNewLine=function(a){var b=a.match(/^.*?(\r?\n)/m);b?this.$autoNewLine=b[1]:this.$autoNewLine="\n"},this.getWordRange=function(a,b){var c=this.getLine(a),d=!1;if(b>0&&(d=!!c.charAt(b-1).match(this.tokenRe)),d||(d=!!c.charAt(b).match(this.tokenRe)),d)var e=this.tokenRe;else if(/^\s+$/.test(c.slice(b-1,b+1)))var e=/\s/;else var e=this.nonTokenRe;var f=b;if(f>0){do f--;while(f>=0&&c.charAt(f).match(e));f++}for(var g=b;g<c.length&&c.charAt(g).match(e);)g++;return new j(a,f,a,g)},this.getAWordRange=function(a,b){for(var c=this.getWordRange(a,b),d=this.getLine(c.end.row);d.charAt(c.end.column).match(/[ \t]/);)c.end.column+=1;return c},this.setNewLineMode=function(a){this.doc.setNewLineMode(a)},this.getNewLineMode=function(){return this.doc.getNewLineMode()},this.setUseWorker=function(a){this.setOption("useWorker",a)},this.getUseWorker=function(){return this.$useWorker},this.onReloadTokenizer=function(a){var b=a.data;this.bgTokenizer.start(b.first),this._signal("tokenizerUpdate",a)},this.$modes={},this.$mode=null,this.$modeId=null,this.setMode=function(a,b){if(a&&"object"==typeof a){if(a.getTokenizer)return this.$onChangeMode(a);var c=a,d=c.path}else d=a||"ace/mode/text";return this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new i),this.$modes[d]&&!c?(this.$onChangeMode(this.$modes[d]),void(b&&b())):(this.$modeId=d,f.loadModule(["mode",d],function(a){return this.$modeId!==d?b&&b():(this.$modes[d]&&!c?this.$onChangeMode(this.$modes[d]):a&&a.Mode&&(a=new a.Mode(c),c||(this.$modes[d]=a,a.$id=d),this.$onChangeMode(a)),void(b&&b()))}.bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0),void 0)},this.$onChangeMode=function(a,b){if(b||(this.$modeId=a.$id),this.$mode!==a){this.$mode=a,this.$stopWorker(),this.$useWorker&&this.$startWorker();var c=a.getTokenizer();if(void 0!==c.addEventListener){var d=this.onReloadTokenizer.bind(this);c.addEventListener("update",d)}if(this.bgTokenizer)this.bgTokenizer.setTokenizer(c);else{this.bgTokenizer=new l(c);var e=this;this.bgTokenizer.addEventListener("update",function(a){e._signal("tokenizerUpdate",a)})}this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=a.tokenRe,this.nonTokenRe=a.nonTokenRe,b||(a.attachToSession&&a.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(a.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode"))}},this.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},this.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(a){f.warn("Could not load worker",a),this.$worker=null}},this.getMode=function(){return this.$mode},this.$scrollTop=0,this.setScrollTop=function(a){this.$scrollTop===a||isNaN(a)||(this.$scrollTop=a,this._signal("changeScrollTop",a))},this.getScrollTop=function(){return this.$scrollTop},this.$scrollLeft=0,this.setScrollLeft=function(a){this.$scrollLeft===a||isNaN(a)||(this.$scrollLeft=a,this._signal("changeScrollLeft",a))},this.getScrollLeft=function(){return this.$scrollLeft},this.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},this.getLineWidgetMaxWidth=function(){if(null!=this.lineWidgetsWidth)return this.lineWidgetsWidth;var a=0;return this.lineWidgets.forEach(function(b){b&&b.screenWidth>a&&(a=b.screenWidth)}),this.lineWidgetWidth=a},this.$computeWidth=function(a){if(this.$modified||a){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var b=this.doc.getAllLines(),c=this.$rowLengthCache,d=0,e=0,f=this.$foldData[e],g=f?f.start.row:1/0,h=b.length,i=0;h>i;i++){if(i>g){if(i=f.end.row+1,i>=h)break;f=this.$foldData[e++],g=f?f.start.row:1/0}null==c[i]&&(c[i]=this.$getStringScreenWidth(b[i])[0]),c[i]>d&&(d=c[i])}this.screenWidth=d}},this.getLine=function(a){return this.doc.getLine(a)},this.getLines=function(a,b){return this.doc.getLines(a,b)},this.getLength=function(){return this.doc.getLength()},this.getTextRange=function(a){return this.doc.getTextRange(a||this.selection.getRange())},this.insert=function(a,b){return this.doc.insert(a,b)},this.remove=function(a){return this.doc.remove(a)},this.removeFullLines=function(a,b){return this.doc.removeFullLines(a,b)},this.undoChanges=function(a,b){if(a.length){this.$fromUndo=!0;for(var c=null,d=a.length-1;-1!=d;d--){var e=a[d];"doc"==e.group?(this.doc.revertDeltas(e.deltas),c=this.$getUndoSelection(e.deltas,!0,c)):e.deltas.forEach(function(a){this.addFolds(a.folds)},this)}return this.$fromUndo=!1,c&&this.$undoSelect&&!b&&this.selection.setSelectionRange(c),c}},this.redoChanges=function(a,b){if(a.length){this.$fromUndo=!0;for(var c=null,d=0;d<a.length;d++){var e=a[d];"doc"==e.group&&(this.doc.applyDeltas(e.deltas),c=this.$getUndoSelection(e.deltas,!1,c))}return this.$fromUndo=!1,c&&this.$undoSelect&&!b&&this.selection.setSelectionRange(c),c}},this.setUndoSelect=function(a){this.$undoSelect=a},this.$getUndoSelection=function(a,b,c){function d(a){return b?"insert"!==a.action:"insert"===a.action}var e,f,g=a[0],h=!1;d(g)?(e=j.fromPoints(g.start,g.end),h=!0):(e=j.fromPoints(g.start,g.start),h=!1);for(var i=1;i<a.length;i++)g=a[i],d(g)?(f=g.start,-1==e.compare(f.row,f.column)&&e.setStart(f),f=g.end,1==e.compare(f.row,f.column)&&e.setEnd(f),h=!0):(f=g.start,-1==e.compare(f.row,f.column)&&(e=j.fromPoints(g.start,g.start)),h=!1);if(null!=c){0===j.comparePoints(c.start,e.start)&&(c.start.column+=e.end.column-e.start.column,c.end.column+=e.end.column-e.start.column);var k=c.compareRange(e);1==k?e.setStart(c.start):-1==k&&e.setEnd(c.end)}return e},this.replace=function(a,b){return this.doc.replace(a,b)},this.moveText=function(a,b,c){var d=this.getTextRange(a),e=this.getFoldsInRange(a),f=j.fromPoints(b,b);if(!c){this.remove(a);var g=a.start.row-a.end.row,h=g?-a.end.column:a.start.column-a.end.column;h&&(f.start.row==a.end.row&&f.start.column>a.end.column&&(f.start.column+=h),f.end.row==a.end.row&&f.end.column>a.end.column&&(f.end.column+=h)),g&&f.start.row>=a.end.row&&(f.start.row+=g,f.end.row+=g)}if(f.end=this.insert(f.start,d),e.length){var i=a.start,k=f.start,g=k.row-i.row,h=k.column-i.column;this.addFolds(e.map(function(a){return a=a.clone(),a.start.row==i.row&&(a.start.column+=h),a.end.row==i.row&&(a.end.column+=h),a.start.row+=g,a.end.row+=g,a}))}return f},this.indentRows=function(a,b,c){c=c.replace(/\t/g,this.getTabString());for(var d=a;b>=d;d++)this.doc.insertInLine({row:d,column:0},c)},this.outdentRows=function(a){for(var b=a.collapseRows(),c=new j(0,0,0,0),d=this.getTabSize(),e=b.start.row;e<=b.end.row;++e){var f=this.getLine(e);c.start.row=e,c.end.row=e;for(var g=0;d>g&&" "==f.charAt(g);++g);d>g&&"	"==f.charAt(g)?(c.start.column=g,c.end.column=g+1):(c.start.column=0,c.end.column=g),this.remove(c)}},this.$moveLines=function(a,b,c){if(a=this.getRowFoldStart(a),b=this.getRowFoldEnd(b),0>c){var d=this.getRowFoldStart(a+c);if(0>d)return 0;var e=d-a}else if(c>0){var d=this.getRowFoldEnd(b+c);if(d>this.doc.getLength()-1)return 0;var e=d-b}else{a=this.$clipRowToDocument(a),b=this.$clipRowToDocument(b);var e=b-a+1}var f=new j(a,0,b,Number.MAX_VALUE),g=this.getFoldsInRange(f).map(function(a){return a=a.clone(),a.start.row+=e,a.end.row+=e,a}),h=0==c?this.doc.getLines(a,b):this.doc.removeFullLines(a,b);return this.doc.insertFullLines(a+e,h),g.length&&this.addFolds(g),e},this.moveLinesUp=function(a,b){return this.$moveLines(a,b,-1)},this.moveLinesDown=function(a,b){return this.$moveLines(a,b,1)},this.duplicateLines=function(a,b){return this.$moveLines(a,b,0)},this.$clipRowToDocument=function(a){return Math.max(0,Math.min(a,this.doc.getLength()-1))},this.$clipColumnToRow=function(a,b){return 0>b?0:Math.min(this.doc.getLine(a).length,b)},this.$clipPositionToDocument=function(a,b){if(b=Math.max(0,b),0>a)a=0,b=0;else{var c=this.doc.getLength();a>=c?(a=c-1,b=this.doc.getLine(c-1).length):b=Math.min(this.doc.getLine(a).length,b)}return{row:a,column:b}},this.$clipRangeToDocument=function(a){a.start.row<0?(a.start.row=0,a.start.column=0):a.start.column=this.$clipColumnToRow(a.start.row,a.start.column);var b=this.doc.getLength()-1;return a.end.row>b?(a.end.row=b,a.end.column=this.doc.getLine(b).length):a.end.column=this.$clipColumnToRow(a.end.row,a.end.column),a},this.$wrapLimit=80,this.$useWrapMode=!1,this.$wrapLimitRange={min:null,max:null},this.setUseWrapMode=function(a){if(a!=this.$useWrapMode){if(this.$useWrapMode=a,this.$modified=!0,this.$resetRowCache(0),a){var b=this.getLength();this.$wrapData=Array(b),this.$updateWrapData(0,b-1)}this._signal("changeWrapMode")}},this.getUseWrapMode=function(){return this.$useWrapMode},this.setWrapLimitRange=function(a,b){this.$wrapLimitRange.min===a&&this.$wrapLimitRange.max===b||(this.$wrapLimitRange={min:a,max:b},this.$modified=!0,this.$useWrapMode&&this._signal("changeWrapMode"))},this.adjustWrapLimit=function(a,b){var c=this.$wrapLimitRange;c.max<0&&(c={min:b,max:b});var d=this.$constrainWrapLimit(a,c.min,c.max);return d!=this.$wrapLimit&&d>1?(this.$wrapLimit=d,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0):!1},this.$constrainWrapLimit=function(a,b,c){return b&&(a=Math.max(b,a)),c&&(a=Math.min(c,a)),a},this.getWrapLimit=function(){return this.$wrapLimit},this.setWrapLimit=function(a){this.setWrapLimitRange(a,a)},this.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},this.$updateInternalDataOnChange=function(a){var b=this.$useWrapMode,c=a.action,d=a.start,e=a.end,f=d.row,g=e.row,h=g-f,i=null;if(this.$updating=!0,0!=h)if("remove"===c){this[b?"$wrapData":"$rowLengthCache"].splice(f,h);var j=this.$foldData;i=this.getFoldsInRange(a),this.removeFolds(i);var k=this.getFoldLine(e.row),l=0;if(k){k.addRemoveChars(e.row,e.column,d.column-e.column),k.shiftRow(-h);var m=this.getFoldLine(f);m&&m!==k&&(m.merge(k),k=m),l=j.indexOf(k)+1}for(l;l<j.length;l++){var k=j[l];k.start.row>=e.row&&k.shiftRow(-h)}g=f}else{var n=Array(h);n.unshift(f,0);var o=b?this.$wrapData:this.$rowLengthCache;o.splice.apply(o,n);var j=this.$foldData,k=this.getFoldLine(f),l=0;if(k){var p=k.range.compareInside(d.row,d.column);0==p?(k=k.split(d.row,d.column),k&&(k.shiftRow(h),k.addRemoveChars(g,0,e.column-d.column))):-1==p&&(k.addRemoveChars(f,0,e.column-d.column),k.shiftRow(h)),l=j.indexOf(k)+1}for(l;l<j.length;l++){var k=j[l];k.start.row>=f&&k.shiftRow(h)}}else{h=Math.abs(a.start.column-a.end.column),"remove"===c&&(i=this.getFoldsInRange(a),this.removeFolds(i),h=-h);var k=this.getFoldLine(f);k&&k.addRemoveChars(f,d.column,h)}return b&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,b?this.$updateWrapData(f,g):this.$updateRowLengthCache(f,g),i},this.$updateRowLengthCache=function(a,b,c){this.$rowLengthCache[a]=null,this.$rowLengthCache[b]=null},this.$updateWrapData=function(a,b){var c,d,e=this.doc.getAllLines(),f=this.getTabSize(),g=this.$wrapData,i=this.$wrapLimit,j=a;for(b=Math.min(b,e.length-1);b>=j;)d=this.getFoldLine(j,d),d?(c=[],d.walk(function(a,b,d,f){var g;if(null!=a){g=this.$getDisplayTokens(a,c.length),g[0]=h;for(var i=1;i<g.length;i++)g[i]=k}else g=this.$getDisplayTokens(e[b].substring(f,d),c.length);c=c.concat(g)}.bind(this),d.end.row,e[d.end.row].length+1),g[d.start.row]=this.$computeWrapSplits(c,i,f),j=d.end.row+1):(c=this.$getDisplayTokens(e[j]),g[j]=this.$computeWrapSplits(c,i,f),j++)};var b=1,c=2,h=3,k=4,n=9,o=10,p=11,q=12;this.$computeWrapSplits=function(a,b,d){function e(){var b=0;if(0===s)return b;if(r)for(var c=0;c<a.length;c++){var e=a[c];if(e==o)b+=1;else{if(e!=p){if(e==q)continue;break}b+=d}}return m&&r!==!1&&(b+=d),Math.min(b,s)}function f(b){var c=a.slice(j,b),d=c.length;c.join("").replace(/12/g,function(){d-=1}).replace(/2/g,function(){d-=1}),g.length||(t=e(),g.indent=t),l+=d,g.push(l),j=b}if(0==a.length)return[];for(var g=[],i=a.length,j=0,l=0,m=this.$wrapAsCode,r=this.$indentedSoftWrap,s=b<=Math.max(2*d,8)||r===!1?0:Math.floor(b/2),t=0;i-j>b-t;){var u=j+b-t;if(a[u-1]>=o&&a[u]>=o)f(u);else if(a[u]!=h&&a[u]!=k){for(var v=Math.max(u-(b-(b>>2)),j-1);u>v&&a[u]<h;)u--;if(m){for(;u>v&&a[u]<h;)u--;for(;u>v&&a[u]==n;)u--}else for(;u>v&&a[u]<o;)u--;u>v?f(++u):(u=j+b,a[u]==c&&u--,f(u-t))}else{for(u;u!=j-1&&a[u]!=h;u--);if(u>j){f(u);continue}for(u=j+b;u<a.length&&a[u]==k;u++);if(u==a.length)break;f(u)}}return g},this.$getDisplayTokens=function(d,e){var f,g=[];e=e||0;for(var h=0;h<d.length;h++){var i=d.charCodeAt(h);if(9==i){f=this.getScreenTabSize(g.length+e),g.push(p);for(var j=1;f>j;j++)g.push(q)}else 32==i?g.push(o):i>39&&48>i||i>57&&64>i?g.push(n):i>=4352&&a(i)?g.push(b,c):g.push(b)}return g},this.$getStringScreenWidth=function(b,c,d){if(0==c)return[0,0];null==c&&(c=1/0),d=d||0;var e,f;for(f=0;f<b.length&&(e=b.charCodeAt(f),d+=9==e?this.getScreenTabSize(d):e>=4352&&a(e)?2:1,!(d>c));f++);return[d,f]},this.lineWidgets=null,this.getRowLength=function(a){if(this.lineWidgets)var b=this.lineWidgets[a]&&this.lineWidgets[a].rowCount||0;else b=0;return this.$useWrapMode&&this.$wrapData[a]?this.$wrapData[a].length+1+b:1+b},this.getRowLineCount=function(a){return this.$useWrapMode&&this.$wrapData[a]?this.$wrapData[a].length+1:1},this.getRowWrapIndent=function(a){if(this.$useWrapMode){var b=this.screenToDocumentPosition(a,Number.MAX_VALUE),c=this.$wrapData[b.row];return c.length&&c[0]<b.column?c.indent:0}return 0},this.getScreenLastRowColumn=function(a){var b=this.screenToDocumentPosition(a,Number.MAX_VALUE);return this.documentToScreenColumn(b.row,b.column)},this.getDocumentLastRowColumn=function(a,b){var c=this.documentToScreenRow(a,b);return this.getScreenLastRowColumn(c)},this.getDocumentLastRowColumnPosition=function(a,b){var c=this.documentToScreenRow(a,b);return this.screenToDocumentPosition(c,Number.MAX_VALUE/10)},this.getRowSplitData=function(a){return this.$useWrapMode?this.$wrapData[a]:void 0},this.getScreenTabSize=function(a){return this.$tabSize-a%this.$tabSize},this.screenToDocumentRow=function(a,b){return this.screenToDocumentPosition(a,b).row},this.screenToDocumentColumn=function(a,b){return this.screenToDocumentPosition(a,b).column},this.screenToDocumentPosition=function(a,b){if(0>a)return{row:0,column:0};var c,d,e=0,f=0,g=0,h=0,i=this.$screenRowCache,j=this.$getRowCacheIndex(i,a),k=i.length;if(k&&j>=0)var g=i[j],e=this.$docRowCache[j],l=a>i[k-1];else var l=!k;for(var m=this.getLength()-1,n=this.getNextFoldLine(e),o=n?n.start.row:1/0;a>=g&&(h=this.getRowLength(e),!(g+h>a||e>=m));)g+=h,e++,e>o&&(e=n.end.row+1,n=this.getNextFoldLine(e,n),o=n?n.start.row:1/0),l&&(this.$docRowCache.push(e),this.$screenRowCache.push(g));if(n&&n.start.row<=e)c=this.getFoldDisplayLine(n),e=n.start.row;else{if(a>=g+h||e>m)return{row:m,column:this.getLine(m).length};c=this.getLine(e),n=null}var p=0;if(this.$useWrapMode){var q=this.$wrapData[e];if(q){var r=Math.floor(a-g);d=q[r],r>0&&q.length&&(p=q.indent,f=q[r-1]||q[q.length-1],c=c.substring(f))}}return f+=this.$getStringScreenWidth(c,b-p)[1],this.$useWrapMode&&f>=d&&(f=d-1),n?n.idxToPosition(f):{row:e,column:f}},this.documentToScreenPosition=function(a,b){if("undefined"==typeof b)var c=this.$clipPositionToDocument(a.row,a.column);else c=this.$clipPositionToDocument(a,b);a=c.row,b=c.column;var d=0,e=null,f=null;f=this.getFoldAt(a,b,1),f&&(a=f.start.row,b=f.start.column);var g,h=0,i=this.$docRowCache,j=this.$getRowCacheIndex(i,a),k=i.length;if(k&&j>=0)var h=i[j],d=this.$screenRowCache[j],l=a>i[k-1];else var l=!k;for(var m=this.getNextFoldLine(h),n=m?m.start.row:1/0;a>h;){if(h>=n){if(g=m.end.row+1,g>a)break;m=this.getNextFoldLine(g,m),n=m?m.start.row:1/0}else g=h+1;d+=this.getRowLength(h),h=g,l&&(this.$docRowCache.push(h),this.$screenRowCache.push(d))}var o="";m&&h>=n?(o=this.getFoldDisplayLine(m,a,b),e=m.start.row):(o=this.getLine(a).substring(0,b),e=a);var p=0;if(this.$useWrapMode){var q=this.$wrapData[e];if(q){for(var r=0;o.length>=q[r];)d++,r++;o=o.substring(q[r-1]||0,o.length),p=r>0?q.indent:0}}return{row:d,column:p+this.$getStringScreenWidth(o)[0]}},this.documentToScreenColumn=function(a,b){return this.documentToScreenPosition(a,b).column},this.documentToScreenRow=function(a,b){return this.documentToScreenPosition(a,b).row},this.getScreenLength=function(){var a=0,b=null;if(this.$useWrapMode)for(var c=this.$wrapData.length,d=0,e=0,b=this.$foldData[e++],f=b?b.start.row:1/0;c>d;){var g=this.$wrapData[d];a+=g?g.length+1:1,d++,d>f&&(d=b.end.row+1,b=this.$foldData[e++],f=b?b.start.row:1/0)}else{a=this.getLength();for(var h=this.$foldData,e=0;e<h.length;e++)b=h[e],a-=b.end.row-b.start.row}return this.lineWidgets&&(a+=this.$getWidgetScreenLength()),a},this.$setFontMetrics=function(a){this.$enableVarChar&&(this.$getStringScreenWidth=function(b,c,d){if(0===c)return[0,0];c||(c=1/0),d=d||0;var e,f;for(f=0;f<b.length&&(e=b.charAt(f),d+="	"===e?this.getScreenTabSize(d):a.getCharacterWidth(e),!(d>c));f++);return[d,f]})},this.destroy=function(){this.bgTokenizer&&(this.bgTokenizer.setDocument(null),this.bgTokenizer=null),this.$stopWorker()}}).call(n.prototype),a("./edit_session/folding").Folding.call(n.prototype),a("./edit_session/bracket_match").BracketMatch.call(n.prototype),f.defineOptions(n.prototype,"session",{wrap:{set:function(a){if(a&&"off"!=a?"free"==a?a=!0:"printMargin"==a?a=-1:"string"==typeof a&&(a=parseInt(a,10)||!1):a=!1,this.$wrap!=a)if(this.$wrap=a,a){var b="number"==typeof a?a:null;this.setWrapLimitRange(b,b),this.setUseWrapMode(!0)}else this.setUseWrapMode(!1)},get:function(){return this.getUseWrapMode()?-1==this.$wrap?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(a){a="auto"==a?"text"!=this.$mode.type:"text"!=a,a!=this.$wrapAsCode&&(this.$wrapAsCode=a,this.$useWrapMode&&(this.$modified=!0,this.$resetRowCache(0),this.$updateWrapData(0,this.getLength()-1)))},initialValue:"auto"},indentedSoftWrap:{initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(a){this.$useWorker=a,this.$stopWorker(),a&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(a){isNaN(a)||this.$tabSize===a||(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=a,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},overwrite:{set:function(a){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(a){this.doc.setNewLineMode(a)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(a){this.setMode(a)},get:function(){return this.$modeId}}}),b.EditSession=n}),ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(a,b,c){"use strict";var d=a("./lib/lang"),e=a("./lib/oop"),f=a("./range").Range,g=function(){this.$options={}};(function(){this.set=function(a){return e.mixin(this.$options,a),this},this.getOptions=function(){return d.copyObject(this.$options)},this.setOptions=function(a){this.$options=a},this.find=function(a){var b=this.$options,c=this.$matchIterator(a,b);if(!c)return!1;var d=null;return c.forEach(function(a,c,e){if(a.start)d=a;else{var g=a.offset+(e||0);if(d=new f(c,g,c,g+a.length),!a.length&&b.start&&b.start.start&&0!=b.skipCurrent&&d.isEqual(b.start))return d=null,!1}return!0}),d},this.findAll=function(a){var b=this.$options;if(!b.needle)return[];this.$assembleRegExp(b);var c=b.range,e=c?a.getLines(c.start.row,c.end.row):a.doc.getAllLines(),g=[],h=b.re;if(b.$isMultiLine){var i,j=h.length,k=e.length-j;a:for(var l=h.offset||0;k>=l;l++){for(var m=0;j>m;m++)if(-1==e[l+m].search(h[m]))continue a;var n=e[l],o=e[l+j-1],p=n.length-n.match(h[0])[0].length,q=o.match(h[j-1])[0].length;i&&i.end.row===l&&i.end.column>p||(g.push(i=new f(l,p,l+j-1,q)),j>2&&(l=l+j-2))}}else for(var r=0;r<e.length;r++)for(var s=d.getMatchOffsets(e[r],h),m=0;m<s.length;m++){var t=s[m];g.push(new f(r,t.offset,r,t.offset+t.length))}if(c){for(var u=c.start.column,v=c.start.column,r=0,m=g.length-1;m>r&&g[r].start.column<u&&g[r].start.row==c.start.row;)r++;for(;m>r&&g[m].end.column>v&&g[m].end.row==c.end.row;)m--;for(g=g.slice(r,m+1),r=0,m=g.length;m>r;r++)g[r].start.row+=c.start.row,g[r].end.row+=c.start.row}return g},this.replace=function(a,b){var c=this.$options,d=this.$assembleRegExp(c);if(c.$isMultiLine)return b;if(d){var e=d.exec(a);if(!e||e[0].length!=a.length)return null;if(b=a.replace(d,b),c.preserveCase){b=b.split("");for(var f=Math.min(a.length,a.length);f--;){var g=a[f];g&&g.toLowerCase()!=g?b[f]=b[f].toUpperCase():b[f]=b[f].toLowerCase()}b=b.join("")}return b}},this.$matchIterator=function(a,b){var c=this.$assembleRegExp(b);if(!c)return!1;var e;if(b.$isMultiLine)var g=c.length,h=function(b,d,h){var i=b.search(c[0]);if(-1!=i){for(var j=1;g>j;j++)if(b=a.getLine(d+j),-1==b.search(c[j]))return;var k=b.match(c[g-1])[0].length,l=new f(d,i,d+g-1,k);return 1==c.offset?(l.start.row--,l.start.column=Number.MAX_VALUE):h&&(l.start.column+=h),e(l)?!0:void 0}};else if(b.backwards)var h=function(a,b,f){for(var g=d.getMatchOffsets(a,c),h=g.length-1;h>=0;h--)if(e(g[h],b,f))return!0};else var h=function(a,b,f){for(var g=d.getMatchOffsets(a,c),h=0;h<g.length;h++)if(e(g[h],b,f))return!0};var i=this.$lineIterator(a,b);return{forEach:function(a){e=a,i.forEach(h)}}},this.$assembleRegExp=function(a,b){if(a.needle instanceof RegExp)return a.re=a.needle;var c=a.needle;if(!a.needle)return a.re=!1;a.regExp||(c=d.escapeRegExp(c)),a.wholeWord&&(c="\\b"+c+"\\b");var e=a.caseSensitive?"gm":"gmi";if(a.$isMultiLine=!b&&/[\n\r]/.test(c),a.$isMultiLine)return a.re=this.$assembleMultilineRegExp(c,e);try{var f=new RegExp(c,e)}catch(g){f=!1}return a.re=f},this.$assembleMultilineRegExp=function(a,b){for(var c=a.replace(/\r\n|\r|\n/g,"$\n^").split("\n"),d=[],e=0;e<c.length;e++)try{d.push(new RegExp(c[e],b))}catch(f){return!1}return""==c[0]?(d.shift(),d.offset=1):d.offset=0,d},this.$lineIterator=function(a,b){var c=1==b.backwards,d=0!=b.skipCurrent,e=b.range,f=b.start;f||(f=e?e[c?"end":"start"]:a.selection.getRange()),f.start&&(f=f[d!=c?"end":"start"]);var g=e?e.start.row:0,h=e?e.end.row:a.getLength()-1,i=c?function(c){var d=f.row,e=a.getLine(d).substring(0,f.column);if(!c(e,d)){for(d--;d>=g;d--)if(c(a.getLine(d),d))return;if(0!=b.wrap)for(d=h,g=f.row;d>=g;d--)if(c(a.getLine(d),d))return}}:function(c){var d=f.row,e=a.getLine(d).substr(f.column);if(!c(e,d,f.column)){for(d+=1;h>=d;d++)if(c(a.getLine(d),d))return;if(0!=b.wrap)for(d=g,h=f.row;h>=d;d++)if(c(a.getLine(d),d))return}};return{forEach:i}}}).call(g.prototype),b.Search=g}),ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(a,b,c){"use strict";function d(a,b){this.platform=b||(g.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(a),this.$singleCommand=!0}function e(a,b){d.call(this,a,b),this.$singleCommand=!1}var f=a("../lib/keys"),g=a("../lib/useragent"),h=f.KEY_MODS;e.prototype=d.prototype,function(){function a(a){return"object"==typeof a&&a.bindKey&&a.bindKey.position||0}this.addCommand=function(a){this.commands[a.name]&&this.removeCommand(a),this.commands[a.name]=a,a.bindKey&&this._buildKeyHash(a)},this.removeCommand=function(a,b){var c=a&&("string"==typeof a?a:a.name);a=this.commands[c],b||delete this.commands[c];var d=this.commandKeyBinding;for(var e in d){var f=d[e];if(f==a)delete d[e];else if(Array.isArray(f)){var g=f.indexOf(a);-1!=g&&(f.splice(g,1),1==f.length&&(d[e]=f[0]))}}},this.bindKey=function(a,b,c){return"object"==typeof a&&a&&(void 0==c&&(c=a.position),a=a[this.platform]),a?"function"==typeof b?this.addCommand({exec:b,bindKey:a,name:b.name||a}):void a.split("|").forEach(function(a){var d="";if(-1!=a.indexOf(" ")){var e=a.split(/\s+/);a=e.pop(),e.forEach(function(a){var b=this.parseKeys(a),c=h[b.hashId]+b.key;d+=(d?" ":"")+c,this._addCommandToBinding(d,"chainKeys")},this),d+=" "}var f=this.parseKeys(a),g=h[f.hashId]+f.key;this._addCommandToBinding(d+g,b,c)},this):void 0},this._addCommandToBinding=function(b,c,d){var e,f=this.commandKeyBinding;if(c)if(!f[b]||this.$singleCommand)f[b]=c;else{Array.isArray(f[b])?-1!=(e=f[b].indexOf(c))&&f[b].splice(e,1):f[b]=[f[b]],"number"!=typeof d&&(d=d||c.isDefault?-100:a(c));var g=f[b];for(e=0;e<g.length;e++){var h=g[e],i=a(h);if(i>d)break}g.splice(e,0,c)}else delete f[b]},this.addCommands=function(a){a&&Object.keys(a).forEach(function(b){var c=a[b];if(c){if("string"==typeof c)return this.bindKey(c,b);"function"==typeof c&&(c={exec:c}),"object"==typeof c&&(c.name||(c.name=b),this.addCommand(c))}},this)},this.removeCommands=function(a){Object.keys(a).forEach(function(b){this.removeCommand(a[b])},this)},this.bindKeys=function(a){Object.keys(a).forEach(function(b){this.bindKey(b,a[b])},this)},this._buildKeyHash=function(a){this.bindKey(a.bindKey,a)},this.parseKeys=function(a){var b=a.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(a){return a}),c=b.pop(),d=f[c];if(f.FUNCTION_KEYS[d])c=f.FUNCTION_KEYS[d].toLowerCase();else{if(!b.length)return{key:c,hashId:-1};if(1==b.length&&"shift"==b[0])return{key:c.toUpperCase(),hashId:-1}}for(var e=0,g=b.length;g--;){var h=f.KEY_MODS[b[g]];if(null==h)return"undefined"!=typeof console&&console.error("invalid modifier "+b[g]+" in "+a),!1;e|=h}return{key:c,hashId:e}},this.findKeyCommand=function(a,b){var c=h[a]+b;return this.commandKeyBinding[c]},this.handleKeyboard=function(a,b,c,d){if(!(0>d)){var e=h[b]+c,f=this.commandKeyBinding[e];return a.$keyChain&&(a.$keyChain+=" "+e,f=this.commandKeyBinding[a.$keyChain]||f),!f||"chainKeys"!=f&&"chainKeys"!=f[f.length-1]?(a.$keyChain&&(b&&4!=b||1!=c.length?(-1==b||d>0)&&(a.$keyChain=""):a.$keyChain=a.$keyChain.slice(0,-e.length-1)),{command:f}):(a.$keyChain=a.$keyChain||e,{command:"null"})}},this.getStatusText=function(a,b){return b.$keyChain||""}}.call(d.prototype),b.HashHandler=d,b.MultiHashHandler=e}),ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(a,b,c){"use strict";var d=a("../lib/oop"),e=a("../keyboard/hash_handler").MultiHashHandler,f=a("../lib/event_emitter").EventEmitter,g=function(a,b){e.call(this,b,a),this.byName=this.commands,this.setDefaultHandler("exec",function(a){return a.command.exec(a.editor,a.args||{})})};d.inherits(g,e),function(){d.implement(this,f),this.exec=function(a,b,c){if(Array.isArray(a)){for(var d=a.length;d--;)if(this.exec(a[d],b,c))return!0;return!1}if("string"==typeof a&&(a=this.commands[a]),!a)return!1;if(b&&b.$readOnly&&!a.readOnly)return!1;var e={editor:b,command:a,args:c};return e.returnValue=this._emit("exec",e),this._signal("afterExec",e),e.returnValue!==!1},this.toggleRecording=function(a){
return this.$inReplay?void 0:(a&&a._emit("changeStatus"),this.recording?(this.macro.pop(),this.removeEventListener("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(a){this.macro.push([a.command,a.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0))},this.replay=function(a){if(!this.$inReplay&&this.macro){if(this.recording)return this.toggleRecording(a);try{this.$inReplay=!0,this.macro.forEach(function(b){"string"==typeof b?this.exec(b,a):this.exec(b[0],a,b[1])},this)}finally{this.$inReplay=!1}}},this.trimMacro=function(a){return a.map(function(a){return"string"!=typeof a[0]&&(a[0]=a[0].name),a[1]||(a=a[0]),a})}}.call(g.prototype),b.CommandManager=g}),ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],function(a,b,c){"use strict";function d(a,b){return{win:a,mac:b}}var e=a("../lib/lang"),f=a("../config"),g=a("../range").Range;b.commands=[{name:"showSettingsMenu",bindKey:d("Ctrl-,","Command-,"),exec:function(a){f.loadModule("ace/ext/settings_menu",function(b){b.init(a),a.showSettingsMenu()})},readOnly:!0},{name:"goToNextError",bindKey:d("Alt-E","Ctrl-E"),exec:function(a){f.loadModule("ace/ext/error_marker",function(b){b.showErrorMarker(a,1)})},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",bindKey:d("Alt-Shift-E","Ctrl-Shift-E"),exec:function(a){f.loadModule("ace/ext/error_marker",function(b){b.showErrorMarker(a,-1)})},scrollIntoView:"animate",readOnly:!0},{name:"selectall",bindKey:d("Ctrl-A","Command-A"),exec:function(a){a.selectAll()},readOnly:!0},{name:"centerselection",bindKey:d(null,"Ctrl-L"),exec:function(a){a.centerSelection()},readOnly:!0},{name:"gotoline",bindKey:d("Ctrl-L","Command-L"),exec:function(a){var b=parseInt(prompt("Enter line number:"),10);isNaN(b)||a.gotoLine(b)},readOnly:!0},{name:"fold",bindKey:d("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(a){a.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:d("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(a){a.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",bindKey:d("F2","F2"),exec:function(a){a.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",bindKey:d("Alt-F2","Alt-F2"),exec:function(a){a.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",bindKey:d(null,"Ctrl-Command-Option-0"),exec:function(a){a.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",bindKey:d("Alt-0","Command-Option-0"),exec:function(a){a.session.foldAll(),a.session.unfold(a.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",bindKey:d("Alt-Shift-0","Command-Option-Shift-0"),exec:function(a){a.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",bindKey:d("Ctrl-K","Command-G"),exec:function(a){a.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",bindKey:d("Ctrl-Shift-K","Command-Shift-G"),exec:function(a){a.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",bindKey:d("Alt-K","Ctrl-G"),exec:function(a){a.selection.isEmpty()?a.selection.selectWord():a.findNext()},readOnly:!0},{name:"selectOrFindPrevious",bindKey:d("Alt-Shift-K","Ctrl-Shift-G"),exec:function(a){a.selection.isEmpty()?a.selection.selectWord():a.findPrevious()},readOnly:!0},{name:"find",bindKey:d("Ctrl-F","Command-F"),exec:function(a){f.loadModule("ace/ext/searchbox",function(b){b.Search(a)})},readOnly:!0},{name:"overwrite",bindKey:"Insert",exec:function(a){a.toggleOverwrite()},readOnly:!0},{name:"selecttostart",bindKey:d("Ctrl-Shift-Home","Command-Shift-Up"),exec:function(a){a.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",bindKey:d("Ctrl-Home","Command-Home|Command-Up"),exec:function(a){a.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",bindKey:d("Shift-Up","Shift-Up"),exec:function(a){a.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",bindKey:d("Up","Up|Ctrl-P"),exec:function(a,b){a.navigateUp(b.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",bindKey:d("Ctrl-Shift-End","Command-Shift-Down"),exec:function(a){a.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",bindKey:d("Ctrl-End","Command-End|Command-Down"),exec:function(a){a.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",bindKey:d("Shift-Down","Shift-Down"),exec:function(a){a.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",bindKey:d("Down","Down|Ctrl-N"),exec:function(a,b){a.navigateDown(b.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",bindKey:d("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(a){a.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",bindKey:d("Ctrl-Left","Option-Left"),exec:function(a){a.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",bindKey:d("Alt-Shift-Left","Command-Shift-Left"),exec:function(a){a.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",bindKey:d("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(a){a.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",bindKey:d("Shift-Left","Shift-Left"),exec:function(a){a.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",bindKey:d("Left","Left|Ctrl-B"),exec:function(a,b){a.navigateLeft(b.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",bindKey:d("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(a){a.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",bindKey:d("Ctrl-Right","Option-Right"),exec:function(a){a.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",bindKey:d("Alt-Shift-Right","Command-Shift-Right"),exec:function(a){a.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",bindKey:d("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(a){a.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",bindKey:d("Shift-Right","Shift-Right"),exec:function(a){a.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",bindKey:d("Right","Right|Ctrl-F"),exec:function(a,b){a.navigateRight(b.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",bindKey:"Shift-PageDown",exec:function(a){a.selectPageDown()},readOnly:!0},{name:"pagedown",bindKey:d(null,"Option-PageDown"),exec:function(a){a.scrollPageDown()},readOnly:!0},{name:"gotopagedown",bindKey:d("PageDown","PageDown|Ctrl-V"),exec:function(a){a.gotoPageDown()},readOnly:!0},{name:"selectpageup",bindKey:"Shift-PageUp",exec:function(a){a.selectPageUp()},readOnly:!0},{name:"pageup",bindKey:d(null,"Option-PageUp"),exec:function(a){a.scrollPageUp()},readOnly:!0},{name:"gotopageup",bindKey:"PageUp",exec:function(a){a.gotoPageUp()},readOnly:!0},{name:"scrollup",bindKey:d("Ctrl-Up",null),exec:function(a){a.renderer.scrollBy(0,-2*a.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",bindKey:d("Ctrl-Down",null),exec:function(a){a.renderer.scrollBy(0,2*a.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",bindKey:"Shift-Home",exec:function(a){a.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",bindKey:"Shift-End",exec:function(a){a.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",bindKey:d("Ctrl-Alt-E","Command-Option-E"),exec:function(a){a.commands.toggleRecording(a)},readOnly:!0},{name:"replaymacro",bindKey:d("Ctrl-Shift-E","Command-Shift-E"),exec:function(a){a.commands.replay(a)},readOnly:!0},{name:"jumptomatching",bindKey:d("Ctrl-P","Ctrl-P"),exec:function(a){a.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",bindKey:d("Ctrl-Shift-P","Ctrl-Shift-P"),exec:function(a){a.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",bindKey:d("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(a){a.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",bindKey:d(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",exec:function(a){},readOnly:!0},{name:"cut",exec:function(a){var b=a.getSelectionRange();a._emit("cut",b),a.selection.isEmpty()||(a.session.remove(b),a.clearSelection())},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",exec:function(a,b){a.$handlePaste(b)},scrollIntoView:"cursor"},{name:"removeline",bindKey:d("Ctrl-D","Command-D"),exec:function(a){a.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",bindKey:d("Ctrl-Shift-D","Command-Shift-D"),exec:function(a){a.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",bindKey:d("Ctrl-Alt-S","Command-Alt-S"),exec:function(a){a.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",bindKey:d("Ctrl-/","Command-/"),exec:function(a){a.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",bindKey:d("Ctrl-Shift-/","Command-Shift-/"),exec:function(a){a.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",bindKey:d("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(a){a.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",bindKey:d("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(a){a.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",bindKey:d("Ctrl-H","Command-Option-F"),exec:function(a){f.loadModule("ace/ext/searchbox",function(b){b.Search(a,!0)})}},{name:"undo",bindKey:d("Ctrl-Z","Command-Z"),exec:function(a){a.undo()}},{name:"redo",bindKey:d("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(a){a.redo()}},{name:"copylinesup",bindKey:d("Alt-Shift-Up","Command-Option-Up"),exec:function(a){a.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",bindKey:d("Alt-Up","Option-Up"),exec:function(a){a.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",bindKey:d("Alt-Shift-Down","Command-Option-Down"),exec:function(a){a.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",bindKey:d("Alt-Down","Option-Down"),exec:function(a){a.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",bindKey:d("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(a){a.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",bindKey:d("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(a){a.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",bindKey:d("Shift-Delete",null),exec:function(a){return a.selection.isEmpty()?void a.remove("left"):!1},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",bindKey:d("Alt-Backspace","Command-Backspace"),exec:function(a){a.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",bindKey:d("Alt-Delete","Ctrl-K"),exec:function(a){a.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",bindKey:d("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(a){a.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",bindKey:d("Ctrl-Delete","Alt-Delete"),exec:function(a){a.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",bindKey:d("Shift-Tab","Shift-Tab"),exec:function(a){a.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",bindKey:d("Tab","Tab"),exec:function(a){a.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",bindKey:d("Ctrl-[","Ctrl-["),exec:function(a){a.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",bindKey:d("Ctrl-]","Ctrl-]"),exec:function(a){a.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",exec:function(a,b){a.insert(b)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",exec:function(a,b){a.insert(e.stringRepeat(b.text||"",b.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",bindKey:d(null,"Ctrl-O"),exec:function(a){a.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",bindKey:d("Ctrl-T","Ctrl-T"),exec:function(a){a.transposeLetters()},multiSelectAction:function(a){a.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",bindKey:d("Ctrl-U","Ctrl-U"),exec:function(a){a.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",bindKey:d("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(a){a.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"expandtoline",bindKey:d("Ctrl-Shift-L","Command-Shift-L"),exec:function(a){var b=a.selection.getRange();b.start.column=b.end.column=0,b.end.row++,a.selection.setRange(b,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"joinlines",bindKey:d(null,null),exec:function(a){for(var b=a.selection.isBackwards(),c=b?a.selection.getSelectionLead():a.selection.getSelectionAnchor(),d=b?a.selection.getSelectionAnchor():a.selection.getSelectionLead(),f=a.session.doc.getLine(c.row).length,h=a.session.doc.getTextRange(a.selection.getRange()),i=h.replace(/\n\s*/," ").length,j=a.session.doc.getLine(c.row),k=c.row+1;k<=d.row+1;k++){var l=e.stringTrimLeft(e.stringTrimRight(a.session.doc.getLine(k)));0!==l.length&&(l=" "+l),j+=l}d.row+1<a.session.doc.getLength()-1&&(j+=a.session.doc.getNewLineCharacter()),a.clearSelection(),a.session.doc.replace(new g(c.row,0,d.row+2,0),j),i>0?(a.selection.moveCursorTo(c.row,c.column),a.selection.selectTo(c.row,c.column+i)):(f=a.session.doc.getLine(c.row).length>f?f+1:f,a.selection.moveCursorTo(c.row,f))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",bindKey:d(null,null),exec:function(a){var b=a.session.doc.getLength()-1,c=a.session.doc.getLine(b).length,d=a.selection.rangeList.ranges,e=[];d.length<1&&(d=[a.selection.getRange()]);for(var f=0;f<d.length;f++)f==d.length-1&&(d[f].end.row!==b||d[f].end.column!==c)&&e.push(new g(d[f].end.row,d[f].end.column,b,c)),0===f?(0!==d[f].start.row||0!==d[f].start.column)&&e.push(new g(0,0,d[f].start.row,d[f].start.column)):e.push(new g(d[f-1].end.row,d[f-1].end.column,d[f].start.row,d[f].start.column));a.exitMultiSelectMode(),a.clearSelection();for(var f=0;f<e.length;f++)a.selection.addRange(e[f],!1)},readOnly:!0,scrollIntoView:"none"}]}),ace.define("ace/editor",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator"],function(a,b,c){"use strict";a("./lib/fixoldbrowsers");var d=a("./lib/oop"),e=a("./lib/dom"),f=a("./lib/lang"),g=a("./lib/useragent"),h=a("./keyboard/textinput").TextInput,i=a("./mouse/mouse_handler").MouseHandler,j=a("./mouse/fold_handler").FoldHandler,k=a("./keyboard/keybinding").KeyBinding,l=a("./edit_session").EditSession,m=a("./search").Search,n=a("./range").Range,o=a("./lib/event_emitter").EventEmitter,p=a("./commands/command_manager").CommandManager,q=a("./commands/default_commands").commands,r=a("./config"),s=a("./token_iterator").TokenIterator,t=function(a,b){var c=a.getContainerElement();this.container=c,this.renderer=a,this.commands=new p(g.isMac?"mac":"win",q),this.textInput=new h(a.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.keyBinding=new k(this),this.$mouseHandler=new i(this),new j(this),this.$blockScrolling=0,this.$search=(new m).set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=f.delayedCall(function(){this._signal("input",{}),this.session&&this.session.bgTokenizer&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on("change",function(a,b){b._$emitInputEvent.schedule(31)}),this.setSession(b||new l("")),r.resetOptions(this),r._signal("editor",this)};(function(){d.implement(this,o),this.$initOperationListeners=function(){this.selections=[],this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=f.delayedCall(this.endOperation.bind(this)),this.on("change",function(){this.curOp||this.startOperation(),this.curOp.docChanged=!0}.bind(this),!0),this.on("changeSelection",function(){this.curOp||this.startOperation(),this.curOp.selectionChanged=!0}.bind(this),!0)},this.curOp=null,this.prevOp={},this.startOperation=function(a){if(this.curOp){if(!a||this.curOp.command)return;this.prevOp=this.curOp}a||(this.previousCommand=null,a={}),this.$opResetTimer.schedule(),this.curOp={command:a.command||{},args:a.args,scrollTop:this.renderer.scrollTop},this.curOp.command.name&&void 0!==this.curOp.command.scrollIntoView&&this.$blockScrolling++},this.endOperation=function(a){if(this.curOp){if(a&&a.returnValue===!1)return this.curOp=null;this._signal("beforeEndOperation");var b=this.curOp.command;b.name&&this.$blockScrolling>0&&this.$blockScrolling--;var c=b&&b.scrollIntoView;if(c){switch(c){case"center-animate":c="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var d=this.selection.getRange(),e=this.renderer.layerConfig;(d.start.row>=e.lastRow||d.end.row<=e.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead)}"animate"==c&&this.renderer.animateScrolling(this.curOp.scrollTop)}this.prevOp=this.curOp,this.curOp=null}},this.$mergeableCommands=["backspace","del","insertstring"],this.$historyTracker=function(a){if(this.$mergeUndoDeltas){var b=this.prevOp,c=this.$mergeableCommands,d=b.command&&a.command.name==b.command.name;if("insertstring"==a.command.name){var e=a.args;void 0===this.mergeNextCommand&&(this.mergeNextCommand=!0),d=d&&this.mergeNextCommand&&(!/\s/.test(e)||/\s/.test(b.args)),this.mergeNextCommand=!0}else d=d&&-1!==c.indexOf(a.command.name);"always"!=this.$mergeUndoDeltas&&Date.now()-this.sequenceStartTime>2e3&&(d=!1),d?this.session.mergeUndoDeltas=!0:-1!==c.indexOf(a.command.name)&&(this.sequenceStartTime=Date.now())}},this.setKeyboardHandler=function(a,b){if(a&&"string"==typeof a){this.$keybindingId=a;var c=this;r.loadModule(["keybinding",a],function(d){c.$keybindingId==a&&c.keyBinding.setKeyboardHandler(d&&d.handler),b&&b()})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(a),b&&b()},this.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},this.setSession=function(a){if(this.session!=a){this.curOp&&this.endOperation(),this.curOp={};var b=this.session;if(b){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange);var c=this.session.getSelection();c.off("changeCursor",this.$onCursorChange),c.off("changeSelection",this.$onSelectionChange)}this.session=a,a?(this.$onDocumentChange=this.onDocumentChange.bind(this),a.on("change",this.$onDocumentChange),this.renderer.setSession(a),this.$onChangeMode=this.onChangeMode.bind(this),a.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),a.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),a.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),a.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),a.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),a.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=a.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.$blockScrolling+=1,this.onCursorChange(),this.$blockScrolling-=1,this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(a)),this._signal("changeSession",{session:a,oldSession:b}),this.curOp=null,b&&b._signal("changeEditor",{oldEditor:this}),a&&a._signal("changeEditor",{editor:this})}},this.getSession=function(){return this.session},this.setValue=function(a,b){return this.session.doc.setValue(a),b?1==b?this.navigateFileEnd():-1==b&&this.navigateFileStart():this.selectAll(),a},this.getValue=function(){return this.session.getValue()},this.getSelection=function(){return this.selection},this.resize=function(a){this.renderer.onResize(a)},this.setTheme=function(a,b){this.renderer.setTheme(a,b)},this.getTheme=function(){return this.renderer.getTheme()},this.setStyle=function(a){this.renderer.setStyle(a)},this.unsetStyle=function(a){this.renderer.unsetStyle(a)},this.getFontSize=function(){return this.getOption("fontSize")||e.computedStyle(this.container,"fontSize")},this.setFontSize=function(a){this.setOption("fontSize",a)},this.$highlightBrackets=function(){if(this.session.$bracketHighlight&&(this.session.removeMarker(this.session.$bracketHighlight),this.session.$bracketHighlight=null),!this.$highlightPending){var a=this;this.$highlightPending=!0,setTimeout(function(){a.$highlightPending=!1;var b=a.session;if(b&&b.bgTokenizer){var c=b.findMatchingBracket(a.getCursorPosition());if(c)var d=new n(c.row,c.column,c.row,c.column+1);else if(b.$mode.getMatching)var d=b.$mode.getMatching(a.session);d&&(b.$bracketHighlight=b.addMarker(d,"ace_bracket","text"))}},50)}},this.$highlightTags=function(){if(!this.$highlightTagPending){var a=this;this.$highlightTagPending=!0,setTimeout(function(){a.$highlightTagPending=!1;var b=a.session;if(b&&b.bgTokenizer){var c=a.getCursorPosition(),d=new s(a.session,c.row,c.column),e=d.getCurrentToken();if(!e||!/\b(?:tag-open|tag-name)/.test(e.type))return b.removeMarker(b.$tagHighlight),void(b.$tagHighlight=null);if(-1==e.type.indexOf("tag-open")||(e=d.stepForward())){var f=e.value,g=0,h=d.stepBackward();if("<"==h.value){do h=e,e=d.stepForward(),e&&e.value===f&&-1!==e.type.indexOf("tag-name")&&("<"===h.value?g++:"</"===h.value&&g--);while(e&&g>=0)}else{do e=h,h=d.stepBackward(),e&&e.value===f&&-1!==e.type.indexOf("tag-name")&&("<"===h.value?g++:"</"===h.value&&g--);while(h&&0>=g);d.stepForward()}if(!e)return b.removeMarker(b.$tagHighlight),void(b.$tagHighlight=null);var i=d.getCurrentTokenRow(),j=d.getCurrentTokenColumn(),k=new n(i,j,i,j+e.value.length);b.$tagHighlight&&0!==k.compareRange(b.$backMarkers[b.$tagHighlight].range)&&(b.removeMarker(b.$tagHighlight),b.$tagHighlight=null),k&&!b.$tagHighlight&&(b.$tagHighlight=b.addMarker(k,"ace_bracket","text"))}}},50)}},this.focus=function(){var a=this;setTimeout(function(){a.textInput.focus()}),this.textInput.focus()},this.isFocused=function(){return this.textInput.isFocused()},this.blur=function(){this.textInput.blur()},this.onFocus=function(a){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",a))},this.onBlur=function(a){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",a))},this.$cursorChange=function(){this.renderer.updateCursor()},this.onDocumentChange=function(a){var b=this.session.$useWrapMode,c=a.start.row==a.end.row?a.end.row:1/0;this.renderer.updateLines(a.start.row,c,b),this._signal("change",a),this.$cursorChange(),this.$updateHighlightActiveLine()},this.onTokenizerUpdate=function(a){var b=a.data;this.renderer.updateLines(b.first,b.last)},this.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},this.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},this.onCursorChange=function(){this.$cursorChange(),this.$blockScrolling||(r.warn("Automatically scrolling cursor into view after selection change","this will be disabled in the next version","set editor.$blockScrolling = Infinity to disable this message"),this.renderer.scrollCursorIntoView()),this.$highlightBrackets(),this.$highlightTags(),this.$updateHighlightActiveLine(),this._signal("changeSelection")},this.$updateHighlightActiveLine=function(){var a,b=this.getSession();if(this.$highlightActiveLine&&("line"==this.$selectionStyle&&this.selection.isMultiLine()||(a=this.getCursorPosition()),this.renderer.$maxLines&&1===this.session.getLength()&&!(this.renderer.$minLines>1)&&(a=!1)),b.$highlightLineMarker&&!a)b.removeMarker(b.$highlightLineMarker.id),b.$highlightLineMarker=null;else if(!b.$highlightLineMarker&&a){var c=new n(a.row,a.column,a.row,1/0);c.id=b.addMarker(c,"ace_active-line","screenLine"),b.$highlightLineMarker=c}else a&&(b.$highlightLineMarker.start.row=a.row,b.$highlightLineMarker.end.row=a.row,b.$highlightLineMarker.start.column=a.column,b._signal("changeBackMarker"))},this.onSelectionChange=function(a){var b=this.session;if(b.$selectionMarker&&b.removeMarker(b.$selectionMarker),b.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var c=this.selection.getRange(),d=this.getSelectionStyle();b.$selectionMarker=b.addMarker(c,"ace_selection",d)}var e=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(e),this._signal("changeSelection")},this.$getSelectionHighLightRegexp=function(){var a=this.session,b=this.getSelectionRange();if(!b.isEmpty()&&!b.isMultiLine()){var c=b.start.column-1,d=b.end.column+1,e=a.getLine(b.start.row),f=e.length,g=e.substring(Math.max(c,0),Math.min(d,f));if(!(c>=0&&/^[\w\d]/.test(g)||f>=d&&/[\w\d]$/.test(g))&&(g=e.substring(b.start.column,b.end.column),/^[\w\d]+$/.test(g))){var h=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:g});return h}}},this.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},this.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},this.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},this.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},this.onChangeMode=function(a){this.renderer.updateText(),this._emit("changeMode",a)},this.onChangeWrapLimit=function(){this.renderer.updateFull()},this.onChangeWrapMode=function(){this.renderer.onResize(!0)},this.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},this.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},this.getCopyText=function(){var a=this.getSelectedText();return this._signal("copy",a),a},this.onCopy=function(){this.commands.exec("copy",this)},this.onCut=function(){this.commands.exec("cut",this)},this.onPaste=function(a,b){var c={text:a,event:b};this.commands.exec("paste",this,c)},this.$handlePaste=function(a){"string"==typeof a&&(a={text:a}),this._signal("paste",a);var b=a.text;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)this.insert(b);else{var c=b.split(/\r\n|\r|\n/),d=this.selection.rangeList.ranges;if(c.length>d.length||c.length<2||!c[1])return this.commands.exec("insertstring",this,b);for(var e=d.length;e--;){var f=d[e];f.isEmpty()||this.session.remove(f),this.session.insert(f.start,c[e])}}},this.execCommand=function(a,b){return this.commands.exec(a,this,b)},this.insert=function(a,b){var c=this.session,d=c.getMode(),e=this.getCursorPosition();if(this.getBehavioursEnabled()&&!b){var f=d.transformAction(c.getState(e.row),"insertion",this,c,a);f&&(a!==f.text&&(this.session.mergeUndoDeltas=!1,this.$mergeNextCommand=!1),a=f.text)}if("	"==a&&(a=this.session.getTabString()),this.selection.isEmpty()){if(this.session.getOverwrite()){var g=new n.fromPoints(e,e);g.end.column+=a.length,this.session.remove(g)}}else{var g=this.getSelectionRange();e=this.session.remove(g),this.clearSelection()}if("\n"==a||"\r\n"==a){var h=c.getLine(e.row);if(e.column>h.search(/\S|$/)){var i=h.substr(e.column).search(/\S|$/);c.doc.removeInLine(e.row,e.column,e.column+i)}}this.clearSelection();var j=e.column,k=c.getState(e.row),h=c.getLine(e.row),l=d.checkOutdent(k,h,a);c.insert(e,a);if(f&&f.selection&&(2==f.selection.length?this.selection.setSelectionRange(new n(e.row,j+f.selection[0],e.row,j+f.selection[1])):this.selection.setSelectionRange(new n(e.row+f.selection[0],f.selection[1],e.row+f.selection[2],f.selection[3]))),c.getDocument().isNewLine(a)){var m=d.getNextLineIndent(k,h.slice(0,e.column),c.getTabString());
c.insert({row:e.row+1,column:0},m)}l&&d.autoOutdent(k,c,e.row)},this.onTextInput=function(a){this.keyBinding.onTextInput(a)},this.onCommandKey=function(a,b,c){this.keyBinding.onCommandKey(a,b,c)},this.setOverwrite=function(a){this.session.setOverwrite(a)},this.getOverwrite=function(){return this.session.getOverwrite()},this.toggleOverwrite=function(){this.session.toggleOverwrite()},this.setScrollSpeed=function(a){this.setOption("scrollSpeed",a)},this.getScrollSpeed=function(){return this.getOption("scrollSpeed")},this.setDragDelay=function(a){this.setOption("dragDelay",a)},this.getDragDelay=function(){return this.getOption("dragDelay")},this.setSelectionStyle=function(a){this.setOption("selectionStyle",a)},this.getSelectionStyle=function(){return this.getOption("selectionStyle")},this.setHighlightActiveLine=function(a){this.setOption("highlightActiveLine",a)},this.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},this.setHighlightGutterLine=function(a){this.setOption("highlightGutterLine",a)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.setHighlightSelectedWord=function(a){this.setOption("highlightSelectedWord",a)},this.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},this.setAnimatedScroll=function(a){this.renderer.setAnimatedScroll(a)},this.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},this.setShowInvisibles=function(a){this.renderer.setShowInvisibles(a)},this.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},this.setDisplayIndentGuides=function(a){this.renderer.setDisplayIndentGuides(a)},this.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},this.setShowPrintMargin=function(a){this.renderer.setShowPrintMargin(a)},this.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},this.setPrintMarginColumn=function(a){this.renderer.setPrintMarginColumn(a)},this.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},this.setReadOnly=function(a){this.setOption("readOnly",a)},this.getReadOnly=function(){return this.getOption("readOnly")},this.setBehavioursEnabled=function(a){this.setOption("behavioursEnabled",a)},this.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},this.setWrapBehavioursEnabled=function(a){this.setOption("wrapBehavioursEnabled",a)},this.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},this.setShowFoldWidgets=function(a){this.setOption("showFoldWidgets",a)},this.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},this.setFadeFoldWidgets=function(a){this.setOption("fadeFoldWidgets",a)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.remove=function(a){this.selection.isEmpty()&&("left"==a?this.selection.selectLeft():this.selection.selectRight());var b=this.getSelectionRange();if(this.getBehavioursEnabled()){var c=this.session,d=c.getState(b.start.row),e=c.getMode().transformAction(d,"deletion",this,c,b);if(0===b.end.column){var f=c.getTextRange(b);if("\n"==f[f.length-1]){var g=c.getLine(b.end.row);/^\s+$/.test(g)&&(b.end.column=g.length)}}e&&(b=e)}this.session.remove(b),this.clearSelection()},this.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var a=this.getSelectionRange();a.start.column==a.end.column&&a.start.row==a.end.row&&(a.end.column=0,a.end.row++),this.session.remove(a),this.clearSelection()},this.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var a=this.getCursorPosition();this.insert("\n"),this.moveCursorToPosition(a)},this.transposeLetters=function(){if(this.selection.isEmpty()){var a=this.getCursorPosition(),b=a.column;if(0!==b){var c,d,e=this.session.getLine(a.row);b<e.length?(c=e.charAt(b)+e.charAt(b-1),d=new n(a.row,b-1,a.row,b+1)):(c=e.charAt(b-1)+e.charAt(b-2),d=new n(a.row,b-2,a.row,b)),this.session.replace(d,c)}}},this.toLowerCase=function(){var a=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var b=this.getSelectionRange(),c=this.session.getTextRange(b);this.session.replace(b,c.toLowerCase()),this.selection.setSelectionRange(a)},this.toUpperCase=function(){var a=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var b=this.getSelectionRange(),c=this.session.getTextRange(b);this.session.replace(b,c.toUpperCase()),this.selection.setSelectionRange(a)},this.indent=function(){var a=this.session,b=this.getSelectionRange();if(b.start.row<b.end.row){var c=this.$getSelectedRows();return void a.indentRows(c.first,c.last,"	")}if(b.start.column<b.end.column){var d=a.getTextRange(b);if(!/^\s+$/.test(d)){var c=this.$getSelectedRows();return void a.indentRows(c.first,c.last,"	")}}var e=a.getLine(b.start.row),g=b.start,h=a.getTabSize(),i=a.documentToScreenColumn(g.row,g.column);if(this.session.getUseSoftTabs())var j=h-i%h,k=f.stringRepeat(" ",j);else{for(var j=i%h;" "==e[b.start.column]&&j;)b.start.column--,j--;this.selection.setSelectionRange(b),k="	"}return this.insert(k)},this.blockIndent=function(){var a=this.$getSelectedRows();this.session.indentRows(a.first,a.last,"	")},this.blockOutdent=function(){var a=this.session.getSelection();this.session.outdentRows(a.getRange())},this.sortLines=function(){var a=this.$getSelectedRows(),b=this.session,c=[];for(e=a.first;e<=a.last;e++)c.push(b.getLine(e));c.sort(function(a,b){return a.toLowerCase()<b.toLowerCase()?-1:a.toLowerCase()>b.toLowerCase()?1:0});for(var d=new n(0,0,0,0),e=a.first;e<=a.last;e++){var f=b.getLine(e);d.start.row=e,d.end.row=e,d.end.column=f.length,b.replace(d,c[e-a.first])}},this.toggleCommentLines=function(){var a=this.session.getState(this.getCursorPosition().row),b=this.$getSelectedRows();this.session.getMode().toggleCommentLines(a,this.session,b.first,b.last)},this.toggleBlockComment=function(){var a=this.getCursorPosition(),b=this.session.getState(a.row),c=this.getSelectionRange();this.session.getMode().toggleBlockComment(b,this.session,c,a)},this.getNumberAt=function(a,b){var c=/[\-]?[0-9]+(?:\.[0-9]+)?/g;c.lastIndex=0;for(var d=this.session.getLine(a);c.lastIndex<b;){var e=c.exec(d);if(e.index<=b&&e.index+e[0].length>=b){var f={value:e[0],start:e.index,end:e.index+e[0].length};return f}}return null},this.modifyNumber=function(a){var b=this.selection.getCursor().row,c=this.selection.getCursor().column,d=new n(b,c-1,b,c),e=this.session.getTextRange(d);if(!isNaN(parseFloat(e))&&isFinite(e)){var f=this.getNumberAt(b,c);if(f){var g=f.value.indexOf(".")>=0?f.start+f.value.indexOf(".")+1:f.end,h=f.start+f.value.length-g,i=parseFloat(f.value);i*=Math.pow(10,h),a*=g!==f.end&&g>c?Math.pow(10,f.end-c-1):Math.pow(10,f.end-c),i+=a,i/=Math.pow(10,h);var j=i.toFixed(h),k=new n(b,f.start,b,f.end);this.session.replace(k,j),this.moveCursorTo(b,Math.max(f.start+1,c+j.length-f.value.length))}}},this.removeLines=function(){var a=this.$getSelectedRows();this.session.removeFullLines(a.first,a.last),this.clearSelection()},this.duplicateSelection=function(){var a=this.selection,b=this.session,c=a.getRange(),d=a.isBackwards();if(c.isEmpty()){var e=c.start.row;b.duplicateLines(e,e)}else{var f=d?c.start:c.end,g=b.insert(f,b.getTextRange(c),!1);c.start=f,c.end=g,a.setSelectionRange(c,d)}},this.moveLinesDown=function(){this.$moveLines(1,!1)},this.moveLinesUp=function(){this.$moveLines(-1,!1)},this.moveText=function(a,b,c){return this.session.moveText(a,b,c)},this.copyLinesUp=function(){this.$moveLines(-1,!0)},this.copyLinesDown=function(){this.$moveLines(1,!0)},this.$moveLines=function(a,b){var c,d,e=this.selection;if(!e.inMultiSelectMode||this.inVirtualSelectionMode){var f=e.toOrientedRange();c=this.$getSelectedRows(f),d=this.session.$moveLines(c.first,c.last,b?0:a),b&&-1==a&&(d=0),f.moveBy(d,0),e.fromOrientedRange(f)}else{var g=e.rangeList.ranges;e.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var h=0,i=0,j=g.length,k=0;j>k;k++){var l=k;g[k].moveBy(h,0),c=this.$getSelectedRows(g[k]);for(var m=c.first,n=c.last;++k<j;){i&&g[k].moveBy(i,0);var o=this.$getSelectedRows(g[k]);if(b&&o.first!=n)break;if(!b&&o.first>n+1)break;n=o.last}for(k--,h=this.session.$moveLines(m,n,b?0:a),b&&-1==a&&(l=k+1);k>=l;)g[l].moveBy(h,0),l++;b||(h=0),i+=h}e.fromOrientedRange(e.ranges[0]),e.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},this.$getSelectedRows=function(a){return a=(a||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(a.start.row),last:this.session.getRowFoldEnd(a.end.row)}},this.onCompositionStart=function(a){this.renderer.showComposition(this.getCursorPosition())},this.onCompositionUpdate=function(a){this.renderer.setCompositionText(a)},this.onCompositionEnd=function(){this.renderer.hideComposition()},this.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},this.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},this.isRowVisible=function(a){return a>=this.getFirstVisibleRow()&&a<=this.getLastVisibleRow()},this.isRowFullyVisible=function(a){return a>=this.renderer.getFirstFullyVisibleRow()&&a<=this.renderer.getLastFullyVisibleRow()},this.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},this.$moveByPage=function(a,b){var c=this.renderer,d=this.renderer.layerConfig,e=a*Math.floor(d.height/d.lineHeight);this.$blockScrolling++,b===!0?this.selection.$moveSelection(function(){this.moveCursorBy(e,0)}):b===!1&&(this.selection.moveCursorBy(e,0),this.selection.clearSelection()),this.$blockScrolling--;var f=c.scrollTop;c.scrollBy(0,e*d.lineHeight),null!=b&&c.scrollCursorIntoView(null,.5),c.animateScrolling(f)},this.selectPageDown=function(){this.$moveByPage(1,!0)},this.selectPageUp=function(){this.$moveByPage(-1,!0)},this.gotoPageDown=function(){this.$moveByPage(1,!1)},this.gotoPageUp=function(){this.$moveByPage(-1,!1)},this.scrollPageDown=function(){this.$moveByPage(1)},this.scrollPageUp=function(){this.$moveByPage(-1)},this.scrollToRow=function(a){this.renderer.scrollToRow(a)},this.scrollToLine=function(a,b,c,d){this.renderer.scrollToLine(a,b,c,d)},this.centerSelection=function(){var a=this.getSelectionRange(),b={row:Math.floor(a.start.row+(a.end.row-a.start.row)/2),column:Math.floor(a.start.column+(a.end.column-a.start.column)/2)};this.renderer.alignCursor(b,.5)},this.getCursorPosition=function(){return this.selection.getCursor()},this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},this.getSelectionRange=function(){return this.selection.getRange()},this.selectAll=function(){this.$blockScrolling+=1,this.selection.selectAll(),this.$blockScrolling-=1},this.clearSelection=function(){this.selection.clearSelection()},this.moveCursorTo=function(a,b){this.selection.moveCursorTo(a,b)},this.moveCursorToPosition=function(a){this.selection.moveCursorToPosition(a)},this.jumpToMatching=function(a,b){var c=this.getCursorPosition(),d=new s(this.session,c.row,c.column),e=d.getCurrentToken(),f=e||d.stepForward();if(f){var g,h,i=!1,j={},k=c.column-f.start,l={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(f.value.match(/[{}()\[\]]/g)){for(;k<f.value.length&&!i;k++)if(l[f.value[k]])switch(h=l[f.value[k]]+"."+f.type.replace("rparen","lparen"),isNaN(j[h])&&(j[h]=0),f.value[k]){case"(":case"[":case"{":j[h]++;break;case")":case"]":case"}":j[h]--,-1===j[h]&&(g="bracket",i=!0)}}else f&&-1!==f.type.indexOf("tag-name")&&(isNaN(j[f.value])&&(j[f.value]=0),"<"===e.value?j[f.value]++:"</"===e.value&&j[f.value]--,-1===j[f.value]&&(g="tag",i=!0));i||(e=f,f=d.stepForward(),k=0)}while(f&&!i);if(g){var m,o;if("bracket"===g)m=this.session.getBracketRange(c),m||(m=new n(d.getCurrentTokenRow(),d.getCurrentTokenColumn()+k-1,d.getCurrentTokenRow(),d.getCurrentTokenColumn()+k-1),o=m.start,(b||o.row===c.row&&Math.abs(o.column-c.column)<2)&&(m=this.session.getBracketRange(o)));else if("tag"===g){if(!f||-1===f.type.indexOf("tag-name"))return;var p=f.value;if(m=new n(d.getCurrentTokenRow(),d.getCurrentTokenColumn()-2,d.getCurrentTokenRow(),d.getCurrentTokenColumn()-2),0===m.compare(c.row,c.column)){i=!1;do f=e,e=d.stepBackward(),e&&(-1!==e.type.indexOf("tag-close")&&m.setEnd(d.getCurrentTokenRow(),d.getCurrentTokenColumn()+1),f.value===p&&-1!==f.type.indexOf("tag-name")&&("<"===e.value?j[p]++:"</"===e.value&&j[p]--,0===j[p]&&(i=!0)));while(e&&!i)}f&&f.type.indexOf("tag-name")&&(o=m.start,o.row==c.row&&Math.abs(o.column-c.column)<2&&(o=m.end))}o=m&&m.cursor||o,o&&(a?m&&b?this.selection.setRange(m):m&&m.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(o.row,o.column):this.selection.moveTo(o.row,o.column))}}},this.gotoLine=function(a,b,c){this.selection.clearSelection(),this.session.unfold({row:a-1,column:b||0}),this.$blockScrolling+=1,this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(a-1,b||0),this.$blockScrolling-=1,this.isRowFullyVisible(a-1)||this.scrollToLine(a-1,!0,c)},this.navigateTo=function(a,b){this.selection.moveTo(a,b)},this.navigateUp=function(a){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var b=this.selection.anchor.getPosition();return this.moveCursorToPosition(b)}this.selection.clearSelection(),this.selection.moveCursorBy(-a||-1,0)},this.navigateDown=function(a){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var b=this.selection.anchor.getPosition();return this.moveCursorToPosition(b)}this.selection.clearSelection(),this.selection.moveCursorBy(a||1,0)},this.navigateLeft=function(a){if(this.selection.isEmpty())for(a=a||1;a--;)this.selection.moveCursorLeft();else{var b=this.getSelectionRange().start;this.moveCursorToPosition(b)}this.clearSelection()},this.navigateRight=function(a){if(this.selection.isEmpty())for(a=a||1;a--;)this.selection.moveCursorRight();else{var b=this.getSelectionRange().end;this.moveCursorToPosition(b)}this.clearSelection()},this.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},this.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},this.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},this.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},this.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},this.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},this.replace=function(a,b){b&&this.$search.set(b);var c=this.$search.find(this.session),d=0;return c?(this.$tryReplace(c,a)&&(d=1),null!==c&&(this.selection.setSelectionRange(c),this.renderer.scrollSelectionIntoView(c.start,c.end)),d):d},this.replaceAll=function(a,b){b&&this.$search.set(b);var c=this.$search.findAll(this.session),d=0;if(!c.length)return d;this.$blockScrolling+=1;var e=this.getSelectionRange();this.selection.moveTo(0,0);for(var f=c.length-1;f>=0;--f)this.$tryReplace(c[f],a)&&d++;return this.selection.setSelectionRange(e),this.$blockScrolling-=1,d},this.$tryReplace=function(a,b){var c=this.session.getTextRange(a);return b=this.$search.replace(c,b),null!==b?(a.end=this.session.replace(a,b),a):null},this.getLastSearchOptions=function(){return this.$search.getOptions()},this.find=function(a,b,c){b||(b={}),"string"==typeof a||a instanceof RegExp?b.needle=a:"object"==typeof a&&d.mixin(b,a);var e=this.selection.getRange();null==b.needle&&(a=this.session.getTextRange(e)||this.$search.$options.needle,a||(e=this.session.getWordRange(e.start.row,e.start.column),a=this.session.getTextRange(e)),this.$search.set({needle:a})),this.$search.set(b),b.start||this.$search.set({start:e});var f=this.$search.find(this.session);return b.preventScroll?f:f?(this.revealRange(f,c),f):(b.backwards?e.start=e.end:e.end=e.start,void this.selection.setRange(e))},this.findNext=function(a,b){this.find({skipCurrent:!0,backwards:!1},a,b)},this.findPrevious=function(a,b){this.find(a,{skipCurrent:!0,backwards:!0},b)},this.revealRange=function(a,b){this.$blockScrolling+=1,this.session.unfold(a),this.selection.setSelectionRange(a),this.$blockScrolling-=1;var c=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(a.start,a.end,.5),b!==!1&&this.renderer.animateScrolling(c)},this.undo=function(){this.$blockScrolling++,this.session.getUndoManager().undo(),this.$blockScrolling--,this.renderer.scrollCursorIntoView(null,.5)},this.redo=function(){this.$blockScrolling++,this.session.getUndoManager().redo(),this.$blockScrolling--,this.renderer.scrollCursorIntoView(null,.5)},this.destroy=function(){this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy()},this.setAutoScrollEditorIntoView=function(a){if(a){var b,c=this,d=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var e=this.$scrollAnchor;e.style.cssText="position:absolute",this.container.insertBefore(e,this.container.firstChild);var f=this.on("changeSelection",function(){d=!0}),g=this.renderer.on("beforeRender",function(){d&&(b=c.renderer.container.getBoundingClientRect())}),h=this.renderer.on("afterRender",function(){if(d&&b&&(c.isFocused()||c.searchBox&&c.searchBox.isFocused())){var a=c.renderer,f=a.$cursorLayer.$pixelPos,g=a.layerConfig,h=f.top-g.offset;d=f.top>=0&&h+b.top<0?!0:f.top<g.height&&f.top+b.top+g.lineHeight>window.innerHeight?!1:null,null!=d&&(e.style.top=h+"px",e.style.left=f.left+"px",e.style.height=g.lineHeight+"px",e.scrollIntoView(d)),d=b=null}});this.setAutoScrollEditorIntoView=function(a){a||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",f),this.renderer.off("afterRender",h),this.renderer.off("beforeRender",g))}}},this.$resetCursorStyle=function(){var a=this.$cursorStyle||"ace",b=this.renderer.$cursorLayer;b&&(b.setSmoothBlinking(/smooth/.test(a)),b.isBlinking=!this.$readOnly&&"wide"!=a,e.setCssClass(b.element,"ace_slim-cursors",/slim/.test(a)))}}).call(t.prototype),r.defineOptions(t.prototype,"editor",{selectionStyle:{set:function(a){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:a})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(a){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(a){this.$resetCursorStyle()},initialValue:!1},cursorStyle:{set:function(a){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},autoScrollEditorIntoView:{set:function(a){this.setAutoScrollEditorIntoView(a)}},keyboardHandler:{set:function(a){this.setKeyboardHandler(a)},get:function(){return this.keybindingId},handlesSet:!0},hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",showLineNumbers:"renderer",showGutter:"renderer",displayIndentGuides:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"}),b.Editor=t}),ace.define("ace/undomanager",["require","exports","module"],function(a,b,c){"use strict";var d=function(){this.reset()};(function(){function a(a){return{action:a.action,start:a.start,end:a.end,lines:1==a.lines.length?null:a.lines,text:1==a.lines.length?a.lines[0]:null}}function b(a){return{action:a.action,start:a.start,end:a.end,lines:a.lines||[a.text]}}function c(a,b){for(var c=new Array(a.length),d=0;d<a.length;d++){for(var e=a[d],f={group:e.group,deltas:new Array(e.length)},g=0;g<e.deltas.length;g++){var h=e.deltas[g];f.deltas[g]=b(h)}c[d]=f}return c}this.execute=function(a){var b=a.args[0];this.$doc=a.args[1],a.merge&&this.hasUndo()&&(this.dirtyCounter--,b=this.$undoStack.pop().concat(b)),this.$undoStack.push(b),this.$redoStack=[],this.dirtyCounter<0&&(this.dirtyCounter=NaN),this.dirtyCounter++},this.undo=function(a){var b=this.$undoStack.pop(),c=null;return b&&(c=this.$doc.undoChanges(b,a),this.$redoStack.push(b),this.dirtyCounter--),c},this.redo=function(a){var b=this.$redoStack.pop(),c=null;return b&&(c=this.$doc.redoChanges(this.$deserializeDeltas(b),a),this.$undoStack.push(b),this.dirtyCounter++),c},this.reset=function(){this.$undoStack=[],this.$redoStack=[],this.dirtyCounter=0},this.hasUndo=function(){return this.$undoStack.length>0},this.hasRedo=function(){return this.$redoStack.length>0},this.markClean=function(){this.dirtyCounter=0},this.isClean=function(){return 0===this.dirtyCounter},this.$serializeDeltas=function(b){return c(b,a)},this.$deserializeDeltas=function(a){return c(a,b)}}).call(d.prototype),b.UndoManager=d}),ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter"],function(a,b,c){"use strict";var d=a("../lib/dom"),e=a("../lib/oop"),f=a("../lib/lang"),g=a("../lib/event_emitter").EventEmitter,h=function(a){this.element=d.createElement("div"),this.element.className="ace_layer ace_gutter-layer",a.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$cells=[]};(function(){e.implement(this,g),this.setSession=function(a){this.session&&this.session.removeEventListener("change",this.$updateAnnotations),this.session=a,a&&a.on("change",this.$updateAnnotations)},this.addGutterDecoration=function(a,b){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(a,b)},this.removeGutterDecoration=function(a,b){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(a,b)},this.setAnnotations=function(a){this.$annotations=[];for(var b=0;b<a.length;b++){var c=a[b],d=c.row,e=this.$annotations[d];e||(e=this.$annotations[d]={text:[]});var g=c.text;g=g?f.escapeHTML(g):c.html||"",-1===e.text.indexOf(g)&&e.text.push(g);var h=c.type;"error"==h?e.className=" ace_error":"warning"==h&&" ace_error"!=e.className?e.className=" ace_warning":"info"==h&&!e.className&&(e.className=" ace_info")}},this.$updateAnnotations=function(a){if(this.$annotations.length){var b=a.start.row,c=a.end.row-b;if(0!==c)if("remove"==a.action)this.$annotations.splice(b,c+1,null);else{var d=new Array(c+1);d.unshift(b,1),this.$annotations.splice.apply(this.$annotations,d)}}},this.update=function(a){for(var b=this.session,c=a.firstRow,e=Math.min(a.lastRow+a.gutterOffset,b.getLength()-1),f=b.getNextFoldLine(c),g=f?f.start.row:1/0,h=this.$showFoldWidgets&&b.foldWidgets,i=b.$breakpoints,j=b.$decorations,k=b.$firstLineNumber,l=0,m=b.gutterRenderer||this.$renderer,n=null,o=-1,p=c;;){if(p>g&&(p=f.end.row+1,f=b.getNextFoldLine(p,f),g=f?f.start.row:1/0),p>e){for(;this.$cells.length>o+1;)n=this.$cells.pop(),this.element.removeChild(n.element);break}n=this.$cells[++o],n||(n={element:null,textNode:null,foldWidget:null},n.element=d.createElement("div"),n.textNode=document.createTextNode(""),n.element.appendChild(n.textNode),this.element.appendChild(n.element),this.$cells[o]=n);var q="ace_gutter-cell ";i[p]&&(q+=i[p]),j[p]&&(q+=j[p]),this.$annotations[p]&&(q+=this.$annotations[p].className),n.element.className!=q&&(n.element.className=q);var r=b.getRowLength(p)*a.lineHeight+"px";if(r!=n.element.style.height&&(n.element.style.height=r),h){var s=h[p];null==s&&(s=h[p]=b.getFoldWidget(p))}if(s){n.foldWidget||(n.foldWidget=d.createElement("span"),n.element.appendChild(n.foldWidget));var q="ace_fold-widget ace_"+s;q+="start"==s&&p==g&&p<f.end.row?" ace_closed":" ace_open",n.foldWidget.className!=q&&(n.foldWidget.className=q);var r=a.lineHeight+"px";n.foldWidget.style.height!=r&&(n.foldWidget.style.height=r)}else n.foldWidget&&(n.element.removeChild(n.foldWidget),n.foldWidget=null);var t=l=m?m.getText(b,p):p+k;t!=n.textNode.data&&(n.textNode.data=t),p++}this.element.style.height=a.minHeight+"px",(this.$fixedWidth||b.$useWrapMode)&&(l=b.getLength()+k);var u=m?m.getWidth(b,l,a):l.toString().length*a.characterWidth,v=this.$padding||this.$computePadding();u+=v.left+v.right,u!==this.gutterWidth&&!isNaN(u)&&(this.gutterWidth=u,this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._emit("changeGutterWidth",u))},this.$fixedWidth=!1,this.$showLineNumbers=!0,this.$renderer="",this.setShowLineNumbers=function(a){this.$renderer=!a&&{getWidth:function(){return""},getText:function(){return""}}},this.getShowLineNumbers=function(){return this.$showLineNumbers},this.$showFoldWidgets=!0,this.setShowFoldWidgets=function(a){a?d.addCssClass(this.element,"ace_folding-enabled"):d.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=a,this.$padding=null},this.getShowFoldWidgets=function(){return this.$showFoldWidgets},this.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var a=d.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=parseInt(a.paddingLeft)+1||0,this.$padding.right=parseInt(a.paddingRight)||0,this.$padding},this.getRegion=function(a){var b=this.$padding||this.$computePadding(),c=this.element.getBoundingClientRect();return a.x<b.left+c.left?"markers":this.$showFoldWidgets&&a.x>c.right-b.right?"foldWidgets":void 0}}).call(h.prototype),b.Gutter=h}),ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(a,b,c){"use strict";var d=a("../range").Range,e=a("../lib/dom"),f=function(a){this.element=e.createElement("div"),this.element.className="ace_layer ace_marker-layer",a.appendChild(this.element)};(function(){function a(a,b,c,d){return(a?1:0)|(b?2:0)|(c?4:0)|(d?8:0)}this.$padding=0,this.setPadding=function(a){this.$padding=a},this.setSession=function(a){this.session=a},this.setMarkers=function(a){this.markers=a},this.update=function(a){var a=a||this.config;if(a){this.config=a;var b=[];for(var c in this.markers){var d=this.markers[c];if(d.range){var e=d.range.clipRows(a.firstRow,a.lastRow);if(!e.isEmpty())if(e=e.toScreenRange(this.session),d.renderer){var f=this.$getTop(e.start.row,a),g=this.$padding+e.start.column*a.characterWidth;d.renderer(b,e,g,f,a)}else"fullLine"==d.type?this.drawFullLineMarker(b,e,d.clazz,a):"screenLine"==d.type?this.drawScreenLineMarker(b,e,d.clazz,a):e.isMultiLine()?"text"==d.type?this.drawTextMarker(b,e,d.clazz,a):this.drawMultiLineMarker(b,e,d.clazz,a):this.drawSingleLineMarker(b,e,d.clazz+" ace_start ace_br15",a)}else d.update(b,this,this.session,a)}this.element.innerHTML=b.join("")}},this.$getTop=function(a,b){return(a-b.firstRowScreen)*b.lineHeight},this.drawTextMarker=function(b,c,e,f,g){for(var h=this.session,i=c.start.row,j=c.end.row,k=i,l=0,m=0,n=h.getScreenLastRowColumn(k),o=new d(k,c.start.column,k,m);j>=k;k++)o.start.row=o.end.row=k,o.start.column=k==i?c.start.column:h.getRowWrapIndent(k),o.end.column=n,l=m,m=n,n=j>k+1?h.getScreenLastRowColumn(k+1):k==j?0:c.end.column,this.drawSingleLineMarker(b,o,e+(k==i?" ace_start":"")+" ace_br"+a(k==i||k==i+1&&c.start.column,m>l,m>n,k==j),f,k==j?0:1,g)},this.drawMultiLineMarker=function(a,b,c,d,e){var f=this.$padding,g=d.lineHeight,h=this.$getTop(b.start.row,d),i=f+b.start.column*d.characterWidth;e=e||"",a.push("<div class='",c," ace_br1 ace_start' style='","height:",g,"px;","right:0;","top:",h,"px;","left:",i,"px;",e,"'></div>"),h=this.$getTop(b.end.row,d);var j=b.end.column*d.characterWidth;if(a.push("<div class='",c," ace_br12' style='","height:",g,"px;","width:",j,"px;","top:",h,"px;","left:",f,"px;",e,"'></div>"),g=(b.end.row-b.start.row-1)*d.lineHeight,!(0>=g)){h=this.$getTop(b.start.row+1,d);var k=(b.start.column?1:0)|(b.end.column?0:8);a.push("<div class='",c,k?" ace_br"+k:"","' style='","height:",g,"px;","right:0;","top:",h,"px;","left:",f,"px;",e,"'></div>")}},this.drawSingleLineMarker=function(a,b,c,d,e,f){var g=d.lineHeight,h=(b.end.column+(e||0)-b.start.column)*d.characterWidth,i=this.$getTop(b.start.row,d),j=this.$padding+b.start.column*d.characterWidth;a.push("<div class='",c,"' style='","height:",g,"px;","width:",h,"px;","top:",i,"px;","left:",j,"px;",f||"","'></div>")},this.drawFullLineMarker=function(a,b,c,d,e){var f=this.$getTop(b.start.row,d),g=d.lineHeight;b.start.row!=b.end.row&&(g+=this.$getTop(b.end.row,d)-f),a.push("<div class='",c,"' style='","height:",g,"px;","top:",f,"px;","left:0;right:0;",e||"","'></div>")},this.drawScreenLineMarker=function(a,b,c,d,e){var f=this.$getTop(b.start.row,d),g=d.lineHeight;a.push("<div class='",c,"' style='","height:",g,"px;","top:",f,"px;","left:0;right:0;",e||"","'></div>")}}).call(f.prototype),b.Marker=f}),ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/lib/event_emitter"],function(a,b,c){"use strict";var d=a("../lib/oop"),e=a("../lib/dom"),f=a("../lib/lang"),g=(a("../lib/useragent"),a("../lib/event_emitter").EventEmitter),h=function(a){this.element=e.createElement("div"),this.element.className="ace_layer ace_text-layer",a.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this)};(function(){d.implement(this,g),this.EOF_CHAR="",this.EOL_CHAR_LF="",this.EOL_CHAR_CRLF="",this.EOL_CHAR=this.EOL_CHAR_LF,this.TAB_CHAR="",this.SPACE_CHAR="",this.$padding=0,this.$updateEolChar=function(){var a="\n"==this.session.doc.getNewLineCharacter()?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;return this.EOL_CHAR!=a?(this.EOL_CHAR=a,!0):void 0},this.setPadding=function(a){this.$padding=a,this.element.style.padding="0 "+a+"px"},this.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},this.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},this.$setFontMetrics=function(a){this.$fontMetrics=a,this.$fontMetrics.on("changeCharacterSize",function(a){this._signal("changeCharacterSize",a)}.bind(this)),this.$pollSizeChanges()},this.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},this.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},this.setSession=function(a){this.session=a,a&&this.$computeTabString()},this.showInvisibles=!1,this.setShowInvisibles=function(a){return this.showInvisibles==a?!1:(this.showInvisibles=a,this.$computeTabString(),!0)},this.displayIndentGuides=!0,this.setDisplayIndentGuides=function(a){return this.displayIndentGuides==a?!1:(this.displayIndentGuides=a,this.$computeTabString(),!0)},this.$tabStrings=[],this.onChangeTabSize=this.$computeTabString=function(){var a=this.session.getTabSize();this.tabSize=a;for(var b=this.$tabStrings=[0],c=1;a+1>c;c++)this.showInvisibles?b.push("<span class='ace_invisible ace_invisible_tab'>"+f.stringRepeat(this.TAB_CHAR,c)+"</span>"):b.push(f.stringRepeat(" ",c));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var d="ace_indent-guide",e="",g="";if(this.showInvisibles){
d+=" ace_invisible",e=" ace_invisible_space",g=" ace_invisible_tab";var h=f.stringRepeat(this.SPACE_CHAR,this.tabSize),i=f.stringRepeat(this.TAB_CHAR,this.tabSize)}else var h=f.stringRepeat(" ",this.tabSize),i=h;this.$tabStrings[" "]="<span class='"+d+e+"'>"+h+"</span>",this.$tabStrings["	"]="<span class='"+d+g+"'>"+i+"</span>"}},this.updateLines=function(a,b,c){(this.config.lastRow!=a.lastRow||this.config.firstRow!=a.firstRow)&&this.scrollLines(a),this.config=a;for(var d=Math.max(b,a.firstRow),e=Math.min(c,a.lastRow),f=this.element.childNodes,g=0,h=a.firstRow;d>h;h++){var i=this.session.getFoldLine(h);if(i){if(i.containsRow(d)){d=i.start.row;break}h=i.end.row}g++}for(var h=d,i=this.session.getNextFoldLine(h),j=i?i.start.row:1/0;h>j&&(h=i.end.row+1,i=this.session.getNextFoldLine(h,i),j=i?i.start.row:1/0),!(h>e);){var k=f[g++];if(k){var l=[];this.$renderLine(l,h,!this.$useLineGroups(),h==j?i:!1),k.style.height=a.lineHeight*this.session.getRowLength(h)+"px",k.innerHTML=l.join("")}h++}},this.scrollLines=function(a){var b=this.config;if(this.config=a,!b||b.lastRow<a.firstRow)return this.update(a);if(a.lastRow<b.firstRow)return this.update(a);var c=this.element;if(b.firstRow<a.firstRow)for(var d=this.session.getFoldedRowCount(b.firstRow,a.firstRow-1);d>0;d--)c.removeChild(c.firstChild);if(b.lastRow>a.lastRow)for(var d=this.session.getFoldedRowCount(a.lastRow+1,b.lastRow);d>0;d--)c.removeChild(c.lastChild);if(a.firstRow<b.firstRow){var e=this.$renderLinesFragment(a,a.firstRow,b.firstRow-1);c.firstChild?c.insertBefore(e,c.firstChild):c.appendChild(e)}if(a.lastRow>b.lastRow){var e=this.$renderLinesFragment(a,b.lastRow+1,a.lastRow);c.appendChild(e)}},this.$renderLinesFragment=function(a,b,c){for(var d=this.element.ownerDocument.createDocumentFragment(),f=b,g=this.session.getNextFoldLine(f),h=g?g.start.row:1/0;f>h&&(f=g.end.row+1,g=this.session.getNextFoldLine(f,g),h=g?g.start.row:1/0),!(f>c);){var i=e.createElement("div"),j=[];if(this.$renderLine(j,f,!1,f==h?g:!1),i.innerHTML=j.join(""),this.$useLineGroups())i.className="ace_line_group",d.appendChild(i),i.style.height=a.lineHeight*this.session.getRowLength(f)+"px";else for(;i.firstChild;)d.appendChild(i.firstChild);f++}return d},this.update=function(a){this.config=a;for(var b=[],c=a.firstRow,d=a.lastRow,e=c,f=this.session.getNextFoldLine(e),g=f?f.start.row:1/0;e>g&&(e=f.end.row+1,f=this.session.getNextFoldLine(e,f),g=f?f.start.row:1/0),!(e>d);)this.$useLineGroups()&&b.push("<div class='ace_line_group' style='height:",a.lineHeight*this.session.getRowLength(e),"px'>"),this.$renderLine(b,e,!1,e==g?f:!1),this.$useLineGroups()&&b.push("</div>"),e++;this.element.innerHTML=b.join("")},this.$textToken={text:!0,rparen:!0,lparen:!0},this.$renderToken=function(a,b,c,d){var e=this,g=/\t|&|<|>|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\u3000\uFEFF\uFFF9-\uFFFC])|[\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3000-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]/g,h=function(a,c,d,g,h){if(c)return e.showInvisibles?"<span class='ace_invisible ace_invisible_space'>"+f.stringRepeat(e.SPACE_CHAR,a.length)+"</span>":a;if("&"==a)return"&#38;";if("<"==a)return"&#60;";if(">"==a)return"&#62;";if("	"==a){var i=e.session.getScreenTabSize(b+g);return b+=i-1,e.$tabStrings[i]}if(""==a){var j=e.showInvisibles?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",k=e.showInvisibles?e.SPACE_CHAR:"";return b+=1,"<span class='"+j+"' style='width:"+2*e.config.characterWidth+"px'>"+k+"</span>"}return d?"<span class='ace_invisible ace_invisible_space ace_invalid'>"+e.SPACE_CHAR+"</span>":(b+=1,"<span class='ace_cjk' style='width:"+2*e.config.characterWidth+"px'>"+a+"</span>")},i=d.replace(g,h);if(this.$textToken[c.type])a.push(i);else{var j="ace_"+c.type.replace(/\./g," ace_"),k="";"fold"==c.type&&(k=" style='width:"+c.value.length*this.config.characterWidth+"px;' "),a.push("<span class='",j,"'",k,">",i,"</span>")}return b+d.length},this.renderIndentGuide=function(a,b,c){var d=b.search(this.$indentGuideRe);return 0>=d||d>=c?b:" "==b[0]?(d-=d%this.tabSize,a.push(f.stringRepeat(this.$tabStrings[" "],d/this.tabSize)),b.substr(d)):"	"==b[0]?(a.push(f.stringRepeat(this.$tabStrings["	"],d)),b.substr(d)):b},this.$renderWrappedLine=function(a,b,c,d){for(var e=0,g=0,h=c[0],i=0,j=0;j<b.length;j++){var k=b[j],l=k.value;if(0==j&&this.displayIndentGuides){if(e=l.length,l=this.renderIndentGuide(a,l,h),!l)continue;e-=l.length}if(e+l.length<h)i=this.$renderToken(a,i,k,l),e+=l.length;else{for(;e+l.length>=h;)i=this.$renderToken(a,i,k,l.substring(0,h-e)),l=l.substring(h-e),e=h,d||a.push("</div>","<div class='ace_line' style='height:",this.config.lineHeight,"px'>"),a.push(f.stringRepeat("",c.indent)),g++,i=0,h=c[g]||Number.MAX_VALUE;0!=l.length&&(e+=l.length,i=this.$renderToken(a,i,k,l))}}},this.$renderSimpleLine=function(a,b){var c=0,d=b[0],e=d.value;this.displayIndentGuides&&(e=this.renderIndentGuide(a,e)),e&&(c=this.$renderToken(a,c,d,e));for(var f=1;f<b.length;f++)d=b[f],e=d.value,c=this.$renderToken(a,c,d,e)},this.$renderLine=function(a,b,c,d){if(!d&&0!=d&&(d=this.session.getFoldLine(b)),d)var e=this.$getFoldLineTokens(b,d);else var e=this.session.getTokens(b);if(c||a.push("<div class='ace_line' style='height:",this.config.lineHeight*(this.$useLineGroups()?1:this.session.getRowLength(b)),"px'>"),e.length){var f=this.session.getRowSplitData(b);f&&f.length?this.$renderWrappedLine(a,e,f,c):this.$renderSimpleLine(a,e)}this.showInvisibles&&(d&&(b=d.end.row),a.push("<span class='ace_invisible ace_invisible_eol'>",b==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,"</span>")),c||a.push("</div>")},this.$getFoldLineTokens=function(a,b){function c(a,b,c){for(var d=0,f=0;f+a[d].value.length<b;)if(f+=a[d].value.length,d++,d==a.length)return;if(f!=b){var g=a[d].value.substring(b-f);g.length>c-b&&(g=g.substring(0,c-b)),e.push({type:a[d].type,value:g}),f=b+g.length,d+=1}for(;c>f&&d<a.length;){var g=a[d].value;g.length+f>c?e.push({type:a[d].type,value:g.substring(0,c-f)}):e.push(a[d]),f+=g.length,d+=1}}var d=this.session,e=[],f=d.getTokens(a);return b.walk(function(a,b,g,h,i){null!=a?e.push({type:"fold",value:a}):(i&&(f=d.getTokens(b)),f.length&&c(f,h,g))},b.end.row,this.session.getLine(b.end.row).length),e},this.$useLineGroups=function(){return this.session.getUseWrapMode()},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$measureNode&&this.$measureNode.parentNode.removeChild(this.$measureNode),delete this.$measureNode}}).call(h.prototype),b.Text=h}),ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(a,b,c){"use strict";var d,e=a("../lib/dom"),f=function(a){this.element=e.createElement("div"),this.element.className="ace_layer ace_cursor-layer",a.appendChild(this.element),void 0===d&&(d=!("opacity"in this.element.style)),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),e.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=(d?this.$updateVisibility:this.$updateOpacity).bind(this)};(function(){this.$updateVisibility=function(a){for(var b=this.cursors,c=b.length;c--;)b[c].style.visibility=a?"":"hidden"},this.$updateOpacity=function(a){for(var b=this.cursors,c=b.length;c--;)b[c].style.opacity=a?"":"0"},this.$padding=0,this.setPadding=function(a){this.$padding=a},this.setSession=function(a){this.session=a},this.setBlinking=function(a){a!=this.isBlinking&&(this.isBlinking=a,this.restartTimer())},this.setBlinkInterval=function(a){a!=this.blinkInterval&&(this.blinkInterval=a,this.restartTimer())},this.setSmoothBlinking=function(a){a!=this.smoothBlinking&&!d&&(this.smoothBlinking=a,e.setCssClass(this.element,"ace_smooth-blinking",a),this.$updateCursors(!0),this.$updateCursors=this.$updateOpacity.bind(this),this.restartTimer())},this.addCursor=function(){var a=e.createElement("div");return a.className="ace_cursor",this.element.appendChild(a),this.cursors.push(a),a},this.removeCursor=function(){if(this.cursors.length>1){var a=this.cursors.pop();return a.parentNode.removeChild(a),a}},this.hideCursor=function(){this.isVisible=!1,e.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.showCursor=function(){this.isVisible=!0,e.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.restartTimer=function(){var a=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.smoothBlinking&&e.removeCssClass(this.element,"ace_smooth-blinking"),a(!0),this.isBlinking&&this.blinkInterval&&this.isVisible){this.smoothBlinking&&setTimeout(function(){e.addCssClass(this.element,"ace_smooth-blinking")}.bind(this));var b=function(){this.timeoutId=setTimeout(function(){a(!1)},.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval(function(){a(!0),b()},this.blinkInterval),b()}},this.getPixelPosition=function(a,b){if(!this.config||!this.session)return{left:0,top:0};a||(a=this.session.selection.getCursor());var c=this.session.documentToScreenPosition(a),d=this.$padding+c.column*this.config.characterWidth,e=(c.row-(b?this.config.firstRowScreen:0))*this.config.lineHeight;return{left:d,top:e}},this.update=function(a){this.config=a;var b=this.session.$selectionMarkers,c=0,d=0;void 0!==b&&0!==b.length||(b=[{cursor:null}]);for(var c=0,e=b.length;e>c;c++){var f=this.getPixelPosition(b[c].cursor,!0);if(!((f.top>a.height+a.offset||f.top<0)&&c>1)){var g=(this.cursors[d++]||this.addCursor()).style;this.drawCursor?this.drawCursor(g,f,a,b[c],this.session):(g.left=f.left+"px",g.top=f.top+"px",g.width=a.characterWidth+"px",g.height=a.lineHeight+"px")}}for(;this.cursors.length>d;)this.removeCursor();var h=this.session.getOverwrite();this.$setOverwrite(h),this.$pixelPos=f,this.restartTimer()},this.drawCursor=null,this.$setOverwrite=function(a){a!=this.overwrite&&(this.overwrite=a,a?e.addCssClass(this.element,"ace_overwrite-cursors"):e.removeCssClass(this.element,"ace_overwrite-cursors"))},this.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)}}).call(f.prototype),b.Cursor=f}),ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(a,b,c){"use strict";var d=a("./lib/oop"),e=a("./lib/dom"),f=a("./lib/event"),g=a("./lib/event_emitter").EventEmitter,h=function(a){this.element=e.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+this.classSuffix,this.inner=e.createElement("div"),this.inner.className="ace_scrollbar-inner",this.element.appendChild(this.inner),a.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,f.addListener(this.element,"scroll",this.onScroll.bind(this)),f.addListener(this.element,"mousedown",f.preventDefault)};(function(){d.implement(this,g),this.setVisible=function(a){this.element.style.display=a?"":"none",this.isVisible=a}}).call(h.prototype);var i=function(a,b){h.call(this,a),this.scrollTop=0,b.$scrollbarWidth=this.width=e.scrollbarWidth(a.ownerDocument),this.inner.style.width=this.element.style.width=(this.width||15)+5+"px"};d.inherits(i,h),function(){this.classSuffix="-v",this.onScroll=function(){this.skipEvent||(this.scrollTop=this.element.scrollTop,this._emit("scroll",{data:this.scrollTop})),this.skipEvent=!1},this.getWidth=function(){return this.isVisible?this.width:0},this.setHeight=function(a){this.element.style.height=a+"px"},this.setInnerHeight=function(a){this.inner.style.height=a+"px"},this.setScrollHeight=function(a){this.inner.style.height=a+"px"},this.setScrollTop=function(a){this.scrollTop!=a&&(this.skipEvent=!0,this.scrollTop=this.element.scrollTop=a)}}.call(i.prototype);var j=function(a,b){h.call(this,a),this.scrollLeft=0,this.height=b.$scrollbarWidth,this.inner.style.height=this.element.style.height=(this.height||15)+5+"px"};d.inherits(j,h),function(){this.classSuffix="-h",this.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},this.getHeight=function(){return this.isVisible?this.height:0},this.setWidth=function(a){this.element.style.width=a+"px"},this.setInnerWidth=function(a){this.inner.style.width=a+"px"},this.setScrollWidth=function(a){this.inner.style.width=a+"px"},this.setScrollLeft=function(a){this.scrollLeft!=a&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=a)}}.call(j.prototype),b.ScrollBar=i,b.ScrollBarV=i,b.ScrollBarH=j,b.VScrollBar=i,b.HScrollBar=j}),ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],function(a,b,c){"use strict";var d=a("./lib/event"),e=function(a,b){this.onRender=a,this.pending=!1,this.changes=0,this.window=b||window};(function(){this.schedule=function(a){if(this.changes=this.changes|a,!this.pending&&this.changes){this.pending=!0;var b=this;d.nextFrame(function(){b.pending=!1;for(var a;a=b.changes;)b.changes=0,b.onRender(a)},this.window)}}}).call(e.prototype),b.RenderLoop=e}),ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/lib/event_emitter"],function(a,b,c){var d=a("../lib/oop"),e=a("../lib/dom"),f=a("../lib/lang"),g=a("../lib/useragent"),h=a("../lib/event_emitter").EventEmitter,i=0,j=b.FontMetrics=function(a){this.el=e.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=e.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=e.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),a.appendChild(this.el),i||this.$testFractionalRect(),this.$measureNode.innerHTML=f.stringRepeat("X",i),this.$characterSize={width:0,height:0},this.checkForSizeChanges()};(function(){d.implement(this,h),this.$characterSize={width:0,height:0},this.$testFractionalRect=function(){var a=e.createElement("div");this.$setMeasureNodeStyles(a.style),a.style.width="0.2px",document.documentElement.appendChild(a);var b=a.getBoundingClientRect().width;i=b>0&&1>b?50:100,a.parentNode.removeChild(a)},this.$setMeasureNodeStyles=function(a,b){a.width=a.height="auto",a.left=a.top="0px",a.visibility="hidden",a.position="absolute",a.whiteSpace="pre",g.isIE<8?a["font-family"]="inherit":a.font="inherit",a.overflow=b?"hidden":"visible"},this.checkForSizeChanges=function(){var a=this.$measureSizes();if(a&&(this.$characterSize.width!==a.width||this.$characterSize.height!==a.height)){this.$measureNode.style.fontWeight="bold";var b=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=a,this.charSizes=Object.create(null),this.allowBoldFonts=b&&b.width===a.width&&b.height===a.height,this._emit("changeCharacterSize",{data:a})}},this.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer)return this.$pollSizeChangesTimer;var a=this;return this.$pollSizeChangesTimer=setInterval(function(){a.checkForSizeChanges()},500)},this.setPolling=function(a){a?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},this.$measureSizes=function(){if(50===i){var a=null;try{a=this.$measureNode.getBoundingClientRect()}catch(b){a={width:0,height:0}}var c={height:a.height,width:a.width/i}}else var c={height:this.$measureNode.clientHeight,width:this.$measureNode.clientWidth/i};return 0===c.width||0===c.height?null:c},this.$measureCharWidth=function(a){this.$main.innerHTML=f.stringRepeat(a,i);var b=this.$main.getBoundingClientRect();return b.width/i},this.getCharacterWidth=function(a){var b=this.charSizes[a];return void 0===b&&(b=this.charSizes[a]=this.$measureCharWidth(a)/this.$characterSize.width),b},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)}}).call(j.prototype)}),ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/config","ace/lib/useragent","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter"],function(a,b,c){"use strict";var d=a("./lib/oop"),e=a("./lib/dom"),f=a("./config"),g=a("./lib/useragent"),h=a("./layer/gutter").Gutter,i=a("./layer/marker").Marker,j=a("./layer/text").Text,k=a("./layer/cursor").Cursor,l=a("./scrollbar").HScrollBar,m=a("./scrollbar").VScrollBar,n=a("./renderloop").RenderLoop,o=a("./layer/font_metrics").FontMetrics,p=a("./lib/event_emitter").EventEmitter,q='.ace_editor {position: relative;overflow: hidden;font: 12px/normal \'Monaco\', \'Menlo\', \'Ubuntu Mono\', \'Consolas\', \'source-code-pro\', monospace;direction: ltr;}.ace_scroller {position: absolute;overflow: hidden;top: 0;bottom: 0;background-color: inherit;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;cursor: text;}.ace_content {position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;min-width: 100%;}.ace_dragging .ace_scroller:before{position: absolute;top: 0;left: 0;right: 0;bottom: 0;content: \'\';background: rgba(250, 250, 250, 0.01);z-index: 1000;}.ace_dragging.ace_dark .ace_scroller:before{background: rgba(0, 0, 0, 0.01);}.ace_selecting, .ace_selecting * {cursor: text !important;}.ace_gutter {position: absolute;overflow : hidden;width: auto;top: 0;bottom: 0;left: 0;cursor: default;z-index: 4;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;}.ace_gutter-active-line {position: absolute;left: 0;right: 0;}.ace_scroller.ace_scroll-left {box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;}.ace_gutter-cell {padding-left: 19px;padding-right: 6px;background-repeat: no-repeat;}.ace_gutter-cell.ace_error {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: 2px center;}.ace_gutter-cell.ace_warning {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");background-position: 2px center;}.ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");background-position: 2px center;}.ace_dark .ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");}.ace_scrollbar {position: absolute;right: 0;bottom: 0;z-index: 6;}.ace_scrollbar-inner {position: absolute;cursor: text;left: 0;top: 0;}.ace_scrollbar-v{overflow-x: hidden;overflow-y: scroll;top: 0;}.ace_scrollbar-h {overflow-x: scroll;overflow-y: hidden;left: 0;}.ace_print-margin {position: absolute;height: 100%;}.ace_text-input {position: absolute;z-index: 0;width: 0.5em;height: 1em;opacity: 0;background: transparent;-moz-appearance: none;appearance: none;border: none;resize: none;outline: none;overflow: hidden;font: inherit;padding: 0 1px;margin: 0 -1px;text-indent: -1em;-ms-user-select: text;-moz-user-select: text;-webkit-user-select: text;user-select: text;white-space: pre!important;}.ace_text-input.ace_composition {background: inherit;color: inherit;z-index: 1000;opacity: 1;text-indent: 0;}.ace_layer {z-index: 1;position: absolute;overflow: hidden;word-wrap: normal;white-space: pre;height: 100%;width: 100%;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;pointer-events: none;}.ace_gutter-layer {position: relative;width: auto;text-align: right;pointer-events: auto;}.ace_text-layer {font: inherit !important;}.ace_cjk {display: inline-block;text-align: center;}.ace_cursor-layer {z-index: 4;}.ace_cursor {z-index: 4;position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;border-left: 2px solid;transform: translatez(0);}.ace_slim-cursors .ace_cursor {border-left-width: 1px;}.ace_overwrite-cursors .ace_cursor {border-left-width: 0;border-bottom: 1px solid;}.ace_hidden-cursors .ace_cursor {opacity: 0.2;}.ace_smooth-blinking .ace_cursor {-webkit-transition: opacity 0.18s;transition: opacity 0.18s;}.ace_editor.ace_multiselect .ace_cursor {border-left-width: 1px;}.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {position: absolute;z-index: 3;}.ace_marker-layer .ace_selection {position: absolute;z-index: 5;}.ace_marker-layer .ace_bracket {position: absolute;z-index: 6;}.ace_marker-layer .ace_active-line {position: absolute;z-index: 2;}.ace_marker-layer .ace_selected-word {position: absolute;z-index: 4;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;}.ace_line .ace_fold {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;display: inline-block;height: 11px;margin-top: -2px;vertical-align: middle;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");background-repeat: no-repeat, repeat-x;background-position: center center, top left;color: transparent;border: 1px solid black;border-radius: 2px;cursor: pointer;pointer-events: auto;}.ace_dark .ace_fold {}.ace_fold:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");}.ace_tooltip {background-color: #FFF;background-image: -webkit-linear-gradient(top, transparent, rgba(0, 0, 0, 0.1));background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));border: 1px solid gray;border-radius: 1px;box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);color: black;max-width: 100%;padding: 3px 4px;position: fixed;z-index: 999999;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;cursor: default;white-space: pre;word-wrap: break-word;line-height: normal;font-style: normal;font-weight: normal;letter-spacing: normal;pointer-events: none;}.ace_folding-enabled > .ace_gutter-cell {padding-right: 13px;}.ace_fold-widget {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;margin: 0 -12px 0 1px;display: none;width: 11px;vertical-align: top;background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: center;border-radius: 3px;border: 1px solid transparent;cursor: pointer;}.ace_folding-enabled .ace_fold-widget {display: inline-block;   }.ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");}.ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");}.ace_fold-widget:hover {border: 1px solid rgba(0, 0, 0, 0.3);background-color: rgba(255, 255, 255, 0.2);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);}.ace_fold-widget:active {border: 1px solid rgba(0, 0, 0, 0.4);background-color: rgba(0, 0, 0, 0.05);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);}.ace_dark .ace_fold-widget {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");}.ace_dark .ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget:hover {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);background-color: rgba(255, 255, 255, 0.1);}.ace_dark .ace_fold-widget:active {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);}.ace_fold-widget.ace_invalid {background-color: #FFB4B4;border-color: #DE5555;}.ace_fade-fold-widgets .ace_fold-widget {-webkit-transition: opacity 0.4s ease 0.05s;transition: opacity 0.4s ease 0.05s;opacity: 0;}.ace_fade-fold-widgets:hover .ace_fold-widget {-webkit-transition: opacity 0.05s ease 0.05s;transition: opacity 0.05s ease 0.05s;opacity:1;}.ace_underline {text-decoration: underline;}.ace_bold {font-weight: bold;}.ace_nobold .ace_bold {font-weight: normal;}.ace_italic {font-style: italic;}.ace_error-marker {background-color: rgba(255, 0, 0,0.2);position: absolute;z-index: 9;}.ace_highlight-marker {background-color: rgba(255, 255, 0,0.2);position: absolute;z-index: 8;}.ace_br1 {border-top-left-radius    : 3px;}.ace_br2 {border-top-right-radius   : 3px;}.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}.ace_br4 {border-bottom-right-radius: 3px;}.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}.ace_br8 {border-bottom-left-radius : 3px;}.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}';e.importCssString(q,"ace_editor.css");var r=function(a,b){var c=this;this.container=a||e.createElement("div"),this.$keepTextAreaAtCursor=!g.isOldIE,e.addCssClass(this.container,"ace_editor"),this.setTheme(b),this.$gutter=e.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.scroller=e.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=e.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new h(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new i(this.content);var d=this.$textLayer=new j(this.content);this.canvas=d.element,this.$markerFront=new i(this.content),this.$cursorLayer=new k(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new m(this.container,this),this.scrollBarH=new l(this.container,this),this.scrollBarV.addEventListener("scroll",function(a){c.$scrollAnimation||c.session.setScrollTop(a.data-c.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(a){c.$scrollAnimation||c.session.setScrollLeft(a.data-c.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new o(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.addEventListener("changeCharacterSize",function(a){c.updateCharacterSize(),c.onResize(!0,c.gutterWidth,c.$size.width,c.$size.height),c._signal("changeCharacterSize",a)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$loop=new n(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),f.resetOptions(this),f._emit("renderer",this)};(function(){this.CHANGE_CURSOR=1,this.CHANGE_MARKER=2,this.CHANGE_GUTTER=4,this.CHANGE_SCROLL=8,this.CHANGE_LINES=16,this.CHANGE_TEXT=32,this.CHANGE_SIZE=64,this.CHANGE_MARKER_BACK=128,this.CHANGE_MARKER_FRONT=256,this.CHANGE_FULL=512,this.CHANGE_H_SCROLL=1024,d.implement(this,p),this.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin()},this.setSession=function(a){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=a,a&&this.scrollMargin.top&&a.getScrollTop()<=0&&a.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(a),this.$markerBack.setSession(a),this.$markerFront.setSession(a),this.$gutterLayer.setSession(a),this.$textLayer.setSession(a),a&&(this.$loop.schedule(this.CHANGE_FULL),
this.session.$setFontMetrics(this.$fontMetrics),this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},this.updateLines=function(a,b,c){if(void 0===b&&(b=1/0),this.$changedLines?(this.$changedLines.firstRow>a&&(this.$changedLines.firstRow=a),this.$changedLines.lastRow<b&&(this.$changedLines.lastRow=b)):this.$changedLines={firstRow:a,lastRow:b},this.$changedLines.lastRow<this.layerConfig.firstRow){if(!c)return;this.$changedLines.lastRow=this.layerConfig.lastRow}this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},this.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar()},this.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},this.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},this.updateFull=function(a){a?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},this.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},this.$changes=0,this.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},this.onResize=function(a,b,c,d){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=a?1:0;var e=this.container;d||(d=e.clientHeight||e.scrollHeight),c||(c=e.clientWidth||e.scrollWidth);var f=this.$updateCachedSize(a,b,c,d);return this.$size.scrollerHeight&&(c||d)?(a&&(this.$gutterLayer.$padding=null),a?this.$renderChanges(f|this.$changes,!0):this.$loop.schedule(f|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarV.scrollLeft=this.scrollBarV.scrollTop=null,void 0):this.resizing=0}},this.$updateCachedSize=function(a,b,c,d){d-=this.$extraHeight||0;var e=0,f=this.$size,g={width:f.width,height:f.height,scrollerHeight:f.scrollerHeight,scrollerWidth:f.scrollerWidth};return d&&(a||f.height!=d)&&(f.height=d,e|=this.CHANGE_SIZE,f.scrollerHeight=f.height,this.$horizScroll&&(f.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",e|=this.CHANGE_SCROLL),c&&(a||f.width!=c)&&(e|=this.CHANGE_SIZE,f.width=c,null==b&&(b=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=b,this.scrollBarH.element.style.left=this.scroller.style.left=b+"px",f.scrollerWidth=Math.max(0,c-b-this.scrollBarV.getWidth()),this.scrollBarH.element.style.right=this.scroller.style.right=this.scrollBarV.getWidth()+"px",this.scroller.style.bottom=this.scrollBarH.getHeight()+"px",(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||a)&&(e|=this.CHANGE_FULL)),f.$dirty=!c||!d,e&&this._signal("resize",g),e},this.onGutterResize=function(){var a=this.$showGutter?this.$gutter.offsetWidth:0;a!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,a,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):(this.$computeLayerConfig(),this.$loop.schedule(this.CHANGE_MARKER))},this.adjustWrapLimit=function(){var a=this.$size.scrollerWidth-2*this.$padding,b=Math.floor(a/this.characterWidth);return this.session.adjustWrapLimit(b,this.$showPrintMargin&&this.$printMarginColumn)},this.setAnimatedScroll=function(a){this.setOption("animatedScroll",a)},this.getAnimatedScroll=function(){return this.$animatedScroll},this.setShowInvisibles=function(a){this.setOption("showInvisibles",a)},this.getShowInvisibles=function(){return this.getOption("showInvisibles")},this.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},this.setDisplayIndentGuides=function(a){this.setOption("displayIndentGuides",a)},this.setShowPrintMargin=function(a){this.setOption("showPrintMargin",a)},this.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},this.setPrintMarginColumn=function(a){this.setOption("printMarginColumn",a)},this.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},this.getShowGutter=function(){return this.getOption("showGutter")},this.setShowGutter=function(a){return this.setOption("showGutter",a)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.setFadeFoldWidgets=function(a){this.setOption("fadeFoldWidgets",a)},this.setHighlightGutterLine=function(a){this.setOption("highlightGutterLine",a)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.$updateGutterLineHighlight=function(){var a=this.$cursorLayer.$pixelPos,b=this.layerConfig.lineHeight;if(this.session.getUseWrapMode()){var c=this.session.selection.getCursor();c.column=0,a=this.$cursorLayer.getPixelPosition(c,!0),b*=this.session.getRowLength(c.row)}this.$gutterLineHighlight.style.top=a.top-this.layerConfig.offset+"px",this.$gutterLineHighlight.style.height=b+"px"},this.$updatePrintMargin=function(){if(this.$showPrintMargin||this.$printMarginEl){if(!this.$printMarginEl){var a=e.createElement("div");a.className="ace_layer ace_print-margin-layer",this.$printMarginEl=e.createElement("div"),this.$printMarginEl.className="ace_print-margin",a.appendChild(this.$printMarginEl),this.content.insertBefore(a,this.content.firstChild)}var b=this.$printMarginEl.style;b.left=this.characterWidth*this.$printMarginColumn+this.$padding+"px",b.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&-1==this.session.$wrap&&this.adjustWrapLimit()}},this.getContainerElement=function(){return this.container},this.getMouseEventTarget=function(){return this.scroller},this.getTextAreaContainer=function(){return this.container},this.$moveTextAreaToCursor=function(){if(this.$keepTextAreaAtCursor){var a=this.layerConfig,b=this.$cursorLayer.$pixelPos.top,c=this.$cursorLayer.$pixelPos.left;b-=a.offset;var d=this.textarea.style,e=this.lineHeight;if(0>b||b>a.height-e)return void(d.top=d.left="0");var f=this.characterWidth;if(this.$composition){var g=this.textarea.value.replace(/^\x01+/,"");f*=this.session.$getStringScreenWidth(g)[0]+2,e+=2}c-=this.scrollLeft,c>this.$size.scrollerWidth-f&&(c=this.$size.scrollerWidth-f),c+=this.gutterWidth,d.height=e+"px",d.width=f+"px",d.left=Math.min(c,this.$size.scrollerWidth-f)+"px",d.top=Math.min(b,this.$size.height-e)+"px"}},this.getFirstVisibleRow=function(){return this.layerConfig.firstRow},this.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(0===this.layerConfig.offset?0:1)},this.getLastFullyVisibleRow=function(){var a=this.layerConfig,b=a.lastRow,c=this.session.documentToScreenRow(b,0)*a.lineHeight;return c-this.session.getScrollTop()>a.height-a.lineHeight?b-1:b},this.getLastVisibleRow=function(){return this.layerConfig.lastRow},this.$padding=null,this.setPadding=function(a){this.$padding=a,this.$textLayer.setPadding(a),this.$cursorLayer.setPadding(a),this.$markerFront.setPadding(a),this.$markerBack.setPadding(a),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},this.setScrollMargin=function(a,b,c,d){var e=this.scrollMargin;e.top=0|a,e.bottom=0|b,e.right=0|d,e.left=0|c,e.v=e.top+e.bottom,e.h=e.left+e.right,e.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-e.top),this.updateFull()},this.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},this.setHScrollBarAlwaysVisible=function(a){this.setOption("hScrollBarAlwaysVisible",a)},this.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},this.setVScrollBarAlwaysVisible=function(a){this.setOption("vScrollBarAlwaysVisible",a)},this.$updateScrollBarV=function(){var a=this.layerConfig.maxHeight,b=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(a-=(b-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>a-b&&(a=this.scrollTop+b,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(a+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},this.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},this.$frozen=!1,this.freeze=function(){this.$frozen=!0},this.unfreeze=function(){this.$frozen=!1},this.$renderChanges=function(a,b){if(this.$changes&&(a|=this.$changes,this.$changes=0),!this.session||!this.container.offsetWidth||this.$frozen||!a&&!b)return void(this.$changes|=a);if(this.$size.$dirty)return this.$changes|=a,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender");var c=this.layerConfig;if(a&this.CHANGE_FULL||a&this.CHANGE_SIZE||a&this.CHANGE_TEXT||a&this.CHANGE_LINES||a&this.CHANGE_SCROLL||a&this.CHANGE_H_SCROLL){if(a|=this.$computeLayerConfig(),c.firstRow!=this.layerConfig.firstRow&&c.firstRowScreen==this.layerConfig.firstRowScreen){var d=this.scrollTop+(c.firstRow-this.layerConfig.firstRow)*this.lineHeight;d>0&&(this.scrollTop=d,a|=this.CHANGE_SCROLL,a|=this.$computeLayerConfig())}c=this.layerConfig,this.$updateScrollBarV(),a&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),this.$gutterLayer.element.style.marginTop=-c.offset+"px",this.content.style.marginTop=-c.offset+"px",this.content.style.width=c.width+2*this.$padding+"px",this.content.style.height=c.minHeight+"px"}return a&this.CHANGE_H_SCROLL&&(this.content.style.marginLeft=-this.scrollLeft+"px",this.scroller.className=this.scrollLeft<=0?"ace_scroller":"ace_scroller ace_scroll-left"),a&this.CHANGE_FULL?(this.$textLayer.update(c),this.$showGutter&&this.$gutterLayer.update(c),this.$markerBack.update(c),this.$markerFront.update(c),this.$cursorLayer.update(c),this.$moveTextAreaToCursor(),this.$highlightGutterLine&&this.$updateGutterLineHighlight(),this._signal("afterRender"),void 0):a&this.CHANGE_SCROLL?(a&this.CHANGE_TEXT||a&this.CHANGE_LINES?this.$textLayer.update(c):this.$textLayer.scrollLines(c),this.$showGutter&&this.$gutterLayer.update(c),this.$markerBack.update(c),this.$markerFront.update(c),this.$cursorLayer.update(c),this.$highlightGutterLine&&this.$updateGutterLineHighlight(),this.$moveTextAreaToCursor(),this._signal("afterRender"),void 0):(a&this.CHANGE_TEXT?(this.$textLayer.update(c),this.$showGutter&&this.$gutterLayer.update(c)):a&this.CHANGE_LINES?(this.$updateLines()||a&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(c):(a&this.CHANGE_TEXT||a&this.CHANGE_GUTTER)&&this.$showGutter&&this.$gutterLayer.update(c),a&this.CHANGE_CURSOR&&(this.$cursorLayer.update(c),this.$moveTextAreaToCursor(),this.$highlightGutterLine&&this.$updateGutterLineHighlight()),a&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(c),a&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(c),this._signal("afterRender"),void 0)},this.$autosize=function(){var a=this.session.getScreenLength()*this.lineHeight,b=this.$maxLines*this.lineHeight,c=Math.max((this.$minLines||1)*this.lineHeight,Math.min(b,a))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(c+=this.scrollBarH.getHeight());var d=a>b;if(c!=this.desiredHeight||this.$size.height!=this.desiredHeight||d!=this.$vScroll){d!=this.$vScroll&&(this.$vScroll=d,this.scrollBarV.setVisible(d));var e=this.container.clientWidth;this.container.style.height=c+"px",this.$updateCachedSize(!0,this.$gutterWidth,e,c),this.desiredHeight=c,this._signal("autosize")}},this.$computeLayerConfig=function(){var a=this.session,b=this.$size,c=b.height<=2*this.lineHeight,d=this.session.getScreenLength(),e=d*this.lineHeight,f=this.$getLongestLine(),g=!c&&(this.$hScrollBarAlwaysVisible||b.scrollerWidth-f-2*this.$padding<0),h=this.$horizScroll!==g;h&&(this.$horizScroll=g,this.scrollBarH.setVisible(g));var i=this.$vScroll;this.$maxLines&&this.lineHeight>1&&this.$autosize();var j=this.scrollTop%this.lineHeight,k=b.scrollerHeight+this.lineHeight,l=!this.$maxLines&&this.$scrollPastEnd?(b.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;e+=l;var m=this.scrollMargin;this.session.setScrollTop(Math.max(-m.top,Math.min(this.scrollTop,e-b.scrollerHeight+m.bottom))),this.session.setScrollLeft(Math.max(-m.left,Math.min(this.scrollLeft,f+2*this.$padding-b.scrollerWidth+m.right)));var n=!c&&(this.$vScrollBarAlwaysVisible||b.scrollerHeight-e+l<0||this.scrollTop>m.top),o=i!==n;o&&(this.$vScroll=n,this.scrollBarV.setVisible(n));var p,q,r=Math.ceil(k/this.lineHeight)-1,s=Math.max(0,Math.round((this.scrollTop-j)/this.lineHeight)),t=s+r,u=this.lineHeight;s=a.screenToDocumentRow(s,0);var v=a.getFoldLine(s);v&&(s=v.start.row),p=a.documentToScreenRow(s,0),q=a.getRowLength(s)*u,t=Math.min(a.screenToDocumentRow(t,0),a.getLength()-1),k=b.scrollerHeight+a.getRowLength(t)*u+q,j=this.scrollTop-p*u;var w=0;return this.layerConfig.width!=f&&(w=this.CHANGE_H_SCROLL),(h||o)&&(w=this.$updateCachedSize(!0,this.gutterWidth,b.width,b.height),this._signal("scrollbarVisibilityChanged"),o&&(f=this.$getLongestLine())),this.layerConfig={width:f,padding:this.$padding,firstRow:s,firstRowScreen:p,lastRow:t,lineHeight:u,characterWidth:this.characterWidth,minHeight:k,maxHeight:e,offset:j,gutterOffset:Math.max(0,Math.ceil((j+b.height-b.scrollerHeight)/u)),height:this.$size.scrollerHeight},w},this.$updateLines=function(){var a=this.$changedLines.firstRow,b=this.$changedLines.lastRow;this.$changedLines=null;var c=this.layerConfig;if(!(a>c.lastRow+1||b<c.firstRow))return b===1/0?(this.$showGutter&&this.$gutterLayer.update(c),void this.$textLayer.update(c)):(this.$textLayer.updateLines(c,a,b),!0)},this.$getLongestLine=function(){var a=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(a+=1),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(a*this.characterWidth))},this.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},this.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},this.addGutterDecoration=function(a,b){this.$gutterLayer.addGutterDecoration(a,b)},this.removeGutterDecoration=function(a,b){this.$gutterLayer.removeGutterDecoration(a,b)},this.updateBreakpoints=function(a){this.$loop.schedule(this.CHANGE_GUTTER)},this.setAnnotations=function(a){this.$gutterLayer.setAnnotations(a),this.$loop.schedule(this.CHANGE_GUTTER)},this.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},this.hideCursor=function(){this.$cursorLayer.hideCursor()},this.showCursor=function(){this.$cursorLayer.showCursor()},this.scrollSelectionIntoView=function(a,b,c){this.scrollCursorIntoView(a,c),this.scrollCursorIntoView(b,c)},this.scrollCursorIntoView=function(a,b,c){if(0!==this.$size.scrollerHeight){var d=this.$cursorLayer.getPixelPosition(a),e=d.left,f=d.top,g=c&&c.top||0,h=c&&c.bottom||0,i=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;i+g>f?(b&&i+g>f+this.lineHeight&&(f-=b*this.$size.scrollerHeight),0===f&&(f=-this.scrollMargin.top),this.session.setScrollTop(f)):i+this.$size.scrollerHeight-h<f+this.lineHeight&&(b&&i+this.$size.scrollerHeight-h<f-this.lineHeight&&(f+=b*this.$size.scrollerHeight),this.session.setScrollTop(f+this.lineHeight-this.$size.scrollerHeight));var j=this.scrollLeft;j>e?(e<this.$padding+2*this.layerConfig.characterWidth&&(e=-this.scrollMargin.left),this.session.setScrollLeft(e)):j+this.$size.scrollerWidth<e+this.characterWidth?this.session.setScrollLeft(Math.round(e+this.characterWidth-this.$size.scrollerWidth)):j<=this.$padding&&e-j<this.characterWidth&&this.session.setScrollLeft(0)}},this.getScrollTop=function(){return this.session.getScrollTop()},this.getScrollLeft=function(){return this.session.getScrollLeft()},this.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},this.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},this.scrollToRow=function(a){this.session.setScrollTop(a*this.lineHeight)},this.alignCursor=function(a,b){"number"==typeof a&&(a={row:a,column:0});var c=this.$cursorLayer.getPixelPosition(a),d=this.$size.scrollerHeight-this.lineHeight,e=c.top-d*(b||0);return this.session.setScrollTop(e),e},this.STEPS=8,this.$calcSteps=function(a,b){var c=0,d=this.STEPS,e=[],f=function(a,b,c){return c*(Math.pow(a-1,3)+1)+b};for(c=0;d>c;++c)e.push(f(c/this.STEPS,a,b-a));return e},this.scrollToLine=function(a,b,c,d){var e=this.$cursorLayer.getPixelPosition({row:a,column:0}),f=e.top;b&&(f-=this.$size.scrollerHeight/2);var g=this.scrollTop;this.session.setScrollTop(f),c!==!1&&this.animateScrolling(g,d)},this.animateScrolling=function(a,b){var c=this.scrollTop;if(this.$animatedScroll){var d=this;if(a!=c){if(this.$scrollAnimation){var e=this.$scrollAnimation.steps;if(e.length&&(a=e[0],a==c))return}var f=d.$calcSteps(a,c);this.$scrollAnimation={from:a,to:c,steps:f},clearInterval(this.$timer),d.session.setScrollTop(f.shift()),d.session.$scrollTop=c,this.$timer=setInterval(function(){f.length?(d.session.setScrollTop(f.shift()),d.session.$scrollTop=c):null!=c?(d.session.$scrollTop=-1,d.session.setScrollTop(c),c=null):(d.$timer=clearInterval(d.$timer),d.$scrollAnimation=null,b&&b())},10)}}},this.scrollToY=function(a){this.scrollTop!==a&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=a)},this.scrollToX=function(a){this.scrollLeft!==a&&(this.scrollLeft=a),this.$loop.schedule(this.CHANGE_H_SCROLL)},this.scrollTo=function(a,b){this.session.setScrollTop(b),this.session.setScrollLeft(b)},this.scrollBy=function(a,b){b&&this.session.setScrollTop(this.session.getScrollTop()+b),a&&this.session.setScrollLeft(this.session.getScrollLeft()+a)},this.isScrollableBy=function(a,b){return 0>b&&this.session.getScrollTop()>=1-this.scrollMargin.top?!0:b>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom?!0:0>a&&this.session.getScrollLeft()>=1-this.scrollMargin.left?!0:a>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right?!0:void 0},this.pixelToScreenCoordinates=function(a,b){var c=this.scroller.getBoundingClientRect(),d=(a+this.scrollLeft-c.left-this.$padding)/this.characterWidth,e=Math.floor((b+this.scrollTop-c.top)/this.lineHeight),f=Math.round(d);return{row:e,column:f,side:d-f>0?1:-1}},this.screenToTextCoordinates=function(a,b){var c=this.scroller.getBoundingClientRect(),d=Math.round((a+this.scrollLeft-c.left-this.$padding)/this.characterWidth),e=(b+this.scrollTop-c.top)/this.lineHeight;return this.session.screenToDocumentPosition(e,Math.max(d,0))},this.textToScreenCoordinates=function(a,b){var c=this.scroller.getBoundingClientRect(),d=this.session.documentToScreenPosition(a,b),e=this.$padding+Math.round(d.column*this.characterWidth),f=d.row*this.lineHeight;return{pageX:c.left+e-this.scrollLeft,pageY:c.top+f-this.scrollTop}},this.visualizeFocus=function(){e.addCssClass(this.container,"ace_focus")},this.visualizeBlur=function(){e.removeCssClass(this.container,"ace_focus")},this.showComposition=function(a){this.$composition||(this.$composition={keepTextAreaAtCursor:this.$keepTextAreaAtCursor,cssText:this.textarea.style.cssText}),this.$keepTextAreaAtCursor=!0,e.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor()},this.setCompositionText=function(a){this.$moveTextAreaToCursor()},this.hideComposition=function(){this.$composition&&(e.removeCssClass(this.textarea,"ace_composition"),this.$keepTextAreaAtCursor=this.$composition.keepTextAreaAtCursor,this.textarea.style.cssText=this.$composition.cssText,this.$composition=null)},this.setTheme=function(a,b){function c(c){if(d.$themeId!=a)return b&&b();if(c.cssClass){e.importCssString(c.cssText,c.cssClass,d.container.ownerDocument),d.theme&&e.removeCssClass(d.container,d.theme.cssClass);var f="padding"in c?c.padding:"padding"in(d.theme||{})?4:d.$padding;d.$padding&&f!=d.$padding&&d.setPadding(f),d.$theme=c.cssClass,d.theme=c,e.addCssClass(d.container,c.cssClass),e.setCssClass(d.container,"ace_dark",c.isDark),d.$size&&(d.$size.width=0,d.$updateSizeAsync()),d._dispatchEvent("themeLoaded",{theme:c}),b&&b()}}var d=this;if(this.$themeId=a,d._dispatchEvent("themeChange",{theme:a}),a&&"string"!=typeof a)c(a);else{var g=a||this.$options.theme.initialValue;f.loadModule(["theme",g],c)}},this.getTheme=function(){return this.$themeId},this.setStyle=function(a,b){e.setCssClass(this.container,a,b!==!1)},this.unsetStyle=function(a){e.removeCssClass(this.container,a)},this.setCursorStyle=function(a){this.scroller.style.cursor!=a&&(this.scroller.style.cursor=a)},this.setMouseCursor=function(a){this.scroller.style.cursor=a},this.destroy=function(){this.$textLayer.destroy(),this.$cursorLayer.destroy()}}).call(r.prototype),f.defineOptions(r.prototype,"renderer",{animatedScroll:{initialValue:!1},showInvisibles:{set:function(a){this.$textLayer.setShowInvisibles(a)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(a){"number"==typeof a&&(this.$printMarginColumn=a),this.$showPrintMargin=!!a,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(a){this.$gutter.style.display=a?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},fadeFoldWidgets:{set:function(a){e.setCssClass(this.$gutter,"ace_fade-fold-widgets",a)},initialValue:!1},showFoldWidgets:{set:function(a){this.$gutterLayer.setShowFoldWidgets(a)},initialValue:!0},showLineNumbers:{set:function(a){this.$gutterLayer.setShowLineNumbers(a),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(a){this.$textLayer.setDisplayIndentGuides(a)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightGutterLine:{set:function(a){return this.$gutterLineHighlight?(this.$gutterLineHighlight.style.display=a?"":"none",void(this.$cursorLayer.$pixelPos&&this.$updateGutterLineHighlight())):(this.$gutterLineHighlight=e.createElement("div"),this.$gutterLineHighlight.className="ace_gutter-active-line",this.$gutter.appendChild(this.$gutterLineHighlight),void 0)},initialValue:!1,value:!0},hScrollBarAlwaysVisible:{set:function(a){(!this.$hScrollBarAlwaysVisible||!this.$horizScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(a){(!this.$vScrollBarAlwaysVisible||!this.$vScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(a){"number"==typeof a&&(a+="px"),this.container.style.fontSize=a,this.updateFontSize()},initialValue:12},fontFamily:{set:function(a){this.container.style.fontFamily=a,this.updateFontSize()}},maxLines:{set:function(a){this.updateFull()}},minLines:{set:function(a){this.updateFull()}},scrollPastEnd:{set:function(a){a=+a||0,this.$scrollPastEnd!=a&&(this.$scrollPastEnd=a,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(a){this.$gutterLayer.$fixedWidth=!!a,this.$loop.schedule(this.CHANGE_GUTTER)}},theme:{set:function(a){this.setTheme(a)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0}}),b.VirtualRenderer=r}),ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],function(a,b,c){"use strict";var d=a("../lib/oop"),e=a("../lib/net"),f=a("../lib/event_emitter").EventEmitter,g=a("../config"),h=function(b,c,d,e){if(this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),a.nameToUrl&&!a.toUrl&&(a.toUrl=a.nameToUrl),g.get("packaged")||!a.toUrl)e=e||g.moduleUrl(c,"worker");else{var f=this.$normalizePath;e=e||f(a.toUrl("ace/worker/worker.js",null,"_"));var h={};b.forEach(function(b){h[b]=f(a.toUrl(b,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}try{this.$worker=new Worker(e)}catch(i){if(!(i instanceof window.DOMException))throw i;var j=this.$workerBlob(e),k=window.URL||window.webkitURL,l=k.createObjectURL(j);this.$worker=new Worker(l),k.revokeObjectURL(l)}this.$worker.postMessage({init:!0,tlns:h,module:c,classname:d}),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){d.implement(this,f),this.onMessage=function(a){var b=a.data;switch(b.type){case"event":this._signal(b.name,{data:b.data});break;case"call":var c=this.callbacks[b.id];c&&(c(b.data),delete this.callbacks[b.id]);break;case"error":this.reportError(b.data);break;case"log":window.console&&console.log&&console.log.apply(console,b.data)}},this.reportError=function(a){window.console&&console.error&&console.error(a)},this.$normalizePath=function(a){return e.qualifyURL(a)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(a,b){this.$worker.postMessage({command:a,args:b})},this.call=function(a,b,c){if(c){var d=this.callbackId++;this.callbacks[d]=c,b.push(d)}this.send(a,b)},this.emit=function(a,b){try{this.$worker.postMessage({event:a,data:{data:b.data}})}catch(c){console.error(c.stack)}},this.attachToDocument=function(a){this.$doc&&this.terminate(),this.$doc=a,this.call("setValue",[a.getValue()]),a.on("change",this.changeListener)},this.changeListener=function(a){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),"insert"==a.action?this.deltaQueue.push(a.start,a.lines):this.deltaQueue.push(a.start,a.end)},this.$sendDeltaQueue=function(){var a=this.deltaQueue;a&&(this.deltaQueue=null,a.length>50&&a.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:a}))},this.$workerBlob=function(a){var b="importScripts('"+e.qualifyURL(a)+"');";try{return new Blob([b],{type:"application/javascript"})}catch(c){var d=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,f=new d;return f.append(b),f.getBlob("application/javascript")}}}).call(h.prototype);var i=function(a,b,c){this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.callbackId=1,this.callbacks={},this.messageBuffer=[];var d=null,e=!1,h=Object.create(f),i=this;this.$worker={},this.$worker.terminate=function(){},this.$worker.postMessage=function(a){i.messageBuffer.push(a),d&&(e?setTimeout(j):j())},this.setEmitSync=function(a){e=a};var j=function(){var a=i.messageBuffer.shift();a.command?d[a.command].apply(d,a.args):a.event&&h._signal(a.event,a.data)};h.postMessage=function(a){i.onMessage({data:a})},h.callback=function(a,b){this.postMessage({type:"call",id:b,data:a})},h.emit=function(a,b){this.postMessage({type:"event",name:a,data:b})},g.loadModule(["worker",b],function(a){for(d=new a[c](h);i.messageBuffer.length;)j()})};i.prototype=h.prototype,b.UIWorkerClient=i,b.WorkerClient=h}),ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(a,b,c){"use strict";var d=a("./range").Range,e=a("./lib/event_emitter").EventEmitter,f=a("./lib/oop"),g=function(a,b,c,d,e,f){var g=this;this.length=b,this.session=a,this.doc=a.getDocument(),this.mainClass=e,this.othersClass=f,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate),this.$others=d,this.$onCursorChange=function(){setTimeout(function(){g.onCursorChange()})},this.$pos=c;var h=a.getUndoManager().$undoStack||a.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=h.length,this.setup(),a.selection.on("changeCursor",this.$onCursorChange)};(function(){f.implement(this,e),this.setup=function(){var a=this,b=this.doc,c=this.session;this.selectionBefore=c.selection.toJSON(),c.selection.inMultiSelectMode&&c.selection.toSingleRange(),this.pos=b.createAnchor(this.$pos.row,this.$pos.column);var e=this.pos;e.$insertRight=!0,e.detach(),e.markerId=c.addMarker(new d(e.row,e.column,e.row,e.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach(function(c){var d=b.createAnchor(c.row,c.column);d.$insertRight=!0,d.detach(),a.others.push(d)}),c.setUndoSelect(!1)},this.showOtherMarkers=function(){if(!this.othersActive){var a=this.session,b=this;this.othersActive=!0,this.others.forEach(function(c){c.markerId=a.addMarker(new d(c.row,c.column,c.row,c.column+b.length),b.othersClass,null,!1)})}},this.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var a=0;a<this.others.length;a++)this.session.removeMarker(this.others[a].markerId)}},this.onUpdate=function(a){if(this.$updating)return this.updateAnchors(a);var b=a;if(b.start.row===b.end.row&&b.start.row===this.pos.row){this.$updating=!0;var c="insert"===a.action?b.end.column-b.start.column:b.start.column-b.end.column,e=b.start.column>=this.pos.column&&b.start.column<=this.pos.column+this.length+1,f=b.start.column-this.pos.column;if(this.updateAnchors(a),e&&(this.length+=c),e&&!this.session.$fromUndo)if("insert"===a.action)for(var g=this.others.length-1;g>=0;g--){var h=this.others[g],i={row:h.row,column:h.column+f};this.doc.insertMergedLines(i,a.lines)}else if("remove"===a.action)for(var g=this.others.length-1;g>=0;g--){var h=this.others[g],i={row:h.row,column:h.column+f};this.doc.remove(new d(i.row,i.column,i.row,i.column-c))}this.$updating=!1,this.updateMarkers()}},this.updateAnchors=function(a){this.pos.onChange(a);for(var b=this.others.length;b--;)this.others[b].onChange(a);this.updateMarkers()},this.updateMarkers=function(){if(!this.$updating){var a=this,b=this.session,c=function(c,e){b.removeMarker(c.markerId),c.markerId=b.addMarker(new d(c.row,c.column,c.row,c.column+a.length),e,null,!1)};c(this.pos,this.mainClass);for(var e=this.others.length;e--;)c(this.others[e],this.othersClass)}},this.onCursorChange=function(a){if(!this.$updating&&this.session){var b=this.session.selection.getCursor();b.row===this.pos.row&&b.column>=this.pos.column&&b.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",a)):(this.hideOtherMarkers(),this._emit("cursorLeave",a))}},this.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.removeEventListener("change",this.$onUpdate),this.session.selection.removeEventListener("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},this.cancel=function(){if(-1!==this.$undoStackDepth){for(var a=this.session.getUndoManager(),b=(a.$undoStack||a.$undostack).length-this.$undoStackDepth,c=0;b>c;c++)a.undo(!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}}}).call(g.prototype),b.PlaceHolder=g}),ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(a,b,c){function d(a,b){return a.row==b.row&&a.column==b.column}function e(a){var b=a.domEvent,c=b.altKey,e=b.shiftKey,h=b.ctrlKey,i=a.getAccelKey(),j=a.getButton();if(h&&g.isMac&&(j=b.button),a.editor.inMultiSelectMode&&2==j)return void a.editor.textInput.onContextMenu(a.domEvent);if(!h&&!c&&!i)return void(0===j&&a.editor.inMultiSelectMode&&a.editor.exitMultiSelectMode());if(0===j){var k,l=a.editor,m=l.selection,n=l.inMultiSelectMode,o=a.getDocumentPosition(),p=m.getCursor(),q=a.inSelection()||m.isEmpty()&&d(o,p),r=a.x,s=a.y,t=function(a){r=a.clientX,s=a.clientY},u=l.session,v=l.renderer.pixelToScreenCoordinates(r,s),w=v;if(l.$mouseHandler.$enableJumpToDef)h&&c||i&&c?k=e?"block":"add":c&&l.$blockSelectEnabled&&(k="block");else if(i&&!c){if(k="add",!n&&e)return}else c&&l.$blockSelectEnabled&&(k="block");if(k&&g.isMac&&b.ctrlKey&&l.$mouseHandler.cancelContextMenu(),"add"==k){if(!n&&q)return;if(!n){var x=m.toOrientedRange();l.addSelectionMarker(x)}var y=m.rangeList.rangeAtPoint(o);l.$blockScrolling++,l.inVirtualSelectionMode=!0,e&&(y=null,x=m.ranges[0]||x,
l.removeSelectionMarker(x)),l.once("mouseup",function(){var a=m.toOrientedRange();y&&a.isEmpty()&&d(y.cursor,a.cursor)?m.substractPoint(a.cursor):(e?m.substractPoint(x.cursor):x&&(l.removeSelectionMarker(x),m.addRange(x)),m.addRange(a)),l.$blockScrolling--,l.inVirtualSelectionMode=!1})}else if("block"==k){a.stop(),l.inVirtualSelectionMode=!0;var z,A=[],B=function(){var a=l.renderer.pixelToScreenCoordinates(r,s),b=u.screenToDocumentPosition(a.row,a.column);d(w,a)&&d(b,m.lead)||(w=a,l.$blockScrolling++,l.selection.moveToPosition(b),l.renderer.scrollCursorIntoView(),l.removeSelectionMarkers(A),A=m.rectangularRangeBlock(w,v),l.$mouseHandler.$clickSelection&&1==A.length&&A[0].isEmpty()&&(A[0]=l.$mouseHandler.$clickSelection.clone()),A.forEach(l.addSelectionMarker,l),l.updateSelectionMarkers(),l.$blockScrolling--)};l.$blockScrolling++,n&&!i?m.toSingleRange():!n&&i&&(z=m.toOrientedRange(),l.addSelectionMarker(z)),e?v=u.documentToScreenPosition(m.lead):m.moveToPosition(o),l.$blockScrolling--,w={row:-1,column:-1};var C=function(a){clearInterval(E),l.removeSelectionMarkers(A),A.length||(A=[m.toOrientedRange()]),l.$blockScrolling++,z&&(l.removeSelectionMarker(z),m.toSingleRange(z));for(var b=0;b<A.length;b++)m.addRange(A[b]);l.inVirtualSelectionMode=!1,l.$mouseHandler.$clickSelection=null,l.$blockScrolling--},D=B;f.capture(l.container,t,C);var E=setInterval(function(){D()},20);return a.preventDefault()}}}var f=a("../lib/event"),g=a("../lib/useragent");b.onMouseDown=e}),ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(a,b,c){b.defaultCommands=[{name:"addCursorAbove",exec:function(a){a.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",exec:function(a){a.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",exec:function(a){a.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",exec:function(a){a.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",exec:function(a){a.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",exec:function(a){a.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",exec:function(a){a.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",exec:function(a){a.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"splitIntoLines",exec:function(a){a.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"alignCursors",exec:function(a){a.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",exec:function(a){a.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],b.multiSelectCommands=[{name:"singleSelection",bindKey:"esc",exec:function(a){a.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(a){return a&&a.inMultiSelectMode}}];var d=a("../keyboard/hash_handler").HashHandler;b.keyboardHandler=new d(b.multiSelectCommands)}),ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(a,b,c){function d(a,b,c){return p.$options.wrap=!0,p.$options.needle=b,p.$options.backwards=-1==c,p.find(a)}function e(a,b){return a.row==b.row&&a.column==b.column}function f(a){a.$multiselectOnSessionChange||(a.$onAddRange=a.$onAddRange.bind(a),a.$onRemoveRange=a.$onRemoveRange.bind(a),a.$onMultiSelect=a.$onMultiSelect.bind(a),a.$onSingleSelect=a.$onSingleSelect.bind(a),a.$multiselectOnSessionChange=b.onSessionChange.bind(a),a.$checkMultiselectChange=a.$checkMultiselectChange.bind(a),a.$multiselectOnSessionChange(a),a.on("changeSession",a.$multiselectOnSessionChange),a.on("mousedown",k),a.commands.addCommands(n.defaultCommands),g(a))}function g(a){function b(b){d&&(a.renderer.setMouseCursor(""),d=!1)}var c=a.textInput.getElement(),d=!1;l.addListener(c,"keydown",function(c){var e=18==c.keyCode&&!(c.ctrlKey||c.shiftKey||c.metaKey);a.$blockSelectEnabled&&e?d||(a.renderer.setMouseCursor("crosshair"),d=!0):d&&b()}),l.addListener(c,"keyup",b),l.addListener(c,"blur",b)}var h=a("./range_list").RangeList,i=a("./range").Range,j=a("./selection").Selection,k=a("./mouse/multi_select_handler").onMouseDown,l=a("./lib/event"),m=a("./lib/lang"),n=a("./commands/multi_select_commands");b.commands=n.defaultCommands.concat(n.multiSelectCommands);var o=a("./search").Search,p=new o,q=a("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(q.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(a,b){if(a){if(!this.inMultiSelectMode&&0===this.rangeCount){var c=this.toOrientedRange();if(this.rangeList.add(c),this.rangeList.add(a),2!=this.rangeList.ranges.length)return this.rangeList.removeAll(),b||this.fromOrientedRange(a);this.rangeList.removeAll(),this.rangeList.add(c),this.$onAddRange(c)}a.cursor||(a.cursor=a.end);var d=this.rangeList.add(a);return this.$onAddRange(a),d.length&&this.$onRemoveRange(d),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),b||this.fromOrientedRange(a)}},this.toSingleRange=function(a){a=a||this.ranges[0];var b=this.rangeList.removeAll();b.length&&this.$onRemoveRange(b),a&&this.fromOrientedRange(a)},this.substractPoint=function(a){var b=this.rangeList.substractPoint(a);return b?(this.$onRemoveRange(b),b[0]):void 0},this.mergeOverlappingRanges=function(){var a=this.rangeList.merge();a.length?this.$onRemoveRange(a):this.ranges[0]&&this.fromOrientedRange(this.ranges[0])},this.$onAddRange=function(a){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(a),this._signal("addRange",{range:a})},this.$onRemoveRange=function(a){if(this.rangeCount=this.rangeList.ranges.length,1==this.rangeCount&&this.inMultiSelectMode){var b=this.rangeList.ranges.pop();a.push(b),this.rangeCount=0}for(var c=a.length;c--;){var d=this.ranges.indexOf(a[c]);this.ranges.splice(d,1)}this._signal("removeRange",{ranges:a}),0===this.rangeCount&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),b=b||this.ranges[0],b&&!b.isEqual(this.getRange())&&this.fromOrientedRange(b)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new h,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){if(this.rangeCount>1){var a=this.rangeList.ranges,b=a[a.length-1],c=i.fromPoints(a[0].start,b.end);this.toSingleRange(),this.setSelectionRange(c,b.cursor==b.start)}else{var c=this.getRange(),d=this.isBackwards(),e=c.start.row,f=c.end.row;if(e==f){if(d)var g=c.end,h=c.start;else var g=c.start,h=c.end;return this.addRange(i.fromPoints(h,h)),void this.addRange(i.fromPoints(g,g))}var j=[],k=this.getLineRange(e,!0);k.start.column=c.start.column,j.push(k);for(var l=e+1;f>l;l++)j.push(this.getLineRange(l,!0));k=this.getLineRange(f,!0),k.end.column=c.end.column,j.push(k),j.forEach(this.addRange,this)}},this.toggleBlockSelection=function(){if(this.rangeCount>1){var a=this.rangeList.ranges,b=a[a.length-1],c=i.fromPoints(a[0].start,b.end);this.toSingleRange(),this.setSelectionRange(c,b.cursor==b.start)}else{var d=this.session.documentToScreenPosition(this.selectionLead),e=this.session.documentToScreenPosition(this.selectionAnchor),f=this.rectangularRangeBlock(d,e);f.forEach(this.addRange,this)}},this.rectangularRangeBlock=function(a,b,c){var d=[],f=a.column<b.column;if(f)var g=a.column,h=b.column;else var g=b.column,h=a.column;var j=a.row<b.row;if(j)var k=a.row,l=b.row;else var k=b.row,l=a.row;0>g&&(g=0),0>k&&(k=0),k==l&&(c=!0);for(var m=k;l>=m;m++){var n=i.fromPoints(this.session.screenToDocumentPosition(m,g),this.session.screenToDocumentPosition(m,h));if(n.isEmpty()){if(o&&e(n.end,o))break;var o=n.end}n.cursor=f?n.start:n.end,d.push(n)}if(j&&d.reverse(),!c){for(var p=d.length-1;d[p].isEmpty()&&p>0;)p--;if(p>0)for(var q=0;d[q].isEmpty();)q++;for(var r=p;r>=q;r--)d[r].isEmpty()&&d.splice(r,1)}return d}}.call(j.prototype);var r=a("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(a){a.cursor||(a.cursor=a.end);var b=this.getSelectionStyle();return a.marker=this.session.addMarker(a,"ace_selection",b),this.session.$selectionMarkers.push(a),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,a},this.removeSelectionMarker=function(a){if(a.marker){this.session.removeMarker(a.marker);var b=this.session.$selectionMarkers.indexOf(a);-1!=b&&this.session.$selectionMarkers.splice(b,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(a){for(var b=this.session.$selectionMarkers,c=a.length;c--;){var d=a[c];if(d.marker){this.session.removeMarker(d.marker);var e=b.indexOf(d);-1!=e&&b.splice(e,1)}}this.session.selectionMarkerCount=b.length},this.$onAddRange=function(a){this.addSelectionMarker(a.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(a){this.removeSelectionMarkers(a.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(a){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(n.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(a){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(n.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(a){var b=a.command,c=a.editor;if(c.multiSelect){if(b.multiSelectAction)"forEach"==b.multiSelectAction?d=c.forEachSelection(b,a.args):"forEachLine"==b.multiSelectAction?d=c.forEachSelection(b,a.args,!0):"single"==b.multiSelectAction?(c.exitMultiSelectMode(),d=b.exec(c,a.args||{})):d=b.multiSelectAction(c,a.args||{});else{var d=b.exec(c,a.args||{});c.multiSelect.addRange(c.multiSelect.toOrientedRange()),c.multiSelect.mergeOverlappingRanges()}return d}},this.forEachSelection=function(a,b,c){if(!this.inVirtualSelectionMode){var d,e=c&&c.keepOrder,f=1==c||c&&c.$byLines,g=this.session,h=this.selection,i=h.rangeList,k=(e?h:i).ranges;if(!k.length)return a.exec?a.exec(this,b||{}):a(this,b||{});var l=h._eventRegistry;h._eventRegistry={};var m=new j(g);this.inVirtualSelectionMode=!0;for(var n=k.length;n--;){if(f)for(;n>0&&k[n].start.row==k[n-1].end.row;)n--;m.fromOrientedRange(k[n]),m.index=n,this.selection=g.selection=m;var o=a.exec?a.exec(this,b||{}):a(this,b||{});!d&&void 0!==o&&(d=o),m.toOrientedRange(k[n])}m.detach(),this.selection=g.selection=h,this.inVirtualSelectionMode=!1,h._eventRegistry=l,h.mergeOverlappingRanges();var p=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),p&&p.from==p.to&&this.renderer.animateScrolling(p.from),d}},this.exitMultiSelectMode=function(){this.inMultiSelectMode&&!this.inVirtualSelectionMode&&this.multiSelect.toSingleRange()},this.getSelectedText=function(){var a="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var b=this.multiSelect.rangeList.ranges,c=[],d=0;d<b.length;d++)c.push(this.session.getTextRange(b[d]));var e=this.session.getDocument().getNewLineCharacter();a=c.join(e),a.length==(c.length-1)*e.length&&(a="")}else this.selection.isEmpty()||(a=this.session.getTextRange(this.getSelectionRange()));return a},this.$checkMultiselectChange=function(a,b){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var c=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&b==this.multiSelect.anchor)return;var d=b==this.multiSelect.anchor?c.cursor==c.start?c.end:c.start:c.cursor;(d.row!=b.row||this.session.$clipPositionToDocument(d.row,d.column).column!=b.column)&&this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange())}},this.findAll=function(a,b,c){if(b=b||{},b.needle=a||b.needle,void 0==b.needle){var d=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();b.needle=this.session.getTextRange(d)}this.$search.set(b);var e=this.$search.findAll(this.session);if(!e.length)return 0;this.$blockScrolling+=1;var f=this.multiSelect;c||f.toSingleRange(e[0]);for(var g=e.length;g--;)f.addRange(e[g],!0);return d&&f.rangeList.rangeAtPoint(d.start)&&f.addRange(d,!0),this.$blockScrolling-=1,e.length},this.selectMoreLines=function(a,b){var c=this.selection.toOrientedRange(),d=c.cursor==c.end,e=this.session.documentToScreenPosition(c.cursor);this.selection.$desiredColumn&&(e.column=this.selection.$desiredColumn);var f=this.session.screenToDocumentPosition(e.row+a,e.column);if(c.isEmpty())var g=f;else var h=this.session.documentToScreenPosition(d?c.end:c.start),g=this.session.screenToDocumentPosition(h.row+a,h.column);if(d){var j=i.fromPoints(f,g);j.cursor=j.start}else{var j=i.fromPoints(g,f);j.cursor=j.end}if(j.desiredColumn=e.column,this.selection.inMultiSelectMode){if(b)var k=c.cursor}else this.selection.addRange(c);this.selection.addRange(j),k&&this.selection.substractPoint(k)},this.transposeSelections=function(a){for(var b=this.session,c=b.multiSelect,d=c.ranges,e=d.length;e--;){var f=d[e];if(f.isEmpty()){var g=b.getWordRange(f.start.row,f.start.column);f.start.row=g.start.row,f.start.column=g.start.column,f.end.row=g.end.row,f.end.column=g.end.column}}c.mergeOverlappingRanges();for(var h=[],e=d.length;e--;){var f=d[e];h.unshift(b.getTextRange(f))}0>a?h.unshift(h.pop()):h.push(h.shift());for(var e=d.length;e--;){var f=d[e],g=f.clone();b.replace(f,h[e]),f.start.row=g.start.row,f.start.column=g.start.column}},this.selectMore=function(a,b,c){var e=this.session,f=e.multiSelect,g=f.toOrientedRange();if(!g.isEmpty()||(g=e.getWordRange(g.start.row,g.start.column),g.cursor=-1==a?g.start:g.end,this.multiSelect.addRange(g),!c)){var h=e.getTextRange(g),i=d(e,h,a);i&&(i.cursor=-1==a?i.start:i.end,this.$blockScrolling+=1,this.session.unfold(i),this.multiSelect.addRange(i),this.$blockScrolling-=1,this.renderer.scrollCursorIntoView(null,.5)),b&&this.multiSelect.substractPoint(g.cursor)}},this.alignCursors=function(){var a=this.session,b=a.multiSelect,c=b.ranges,d=-1,e=c.filter(function(a){return a.cursor.row==d?!0:void(d=a.cursor.row)});if(c.length&&e.length!=c.length-1){e.forEach(function(a){b.substractPoint(a.cursor)});var f=0,g=1/0,h=c.map(function(b){var c=b.cursor,d=a.getLine(c.row),e=d.substr(c.column).search(/\S/g);return-1==e&&(e=0),c.column>f&&(f=c.column),g>e&&(g=e),e});c.forEach(function(b,c){var d=b.cursor,e=f-d.column,j=h[c]-g;e>j?a.insert(d,m.stringRepeat(" ",e-j)):a.remove(new i(d.row,d.column,d.row,d.column-e+j)),b.start.column=b.end.column=f,b.start.row=b.end.row=d.row,b.cursor=b.end}),b.fromOrientedRange(c[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}else{var j=this.selection.getRange(),k=j.start.row,l=j.end.row,n=k==l;if(n){var o,p=this.session.getLength();do o=this.session.getLine(l);while(/[=:]/.test(o)&&++l<p);do o=this.session.getLine(k);while(/[=:]/.test(o)&&--k>0);0>k&&(k=0),l>=p&&(l=p-1)}var q=this.session.removeFullLines(k,l);q=this.$reAlignText(q,n),this.session.insert({row:k,column:0},q.join("\n")+"\n"),n||(j.start.column=0,j.end.column=q[q.length-1].length),this.selection.setRange(j)}},this.$reAlignText=function(a,b){function c(a){return m.stringRepeat(" ",a)}function d(a){return a[2]?c(g)+a[2]+c(h-a[2].length+i)+a[4].replace(/^([=:])\s+/,"$1 "):a[0]}function e(a){return a[2]?c(g+h-a[2].length)+a[2]+c(i," ")+a[4].replace(/^([=:])\s+/,"$1 "):a[0]}function f(a){return a[2]?c(g)+a[2]+c(i)+a[4].replace(/^([=:])\s+/,"$1 "):a[0]}var g,h,i,j=!0,k=!0;return a.map(function(a){var b=a.match(/(\s*)(.*?)(\s*)([=:].*)/);return b?null==g?(g=b[1].length,h=b[2].length,i=b[3].length,b):(g+h+i!=b[1].length+b[2].length+b[3].length&&(k=!1),g!=b[1].length&&(j=!1),g>b[1].length&&(g=b[1].length),h<b[2].length&&(h=b[2].length),i>b[3].length&&(i=b[3].length),b):[a]}).map(b?d:j?k?e:d:f)}}).call(r.prototype),b.onSessionChange=function(a){var b=a.session;b&&!b.multiSelect&&(b.$selectionMarkers=[],b.selection.$initRangeList(),b.multiSelect=b.selection),this.multiSelect=b&&b.multiSelect;var c=a.oldSession;c&&(c.multiSelect.off("addRange",this.$onAddRange),c.multiSelect.off("removeRange",this.$onRemoveRange),c.multiSelect.off("multiSelect",this.$onMultiSelect),c.multiSelect.off("singleSelect",this.$onSingleSelect),c.multiSelect.lead.off("change",this.$checkMultiselectChange),c.multiSelect.anchor.off("change",this.$checkMultiselectChange)),b&&(b.multiSelect.on("addRange",this.$onAddRange),b.multiSelect.on("removeRange",this.$onRemoveRange),b.multiSelect.on("multiSelect",this.$onMultiSelect),b.multiSelect.on("singleSelect",this.$onSingleSelect),b.multiSelect.lead.on("change",this.$checkMultiselectChange),b.multiSelect.anchor.on("change",this.$checkMultiselectChange)),b&&this.inMultiSelectMode!=b.selection.inMultiSelectMode&&(b.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())},b.MultiSelect=f,a("./config").defineOptions(r.prototype,"editor",{enableMultiselect:{set:function(a){f(this),a?(this.on("changeSession",this.$multiselectOnSessionChange),this.on("mousedown",k)):(this.off("changeSession",this.$multiselectOnSessionChange),this.off("mousedown",k))},value:!0},enableBlockSelect:{set:function(a){this.$blockSelectEnabled=a},value:!0}})}),ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(a,b,c){"use strict";var d=a("../../range").Range,e=b.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(a,b,c){var d=a.getLine(c);return this.foldingStartMarker.test(d)?"start":"markbeginend"==b&&this.foldingStopMarker&&this.foldingStopMarker.test(d)?"end":""},this.getFoldWidgetRange=function(a,b,c){return null},this.indentationBlock=function(a,b,c){var e=/\S/,f=a.getLine(b),g=f.search(e);if(-1!=g){for(var h=c||f.length,i=a.getLength(),j=b,k=b;++b<i;){var l=a.getLine(b).search(e);if(-1!=l){if(g>=l)break;k=b}}if(k>j){var m=a.getLine(k).length;return new d(j,h,k,m)}}},this.openingBracketBlock=function(a,b,c,e,f){var g={row:c,column:e+1},h=a.$findClosingBracket(b,g,f);if(h){var i=a.foldWidgets[h.row];return null==i&&(i=a.getFoldWidget(h.row)),"start"==i&&h.row>g.row&&(h.row--,h.column=a.getLine(h.row).length),d.fromPoints(g,h)}},this.closingBracketBlock=function(a,b,c,e,f){var g={row:c,column:e},h=a.$findOpeningBracket(b,g);if(h)return h.column++,g.column--,d.fromPoints(h,g)}}).call(e.prototype)}),ace.define("ace/theme/textmate",["require","exports","module","ace/lib/dom"],function(a,b,c){"use strict";b.isDark=!1,b.cssClass="ace-tm",b.cssText='.ace-tm .ace_gutter {background: #f0f0f0;color: #333;}.ace-tm .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-tm .ace_fold {background-color: #6B72E6;}.ace-tm {background-color: #FFFFFF;color: black;}.ace-tm .ace_cursor {color: black;}.ace-tm .ace_invisible {color: rgb(191, 191, 191);}.ace-tm .ace_storage,.ace-tm .ace_keyword {color: blue;}.ace-tm .ace_constant {color: rgb(197, 6, 11);}.ace-tm .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-tm .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-tm .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-tm .ace_invalid {background-color: rgba(255, 0, 0, 0.1);color: red;}.ace-tm .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-tm .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-tm .ace_support.ace_type,.ace-tm .ace_support.ace_class {color: rgb(109, 121, 222);}.ace-tm .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-tm .ace_string {color: rgb(3, 106, 7);}.ace-tm .ace_comment {color: rgb(76, 136, 107);}.ace-tm .ace_comment.ace_doc {color: rgb(0, 102, 255);}.ace-tm .ace_comment.ace_doc.ace_tag {color: rgb(128, 159, 191);}.ace-tm .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-tm .ace_variable {color: rgb(49, 132, 149);}.ace-tm .ace_xml-pe {color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-tm .ace_heading {color: rgb(12, 7, 255);}.ace-tm .ace_list {color:rgb(185, 6, 144);}.ace-tm .ace_meta.ace_tag {color:rgb(0, 22, 142);}.ace-tm .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-tm .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-tm.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;}.ace-tm .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_gutter-active-line {background-color : #dcdcdc;}.ace-tm .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}';var d=a("../lib/dom");d.importCssString(b.cssText,b.cssClass)}),ace.define("ace/line_widgets",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/range"],function(a,b,c){"use strict";function d(a){this.session=a,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}var e=(a("./lib/oop"),a("./lib/dom"));a("./range").Range;(function(){this.getRowLength=function(a){var b;return b=this.lineWidgets?this.lineWidgets[a]&&this.lineWidgets[a].rowCount||0:0,this.$useWrapMode&&this.$wrapData[a]?this.$wrapData[a].length+1+b:1+b},this.$getWidgetScreenLength=function(){var a=0;return this.lineWidgets.forEach(function(b){b&&b.rowCount&&!b.hidden&&(a+=b.rowCount)}),a},this.$onChangeEditor=function(a){this.attach(a.editor)},this.attach=function(a){a&&a.widgetManager&&a.widgetManager!=this&&a.widgetManager.detach(),this.editor!=a&&(this.detach(),this.editor=a,a&&(a.widgetManager=this,a.renderer.on("beforeRender",this.measureWidgets),a.renderer.on("afterRender",this.renderWidgets)))},this.detach=function(a){var b=this.editor;if(b){this.editor=null,b.widgetManager=null,b.renderer.off("beforeRender",this.measureWidgets),b.renderer.off("afterRender",this.renderWidgets);var c=this.session.lineWidgets;c&&c.forEach(function(a){a&&a.el&&a.el.parentNode&&(a._inDocument=!1,a.el.parentNode.removeChild(a.el))})}},this.updateOnFold=function(a,b){var c=b.lineWidgets;if(c&&a.action){for(var d=a.data,e=d.start.row,f=d.end.row,g="add"==a.action,h=e+1;f>h;h++)c[h]&&(c[h].hidden=g);c[f]&&(g?c[e]?c[f].hidden=g:c[e]=c[f]:(c[e]==c[f]&&(c[e]=void 0),c[f].hidden=g))}},this.updateOnChange=function(a){var b=this.session.lineWidgets;if(b){var c=a.start.row,d=a.end.row-c;if(0!==d)if("remove"==a.action){var e=b.splice(c+1,d);e.forEach(function(a){a&&this.removeLineWidget(a)},this),this.$updateRows()}else{var f=new Array(d);f.unshift(c,0),b.splice.apply(b,f),this.$updateRows()}}},this.$updateRows=function(){var a=this.session.lineWidgets;if(a){var b=!0;a.forEach(function(a,c){if(a)for(b=!1,a.row=c;a.$oldWidget;)a.$oldWidget.row=c,a=a.$oldWidget}),b&&(this.session.lineWidgets=null)}},this.addLineWidget=function(a){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var b=this.session.lineWidgets[a.row];b&&(a.$oldWidget=b,b.el&&b.el.parentNode&&(b.el.parentNode.removeChild(b.el),b._inDocument=!1)),this.session.lineWidgets[a.row]=a,a.session=this.session;var c=this.editor.renderer;a.html&&!a.el&&(a.el=e.createElement("div"),a.el.innerHTML=a.html),a.el&&(e.addCssClass(a.el,"ace_lineWidgetContainer"),a.el.style.position="absolute",a.el.style.zIndex=5,c.container.appendChild(a.el),a._inDocument=!0),a.coverGutter||(a.el.style.zIndex=3),a.pixelHeight||(a.pixelHeight=a.el.offsetHeight),null==a.rowCount&&(a.rowCount=a.pixelHeight/c.layerConfig.lineHeight);var d=this.session.getFoldAt(a.row,0);if(a.$fold=d,d){var f=this.session.lineWidgets;a.row!=d.end.row||f[d.start.row]?a.hidden=!0:f[d.start.row]=a}return this.session._emit("changeFold",{data:{start:{row:a.row}}}),this.$updateRows(),this.renderWidgets(null,c),this.onWidgetChanged(a),a},this.removeLineWidget=function(a){if(a._inDocument=!1,a.session=null,a.el&&a.el.parentNode&&a.el.parentNode.removeChild(a.el),a.editor&&a.editor.destroy)try{a.editor.destroy()}catch(b){}if(this.session.lineWidgets){var c=this.session.lineWidgets[a.row];if(c==a)this.session.lineWidgets[a.row]=a.$oldWidget,a.$oldWidget&&this.onWidgetChanged(a.$oldWidget);else for(;c;){if(c.$oldWidget==a){c.$oldWidget=a.$oldWidget;break}c=c.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:a.row}}}),this.$updateRows()},this.getWidgetsAtRow=function(a){for(var b=this.session.lineWidgets,c=b&&b[a],d=[];c;)d.push(c),c=c.$oldWidget;return d},this.onWidgetChanged=function(a){this.session._changedWidgets.push(a),this.editor&&this.editor.renderer.updateFull()},this.measureWidgets=function(a,b){var c=this.session._changedWidgets,d=b.layerConfig;if(c&&c.length){for(var e=1/0,f=0;f<c.length;f++){var g=c[f];if(g&&g.el&&g.session==this.session){if(!g._inDocument){if(this.session.lineWidgets[g.row]!=g)continue;g._inDocument=!0,b.container.appendChild(g.el)}g.h=g.el.offsetHeight,g.fixedWidth||(g.w=g.el.offsetWidth,g.screenWidth=Math.ceil(g.w/d.characterWidth));var h=g.h/d.lineHeight;g.coverLine&&(h-=this.session.getRowLineCount(g.row),0>h&&(h=0)),g.rowCount!=h&&(g.rowCount=h,g.row<e&&(e=g.row))}}e!=1/0&&(this.session._emit("changeFold",{data:{start:{row:e}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},this.renderWidgets=function(a,b){var c=b.layerConfig,d=this.session.lineWidgets;if(d){for(var e=Math.min(this.firstRow,c.firstRow),f=Math.max(this.lastRow,c.lastRow,d.length);e>0&&!d[e];)e--;this.firstRow=c.firstRow,this.lastRow=c.lastRow,b.$cursorLayer.config=c;for(var g=e;f>=g;g++){var h=d[g];if(h&&h.el)if(h.hidden)h.el.style.top=-100-(h.pixelHeight||0)+"px";else{h._inDocument||(h._inDocument=!0,b.container.appendChild(h.el));var i=b.$cursorLayer.getPixelPosition({row:g,column:0},!0).top;h.coverLine||(i+=c.lineHeight*this.session.getRowLineCount(h.row)),h.el.style.top=i-c.offset+"px";var j=h.coverGutter?0:b.gutterWidth;h.fixedWidth||(j-=b.scrollLeft),h.el.style.left=j+"px",h.fullWidth&&h.screenWidth&&(h.el.style.minWidth=c.width+2*c.padding+"px"),h.fixedWidth?h.el.style.right=b.scrollBar.getWidth()+"px":h.el.style.right=""}}}}}).call(d.prototype),b.LineWidgets=d}),ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range"],function(a,b,c){"use strict";function d(a,b,c){for(var d=0,e=a.length-1;e>=d;){var f=d+e>>1,g=c(b,a[f]);if(g>0)d=f+1;else{if(!(0>g))return f;e=f-1}}return-(d+1)}function e(a,b,c){var e=a.getAnnotations().sort(h.comparePoints);if(e.length){var f=d(e,{row:b,column:-1},h.comparePoints);0>f&&(f=-f-1),f>=e.length?f=c>0?0:e.length-1:0===f&&0>c&&(f=e.length-1);var g=e[f];if(g&&c){if(g.row===b){do g=e[f+=c];while(g&&g.row===b);if(!g)return e.slice()}var i=[];b=g.row;do i[0>c?"unshift":"push"](g),g=e[f+=c];while(g&&g.row==b);return i.length&&i}}}var f=a("../line_widgets").LineWidgets,g=a("../lib/dom"),h=a("../range").Range;b.showErrorMarker=function(a,b){var c=a.session;c.widgetManager||(c.widgetManager=new f(c),c.widgetManager.attach(a));var d=a.getCursorPosition(),h=d.row,i=c.widgetManager.getWidgetsAtRow(h).filter(function(a){return"errorMarker"==a.type})[0];i?i.destroy():h-=b;var j,k=e(c,h,b);if(k){var l=k[0];d.column=(l.pos&&"number"!=typeof l.column?l.pos.sc:l.column)||0,d.row=l.row,j=a.renderer.$gutterLayer.$annotations[d.row]}else{if(i)return;j={text:["Looks good!"],className:"ace_ok"}}a.session.unfold(d.row),a.selection.moveToPosition(d);var m={row:d.row,fixedWidth:!0,coverGutter:!0,el:g.createElement("div"),type:"errorMarker"},n=m.el.appendChild(g.createElement("div")),o=m.el.appendChild(g.createElement("div"));o.className="error_widget_arrow "+j.className;var p=a.renderer.$cursorLayer.getPixelPosition(d).left;o.style.left=p+a.renderer.gutterWidth-5+"px",m.el.className="error_widget_wrapper",n.className="error_widget "+j.className,n.innerHTML=j.text.join("<br>"),n.appendChild(g.createElement("div"));var q=function(a,b,c){return 0!==b||"esc"!==c&&"return"!==c?void 0:(m.destroy(),{command:"null"})};m.destroy=function(){a.$mouseHandler.isMousePressed||(a.keyBinding.removeKeyboardHandler(q),c.widgetManager.removeLineWidget(m),a.off("changeSelection",m.destroy),a.off("changeSession",m.destroy),a.off("mouseup",m.destroy),a.off("change",m.destroy))},a.keyBinding.addKeyboardHandler(q),a.on("changeSelection",m.destroy),a.on("changeSession",m.destroy),a.on("mouseup",m.destroy),a.on("change",m.destroy),a.session.widgetManager.addLineWidget(m),m.el.onmousedown=a.focus.bind(a),a.renderer.scrollCursorIntoView(null,.5,{bottom:m.el.offsetHeight})},g.importCssString("    .error_widget_wrapper {        background: inherit;        color: inherit;        border:none    }    .error_widget {        border-top: solid 2px;        border-bottom: solid 2px;        margin: 5px 0;        padding: 10px 40px;        white-space: pre-wrap;    }    .error_widget.ace_error, .error_widget_arrow.ace_error{        border-color: #ff5a5a    }    .error_widget.ace_warning, .error_widget_arrow.ace_warning{        border-color: #F1D817    }    .error_widget.ace_info, .error_widget_arrow.ace_info{        border-color: #5a5a5a    }    .error_widget.ace_ok, .error_widget_arrow.ace_ok{        border-color: #5aaa5a    }    .error_widget_arrow {        position: absolute;        border: solid 5px;        border-top-color: transparent!important;        border-right-color: transparent!important;        border-left-color: transparent!important;        top: -5px;    }","")}),ace.define("ace/ace",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/dom","ace/lib/event","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config"],function(a,b,c){"use strict";a("./lib/fixoldbrowsers");var d=a("./lib/dom"),e=a("./lib/event"),f=a("./editor").Editor,g=a("./edit_session").EditSession,h=a("./undomanager").UndoManager,i=a("./virtual_renderer").VirtualRenderer;a("./worker/worker_client"),a("./keyboard/hash_handler"),a("./placeholder"),a("./multi_select"),
a("./mode/folding/fold_mode"),a("./theme/textmate"),a("./ext/error_marker"),b.config=a("./config"),b.require=a,b.edit=function(a){if("string"==typeof a){var c=a;if(a=document.getElementById(c),!a)throw new Error("ace.edit can't find div #"+c)}if(a&&a.env&&a.env.editor instanceof f)return a.env.editor;var g="";if(a&&/input|textarea/i.test(a.tagName)){var h=a;g=h.value,a=d.createElement("pre"),h.parentNode.replaceChild(a,h)}else a&&(g=d.getInnerText(a),a.innerHTML="");var j=b.createEditSession(g),k=new f(new i(a));k.setSession(j);var l={document:j,editor:k,onResize:k.resize.bind(k,null)};return h&&(l.textarea=h),e.addListener(window,"resize",l.onResize),k.on("destroy",function(){e.removeListener(window,"resize",l.onResize),l.editor.container.env=null}),k.container.env=k.env=l,k},b.createEditSession=function(a,b){var c=new g(a,b);return c.setUndoManager(new h),c},b.EditSession=g,b.UndoManager=h,b.version="1.2.3"}),function(){ace.require(["ace/ace"],function(a){a&&a.config.init(!0),window.ace||(window.ace=a);for(var b in a)a.hasOwnProperty(b)&&(window.ace[b]=a[b])})}(),ace.define("ace/snippets",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/lib/lang","ace/range","ace/anchor","ace/keyboard/hash_handler","ace/tokenizer","ace/lib/dom","ace/editor"],function(a,b,c){"use strict";var d=a("./lib/oop"),e=a("./lib/event_emitter").EventEmitter,f=a("./lib/lang"),g=a("./range").Range,h=a("./anchor").Anchor,i=a("./keyboard/hash_handler").HashHandler,j=a("./tokenizer").Tokenizer,k=g.comparePoints,l=function(){this.snippetMap={},this.snippetNameMap={}};(function(){d.implement(this,e),this.getTokenizer=function(){function a(a,b,c){return a=a.substr(1),/^\d+$/.test(a)&&!c.inFormatString?[{tabstopId:parseInt(a,10)}]:[{text:a}]}function b(a){return"(?:[^\\\\"+a+"]|\\\\.)"}return l.$tokenizer=new j({start:[{regex:/:/,onMatch:function(a,b,c){return c.length&&c[0].expectIf?(c[0].expectIf=!1,c[0].elseBranch=c[0],[c[0]]):":"}},{regex:/\\./,onMatch:function(a,b,c){var d=a[1];return"}"==d&&c.length?a=d:-1!="`$\\".indexOf(d)?a=d:c.inFormatString&&("n"==d?a="\n":"t"==d?a="\n":-1!="ulULE".indexOf(d)&&(a={changeCase:d,local:d>"a"})),[a]}},{regex:/}/,onMatch:function(a,b,c){return[c.length?c.shift():a]}},{regex:/\$(?:\d+|\w+)/,onMatch:a},{regex:/\$\{[\dA-Z_a-z]+/,onMatch:function(b,c,d){var e=a(b.substr(1),c,d);return d.unshift(e[0]),e},next:"snippetVar"},{regex:/\n/,token:"newline",merge:!1}],snippetVar:[{regex:"\\|"+b("\\|")+"*\\|",onMatch:function(a,b,c){c[0].choices=a.slice(1,-1).split(",")},next:"start"},{regex:"/("+b("/")+"+)/(?:("+b("/")+"*)/)(\\w*):?",onMatch:function(a,b,c){var d=c[0];return d.fmtString=a,a=this.splitRegex.exec(a),d.guard=a[1],d.fmt=a[2],d.flag=a[3],""},next:"start"},{regex:"`"+b("`")+"*`",onMatch:function(a,b,c){return c[0].code=a.splice(1,-1),""},next:"start"},{regex:"\\?",onMatch:function(a,b,c){c[0]&&(c[0].expectIf=!0)},next:"start"},{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"start"}],formatString:[{regex:"/("+b("/")+"+)/",token:"regex"},{regex:"",onMatch:function(a,b,c){c.inFormatString=!0},next:"start"}]}),l.prototype.getTokenizer=function(){return l.$tokenizer},l.$tokenizer},this.tokenizeTmSnippet=function(a,b){return this.getTokenizer().getLineTokens(a,b).tokens.map(function(a){return a.value||a})},this.$getDefaultValue=function(a,b){if(/^[A-Z]\d+$/.test(b)){var c=b.substr(1);return(this.variables[b[0]+"__"]||{})[c]}if(/^\d+$/.test(b))return(this.variables.__||{})[b];if(b=b.replace(/^TM_/,""),a){var d=a.session;switch(b){case"CURRENT_WORD":var e=d.getWordRange();case"SELECTION":case"SELECTED_TEXT":return d.getTextRange(e);case"CURRENT_LINE":return d.getLine(a.getCursorPosition().row);case"PREV_LINE":return d.getLine(a.getCursorPosition().row-1);case"LINE_INDEX":return a.getCursorPosition().column;case"LINE_NUMBER":return a.getCursorPosition().row+1;case"SOFT_TABS":return d.getUseSoftTabs()?"YES":"NO";case"TAB_SIZE":return d.getTabSize();case"FILENAME":case"FILEPATH":return"";case"FULLNAME":return"Ace"}}},this.variables={},this.getVariableValue=function(a,b){return this.variables.hasOwnProperty(b)?this.variables[b](a,b)||"":this.$getDefaultValue(a,b)||""},this.tmStrFormat=function(a,b,c){var d=b.flag||"",e=b.guard;e=new RegExp(e,d.replace(/[^gi]/,""));var f=this.tokenizeTmSnippet(b.fmt,"formatString"),g=this,h=a.replace(e,function(){g.variables.__=arguments;for(var a=g.resolveVariables(f,c),b="E",d=0;d<a.length;d++){var e=a[d];if("object"==typeof e)if(a[d]="",e.changeCase&&e.local){var h=a[d+1];h&&"string"==typeof h&&("u"==e.changeCase?a[d]=h[0].toUpperCase():a[d]=h[0].toLowerCase(),a[d+1]=h.substr(1))}else e.changeCase&&(b=e.changeCase);else"U"==b?a[d]=e.toUpperCase():"L"==b&&(a[d]=e.toLowerCase())}return a.join("")});return this.variables.__=null,h},this.resolveVariables=function(a,b){function c(b){var c=a.indexOf(b,e+1);-1!=c&&(e=c)}for(var d=[],e=0;e<a.length;e++){var f=a[e];if("string"==typeof f)d.push(f);else{if("object"!=typeof f)continue;if(f.skip)c(f);else{if(f.processed<e)continue;if(f.text){var g=this.getVariableValue(b,f.text);g&&f.fmtString&&(g=this.tmStrFormat(g,f)),f.processed=e,null==f.expectIf?g&&(d.push(g),c(f)):g?f.skip=f.elseBranch:c(f)}else null!=f.tabstopId?d.push(f):null!=f.changeCase&&d.push(f)}}}return d},this.insertSnippetForSelection=function(a,b){function c(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];if("object"==typeof d){if(j[d.tabstopId])continue;var e=a.lastIndexOf(d,c-1);d=b[e]||{tabstopId:d.tabstopId}}b[c]=d}return b}var d=a.getCursorPosition(),e=a.session.getLine(d.row),f=a.session.getTabString(),g=e.match(/^\s*/)[0];d.column<g.length&&(g=g.slice(0,d.column));var h=this.tokenizeTmSnippet(b);h=this.resolveVariables(h,a),h=h.map(function(a){return"\n"==a?a+g:"string"==typeof a?a.replace(/\t/g,f):a});var i=[];h.forEach(function(a,b){if("object"==typeof a){var c=a.tabstopId,d=i[c];if(d||(d=i[c]=[],d.index=c,d.value=""),-1===d.indexOf(a)){d.push(a);var e=h.indexOf(a,b+1);if(-1!==e){var f=h.slice(b+1,e),g=f.some(function(a){return"object"==typeof a});g&&!d.value?d.value=f:f.length&&(!d.value||"string"!=typeof d.value)&&(d.value=f.join(""))}}}}),i.forEach(function(a){a.length=0});for(var j={},k=0;k<h.length;k++){var l=h[k];if("object"==typeof l){var n=l.tabstopId,o=h.indexOf(l,k+1);if(j[n])j[n]===l&&(j[n]=null);else{var p=i[n],q="string"==typeof p.value?[p.value]:c(p.value);q.unshift(k+1,Math.max(0,o-k)),q.push(l),j[n]=l,h.splice.apply(h,q),-1===p.indexOf(l)&&p.push(l)}}}var r=0,s=0,t="";h.forEach(function(a){"string"==typeof a?("\n"===a[0]?(s=a.length-1,r++):s+=a.length,t+=a):a.start?a.end={row:r,column:s}:a.start={row:r,column:s}});var u=a.getSelectionRange(),v=a.session.replace(u,t),w=new m(a),x=a.inVirtualSelectionMode&&a.selection.index;w.addTabstops(i,u.start,v,x)},this.insertSnippet=function(a,b){var c=this;return a.inVirtualSelectionMode?c.insertSnippetForSelection(a,b):(a.forEachSelection(function(){c.insertSnippetForSelection(a,b)},null,{keepOrder:!0}),void(a.tabstopManager&&a.tabstopManager.tabNext()))},this.$getScope=function(a){var b=a.session.$mode.$id||"";if(b=b.split("/").pop(),"html"===b||"php"===b){"php"===b&&!a.session.$mode.inlinePhp&&(b="html");var c=a.getCursorPosition(),d=a.session.getState(c.row);"object"==typeof d&&(d=d[0]),d.substring&&("js-"==d.substring(0,3)?b="javascript":"css-"==d.substring(0,4)?b="css":"php-"==d.substring(0,4)&&(b="php"))}return b},this.getActiveScopes=function(a){var b=this.$getScope(a),c=[b],d=this.snippetMap;return d[b]&&d[b].includeScopes&&c.push.apply(c,d[b].includeScopes),c.push("_"),c},this.expandWithTab=function(a,b){var c=this,d=a.forEachSelection(function(){return c.expandSnippetForSelection(a,b)},null,{keepOrder:!0});return d&&a.tabstopManager&&a.tabstopManager.tabNext(),d},this.expandSnippetForSelection=function(a,b){var c,d=a.getCursorPosition(),e=a.session.getLine(d.row),f=e.substring(0,d.column),g=e.substr(d.column),h=this.snippetMap;return this.getActiveScopes(a).some(function(a){var b=h[a];return b&&(c=this.findMatchingSnippet(b,f,g)),!!c},this),c?b&&b.dryRun?!0:(a.session.doc.removeInLine(d.row,d.column-c.replaceBefore.length,d.column+c.replaceAfter.length),this.variables.M__=c.matchBefore,this.variables.T__=c.matchAfter,this.insertSnippetForSelection(a,c.content),this.variables.M__=this.variables.T__=null,!0):!1},this.findMatchingSnippet=function(a,b,c){for(var d=a.length;d--;){var e=a[d];if((!e.startRe||e.startRe.test(b))&&(!e.endRe||e.endRe.test(c))&&(e.startRe||e.endRe))return e.matchBefore=e.startRe?e.startRe.exec(b):[""],e.matchAfter=e.endRe?e.endRe.exec(c):[""],e.replaceBefore=e.triggerRe?e.triggerRe.exec(b)[0]:"",e.replaceAfter=e.endTriggerRe?e.endTriggerRe.exec(c)[0]:"",e}},this.snippetMap={},this.snippetNameMap={},this.register=function(a,b){function c(a){return a&&!/^\^?\(.*\)\$?$|^\\b$/.test(a)&&(a="(?:"+a+")"),a||""}function d(a,b,d){return a=c(a),b=c(b),d?(a=b+a,a&&"$"!=a[a.length-1]&&(a+="$")):(a+=b,a&&"^"!=a[0]&&(a="^"+a)),new RegExp(a)}function e(a){a.scope||(a.scope=b||"_"),b=a.scope,g[b]||(g[b]=[],h[b]={});var c=h[b];if(a.name){var e=c[a.name];e&&i.unregister(e),c[a.name]=a}g[b].push(a),a.tabTrigger&&!a.trigger&&(!a.guard&&/^\w/.test(a.tabTrigger)&&(a.guard="\\b"),a.trigger=f.escapeRegExp(a.tabTrigger)),(a.trigger||a.guard||a.endTrigger||a.endGuard)&&(a.startRe=d(a.trigger,a.guard,!0),a.triggerRe=new RegExp(a.trigger,"",!0),a.endRe=d(a.endTrigger,a.endGuard,!0),a.endTriggerRe=new RegExp(a.endTrigger,"",!0))}var g=this.snippetMap,h=this.snippetNameMap,i=this;a||(a=[]),a&&a.content?e(a):Array.isArray(a)&&a.forEach(e),this._signal("registerSnippets",{scope:b})},this.unregister=function(a,b){function c(a){var c=e[a.scope||b];if(c&&c[a.name]){delete c[a.name];var f=d[a.scope||b],g=f&&f.indexOf(a);g>=0&&f.splice(g,1)}}var d=this.snippetMap,e=this.snippetNameMap;a.content?c(a):Array.isArray(a)&&a.forEach(c)},this.parseSnippetFile=function(a){a=a.replace(/\r/g,"");for(var b,c=[],d={},e=/^#.*|^({[\s\S]*})\s*$|^(\S+) (.*)$|^((?:\n*\t.*)+)/gm;b=e.exec(a);){if(b[1])try{d=JSON.parse(b[1]),c.push(d)}catch(f){}if(b[4])d.content=b[4].replace(/^\t/gm,""),c.push(d),d={};else{var g=b[2],h=b[3];if("regex"==g){var i=/\/((?:[^\/\\]|\\.)*)|$/g;d.guard=i.exec(h)[1],d.trigger=i.exec(h)[1],d.endTrigger=i.exec(h)[1],d.endGuard=i.exec(h)[1]}else"snippet"==g?(d.tabTrigger=h.match(/^\S*/)[0],d.name||(d.name=h)):d[g]=h}}return c},this.getSnippetByName=function(a,b){var c,d=this.snippetNameMap;return this.getActiveScopes(b).some(function(b){var e=d[b];return e&&(c=e[a]),!!c},this),c}}).call(l.prototype);var m=function(a){return a.tabstopManager?a.tabstopManager:(a.tabstopManager=this,this.$onChange=this.onChange.bind(this),this.$onChangeSelection=f.delayedCall(this.onChangeSelection.bind(this)).schedule,this.$onChangeSession=this.onChangeSession.bind(this),this.$onAfterExec=this.onAfterExec.bind(this),this.attach(a),void 0)};(function(){this.attach=function(a){this.index=0,this.ranges=[],this.tabstops=[],this.$openTabstops=null,this.selectedTabstop=null,this.editor=a,this.editor.on("change",this.$onChange),this.editor.on("changeSelection",this.$onChangeSelection),this.editor.on("changeSession",this.$onChangeSession),this.editor.commands.on("afterExec",this.$onAfterExec),this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)},this.detach=function(){this.tabstops.forEach(this.removeTabstopMarkers,this),this.ranges=null,this.tabstops=null,this.selectedTabstop=null,this.editor.removeListener("change",this.$onChange),this.editor.removeListener("changeSelection",this.$onChangeSelection),this.editor.removeListener("changeSession",this.$onChangeSession),this.editor.commands.removeListener("afterExec",this.$onAfterExec),this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.tabstopManager=null,this.editor=null},this.onChange=function(a){var b="r"==a.action[0],c=a.start,d=a.end,e=c.row,f=d.row,g=f-e,h=d.column-c.column;if(b&&(g=-g,h=-h),!this.$inChange&&b){var i=this.selectedTabstop,j=i&&!i.some(function(a){return k(a.start,c)<=0&&k(a.end,d)>=0});if(j)return this.detach()}for(var l=this.ranges,m=0;m<l.length;m++){var n=l[m];n.end.row<c.row||(b&&k(c,n.start)<0&&k(d,n.end)>0?(this.removeRange(n),m--):(n.start.row==e&&n.start.column>c.column&&(n.start.column+=h),n.end.row==e&&n.end.column>=c.column&&(n.end.column+=h),n.start.row>=e&&(n.start.row+=g),n.end.row>=e&&(n.end.row+=g),k(n.start,n.end)>0&&this.removeRange(n)))}l.length||this.detach()},this.updateLinkedFields=function(){var a=this.selectedTabstop;if(a&&a.hasLinkedRanges){this.$inChange=!0;for(var c=this.editor.session,d=c.getTextRange(a.firstNonLinked),e=a.length;e--;){var f=a[e];if(f.linked){var g=b.snippetManager.tmStrFormat(d,f.original);c.replace(f,g)}}this.$inChange=!1}},this.onAfterExec=function(a){a.command&&!a.command.readOnly&&this.updateLinkedFields()},this.onChangeSelection=function(){if(this.editor){for(var a=this.editor.selection.lead,b=this.editor.selection.anchor,c=this.editor.selection.isEmpty(),d=this.ranges.length;d--;)if(!this.ranges[d].linked){var e=this.ranges[d].contains(a.row,a.column),f=c||this.ranges[d].contains(b.row,b.column);if(e&&f)return}this.detach()}},this.onChangeSession=function(){this.detach()},this.tabNext=function(a){var b=this.tabstops.length,c=this.index+(a||1);c=Math.min(Math.max(c,1),b),c==b&&(c=0),this.selectTabstop(c),0===c&&this.detach()},this.selectTabstop=function(a){this.$openTabstops=null;var b=this.tabstops[this.index];if(b&&this.addTabstopMarkers(b),this.index=a,b=this.tabstops[this.index],b&&b.length){if(this.selectedTabstop=b,this.editor.inVirtualSelectionMode)this.editor.selection.setRange(b.firstNonLinked);else{var c=this.editor.multiSelect;c.toSingleRange(b.firstNonLinked.clone());for(var d=b.length;d--;)b.hasLinkedRanges&&b[d].linked||c.addRange(b[d].clone(),!0);c.ranges[0]&&c.addRange(c.ranges[0].clone())}this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)}},this.addTabstops=function(a,b,c){if(this.$openTabstops||(this.$openTabstops=[]),!a[0]){var d=g.fromPoints(c,c);p(d.start,b),p(d.end,b),a[0]=[d],a[0].index=0}var e=this.index,f=[e+1,0],h=this.ranges;a.forEach(function(a,c){for(var d=this.$openTabstops[c]||a,e=a.length;e--;){var i=a[e],j=g.fromPoints(i.start,i.end||i.start);o(j.start,b),o(j.end,b),j.original=i,j.tabstop=d,h.push(j),d!=a?d.unshift(j):d[e]=j,i.fmtString?(j.linked=!0,d.hasLinkedRanges=!0):d.firstNonLinked||(d.firstNonLinked=j)}d.firstNonLinked||(d.hasLinkedRanges=!1),d===a&&(f.push(d),this.$openTabstops[c]=d),this.addTabstopMarkers(d)},this),f.length>2&&(this.tabstops.length&&f.push(f.splice(2,1)[0]),this.tabstops.splice.apply(this.tabstops,f))},this.addTabstopMarkers=function(a){var b=this.editor.session;a.forEach(function(a){a.markerId||(a.markerId=b.addMarker(a,"ace_snippet-marker","text"))})},this.removeTabstopMarkers=function(a){var b=this.editor.session;a.forEach(function(a){b.removeMarker(a.markerId),a.markerId=null})},this.removeRange=function(a){var b=a.tabstop.indexOf(a);a.tabstop.splice(b,1),b=this.ranges.indexOf(a),this.ranges.splice(b,1),this.editor.session.removeMarker(a.markerId),a.tabstop.length||(b=this.tabstops.indexOf(a.tabstop),-1!=b&&this.tabstops.splice(b,1),this.tabstops.length||this.detach())},this.keyboardHandler=new i,this.keyboardHandler.bindKeys({Tab:function(a){b.snippetManager&&b.snippetManager.expandWithTab(a)||a.tabstopManager.tabNext(1)},"Shift-Tab":function(a){a.tabstopManager.tabNext(-1)},Esc:function(a){a.tabstopManager.detach()},Return:function(a){return!1}})}).call(m.prototype);var n={};n.onChange=h.prototype.onChange,n.setPosition=function(a,b){this.pos.row=a,this.pos.column=b},n.update=function(a,b,c){this.$insertRight=c,this.pos=a,this.onChange(b)};var o=function(a,b){0==a.row&&(a.column+=b.column),a.row+=b.row},p=function(a,b){a.row==b.row&&(a.column-=b.column),a.row-=b.row};a("./lib/dom").importCssString(".ace_snippet-marker {    -moz-box-sizing: border-box;    box-sizing: border-box;    background: rgba(194, 193, 208, 0.09);    border: 1px dotted rgba(211, 208, 235, 0.62);    position: absolute;}"),b.snippetManager=new l;var q=a("./editor").Editor;(function(){this.insertSnippet=function(a,c){return b.snippetManager.insertSnippet(this,a,c)},this.expandSnippet=function(a){return b.snippetManager.expandWithTab(this,a)}}).call(q.prototype)}),ace.define("ace/autocomplete/popup",["require","exports","module","ace/virtual_renderer","ace/editor","ace/range","ace/lib/event","ace/lib/lang","ace/lib/dom"],function(a,b,c){"use strict";var d=a("../virtual_renderer").VirtualRenderer,e=a("../editor").Editor,f=a("../range").Range,g=a("../lib/event"),h=a("../lib/lang"),i=a("../lib/dom"),j=function(a){var b=new d(a);b.$maxLines=4;var c=new e(b);return c.setHighlightActiveLine(!1),c.setShowPrintMargin(!1),c.renderer.setShowGutter(!1),c.renderer.setHighlightGutterLine(!1),c.$mouseHandler.$focusWaitTimout=0,c.$highlightTagPending=!0,c},k=function(a){var b=i.createElement("div"),c=new j(b);a&&a.appendChild(b),b.style.display="none",c.renderer.content.style.cursor="default",c.renderer.setStyle("ace_autocomplete"),c.setOption("displayIndentGuides",!1),c.setOption("dragDelay",150);var d=function(){};c.focus=d,c.$isFocused=!0,c.renderer.$cursorLayer.restartTimer=d,c.renderer.$cursorLayer.element.style.opacity=0,c.renderer.$maxLines=8,c.renderer.$keepTextAreaAtCursor=!1,c.setHighlightActiveLine(!1),c.session.highlight(""),c.session.$searchHighlight.clazz="ace_highlight-marker",c.on("mousedown",function(a){var b=a.getDocumentPosition();c.selection.moveToPosition(b),l.start.row=l.end.row=b.row,a.stop()});var e,k=new f(-1,0,-1,1/0),l=new f(-1,0,-1,1/0);l.id=c.session.addMarker(l,"ace_active-line","fullLine"),c.setSelectOnHover=function(a){a?k.id&&(c.session.removeMarker(k.id),k.id=null):k.id=c.session.addMarker(k,"ace_line-hover","fullLine")},c.setSelectOnHover(!1),c.on("mousemove",function(a){if(!e)return void(e=a);if(e.x!=a.x||e.y!=a.y){e=a,e.scrollTop=c.renderer.scrollTop;var b=e.getDocumentPosition().row;k.start.row!=b&&(k.id||c.setRow(b),n(b))}}),c.renderer.on("beforeRender",function(){if(e&&-1!=k.start.row){e.$pos=null;var a=e.getDocumentPosition().row;k.id||c.setRow(a),n(a,!0)}}),c.renderer.on("afterRender",function(){var a=c.getRow(),b=c.renderer.$textLayer,d=b.element.childNodes[a-b.config.firstRow];d!=b.selectedNode&&(b.selectedNode&&i.removeCssClass(b.selectedNode,"ace_selected"),b.selectedNode=d,d&&i.addCssClass(d,"ace_selected"))});var m=function(){n(-1)},n=function(a,b){a!==k.start.row&&(k.start.row=k.end.row=a,b||c.session._emit("changeBackMarker"),c._emit("changeHoverMarker"))};c.getHoveredRow=function(){return k.start.row},g.addListener(c.container,"mouseout",m),c.on("hide",m),c.on("changeSelection",m),c.session.doc.getLength=function(){return c.data.length},c.session.doc.getLine=function(a){var b=c.data[a];return"string"==typeof b?b:b&&b.value||""};var o=c.session.bgTokenizer;return o.$tokenizeRow=function(a){var b=c.data[a],d=[];if(!b)return d;"string"==typeof b&&(b={value:b}),b.caption||(b.caption=b.value||b.name);for(var e,f,g=-1,h=0;h<b.caption.length;h++)f=b.caption[h],e=b.matchMask&1<<h?1:0,g!==e?(d.push({type:b.className||""+(e?"completion-highlight":""),value:f}),g=e):d[d.length-1].value+=f;if(b.meta){var i=c.renderer.$size.scrollerWidth/c.renderer.layerConfig.characterWidth,j=b.meta;j.length+b.caption.length>i-2&&(j=j.substr(0,i-b.caption.length-3)+""),d.push({type:"rightAlignedText",value:j})}return d},o.$updateOnChange=d,o.start=d,c.session.$computeWidth=function(){return this.screenWidth=0},c.$blockScrolling=1/0,c.isOpen=!1,c.isTopdown=!1,c.data=[],c.setData=function(a){c.setValue(h.stringRepeat("\n",a.length),-1),c.data=a||[],c.setRow(0)},c.getData=function(a){return c.data[a]},c.getRow=function(){return l.start.row},c.setRow=function(a){a=Math.max(0,Math.min(this.data.length,a)),l.start.row!=a&&(c.selection.clearSelection(),l.start.row=l.end.row=a||0,c.session._emit("changeBackMarker"),c.moveCursorTo(a||0,0),c.isOpen&&c._signal("select"))},c.on("changeSelection",function(){c.isOpen&&c.setRow(c.selection.lead.row),c.renderer.scrollCursorIntoView()}),c.hide=function(){this.container.style.display="none",this._signal("hide"),c.isOpen=!1},c.show=function(a,b,d){var f=this.container,g=window.innerHeight,h=window.innerWidth,i=this.renderer,j=i.$maxLines*b*1.4,k=a.top+this.$borderSize;k+j>g-b&&!d?(f.style.top="",f.style.bottom=g-k+"px",c.isTopdown=!1):(k+=b,f.style.top=k+"px",f.style.bottom="",c.isTopdown=!0),f.style.display="",this.renderer.$textLayer.checkForSizeChanges();var l=a.left;l+f.offsetWidth>h&&(l=h-f.offsetWidth),f.style.left=l+"px",this._signal("show"),e=null,c.isOpen=!0},c.getTextLeftOffset=function(){return this.$borderSize+this.renderer.$padding+this.$imageSize},c.$imageSize=0,c.$borderSize=1,c};i.importCssString(".ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {    background-color: #CAD6FA;    z-index: 1;}.ace_editor.ace_autocomplete .ace_line-hover {    border: 1px solid #abbffe;    margin-top: -1px;    background: rgba(233,233,253,0.4);}.ace_editor.ace_autocomplete .ace_line-hover {    position: absolute;    z-index: 2;}.ace_editor.ace_autocomplete .ace_scroller {   background: none;   border: none;   box-shadow: none;}.ace_rightAlignedText {    color: gray;    display: inline-block;    position: absolute;    right: 4px;    text-align: right;    z-index: -1;}.ace_editor.ace_autocomplete .ace_completion-highlight{    color: #000;    text-shadow: 0 0 0.01em;}.ace_editor.ace_autocomplete {    width: 280px;    z-index: 200000;    background: #fbfbfb;    color: #444;    border: 1px lightgray solid;    position: fixed;    box-shadow: 2px 3px 5px rgba(0,0,0,.2);    line-height: 1.4;}"),b.AcePopup=k}),ace.define("ace/autocomplete/util",["require","exports","module"],function(a,b,c){"use strict";b.parForEach=function(a,b,c){var d=0,e=a.length;0===e&&c();for(var f=0;e>f;f++)b(a[f],function(a,b){d++,d===e&&c(a,b)})};var d=/[a-zA-Z_0-9\$\-\u00A2-\uFFFF]/;b.retrievePrecedingIdentifier=function(a,b,c){c=c||d;for(var e=[],f=b-1;f>=0&&c.test(a[f]);f--)e.push(a[f]);return e.reverse().join("")},b.retrieveFollowingIdentifier=function(a,b,c){c=c||d;for(var e=[],f=b;f<a.length&&c.test(a[f]);f++)e.push(a[f]);return e},b.getCompletionPrefix=function(a){var b,c=a.getCursorPosition(),d=a.session.getLine(c.row);return a.completers.forEach(function(a){a.identifierRegexps&&a.identifierRegexps.forEach(function(a){!b&&a&&(b=this.retrievePrecedingIdentifier(d,c.column,a))}.bind(this))}.bind(this)),b||this.retrievePrecedingIdentifier(d,c.column)}}),ace.define("ace/autocomplete",["require","exports","module","ace/keyboard/hash_handler","ace/autocomplete/popup","ace/autocomplete/util","ace/lib/event","ace/lib/lang","ace/lib/dom","ace/snippets"],function(a,b,c){"use strict";var d=a("./keyboard/hash_handler").HashHandler,e=a("./autocomplete/popup").AcePopup,f=a("./autocomplete/util"),g=(a("./lib/event"),a("./lib/lang")),h=a("./lib/dom"),i=a("./snippets").snippetManager,j=function(){this.autoInsert=!1,this.autoSelect=!0,this.exactMatch=!1,this.gatherCompletionsId=0,this.keyboardHandler=new d,this.keyboardHandler.bindKeys(this.commands),this.blurListener=this.blurListener.bind(this),this.changeListener=this.changeListener.bind(this),this.mousedownListener=this.mousedownListener.bind(this),this.mousewheelListener=this.mousewheelListener.bind(this),this.changeTimer=g.delayedCall(function(){this.updateCompletions(!0)}.bind(this)),this.tooltipTimer=g.delayedCall(this.updateDocTooltip.bind(this),50)};(function(){this.$init=function(){return this.popup=new e(document.body||document.documentElement),this.popup.on("click",function(a){this.insertMatch(),a.stop()}.bind(this)),this.popup.focus=this.editor.focus.bind(this.editor),this.popup.on("show",this.tooltipTimer.bind(null,null)),this.popup.on("select",this.tooltipTimer.bind(null,null)),this.popup.on("changeHoverMarker",this.tooltipTimer.bind(null,null)),this.popup},this.getPopup=function(){return this.popup||this.$init()},this.openPopup=function(a,b,c){this.popup||this.$init(),this.popup.setData(this.completions.filtered),a.keyBinding.addKeyboardHandler(this.keyboardHandler);var d=a.renderer;if(this.popup.setRow(this.autoSelect?0:-1),c)c&&!b&&this.detach();else{this.popup.setTheme(a.getTheme()),this.popup.setFontSize(a.getFontSize());var e=d.layerConfig.lineHeight,f=d.$cursorLayer.getPixelPosition(this.base,!0);f.left-=this.popup.getTextLeftOffset();var g=a.container.getBoundingClientRect();f.top+=g.top-d.layerConfig.offset,f.left+=g.left-a.renderer.scrollLeft,f.left+=d.gutterWidth,this.popup.show(f,e)}},this.detach=function(){this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.off("changeSelection",this.changeListener),this.editor.off("blur",this.blurListener),this.editor.off("mousedown",this.mousedownListener),this.editor.off("mousewheel",this.mousewheelListener),this.changeTimer.cancel(),this.hideDocTooltip(),this.gatherCompletionsId+=1,this.popup&&this.popup.isOpen&&this.popup.hide(),this.base&&this.base.detach(),this.activated=!1,this.completions=this.base=null},this.changeListener=function(a){var b=this.editor.selection.lead;(b.row!=this.base.row||b.column<this.base.column)&&this.detach(),this.activated?this.changeTimer.schedule():this.detach()},this.blurListener=function(a){var b=document.activeElement,c=this.editor.textInput.getElement(),d=a.relatedTarget&&a.relatedTarget==this.tooltipNode,e=this.popup&&this.popup.container;b!=c&&b.parentNode!=e&&!d&&b!=this.tooltipNode&&a.relatedTarget!=c&&this.detach()},this.mousedownListener=function(a){this.detach()},this.mousewheelListener=function(a){this.detach()},this.goTo=function(a){var b=this.popup.getRow(),c=this.popup.session.getLength()-1;switch(a){case"up":b=0>=b?c:b-1;break;case"down":b=b>=c?-1:b+1;break;case"start":b=0;break;case"end":b=c}this.popup.setRow(b)},this.insertMatch=function(a,b){if(a||(a=this.popup.getData(this.popup.getRow())),!a)return!1;if(a.completer&&a.completer.insertMatch)a.completer.insertMatch(this.editor,a);else{if(this.completions.filterText)for(var c,d=this.editor.selection.getAllRanges(),e=0;c=d[e];e++)c.start.column-=this.completions.filterText.length,this.editor.session.remove(c);a.snippet?i.insertSnippet(this.editor,a.snippet):this.editor.execCommand("insertstring",a.value||a)}this.detach()},this.commands={Up:function(a){a.completer.goTo("up")},Down:function(a){a.completer.goTo("down")},"Ctrl-Up|Ctrl-Home":function(a){a.completer.goTo("start")},"Ctrl-Down|Ctrl-End":function(a){a.completer.goTo("end")},Esc:function(a){a.completer.detach()},Return:function(a){return a.completer.insertMatch()},"Shift-Return":function(a){a.completer.insertMatch(null,{deleteSuffix:!0})},Tab:function(a){var b=a.completer.insertMatch();return b||a.tabstopManager?b:void a.completer.goTo("down")},PageUp:function(a){a.completer.popup.gotoPageUp()},PageDown:function(a){a.completer.popup.gotoPageDown()}},this.gatherCompletions=function(a,b){var c=a.getSession(),d=a.getCursorPosition(),e=(c.getLine(d.row),f.getCompletionPrefix(a));this.base=c.doc.createAnchor(d.row,d.column-e.length),this.base.$insertRight=!0;var g=[],h=a.completers.length;return a.completers.forEach(function(f,i){f.getCompletions(a,c,d,e,function(d,f){!d&&f&&(g=g.concat(f));var i=a.getCursorPosition();c.getLine(i.row);b(null,{prefix:e,matches:g,finished:0===--h})})}),!0},this.showPopup=function(a){this.editor&&this.detach(),this.activated=!0,this.editor=a,a.completer!=this&&(a.completer&&a.completer.detach(),a.completer=this),a.on("changeSelection",this.changeListener),a.on("blur",this.blurListener),a.on("mousedown",this.mousedownListener),a.on("mousewheel",this.mousewheelListener),this.updateCompletions()},this.updateCompletions=function(a){if(a&&this.base&&this.completions){var b=this.editor.getCursorPosition(),c=this.editor.session.getTextRange({start:this.base,end:b});if(c==this.completions.filterText)return;return this.completions.setFilter(c),this.completions.filtered.length&&(1!=this.completions.filtered.length||this.completions.filtered[0].value!=c||this.completions.filtered[0].snippet)?void this.openPopup(this.editor,c,a):this.detach()}var d=this.gatherCompletionsId;this.gatherCompletions(this.editor,function(b,c){var e=function(){return c.finished?this.detach():void 0}.bind(this),f=c.prefix,g=c&&c.matches;if(!g||!g.length)return e();if(0===f.indexOf(c.prefix)&&d==this.gatherCompletionsId){this.completions=new k(g),this.exactMatch&&(this.completions.exactMatch=!0),this.completions.setFilter(f);var h=this.completions.filtered;return h.length&&(1!=h.length||h[0].value!=f||h[0].snippet)?this.autoInsert&&1==h.length&&c.finished?this.insertMatch(h[0]):void this.openPopup(this.editor,f,a):e()}}.bind(this))},this.cancelContextMenu=function(){this.editor.$mouseHandler.cancelContextMenu()},this.updateDocTooltip=function(){var a=this.popup,b=a.data,c=b&&(b[a.getHoveredRow()]||b[a.getRow()]),d=null;return c&&this.editor&&this.popup.isOpen?(this.editor.completers.some(function(a){return a.getDocTooltip&&(d=a.getDocTooltip(c)),d}),d||(d=c),"string"==typeof d&&(d={docText:d}),d&&(d.docHTML||d.docText)?void this.showDocTooltip(d):this.hideDocTooltip()):this.hideDocTooltip()},this.showDocTooltip=function(a){this.tooltipNode||(this.tooltipNode=h.createElement("div"),this.tooltipNode.className="ace_tooltip ace_doc-tooltip",this.tooltipNode.style.margin=0,this.tooltipNode.style.pointerEvents="auto",this.tooltipNode.tabIndex=-1,this.tooltipNode.onblur=this.blurListener.bind(this));var b=this.tooltipNode;a.docHTML?b.innerHTML=a.docHTML:a.docText&&(b.textContent=a.docText),b.parentNode||document.body.appendChild(b);var c=this.popup,d=c.container.getBoundingClientRect();b.style.top=c.container.style.top,b.style.bottom=c.container.style.bottom,window.innerWidth-d.right<320?(b.style.right=window.innerWidth-d.left+"px",b.style.left=""):(b.style.left=d.right+1+"px",b.style.right=""),b.style.display="block"},this.hideDocTooltip=function(){if(this.tooltipTimer.cancel(),this.tooltipNode){var a=this.tooltipNode;!this.editor.isFocused()&&document.activeElement==a&&this.editor.focus(),this.tooltipNode=null,a.parentNode&&a.parentNode.removeChild(a)}}}).call(j.prototype),j.startCommand={name:"startAutocomplete",exec:function(a){a.completer||(a.completer=new j),a.completer.autoInsert=!1,a.completer.autoSelect=!0,a.completer.showPopup(a),a.completer.cancelContextMenu()},bindKey:"Ctrl-Space|Ctrl-Shift-Space|Alt-Space"};var k=function(a,b){this.all=a,this.filtered=a,this.filterText=b||"",this.exactMatch=!1};(function(){this.setFilter=function(a){if(a.length>this.filterText&&0===a.lastIndexOf(this.filterText,0))var b=this.filtered;else var b=this.all;this.filterText=a,b=this.filterCompletions(b,this.filterText),b=b.sort(function(a,b){return b.exactMatch-a.exactMatch||b.score-a.score});var c=null;b=b.filter(function(a){var b=a.snippet||a.caption||a.value;return b===c?!1:(c=b,!0)}),this.filtered=b},this.filterCompletions=function(a,b){var c=[],d=b.toUpperCase(),e=b.toLowerCase();a:for(var f,g=0;f=a[g];g++){var h=f.value||f.caption||f.snippet;if(h){var i,j,k=-1,l=0,m=0;if(this.exactMatch){if(b!==h.substr(0,b.length))continue a}else for(var n=0;n<b.length;n++){var o=h.indexOf(e[n],k+1),p=h.indexOf(d[n],k+1);if(i=o>=0&&(0>p||p>o)?o:p,0>i)continue a;j=i-k-1,j>0&&(-1===k&&(m+=10),m+=j),l|=1<<i,k=i}f.matchMask=l,f.exactMatch=m?0:1,f.score=(f.score||0)-m,c.push(f)}}return c}}).call(k.prototype),b.Autocomplete=j,b.FilteredList=k}),ace.define("ace/autocomplete/text_completer",["require","exports","module","ace/range"],function(a,b,c){function d(a,b){var c=a.getTextRange(f.fromPoints({row:0,column:0},b));return c.split(g).length-1}function e(a,b){var c=d(a,b),e=a.getValue().split(g),f=Object.create(null),h=e[c];return e.forEach(function(a,b){if(a&&a!==h){var d=Math.abs(c-b),g=e.length-d;f[a]?f[a]=Math.max(g,f[a]):f[a]=g}}),f}var f=a("../range").Range,g=/[^a-zA-Z_0-9\$\-\u00C0-\u1FFF\u2C00-\uD7FF\w]+/;b.getCompletions=function(a,b,c,d,f){var g=e(b,c,d),h=Object.keys(g);f(null,h.map(function(a){return{caption:a,value:a,score:g[a],
meta:"local"}}))}}),ace.define("ace/ext/language_tools",["require","exports","module","ace/snippets","ace/autocomplete","ace/config","ace/lib/lang","ace/autocomplete/util","ace/autocomplete/text_completer","ace/editor","ace/config"],function(a,b,c){"use strict";var d=a("../snippets").snippetManager,e=a("../autocomplete").Autocomplete,f=a("../config"),g=a("../lib/lang"),h=a("../autocomplete/util"),i=a("../autocomplete/text_completer"),j={getCompletions:function(a,b,c,d,e){if(b.$mode.completer)return b.$mode.completer.getCompletions(a,b,c,d,e);var f=a.session.getState(c.row),g=b.$mode.getCompletions(f,b,c,d);e(null,g)}},k={getCompletions:function(a,b,c,e,f){var g=d.snippetMap,h=[];d.getActiveScopes(a).forEach(function(a){for(var b=g[a]||[],c=b.length;c--;){var d=b[c],e=d.name||d.tabTrigger;e&&h.push({caption:e,snippet:d.content,meta:d.tabTrigger&&!d.name?d.tabTrigger+" ":"snippet",type:"snippet"})}},this),f(null,h)},getDocTooltip:function(a){"snippet"==a.type&&!a.docHTML&&(a.docHTML=["<b>",g.escapeHTML(a.caption),"</b>","<hr></hr>",g.escapeHTML(a.snippet)].join(""))}},l=[k,i,j];b.setCompleters=function(a){l.length=0,a&&l.push.apply(l,a)},b.addCompleter=function(a){l.push(a)},b.textCompleter=i,b.keyWordCompleter=j,b.snippetCompleter=k;var m={name:"expandSnippet",exec:function(a){return d.expandWithTab(a)},bindKey:"Tab"},n=function(a,b){o(b.session.$mode)},o=function(a){var b=a.$id;d.files||(d.files={}),p(b),a.modes&&a.modes.forEach(o)},p=function(a){if(a&&!d.files[a]){var b=a.replace("mode","snippets");d.files[a]={},f.loadModule(b,function(b){b&&(d.files[a]=b,!b.snippets&&b.snippetText&&(b.snippets=d.parseSnippetFile(b.snippetText)),d.register(b.snippets||[],b.scope),b.includeScopes&&(d.snippetMap[b.scope].includeScopes=b.includeScopes,b.includeScopes.forEach(function(a){p("ace/mode/"+a)})))})}},q=function(a){var b=a.editor,c=b.completer&&b.completer.activated;if("backspace"===a.command.name)c&&!h.getCompletionPrefix(b)&&b.completer.detach();else if("insertstring"===a.command.name){var d=h.getCompletionPrefix(b);d&&!c&&(b.completer||(b.completer=new e),b.completer.autoInsert=!1,b.completer.showPopup(b))}},r=a("../editor").Editor;a("../config").defineOptions(r.prototype,"editor",{enableBasicAutocompletion:{set:function(a){a?(this.completers||(this.completers=Array.isArray(a)?a:l),this.commands.addCommand(e.startCommand)):this.commands.removeCommand(e.startCommand)},value:!1},enableLiveAutocompletion:{set:function(a){a?(this.completers||(this.completers=Array.isArray(a)?a:l),this.commands.on("afterExec",q)):this.commands.removeListener("afterExec",q)},value:!1},enableSnippets:{set:function(a){a?(this.commands.addCommand(m),this.on("changeMode",n),n(null,this)):(this.commands.removeCommand(m),this.off("changeMode",n))},value:!1}})}),function(){ace.require(["ace/ext/language_tools"],function(){})}(),function(a){"use strict";function b(a,b){return b=b||Error,function(){var c,d,e=2,f=arguments,g=f[0],h="["+(a?a+":":"")+g+"] ",i=f[1];for(h+=i.replace(/\{\d+\}/g,function(a){var b=+a.slice(1,-1),c=b+e;return c<f.length?sa(f[c]):a}),h+="\nhttp://errors.angularjs.org/1.5.5/"+(a?a+"/":"")+g,d=e,c="?";d<f.length;d++,c="&")h+=c+"p"+(d-e)+"="+encodeURIComponent(sa(f[d]));return new b(h)}}function c(a){if(null==a||A(a))return!1;if(Td(a)||v(a)||Id&&a instanceof Id)return!0;var b="length"in Object(a)&&a.length;return w(b)&&(b>=0&&(b-1 in a||a instanceof Array)||"function"==typeof a.item)}function d(a,b,e){var f,g;if(a)if(y(a))for(f in a)"prototype"==f||"length"==f||"name"==f||a.hasOwnProperty&&!a.hasOwnProperty(f)||b.call(e,a[f],f,a);else if(Td(a)||c(a)){var h="object"!=typeof a;for(f=0,g=a.length;g>f;f++)(h||f in a)&&b.call(e,a[f],f,a)}else if(a.forEach&&a.forEach!==d)a.forEach(b,e,a);else if(u(a))for(f in a)b.call(e,a[f],f,a);else if("function"==typeof a.hasOwnProperty)for(f in a)a.hasOwnProperty(f)&&b.call(e,a[f],f,a);else for(f in a)Cd.call(a,f)&&b.call(e,a[f],f,a);return a}function e(a,b,c){for(var d=Object.keys(a).sort(),e=0;e<d.length;e++)b.call(c,a[d[e]],d[e]);return d}function f(a){return function(b,c){a(c,b)}}function g(){return++Sd}function h(a,b){b?a.$$hashKey=b:delete a.$$hashKey}function i(a,b,c){for(var d=a.$$hashKey,e=0,f=b.length;f>e;++e){var g=b[e];if(t(g)||y(g))for(var j=Object.keys(g),k=0,l=j.length;l>k;k++){var m=j[k],n=g[m];c&&t(n)?x(n)?a[m]=new Date(n.valueOf()):z(n)?a[m]=new RegExp(n):n.nodeName?a[m]=n.cloneNode(!0):J(n)?a[m]=n.clone():(t(a[m])||(a[m]=Td(n)?[]:{}),i(a[m],[n],!0)):a[m]=n}}return h(a,d),a}function j(a){return i(a,Ld.call(arguments,1),!1)}function k(a){return i(a,Ld.call(arguments,1),!0)}function l(a){return parseInt(a,10)}function m(a,b){return j(Object.create(a),b)}function n(){}function o(a){return a}function p(a){return function(){return a}}function q(a){return y(a.toString)&&a.toString!==Od}function r(a){return"undefined"==typeof a}function s(a){return"undefined"!=typeof a}function t(a){return null!==a&&"object"==typeof a}function u(a){return null!==a&&"object"==typeof a&&!Pd(a)}function v(a){return"string"==typeof a}function w(a){return"number"==typeof a}function x(a){return"[object Date]"===Od.call(a)}function y(a){return"function"==typeof a}function z(a){return"[object RegExp]"===Od.call(a)}function A(a){return a&&a.window===a}function B(a){return a&&a.$evalAsync&&a.$watch}function C(a){return"[object File]"===Od.call(a)}function D(a){return"[object FormData]"===Od.call(a)}function E(a){return"[object Blob]"===Od.call(a)}function F(a){return"boolean"==typeof a}function G(a){return a&&y(a.then)}function H(a){return a&&w(a.length)&&Ud.test(Od.call(a))}function I(a){return"[object ArrayBuffer]"===Od.call(a)}function J(a){return!(!a||!(a.nodeName||a.prop&&a.attr&&a.find))}function K(a){var b,c={},d=a.split(",");for(b=0;b<d.length;b++)c[d[b]]=!0;return c}function L(a){return Dd(a.nodeName||a[0]&&a[0].nodeName)}function M(a,b){var c=a.indexOf(b);return c>=0&&a.splice(c,1),c}function N(a,b){function c(a,b){var c,d=b.$$hashKey;if(Td(a))for(var f=0,g=a.length;g>f;f++)b.push(e(a[f]));else if(u(a))for(c in a)b[c]=e(a[c]);else if(a&&"function"==typeof a.hasOwnProperty)for(c in a)a.hasOwnProperty(c)&&(b[c]=e(a[c]));else for(c in a)Cd.call(a,c)&&(b[c]=e(a[c]));return h(b,d),b}function e(a){if(!t(a))return a;var b=g.indexOf(a);if(-1!==b)return i[b];if(A(a)||B(a))throw Qd("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var d=!1,e=f(a);return void 0===e&&(e=Td(a)?[]:Object.create(Pd(a)),d=!0),g.push(a),i.push(e),d?c(a,e):e}function f(a){switch(Od.call(a)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new a.constructor(e(a.buffer));case"[object ArrayBuffer]":if(!a.slice){var b=new ArrayBuffer(a.byteLength);return new Uint8Array(b).set(new Uint8Array(a)),b}return a.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new a.constructor(a.valueOf());case"[object RegExp]":var c=new RegExp(a.source,a.toString().match(/[^\/]*$/)[0]);return c.lastIndex=a.lastIndex,c;case"[object Blob]":return new a.constructor([a],{type:a.type})}return y(a.cloneNode)?a.cloneNode(!0):void 0}var g=[],i=[];if(b){if(H(b)||I(b))throw Qd("cpta","Can't copy! TypedArray destination cannot be mutated.");if(a===b)throw Qd("cpi","Can't copy! Source and destination are identical.");return Td(b)?b.length=0:d(b,function(a,c){"$$hashKey"!==c&&delete b[c]}),g.push(a),i.push(b),c(a,b)}return e(a)}function O(a,b){if(Td(a)){b=b||[];for(var c=0,d=a.length;d>c;c++)b[c]=a[c]}else if(t(a)){b=b||{};for(var e in a)"$"===e.charAt(0)&&"$"===e.charAt(1)||(b[e]=a[e])}return b||a}function P(a,b){if(a===b)return!0;if(null===a||null===b)return!1;if(a!==a&&b!==b)return!0;var c,d,e,f=typeof a,g=typeof b;if(f==g&&"object"==f){if(!Td(a)){if(x(a))return x(b)?P(a.getTime(),b.getTime()):!1;if(z(a))return z(b)?a.toString()==b.toString():!1;if(B(a)||B(b)||A(a)||A(b)||Td(b)||x(b)||z(b))return!1;e=pa();for(d in a)if("$"!==d.charAt(0)&&!y(a[d])){if(!P(a[d],b[d]))return!1;e[d]=!0}for(d in b)if(!(d in e)&&"$"!==d.charAt(0)&&s(b[d])&&!y(b[d]))return!1;return!0}if(!Td(b))return!1;if((c=a.length)==b.length){for(d=0;c>d;d++)if(!P(a[d],b[d]))return!1;return!0}}return!1}function Q(a,b,c){return a.concat(Ld.call(b,c))}function R(a,b){return Ld.call(a,b||0)}function S(a,b){var c=arguments.length>2?R(arguments,2):[];return!y(b)||b instanceof RegExp?b:c.length?function(){return arguments.length?b.apply(a,Q(c,arguments,0)):b.apply(a,c)}:function(){return arguments.length?b.apply(a,arguments):b.call(a)}}function T(b,c){var d=c;return"string"==typeof b&&"$"===b.charAt(0)&&"$"===b.charAt(1)?d=void 0:A(c)?d="$WINDOW":c&&a.document===c?d="$DOCUMENT":B(c)&&(d="$SCOPE"),d}function U(a,b){return r(a)?void 0:(w(b)||(b=b?2:null),JSON.stringify(a,T,b))}function V(a){return v(a)?JSON.parse(a):a}function W(a,b){a=a.replace(Zd,"");var c=Date.parse("Jan 01, 1970 00:00:00 "+a)/6e4;return isNaN(c)?b:c}function X(a,b){return a=new Date(a.getTime()),a.setMinutes(a.getMinutes()+b),a}function Y(a,b,c){c=c?-1:1;var d=a.getTimezoneOffset(),e=W(b,d);return X(a,c*(e-d))}function Z(a){a=Id(a).clone();try{a.empty()}catch(b){}var c=Id("<div>").append(a).html();try{return a[0].nodeType===de?Dd(c):c.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(a,b){return"<"+Dd(b)})}catch(b){return Dd(c)}}function $(a){try{return decodeURIComponent(a)}catch(b){}}function _(a){var b={};return d((a||"").split("&"),function(a){var c,d,e;a&&(d=a=a.replace(/\+/g,"%20"),c=a.indexOf("="),-1!==c&&(d=a.substring(0,c),e=a.substring(c+1)),d=$(d),s(d)&&(e=s(e)?$(e):!0,Cd.call(b,d)?Td(b[d])?b[d].push(e):b[d]=[b[d],e]:b[d]=e))}),b}function aa(a){var b=[];return d(a,function(a,c){Td(a)?d(a,function(a){b.push(ca(c,!0)+(a===!0?"":"="+ca(a,!0)))}):b.push(ca(c,!0)+(a===!0?"":"="+ca(a,!0)))}),b.length?b.join("&"):""}function ba(a){return ca(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function ca(a,b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,b?"%20":"+")}function da(a,b){var c,d,e=$d.length;for(d=0;e>d;++d)if(c=$d[d]+b,v(c=a.getAttribute(c)))return c;return null}function ea(a,b){var c,e,f={};d($d,function(b){var d=b+"app";!c&&a.hasAttribute&&a.hasAttribute(d)&&(c=a,e=a.getAttribute(d))}),d($d,function(b){var d,f=b+"app";!c&&(d=a.querySelector("["+f.replace(":","\\:")+"]"))&&(c=d,e=d.getAttribute(f))}),c&&(f.strictDi=null!==da(c,"strict-di"),b(c,e?[e]:[],f))}function fa(b,c,e){t(e)||(e={});var f={strictDi:!1};e=j(f,e);var g=function(){if(b=Id(b),b.injector()){var d=b[0]===a.document?"document":Z(b);throw Qd("btstrpd","App already bootstrapped with this element '{0}'",d.replace(/</,"&lt;").replace(/>/,"&gt;"))}c=c||[],c.unshift(["$provide",function(a){a.value("$rootElement",b)}]),e.debugInfoEnabled&&c.push(["$compileProvider",function(a){a.debugInfoEnabled(!0)}]),c.unshift("ng");var f=cb(c,e.strictDi);return f.invoke(["$rootScope","$rootElement","$compile","$injector",function(a,b,c,d){a.$apply(function(){b.data("$injector",d),c(b)(a)})}]),f},h=/^NG_ENABLE_DEBUG_INFO!/,i=/^NG_DEFER_BOOTSTRAP!/;return a&&h.test(a.name)&&(e.debugInfoEnabled=!0,a.name=a.name.replace(h,"")),a&&!i.test(a.name)?g():(a.name=a.name.replace(i,""),Rd.resumeBootstrap=function(a){return d(a,function(a){c.push(a)}),g()},void(y(Rd.resumeDeferredBootstrap)&&Rd.resumeDeferredBootstrap()))}function ga(){a.name="NG_ENABLE_DEBUG_INFO!"+a.name,a.location.reload()}function ha(a){var b=Rd.element(a).injector();if(!b)throw Qd("test","no injector found for element argument to getTestability");return b.get("$$testability")}function ia(a,b){return b=b||"_",a.replace(_d,function(a,c){return(c?b:"")+a.toLowerCase()})}function ja(){var b;if(!ae){var c=Yd();Jd=r(c)?a.jQuery:c?a[c]:void 0,Jd&&Jd.fn.on?(Id=Jd,j(Jd.fn,{scope:we.scope,isolateScope:we.isolateScope,controller:we.controller,injector:we.injector,inheritedData:we.inheritedData}),b=Jd.cleanData,Jd.cleanData=function(a){for(var c,d,e=0;null!=(d=a[e]);e++)c=Jd._data(d,"events"),c&&c.$destroy&&Jd(d).triggerHandler("$destroy");b(a)}):Id=Da,Rd.element=Id,ae=!0}}function ka(a,b,c){if(!a)throw Qd("areq","Argument '{0}' is {1}",b||"?",c||"required");return a}function la(a,b,c){return c&&Td(a)&&(a=a[a.length-1]),ka(y(a),b,"not a function, got "+(a&&"object"==typeof a?a.constructor.name||"Object":typeof a)),a}function ma(a,b){if("hasOwnProperty"===a)throw Qd("badname","hasOwnProperty is not a valid {0} name",b)}function na(a,b,c){if(!b)return a;for(var d,e=b.split("."),f=a,g=e.length,h=0;g>h;h++)d=e[h],a&&(a=(f=a)[d]);return!c&&y(a)?S(f,a):a}function oa(a){for(var b,c=a[0],d=a[a.length-1],e=1;c!==d&&(c=c.nextSibling);e++)(b||a[e]!==c)&&(b||(b=Id(Ld.call(a,0,e))),b.push(c));return b||a}function pa(){return Object.create(null)}function qa(a){function c(a,b,c){return a[b]||(a[b]=c())}var d=b("$injector"),e=b("ng"),f=c(a,"angular",Object);return f.$$minErr=f.$$minErr||b,c(f,"module",function(){var a={};return function(b,f,g){var h=function(a,b){if("hasOwnProperty"===a)throw e("badname","hasOwnProperty is not a valid {0} name",b)};return h(b,"module"),f&&a.hasOwnProperty(b)&&(a[b]=null),c(a,b,function(){function a(a,b,c,d){return d||(d=e),function(){return d[c||"push"]([a,b,arguments]),k}}function c(a,c){return function(d,f){return f&&y(f)&&(f.$$moduleName=b),e.push([a,c,arguments]),k}}if(!f)throw d("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",b);var e=[],h=[],i=[],j=a("$injector","invoke","push",h),k={_invokeQueue:e,_configBlocks:h,_runBlocks:i,requires:f,name:b,provider:c("$provide","provider"),factory:c("$provide","factory"),service:c("$provide","service"),value:a("$provide","value"),constant:a("$provide","constant","unshift"),decorator:c("$provide","decorator"),animation:c("$animateProvider","register"),filter:c("$filterProvider","register"),controller:c("$controllerProvider","register"),directive:c("$compileProvider","directive"),component:c("$compileProvider","component"),config:j,run:function(a){return i.push(a),this}};return g&&j(g),k})}})}function ra(a){var b=[];return JSON.stringify(a,function(a,c){if(c=T(a,c),t(c)){if(b.indexOf(c)>=0)return"...";b.push(c)}return c})}function sa(a){return"function"==typeof a?a.toString().replace(/ \{[\s\S]*$/,""):r(a)?"undefined":"string"!=typeof a?ra(a):a}function ta(c){j(c,{bootstrap:fa,copy:N,extend:j,merge:k,equals:P,element:Id,forEach:d,injector:cb,noop:n,bind:S,toJson:U,fromJson:V,identity:o,isUndefined:r,isDefined:s,isString:v,isFunction:y,isObject:t,isNumber:w,isElement:J,isArray:Td,version:he,isDate:x,lowercase:Dd,uppercase:Ed,callbacks:{counter:0},getTestability:ha,$$minErr:b,$$csp:Xd,reloadWithDebugInfo:ga}),(Kd=qa(a))("ng",["ngLocale"],["$provide",function(a){a.provider({$$sanitizeUri:wc}),a.provider("$compile",nb).directive({a:Ef,input:Xf,textarea:Xf,form:Jf,script:Sg,select:Vg,style:Xg,option:Wg,ngBind:$f,ngBindHtml:ag,ngBindTemplate:_f,ngClass:cg,ngClassEven:eg,ngClassOdd:dg,ngCloak:fg,ngController:gg,ngForm:Kf,ngHide:Lg,ngIf:jg,ngInclude:kg,ngInit:mg,ngNonBindable:Cg,ngPluralize:Gg,ngRepeat:Hg,ngShow:Kg,ngStyle:Mg,ngSwitch:Ng,ngSwitchWhen:Og,ngSwitchDefault:Pg,ngOptions:Fg,ngTransclude:Rg,ngModel:zg,ngList:ng,ngChange:bg,pattern:Zg,ngPattern:Zg,required:Yg,ngRequired:Yg,minlength:_g,ngMinlength:_g,maxlength:$g,ngMaxlength:$g,ngValue:Zf,ngModelOptions:Bg}).directive({ngInclude:lg}).directive(Ff).directive(hg),a.provider({$anchorScroll:db,$animate:Me,$animateCss:Pe,$$animateJs:Ke,$$animateQueue:Le,$$AnimateRunner:Oe,$$animateAsyncRun:Ne,$browser:jb,$cacheFactory:kb,$controller:tb,$document:ub,$exceptionHandler:vb,$filter:Kc,$$forceReflow:Ve,$interpolate:Jb,$interval:Kb,$http:Fb,$httpParamSerializer:xb,$httpParamSerializerJQLike:yb,$httpBackend:Hb,$xhrFactory:Gb,$location:Yb,$log:Zb,$parse:qc,$rootScope:vc,$q:rc,$$q:sc,$sce:Ac,$sceDelegate:zc,$sniffer:Bc,$templateCache:lb,$templateRequest:Cc,$$testability:Dc,$timeout:Ec,$window:Hc,$$rAF:uc,$$jqLite:Ya,$$HashMap:Ae,$$cookieReader:Jc})}])}function ua(){return++je}function va(a){return a.replace(me,function(a,b,c,d){return d?c.toUpperCase():c}).replace(ne,"Moz$1")}function wa(a){return!re.test(a)}function xa(a){var b=a.nodeType;return b===be||!b||b===fe}function ya(a){for(var b in ie[a.ng339])return!0;return!1}function za(a){for(var b=0,c=a.length;c>b;b++)Ha(a[b])}function Aa(a,b){var c,e,f,g,h=b.createDocumentFragment(),i=[];if(wa(a))i.push(b.createTextNode(a));else{for(c=c||h.appendChild(b.createElement("div")),e=(se.exec(a)||["",""])[1].toLowerCase(),f=ue[e]||ue._default,c.innerHTML=f[1]+a.replace(te,"<$1></$2>")+f[2],g=f[0];g--;)c=c.lastChild;i=Q(i,c.childNodes),c=h.firstChild,c.textContent=""}return h.textContent="",h.innerHTML="",d(i,function(a){h.appendChild(a)}),h}function Ba(b,c){c=c||a.document;var d;return(d=qe.exec(b))?[c.createElement(d[1])]:(d=Aa(b,c))?d.childNodes:[]}function Ca(a,b){var c=a.parentNode;c&&c.replaceChild(b,a),b.appendChild(a)}function Da(a){if(a instanceof Da)return a;var b;if(v(a)&&(a=Vd(a),b=!0),!(this instanceof Da)){if(b&&"<"!=a.charAt(0))throw pe("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new Da(a)}b?Na(this,Ba(a)):Na(this,a)}function Ea(a){return a.cloneNode(!0)}function Fa(a,b){if(b||Ha(a),a.querySelectorAll)for(var c=a.querySelectorAll("*"),d=0,e=c.length;e>d;d++)Ha(c[d])}function Ga(a,b,c,e){if(s(e))throw pe("offargs","jqLite#off() does not support the `selector` argument");var f=Ia(a),g=f&&f.events,h=f&&f.handle;if(h)if(b){var i=function(b){var d=g[b];s(c)&&M(d||[],c),s(c)&&d&&d.length>0||(le(a,b,h),delete g[b])};d(b.split(" "),function(a){i(a),oe[a]&&i(oe[a])})}else for(b in g)"$destroy"!==b&&le(a,b,h),delete g[b]}function Ha(a,b){var c=a.ng339,d=c&&ie[c];if(d){if(b)return void delete d.data[b];d.handle&&(d.events.$destroy&&d.handle({},"$destroy"),Ga(a)),delete ie[c],a.ng339=void 0}}function Ia(a,b){var c=a.ng339,d=c&&ie[c];return b&&!d&&(a.ng339=c=ua(),d=ie[c]={events:{},data:{},handle:void 0}),d}function Ja(a,b,c){if(xa(a)){var d=s(c),e=!d&&b&&!t(b),f=!b,g=Ia(a,!e),h=g&&g.data;if(d)h[b]=c;else{if(f)return h;if(e)return h&&h[b];j(h,b)}}}function Ka(a,b){return a.getAttribute?(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+b+" ")>-1:!1}function La(a,b){b&&a.setAttribute&&d(b.split(" "),function(b){a.setAttribute("class",Vd((" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+Vd(b)+" "," ")))})}function Ma(a,b){if(b&&a.setAttribute){var c=(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");d(b.split(" "),function(a){a=Vd(a),-1===c.indexOf(" "+a+" ")&&(c+=a+" ")}),a.setAttribute("class",Vd(c))}}function Na(a,b){if(b)if(b.nodeType)a[a.length++]=b;else{var c=b.length;if("number"==typeof c&&b.window!==b){if(c)for(var d=0;c>d;d++)a[a.length++]=b[d]}else a[a.length++]=b}}function Oa(a,b){return Pa(a,"$"+(b||"ngController")+"Controller")}function Pa(a,b,c){a.nodeType==fe&&(a=a.documentElement);for(var d=Td(b)?b:[b];a;){for(var e=0,f=d.length;f>e;e++)if(s(c=Id.data(a,d[e])))return c;a=a.parentNode||a.nodeType===ge&&a.host}}function Qa(a){for(Fa(a,!0);a.firstChild;)a.removeChild(a.firstChild)}function Ra(a,b){b||Fa(a);var c=a.parentNode;c&&c.removeChild(a)}function Sa(b,c){c=c||a,"complete"===c.document.readyState?c.setTimeout(b):Id(c).on("load",b)}function Ta(a,b){var c=xe[b.toLowerCase()];return c&&ye[L(a)]&&c}function Ua(a){return ze[a]}function Va(a,b){var c=function(c,d){c.isDefaultPrevented=function(){return c.defaultPrevented};var e=b[d||c.type],f=e?e.length:0;if(f){if(r(c.immediatePropagationStopped)){var g=c.stopImmediatePropagation;c.stopImmediatePropagation=function(){c.immediatePropagationStopped=!0,c.stopPropagation&&c.stopPropagation(),g&&g.call(c)}}c.isImmediatePropagationStopped=function(){return c.immediatePropagationStopped===!0};var h=e.specialHandlerWrapper||Wa;f>1&&(e=O(e));for(var i=0;f>i;i++)c.isImmediatePropagationStopped()||h(a,c,e[i])}};return c.elem=a,c}function Wa(a,b,c){c.call(a,b)}function Xa(a,b,c){var d=b.relatedTarget;d&&(d===a||ve.call(a,d))||c.call(a,b)}function Ya(){this.$get=function(){return j(Da,{hasClass:function(a,b){return a.attr&&(a=a[0]),Ka(a,b)},addClass:function(a,b){return a.attr&&(a=a[0]),Ma(a,b)},removeClass:function(a,b){return a.attr&&(a=a[0]),La(a,b)}})}}function Za(a,b){var c=a&&a.$$hashKey;if(c)return"function"==typeof c&&(c=a.$$hashKey()),c;var d=typeof a;return c="function"==d||"object"==d&&null!==a?a.$$hashKey=d+":"+(b||g)():d+":"+a}function $a(a,b){if(b){var c=0;this.nextUid=function(){return++c}}d(a,this.put,this)}function _a(a){var b=Function.prototype.toString.call(a).replace(Fe,""),c=b.match(Be)||b.match(Ce);return c}function ab(a){var b=_a(a);return b?"function("+(b[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function bb(a,b,c){var e,f,g;if("function"==typeof a){if(!(e=a.$inject)){if(e=[],a.length){if(b)throw v(c)&&c||(c=a.name||ab(a)),Ge("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",c);f=_a(a),d(f[1].split(De),function(a){a.replace(Ee,function(a,b,c){e.push(c)})})}a.$inject=e}}else Td(a)?(g=a.length-1,la(a[g],"fn"),e=a.slice(0,g)):la(a,"fn",!0);return e}function cb(a,b){function c(a){return function(b,c){return t(b)?void d(b,f(a)):a(b,c)}}function e(a,b){if(ma(a,"service"),(y(b)||Td(b))&&(b=x.instantiate(b)),!b.$get)throw Ge("pget","Provider '{0}' must define $get factory method.",a);return w[a+q]=b}function g(a,b){return function(){var c=B.invoke(b,this);if(r(c))throw Ge("undef","Provider '{0}' must return a value from $get factory method.",a);return c}}function h(a,b,c){return e(a,{$get:c!==!1?g(a,b):b})}function i(a,b){return h(a,["$injector",function(a){return a.instantiate(b)}])}function j(a,b){return h(a,p(b),!1)}function k(a,b){ma(a,"constant"),w[a]=b,z[a]=b}function l(a,b){var c=x.get(a+q),d=c.$get;c.$get=function(){var a=B.invoke(d,c);return B.invoke(b,null,{$delegate:a})}}function m(a){ka(r(a)||Td(a),"modulesToLoad","not an array");var b,c=[];return d(a,function(a){function d(a){var b,c;for(b=0,c=a.length;c>b;b++){var d=a[b],e=x.get(d[0]);e[d[1]].apply(e,d[2])}}if(!u.get(a)){u.put(a,!0);try{v(a)?(b=Kd(a),c=c.concat(m(b.requires)).concat(b._runBlocks),d(b._invokeQueue),d(b._configBlocks)):y(a)?c.push(x.invoke(a)):Td(a)?c.push(x.invoke(a)):la(a,"module")}catch(e){throw Td(a)&&(a=a[a.length-1]),e.message&&e.stack&&-1==e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),Ge("modulerr","Failed to instantiate module {0} due to:\n{1}",a,e.stack||e.message||e)}}}),c}function n(a,c){function d(b,d){if(a.hasOwnProperty(b)){if(a[b]===o)throw Ge("cdep","Circular dependency found: {0}",b+" <- "+s.join(" <- "));return a[b]}try{return s.unshift(b),a[b]=o,a[b]=c(b,d)}catch(e){throw a[b]===o&&delete a[b],e}finally{s.shift()}}function e(a,c,e){for(var f=[],g=cb.$$annotate(a,b,e),h=0,i=g.length;i>h;h++){var j=g[h];if("string"!=typeof j)throw Ge("itkn","Incorrect injection token! Expected service name as string, got {0}",j);f.push(c&&c.hasOwnProperty(j)?c[j]:d(j,e))}return f}function f(a){return 11>=Hd?!1:"function"==typeof a&&/^(?:class\s|constructor\()/.test(Function.prototype.toString.call(a))}function g(a,b,c,d){"string"==typeof c&&(d=c,c=null);var g=e(a,c,d);return Td(a)&&(a=a[a.length-1]),f(a)?(g.unshift(null),new(Function.prototype.bind.apply(a,g))):a.apply(b,g)}function h(a,b,c){var d=Td(a)?a[a.length-1]:a,f=e(a,b,c);return f.unshift(null),new(Function.prototype.bind.apply(d,f))}return{invoke:g,instantiate:h,get:d,annotate:cb.$$annotate,has:function(b){return w.hasOwnProperty(b+q)||a.hasOwnProperty(b)}}}b=b===!0;var o={},q="Provider",s=[],u=new $a([],!0),w={$provide:{provider:c(e),factory:c(h),service:c(i),value:c(j),constant:c(k),decorator:l}},x=w.$injector=n(w,function(a,b){throw Rd.isString(b)&&s.push(b),Ge("unpr","Unknown provider: {0}",s.join(" <- "))}),z={},A=n(z,function(a,b){var c=x.get(a+q,b);return B.invoke(c.$get,c,void 0,a)}),B=A;w["$injector"+q]={$get:p(A)};var C=m(a);return B=A.get("$injector"),B.strictDi=b,d(C,function(a){a&&B.invoke(a)}),B}function db(){var a=!0;this.disableAutoScrolling=function(){a=!1},this.$get=["$window","$location","$rootScope",function(b,c,d){function e(a){var b=null;return Array.prototype.some.call(a,function(a){return"a"===L(a)?(b=a,!0):void 0}),b}function f(){var a=h.yOffset;if(y(a))a=a();else if(J(a)){var c=a[0],d=b.getComputedStyle(c);a="fixed"!==d.position?0:c.getBoundingClientRect().bottom}else w(a)||(a=0);return a}function g(a){if(a){a.scrollIntoView();var c=f();if(c){var d=a.getBoundingClientRect().top;b.scrollBy(0,d-c)}}else b.scrollTo(0,0)}function h(a){a=v(a)?a:c.hash();var b;a?(b=i.getElementById(a))?g(b):(b=e(i.getElementsByName(a)))?g(b):"top"===a&&g(null):g(null)}var i=b.document;return a&&d.$watch(function(){return c.hash()},function(a,b){a===b&&""===a||Sa(function(){d.$evalAsync(h)})}),h}]}function eb(a,b){return a||b?a?b?(Td(a)&&(a=a.join(" ")),Td(b)&&(b=b.join(" ")),a+" "+b):a:b:""}function fb(a){for(var b=0;b<a.length;b++){var c=a[b];if(c.nodeType===Ie)return c}}function gb(a){v(a)&&(a=a.split(" "));var b=pa();return d(a,function(a){a.length&&(b[a]=!0)}),b}function hb(a){return t(a)?a:{}}function ib(a,b,c,e){function f(a){try{a.apply(null,R(arguments,1))}finally{if(s--,0===s)for(;t.length;)try{t.pop()()}catch(b){c.error(b)}}}function g(a){var b=a.indexOf("#");return-1===b?"":a.substr(b)}function h(){y=null,i(),j()}function i(){u=z(),u=r(u)?null:u,P(u,C)&&(u=C),C=u}function j(){w===k.url()&&v===u||(w=k.url(),v=u,d(A,function(a){a(k.url(),u)}))}var k=this,l=a.location,m=a.history,o=a.setTimeout,p=a.clearTimeout,q={};k.isMock=!1;var s=0,t=[];k.$$completeOutstandingRequest=f,k.$$incOutstandingRequestCount=function(){s++},k.notifyWhenNoOutstandingRequests=function(a){0===s?a():t.push(a)};var u,v,w=l.href,x=b.find("base"),y=null,z=e.history?function(){try{return m.state}catch(a){}}:n;i(),v=u,k.url=function(b,c,d){if(r(d)&&(d=null),l!==a.location&&(l=a.location),m!==a.history&&(m=a.history),b){var f=v===d;if(w===b&&(!e.history||f))return k;var h=w&&Pb(w)===Pb(b);return w=b,v=d,!e.history||h&&f?(h&&!y||(y=b),c?l.replace(b):h?l.hash=g(b):l.href=b,l.href!==b&&(y=b)):(m[c?"replaceState":"pushState"](d,"",b),i(),v=u),k}return y||l.href.replace(/%27/g,"'")},k.state=function(){return u};var A=[],B=!1,C=null;k.onUrlChange=function(b){return B||(e.history&&Id(a).on("popstate",h),Id(a).on("hashchange",h),B=!0),A.push(b),b},k.$$applicationDestroyed=function(){Id(a).off("hashchange popstate",h)},k.$$checkUrlChange=j,k.baseHref=function(){var a=x.attr("href");return a?a.replace(/^(https?\:)?\/\/[^\/]*/,""):""},k.defer=function(a,b){var c;return s++,c=o(function(){delete q[c],f(a)},b||0),q[c]=!0,c},k.defer.cancel=function(a){return q[a]?(delete q[a],p(a),f(n),!0):!1}}function jb(){this.$get=["$window","$log","$sniffer","$document",function(a,b,c,d){return new ib(a,d,b,c)}]}function kb(){this.$get=function(){function a(a,d){function e(a){a!=m&&(n?n==a&&(n=a.n):n=a,f(a.n,a.p),f(a,m),m=a,m.n=null)}function f(a,b){a!=b&&(a&&(a.p=b),b&&(b.n=a))}if(a in c)throw b("$cacheFactory")("iid","CacheId '{0}' is already taken!",a);var g=0,h=j({},d,{id:a}),i=pa(),k=d&&d.capacity||Number.MAX_VALUE,l=pa(),m=null,n=null;return c[a]={put:function(a,b){if(!r(b)){if(k<Number.MAX_VALUE){var c=l[a]||(l[a]={key:a});e(c)}return a in i||g++,i[a]=b,g>k&&this.remove(n.key),b}},get:function(a){if(k<Number.MAX_VALUE){var b=l[a];if(!b)return;e(b)}return i[a]},remove:function(a){if(k<Number.MAX_VALUE){var b=l[a];if(!b)return;b==m&&(m=b.p),b==n&&(n=b.n),f(b.n,b.p),delete l[a]}a in i&&(delete i[a],g--)},removeAll:function(){i=pa(),g=0,l=pa(),m=n=null},destroy:function(){i=null,h=null,l=null,delete c[a]},info:function(){return j({},h,{size:g})}}}var c={};return a.info=function(){var a={};return d(c,function(b,c){a[c]=b.info()}),a},a.get=function(a){return c[a]},a}}function lb(){this.$get=["$cacheFactory",function(a){return a("templates")}]}function mb(){}function nb(b,c){function e(a,b,c){var e=/^\s*([@&<]|=(\*?))(\??)\s*(\w*)\s*$/,f=pa();return d(a,function(a,d){if(a in z)return void(f[d]=z[a]);var g=a.match(e);if(!g)throw Qe("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",b,d,a,c?"controller bindings definition":"isolate scope definition");f[d]={mode:g[1][0],collection:"*"===g[2],optional:"?"===g[3],attrName:g[4]||d},g[4]&&(z[a]=f[d])}),f}function g(a,b){var c={isolateScope:null,bindToController:null};if(t(a.scope)&&(a.bindToController===!0?(c.bindToController=e(a.scope,b,!0),c.isolateScope={}):c.isolateScope=e(a.scope,b,!1)),t(a.bindToController)&&(c.bindToController=e(a.bindToController,b,!0)),t(c.bindToController)){var d=a.controller,f=a.controllerAs;if(!d)throw Qe("noctrl","Cannot bind to controller without directive '{0}'s controller.",b);if(!sb(d,f))throw Qe("noident","Cannot bind to controller without identifier for directive '{0}'.",b)}return c}function h(a){var b=a.charAt(0);if(!b||b!==Dd(b))throw Qe("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",a);if(a!==a.trim())throw Qe("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",a)}var i={},k="Directive",l=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,q=/(([\w\-]+)(?:\:([^;]+))?;?)/,u=K("ngSrc,ngSrcset,src,srcset"),w=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,x=/^(on[a-z]+|formaction)$/,z=pa();this.directive=function D(a,c){return ma(a,"directive"),v(a)?(h(a),ka(c,"directiveFactory"),i.hasOwnProperty(a)||(i[a]=[],b.factory(a+k,["$injector","$exceptionHandler",function(b,c){var e=[];return d(i[a],function(d,f){try{var g=b.invoke(d);y(g)?g={compile:p(g)}:!g.compile&&g.link&&(g.compile=p(g.link)),g.priority=g.priority||0,g.index=f,g.name=g.name||a,g.require=g.require||g.controller&&g.name,g.restrict=g.restrict||"EA",g.$$moduleName=d.$$moduleName,e.push(g)}catch(h){c(h)}}),e}])),i[a].push(c)):d(a,f(D)),this},this.component=function(a,b){function c(a){function c(b){return y(b)||Td(b)?function(c,d){return a.invoke(b,this,{$element:c,$attrs:d})}:b}var f=b.template||b.templateUrl?b.template:"",g={controller:e,controllerAs:sb(b.controller)||b.controllerAs||"$ctrl",template:c(f),templateUrl:c(b.templateUrl),transclude:b.transclude,scope:{},bindToController:b.bindings||{},restrict:"E",require:b.require};return d(b,function(a,b){"$"===b.charAt(0)&&(g[b]=a)}),g}var e=b.controller||function(){};return d(b,function(a,b){"$"===b.charAt(0)&&(c[b]=a,y(e)&&(e[b]=a))}),c.$inject=["$injector"],this.directive(a,c)},this.aHrefSanitizationWhitelist=function(a){return s(a)?(c.aHrefSanitizationWhitelist(a),this):c.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(a){return s(a)?(c.imgSrcSanitizationWhitelist(a),this):c.imgSrcSanitizationWhitelist()};var A=!0;this.debugInfoEnabled=function(a){return s(a)?(A=a,this):A};var C=10;this.onChangesTtl=function(a){return arguments.length?(C=a,this):C},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function(b,c,e,f,h,p,s,z,D,E){function G(){try{if(!--ta)throw qa=void 0,Qe("infchng","{0} $onChanges() iterations reached. Aborting!\n",C);s.$apply(function(){for(var a=0,b=qa.length;b>a;++a)qa[a]();qa=void 0})}finally{ta++}}function H(a,b){if(b){var c,d,e,f=Object.keys(b);for(c=0,d=f.length;d>c;c++)e=f[c],this[e]=b[e]}else this.$attr={};this.$$element=a}function I(a,b,c){sa.innerHTML="<span "+b+">";var d=sa.firstChild.attributes,e=d[0];d.removeNamedItem(e.name),e.value=c,a.attributes.setNamedItem(e)}function J(a,b){try{a.addClass(b)}catch(c){}}function K(b,c,d,e,f){b instanceof Id||(b=Id(b));for(var g=/\S+/,h=0,i=b.length;i>h;h++){var j=b[h];j.nodeType===de&&j.nodeValue.match(g)&&Ca(j,b[h]=a.document.createElement("span"));
}var k=O(b,c,b,d,e,f);K.$$addScopeClass(b);var l=null;return function(a,c,d){ka(a,"scope"),f&&f.needsNewScope&&(a=a.$parent.$new()),d=d||{};var e=d.parentBoundTranscludeFn,g=d.transcludeControllers,h=d.futureParentElement;e&&e.$$boundTransclude&&(e=e.$$boundTransclude),l||(l=N(h));var i;if(i="html"!==l?Id(ga(l,Id("<div>").append(b).html())):c?we.clone.call(b):b,g)for(var j in g)i.data("$"+j+"Controller",g[j].instance);return K.$$addScopeInfo(i,a),c&&c(i,a),k&&k(a,i,i,e),i}}function N(a){var b=a&&a[0];return b&&"foreignobject"!==L(b)&&Od.call(b).match(/SVG/)?"svg":"html"}function O(a,b,c,d,e,f){function g(a,c,d,e){var f,g,h,i,j,k,l,m,p;if(n){var q=c.length;for(p=new Array(q),j=0;j<o.length;j+=3)l=o[j],p[l]=c[l]}else p=c;for(j=0,k=o.length;k>j;)h=p[o[j++]],f=o[j++],g=o[j++],f?(f.scope?(i=a.$new(),K.$$addScopeInfo(Id(h),i)):i=a,m=f.transcludeOnThisElement?Q(a,f.transclude,e):!f.templateOnThisElement&&e?e:!e&&b?Q(a,b):null,f(g,i,h,d,m)):g&&g(a,h.childNodes,void 0,e)}for(var h,i,j,k,l,m,n,o=[],p=0;p<a.length;p++)h=new H,i=S(a[p],[],h,0===p?d:void 0,e),j=i.length?W(i,a[p],h,b,c,null,[],[],f):null,j&&j.scope&&K.$$addScopeClass(h.$$element),l=j&&j.terminal||!(k=a[p].childNodes)||!k.length?null:O(k,j?(j.transcludeOnThisElement||!j.templateOnThisElement)&&j.transclude:b),(j||l)&&(o.push(p,j,l),m=!0,n=n||j),f=null;return m?g:null}function Q(a,b,c){function d(d,e,f,g,h){return d||(d=a.$new(!1,h),d.$$transcluded=!0),b(d,e,{parentBoundTranscludeFn:c,transcludeControllers:f,futureParentElement:g})}var e=d.$$slots=pa();for(var f in b.$$slots)b.$$slots[f]?e[f]=Q(a,b.$$slots[f],c):e[f]=null;return d}function S(a,b,c,d,e){var f,g,h=a.nodeType,i=c.$attr;switch(h){case be:_(b,pb(L(a)),"E",d,e);for(var j,k,m,n,o,p,r=a.attributes,s=0,u=r&&r.length;u>s;s++){var w=!1,x=!1;j=r[s],k=j.name,o=Vd(j.value),n=pb(k),(p=ya.test(n))&&(k=k.replace(Se,"").substr(8).replace(/_(.)/g,function(a,b){return b.toUpperCase()}));var y=n.match(za);y&&aa(y[1])&&(w=k,x=k.substr(0,k.length-5)+"end",k=k.substr(0,k.length-6)),m=pb(k.toLowerCase()),i[m]=k,!p&&c.hasOwnProperty(m)||(c[m]=o,Ta(a,m)&&(c[m]=!0)),ja(a,b,o,m,p),_(b,m,"A",d,e,w,x)}if(g=a.className,t(g)&&(g=g.animVal),v(g)&&""!==g)for(;f=q.exec(g);)m=pb(f[2]),_(b,m,"C",d,e)&&(c[m]=Vd(f[3])),g=g.substr(f.index+f[0].length);break;case de:if(11===Hd)for(;a.parentNode&&a.nextSibling&&a.nextSibling.nodeType===de;)a.nodeValue=a.nodeValue+a.nextSibling.nodeValue,a.parentNode.removeChild(a.nextSibling);fa(b,a.nodeValue);break;case ee:try{f=l.exec(a.nodeValue),f&&(m=pb(f[1]),_(b,m,"M",d,e)&&(c[m]=Vd(f[2])))}catch(z){}}return b.sort(da),b}function T(a,b,c){var d=[],e=0;if(b&&a.hasAttribute&&a.hasAttribute(b)){do{if(!a)throw Qe("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",b,c);a.nodeType==be&&(a.hasAttribute(b)&&e++,a.hasAttribute(c)&&e--),d.push(a),a=a.nextSibling}while(e>0)}else d.push(a);return Id(d)}function U(a,b,c){return function(d,e,f,g,h){return e=T(e[0],b,c),a(d,e,f,g,h)}}function V(a,b,c,d,e,f){var g;return a?K(b,c,d,e,f):function(){return g||(g=K(b,c,d,e,f),b=c=f=null),g.apply(this,arguments)}}function W(a,b,c,f,g,h,i,k,l){function m(a,b,c,d){a&&(c&&(a=U(a,c,d)),a.require=o.require,a.directiveName=p,(z===o||o.$$isolateScope)&&(a=ma(a,{isolateScope:!0})),i.push(a)),b&&(c&&(b=U(b,c,d)),b.require=o.require,b.directiveName=p,(z===o||o.$$isolateScope)&&(b=ma(b,{isolateScope:!0})),k.push(b))}function n(a,e,f,g,h){function l(a,b,c,d){var e;if(B(a)||(d=c,c=b,b=a,a=void 0),F&&(e=s),c||(c=F?v.parent():v),!d)return h(a,b,e,c,M);var f=h.$$slots[d];if(f)return f(a,b,e,c,M);if(r(f))throw Qe("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',d,Z(v))}var m,n,o,p,q,s,u,v,C,D;b===f?(C=c,v=c.$$element):(v=Id(f),C=new H(v,c)),q=e,z?p=e.$new(!0):w&&(q=e.$parent),h&&(u=l,u.$$boundTransclude=h,u.isSlotFilled=function(a){return!!h.$$slots[a]}),x&&(s=Y(v,C,u,x,p,e,z)),z&&(K.$$addScopeInfo(v,p,!0,!(A&&(A===z||A===z.$$originalDirective))),K.$$addScopeClass(v,!0),p.$$isolateBindings=z.$$isolateBindings,D=oa(e,C,p,p.$$isolateBindings,z),D.removeWatches&&p.$on("$destroy",D.removeWatches));for(var E in s){var G=x[E],I=s[E],J=G.$$bindings.bindToController;I.identifier&&J?I.bindingInfo=oa(q,C,I.instance,J,G):I.bindingInfo={};var L=I();L!==I.instance&&(I.instance=L,v.data("$"+G.name+"Controller",L),I.bindingInfo.removeWatches&&I.bindingInfo.removeWatches(),I.bindingInfo=oa(q,C,I.instance,J,G))}for(d(x,function(a,b){var c=a.require;a.bindToController&&!Td(c)&&t(c)&&j(s[b].instance,X(b,c,v,s))}),d(s,function(a){var b=a.instance;y(b.$onChanges)&&b.$onChanges(a.bindingInfo.initialChanges),y(b.$onInit)&&b.$onInit(),y(b.$onDestroy)&&q.$on("$destroy",function(){b.$onDestroy()})}),m=0,n=i.length;n>m;m++)o=i[m],na(o,o.isolateScope?p:e,v,C,o.require&&X(o.directiveName,o.require,v,s),u);var M=e;for(z&&(z.template||null===z.templateUrl)&&(M=p),a&&a(M,f.childNodes,void 0,h),m=k.length-1;m>=0;m--)o=k[m],na(o,o.isolateScope?p:e,v,C,o.require&&X(o.directiveName,o.require,v,s),u);d(s,function(a){var b=a.instance;y(b.$postLink)&&b.$postLink()})}l=l||{};for(var o,p,q,s,u,v=-Number.MAX_VALUE,w=l.newScopeDirective,x=l.controllerDirectives,z=l.newIsolateScopeDirective,A=l.templateDirective,C=l.nonTlbTranscludeDirective,D=!1,E=!1,F=l.hasElementTranscludeDirective,G=c.$$element=Id(b),I=h,J=f,M=!1,N=!1,O=0,P=a.length;P>O;O++){o=a[O];var Q=o.$$start,W=o.$$end;if(Q&&(G=T(b,Q,W)),q=void 0,v>o.priority)break;if((u=o.scope)&&(o.templateUrl||(t(u)?(ea("new/isolated scope",z||w,o,G),z=o):ea("new/isolated scope",z,o,G)),w=w||o),p=o.name,!M&&(o.replace&&(o.templateUrl||o.template)||o.transclude&&!o.$$tlb)){for(var _,aa=O+1;_=a[aa++];)if(_.transclude&&!_.$$tlb||_.replace&&(_.templateUrl||_.template)){N=!0;break}M=!0}if(!o.templateUrl&&o.controller&&(u=o.controller,x=x||pa(),ea("'"+p+"' controller",x[p],o,G),x[p]=o),u=o.transclude)if(D=!0,o.$$tlb||(ea("transclusion",C,o,G),C=o),"element"==u)F=!0,v=o.priority,q=G,G=c.$$element=Id(K.$$createComment(p,c[p])),b=G[0],la(g,R(q),b),q[0].$$parentNode=q[0].parentNode,J=V(N,q,f,v,I&&I.name,{nonTlbTranscludeDirective:C});else{var da=pa();if(q=Id(Ea(b)).contents(),t(u)){q=[];var fa=pa(),ha=pa();d(u,function(a,b){var c="?"===a.charAt(0);a=c?a.substring(1):a,fa[a]=b,da[b]=null,ha[b]=c}),d(G.contents(),function(a){var b=fa[pb(L(a))];b?(ha[b]=!0,da[b]=da[b]||[],da[b].push(a)):q.push(a)}),d(ha,function(a,b){if(!a)throw Qe("reqslot","Required transclusion slot `{0}` was not filled.",b)});for(var ia in da)da[ia]&&(da[ia]=V(N,da[ia],f))}G.empty(),J=V(N,q,f,void 0,void 0,{needsNewScope:o.$$isolateScope||o.$$newScope}),J.$$slots=da}if(o.template)if(E=!0,ea("template",A,o,G),A=o,u=y(o.template)?o.template(G,c):o.template,u=xa(u),o.replace){if(I=o,q=wa(u)?[]:rb(ga(o.templateNamespace,Vd(u))),b=q[0],1!=q.length||b.nodeType!==be)throw Qe("tplrt","Template for directive '{0}' must have exactly one root element. {1}",p,"");la(g,G,b);var ja={$attr:{}},ka=S(b,[],ja),qa=a.splice(O+1,a.length-(O+1));(z||w)&&$(ka,z,w),a=a.concat(ka).concat(qa),ba(c,ja),P=a.length}else G.html(u);if(o.templateUrl)E=!0,ea("template",A,o,G),A=o,o.replace&&(I=o),n=ca(a.splice(O,a.length-O),G,c,g,D&&J,i,k,{controllerDirectives:x,newScopeDirective:w!==o&&w,newIsolateScopeDirective:z,templateDirective:A,nonTlbTranscludeDirective:C}),P=a.length;else if(o.compile)try{s=o.compile(G,c,J),y(s)?m(null,s,Q,W):s&&m(s.pre,s.post,Q,W)}catch(ra){e(ra,Z(G))}o.terminal&&(n.terminal=!0,v=Math.max(v,o.priority))}return n.scope=w&&w.scope===!0,n.transcludeOnThisElement=D,n.templateOnThisElement=E,n.transclude=J,l.hasElementTranscludeDirective=F,n}function X(a,b,c,e){var f;if(v(b)){var g=b.match(w),h=b.substring(g[0].length),i=g[1]||g[3],j="?"===g[2];if("^^"===i?c=c.parent():(f=e&&e[h],f=f&&f.instance),!f){var k="$"+h+"Controller";f=i?c.inheritedData(k):c.data(k)}if(!f&&!j)throw Qe("ctreq","Controller '{0}', required by directive '{1}', can't be found!",h,a)}else if(Td(b)){f=[];for(var l=0,m=b.length;m>l;l++)f[l]=X(a,b[l],c,e)}else t(b)&&(f={},d(b,function(b,d){f[d]=X(a,b,c,e)}));return f||null}function Y(a,b,c,d,e,f,g){var h=pa();for(var i in d){var j=d[i],k={$scope:j===g||j.$$isolateScope?e:f,$element:a,$attrs:b,$transclude:c},l=j.controller;"@"==l&&(l=b[j.name]);var m=p(l,k,!0,j.controllerAs);h[j.name]=m,a.data("$"+j.name+"Controller",m.instance)}return h}function $(a,b,c){for(var d=0,e=a.length;e>d;d++)a[d]=m(a[d],{$$isolateScope:b,$$newScope:c})}function _(a,c,d,f,h,j,l){if(c===h)return null;var n=null;if(i.hasOwnProperty(c))for(var o,p=b.get(c+k),q=0,s=p.length;s>q;q++)try{if(o=p[q],(r(f)||f>o.priority)&&-1!=o.restrict.indexOf(d)){if(j&&(o=m(o,{$$start:j,$$end:l})),!o.$$bindings){var u=o.$$bindings=g(o,o.name);t(u.isolateScope)&&(o.$$isolateBindings=u.isolateScope)}a.push(o),n=o}}catch(v){e(v)}return n}function aa(a){if(i.hasOwnProperty(a))for(var c,d=b.get(a+k),e=0,f=d.length;f>e;e++)if(c=d[e],c.multiElement)return!0;return!1}function ba(a,b){var c=b.$attr,e=a.$attr,f=a.$$element;d(a,function(d,e){"$"!=e.charAt(0)&&(b[e]&&b[e]!==d&&(d+=("style"===e?";":" ")+b[e]),a.$set(e,d,!0,c[e]))}),d(b,function(b,d){"class"==d?(J(f,b),a["class"]=(a["class"]?a["class"]+" ":"")+b):"style"==d?(f.attr("style",f.attr("style")+";"+b),a.style=(a.style?a.style+";":"")+b):"$"==d.charAt(0)||a.hasOwnProperty(d)||(a[d]=b,e[d]=c[d])})}function ca(a,b,c,e,g,h,i,j){var k,l,n=[],o=b[0],p=a.shift(),q=m(p,{templateUrl:null,transclude:null,replace:null,$$originalDirective:p}),r=y(p.templateUrl)?p.templateUrl(b,c):p.templateUrl,s=p.templateNamespace;return b.empty(),f(r).then(function(f){var m,u,v,w;if(f=xa(f),p.replace){if(v=wa(f)?[]:rb(ga(s,Vd(f))),m=v[0],1!=v.length||m.nodeType!==be)throw Qe("tplrt","Template for directive '{0}' must have exactly one root element. {1}",p.name,r);u={$attr:{}},la(e,b,m);var x=S(m,[],u);t(p.scope)&&$(x,!0),a=x.concat(a),ba(c,u)}else m=o,b.html(f);for(a.unshift(q),k=W(a,m,c,g,b,p,h,i,j),d(e,function(a,c){a==m&&(e[c]=b[0])}),l=O(b[0].childNodes,g);n.length;){var y=n.shift(),z=n.shift(),A=n.shift(),B=n.shift(),C=b[0];if(!y.$$destroyed){if(z!==o){var D=z.className;j.hasElementTranscludeDirective&&p.replace||(C=Ea(m)),la(A,Id(z),C),J(Id(C),D)}w=k.transcludeOnThisElement?Q(y,k.transclude,B):B,k(l,y,C,e,w)}}n=null}),function(a,b,c,d,e){var f=e;b.$$destroyed||(n?n.push(b,c,d,f):(k.transcludeOnThisElement&&(f=Q(b,k.transclude,e)),k(l,b,c,d,f)))}}function da(a,b){var c=b.priority-a.priority;return 0!==c?c:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function ea(a,b,c,d){function e(a){return a?" (module: "+a+")":""}if(b)throw Qe("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",b.name,e(b.$$moduleName),c.name,e(c.$$moduleName),a,Z(d))}function fa(a,b){var d=c(b,!0);d&&a.push({priority:0,compile:function(a){var b=a.parent(),c=!!b.length;return c&&K.$$addBindingClass(b),function(a,b){var e=b.parent();c||K.$$addBindingClass(e),K.$$addBindingInfo(e,d.expressions),a.$watch(d,function(a){b[0].nodeValue=a})}}})}function ga(b,c){switch(b=Dd(b||"html")){case"svg":case"math":var d=a.document.createElement("div");return d.innerHTML="<"+b+">"+c+"</"+b+">",d.childNodes[0].childNodes;default:return c}}function ha(a,b){if("srcdoc"==b)return z.HTML;var c=L(a);return"xlinkHref"==b||"form"==c&&"action"==b||"img"!=c&&("src"==b||"ngSrc"==b)?z.RESOURCE_URL:void 0}function ja(a,b,d,e,f){var g=ha(a,e);f=u[e]||f;var h=c(d,!0,g,f);if(h){if("multiple"===e&&"select"===L(a))throw Qe("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",Z(a));b.push({priority:100,compile:function(){return{pre:function(a,b,i){var j=i.$$observers||(i.$$observers=pa());if(x.test(e))throw Qe("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");var k=i[e];k!==d&&(h=k&&c(k,!0,g,f),d=k),h&&(i[e]=h(a),(j[e]||(j[e]=[])).$$inter=!0,(i.$$observers&&i.$$observers[e].$$scope||a).$watch(h,function(a,b){"class"===e&&a!=b?i.$updateClass(a,b):i.$set(e,a)}))}}}})}}function la(b,c,d){var e,f,g=c[0],h=c.length,i=g.parentNode;if(b)for(e=0,f=b.length;f>e;e++)if(b[e]==g){b[e++]=d;for(var j=e,k=j+h-1,l=b.length;l>j;j++,k++)l>k?b[j]=b[k]:delete b[j];b.length-=h-1,b.context===g&&(b.context=d);break}i&&i.replaceChild(d,g);var m=a.document.createDocumentFragment();for(e=0;h>e;e++)m.appendChild(c[e]);for(Id.hasData(g)&&(Id.data(d,Id.data(g)),Id(g).off("$destroy")),Id.cleanData(m.querySelectorAll("*")),e=1;h>e;e++)delete c[e];c[0]=d,c.length=1}function ma(a,b){return j(function(){return a.apply(null,arguments)},a,b)}function na(a,b,c,d,f,g){try{a(b,c,d,f,g)}catch(h){e(h,Z(c))}}function oa(a,b,e,f,g){function i(b,c,d){y(e.$onChanges)&&c!==d&&(qa||(a.$$postDigest(G),qa=[]),k||(k={},qa.push(j)),k[b]&&(d=k[b].previousValue),k[b]=new ob(d,c))}function j(){e.$onChanges(k),k=void 0}var k,l=[],m={};return d(f,function(d,f){var j,k,o,p,q,r=d.attrName,s=d.optional,t=d.mode;switch(t){case"@":s||Cd.call(b,r)||(e[f]=b[r]=void 0),b.$observe(r,function(a){if(v(a)||F(a)){var b=e[f];i(f,a,b),e[f]=a}}),b.$$observers[r].$$scope=a,j=b[r],v(j)?e[f]=c(j)(a):F(j)&&(e[f]=j),m[f]=new ob(Re,e[f]);break;case"=":if(!Cd.call(b,r)){if(s)break;b[r]=void 0}if(s&&!b[r])break;k=h(b[r]),p=k.literal?P:function(a,b){return a===b||a!==a&&b!==b},o=k.assign||function(){throw j=e[f]=k(a),Qe("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",b[r],r,g.name)},j=e[f]=k(a);var u=function(b){return p(b,e[f])||(p(b,j)?o(a,b=e[f]):e[f]=b),j=b};u.$stateful=!0,q=d.collection?a.$watchCollection(b[r],u):a.$watch(h(b[r],u),null,k.literal),l.push(q);break;case"<":if(!Cd.call(b,r)){if(s)break;b[r]=void 0}if(s&&!b[r])break;k=h(b[r]),e[f]=k(a),m[f]=new ob(Re,e[f]),q=a.$watch(k,function(a,b){a===b&&(b=e[f]),i(f,a,b),e[f]=a},k.literal),l.push(q);break;case"&":if(k=b.hasOwnProperty(r)?h(b[r]):n,k===n&&s)break;e[f]=function(b){return k(a,b)}}}),{initialChanges:m,removeWatches:l.length&&function(){for(var a=0,b=l.length;b>a;++a)l[a]()}}}var qa,ra=/^\w/,sa=a.document.createElement("div"),ta=C;H.prototype={$normalize:pb,$addClass:function(a){a&&a.length>0&&D.addClass(this.$$element,a)},$removeClass:function(a){a&&a.length>0&&D.removeClass(this.$$element,a)},$updateClass:function(a,b){var c=qb(a,b);c&&c.length&&D.addClass(this.$$element,c);var d=qb(b,a);d&&d.length&&D.removeClass(this.$$element,d)},$set:function(a,b,c,f){var g,h=this.$$element[0],i=Ta(h,a),j=Ua(a),k=a;if(i?(this.$$element.prop(a,b),f=i):j&&(this[j]=b,k=j),this[a]=b,f?this.$attr[a]=f:(f=this.$attr[a],f||(this.$attr[a]=f=ia(a,"-"))),g=L(this.$$element),"a"===g&&("href"===a||"xlinkHref"===a)||"img"===g&&"src"===a)this[a]=b=E(b,"src"===a);else if("img"===g&&"srcset"===a){for(var l="",m=Vd(b),n=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,o=/\s/.test(m)?n:/(,)/,p=m.split(o),q=Math.floor(p.length/2),s=0;q>s;s++){var t=2*s;l+=E(Vd(p[t]),!0),l+=" "+Vd(p[t+1])}var u=Vd(p[2*s]).split(/\s/);l+=E(Vd(u[0]),!0),2===u.length&&(l+=" "+Vd(u[1])),this[a]=b=l}c!==!1&&(null===b||r(b)?this.$$element.removeAttr(f):ra.test(f)?this.$$element.attr(f,b):I(this.$$element[0],f,b));var v=this.$$observers;v&&d(v[k],function(a){try{a(b)}catch(c){e(c)}})},$observe:function(a,b){var c=this,d=c.$$observers||(c.$$observers=pa()),e=d[a]||(d[a]=[]);return e.push(b),s.$evalAsync(function(){e.$$inter||!c.hasOwnProperty(a)||r(c[a])||b(c[a])}),function(){M(e,b)}}};var ua=c.startSymbol(),va=c.endSymbol(),xa="{{"==ua&&"}}"==va?o:function(a){return a.replace(/\{\{/g,ua).replace(/}}/g,va)},ya=/^ngAttr[A-Z]/,za=/^(.+)Start$/;return K.$$addBindingInfo=A?function(a,b){var c=a.data("$binding")||[];Td(b)?c=c.concat(b):c.push(b),a.data("$binding",c)}:n,K.$$addBindingClass=A?function(a){J(a,"ng-binding")}:n,K.$$addScopeInfo=A?function(a,b,c,d){var e=c?d?"$isolateScopeNoTemplate":"$isolateScope":"$scope";a.data(e,b)}:n,K.$$addScopeClass=A?function(a,b){J(a,b?"ng-isolate-scope":"ng-scope")}:n,K.$$createComment=function(b,c){var d="";return A&&(d=" "+(b||"")+": "+(c||"")+" "),a.document.createComment(d)},K}]}function ob(a,b){this.previousValue=a,this.currentValue=b}function pb(a){return va(a.replace(Se,""))}function qb(a,b){var c="",d=a.split(/\s+/),e=b.split(/\s+/);a:for(var f=0;f<d.length;f++){for(var g=d[f],h=0;h<e.length;h++)if(g==e[h])continue a;c+=(c.length>0?" ":"")+g}return c}function rb(a){a=Id(a);var b=a.length;if(1>=b)return a;for(;b--;){var c=a[b];c.nodeType===ee&&Md.call(a,b,1)}return a}function sb(a,b){if(b&&v(b))return b;if(v(a)){var c=Ue.exec(a);if(c)return c[3]}}function tb(){var a={},c=!1;this.has=function(b){return a.hasOwnProperty(b)},this.register=function(b,c){ma(b,"controller"),t(b)?j(a,b):a[b]=c},this.allowGlobals=function(){c=!0},this.$get=["$injector","$window",function(d,e){function f(a,c,d,e){if(!a||!t(a.$scope))throw b("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",e,c);a.$scope[c]=d}return function(b,g,h,i){var k,l,m,n;if(h=h===!0,i&&v(i)&&(n=i),v(b)){if(l=b.match(Ue),!l)throw Te("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",b);m=l[1],n=n||l[3],b=a.hasOwnProperty(m)?a[m]:na(g.$scope,m,!0)||(c?na(e,m,!0):void 0),la(b,m,!0)}if(h){var o=(Td(b)?b[b.length-1]:b).prototype;k=Object.create(o||null),n&&f(g,n,k,m||b.name);var p;return p=j(function(){var a=d.invoke(b,k,g,m);return a!==k&&(t(a)||y(a))&&(k=a,n&&f(g,n,k,m||b.name)),k},{instance:k,identifier:n})}return k=d.instantiate(b,g,m),n&&f(g,n,k,m||b.name),k}}]}function ub(){this.$get=["$window",function(a){return Id(a.document)}]}function vb(){this.$get=["$log",function(a){return function(b,c){a.error.apply(a,arguments)}}]}function wb(a){return t(a)?x(a)?a.toISOString():U(a):a}function xb(){this.$get=function(){return function(a){if(!a)return"";var b=[];return e(a,function(a,c){null===a||r(a)||(Td(a)?d(a,function(a){b.push(ca(c)+"="+ca(wb(a)))}):b.push(ca(c)+"="+ca(wb(a))))}),b.join("&")}}}function yb(){this.$get=function(){return function(a){function b(a,f,g){null===a||r(a)||(Td(a)?d(a,function(a,c){b(a,f+"["+(t(a)?c:"")+"]")}):t(a)&&!x(a)?e(a,function(a,c){b(a,f+(g?"":"[")+c+(g?"":"]"))}):c.push(ca(f)+"="+ca(wb(a))))}if(!a)return"";var c=[];return b(a,"",!0),c.join("&")}}}function zb(a,b){if(v(a)){var c=a.replace($e,"").trim();if(c){var d=b("Content-Type");(d&&0===d.indexOf(We)||Ab(c))&&(a=V(c))}}return a}function Ab(a){var b=a.match(Ye);return b&&Ze[b[0]].test(a)}function Bb(a){function b(a,b){a&&(e[a]=e[a]?e[a]+", "+b:b)}var c,e=pa();return v(a)?d(a.split("\n"),function(a){c=a.indexOf(":"),b(Dd(Vd(a.substr(0,c))),Vd(a.substr(c+1)))}):t(a)&&d(a,function(a,c){b(Dd(c),Vd(a))}),e}function Cb(a){var b;return function(c){if(b||(b=Bb(a)),c){var d=b[Dd(c)];return void 0===d&&(d=null),d}return b}}function Db(a,b,c,e){return y(e)?e(a,b,c):(d(e,function(d){a=d(a,b,c)}),a)}function Eb(a){return a>=200&&300>a}function Fb(){var a=this.defaults={transformResponse:[zb],transformRequest:[function(a){return!t(a)||C(a)||E(a)||D(a)?a:U(a)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:O(Xe),put:O(Xe),patch:O(Xe)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer"},c=!1;this.useApplyAsync=function(a){return s(a)?(c=!!a,this):c};var e=!0;this.useLegacyPromiseExtensions=function(a){return s(a)?(e=!!a,this):e};var f=this.interceptors=[];this.$get=["$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector",function(g,h,i,k,l,m){function n(c){function f(a){var b=j({},a);return b.data=Db(a.data,a.headers,a.status,i.transformResponse),Eb(a.status)?b:l.reject(b)}function g(a,b){var c,e={};return d(a,function(a,d){y(a)?(c=a(b),null!=c&&(e[d]=c)):e[d]=a}),e}function h(b){var c,d,e,f=a.headers,h=j({},b.headers);f=j({},f.common,f[Dd(b.method)]);a:for(c in f){d=Dd(c);for(e in h)if(Dd(e)===d)continue a;h[c]=f[c]}return g(h,O(b))}if(!t(c))throw b("$http")("badreq","Http request configuration must be an object.  Received: {0}",c);if(!v(c.url))throw b("$http")("badreq","Http request configuration url must be a string.  Received: {0}",c.url);var i=j({method:"get",transformRequest:a.transformRequest,transformResponse:a.transformResponse,paramSerializer:a.paramSerializer},c);i.headers=h(c),i.method=Ed(i.method),i.paramSerializer=v(i.paramSerializer)?m.get(i.paramSerializer):i.paramSerializer;var k=function(b){var c=b.headers,e=Db(b.data,Cb(c),void 0,b.transformRequest);return r(e)&&d(c,function(a,b){"content-type"===Dd(b)&&delete c[b]}),r(b.withCredentials)&&!r(a.withCredentials)&&(b.withCredentials=a.withCredentials),q(b,e).then(f,f)},n=[k,void 0],o=l.when(i);for(d(x,function(a){(a.request||a.requestError)&&n.unshift(a.request,a.requestError),(a.response||a.responseError)&&n.push(a.response,a.responseError)});n.length;){var p=n.shift(),s=n.shift();o=o.then(p,s)}return e?(o.success=function(a){return la(a,"fn"),o.then(function(b){a(b.data,b.status,b.headers,i)}),o},o.error=function(a){return la(a,"fn"),o.then(null,function(b){a(b.data,b.status,b.headers,i)}),o}):(o.success=af("success"),o.error=af("error")),o}function o(a){d(arguments,function(a){n[a]=function(b,c){return n(j({},c||{},{method:a,url:b}))}})}function p(a){d(arguments,function(a){n[a]=function(b,c,d){return n(j({},d||{},{method:a,url:b,data:c}))}})}function q(b,e){function f(a){if(a){var b={};return d(a,function(a,d){b[d]=function(b){function d(){a(b)}c?k.$applyAsync(d):k.$$phase?d():k.$apply(d)}}),b}}function i(a,b,d,e){function f(){j(b,a,d,e)}p&&(Eb(a)?p.put(z,[a,b,Bb(d),e]):p.remove(z)),c?k.$applyAsync(f):(f(),k.$$phase||k.$apply())}function j(a,c,d,e){c=c>=-1?c:0,(Eb(c)?v.resolve:v.reject)({data:a,status:c,headers:Cb(d),config:b,statusText:e})}function m(a){j(a.data,a.status,O(a.headers()),a.statusText)}function o(){var a=n.pendingRequests.indexOf(b);-1!==a&&n.pendingRequests.splice(a,1)}var p,q,v=l.defer(),x=v.promise,y=b.headers,z=u(b.url,b.paramSerializer(b.params));if(n.pendingRequests.push(b),x.then(o,o),!b.cache&&!a.cache||b.cache===!1||"GET"!==b.method&&"JSONP"!==b.method||(p=t(b.cache)?b.cache:t(a.cache)?a.cache:w),p&&(q=p.get(z),s(q)?G(q)?q.then(m,m):Td(q)?j(q[1],q[0],O(q[2]),q[3]):j(q,200,{},"OK"):p.put(z,x)),r(q)){var A=Gc(b.url)?h()[b.xsrfCookieName||a.xsrfCookieName]:void 0;A&&(y[b.xsrfHeaderName||a.xsrfHeaderName]=A),g(b.method,z,e,i,y,b.timeout,b.withCredentials,b.responseType,f(b.eventHandlers),f(b.uploadEventHandlers))}return x}function u(a,b){return b.length>0&&(a+=(-1==a.indexOf("?")?"?":"&")+b),a}var w=i("$http");a.paramSerializer=v(a.paramSerializer)?m.get(a.paramSerializer):a.paramSerializer;var x=[];return d(f,function(a){x.unshift(v(a)?m.get(a):m.invoke(a))}),n.pendingRequests=[],o("get","delete","head","jsonp"),p("post","put","patch"),n.defaults=a,n}]}function Gb(){this.$get=function(){return function(){return new a.XMLHttpRequest}}}function Hb(){this.$get=["$browser","$window","$document","$xhrFactory",function(a,b,c,d){return Ib(a,d,a.defer,b.angular.callbacks,c[0])}]}function Ib(a,b,c,e,f){function g(a,b,c){var d=f.createElement("script"),g=null;return d.type="text/javascript",d.src=a,d.async=!0,g=function(a){le(d,"load",g),le(d,"error",g),f.body.removeChild(d),d=null;var h=-1,i="unknown";a&&("load"!==a.type||e[b].called||(a={type:"error"}),i=a.type,h="error"===a.type?404:200),c&&c(h,i)},ke(d,"load",g),ke(d,"error",g),f.body.appendChild(d),g}return function(f,h,i,j,k,l,m,o,p,q){function t(){w&&w(),x&&x.abort()}function u(b,d,e,f,g){s(A)&&c.cancel(A),w=x=null,b(d,e,f,g),a.$$completeOutstandingRequest(n)}if(a.$$incOutstandingRequestCount(),h=h||a.url(),"jsonp"==Dd(f)){var v="_"+(e.counter++).toString(36);e[v]=function(a){e[v].data=a,e[v].called=!0};var w=g(h.replace("JSON_CALLBACK","angular.callbacks."+v),v,function(a,b){u(j,a,e[v].data,"",b),e[v]=n})}else{var x=b(f,h);x.open(f,h,!0),d(k,function(a,b){s(a)&&x.setRequestHeader(b,a)}),x.onload=function(){var a=x.statusText||"",b="response"in x?x.response:x.responseText,c=1223===x.status?204:x.status;0===c&&(c=b?200:"file"==Fc(h).protocol?404:0),u(j,c,b,x.getAllResponseHeaders(),a)};var y=function(){u(j,-1,null,null,"")};if(x.onerror=y,x.onabort=y,d(p,function(a,b){x.addEventListener(b,a)}),d(q,function(a,b){x.upload.addEventListener(b,a)}),m&&(x.withCredentials=!0),o)try{x.responseType=o}catch(z){if("json"!==o)throw z}x.send(r(i)?null:i)}if(l>0)var A=c(t,l);else G(l)&&l.then(t)}}function Jb(){var a="{{",b="}}";this.startSymbol=function(b){return b?(a=b,this):a},this.endSymbol=function(a){return a?(b=a,this):b},this.$get=["$parse","$exceptionHandler","$sce",function(c,d,e){function f(a){return"\\\\\\"+a}function g(c){return c.replace(n,a).replace(o,b)}function h(a){if(null==a)return"";switch(typeof a){case"string":break;case"number":a=""+a;break;default:a=U(a)}return a}function i(a,b,c,d){var e;return e=a.$watch(function(a){return e(),d(a)},b,c)}function k(f,k,n,o){function q(a){try{return a=G(a),o&&!s(a)?a:h(a)}catch(b){d(bf.interr(f,b))}}if(!f.length||-1===f.indexOf(a)){var t;if(!k){var u=g(f);t=p(u),t.exp=f,t.expressions=[],t.$$watchDelegate=i}return t}o=!!o;for(var v,w,x,z=0,A=[],B=[],C=f.length,D=[],E=[];C>z;){if(-1==(v=f.indexOf(a,z))||-1==(w=f.indexOf(b,v+l))){z!==C&&D.push(g(f.substring(z)));break}z!==v&&D.push(g(f.substring(z,v))),x=f.substring(v+l,w),A.push(x),B.push(c(x,q)),z=w+m,E.push(D.length),D.push("")}if(n&&D.length>1&&bf.throwNoconcat(f),!k||A.length){var F=function(a){for(var b=0,c=A.length;c>b;b++){if(o&&r(a[b]))return;D[E[b]]=a[b]}return D.join("")},G=function(a){return n?e.getTrusted(n,a):e.valueOf(a)};return j(function(a){var b=0,c=A.length,e=new Array(c);try{for(;c>b;b++)e[b]=B[b](a);return F(e)}catch(g){d(bf.interr(f,g))}},{exp:f,expressions:A,$$watchDelegate:function(a,b){var c;return a.$watchGroup(B,function(d,e){var f=F(d);y(b)&&b.call(this,f,d!==e?c:f,a),c=f})}})}}var l=a.length,m=b.length,n=new RegExp(a.replace(/./g,f),"g"),o=new RegExp(b.replace(/./g,f),"g");return k.startSymbol=function(){return a},k.endSymbol=function(){return b},k}]}function Kb(){this.$get=["$rootScope","$window","$q","$$q","$browser",function(a,b,c,d,e){function f(f,h,i,j){function k(){l?f.apply(null,m):f(p)}var l=arguments.length>4,m=l?R(arguments,4):[],n=b.setInterval,o=b.clearInterval,p=0,q=s(j)&&!j,r=(q?d:c).defer(),t=r.promise;return i=s(i)?i:0,t.$$intervalId=n(function(){q?e.defer(k):a.$evalAsync(k),r.notify(p++),i>0&&p>=i&&(r.resolve(p),o(t.$$intervalId),delete g[t.$$intervalId]),q||a.$apply()},h),g[t.$$intervalId]=r,t}var g={};return f.cancel=function(a){return a&&a.$$intervalId in g?(g[a.$$intervalId].reject("canceled"),b.clearInterval(a.$$intervalId),delete g[a.$$intervalId],!0):!1},f}]}function Lb(a){for(var b=a.split("/"),c=b.length;c--;)b[c]=ba(b[c]);return b.join("/")}function Mb(a,b){var c=Fc(a);b.$$protocol=c.protocol,b.$$host=c.hostname,b.$$port=l(c.port)||df[c.protocol]||null}function Nb(a,b){var c="/"!==a.charAt(0);c&&(a="/"+a);var d=Fc(a);b.$$path=decodeURIComponent(c&&"/"===d.pathname.charAt(0)?d.pathname.substring(1):d.pathname),b.$$search=_(d.search),b.$$hash=decodeURIComponent(d.hash),b.$$path&&"/"!=b.$$path.charAt(0)&&(b.$$path="/"+b.$$path)}function Ob(a,b){return 0===b.indexOf(a)?b.substr(a.length):void 0}function Pb(a){var b=a.indexOf("#");return-1==b?a:a.substr(0,b)}function Qb(a){return a.replace(/(#.+)|#$/,"$1")}function Rb(a){return a.substr(0,Pb(a).lastIndexOf("/")+1)}function Sb(a){return a.substring(0,a.indexOf("/",a.indexOf("//")+2))}function Tb(a,b,c){this.$$html5=!0,c=c||"",Mb(a,this),this.$$parse=function(a){var c=Ob(b,a);if(!v(c))throw ef("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',a,b);Nb(c,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var a=aa(this.$$search),c=this.$$hash?"#"+ba(this.$$hash):"";this.$$url=Lb(this.$$path)+(a?"?"+a:"")+c,this.$$absUrl=b+this.$$url.substr(1)},this.$$parseLinkUrl=function(d,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),!0;var f,g,h;return s(f=Ob(a,d))?(g=f,h=s(f=Ob(c,f))?b+(Ob("/",f)||f):a+g):s(f=Ob(b,d))?h=b+f:b==d+"/"&&(h=b),h&&this.$$parse(h),!!h}}function Ub(a,b,c){Mb(a,this),this.$$parse=function(d){function e(a,b,c){var d,e=/^\/[A-Z]:(\/.*)/;return 0===b.indexOf(c)&&(b=b.replace(c,"")),e.exec(b)?a:(d=e.exec(a),d?d[1]:a)}var f,g=Ob(a,d)||Ob(b,d);r(g)||"#"!==g.charAt(0)?this.$$html5?f=g:(f="",r(g)&&(a=d,this.replace())):(f=Ob(c,g),r(f)&&(f=g)),Nb(f,this),this.$$path=e(this.$$path,f,a),this.$$compose()},this.$$compose=function(){var b=aa(this.$$search),d=this.$$hash?"#"+ba(this.$$hash):"";this.$$url=Lb(this.$$path)+(b?"?"+b:"")+d,this.$$absUrl=a+(this.$$url?c+this.$$url:"")},this.$$parseLinkUrl=function(b,c){return Pb(a)==Pb(b)?(this.$$parse(b),!0):!1}}function Vb(a,b,c){this.$$html5=!0,Ub.apply(this,arguments),this.$$parseLinkUrl=function(d,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),!0;var f,g;return a==Pb(d)?f=d:(g=Ob(b,d))?f=a+c+g:b===d+"/"&&(f=b),f&&this.$$parse(f),!!f},this.$$compose=function(){var b=aa(this.$$search),d=this.$$hash?"#"+ba(this.$$hash):"";this.$$url=Lb(this.$$path)+(b?"?"+b:"")+d,this.$$absUrl=a+c+this.$$url}}function Wb(a){return function(){return this[a]}}function Xb(a,b){return function(c){return r(c)?this[a]:(this[a]=b(c),this.$$compose(),this)}}function Yb(){var a="",b={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(b){return s(b)?(a=b,this):a},this.html5Mode=function(a){return F(a)?(b.enabled=a,this):t(a)?(F(a.enabled)&&(b.enabled=a.enabled),F(a.requireBase)&&(b.requireBase=a.requireBase),F(a.rewriteLinks)&&(b.rewriteLinks=a.rewriteLinks),this):b},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(c,d,e,f,g){function h(a,b,c){var e=j.url(),f=j.$$state;try{d.url(a,b,c),j.$$state=d.state()}catch(g){throw j.url(e),j.$$state=f,g}}function i(a,b){c.$broadcast("$locationChangeSuccess",j.absUrl(),a,j.$$state,b)}var j,k,l,m=d.baseHref(),n=d.url();if(b.enabled){if(!m&&b.requireBase)throw ef("nobase","$location in HTML5 mode requires a <base> tag to be present!");l=Sb(n)+(m||"/"),k=e.history?Tb:Vb}else l=Pb(n),k=Ub;var o=Rb(l);j=new k(l,o,"#"+a),j.$$parseLinkUrl(n,n),j.$$state=d.state();var p=/^\s*(javascript|mailto):/i;f.on("click",function(a){if(b.rewriteLinks&&!a.ctrlKey&&!a.metaKey&&!a.shiftKey&&2!=a.which&&2!=a.button){for(var e=Id(a.target);"a"!==L(e[0]);)if(e[0]===f[0]||!(e=e.parent())[0])return;var h=e.prop("href"),i=e.attr("href")||e.attr("xlink:href");t(h)&&"[object SVGAnimatedString]"===h.toString()&&(h=Fc(h.animVal).href),p.test(h)||!h||e.attr("target")||a.isDefaultPrevented()||j.$$parseLinkUrl(h,i)&&(a.preventDefault(),j.absUrl()!=d.url()&&(c.$apply(),g.angular["ff-684208-preventDefault"]=!0))}}),Qb(j.absUrl())!=Qb(n)&&d.url(j.absUrl(),!0);var q=!0;return d.onUrlChange(function(a,b){return r(Ob(o,a))?void(g.location.href=a):(c.$evalAsync(function(){var d,e=j.absUrl(),f=j.$$state;a=Qb(a),j.$$parse(a),j.$$state=b,d=c.$broadcast("$locationChangeStart",a,e,b,f).defaultPrevented,j.absUrl()===a&&(d?(j.$$parse(e),j.$$state=f,h(e,!1,f)):(q=!1,i(e,f)))}),void(c.$$phase||c.$digest()))}),c.$watch(function(){var a=Qb(d.url()),b=Qb(j.absUrl()),f=d.state(),g=j.$$replace,k=a!==b||j.$$html5&&e.history&&f!==j.$$state;(q||k)&&(q=!1,c.$evalAsync(function(){var b=j.absUrl(),d=c.$broadcast("$locationChangeStart",b,a,j.$$state,f).defaultPrevented;j.absUrl()===b&&(d?(j.$$parse(a),j.$$state=f):(k&&h(b,g,f===j.$$state?null:j.$$state),i(a,f)))})),j.$$replace=!1}),j}]}function Zb(){var a=!0,b=this;this.debugEnabled=function(b){return s(b)?(a=b,this):a},this.$get=["$window",function(c){function e(a){return a instanceof Error&&(a.stack?a=a.message&&-1===a.stack.indexOf(a.message)?"Error: "+a.message+"\n"+a.stack:a.stack:a.sourceURL&&(a=a.message+"\n"+a.sourceURL+":"+a.line)),a}function f(a){var b=c.console||{},f=b[a]||b.log||n,g=!1;try{g=!!f.apply}catch(h){}return g?function(){var a=[];return d(arguments,function(b){a.push(e(b))}),f.apply(b,a)}:function(a,b){f(a,null==b?"":b)}}return{log:f("log"),info:f("info"),warn:f("warn"),error:f("error"),debug:function(){var c=f("debug");return function(){a&&c.apply(b,arguments)}}()}}]}function $b(a,b){if("__defineGetter__"===a||"__defineSetter__"===a||"__lookupGetter__"===a||"__lookupSetter__"===a||"__proto__"===a)throw gf("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",b);
return a}function _b(a){return a+""}function ac(a,b){if(a){if(a.constructor===a)throw gf("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",b);if(a.window===a)throw gf("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",b);if(a.children&&(a.nodeName||a.prop&&a.attr&&a.find))throw gf("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",b);if(a===Object)throw gf("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",b)}return a}function bc(a,b){if(a){if(a.constructor===a)throw gf("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",b);if(a===hf||a===jf||a===kf)throw gf("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",b)}}function cc(a,b){if(a&&(a===0..constructor||a===(!1).constructor||a==="".constructor||a==={}.constructor||a===[].constructor||a===Function.constructor))throw gf("isecaf","Assigning to a constructor is disallowed! Expression: {0}",b)}function dc(a,b){return"undefined"!=typeof a?a:b}function ec(a,b){return"undefined"==typeof a?b:"undefined"==typeof b?a:a+b}function fc(a,b){var c=a(b);return!c.$stateful}function gc(a,b){var c,e;switch(a.type){case of.Program:c=!0,d(a.body,function(a){gc(a.expression,b),c=c&&a.expression.constant}),a.constant=c;break;case of.Literal:a.constant=!0,a.toWatch=[];break;case of.UnaryExpression:gc(a.argument,b),a.constant=a.argument.constant,a.toWatch=a.argument.toWatch;break;case of.BinaryExpression:gc(a.left,b),gc(a.right,b),a.constant=a.left.constant&&a.right.constant,a.toWatch=a.left.toWatch.concat(a.right.toWatch);break;case of.LogicalExpression:gc(a.left,b),gc(a.right,b),a.constant=a.left.constant&&a.right.constant,a.toWatch=a.constant?[]:[a];break;case of.ConditionalExpression:gc(a.test,b),gc(a.alternate,b),gc(a.consequent,b),a.constant=a.test.constant&&a.alternate.constant&&a.consequent.constant,a.toWatch=a.constant?[]:[a];break;case of.Identifier:a.constant=!1,a.toWatch=[a];break;case of.MemberExpression:gc(a.object,b),a.computed&&gc(a.property,b),a.constant=a.object.constant&&(!a.computed||a.property.constant),a.toWatch=[a];break;case of.CallExpression:c=a.filter?fc(b,a.callee.name):!1,e=[],d(a.arguments,function(a){gc(a,b),c=c&&a.constant,a.constant||e.push.apply(e,a.toWatch)}),a.constant=c,a.toWatch=a.filter&&fc(b,a.callee.name)?e:[a];break;case of.AssignmentExpression:gc(a.left,b),gc(a.right,b),a.constant=a.left.constant&&a.right.constant,a.toWatch=[a];break;case of.ArrayExpression:c=!0,e=[],d(a.elements,function(a){gc(a,b),c=c&&a.constant,a.constant||e.push.apply(e,a.toWatch)}),a.constant=c,a.toWatch=e;break;case of.ObjectExpression:c=!0,e=[],d(a.properties,function(a){gc(a.value,b),c=c&&a.value.constant,a.value.constant||e.push.apply(e,a.value.toWatch)}),a.constant=c,a.toWatch=e;break;case of.ThisExpression:a.constant=!1,a.toWatch=[];break;case of.LocalsExpression:a.constant=!1,a.toWatch=[]}}function hc(a){if(1==a.length){var b=a[0].expression,c=b.toWatch;return 1!==c.length?c:c[0]!==b?c:void 0}}function ic(a){return a.type===of.Identifier||a.type===of.MemberExpression}function jc(a){return 1===a.body.length&&ic(a.body[0].expression)?{type:of.AssignmentExpression,left:a.body[0].expression,right:{type:of.NGValueParameter},operator:"="}:void 0}function kc(a){return 0===a.body.length||1===a.body.length&&(a.body[0].expression.type===of.Literal||a.body[0].expression.type===of.ArrayExpression||a.body[0].expression.type===of.ObjectExpression)}function lc(a){return a.constant}function mc(a,b){this.astBuilder=a,this.$filter=b}function nc(a,b){this.astBuilder=a,this.$filter=b}function oc(a){return"constructor"==a}function pc(a){return y(a.valueOf)?a.valueOf():qf.call(a)}function qc(){var a,b,c=pa(),e=pa(),f={"true":!0,"false":!1,"null":null,undefined:void 0};this.addLiteral=function(a,b){f[a]=b},this.setIdentifierFns=function(c,d){return a=c,b=d,this},this.$get=["$filter",function(g){function h(a,b,d){var f,h,j;switch(d=d||u,typeof a){case"string":a=a.trim(),j=a;var q=d?e:c;if(f=q[j],!f){":"===a.charAt(0)&&":"===a.charAt(1)&&(h=!0,a=a.substring(2));var s=d?t:r,v=new nf(s),w=new pf(v,g,s);f=w.parse(a),f.constant?f.$$watchDelegate=o:h?f.$$watchDelegate=f.literal?m:l:f.inputs&&(f.$$watchDelegate=k),d&&(f=i(f)),q[j]=f}return p(f,b);case"function":return p(a,b);default:return p(n,b)}}function i(a){function b(b,c,d,e){var f=u;u=!0;try{return a(b,c,d,e)}finally{u=f}}if(!a)return a;b.$$watchDelegate=a.$$watchDelegate,b.assign=i(a.assign),b.constant=a.constant,b.literal=a.literal;for(var c=0;a.inputs&&c<a.inputs.length;++c)a.inputs[c]=i(a.inputs[c]);return b.inputs=a.inputs,b}function j(a,b){return null==a||null==b?a===b:"object"==typeof a&&(a=pc(a),"object"==typeof a)?!1:a===b||a!==a&&b!==b}function k(a,b,c,d,e){var f,g=d.inputs;if(1===g.length){var h=j;return g=g[0],a.$watch(function(a){var b=g(a);return j(b,h)||(f=d(a,void 0,void 0,[b]),h=b&&pc(b)),f},b,c,e)}for(var i=[],k=[],l=0,m=g.length;m>l;l++)i[l]=j,k[l]=null;return a.$watch(function(a){for(var b=!1,c=0,e=g.length;e>c;c++){var h=g[c](a);(b||(b=!j(h,i[c])))&&(k[c]=h,i[c]=h&&pc(h))}return b&&(f=d(a,void 0,void 0,k)),f},b,c,e)}function l(a,b,c,d){var e,f;return e=a.$watch(function(a){return d(a)},function(a,c,d){f=a,y(b)&&b.apply(this,arguments),s(a)&&d.$$postDigest(function(){s(f)&&e()})},c)}function m(a,b,c,e){function f(a){var b=!0;return d(a,function(a){s(a)||(b=!1)}),b}var g,h;return g=a.$watch(function(a){return e(a)},function(a,c,d){h=a,y(b)&&b.call(this,a,c,d),f(a)&&d.$$postDigest(function(){f(h)&&g()})},c)}function o(a,b,c,d){var e;return e=a.$watch(function(a){return e(),d(a)},b,c)}function p(a,b){if(!b)return a;var c=a.$$watchDelegate,d=!1,e=c!==m&&c!==l,f=e?function(c,e,f,g){var h=d&&g?g[0]:a(c,e,f,g);return b(h,c,e)}:function(c,d,e,f){var g=a(c,d,e,f),h=b(g,c,d);return s(g)?h:g};return a.$$watchDelegate&&a.$$watchDelegate!==k?f.$$watchDelegate=a.$$watchDelegate:b.$stateful||(f.$$watchDelegate=k,d=!a.inputs,f.inputs=a.inputs?a.inputs:[a]),f}var q=Xd().noUnsafeEval,r={csp:q,expensiveChecks:!1,literals:N(f),isIdentifierStart:y(a)&&a,isIdentifierContinue:y(b)&&b},t={csp:q,expensiveChecks:!0,literals:N(f),isIdentifierStart:y(a)&&a,isIdentifierContinue:y(b)&&b},u=!1;return h.$$runningExpensiveChecks=function(){return u},h}]}function rc(){this.$get=["$rootScope","$exceptionHandler",function(a,b){return tc(function(b){a.$evalAsync(b)},b)}]}function sc(){this.$get=["$browser","$exceptionHandler",function(a,b){return tc(function(b){a.defer(b)},b)}]}function tc(a,c){function e(){this.$$state={status:0}}function f(a,b){return function(c){b.call(a,c)}}function g(a){var b,d,e;e=a.pending,a.processScheduled=!1,a.pending=void 0;for(var f=0,g=e.length;g>f;++f){d=e[f][0],b=e[f][a.status];try{y(b)?d.resolve(b(a.value)):1===a.status?d.resolve(a.value):d.reject(a.value)}catch(h){d.reject(h),c(h)}}}function h(b){!b.processScheduled&&b.pending&&(b.processScheduled=!0,a(function(){g(b)}))}function i(){this.promise=new e}function k(a){var b=new i,c=0,e=Td(a)?[]:{};return d(a,function(a,d){c++,q(a).then(function(a){e.hasOwnProperty(d)||(e[d]=a,--c||b.resolve(e))},function(a){e.hasOwnProperty(d)||b.reject(a)})}),0===c&&b.resolve(e),b.promise}var l=b("$q",TypeError),m=function(){var a=new i;return a.resolve=f(a,a.resolve),a.reject=f(a,a.reject),a.notify=f(a,a.notify),a};j(e.prototype,{then:function(a,b,c){if(r(a)&&r(b)&&r(c))return this;var d=new i;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([d,a,b,c]),this.$$state.status>0&&h(this.$$state),d.promise},"catch":function(a){return this.then(null,a)},"finally":function(a,b){return this.then(function(b){return p(b,!0,a)},function(b){return p(b,!1,a)},b)}}),j(i.prototype,{resolve:function(a){this.promise.$$state.status||(a===this.promise?this.$$reject(l("qcycle","Expected promise to be resolved with value other than itself '{0}'",a)):this.$$resolve(a))},$$resolve:function(a){function b(a){i||(i=!0,g.$$resolve(a))}function d(a){i||(i=!0,g.$$reject(a))}var e,g=this,i=!1;try{(t(a)||y(a))&&(e=a&&a.then),y(e)?(this.promise.$$state.status=-1,e.call(a,b,d,f(this,this.notify))):(this.promise.$$state.value=a,this.promise.$$state.status=1,h(this.promise.$$state))}catch(j){d(j),c(j)}},reject:function(a){this.promise.$$state.status||this.$$reject(a)},$$reject:function(a){this.promise.$$state.value=a,this.promise.$$state.status=2,h(this.promise.$$state)},notify:function(b){var d=this.promise.$$state.pending;this.promise.$$state.status<=0&&d&&d.length&&a(function(){for(var a,e,f=0,g=d.length;g>f;f++){e=d[f][0],a=d[f][3];try{e.notify(y(a)?a(b):b)}catch(h){c(h)}}})}});var n=function(a){var b=new i;return b.reject(a),b.promise},o=function(a,b){var c=new i;return b?c.resolve(a):c.reject(a),c.promise},p=function(a,b,c){var d=null;try{y(c)&&(d=c())}catch(e){return o(e,!1)}return G(d)?d.then(function(){return o(a,b)},function(a){return o(a,!1)}):o(a,b)},q=function(a,b,c,d){var e=new i;return e.resolve(a),e.promise.then(b,c,d)},s=q,u=function(a){function b(a){d.resolve(a)}function c(a){d.reject(a)}if(!y(a))throw l("norslvr","Expected resolverFn, got '{0}'",a);var d=new i;return a(b,c),d.promise};return u.prototype=e.prototype,u.defer=m,u.reject=n,u.when=q,u.resolve=s,u.all=k,u}function uc(){this.$get=["$window","$timeout",function(a,b){var c=a.requestAnimationFrame||a.webkitRequestAnimationFrame,d=a.cancelAnimationFrame||a.webkitCancelAnimationFrame||a.webkitCancelRequestAnimationFrame,e=!!c,f=e?function(a){var b=c(a);return function(){d(b)}}:function(a){var c=b(a,16.66,!1);return function(){b.cancel(c)}};return f.supported=e,f}]}function vc(){function a(a){function b(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=g(),this.$$ChildScope=null}return b.prototype=a,b}var e=10,f=b("$rootScope"),h=null,i=null;this.digestTtl=function(a){return arguments.length&&(e=a),e},this.$get=["$exceptionHandler","$parse","$browser",function(b,j,k){function l(a){a.currentScope.$$destroyed=!0}function m(a){9===Hd&&(a.$$childHead&&m(a.$$childHead),a.$$nextSibling&&m(a.$$nextSibling)),a.$parent=a.$$nextSibling=a.$$prevSibling=a.$$childHead=a.$$childTail=a.$root=a.$$watchers=null}function o(){this.$id=g(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}function p(a){if(z.$$phase)throw f("inprog","{0} already in progress",z.$$phase);z.$$phase=a}function q(){z.$$phase=null}function s(a,b){do a.$$watchersCount+=b;while(a=a.$parent)}function u(a,b,c){do a.$$listenerCount[c]-=b,0===a.$$listenerCount[c]&&delete a.$$listenerCount[c];while(a=a.$parent)}function v(){}function w(){for(;C.length;)try{C.shift()()}catch(a){b(a)}i=null}function x(){null===i&&(i=k.defer(function(){z.$apply(w)}))}o.prototype={constructor:o,$new:function(b,c){var d;return c=c||this,b?(d=new o,d.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=a(this)),d=new this.$$ChildScope),d.$parent=c,d.$$prevSibling=c.$$childTail,c.$$childHead?(c.$$childTail.$$nextSibling=d,c.$$childTail=d):c.$$childHead=c.$$childTail=d,(b||c!=this)&&d.$on("$destroy",l),d},$watch:function(a,b,c,d){var e=j(a);if(e.$$watchDelegate)return e.$$watchDelegate(this,b,c,e,a);var f=this,g=f.$$watchers,i={fn:b,last:v,get:e,exp:d||a,eq:!!c};return h=null,y(b)||(i.fn=n),g||(g=f.$$watchers=[]),g.unshift(i),s(this,1),function(){M(g,i)>=0&&s(f,-1),h=null}},$watchGroup:function(a,b){function c(){i=!1,j?(j=!1,b(f,f,h)):b(f,e,h)}var e=new Array(a.length),f=new Array(a.length),g=[],h=this,i=!1,j=!0;if(!a.length){var k=!0;return h.$evalAsync(function(){k&&b(f,f,h)}),function(){k=!1}}return 1===a.length?this.$watch(a[0],function(a,c,d){f[0]=a,e[0]=c,b(f,a===c?f:e,d)}):(d(a,function(a,b){var d=h.$watch(a,function(a,d){f[b]=a,e[b]=d,i||(i=!0,h.$evalAsync(c))});g.push(d)}),function(){for(;g.length;)g.shift()()})},$watchCollection:function(a,b){function d(a){f=a;var b,d,e,h,i;if(!r(f)){if(t(f))if(c(f)){g!==n&&(g=n,q=g.length=0,l++),b=f.length,q!==b&&(l++,g.length=q=b);for(var j=0;b>j;j++)i=g[j],h=f[j],e=i!==i&&h!==h,e||i===h||(l++,g[j]=h)}else{g!==o&&(g=o={},q=0,l++),b=0;for(d in f)Cd.call(f,d)&&(b++,h=f[d],i=g[d],d in g?(e=i!==i&&h!==h,e||i===h||(l++,g[d]=h)):(q++,g[d]=h,l++));if(q>b){l++;for(d in g)Cd.call(f,d)||(q--,delete g[d])}}else g!==f&&(g=f,l++);return l}}function e(){if(p?(p=!1,b(f,f,i)):b(f,h,i),k)if(t(f))if(c(f)){h=new Array(f.length);for(var a=0;a<f.length;a++)h[a]=f[a]}else{h={};for(var d in f)Cd.call(f,d)&&(h[d]=f[d])}else h=f}d.$stateful=!0;var f,g,h,i=this,k=b.length>1,l=0,m=j(a,d),n=[],o={},p=!0,q=0;return this.$watch(m,e)},$digest:function(){var a,c,d,g,j,l,m,n,o,r,s,t,u=e,x=this,C=[];p("$digest"),k.$$checkUrlChange(),this===z&&null!==i&&(k.defer.cancel(i),w()),h=null;do{for(n=!1,r=x;A.length;){try{t=A.shift(),t.scope.$eval(t.expression,t.locals)}catch(D){b(D)}h=null}a:do{if(l=r.$$watchers)for(m=l.length;m--;)try{if(a=l[m])if(j=a.get,(c=j(r))===(d=a.last)||(a.eq?P(c,d):"number"==typeof c&&"number"==typeof d&&isNaN(c)&&isNaN(d))){if(a===h){n=!1;break a}}else n=!0,h=a,a.last=a.eq?N(c,null):c,g=a.fn,g(c,d===v?c:d,r),5>u&&(s=4-u,C[s]||(C[s]=[]),C[s].push({msg:y(a.exp)?"fn: "+(a.exp.name||a.exp.toString()):a.exp,newVal:c,oldVal:d}))}catch(D){b(D)}if(!(o=r.$$watchersCount&&r.$$childHead||r!==x&&r.$$nextSibling))for(;r!==x&&!(o=r.$$nextSibling);)r=r.$parent}while(r=o);if((n||A.length)&&!u--)throw q(),f("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",e,C)}while(n||A.length);for(q();B.length;)try{B.shift()()}catch(D){b(D)}},$destroy:function(){if(!this.$$destroyed){var a=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this===z&&k.$$applicationDestroyed(),s(this,-this.$$watchersCount);for(var b in this.$$listenerCount)u(this,this.$$listenerCount[b],b);a&&a.$$childHead==this&&(a.$$childHead=this.$$nextSibling),a&&a.$$childTail==this&&(a.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=n,this.$on=this.$watch=this.$watchGroup=function(){return n},this.$$listeners={},this.$$nextSibling=null,m(this)}},$eval:function(a,b){return j(a)(this,b)},$evalAsync:function(a,b){z.$$phase||A.length||k.defer(function(){A.length&&z.$digest()}),A.push({scope:this,expression:j(a),locals:b})},$$postDigest:function(a){B.push(a)},$apply:function(a){try{p("$apply");try{return this.$eval(a)}finally{q()}}catch(c){b(c)}finally{try{z.$digest()}catch(c){throw b(c),c}}},$applyAsync:function(a){function b(){c.$eval(a)}var c=this;a&&C.push(b),a=j(a),x()},$on:function(a,b){var c=this.$$listeners[a];c||(this.$$listeners[a]=c=[]),c.push(b);var d=this;do d.$$listenerCount[a]||(d.$$listenerCount[a]=0),d.$$listenerCount[a]++;while(d=d.$parent);var e=this;return function(){var d=c.indexOf(b);-1!==d&&(c[d]=null,u(e,1,a))}},$emit:function(a,c){var d,e,f,g=[],h=this,i=!1,j={name:a,targetScope:h,stopPropagation:function(){i=!0},preventDefault:function(){j.defaultPrevented=!0},defaultPrevented:!1},k=Q([j],arguments,1);do{for(d=h.$$listeners[a]||g,j.currentScope=h,e=0,f=d.length;f>e;e++)if(d[e])try{d[e].apply(null,k)}catch(l){b(l)}else d.splice(e,1),e--,f--;if(i)return j.currentScope=null,j;h=h.$parent}while(h);return j.currentScope=null,j},$broadcast:function(a,c){var d=this,e=d,f=d,g={name:a,targetScope:d,preventDefault:function(){g.defaultPrevented=!0},defaultPrevented:!1};if(!d.$$listenerCount[a])return g;for(var h,i,j,k=Q([g],arguments,1);e=f;){for(g.currentScope=e,h=e.$$listeners[a]||[],i=0,j=h.length;j>i;i++)if(h[i])try{h[i].apply(null,k)}catch(l){b(l)}else h.splice(i,1),i--,j--;if(!(f=e.$$listenerCount[a]&&e.$$childHead||e!==d&&e.$$nextSibling))for(;e!==d&&!(f=e.$$nextSibling);)e=e.$parent}return g.currentScope=null,g}};var z=new o,A=z.$$asyncQueue=[],B=z.$$postDigestQueue=[],C=z.$$applyAsyncQueue=[];return z}]}function wc(){var a=/^\s*(https?|ftp|mailto|tel|file):/,b=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(b){return s(b)?(a=b,this):a},this.imgSrcSanitizationWhitelist=function(a){return s(a)?(b=a,this):b},this.$get=function(){return function(c,d){var e,f=d?b:a;return e=Fc(c).href,""===e||e.match(f)?c:"unsafe:"+e}}}function xc(a){if("self"===a)return a;if(v(a)){if(a.indexOf("***")>-1)throw rf("iwcard","Illegal sequence *** in string matcher.  String: {0}",a);return a=Wd(a).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+a+"$")}if(z(a))return new RegExp("^"+a.source+"$");throw rf("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function yc(a){var b=[];return s(a)&&d(a,function(a){b.push(xc(a))}),b}function zc(){this.SCE_CONTEXTS=sf;var a=["self"],b=[];this.resourceUrlWhitelist=function(b){return arguments.length&&(a=yc(b)),a},this.resourceUrlBlacklist=function(a){return arguments.length&&(b=yc(a)),b},this.$get=["$injector",function(c){function d(a,b){return"self"===a?Gc(b):!!a.exec(b.href)}function e(c){var e,f,g=Fc(c.toString()),h=!1;for(e=0,f=a.length;f>e;e++)if(d(a[e],g)){h=!0;break}if(h)for(e=0,f=b.length;f>e;e++)if(d(b[e],g)){h=!1;break}return h}function f(a){var b=function(a){this.$$unwrapTrustedValue=function(){return a}};return a&&(b.prototype=new a),b.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},b.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},b}function g(a,b){var c=l.hasOwnProperty(a)?l[a]:null;if(!c)throw rf("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",a,b);if(null===b||r(b)||""===b)return b;if("string"!=typeof b)throw rf("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",a);return new c(b)}function h(a){return a instanceof k?a.$$unwrapTrustedValue():a}function i(a,b){if(null===b||r(b)||""===b)return b;var c=l.hasOwnProperty(a)?l[a]:null;if(c&&b instanceof c)return b.$$unwrapTrustedValue();if(a===sf.RESOURCE_URL){if(e(b))return b;throw rf("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",b.toString())}if(a===sf.HTML)return j(b);throw rf("unsafe","Attempting to use an unsafe value in a safe context.")}var j=function(a){throw rf("unsafe","Attempting to use an unsafe value in a safe context.")};c.has("$sanitize")&&(j=c.get("$sanitize"));var k=f(),l={};return l[sf.HTML]=f(k),l[sf.CSS]=f(k),l[sf.URL]=f(k),l[sf.JS]=f(k),l[sf.RESOURCE_URL]=f(l[sf.URL]),{trustAs:g,getTrusted:i,valueOf:h}}]}function Ac(){var a=!0;this.enabled=function(b){return arguments.length&&(a=!!b),a},this.$get=["$parse","$sceDelegate",function(b,c){if(a&&8>Hd)throw rf("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var e=O(sf);e.isEnabled=function(){return a},e.trustAs=c.trustAs,e.getTrusted=c.getTrusted,e.valueOf=c.valueOf,a||(e.trustAs=e.getTrusted=function(a,b){return b},e.valueOf=o),e.parseAs=function(a,c){var d=b(c);return d.literal&&d.constant?d:b(c,function(b){return e.getTrusted(a,b)})};var f=e.parseAs,g=e.getTrusted,h=e.trustAs;return d(sf,function(a,b){var c=Dd(b);e[va("parse_as_"+c)]=function(b){return f(a,b)},e[va("get_trusted_"+c)]=function(b){return g(a,b)},e[va("trust_as_"+c)]=function(b){return h(a,b)}}),e}]}function Bc(){this.$get=["$window","$document",function(a,b){var c,d,e={},f=a.chrome&&a.chrome.app&&a.chrome.app.runtime,g=!f&&a.history&&a.history.pushState,h=l((/android (\d+)/.exec(Dd((a.navigator||{}).userAgent))||[])[1]),i=/Boxee/i.test((a.navigator||{}).userAgent),j=b[0]||{},k=/^(Moz|webkit|ms)(?=[A-Z])/,m=j.body&&j.body.style,n=!1,o=!1;if(m){for(var p in m)if(d=k.exec(p)){c=d[0],c=c.substr(0,1).toUpperCase()+c.substr(1);break}c||(c="WebkitOpacity"in m&&"webkit"),n=!!("transition"in m||c+"Transition"in m),o=!!("animation"in m||c+"Animation"in m),!h||n&&o||(n=v(m.webkitTransition),o=v(m.webkitAnimation))}return{history:!(!g||4>h||i),hasEvent:function(a){if("input"===a&&11>=Hd)return!1;if(r(e[a])){var b=j.createElement("div");e[a]="on"+a in b}return e[a]},csp:Xd(),vendorPrefix:c,transitions:n,animations:o,android:h}}]}function Cc(){var a;this.httpOptions=function(b){return b?(a=b,this):a},this.$get=["$templateCache","$http","$q","$sce",function(b,c,d,e){function f(g,h){function i(a){if(!h)throw tf("tpload","Failed to load template: {0} (HTTP status: {1} {2})",g,a.status,a.statusText);return d.reject(a)}f.totalPendingRequests++,v(g)&&b.get(g)||(g=e.getTrustedResourceUrl(g));var k=c.defaults&&c.defaults.transformResponse;return Td(k)?k=k.filter(function(a){return a!==zb}):k===zb&&(k=null),c.get(g,j({cache:b,transformResponse:k},a))["finally"](function(){f.totalPendingRequests--}).then(function(a){return b.put(g,a.data),a.data},i)}return f.totalPendingRequests=0,f}]}function Dc(){this.$get=["$rootScope","$browser","$location",function(a,b,c){var e={};return e.findBindings=function(a,b,c){var e=a.getElementsByClassName("ng-binding"),f=[];return d(e,function(a){var e=Rd.element(a).data("$binding");e&&d(e,function(d){if(c){var e=new RegExp("(^|\\s)"+Wd(b)+"(\\s|\\||$)");e.test(d)&&f.push(a)}else-1!=d.indexOf(b)&&f.push(a)})}),f},e.findModels=function(a,b,c){for(var d=["ng-","data-ng-","ng\\:"],e=0;e<d.length;++e){var f=c?"=":"*=",g="["+d[e]+"model"+f+'"'+b+'"]',h=a.querySelectorAll(g);if(h.length)return h}},e.getLocation=function(){return c.url()},e.setLocation=function(b){b!==c.url()&&(c.url(b),a.$digest())},e.whenStable=function(a){b.notifyWhenNoOutstandingRequests(a)},e}]}function Ec(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(a,b,c,d,e){function f(f,h,i){y(f)||(i=h,h=f,f=n);var j,k=R(arguments,3),l=s(i)&&!i,m=(l?d:c).defer(),o=m.promise;return j=b.defer(function(){try{m.resolve(f.apply(null,k))}catch(b){m.reject(b),e(b)}finally{delete g[o.$$timeoutId]}l||a.$apply()},h),o.$$timeoutId=j,g[j]=m,o}var g={};return f.cancel=function(a){return a&&a.$$timeoutId in g?(g[a.$$timeoutId].reject("canceled"),delete g[a.$$timeoutId],b.defer.cancel(a.$$timeoutId)):!1},f}]}function Fc(a){var b=a;return Hd&&(uf.setAttribute("href",b),b=uf.href),uf.setAttribute("href",b),{href:uf.href,protocol:uf.protocol?uf.protocol.replace(/:$/,""):"",host:uf.host,search:uf.search?uf.search.replace(/^\?/,""):"",hash:uf.hash?uf.hash.replace(/^#/,""):"",hostname:uf.hostname,port:uf.port,pathname:"/"===uf.pathname.charAt(0)?uf.pathname:"/"+uf.pathname}}function Gc(a){var b=v(a)?Fc(a):a;return b.protocol===vf.protocol&&b.host===vf.host}function Hc(){this.$get=p(a)}function Ic(a){function b(a){try{return decodeURIComponent(a)}catch(b){return a}}var c=a[0]||{},d={},e="";return function(){var a,f,g,h,i,j=c.cookie||"";if(j!==e)for(e=j,a=e.split("; "),d={},g=0;g<a.length;g++)f=a[g],h=f.indexOf("="),h>0&&(i=b(f.substring(0,h)),r(d[i])&&(d[i]=b(f.substring(h+1))));return d}}function Jc(){this.$get=Ic}function Kc(a){function b(e,f){if(t(e)){var g={};return d(e,function(a,c){g[c]=b(c,a)}),g}return a.factory(e+c,f)}var c="Filter";this.register=b,this.$get=["$injector",function(a){return function(b){return a.get(b+c)}}],b("currency",Pc),b("date",cd),b("filter",Lc),b("json",dd),b("limitTo",ed),b("lowercase",Cf),b("number",Qc),b("orderBy",fd),b("uppercase",Df)}function Lc(){return function(a,d,e){if(!c(a)){if(null==a)return a;throw b("filter")("notarray","Expected array but received: {0}",a)}var f,g,h=Oc(d);switch(h){case"function":f=d;break;case"boolean":case"null":case"number":case"string":g=!0;case"object":f=Mc(d,e,g);break;default:return a}return Array.prototype.filter.call(a,f)}}function Mc(a,b,c){var d,e=t(a)&&"$"in a;return b===!0?b=P:y(b)||(b=function(a,b){return r(a)?!1:null===a||null===b?a===b:t(b)||t(a)&&!q(a)?!1:(a=Dd(""+a),b=Dd(""+b),-1!==a.indexOf(b))}),d=function(d){return e&&!t(d)?Nc(d,a.$,b,!1):Nc(d,a,b,c)}}function Nc(a,b,c,d,e){var f=Oc(a),g=Oc(b);if("string"===g&&"!"===b.charAt(0))return!Nc(a,b.substring(1),c,d);if(Td(a))return a.some(function(a){return Nc(a,b,c,d)});switch(f){case"object":var h;if(d){for(h in a)if("$"!==h.charAt(0)&&Nc(a[h],b,c,!0))return!0;return e?!1:Nc(a,b,c,!1)}if("object"===g){for(h in b){var i=b[h];if(!y(i)&&!r(i)){var j="$"===h,k=j?a:a[h];if(!Nc(k,i,c,j,j))return!1}}return!0}return c(a,b);case"function":return!1;default:return c(a,b)}}function Oc(a){return null===a?"null":typeof a}function Pc(a){var b=a.NUMBER_FORMATS;return function(a,c,d){return r(c)&&(c=b.CURRENCY_SYM),r(d)&&(d=b.PATTERNS[1].maxFrac),null==a?a:Tc(a,b.PATTERNS[1],b.GROUP_SEP,b.DECIMAL_SEP,d).replace(/\u00A4/g,c)}}function Qc(a){var b=a.NUMBER_FORMATS;return function(a,c){return null==a?a:Tc(a,b.PATTERNS[0],b.GROUP_SEP,b.DECIMAL_SEP,c)}}function Rc(a){var b,c,d,e,f,g=0;for((c=a.indexOf(xf))>-1&&(a=a.replace(xf,"")),(d=a.search(/e/i))>0?(0>c&&(c=d),c+=+a.slice(d+1),a=a.substring(0,d)):0>c&&(c=a.length),d=0;a.charAt(d)==yf;d++);if(d==(f=a.length))b=[0],c=1;else{for(f--;a.charAt(f)==yf;)f--;for(c-=d,b=[],e=0;f>=d;d++,e++)b[e]=+a.charAt(d)}return c>wf&&(b=b.splice(0,wf-1),g=c-1,c=1),{d:b,e:g,i:c}}function Sc(a,b,c,d){var e=a.d,f=e.length-a.i;b=r(b)?Math.min(Math.max(c,f),d):+b;var g=b+a.i,h=e[g];if(g>0){e.splice(Math.max(a.i,g));for(var i=g;i<e.length;i++)e[i]=0}else{f=Math.max(0,f),a.i=1,e.length=Math.max(1,g=b+1),e[0]=0;for(var j=1;g>j;j++)e[j]=0}if(h>=5)if(0>g-1){for(var k=0;k>g;k--)e.unshift(0),a.i++;e.unshift(1),a.i++}else e[g-1]++;for(;f<Math.max(0,b);f++)e.push(0);var l=e.reduceRight(function(a,b,c,d){return b+=a,d[c]=b%10,Math.floor(b/10)},0);l&&(e.unshift(l),a.i++)}function Tc(a,b,c,d,e){if(!v(a)&&!w(a)||isNaN(a))return"";var f,g=!isFinite(a),h=!1,i=Math.abs(a)+"",j="";if(g)j="";else{f=Rc(i),Sc(f,e,b.minFrac,b.maxFrac);var k=f.d,l=f.i,m=f.e,n=[];for(h=k.reduce(function(a,b){return a&&!b},!0);0>l;)k.unshift(0),l++;l>0?n=k.splice(l):(n=k,k=[0]);var o=[];for(k.length>=b.lgSize&&o.unshift(k.splice(-b.lgSize).join(""));k.length>b.gSize;)o.unshift(k.splice(-b.gSize).join(""));k.length&&o.unshift(k.join("")),j=o.join(c),n.length&&(j+=d+n.join("")),m&&(j+="e+"+m)}return 0>a&&!h?b.negPre+j+b.negSuf:b.posPre+j+b.posSuf}function Uc(a,b,c,d){var e="";for((0>a||d&&0>=a)&&(d?a=-a+1:(a=-a,e="-")),a=""+a;a.length<b;)a=yf+a;return c&&(a=a.substr(a.length-b)),e+a}function Vc(a,b,c,d,e){return c=c||0,function(f){var g=f["get"+a]();return(c>0||g>-c)&&(g+=c),0===g&&-12==c&&(g=12),Uc(g,b,d,e)}}function Wc(a,b,c){return function(d,e){var f=d["get"+a](),g=(c?"STANDALONE":"")+(b?"SHORT":""),h=Ed(g+a);return e[h][f]}}function Xc(a,b,c){var d=-1*c,e=d>=0?"+":"";return e+=Uc(Math[d>0?"floor":"ceil"](d/60),2)+Uc(Math.abs(d%60),2)}function Yc(a){var b=new Date(a,0,1).getDay();return new Date(a,0,(4>=b?5:12)-b)}function Zc(a){return new Date(a.getFullYear(),a.getMonth(),a.getDate()+(4-a.getDay()))}function $c(a){return function(b){var c=Yc(b.getFullYear()),d=Zc(b),e=+d-+c,f=1+Math.round(e/6048e5);return Uc(f,a)}}function _c(a,b){return a.getHours()<12?b.AMPMS[0]:b.AMPMS[1]}function ad(a,b){return a.getFullYear()<=0?b.ERAS[0]:b.ERAS[1]}function bd(a,b){return a.getFullYear()<=0?b.ERANAMES[0]:b.ERANAMES[1]}function cd(a){function b(a){var b;if(b=a.match(c)){var d=new Date(0),e=0,f=0,g=b[8]?d.setUTCFullYear:d.setFullYear,h=b[8]?d.setUTCHours:d.setHours;b[9]&&(e=l(b[9]+b[10]),f=l(b[9]+b[11])),g.call(d,l(b[1]),l(b[2])-1,l(b[3]));var i=l(b[4]||0)-e,j=l(b[5]||0)-f,k=l(b[6]||0),m=Math.round(1e3*parseFloat("0."+(b[7]||0)));return h.call(d,i,j,k,m),d}return a}var c=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(c,e,f){var g,h,i="",j=[];if(e=e||"mediumDate",e=a.DATETIME_FORMATS[e]||e,v(c)&&(c=Bf.test(c)?l(c):b(c)),w(c)&&(c=new Date(c)),!x(c)||!isFinite(c.getTime()))return c;for(;e;)h=Af.exec(e),h?(j=Q(j,h,1),e=j.pop()):(j.push(e),e=null);var k=c.getTimezoneOffset();return f&&(k=W(f,k),c=Y(c,f,!0)),d(j,function(b){g=zf[b],i+=g?g(c,a.DATETIME_FORMATS,k):"''"===b?"'":b.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),i}}function dd(){return function(a,b){return r(b)&&(b=2),U(a,b)}}function ed(){return function(a,b,c){return b=Math.abs(Number(b))===1/0?Number(b):l(b),isNaN(b)?a:(w(a)&&(a=a.toString()),Td(a)||v(a)?(c=!c||isNaN(c)?0:l(c),c=0>c?Math.max(0,a.length+c):c,b>=0?a.slice(c,c+b):0===c?a.slice(b,a.length):a.slice(Math.max(0,c+b),c)):a)}}function fd(a){function d(b,c){return c=c?-1:1,b.map(function(b){var d=1,e=o;if(y(b))e=b;else if(v(b)&&("+"!=b.charAt(0)&&"-"!=b.charAt(0)||(d="-"==b.charAt(0)?-1:1,b=b.substring(1)),""!==b&&(e=a(b),e.constant))){var f=e();e=function(a){return a[f]}}return{get:e,descending:d*c}})}function e(a){switch(typeof a){case"number":case"boolean":case"string":return!0;default:return!1}}function f(a,b){return"function"==typeof a.valueOf&&(a=a.valueOf(),e(a))?a:q(a)&&(a=a.toString(),e(a))?a:b}function g(a,b){var c=typeof a;return null===a?(c="string",a="null"):"string"===c?a=a.toLowerCase():"object"===c&&(a=f(a,b)),{value:a,type:c}}function h(a,b){var c=0;return a.type===b.type?a.value!==b.value&&(c=a.value<b.value?-1:1):c=a.type<b.type?-1:1,c}return function(a,e,f){function i(a,b){return{value:a,predicateValues:k.map(function(c){return g(c.get(a),b)})}}function j(a,b){for(var c=0,d=0,e=k.length;e>d&&!(c=h(a.predicateValues[d],b.predicateValues[d])*k[d].descending);++d);return c}if(null==a)return a;if(!c(a))throw b("orderBy")("notarray","Expected array but received: {0}",a);Td(e)||(e=[e]),0===e.length&&(e=["+"]);var k=d(e,f);k.push({get:function(){return{}},descending:f?-1:1});var l=Array.prototype.map.call(a,i);return l.sort(j),a=l.map(function(a){return a.value})}}function gd(a){return y(a)&&(a={link:a}),a.restrict=a.restrict||"AC",p(a)}function hd(a,b){a.$name=b}function id(a,b,c,e,f){var g=this,h=[];g.$error={},g.$$success={},g.$pending=void 0,g.$name=f(b.name||b.ngForm||"")(c),g.$dirty=!1,g.$pristine=!0,g.$valid=!0,g.$invalid=!1,g.$submitted=!1,g.$$parentForm=Gf,g.$rollbackViewValue=function(){d(h,function(a){a.$rollbackViewValue()})},g.$commitViewValue=function(){d(h,function(a){a.$commitViewValue()})},g.$addControl=function(a){ma(a.$name,"input"),h.push(a),a.$name&&(g[a.$name]=a),a.$$parentForm=g},g.$$renameControl=function(a,b){var c=a.$name;g[c]===a&&delete g[c],g[b]=a,a.$name=b},g.$removeControl=function(a){a.$name&&g[a.$name]===a&&delete g[a.$name],d(g.$pending,function(b,c){g.$setValidity(c,null,a)}),d(g.$error,function(b,c){g.$setValidity(c,null,a)}),d(g.$$success,function(b,c){g.$setValidity(c,null,a)}),M(h,a),a.$$parentForm=Gf},xd({ctrl:this,$element:a,set:function(a,b,c){var d=a[b];if(d){var e=d.indexOf(c);-1===e&&d.push(c)}else a[b]=[c]},unset:function(a,b,c){var d=a[b];d&&(M(d,c),0===d.length&&delete a[b])},$animate:e}),g.$setDirty=function(){e.removeClass(a,qg),e.addClass(a,rg),g.$dirty=!0,g.$pristine=!1,g.$$parentForm.$setDirty()},g.$setPristine=function(){e.setClass(a,qg,rg+" "+Hf),g.$dirty=!1,g.$pristine=!0,g.$submitted=!1,d(h,function(a){a.$setPristine()})},g.$setUntouched=function(){d(h,function(a){a.$setUntouched()})},g.$setSubmitted=function(){e.addClass(a,Hf),g.$submitted=!0,g.$$parentForm.$setSubmitted()}}function jd(a){a.$formatters.push(function(b){return a.$isEmpty(b)?b:b.toString()})}function kd(a,b,c,d,e,f){ld(a,b,c,d,e,f),jd(d)}function ld(a,b,c,d,e,f){var g=Dd(b[0].type);if(!e.android){var h=!1;b.on("compositionstart",function(){h=!0}),b.on("compositionend",function(){h=!1,j()})}var i,j=function(a){if(i&&(f.defer.cancel(i),i=null),!h){var e=b.val(),j=a&&a.type;"password"===g||c.ngTrim&&"false"===c.ngTrim||(e=Vd(e)),(d.$viewValue!==e||""===e&&d.$$hasNativeValidators)&&d.$setViewValue(e,j)}};if(e.hasEvent("input"))b.on("input",j);else{var k=function(a,b,c){
i||(i=f.defer(function(){i=null,b&&b.value===c||j(a)}))};b.on("keydown",function(a){var b=a.keyCode;91===b||b>15&&19>b||b>=37&&40>=b||k(a,this,this.value)}),e.hasEvent("paste")&&b.on("paste cut",k)}b.on("change",j),Vf[g]&&d.$$hasNativeValidators&&g===c.type&&b.on(Uf,function(a){if(!i){var b=this[Bd],c=b.badInput,d=b.typeMismatch;i=f.defer(function(){i=null,b.badInput===c&&b.typeMismatch===d||j(a)})}}),d.$render=function(){var a=d.$isEmpty(d.$viewValue)?"":d.$viewValue;b.val()!==a&&b.val(a)}}function md(a,b){if(x(a))return a;if(v(a)){Rf.lastIndex=0;var c=Rf.exec(a);if(c){var d=+c[1],e=+c[2],f=0,g=0,h=0,i=0,j=Yc(d),k=7*(e-1);return b&&(f=b.getHours(),g=b.getMinutes(),h=b.getSeconds(),i=b.getMilliseconds()),new Date(d,0,j.getDate()+k,f,g,h,i)}}return NaN}function nd(a,b){return function(c,e){var f,g;if(x(c))return c;if(v(c)){if('"'==c.charAt(0)&&'"'==c.charAt(c.length-1)&&(c=c.substring(1,c.length-1)),Lf.test(c))return new Date(c);if(a.lastIndex=0,f=a.exec(c))return f.shift(),g=e?{yyyy:e.getFullYear(),MM:e.getMonth()+1,dd:e.getDate(),HH:e.getHours(),mm:e.getMinutes(),ss:e.getSeconds(),sss:e.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},d(f,function(a,c){c<b.length&&(g[b[c]]=+a)}),new Date(g.yyyy,g.MM-1,g.dd,g.HH,g.mm,g.ss||0,1e3*g.sss||0)}return NaN}}function od(a,b,c,d){return function(e,f,g,h,i,j,k){function l(a){return a&&!(a.getTime&&a.getTime()!==a.getTime())}function m(a){return s(a)&&!x(a)?c(a)||void 0:a}pd(e,f,g,h),ld(e,f,g,h,i,j);var n,o=h&&h.$options&&h.$options.timezone;if(h.$$parserName=a,h.$parsers.push(function(a){if(h.$isEmpty(a))return null;if(b.test(a)){var d=c(a,n);return o&&(d=Y(d,o)),d}}),h.$formatters.push(function(a){if(a&&!x(a))throw xg("datefmt","Expected `{0}` to be a date",a);return l(a)?(n=a,n&&o&&(n=Y(n,o,!0)),k("date")(a,d,o)):(n=null,"")}),s(g.min)||g.ngMin){var p;h.$validators.min=function(a){return!l(a)||r(p)||c(a)>=p},g.$observe("min",function(a){p=m(a),h.$validate()})}if(s(g.max)||g.ngMax){var q;h.$validators.max=function(a){return!l(a)||r(q)||c(a)<=q},g.$observe("max",function(a){q=m(a),h.$validate()})}}}function pd(a,b,c,d){var e=b[0],f=d.$$hasNativeValidators=t(e.validity);f&&d.$parsers.push(function(a){var c=b.prop(Bd)||{};return c.badInput||c.typeMismatch?void 0:a})}function qd(a,b,c,d,e,f){if(pd(a,b,c,d),ld(a,b,c,d,e,f),d.$$parserName="number",d.$parsers.push(function(a){return d.$isEmpty(a)?null:Of.test(a)?parseFloat(a):void 0}),d.$formatters.push(function(a){if(!d.$isEmpty(a)){if(!w(a))throw xg("numfmt","Expected `{0}` to be a number",a);a=a.toString()}return a}),s(c.min)||c.ngMin){var g;d.$validators.min=function(a){return d.$isEmpty(a)||r(g)||a>=g},c.$observe("min",function(a){s(a)&&!w(a)&&(a=parseFloat(a,10)),g=w(a)&&!isNaN(a)?a:void 0,d.$validate()})}if(s(c.max)||c.ngMax){var h;d.$validators.max=function(a){return d.$isEmpty(a)||r(h)||h>=a},c.$observe("max",function(a){s(a)&&!w(a)&&(a=parseFloat(a,10)),h=w(a)&&!isNaN(a)?a:void 0,d.$validate()})}}function rd(a,b,c,d,e,f){ld(a,b,c,d,e,f),jd(d),d.$$parserName="url",d.$validators.url=function(a,b){var c=a||b;return d.$isEmpty(c)||Mf.test(c)}}function sd(a,b,c,d,e,f){ld(a,b,c,d,e,f),jd(d),d.$$parserName="email",d.$validators.email=function(a,b){var c=a||b;return d.$isEmpty(c)||Nf.test(c)}}function td(a,b,c,d){r(c.name)&&b.attr("name",g());var e=function(a){b[0].checked&&d.$setViewValue(c.value,a&&a.type)};b.on("click",e),d.$render=function(){var a=c.value;b[0].checked=a==d.$viewValue},c.$observe("value",d.$render)}function ud(a,b,c,d,e){var f;if(s(d)){if(f=a(d),!f.constant)throw xg("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",c,d);return f(b)}return e}function vd(a,b,c,d,e,f,g,h){var i=ud(h,a,"ngTrueValue",c.ngTrueValue,!0),j=ud(h,a,"ngFalseValue",c.ngFalseValue,!1),k=function(a){d.$setViewValue(b[0].checked,a&&a.type)};b.on("click",k),d.$render=function(){b[0].checked=d.$viewValue},d.$isEmpty=function(a){return a===!1},d.$formatters.push(function(a){return P(a,i)}),d.$parsers.push(function(a){return a?i:j})}function wd(a,b){return a="ngClass"+a,["$animate",function(c){function e(a,b){var c=[];a:for(var d=0;d<a.length;d++){for(var e=a[d],f=0;f<b.length;f++)if(e==b[f])continue a;c.push(e)}return c}function f(a){var b=[];return Td(a)?(d(a,function(a){b=b.concat(f(a))}),b):v(a)?a.split(" "):t(a)?(d(a,function(a,c){a&&(b=b.concat(c.split(" ")))}),b):a}return{restrict:"AC",link:function(g,h,i){function j(a){var b=l(a,1);i.$addClass(b)}function k(a){var b=l(a,-1);i.$removeClass(b)}function l(a,b){var c=h.data("$classCounts")||pa(),e=[];return d(a,function(a){(b>0||c[a])&&(c[a]=(c[a]||0)+b,c[a]===+(b>0)&&e.push(a))}),h.data("$classCounts",c),e.join(" ")}function m(a,b){var d=e(b,a),f=e(a,b);d=l(d,1),f=l(f,-1),d&&d.length&&c.addClass(h,d),f&&f.length&&c.removeClass(h,f)}function n(a){if(b===!0||g.$index%2===b){var c=f(a||[]);if(o){if(!P(a,o)){var d=f(o);m(d,c)}}else j(c)}o=Td(a)?a.map(function(a){return O(a)}):O(a)}var o;g.$watch(i[a],n,!0),i.$observe("class",function(b){n(g.$eval(i[a]))}),"ngClass"!==a&&g.$watch("$index",function(c,d){var e=1&c;if(e!==(1&d)){var h=f(g.$eval(i[a]));e===b?j(h):k(h)}})}}}]}function xd(a){function b(a,b,h){r(b)?c("$pending",a,h):d("$pending",a,h),F(b)?b?(k(g.$error,a,h),j(g.$$success,a,h)):(j(g.$error,a,h),k(g.$$success,a,h)):(k(g.$error,a,h),k(g.$$success,a,h)),g.$pending?(e(ug,!0),g.$valid=g.$invalid=void 0,f("",null)):(e(ug,!1),g.$valid=yd(g.$error),g.$invalid=!g.$valid,f("",g.$valid));var i;i=g.$pending&&g.$pending[a]?void 0:g.$error[a]?!1:g.$$success[a]?!0:null,f(a,i),g.$$parentForm.$setValidity(a,i,g)}function c(a,b,c){g[a]||(g[a]={}),j(g[a],b,c)}function d(a,b,c){g[a]&&k(g[a],b,c),yd(g[a])&&(g[a]=void 0)}function e(a,b){b&&!i[a]?(l.addClass(h,a),i[a]=!0):!b&&i[a]&&(l.removeClass(h,a),i[a]=!1)}function f(a,b){a=a?"-"+ia(a,"-"):"",e(og+a,b===!0),e(pg+a,b===!1)}var g=a.ctrl,h=a.$element,i={},j=a.set,k=a.unset,l=a.$animate;i[pg]=!(i[og]=h.hasClass(og)),g.$setValidity=b}function yd(a){if(a)for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function zd(a){a[0].hasAttribute("selected")&&(a[0].selected=!0)}var Ad=/^\/(.+)\/([a-z]*)$/,Bd="validity",Cd=Object.prototype.hasOwnProperty,Dd=function(a){return v(a)?a.toLowerCase():a},Ed=function(a){return v(a)?a.toUpperCase():a},Fd=function(a){return v(a)?a.replace(/[A-Z]/g,function(a){return String.fromCharCode(32|a.charCodeAt(0))}):a},Gd=function(a){return v(a)?a.replace(/[a-z]/g,function(a){return String.fromCharCode(-33&a.charCodeAt(0))}):a};"i"!=="I".toLowerCase()&&(Dd=Fd,Ed=Gd);var Hd,Id,Jd,Kd,Ld=[].slice,Md=[].splice,Nd=[].push,Od=Object.prototype.toString,Pd=Object.getPrototypeOf,Qd=b("ng"),Rd=a.angular||(a.angular={}),Sd=0;Hd=a.document.documentMode,n.$inject=[],o.$inject=[];var Td=Array.isArray,Ud=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array\]$/,Vd=function(a){return v(a)?a.trim():a},Wd=function(a){return a.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},Xd=function(){function b(){try{return new Function(""),!1}catch(a){return!0}}if(!s(Xd.rules)){var c=a.document.querySelector("[ng-csp]")||a.document.querySelector("[data-ng-csp]");if(c){var d=c.getAttribute("ng-csp")||c.getAttribute("data-ng-csp");Xd.rules={noUnsafeEval:!d||-1!==d.indexOf("no-unsafe-eval"),noInlineStyle:!d||-1!==d.indexOf("no-inline-style")}}else Xd.rules={noUnsafeEval:b(),noInlineStyle:!1}}return Xd.rules},Yd=function(){if(s(Yd.name_))return Yd.name_;var b,c,d,e,f=$d.length;for(c=0;f>c;++c)if(d=$d[c],b=a.document.querySelector("["+d.replace(":","\\:")+"jq]")){e=b.getAttribute(d+"jq");break}return Yd.name_=e},Zd=/:/g,$d=["ng-","data-ng-","ng:","x-ng-"],_d=/[A-Z]/g,ae=!1,be=1,ce=2,de=3,ee=8,fe=9,ge=11,he={full:"1.5.5",major:1,minor:5,dot:5,codeName:"material-conspiration"};Da.expando="ng339";var ie=Da.cache={},je=1,ke=function(a,b,c){a.addEventListener(b,c,!1)},le=function(a,b,c){a.removeEventListener(b,c,!1)};Da._data=function(a){return this.cache[a[this.expando]]||{}};var me=/([\:\-\_]+(.))/g,ne=/^moz([A-Z])/,oe={mouseleave:"mouseout",mouseenter:"mouseover"},pe=b("jqLite"),qe=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,re=/<|&#?\w+;/,se=/<([\w:-]+)/,te=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,ue={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ue.optgroup=ue.option,ue.tbody=ue.tfoot=ue.colgroup=ue.caption=ue.thead,ue.th=ue.td;var ve=a.Node.prototype.contains||function(a){return!!(16&this.compareDocumentPosition(a))},we=Da.prototype={ready:function(b){function c(){d||(d=!0,b())}var d=!1;"complete"===a.document.readyState?a.setTimeout(c):(this.on("DOMContentLoaded",c),Da(a).on("load",c))},toString:function(){var a=[];return d(this,function(b){a.push(""+b)}),"["+a.join(", ")+"]"},eq:function(a){return Id(a>=0?this[a]:this[this.length+a])},length:0,push:Nd,sort:[].sort,splice:[].splice},xe={};d("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(a){xe[Dd(a)]=a});var ye={};d("input,select,option,textarea,button,form,details".split(","),function(a){ye[a]=!0});var ze={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};d({data:Ja,removeData:Ha,hasData:ya,cleanData:za},function(a,b){Da[b]=a}),d({data:Ja,inheritedData:Pa,scope:function(a){return Id.data(a,"$scope")||Pa(a.parentNode||a,["$isolateScope","$scope"])},isolateScope:function(a){return Id.data(a,"$isolateScope")||Id.data(a,"$isolateScopeNoTemplate")},controller:Oa,injector:function(a){return Pa(a,"$injector")},removeAttr:function(a,b){a.removeAttribute(b)},hasClass:Ka,css:function(a,b,c){return b=va(b),s(c)?void(a.style[b]=c):a.style[b]},attr:function(a,b,c){var d=a.nodeType;if(d!==de&&d!==ce&&d!==ee){var e=Dd(b);if(xe[e]){if(!s(c))return a[b]||(a.attributes.getNamedItem(b)||n).specified?e:void 0;c?(a[b]=!0,a.setAttribute(b,e)):(a[b]=!1,a.removeAttribute(e))}else if(s(c))a.setAttribute(b,c);else if(a.getAttribute){var f=a.getAttribute(b,2);return null===f?void 0:f}}},prop:function(a,b,c){return s(c)?void(a[b]=c):a[b]},text:function(){function a(a,b){if(r(b)){var c=a.nodeType;return c===be||c===de?a.textContent:""}a.textContent=b}return a.$dv="",a}(),val:function(a,b){if(r(b)){if(a.multiple&&"select"===L(a)){var c=[];return d(a.options,function(a){a.selected&&c.push(a.value||a.text)}),0===c.length?null:c}return a.value}a.value=b},html:function(a,b){return r(b)?a.innerHTML:(Fa(a,!0),void(a.innerHTML=b))},empty:Qa},function(a,b){Da.prototype[b]=function(b,c){var d,e,f=this.length;if(a!==Qa&&r(2==a.length&&a!==Ka&&a!==Oa?b:c)){if(t(b)){for(d=0;f>d;d++)if(a===Ja)a(this[d],b);else for(e in b)a(this[d],e,b[e]);return this}for(var g=a.$dv,h=r(g)?Math.min(f,1):f,i=0;h>i;i++){var j=a(this[i],b,c);g=g?g+j:j}return g}for(d=0;f>d;d++)a(this[d],b,c);return this}}),d({removeData:Ha,on:function(a,b,c,d){if(s(d))throw pe("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(xa(a)){var e=Ia(a,!0),f=e.events,g=e.handle;g||(g=e.handle=Va(a,f));for(var h=b.indexOf(" ")>=0?b.split(" "):[b],i=h.length,j=function(b,d,e){var h=f[b];h||(h=f[b]=[],h.specialHandlerWrapper=d,"$destroy"===b||e||ke(a,b,g)),h.push(c)};i--;)b=h[i],oe[b]?(j(oe[b],Xa),j(b,void 0,!0)):j(b)}},off:Ga,one:function(a,b,c){a=Id(a),a.on(b,function d(){a.off(b,c),a.off(b,d)}),a.on(b,c)},replaceWith:function(a,b){var c,e=a.parentNode;Fa(a),d(new Da(b),function(b){c?e.insertBefore(b,c.nextSibling):e.replaceChild(b,a),c=b})},children:function(a){var b=[];return d(a.childNodes,function(a){a.nodeType===be&&b.push(a)}),b},contents:function(a){return a.contentDocument||a.childNodes||[]},append:function(a,b){var c=a.nodeType;if(c===be||c===ge){b=new Da(b);for(var d=0,e=b.length;e>d;d++){var f=b[d];a.appendChild(f)}}},prepend:function(a,b){if(a.nodeType===be){var c=a.firstChild;d(new Da(b),function(b){a.insertBefore(b,c)})}},wrap:function(a,b){Ca(a,Id(b).eq(0).clone()[0])},remove:Ra,detach:function(a){Ra(a,!0)},after:function(a,b){var c=a,d=a.parentNode;b=new Da(b);for(var e=0,f=b.length;f>e;e++){var g=b[e];d.insertBefore(g,c.nextSibling),c=g}},addClass:Ma,removeClass:La,toggleClass:function(a,b,c){b&&d(b.split(" "),function(b){var d=c;r(d)&&(d=!Ka(a,b)),(d?Ma:La)(a,b)})},parent:function(a){var b=a.parentNode;return b&&b.nodeType!==ge?b:null},next:function(a){return a.nextElementSibling},find:function(a,b){return a.getElementsByTagName?a.getElementsByTagName(b):[]},clone:Ea,triggerHandler:function(a,b,c){var e,f,g,h=b.type||b,i=Ia(a),k=i&&i.events,l=k&&k[h];l&&(e={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return this.immediatePropagationStopped===!0},stopPropagation:n,type:h,target:a},b.type&&(e=j(e,b)),f=O(l),g=c?[e].concat(c):[e],d(f,function(b){e.isImmediatePropagationStopped()||b.apply(a,g)}))}},function(a,b){Da.prototype[b]=function(b,c,d){for(var e,f=0,g=this.length;g>f;f++)r(e)?(e=a(this[f],b,c,d),s(e)&&(e=Id(e))):Na(e,a(this[f],b,c,d));return s(e)?e:this},Da.prototype.bind=Da.prototype.on,Da.prototype.unbind=Da.prototype.off}),$a.prototype={put:function(a,b){this[Za(a,this.nextUid)]=b},get:function(a){return this[Za(a,this.nextUid)]},remove:function(a){var b=this[a=Za(a,this.nextUid)];return delete this[a],b}};var Ae=[function(){this.$get=[function(){return $a}]}],Be=/^([^\(]+?)=>/,Ce=/^[^\(]*\(\s*([^\)]*)\)/m,De=/,/,Ee=/^\s*(_?)(\S+?)\1\s*$/,Fe=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Ge=b("$injector");cb.$$annotate=bb;var He=b("$animate"),Ie=1,Je="ng-animate",Ke=function(){this.$get=n},Le=function(){var a=new $a,b=[];this.$get=["$$AnimateRunner","$rootScope",function(c,e){function f(a,b,c){var e=!1;return b&&(b=v(b)?b.split(" "):Td(b)?b:[],d(b,function(b){b&&(e=!0,a[b]=c)})),e}function g(){d(b,function(b){var c=a.get(b);if(c){var e=gb(b.attr("class")),f="",g="";d(c,function(a,b){var c=!!e[b];a!==c&&(a?f+=(f.length?" ":"")+b:g+=(g.length?" ":"")+b)}),d(b,function(a){f&&Ma(a,f),g&&La(a,g)}),a.remove(b)}}),b.length=0}function h(c,d,h){var i=a.get(c)||{},j=f(i,d,!0),k=f(i,h,!1);(j||k)&&(a.put(c,i),b.push(c),1===b.length&&e.$$postDigest(g))}return{enabled:n,on:n,off:n,pin:n,push:function(a,b,d,e){e&&e(),d=d||{},d.from&&a.css(d.from),d.to&&a.css(d.to),(d.addClass||d.removeClass)&&h(a,d.addClass,d.removeClass);var f=new c;return f.complete(),f}}}]},Me=["$provide",function(a){var b=this;this.$$registeredAnimations=Object.create(null),this.register=function(c,d){if(c&&"."!==c.charAt(0))throw He("notcsel","Expecting class selector starting with '.' got '{0}'.",c);var e=c+"-animation";b.$$registeredAnimations[c.substr(1)]=e,a.factory(e,d)},this.classNameFilter=function(a){if(1===arguments.length&&(this.$$classNameFilter=a instanceof RegExp?a:null,this.$$classNameFilter)){var b=new RegExp("(\\s+|\\/)"+Je+"(\\s+|\\/)");if(b.test(this.$$classNameFilter.toString()))throw He("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',Je)}return this.$$classNameFilter},this.$get=["$$animateQueue",function(a){function b(a,b,c){if(c){var d=fb(c);!d||d.parentNode||d.previousElementSibling||(c=null)}c?c.after(a):b.prepend(a)}return{on:a.on,off:a.off,pin:a.pin,enabled:a.enabled,cancel:function(a){a.end&&a.end()},enter:function(c,d,e,f){return d=d&&Id(d),e=e&&Id(e),d=d||e.parent(),b(c,d,e),a.push(c,"enter",hb(f))},move:function(c,d,e,f){return d=d&&Id(d),e=e&&Id(e),d=d||e.parent(),b(c,d,e),a.push(c,"move",hb(f))},leave:function(b,c){return a.push(b,"leave",hb(c),function(){b.remove()})},addClass:function(b,c,d){return d=hb(d),d.addClass=eb(d.addclass,c),a.push(b,"addClass",d)},removeClass:function(b,c,d){return d=hb(d),d.removeClass=eb(d.removeClass,c),a.push(b,"removeClass",d)},setClass:function(b,c,d,e){return e=hb(e),e.addClass=eb(e.addClass,c),e.removeClass=eb(e.removeClass,d),a.push(b,"setClass",e)},animate:function(b,c,d,e,f){return f=hb(f),f.from=f.from?j(f.from,c):c,f.to=f.to?j(f.to,d):d,e=e||"ng-inline-animate",f.tempClasses=eb(f.tempClasses,e),a.push(b,"animate",f)}}}]}],Ne=function(){this.$get=["$$rAF",function(a){function b(b){c.push(b),c.length>1||a(function(){for(var a=0;a<c.length;a++)c[a]();c=[]})}var c=[];return function(){var a=!1;return b(function(){a=!0}),function(c){a?c():b(c)}}}]},Oe=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$document","$timeout",function(a,b,c,e,f){function g(a){this.setHost(a);var b=c(),d=function(a){f(a,0,!1)};this._doneCallbacks=[],this._tick=function(a){var c=e[0];c&&c.hidden?d(a):b(a)},this._state=0}var h=0,i=1,j=2;return g.chain=function(a,b){function c(){return d===a.length?void b(!0):void a[d](function(a){return a===!1?void b(!1):(d++,void c())})}var d=0;c()},g.all=function(a,b){function c(c){f=f&&c,++e===a.length&&b(f)}var e=0,f=!0;d(a,function(a){a.done(c)})},g.prototype={setHost:function(a){this.host=a||{}},done:function(a){this._state===j?a():this._doneCallbacks.push(a)},progress:n,getPromise:function(){if(!this.promise){var b=this;this.promise=a(function(a,c){b.done(function(b){b===!1?c():a()})})}return this.promise},then:function(a,b){return this.getPromise().then(a,b)},"catch":function(a){return this.getPromise()["catch"](a)},"finally":function(a){return this.getPromise()["finally"](a)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(a){var b=this;b._state===h&&(b._state=i,b._tick(function(){b._resolve(a)}))},_resolve:function(a){this._state!==j&&(d(this._doneCallbacks,function(b){b(a)}),this._doneCallbacks.length=0,this._state=j)}},g}]},Pe=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(a,b,c){return function(b,d){function e(){return a(function(){f(),h||i.complete(),h=!0}),i}function f(){g.addClass&&(b.addClass(g.addClass),g.addClass=null),g.removeClass&&(b.removeClass(g.removeClass),g.removeClass=null),g.to&&(b.css(g.to),g.to=null)}var g=d||{};g.$$prepared||(g=N(g)),g.cleanupStyles&&(g.from=g.to=null),g.from&&(b.css(g.from),g.from=null);var h,i=new c;return{start:e,end:e}}}]},Qe=b("$compile"),Re=new mb;nb.$inject=["$provide","$$sanitizeUriProvider"],ob.prototype.isFirstChange=function(){return this.previousValue===Re};var Se=/^((?:x|data)[\:\-_])/i,Te=b("$controller"),Ue=/^(\S+)(\s+as\s+([\w$]+))?$/,Ve=function(){this.$get=["$document",function(a){return function(b){return b?!b.nodeType&&b instanceof Id&&(b=b[0]):b=a[0].body,b.offsetWidth+1}}]},We="application/json",Xe={"Content-Type":We+";charset=utf-8"},Ye=/^\[|^\{(?!\{)/,Ze={"[":/]$/,"{":/}$/},$e=/^\)\]\}',?\n/,_e=b("$http"),af=function(a){return function(){throw _e("legacy","The method `{0}` on the promise returned from `$http` has been disabled.",a)}},bf=Rd.$interpolateMinErr=b("$interpolate");bf.throwNoconcat=function(a){throw bf("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",a)},bf.interr=function(a,b){return bf("interr","Can't interpolate: {0}\n{1}",a,b.toString())};var cf=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,df={http:80,https:443,ftp:21},ef=b("$location"),ff={$$html5:!1,$$replace:!1,absUrl:Wb("$$absUrl"),url:function(a){if(r(a))return this.$$url;var b=cf.exec(a);return(b[1]||""===a)&&this.path(decodeURIComponent(b[1])),(b[2]||b[1]||""===a)&&this.search(b[3]||""),this.hash(b[5]||""),this},protocol:Wb("$$protocol"),host:Wb("$$host"),port:Wb("$$port"),path:Xb("$$path",function(a){return a=null!==a?a.toString():"","/"==a.charAt(0)?a:"/"+a}),search:function(a,b){switch(arguments.length){case 0:return this.$$search;case 1:if(v(a)||w(a))a=a.toString(),this.$$search=_(a);else{if(!t(a))throw ef("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");a=N(a,{}),d(a,function(b,c){null==b&&delete a[c]}),this.$$search=a}break;default:r(b)||null===b?delete this.$$search[a]:this.$$search[a]=b}return this.$$compose(),this},hash:Xb("$$hash",function(a){return null!==a?a.toString():""}),replace:function(){return this.$$replace=!0,this}};d([Vb,Ub,Tb],function(a){a.prototype=Object.create(ff),a.prototype.state=function(b){if(!arguments.length)return this.$$state;if(a!==Tb||!this.$$html5)throw ef("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=r(b)?null:b,this}});var gf=b("$parse"),hf=Function.prototype.call,jf=Function.prototype.apply,kf=Function.prototype.bind,lf=pa();d("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(a){lf[a]=!0});var mf={n:"\n",f:"\f",r:"\r",t:"	",v:"\x0B","'":"'",'"':'"'},nf=function(a){this.options=a};nf.prototype={constructor:nf,lex:function(a){for(this.text=a,this.index=0,this.tokens=[];this.index<this.text.length;){var b=this.text.charAt(this.index);if('"'===b||"'"===b)this.readString(b);else if(this.isNumber(b)||"."===b&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(b,"(){}[].,;:?"))this.tokens.push({index:this.index,text:b}),this.index++;else if(this.isWhitespace(b))this.index++;else{var c=b+this.peek(),d=c+this.peek(2),e=lf[b],f=lf[c],g=lf[d];if(e||f||g){var h=g?d:f?c:b;this.tokens.push({index:this.index,text:h,operator:!0}),this.index+=h.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(a,b){return-1!==b.indexOf(a)},peek:function(a){var b=a||1;return this.index+b<this.text.length?this.text.charAt(this.index+b):!1},isNumber:function(a){return a>="0"&&"9">=a&&"string"==typeof a},isWhitespace:function(a){return" "===a||"\r"===a||"	"===a||"\n"===a||"\x0B"===a||""===a},isIdentifierStart:function(a){return this.options.isIdentifierStart?this.options.isIdentifierStart(a,this.codePointAt(a)):this.isValidIdentifierStart(a)},isValidIdentifierStart:function(a){return a>="a"&&"z">=a||a>="A"&&"Z">=a||"_"===a||"$"===a},isIdentifierContinue:function(a){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(a,this.codePointAt(a)):this.isValidIdentifierContinue(a)},isValidIdentifierContinue:function(a,b){return this.isValidIdentifierStart(a,b)||this.isNumber(a)},codePointAt:function(a){return 1===a.length?a.charCodeAt(0):(a.charCodeAt(0)<<10)+a.charCodeAt(1)-56613888},peekMultichar:function(){var a=this.text.charAt(this.index),b=this.peek();if(!b)return a;var c=a.charCodeAt(0),d=b.charCodeAt(0);return c>=55296&&56319>=c&&d>=56320&&57343>=d?a+b:a},isExpOperator:function(a){return"-"===a||"+"===a||this.isNumber(a)},throwError:function(a,b,c){c=c||this.index;var d=s(b)?"s "+b+"-"+this.index+" ["+this.text.substring(b,c)+"]":" "+c;throw gf("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",a,d,this.text)},readNumber:function(){for(var a="",b=this.index;this.index<this.text.length;){var c=Dd(this.text.charAt(this.index));if("."==c||this.isNumber(c))a+=c;else{var d=this.peek();if("e"==c&&this.isExpOperator(d))a+=c;else if(this.isExpOperator(c)&&d&&this.isNumber(d)&&"e"==a.charAt(a.length-1))a+=c;else{if(!this.isExpOperator(c)||d&&this.isNumber(d)||"e"!=a.charAt(a.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:b,text:a,constant:!0,value:Number(a)})},readIdent:function(){var a=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var b=this.peekMultichar();if(!this.isIdentifierContinue(b))break;this.index+=b.length}this.tokens.push({index:a,text:this.text.slice(a,this.index),identifier:!0})},readString:function(a){var b=this.index;this.index++;for(var c="",d=a,e=!1;this.index<this.text.length;){var f=this.text.charAt(this.index);if(d+=f,e){if("u"===f){var g=this.text.substring(this.index+1,this.index+5);g.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+g+"]"),this.index+=4,c+=String.fromCharCode(parseInt(g,16))}else{var h=mf[f];c+=h||f}e=!1}else if("\\"===f)e=!0;else{if(f===a)return this.index++,void this.tokens.push({index:b,text:d,constant:!0,value:c});c+=f}this.index++}this.throwError("Unterminated quote",b)}};var of=function(a,b){this.lexer=a,this.options=b};of.Program="Program",of.ExpressionStatement="ExpressionStatement",of.AssignmentExpression="AssignmentExpression",of.ConditionalExpression="ConditionalExpression",of.LogicalExpression="LogicalExpression",of.BinaryExpression="BinaryExpression",of.UnaryExpression="UnaryExpression",of.CallExpression="CallExpression",of.MemberExpression="MemberExpression",of.Identifier="Identifier",of.Literal="Literal",of.ArrayExpression="ArrayExpression",of.Property="Property",of.ObjectExpression="ObjectExpression",of.ThisExpression="ThisExpression",of.LocalsExpression="LocalsExpression",of.NGValueParameter="NGValueParameter",of.prototype={ast:function(a){this.text=a,this.tokens=this.lexer.lex(a);var b=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),b},program:function(){for(var a=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&a.push(this.expressionStatement()),!this.expect(";"))return{type:of.Program,body:a}},expressionStatement:function(){return{type:of.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var a,b=this.expression();a=this.expect("|");)b=this.filter(b);return b},expression:function(){return this.assignment()},assignment:function(){var a=this.ternary();return this.expect("=")&&(a={type:of.AssignmentExpression,left:a,right:this.assignment(),operator:"="}),a},ternary:function(){var a,b,c=this.logicalOR();return this.expect("?")&&(a=this.expression(),this.consume(":"))?(b=this.expression(),{type:of.ConditionalExpression,test:c,alternate:a,consequent:b}):c},logicalOR:function(){for(var a=this.logicalAND();this.expect("||");)a={type:of.LogicalExpression,operator:"||",left:a,right:this.logicalAND()};return a},logicalAND:function(){for(var a=this.equality();this.expect("&&");)a={type:of.LogicalExpression,operator:"&&",left:a,right:this.equality()};return a},equality:function(){for(var a,b=this.relational();a=this.expect("==","!=","===","!==");)b={type:of.BinaryExpression,operator:a.text,left:b,right:this.relational()};return b},relational:function(){for(var a,b=this.additive();a=this.expect("<",">","<=",">=");)b={type:of.BinaryExpression,operator:a.text,left:b,right:this.additive()};return b},additive:function(){for(var a,b=this.multiplicative();a=this.expect("+","-");)b={type:of.BinaryExpression,operator:a.text,left:b,right:this.multiplicative()};return b},multiplicative:function(){for(var a,b=this.unary();a=this.expect("*","/","%");)b={type:of.BinaryExpression,operator:a.text,left:b,right:this.unary()};return b},unary:function(){var a;return(a=this.expect("+","-","!"))?{type:of.UnaryExpression,operator:a.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var a;this.expect("(")?(a=this.filterChain(),this.consume(")")):this.expect("[")?a=this.arrayDeclaration():this.expect("{")?a=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?a=N(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?a={type:of.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?a=this.identifier():this.peek().constant?a=this.constant():this.throwError("not a primary expression",this.peek());for(var b;b=this.expect("(","[",".");)"("===b.text?(a={type:of.CallExpression,callee:a,arguments:this.parseArguments()},this.consume(")")):"["===b.text?(a={type:of.MemberExpression,object:a,property:this.expression(),computed:!0},this.consume("]")):"."===b.text?a={type:of.MemberExpression,object:a,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return a},filter:function(a){for(var b=[a],c={type:of.CallExpression,callee:this.identifier(),arguments:b,filter:!0};this.expect(":");)b.push(this.expression());return c},parseArguments:function(){var a=[];if(")"!==this.peekToken().text)do a.push(this.expression());while(this.expect(","));return a},identifier:function(){var a=this.consume();return a.identifier||this.throwError("is not a valid identifier",a),{type:of.Identifier,name:a.text}},constant:function(){return{type:of.Literal,value:this.consume().value}},arrayDeclaration:function(){var a=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;a.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:of.ArrayExpression,elements:a}},object:function(){var a,b=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;a={type:of.Property,kind:"init"},this.peek().constant?a.key=this.constant():this.peek().identifier?a.key=this.identifier():this.throwError("invalid key",this.peek()),this.consume(":"),a.value=this.expression(),b.push(a)}while(this.expect(","));return this.consume("}"),{type:of.ObjectExpression,properties:b}},throwError:function(a,b){throw gf("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",b.text,a,b.index+1,this.text,this.text.substring(b.index))},consume:function(a){if(0===this.tokens.length)throw gf("ueoe","Unexpected end of expression: {0}",this.text);var b=this.expect(a);return b||this.throwError("is unexpected, expecting ["+a+"]",this.peek()),b},peekToken:function(){if(0===this.tokens.length)throw gf("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(a,b,c,d){return this.peekAhead(0,a,b,c,d)},peekAhead:function(a,b,c,d,e){if(this.tokens.length>a){var f=this.tokens[a],g=f.text;if(g===b||g===c||g===d||g===e||!b&&!c&&!d&&!e)return f}return!1},expect:function(a,b,c,d){var e=this.peek(a,b,c,d);return e?(this.tokens.shift(),e):!1},selfReferential:{"this":{type:of.ThisExpression},$locals:{type:of.LocalsExpression}}},mc.prototype={compile:function(a,b){var c=this,e=this.astBuilder.ast(a);this.state={nextId:0,filters:{},expensiveChecks:b,fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},gc(e,c.$filter);var f,g="";if(this.stage="assign",f=jc(e)){this.state.computing="assign";var h=this.nextId();this.recurse(f,h),this.return_(h),g="fn.assign="+this.generateFunction("assign","s,v,l")}var i=hc(e.body);c.stage="inputs",d(i,function(a,b){var d="fn"+b;c.state[d]={vars:[],body:[],own:{}},c.state.computing=d;var e=c.nextId();c.recurse(a,e),c.return_(e),c.state.inputs.push(d),a.watchId=b}),this.state.computing="fn",this.stage="main",this.recurse(e);var j='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+g+this.watchFns()+"return fn;",k=new Function("$filter","ensureSafeMemberName","ensureSafeObject","ensureSafeFunction","getStringValue","ensureSafeAssignContext","ifDefined","plus","text",j)(this.$filter,$b,ac,bc,_b,cc,dc,ec,a);return this.state=this.stage=void 0,k.literal=kc(e),k.constant=lc(e),k},USE:"use",STRICT:"strict",watchFns:function(){var a=[],b=this.state.inputs,c=this;return d(b,function(b){a.push("var "+b+"="+c.generateFunction(b,"s"))}),b.length&&a.push("fn.inputs=["+b.join(",")+"];"),a.join("")},generateFunction:function(a,b){return"function("+b+"){"+this.varsPrefix(a)+this.body(a)+"};"},filterPrefix:function(){var a=[],b=this;return d(this.state.filters,function(c,d){a.push(c+"=$filter("+b.escape(d)+")")}),a.length?"var "+a.join(",")+";":""},varsPrefix:function(a){return this.state[a].vars.length?"var "+this.state[a].vars.join(",")+";":""},body:function(a){return this.state[a].body.join("")},recurse:function(a,b,c,e,f,g){var h,i,j,k,l=this;if(e=e||n,!g&&s(a.watchId))return b=b||this.nextId(),void this.if_("i",this.lazyAssign(b,this.computedMember("i",a.watchId)),this.lazyRecurse(a,b,c,e,f,!0));
switch(a.type){case of.Program:d(a.body,function(b,c){l.recurse(b.expression,void 0,void 0,function(a){i=a}),c!==a.body.length-1?l.current().body.push(i,";"):l.return_(i)});break;case of.Literal:k=this.escape(a.value),this.assign(b,k),e(k);break;case of.UnaryExpression:this.recurse(a.argument,void 0,void 0,function(a){i=a}),k=a.operator+"("+this.ifDefined(i,0)+")",this.assign(b,k),e(k);break;case of.BinaryExpression:this.recurse(a.left,void 0,void 0,function(a){h=a}),this.recurse(a.right,void 0,void 0,function(a){i=a}),k="+"===a.operator?this.plus(h,i):"-"===a.operator?this.ifDefined(h,0)+a.operator+this.ifDefined(i,0):"("+h+")"+a.operator+"("+i+")",this.assign(b,k),e(k);break;case of.LogicalExpression:b=b||this.nextId(),l.recurse(a.left,b),l.if_("&&"===a.operator?b:l.not(b),l.lazyRecurse(a.right,b)),e(b);break;case of.ConditionalExpression:b=b||this.nextId(),l.recurse(a.test,b),l.if_(b,l.lazyRecurse(a.alternate,b),l.lazyRecurse(a.consequent,b)),e(b);break;case of.Identifier:b=b||this.nextId(),c&&(c.context="inputs"===l.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",a.name)+"?l:s"),c.computed=!1,c.name=a.name),$b(a.name),l.if_("inputs"===l.stage||l.not(l.getHasOwnProperty("l",a.name)),function(){l.if_("inputs"===l.stage||"s",function(){f&&1!==f&&l.if_(l.not(l.nonComputedMember("s",a.name)),l.lazyAssign(l.nonComputedMember("s",a.name),"{}")),l.assign(b,l.nonComputedMember("s",a.name))})},b&&l.lazyAssign(b,l.nonComputedMember("l",a.name))),(l.state.expensiveChecks||oc(a.name))&&l.addEnsureSafeObject(b),e(b);break;case of.MemberExpression:h=c&&(c.context=this.nextId())||this.nextId(),b=b||this.nextId(),l.recurse(a.object,h,void 0,function(){l.if_(l.notNull(h),function(){f&&1!==f&&l.addEnsureSafeAssignContext(h),a.computed?(i=l.nextId(),l.recurse(a.property,i),l.getStringValue(i),l.addEnsureSafeMemberName(i),f&&1!==f&&l.if_(l.not(l.computedMember(h,i)),l.lazyAssign(l.computedMember(h,i),"{}")),k=l.ensureSafeObject(l.computedMember(h,i)),l.assign(b,k),c&&(c.computed=!0,c.name=i)):($b(a.property.name),f&&1!==f&&l.if_(l.not(l.nonComputedMember(h,a.property.name)),l.lazyAssign(l.nonComputedMember(h,a.property.name),"{}")),k=l.nonComputedMember(h,a.property.name),(l.state.expensiveChecks||oc(a.property.name))&&(k=l.ensureSafeObject(k)),l.assign(b,k),c&&(c.computed=!1,c.name=a.property.name))},function(){l.assign(b,"undefined")}),e(b)},!!f);break;case of.CallExpression:b=b||this.nextId(),a.filter?(i=l.filter(a.callee.name),j=[],d(a.arguments,function(a){var b=l.nextId();l.recurse(a,b),j.push(b)}),k=i+"("+j.join(",")+")",l.assign(b,k),e(b)):(i=l.nextId(),h={},j=[],l.recurse(a.callee,i,h,function(){l.if_(l.notNull(i),function(){l.addEnsureSafeFunction(i),d(a.arguments,function(a){l.recurse(a,l.nextId(),void 0,function(a){j.push(l.ensureSafeObject(a))})}),h.name?(l.state.expensiveChecks||l.addEnsureSafeObject(h.context),k=l.member(h.context,h.name,h.computed)+"("+j.join(",")+")"):k=i+"("+j.join(",")+")",k=l.ensureSafeObject(k),l.assign(b,k)},function(){l.assign(b,"undefined")}),e(b)}));break;case of.AssignmentExpression:if(i=this.nextId(),h={},!ic(a.left))throw gf("lval","Trying to assign a value to a non l-value");this.recurse(a.left,void 0,h,function(){l.if_(l.notNull(h.context),function(){l.recurse(a.right,i),l.addEnsureSafeObject(l.member(h.context,h.name,h.computed)),l.addEnsureSafeAssignContext(h.context),k=l.member(h.context,h.name,h.computed)+a.operator+i,l.assign(b,k),e(b||k)})},1);break;case of.ArrayExpression:j=[],d(a.elements,function(a){l.recurse(a,l.nextId(),void 0,function(a){j.push(a)})}),k="["+j.join(",")+"]",this.assign(b,k),e(k);break;case of.ObjectExpression:j=[],d(a.properties,function(a){l.recurse(a.value,l.nextId(),void 0,function(b){j.push(l.escape(a.key.type===of.Identifier?a.key.name:""+a.key.value)+":"+b)})}),k="{"+j.join(",")+"}",this.assign(b,k),e(k);break;case of.ThisExpression:this.assign(b,"s"),e("s");break;case of.LocalsExpression:this.assign(b,"l"),e("l");break;case of.NGValueParameter:this.assign(b,"v"),e("v")}},getHasOwnProperty:function(a,b){var c=a+"."+b,d=this.current().own;return d.hasOwnProperty(c)||(d[c]=this.nextId(!1,a+"&&("+this.escape(b)+" in "+a+")")),d[c]},assign:function(a,b){return a?(this.current().body.push(a,"=",b,";"),a):void 0},filter:function(a){return this.state.filters.hasOwnProperty(a)||(this.state.filters[a]=this.nextId(!0)),this.state.filters[a]},ifDefined:function(a,b){return"ifDefined("+a+","+this.escape(b)+")"},plus:function(a,b){return"plus("+a+","+b+")"},return_:function(a){this.current().body.push("return ",a,";")},if_:function(a,b,c){if(a===!0)b();else{var d=this.current().body;d.push("if(",a,"){"),b(),d.push("}"),c&&(d.push("else{"),c(),d.push("}"))}},not:function(a){return"!("+a+")"},notNull:function(a){return a+"!=null"},nonComputedMember:function(a,b){var c=/[$_a-zA-Z][$_a-zA-Z0-9]*/,d=/[^$_a-zA-Z0-9]/g;return c.test(b)?a+"."+b:a+'["'+b.replace(d,this.stringEscapeFn)+'"]'},computedMember:function(a,b){return a+"["+b+"]"},member:function(a,b,c){return c?this.computedMember(a,b):this.nonComputedMember(a,b)},addEnsureSafeObject:function(a){this.current().body.push(this.ensureSafeObject(a),";")},addEnsureSafeMemberName:function(a){this.current().body.push(this.ensureSafeMemberName(a),";")},addEnsureSafeFunction:function(a){this.current().body.push(this.ensureSafeFunction(a),";")},addEnsureSafeAssignContext:function(a){this.current().body.push(this.ensureSafeAssignContext(a),";")},ensureSafeObject:function(a){return"ensureSafeObject("+a+",text)"},ensureSafeMemberName:function(a){return"ensureSafeMemberName("+a+",text)"},ensureSafeFunction:function(a){return"ensureSafeFunction("+a+",text)"},getStringValue:function(a){this.assign(a,"getStringValue("+a+")")},ensureSafeAssignContext:function(a){return"ensureSafeAssignContext("+a+",text)"},lazyRecurse:function(a,b,c,d,e,f){var g=this;return function(){g.recurse(a,b,c,d,e,f)}},lazyAssign:function(a,b){var c=this;return function(){c.assign(a,b)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)},escape:function(a){if(v(a))return"'"+a.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(w(a))return a.toString();if(a===!0)return"true";if(a===!1)return"false";if(null===a)return"null";if("undefined"==typeof a)return"undefined";throw gf("esc","IMPOSSIBLE")},nextId:function(a,b){var c="v"+this.state.nextId++;return a||this.current().vars.push(c+(b?"="+b:"")),c},current:function(){return this.state[this.state.computing]}},nc.prototype={compile:function(a,b){var c=this,e=this.astBuilder.ast(a);this.expression=a,this.expensiveChecks=b,gc(e,c.$filter);var f,g;(f=jc(e))&&(g=this.recurse(f));var h,i=hc(e.body);i&&(h=[],d(i,function(a,b){var d=c.recurse(a);a.input=d,h.push(d),a.watchId=b}));var j=[];d(e.body,function(a){j.push(c.recurse(a.expression))});var k=0===e.body.length?n:1===e.body.length?j[0]:function(a,b){var c;return d(j,function(d){c=d(a,b)}),c};return g&&(k.assign=function(a,b,c){return g(a,c,b)}),h&&(k.inputs=h),k.literal=kc(e),k.constant=lc(e),k},recurse:function(a,b,c){var e,f,g,h=this;if(a.input)return this.inputs(a.input,a.watchId);switch(a.type){case of.Literal:return this.value(a.value,b);case of.UnaryExpression:return f=this.recurse(a.argument),this["unary"+a.operator](f,b);case of.BinaryExpression:return e=this.recurse(a.left),f=this.recurse(a.right),this["binary"+a.operator](e,f,b);case of.LogicalExpression:return e=this.recurse(a.left),f=this.recurse(a.right),this["binary"+a.operator](e,f,b);case of.ConditionalExpression:return this["ternary?:"](this.recurse(a.test),this.recurse(a.alternate),this.recurse(a.consequent),b);case of.Identifier:return $b(a.name,h.expression),h.identifier(a.name,h.expensiveChecks||oc(a.name),b,c,h.expression);case of.MemberExpression:return e=this.recurse(a.object,!1,!!c),a.computed||($b(a.property.name,h.expression),f=a.property.name),a.computed&&(f=this.recurse(a.property)),a.computed?this.computedMember(e,f,b,c,h.expression):this.nonComputedMember(e,f,h.expensiveChecks,b,c,h.expression);case of.CallExpression:return g=[],d(a.arguments,function(a){g.push(h.recurse(a))}),a.filter&&(f=this.$filter(a.callee.name)),a.filter||(f=this.recurse(a.callee,!0)),a.filter?function(a,c,d,e){for(var h=[],i=0;i<g.length;++i)h.push(g[i](a,c,d,e));var j=f.apply(void 0,h,e);return b?{context:void 0,name:void 0,value:j}:j}:function(a,c,d,e){var i,j=f(a,c,d,e);if(null!=j.value){ac(j.context,h.expression),bc(j.value,h.expression);for(var k=[],l=0;l<g.length;++l)k.push(ac(g[l](a,c,d,e),h.expression));i=ac(j.value.apply(j.context,k),h.expression)}return b?{value:i}:i};case of.AssignmentExpression:return e=this.recurse(a.left,!0,1),f=this.recurse(a.right),function(a,c,d,g){var i=e(a,c,d,g),j=f(a,c,d,g);return ac(i.value,h.expression),cc(i.context),i.context[i.name]=j,b?{value:j}:j};case of.ArrayExpression:return g=[],d(a.elements,function(a){g.push(h.recurse(a))}),function(a,c,d,e){for(var f=[],h=0;h<g.length;++h)f.push(g[h](a,c,d,e));return b?{value:f}:f};case of.ObjectExpression:return g=[],d(a.properties,function(a){g.push({key:a.key.type===of.Identifier?a.key.name:""+a.key.value,value:h.recurse(a.value)})}),function(a,c,d,e){for(var f={},h=0;h<g.length;++h)f[g[h].key]=g[h].value(a,c,d,e);return b?{value:f}:f};case of.ThisExpression:return function(a){return b?{value:a}:a};case of.LocalsExpression:return function(a,c){return b?{value:c}:c};case of.NGValueParameter:return function(a,c,d){return b?{value:d}:d}}},"unary+":function(a,b){return function(c,d,e,f){var g=a(c,d,e,f);return g=s(g)?+g:0,b?{value:g}:g}},"unary-":function(a,b){return function(c,d,e,f){var g=a(c,d,e,f);return g=s(g)?-g:0,b?{value:g}:g}},"unary!":function(a,b){return function(c,d,e,f){var g=!a(c,d,e,f);return b?{value:g}:g}},"binary+":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g),i=b(d,e,f,g),j=ec(h,i);return c?{value:j}:j}},"binary-":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g),i=b(d,e,f,g),j=(s(h)?h:0)-(s(i)?i:0);return c?{value:j}:j}},"binary*":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)*b(d,e,f,g);return c?{value:h}:h}},"binary/":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)/b(d,e,f,g);return c?{value:h}:h}},"binary%":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)%b(d,e,f,g);return c?{value:h}:h}},"binary===":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)===b(d,e,f,g);return c?{value:h}:h}},"binary!==":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)!==b(d,e,f,g);return c?{value:h}:h}},"binary==":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)==b(d,e,f,g);return c?{value:h}:h}},"binary!=":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)!=b(d,e,f,g);return c?{value:h}:h}},"binary<":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)<b(d,e,f,g);return c?{value:h}:h}},"binary>":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)>b(d,e,f,g);return c?{value:h}:h}},"binary<=":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)<=b(d,e,f,g);return c?{value:h}:h}},"binary>=":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)>=b(d,e,f,g);return c?{value:h}:h}},"binary&&":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)&&b(d,e,f,g);return c?{value:h}:h}},"binary||":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)||b(d,e,f,g);return c?{value:h}:h}},"ternary?:":function(a,b,c,d){return function(e,f,g,h){var i=a(e,f,g,h)?b(e,f,g,h):c(e,f,g,h);return d?{value:i}:i}},value:function(a,b){return function(){return b?{context:void 0,name:void 0,value:a}:a}},identifier:function(a,b,c,d,e){return function(f,g,h,i){var j=g&&a in g?g:f;d&&1!==d&&j&&!j[a]&&(j[a]={});var k=j?j[a]:void 0;return b&&ac(k,e),c?{context:j,name:a,value:k}:k}},computedMember:function(a,b,c,d,e){return function(f,g,h,i){var j,k,l=a(f,g,h,i);return null!=l&&(j=b(f,g,h,i),j=_b(j),$b(j,e),d&&1!==d&&(cc(l),l&&!l[j]&&(l[j]={})),k=l[j],ac(k,e)),c?{context:l,name:j,value:k}:k}},nonComputedMember:function(a,b,c,d,e,f){return function(g,h,i,j){var k=a(g,h,i,j);e&&1!==e&&(cc(k),k&&!k[b]&&(k[b]={}));var l=null!=k?k[b]:void 0;return(c||oc(b))&&ac(l,f),d?{context:k,name:b,value:l}:l}},inputs:function(a,b){return function(c,d,e,f){return f?f[b]:a(c,d,e)}}};var pf=function(a,b,c){this.lexer=a,this.$filter=b,this.options=c,this.ast=new of(a,c),this.astCompiler=c.csp?new nc(this.ast,b):new mc(this.ast,b)};pf.prototype={constructor:pf,parse:function(a){return this.astCompiler.compile(a,this.options.expensiveChecks)}};var qf=Object.prototype.valueOf,rf=b("$sce"),sf={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},tf=b("$compile"),uf=a.document.createElement("a"),vf=Fc(a.location.href);Ic.$inject=["$document"],Kc.$inject=["$provide"];var wf=22,xf=".",yf="0";Pc.$inject=["$locale"],Qc.$inject=["$locale"];var zf={yyyy:Vc("FullYear",4,0,!1,!0),yy:Vc("FullYear",2,0,!0,!0),y:Vc("FullYear",1,0,!1,!0),MMMM:Wc("Month"),MMM:Wc("Month",!0),MM:Vc("Month",2,1),M:Vc("Month",1,1),LLLL:Wc("Month",!1,!0),dd:Vc("Date",2),d:Vc("Date",1),HH:Vc("Hours",2),H:Vc("Hours",1),hh:Vc("Hours",2,-12),h:Vc("Hours",1,-12),mm:Vc("Minutes",2),m:Vc("Minutes",1),ss:Vc("Seconds",2),s:Vc("Seconds",1),sss:Vc("Milliseconds",3),EEEE:Wc("Day"),EEE:Wc("Day",!0),a:_c,Z:Xc,ww:$c(2),w:$c(1),G:ad,GG:ad,GGG:ad,GGGG:bd},Af=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,Bf=/^\-?\d+$/;cd.$inject=["$locale"];var Cf=p(Dd),Df=p(Ed);fd.$inject=["$parse"];var Ef=p({restrict:"E",compile:function(a,b){return b.href||b.xlinkHref?void 0:function(a,b){if("a"===b[0].nodeName.toLowerCase()){var c="[object SVGAnimatedString]"===Od.call(b.prop("href"))?"xlink:href":"href";b.on("click",function(a){b.attr(c)||a.preventDefault()})}}}}),Ff={};d(xe,function(a,b){function c(a,c,e){a.$watch(e[d],function(a){e.$set(b,!!a)})}if("multiple"!=a){var d=pb("ng-"+b),e=c;"checked"===a&&(e=function(a,b,e){e.ngModel!==e[d]&&c(a,b,e)}),Ff[d]=function(){return{restrict:"A",priority:100,link:e}}}}),d(ze,function(a,b){Ff[b]=function(){return{priority:100,link:function(a,c,d){if("ngPattern"===b&&"/"==d.ngPattern.charAt(0)){var e=d.ngPattern.match(Ad);if(e)return void d.$set("ngPattern",new RegExp(e[1],e[2]))}a.$watch(d[b],function(a){d.$set(b,a)})}}}}),d(["src","srcset","href"],function(a){var b=pb("ng-"+a);Ff[b]=function(){return{priority:99,link:function(c,d,e){var f=a,g=a;"href"===a&&"[object SVGAnimatedString]"===Od.call(d.prop("href"))&&(g="xlinkHref",e.$attr[g]="xlink:href",f=null),e.$observe(b,function(b){return b?(e.$set(g,b),void(Hd&&f&&d.prop(f,e[g]))):void("href"===a&&e.$set(g,null))})}}}});var Gf={$addControl:n,$$renameControl:hd,$removeControl:n,$setValidity:n,$setDirty:n,$setPristine:n,$setSubmitted:n},Hf="ng-submitted";id.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var If=function(a){return["$timeout","$parse",function(b,c){function d(a){return""===a?c('this[""]').assign:c(a).assign||n}var e={name:"form",restrict:a?"EAC":"E",require:["form","^^?form"],controller:id,compile:function(c,e){c.addClass(qg).addClass(og);var f=e.name?"name":a&&e.ngForm?"ngForm":!1;return{pre:function(a,c,e,g){var h=g[0];if(!("action"in e)){var i=function(b){a.$apply(function(){h.$commitViewValue(),h.$setSubmitted()}),b.preventDefault()};ke(c[0],"submit",i),c.on("$destroy",function(){b(function(){le(c[0],"submit",i)},0,!1)})}var k=g[1]||h.$$parentForm;k.$addControl(h);var l=f?d(h.$name):n;f&&(l(a,h),e.$observe(f,function(b){h.$name!==b&&(l(a,void 0),h.$$parentForm.$$renameControl(h,b),(l=d(h.$name))(a,h))})),c.on("$destroy",function(){h.$$parentForm.$removeControl(h),l(a,void 0),j(h,Gf)})}}}};return e}]},Jf=If(),Kf=If(!0),Lf=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,Mf=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:\/?#]+|\[[a-f\d:]+\])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,Nf=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,Of=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,Pf=/^(\d{4,})-(\d{2})-(\d{2})$/,Qf=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Rf=/^(\d{4,})-W(\d\d)$/,Sf=/^(\d{4,})-(\d\d)$/,Tf=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Uf="keydown wheel mousedown",Vf=pa();d("date,datetime-local,month,time,week".split(","),function(a){Vf[a]=!0});var Wf={text:kd,date:od("date",Pf,nd(Pf,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":od("datetimelocal",Qf,nd(Qf,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:od("time",Tf,nd(Tf,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:od("week",Rf,md,"yyyy-Www"),month:od("month",Sf,nd(Sf,["yyyy","MM"]),"yyyy-MM"),number:qd,url:rd,email:sd,radio:td,checkbox:vd,hidden:n,button:n,submit:n,reset:n,file:n},Xf=["$browser","$sniffer","$filter","$parse",function(a,b,c,d){return{restrict:"E",require:["?ngModel"],link:{pre:function(e,f,g,h){h[0]&&(Wf[Dd(g.type)]||Wf.text)(e,f,g,h[0],b,a,c,d)}}}}],Yf=/^(true|false|\d+)$/,Zf=function(){return{restrict:"A",priority:100,compile:function(a,b){return Yf.test(b.ngValue)?function(a,b,c){c.$set("value",a.$eval(c.ngValue))}:function(a,b,c){a.$watch(c.ngValue,function(a){c.$set("value",a)})}}}},$f=["$compile",function(a){return{restrict:"AC",compile:function(b){return a.$$addBindingClass(b),function(b,c,d){a.$$addBindingInfo(c,d.ngBind),c=c[0],b.$watch(d.ngBind,function(a){c.textContent=r(a)?"":a})}}}}],_f=["$interpolate","$compile",function(a,b){return{compile:function(c){return b.$$addBindingClass(c),function(c,d,e){var f=a(d.attr(e.$attr.ngBindTemplate));b.$$addBindingInfo(d,f.expressions),d=d[0],e.$observe("ngBindTemplate",function(a){d.textContent=r(a)?"":a})}}}}],ag=["$sce","$parse","$compile",function(a,b,c){return{restrict:"A",compile:function(d,e){var f=b(e.ngBindHtml),g=b(e.ngBindHtml,function(a){return(a||"").toString()});return c.$$addBindingClass(d),function(b,d,e){c.$$addBindingInfo(d,e.ngBindHtml),b.$watch(g,function(){d.html(a.getTrustedHtml(f(b))||"")})}}}}],bg=p({restrict:"A",require:"ngModel",link:function(a,b,c,d){d.$viewChangeListeners.push(function(){a.$eval(c.ngChange)})}}),cg=wd("",!0),dg=wd("Odd",0),eg=wd("Even",1),fg=gd({compile:function(a,b){b.$set("ngCloak",void 0),a.removeClass("ng-cloak")}}),gg=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],hg={},ig={blur:!0,focus:!0};d("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(a){var b=pb("ng-"+a);hg[b]=["$parse","$rootScope",function(c,d){return{restrict:"A",compile:function(e,f){var g=c(f[b],null,!0);return function(b,c){c.on(a,function(c){var e=function(){g(b,{$event:c})};ig[a]&&d.$$phase?b.$evalAsync(e):b.$apply(e)})}}}}]});var jg=["$animate","$compile",function(a,b){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(c,d,e,f,g){var h,i,j;c.$watch(e.ngIf,function(c){c?i||g(function(c,f){i=f,c[c.length++]=b.$$createComment("end ngIf",e.ngIf),h={clone:c},a.enter(c,d.parent(),d)}):(j&&(j.remove(),j=null),i&&(i.$destroy(),i=null),h&&(j=oa(h.clone),a.leave(j).then(function(){j=null}),h=null))})}}}],kg=["$templateRequest","$anchorScroll","$animate",function(a,b,c){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:Rd.noop,compile:function(d,e){var f=e.ngInclude||e.src,g=e.onload||"",h=e.autoscroll;return function(d,e,i,j,k){var l,m,n,o=0,p=function(){m&&(m.remove(),m=null),l&&(l.$destroy(),l=null),n&&(c.leave(n).then(function(){m=null}),m=n,n=null)};d.$watch(f,function(f){var i=function(){!s(h)||h&&!d.$eval(h)||b()},m=++o;f?(a(f,!0).then(function(a){if(!d.$$destroyed&&m===o){var b=d.$new();j.template=a;var h=k(b,function(a){p(),c.enter(a,null,e).then(i)});l=b,n=h,l.$emit("$includeContentLoaded",f),d.$eval(g)}},function(){d.$$destroyed||m===o&&(p(),d.$emit("$includeContentError",f))}),d.$emit("$includeContentRequested",f)):(p(),j.template=null)})}}}}],lg=["$compile",function(b){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(c,d,e,f){return Od.call(d[0]).match(/SVG/)?(d.empty(),void b(Aa(f.template,a.document).childNodes)(c,function(a){d.append(a)},{futureParentElement:d})):(d.html(f.template),void b(d.contents())(c))}}}],mg=gd({priority:450,compile:function(){return{pre:function(a,b,c){a.$eval(c.ngInit)}}}}),ng=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(a,b,c,e){var f=b.attr(c.$attr.ngList)||", ",g="false"!==c.ngTrim,h=g?Vd(f):f,i=function(a){if(!r(a)){var b=[];return a&&d(a.split(h),function(a){a&&b.push(g?Vd(a):a)}),b}};e.$parsers.push(i),e.$formatters.push(function(a){return Td(a)?a.join(f):void 0}),e.$isEmpty=function(a){return!a||!a.length}}}},og="ng-valid",pg="ng-invalid",qg="ng-pristine",rg="ng-dirty",sg="ng-untouched",tg="ng-touched",ug="ng-pending",vg="ng-empty",wg="ng-not-empty",xg=b("ngModel"),yg=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(a,b,c,e,f,g,h,i,j,k){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=k(c.name||"",!1)(a),this.$$parentForm=Gf;var l,m=f(c.ngModel),o=m.assign,p=m,q=o,t=null,u=this;this.$$setOptions=function(a){if(u.$options=a,a&&a.getterSetter){var b=f(c.ngModel+"()"),d=f(c.ngModel+"($$$p)");p=function(a){var c=m(a);return y(c)&&(c=b(a)),c},q=function(a,b){y(m(a))?d(a,{$$$p:b}):o(a,b)}}else if(!m.assign)throw xg("nonassign","Expression '{0}' is non-assignable. Element: {1}",c.ngModel,Z(e))},this.$render=n,this.$isEmpty=function(a){return r(a)||""===a||null===a||a!==a},this.$$updateEmptyClasses=function(a){u.$isEmpty(a)?(g.removeClass(e,wg),g.addClass(e,vg)):(g.removeClass(e,vg),g.addClass(e,wg))};var v=0;xd({ctrl:this,$element:e,set:function(a,b){a[b]=!0},unset:function(a,b){delete a[b]},$animate:g}),this.$setPristine=function(){u.$dirty=!1,u.$pristine=!0,g.removeClass(e,rg),g.addClass(e,qg)},this.$setDirty=function(){u.$dirty=!0,u.$pristine=!1,g.removeClass(e,qg),g.addClass(e,rg),u.$$parentForm.$setDirty()},this.$setUntouched=function(){u.$touched=!1,u.$untouched=!0,g.setClass(e,sg,tg)},this.$setTouched=function(){u.$touched=!0,u.$untouched=!1,g.setClass(e,tg,sg)},this.$rollbackViewValue=function(){h.cancel(t),u.$viewValue=u.$$lastCommittedViewValue,u.$render()},this.$validate=function(){if(!w(u.$modelValue)||!isNaN(u.$modelValue)){var a=u.$$lastCommittedViewValue,b=u.$$rawModelValue,c=u.$valid,d=u.$modelValue,e=u.$options&&u.$options.allowInvalid;u.$$runValidators(b,a,function(a){e||c===a||(u.$modelValue=a?b:void 0,u.$modelValue!==d&&u.$$writeModelToScope())})}},this.$$runValidators=function(a,b,c){function e(){var a=u.$$parserName||"parse";return r(l)?(h(a,null),!0):(l||(d(u.$validators,function(a,b){h(b,null)}),d(u.$asyncValidators,function(a,b){h(b,null)})),h(a,l),l)}function f(){var c=!0;return d(u.$validators,function(d,e){var f=d(a,b);c=c&&f,h(e,f)}),c?!0:(d(u.$asyncValidators,function(a,b){h(b,null)}),!1)}function g(){var c=[],e=!0;d(u.$asyncValidators,function(d,f){var g=d(a,b);if(!G(g))throw xg("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",g);h(f,void 0),c.push(g.then(function(){h(f,!0)},function(){e=!1,h(f,!1)}))}),c.length?j.all(c).then(function(){i(e)},n):i(!0)}function h(a,b){k===v&&u.$setValidity(a,b)}function i(a){k===v&&c(a)}v++;var k=v;return e()&&f()?void g():void i(!1)},this.$commitViewValue=function(){var a=u.$viewValue;h.cancel(t),(u.$$lastCommittedViewValue!==a||""===a&&u.$$hasNativeValidators)&&(u.$$updateEmptyClasses(a),u.$$lastCommittedViewValue=a,u.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){function b(){u.$modelValue!==f&&u.$$writeModelToScope()}var c=u.$$lastCommittedViewValue,d=c;if(l=r(d)?void 0:!0)for(var e=0;e<u.$parsers.length;e++)if(d=u.$parsers[e](d),r(d)){l=!1;break}w(u.$modelValue)&&isNaN(u.$modelValue)&&(u.$modelValue=p(a));var f=u.$modelValue,g=u.$options&&u.$options.allowInvalid;u.$$rawModelValue=d,g&&(u.$modelValue=d,b()),u.$$runValidators(d,u.$$lastCommittedViewValue,function(a){g||(u.$modelValue=a?d:void 0,b())})},this.$$writeModelToScope=function(){q(a,u.$modelValue),d(u.$viewChangeListeners,function(a){try{a()}catch(c){b(c)}})},this.$setViewValue=function(a,b){u.$viewValue=a,u.$options&&!u.$options.updateOnDefault||u.$$debounceViewValueCommit(b)},this.$$debounceViewValueCommit=function(b){var c,d=0,e=u.$options;e&&s(e.debounce)&&(c=e.debounce,w(c)?d=c:w(c[b])?d=c[b]:w(c["default"])&&(d=c["default"])),h.cancel(t),d?t=h(function(){u.$commitViewValue()},d):i.$$phase?u.$commitViewValue():a.$apply(function(){u.$commitViewValue()})},a.$watch(function(){var b=p(a);if(b!==u.$modelValue&&(u.$modelValue===u.$modelValue||b===b)){u.$modelValue=u.$$rawModelValue=b,l=void 0;for(var c=u.$formatters,d=c.length,e=b;d--;)e=c[d](e);u.$viewValue!==e&&(u.$$updateEmptyClasses(e),u.$viewValue=u.$$lastCommittedViewValue=e,u.$render(),u.$$runValidators(b,e,n))}return b})}],zg=["$rootScope",function(a){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:yg,priority:1,compile:function(b){return b.addClass(qg).addClass(sg).addClass(og),{pre:function(a,b,c,d){var e=d[0],f=d[1]||e.$$parentForm;e.$$setOptions(d[2]&&d[2].$options),f.$addControl(e),c.$observe("name",function(a){e.$name!==a&&e.$$parentForm.$$renameControl(e,a)}),a.$on("$destroy",function(){e.$$parentForm.$removeControl(e)})},post:function(b,c,d,e){var f=e[0];f.$options&&f.$options.updateOn&&c.on(f.$options.updateOn,function(a){f.$$debounceViewValueCommit(a&&a.type)}),c.on("blur",function(){f.$touched||(a.$$phase?b.$evalAsync(f.$setTouched):b.$apply(f.$setTouched))})}}}}}],Ag=/(\s+|^)default(\s+|$)/,Bg=function(){return{restrict:"A",controller:["$scope","$attrs",function(a,b){var c=this;this.$options=N(a.$eval(b.ngModelOptions)),s(this.$options.updateOn)?(this.$options.updateOnDefault=!1,this.$options.updateOn=Vd(this.$options.updateOn.replace(Ag,function(){return c.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}},Cg=gd({terminal:!0,priority:1e3}),Dg=b("ngOptions"),Eg=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,Fg=["$compile","$document","$parse",function(b,e,f){function g(a,b,d){function e(a,b,c,d,e){this.selectValue=a,this.viewValue=b,this.label=c,this.group=d,this.disabled=e}function g(a){var b;if(!j&&c(a))b=a;else{b=[];for(var d in a)a.hasOwnProperty(d)&&"$"!==d.charAt(0)&&b.push(d)}return b}var h=a.match(Eg);if(!h)throw Dg("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",a,Z(b));var i=h[5]||h[7],j=h[6],k=/ as /.test(h[0])&&h[1],l=h[9],m=f(h[2]?h[1]:i),n=k&&f(k),o=n||m,p=l&&f(l),q=l?function(a,b){return p(d,b)}:function(a){return Za(a)},r=function(a,b){return q(a,x(a,b))},s=f(h[2]||h[1]),t=f(h[3]||""),u=f(h[4]||""),v=f(h[8]),w={},x=j?function(a,b){return w[j]=b,w[i]=a,w}:function(a){return w[i]=a,w};return{trackBy:l,getTrackByValue:r,getWatchables:f(v,function(a){var b=[];a=a||[];for(var c=g(a),e=c.length,f=0;e>f;f++){var i=a===c?f:c[f],j=a[i],k=x(j,i),l=q(j,k);if(b.push(l),h[2]||h[1]){var m=s(d,k);b.push(m)}if(h[4]){var n=u(d,k);b.push(n)}}return b}),getOptions:function(){for(var a=[],b={},c=v(d)||[],f=g(c),h=f.length,i=0;h>i;i++){var j=c===f?i:f[i],k=c[j],m=x(k,j),n=o(d,m),p=q(n,m),w=s(d,m),y=t(d,m),z=u(d,m),A=new e(p,n,w,y,z);a.push(A),b[p]=A}return{items:a,selectValueMap:b,getOptionFromViewValue:function(a){return b[r(a)]},getViewValueFromOption:function(a){return l?Rd.copy(a.viewValue):a.viewValue}}}}}function h(a,c,f,h){function k(a,b){var c=i.cloneNode(!1);b.appendChild(c),l(a,c)}function l(a,b){a.element=b,b.disabled=a.disabled,a.label!==b.label&&(b.label=a.label,b.textContent=a.label),a.value!==b.value&&(b.value=a.selectValue)}function m(){var a=x&&o.readValue();if(x)for(var b=x.items.length-1;b>=0;b--){var d=x.items[b];Ra(d.group?d.element.parentNode:d.element)}x=y.getOptions();var e={};if(v&&c.prepend(n),x.items.forEach(function(a){var b;s(a.group)?(b=e[a.group],b||(b=j.cloneNode(!1),z.appendChild(b),b.label=a.group,e[a.group]=b),k(a,b)):k(a,z)}),c[0].appendChild(z),p.$render(),!p.$isEmpty(a)){var f=o.readValue(),g=y.trackBy||q;(g?P(a,f):a===f)||(p.$setViewValue(f),p.$render())}}for(var n,o=h[0],p=h[1],q=f.multiple,r=0,t=c.children(),u=t.length;u>r;r++)if(""===t[r].value){n=t.eq(r);break}var v=!!n,w=Id(i.cloneNode(!1));w.val("?");var x,y=g(f.ngOptions,c,a),z=e[0].createDocumentFragment(),A=function(){v||c.prepend(n),c.val(""),n.prop("selected",!0),n.attr("selected",!0)},B=function(){v||n.remove()},C=function(){c.prepend(w),c.val("?"),w.prop("selected",!0),w.attr("selected",!0)},D=function(){w.remove()};q?(p.$isEmpty=function(a){return!a||0===a.length},o.writeValue=function(a){x.items.forEach(function(a){a.element.selected=!1}),a&&a.forEach(function(a){var b=x.getOptionFromViewValue(a);b&&(b.element.selected=!0)})},o.readValue=function(){var a=c.val()||[],b=[];return d(a,function(a){var c=x.selectValueMap[a];c&&!c.disabled&&b.push(x.getViewValueFromOption(c))}),b},y.trackBy&&a.$watchCollection(function(){return Td(p.$viewValue)?p.$viewValue.map(function(a){return y.getTrackByValue(a)}):void 0},function(){p.$render()})):(o.writeValue=function(a){var b=x.getOptionFromViewValue(a);b?(c[0].value!==b.selectValue&&(D(),B(),c[0].value=b.selectValue,b.element.selected=!0),b.element.setAttribute("selected","selected")):null===a||v?(D(),A()):(B(),C())},o.readValue=function(){var a=x.selectValueMap[c.val()];return a&&!a.disabled?(B(),D(),x.getViewValueFromOption(a)):null},y.trackBy&&a.$watch(function(){return y.getTrackByValue(p.$viewValue)},function(){p.$render()})),v?(n.remove(),b(n)(a),n.removeClass("ng-scope")):n=Id(i.cloneNode(!1)),c.empty(),m(),a.$watchCollection(y.getWatchables,m)}var i=a.document.createElement("option"),j=a.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(a,b,c,d){d[0].registerOption=n},post:h}}}],Gg=["$locale","$interpolate","$log",function(a,b,c){var e=/{}/g,f=/^when(Minus)?(.+)$/;return{link:function(g,h,i){function j(a){h.text(a||"")}var k,l=i.count,m=i.$attr.when&&h.attr(i.$attr.when),o=i.offset||0,p=g.$eval(m)||{},q={},s=b.startSymbol(),t=b.endSymbol(),u=s+l+"-"+o+t,v=Rd.noop;d(i,function(a,b){var c=f.exec(b);if(c){var d=(c[1]?"-":"")+Dd(c[2]);p[d]=h.attr(i.$attr[b])}}),d(p,function(a,c){q[c]=b(a.replace(e,u))}),g.$watch(l,function(b){var d=parseFloat(b),e=isNaN(d);if(e||d in p||(d=a.pluralCat(d-o)),d!==k&&!(e&&w(k)&&isNaN(k))){v();var f=q[d];r(f)?(null!=b&&c.debug("ngPluralize: no rule defined for '"+d+"' in "+m),v=n,j()):v=g.$watch(f,j),k=d}})}}}],Hg=["$parse","$animate","$compile",function(a,e,f){var g="$$NG_REMOVED",h=b("ngRepeat"),i=function(a,b,c,d,e,f,g){a[c]=d,e&&(a[e]=f),a.$index=b,a.$first=0===b,a.$last=b===g-1,a.$middle=!(a.$first||a.$last),a.$odd=!(a.$even=0===(1&b))},j=function(a){return a.clone[0]},k=function(a){return a.clone[a.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(b,l){var m=l.ngRepeat,n=f.$$createComment("end ngRepeat",m),o=m.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!o)throw h("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",m);var p=o[1],q=o[2],r=o[3],s=o[4];if(o=p.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/),!o)throw h("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",p);
var t=o[3]||o[1],u=o[2];if(r&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(r)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(r)))throw h("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",r);var v,w,x,y,z={$id:Za};return s?v=a(s):(x=function(a,b){return Za(b)},y=function(a){return a}),function(a,b,f,l,o){v&&(w=function(b,c,d){return u&&(z[u]=b),z[t]=c,z.$index=d,v(a,z)});var p=pa();a.$watchCollection(q,function(f){var l,q,s,v,z,A,B,C,D,E,F,G,H=b[0],I=pa();if(r&&(a[r]=f),c(f))D=f,C=w||x;else{C=w||y,D=[];for(var J in f)Cd.call(f,J)&&"$"!==J.charAt(0)&&D.push(J)}for(v=D.length,F=new Array(v),l=0;v>l;l++)if(z=f===D?l:D[l],A=f[z],B=C(z,A,l),p[B])E=p[B],delete p[B],I[B]=E,F[l]=E;else{if(I[B])throw d(F,function(a){a&&a.scope&&(p[a.id]=a)}),h("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",m,B,A);F[l]={id:B,scope:void 0,clone:void 0},I[B]=!0}for(var K in p){if(E=p[K],G=oa(E.clone),e.leave(G),G[0].parentNode)for(l=0,q=G.length;q>l;l++)G[l][g]=!0;E.scope.$destroy()}for(l=0;v>l;l++)if(z=f===D?l:D[l],A=f[z],E=F[l],E.scope){s=H;do s=s.nextSibling;while(s&&s[g]);j(E)!=s&&e.move(oa(E.clone),null,H),H=k(E),i(E.scope,l,t,A,u,z,v)}else o(function(a,b){E.scope=b;var c=n.cloneNode(!1);a[a.length++]=c,e.enter(a,null,H),H=c,E.clone=a,I[E.id]=E,i(E.scope,l,t,A,u,z,v)});p=I})}}}}],Ig="ng-hide",Jg="ng-hide-animate",Kg=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,c,d){b.$watch(d.ngShow,function(b){a[b?"removeClass":"addClass"](c,Ig,{tempClasses:Jg})})}}}],Lg=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,c,d){b.$watch(d.ngHide,function(b){a[b?"addClass":"removeClass"](c,Ig,{tempClasses:Jg})})}}}],Mg=gd(function(a,b,c){a.$watch(c.ngStyle,function(a,c){c&&a!==c&&d(c,function(a,c){b.css(c,"")}),a&&b.css(a)},!0)}),Ng=["$animate","$compile",function(a,b){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(c,e,f,g){var h=f.ngSwitch||f.on,i=[],j=[],k=[],l=[],m=function(a,b){return function(){a.splice(b,1)}};c.$watch(h,function(c){var e,f;for(e=0,f=k.length;f>e;++e)a.cancel(k[e]);for(k.length=0,e=0,f=l.length;f>e;++e){var h=oa(j[e].clone);l[e].$destroy();var n=k[e]=a.leave(h);n.then(m(k,e))}j.length=0,l.length=0,(i=g.cases["!"+c]||g.cases["?"])&&d(i,function(c){c.transclude(function(d,e){l.push(e);var f=c.element;d[d.length++]=b.$$createComment("end ngSwitchWhen");var g={clone:d};j.push(g),a.enter(d,f.parent(),f)})})})}}}],Og=gd({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,b,c,d,e){d.cases["!"+c.ngSwitchWhen]=d.cases["!"+c.ngSwitchWhen]||[],d.cases["!"+c.ngSwitchWhen].push({transclude:e,element:b})}}),Pg=gd({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,b,c,d,e){d.cases["?"]=d.cases["?"]||[],d.cases["?"].push({transclude:e,element:b})}}),Qg=b("ngTransclude"),Rg=gd({restrict:"EAC",link:function(a,b,c,d,e){function f(a){a.length&&(b.empty(),b.append(a))}if(c.ngTransclude===c.$attr.ngTransclude&&(c.ngTransclude=""),!e)throw Qg("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",Z(b));var g=c.ngTransclude||c.ngTranscludeSlot;e(f,null,g)}}),Sg=["$templateCache",function(a){return{restrict:"E",terminal:!0,compile:function(b,c){if("text/ng-template"==c.type){var d=c.id,e=b[0].text;a.put(d,e)}}}}],Tg={$setViewValue:n,$render:n},Ug=["$element","$scope",function(b,c){var d=this,e=new $a;d.ngModelCtrl=Tg,d.unknownOption=Id(a.document.createElement("option")),d.renderUnknownOption=function(a){var c="? "+Za(a)+" ?";d.unknownOption.val(c),b.prepend(d.unknownOption),b.val(c)},c.$on("$destroy",function(){d.renderUnknownOption=n}),d.removeUnknownOption=function(){d.unknownOption.parent()&&d.unknownOption.remove()},d.readValue=function(){return d.removeUnknownOption(),b.val()},d.writeValue=function(a){d.hasOption(a)?(d.removeUnknownOption(),b.val(a),""===a&&d.emptyOption.prop("selected",!0)):null==a&&d.emptyOption?(d.removeUnknownOption(),b.val("")):d.renderUnknownOption(a)},d.addOption=function(a,b){if(b[0].nodeType!==ee){ma(a,'"option value"'),""===a&&(d.emptyOption=b);var c=e.get(a)||0;e.put(a,c+1),d.ngModelCtrl.$render(),zd(b)}},d.removeOption=function(a){var b=e.get(a);b&&(1===b?(e.remove(a),""===a&&(d.emptyOption=void 0)):e.put(a,b-1))},d.hasOption=function(a){return!!e.get(a)},d.registerOption=function(a,b,c,e,f){if(e){var g;c.$observe("value",function(a){s(g)&&d.removeOption(g),g=a,d.addOption(a,b)})}else f?a.$watch(f,function(a,e){c.$set("value",a),e!==a&&d.removeOption(e),d.addOption(a,b)}):d.addOption(c.value,b);b.on("$destroy",function(){d.removeOption(c.value),d.ngModelCtrl.$render()})}}],Vg=function(){function a(a,b,c,e){var f=e[1];if(f){var g=e[0];if(g.ngModelCtrl=f,b.on("change",function(){a.$apply(function(){f.$setViewValue(g.readValue())})}),c.multiple){g.readValue=function(){var a=[];return d(b.find("option"),function(b){b.selected&&a.push(b.value)}),a},g.writeValue=function(a){var c=new $a(a);d(b.find("option"),function(a){a.selected=s(c.get(a.value))})};var h,i=NaN;a.$watch(function(){i!==f.$viewValue||P(h,f.$viewValue)||(h=O(f.$viewValue),f.$render()),i=f.$viewValue}),f.$isEmpty=function(a){return!a||0===a.length}}}}function b(a,b,c,d){var e=d[1];if(e){var f=d[0];e.$render=function(){f.writeValue(e.$viewValue)}}}return{restrict:"E",require:["select","?ngModel"],controller:Ug,priority:1,link:{pre:a,post:b}}},Wg=["$interpolate",function(a){return{restrict:"E",priority:100,compile:function(b,c){if(s(c.value))var d=a(c.value,!0);else{var e=a(b.text(),!0);e||c.$set("value",b.text())}return function(a,b,c){var f="$selectController",g=b.parent(),h=g.data(f)||g.parent().data(f);h&&h.registerOption(a,b,c,d,e)}}}}],Xg=p({restrict:"E",terminal:!1}),Yg=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){d&&(c.required=!0,d.$validators.required=function(a,b){return!c.required||!d.$isEmpty(b)},c.$observe("required",function(){d.$validate()}))}}},Zg=function(){return{restrict:"A",require:"?ngModel",link:function(a,c,d,e){if(e){var f,g=d.ngPattern||d.pattern;d.$observe("pattern",function(a){if(v(a)&&a.length>0&&(a=new RegExp("^"+a+"$")),a&&!a.test)throw b("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",g,a,Z(c));f=a||void 0,e.$validate()}),e.$validators.pattern=function(a,b){return e.$isEmpty(b)||r(f)||f.test(b)}}}}},$g=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){if(d){var e=-1;c.$observe("maxlength",function(a){var b=l(a);e=isNaN(b)?-1:b,d.$validate()}),d.$validators.maxlength=function(a,b){return 0>e||d.$isEmpty(b)||b.length<=e}}}}},_g=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){if(d){var e=0;c.$observe("minlength",function(a){e=l(a)||0,d.$validate()}),d.$validators.minlength=function(a,b){return d.$isEmpty(b)||b.length>=e}}}}};return a.angular.bootstrap?void(a.console&&console.log("WARNING: Tried to load angular more than once.")):(ja(),ta(Rd),Rd.module("ngLocale",[],["$provide",function(a){function b(a){a+="";var b=a.indexOf(".");return-1==b?0:a.length-b-1}function c(a,c){var d=c;void 0===d&&(d=Math.min(b(a),3));var e=Math.pow(10,d),f=(a*e|0)%e;return{v:d,f:f}}var d={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};a.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a","short":"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(a,b){var e=0|a,f=c(a,b);return 1==e&&0==f.v?d.ONE:d.OTHER}})}]),void Id(a.document).ready(function(){ea(a.document,fa)}))}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>'),angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.isClass","ui.bootstrap.datepicker","ui.bootstrap.position","ui.bootstrap.datepickerPopup","ui.bootstrap.debounce","ui.bootstrap.dropdown","ui.bootstrap.stackedMap","ui.bootstrap.modal","ui.bootstrap.paging","ui.bootstrap.pager","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["uib/template/accordion/accordion-group.html","uib/template/accordion/accordion.html","uib/template/alert/alert.html","uib/template/carousel/carousel.html","uib/template/carousel/slide.html","uib/template/datepicker/datepicker.html","uib/template/datepicker/day.html","uib/template/datepicker/month.html","uib/template/datepicker/year.html","uib/template/datepickerPopup/popup.html","uib/template/modal/backdrop.html","uib/template/modal/window.html","uib/template/pager/pager.html","uib/template/pagination/pagination.html","uib/template/tooltip/tooltip-html-popup.html","uib/template/tooltip/tooltip-popup.html","uib/template/tooltip/tooltip-template-popup.html","uib/template/popover/popover-html.html","uib/template/popover/popover-template.html","uib/template/popover/popover.html","uib/template/progressbar/bar.html","uib/template/progressbar/progress.html","uib/template/progressbar/progressbar.html","uib/template/rating/rating.html","uib/template/tabs/tab.html","uib/template/tabs/tabset.html","uib/template/timepicker/timepicker.html","uib/template/typeahead/typeahead-match.html","uib/template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.collapse",[]).directive("uibCollapse",["$animate","$q","$parse","$injector",function(a,b,c,d){var e=d.has("$animateCss")?d.get("$animateCss"):null;return{link:function(d,f,g){function h(){f.hasClass("collapse")&&f.hasClass("in")||b.resolve(l(d)).then(function(){f.removeClass("collapse").addClass("collapsing").attr("aria-expanded",!0).attr("aria-hidden",!1),e?e(f,{addClass:"in",easing:"ease",to:{height:f[0].scrollHeight+"px"}}).start()["finally"](i):a.addClass(f,"in",{to:{height:f[0].scrollHeight+"px"}}).then(i)})}function i(){f.removeClass("collapsing").addClass("collapse").css({height:"auto"}),m(d)}function j(){return f.hasClass("collapse")||f.hasClass("in")?void b.resolve(n(d)).then(function(){f.css({height:f[0].scrollHeight+"px"}).removeClass("collapse").addClass("collapsing").attr("aria-expanded",!1).attr("aria-hidden",!0),e?e(f,{removeClass:"in",to:{height:"0"}}).start()["finally"](k):a.removeClass(f,"in",{to:{height:"0"}}).then(k)}):k()}function k(){f.css({height:"0"}),f.removeClass("collapsing").addClass("collapse"),o(d)}var l=c(g.expanding),m=c(g.expanded),n=c(g.collapsing),o=c(g.collapsed);d.$eval(g.uibCollapse)||f.addClass("in").addClass("collapse").attr("aria-expanded",!0).attr("aria-hidden",!1).css({height:"auto"}),d.$watch(g.uibCollapse,function(a){a?j():h()})}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("uibAccordionConfig",{closeOthers:!0}).controller("UibAccordionController",["$scope","$attrs","uibAccordionConfig",function(a,b,c){this.groups=[],this.closeOthers=function(d){var e=angular.isDefined(b.closeOthers)?a.$eval(b.closeOthers):c.closeOthers;e&&angular.forEach(this.groups,function(a){a!==d&&(a.isOpen=!1)})},this.addGroup=function(a){var b=this;this.groups.push(a),a.$on("$destroy",function(c){b.removeGroup(a)})},this.removeGroup=function(a){var b=this.groups.indexOf(a);-1!==b&&this.groups.splice(b,1)}}]).directive("uibAccordion",function(){return{controller:"UibAccordionController",controllerAs:"accordion",transclude:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/accordion/accordion.html"}}}).directive("uibAccordionGroup",function(){return{require:"^uibAccordion",transclude:!0,replace:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/accordion/accordion-group.html"},scope:{heading:"@",panelClass:"@?",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(a){this.heading=a}},link:function(a,b,c,d){d.addGroup(a),a.openClass=c.openClass||"panel-open",a.panelClass=c.panelClass||"panel-default",a.$watch("isOpen",function(c){b.toggleClass(a.openClass,!!c),c&&d.closeOthers(a)}),a.toggleOpen=function(b){a.isDisabled||b&&32!==b.which||(a.isOpen=!a.isOpen)};var e="accordiongroup-"+a.$id+"-"+Math.floor(1e4*Math.random());a.headingId=e+"-tab",a.panelId=e+"-panel"}}}).directive("uibAccordionHeading",function(){return{transclude:!0,template:"",replace:!0,require:"^uibAccordionGroup",link:function(a,b,c,d,e){d.setHeading(e(a,angular.noop))}}}).directive("uibAccordionTransclude",function(){function a(){return"uib-accordion-header,data-uib-accordion-header,x-uib-accordion-header,uib\\:accordion-header,[uib-accordion-header],[data-uib-accordion-header],[x-uib-accordion-header]"}return{require:"^uibAccordionGroup",link:function(b,c,d,e){b.$watch(function(){return e[d.uibAccordionTransclude]},function(b){if(b){var d=angular.element(c[0].querySelector(a()));d.html(""),d.append(b)}})}}}),angular.module("ui.bootstrap.alert",[]).controller("UibAlertController",["$scope","$attrs","$interpolate","$timeout",function(a,b,c,d){a.closeable=!!b.close;var e=angular.isDefined(b.dismissOnTimeout)?c(b.dismissOnTimeout)(a.$parent):null;e&&d(function(){a.close()},parseInt(e,10))}]).directive("uibAlert",function(){return{controller:"UibAlertController",controllerAs:"alert",templateUrl:function(a,b){return b.templateUrl||"uib/template/alert/alert.html"},transclude:!0,replace:!0,scope:{type:"@",close:"&"}}}),angular.module("ui.bootstrap.buttons",[]).constant("uibButtonConfig",{activeClass:"active",toggleEvent:"click"}).controller("UibButtonsController",["uibButtonConfig",function(a){this.activeClass=a.activeClass||"active",this.toggleEvent=a.toggleEvent||"click"}]).directive("uibBtnRadio",["$parse",function(a){return{require:["uibBtnRadio","ngModel"],controller:"UibButtonsController",controllerAs:"buttons",link:function(b,c,d,e){var f=e[0],g=e[1],h=a(d.uibUncheckable);c.find("input").css({display:"none"}),g.$render=function(){c.toggleClass(f.activeClass,angular.equals(g.$modelValue,b.$eval(d.uibBtnRadio)))},c.on(f.toggleEvent,function(){if(!d.disabled){var a=c.hasClass(f.activeClass);a&&!angular.isDefined(d.uncheckable)||b.$apply(function(){g.$setViewValue(a?null:b.$eval(d.uibBtnRadio)),g.$render()})}}),d.uibUncheckable&&b.$watch(h,function(a){d.$set("uncheckable",a?"":void 0)})}}}]).directive("uibBtnCheckbox",function(){return{require:["uibBtnCheckbox","ngModel"],controller:"UibButtonsController",controllerAs:"button",link:function(a,b,c,d){function e(){return g(c.btnCheckboxTrue,!0)}function f(){return g(c.btnCheckboxFalse,!1)}function g(b,c){return angular.isDefined(b)?a.$eval(b):c}var h=d[0],i=d[1];b.find("input").css({display:"none"}),i.$render=function(){b.toggleClass(h.activeClass,angular.equals(i.$modelValue,e()))},b.on(h.toggleEvent,function(){c.disabled||a.$apply(function(){i.$setViewValue(b.hasClass(h.activeClass)?f():e()),i.$render()})})}}}),angular.module("ui.bootstrap.carousel",[]).controller("UibCarouselController",["$scope","$element","$interval","$timeout","$animate",function(a,b,c,d,e){function f(){for(;t.length;)t.shift()}function g(a){for(var b=0;b<q.length;b++)q[b].slide.active=b===a}function h(c,d,i){if(!u){if(angular.extend(c,{direction:i}),angular.extend(q[s].slide||{},{direction:i}),e.enabled(b)&&!a.$currentTransition&&q[d].element&&p.slides.length>1){q[d].element.data(r,c.direction);var j=p.getCurrentIndex();angular.isNumber(j)&&q[j].element&&q[j].element.data(r,c.direction),a.$currentTransition=!0,e.on("addClass",q[d].element,function(b,c){if("close"===c&&(a.$currentTransition=null,e.off("addClass",b),t.length)){var d=t.pop().slide,g=d.index,i=g>p.getCurrentIndex()?"next":"prev";f(),h(d,g,i)}})}a.active=c.index,s=c.index,g(d),l()}}function i(a){for(var b=0;b<q.length;b++)if(q[b].slide===a)return b}function j(){n&&(c.cancel(n),n=null)}function k(b){b.length||(a.$currentTransition=null,f())}function l(){j();var b=+a.interval;!isNaN(b)&&b>0&&(n=c(m,b))}function m(){var b=+a.interval;o&&!isNaN(b)&&b>0&&q.length?a.next():a.pause()}var n,o,p=this,q=p.slides=a.slides=[],r="uib-slideDirection",s=a.active,t=[],u=!1;p.addSlide=function(b,c){q.push({slide:b,element:c}),q.sort(function(a,b){return+a.slide.index-+b.slide.index}),(b.index===a.active||1===q.length&&!angular.isNumber(a.active))&&(a.$currentTransition&&(a.$currentTransition=null),s=b.index,a.active=b.index,g(s),p.select(q[i(b)]),1===q.length&&a.play())},p.getCurrentIndex=function(){for(var a=0;a<q.length;a++)if(q[a].slide.index===s)return a},p.next=a.next=function(){var b=(p.getCurrentIndex()+1)%q.length;return 0===b&&a.noWrap()?void a.pause():p.select(q[b],"next")},p.prev=a.prev=function(){var b=p.getCurrentIndex()-1<0?q.length-1:p.getCurrentIndex()-1;return a.noWrap()&&b===q.length-1?void a.pause():p.select(q[b],"prev")},p.removeSlide=function(b){var c=i(b),d=t.indexOf(q[c]);-1!==d&&t.splice(d,1),q.splice(c,1),q.length>0&&s===c?c>=q.length?(s=q.length-1,a.active=s,g(s),p.select(q[q.length-1])):(s=c,a.active=s,g(s),p.select(q[c])):s>c&&(s--,a.active=s),0===q.length&&(s=null,a.active=null,f())},p.select=a.select=function(b,c){var d=i(b.slide);void 0===c&&(c=d>p.getCurrentIndex()?"next":"prev"),b.slide.index===s||a.$currentTransition?b&&b.slide.index!==s&&a.$currentTransition&&t.push(q[d]):h(b.slide,d,c)},a.indexOfSlide=function(a){return+a.slide.index},a.isActive=function(b){return a.active===b.slide.index},a.isPrevDisabled=function(){return 0===a.active&&a.noWrap()},a.isNextDisabled=function(){return a.active===q.length-1&&a.noWrap()},a.pause=function(){a.noPause||(o=!1,j())},a.play=function(){o||(o=!0,l())},a.$on("$destroy",function(){u=!0,j()}),a.$watch("noTransition",function(a){e.enabled(b,!a)}),a.$watch("interval",l),a.$watchCollection("slides",k),a.$watch("active",function(a){if(angular.isNumber(a)&&s!==a){for(var b=0;b<q.length;b++)if(q[b].slide.index===a){a=b;break}var c=q[a];c&&(g(a),p.select(q[a]),s=a)}})}]).directive("uibCarousel",function(){return{transclude:!0,replace:!0,controller:"UibCarouselController",controllerAs:"carousel",templateUrl:function(a,b){return b.templateUrl||"uib/template/carousel/carousel.html"},scope:{active:"=",interval:"=",noTransition:"=",noPause:"=",noWrap:"&"}}}).directive("uibSlide",function(){return{require:"^uibCarousel",transclude:!0,replace:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/carousel/slide.html"},scope:{actual:"=?",index:"=?"},link:function(a,b,c,d){d.addSlide(a,b),a.$on("$destroy",function(){d.removeSlide(a)})}}}).animation(".item",["$animateCss",function(a){function b(a,b,c){a.removeClass(b),c&&c()}var c="uib-slideDirection";return{beforeAddClass:function(d,e,f){if("active"===e){var g=!1,h=d.data(c),i="next"===h?"left":"right",j=b.bind(this,d,i+" "+h,f);return d.addClass(h),a(d,{addClass:i}).start().done(j),function(){g=!0}}f()},beforeRemoveClass:function(d,e,f){if("active"===e){var g=!1,h=d.data(c),i="next"===h?"left":"right",j=b.bind(this,d,i,f);return a(d,{addClass:i}).start().done(j),function(){g=!0}}f()}}}]),angular.module("ui.bootstrap.dateparser",[]).service("uibDateParser",["$log","$locale","dateFilter","orderByFilter",function(a,b,c,d){function e(a,b){var c=[],e=a.split(""),f=a.indexOf("'");if(f>-1){var g=!1;a=a.split("");for(var h=f;h<a.length;h++)g?("'"===a[h]&&(h+1<a.length&&"'"===a[h+1]?(a[h+1]="$",e[h+1]=""):(e[h]="",g=!1)),a[h]="$"):"'"===a[h]&&(a[h]="$",e[h]="",g=!0);a=a.join("")}return angular.forEach(n,function(d){var f=a.indexOf(d.key);if(f>-1){a=a.split(""),e[f]="("+d.regex+")",a[f]="$";for(var g=f+1,h=f+d.key.length;h>g;g++)e[g]="",a[g]="$";a=a.join(""),c.push({index:f,key:d.key,apply:d[b],matcher:d.regex})}}),{regex:new RegExp("^"+e.join("")+"$"),map:d(c,"index")}}function f(a,b,c){return 1>c?!1:1===b&&c>28?29===c&&(a%4===0&&a%100!==0||a%400===0):3===b||5===b||8===b||10===b?31>c:!0}function g(a){return parseInt(a,10)}function h(a,b){return a&&b?l(a,b):a}function i(a,b){return a&&b?l(a,b,!0):a}function j(a,b){a=a.replace(/:/g,"");var c=Date.parse("Jan 01, 1970 00:00:00 "+a)/6e4;return isNaN(c)?b:c}function k(a,b){return a=new Date(a.getTime()),a.setMinutes(a.getMinutes()+b),a}function l(a,b,c){c=c?-1:1;var d=a.getTimezoneOffset(),e=j(b,d);return k(a,c*(e-d))}var m,n,o=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;this.init=function(){m=b.id,this.parsers={},this.formatters={},n=[{key:"yyyy",regex:"\\d{4}",apply:function(a){this.year=+a},formatter:function(a){var b=new Date;return b.setFullYear(Math.abs(a.getFullYear())),c(b,"yyyy")}},{key:"yy",regex:"\\d{2}",apply:function(a){a=+a,this.year=69>a?a+2e3:a+1900},formatter:function(a){var b=new Date;return b.setFullYear(Math.abs(a.getFullYear())),c(b,"yy")}},{key:"y",regex:"\\d{1,4}",apply:function(a){this.year=+a},formatter:function(a){var b=new Date;return b.setFullYear(Math.abs(a.getFullYear())),c(b,"y")}},{key:"M!",regex:"0?[1-9]|1[0-2]",apply:function(a){this.month=a-1},formatter:function(a){var b=a.getMonth();return/^[0-9]$/.test(b)?c(a,"MM"):c(a,"M")}},{key:"MMMM",regex:b.DATETIME_FORMATS.MONTH.join("|"),apply:function(a){this.month=b.DATETIME_FORMATS.MONTH.indexOf(a)},formatter:function(a){return c(a,"MMMM")}},{key:"MMM",regex:b.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(a){this.month=b.DATETIME_FORMATS.SHORTMONTH.indexOf(a)},formatter:function(a){return c(a,"MMM")}},{key:"MM",regex:"0[1-9]|1[0-2]",apply:function(a){this.month=a-1},formatter:function(a){return c(a,"MM")}},{key:"M",regex:"[1-9]|1[0-2]",apply:function(a){this.month=a-1},formatter:function(a){return c(a,"M")}},{key:"d!",regex:"[0-2]?[0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a},formatter:function(a){var b=a.getDate();return/^[1-9]$/.test(b)?c(a,"dd"):c(a,"d")}},{key:"dd",regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a},formatter:function(a){return c(a,"dd")}},{key:"d",regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a},formatter:function(a){return c(a,"d")}},{key:"EEEE",regex:b.DATETIME_FORMATS.DAY.join("|"),formatter:function(a){return c(a,"EEEE")}},{key:"EEE",regex:b.DATETIME_FORMATS.SHORTDAY.join("|"),formatter:function(a){return c(a,"EEE")}},{key:"HH",regex:"(?:0|1)[0-9]|2[0-3]",apply:function(a){this.hours=+a},formatter:function(a){return c(a,"HH")}},{key:"hh",regex:"0[0-9]|1[0-2]",apply:function(a){this.hours=+a},formatter:function(a){return c(a,"hh")}},{key:"H",regex:"1?[0-9]|2[0-3]",apply:function(a){this.hours=+a},formatter:function(a){return c(a,"H")}},{key:"h",regex:"[0-9]|1[0-2]",apply:function(a){this.hours=+a},formatter:function(a){return c(a,"h")}},{key:"mm",regex:"[0-5][0-9]",apply:function(a){this.minutes=+a},formatter:function(a){return c(a,"mm")}},{key:"m",regex:"[0-9]|[1-5][0-9]",apply:function(a){this.minutes=+a},formatter:function(a){return c(a,"m")}},{key:"sss",regex:"[0-9][0-9][0-9]",apply:function(a){this.milliseconds=+a},formatter:function(a){return c(a,"sss")}},{key:"ss",regex:"[0-5][0-9]",apply:function(a){this.seconds=+a},formatter:function(a){return c(a,"ss")}},{key:"s",regex:"[0-9]|[1-5][0-9]",apply:function(a){this.seconds=+a},formatter:function(a){return c(a,"s")}},{key:"a",regex:b.DATETIME_FORMATS.AMPMS.join("|"),apply:function(a){12===this.hours&&(this.hours=0),"PM"===a&&(this.hours+=12)},formatter:function(a){return c(a,"a")}},{key:"Z",regex:"[+-]\\d{4}",apply:function(a){var b=a.match(/([+-])(\d{2})(\d{2})/),c=b[1],d=b[2],e=b[3];this.hours+=g(c+d),this.minutes+=g(c+e)},formatter:function(a){return c(a,"Z")}},{key:"ww",regex:"[0-4][0-9]|5[0-3]",formatter:function(a){return c(a,"ww")}},{key:"w",regex:"[0-9]|[1-4][0-9]|5[0-3]",formatter:function(a){return c(a,"w")}},{key:"GGGG",regex:b.DATETIME_FORMATS.ERANAMES.join("|").replace(/\s/g,"\\s"),formatter:function(a){return c(a,"GGGG")}},{key:"GGG",regex:b.DATETIME_FORMATS.ERAS.join("|"),formatter:function(a){return c(a,"GGG")}},{key:"GG",regex:b.DATETIME_FORMATS.ERAS.join("|"),formatter:function(a){return c(a,"GG")}},{key:"G",regex:b.DATETIME_FORMATS.ERAS.join("|"),formatter:function(a){return c(a,"G")}}]},this.init(),this.filter=function(a,c){if(!angular.isDate(a)||isNaN(a)||!c)return"";c=b.DATETIME_FORMATS[c]||c,b.id!==m&&this.init(),this.formatters[c]||(this.formatters[c]=e(c,"formatter"));var d=this.formatters[c],f=d.map,g=c;return f.reduce(function(b,c,d){var e=g.match(new RegExp("(.*)"+c.key));e&&angular.isString(e[1])&&(b+=e[1],g=g.replace(e[1]+c.key,""));var h=d===f.length-1?g:"";return c.apply?b+c.apply.call(null,a)+h:b+h},"")},this.parse=function(c,d,g){if(!angular.isString(c)||!d)return c;d=b.DATETIME_FORMATS[d]||d,d=d.replace(o,"\\$&"),b.id!==m&&this.init(),this.parsers[d]||(this.parsers[d]=e(d,"apply"));var h=this.parsers[d],i=h.regex,j=h.map,k=c.match(i),l=!1;if(k&&k.length){var n,p;angular.isDate(g)&&!isNaN(g.getTime())?n={year:g.getFullYear(),month:g.getMonth(),date:g.getDate(),hours:g.getHours(),minutes:g.getMinutes(),seconds:g.getSeconds(),milliseconds:g.getMilliseconds()}:(g&&a.warn("dateparser:","baseDate is not a valid date"),n={year:1900,month:0,date:1,hours:0,minutes:0,seconds:0,milliseconds:0});for(var q=1,r=k.length;r>q;q++){var s=j[q-1];"Z"===s.matcher&&(l=!0),s.apply&&s.apply.call(n,k[q])}var t=l?Date.prototype.setUTCFullYear:Date.prototype.setFullYear,u=l?Date.prototype.setUTCHours:Date.prototype.setHours;return f(n.year,n.month,n.date)&&(!angular.isDate(g)||isNaN(g.getTime())||l?(p=new Date(0),t.call(p,n.year,n.month,n.date),u.call(p,n.hours||0,n.minutes||0,n.seconds||0,n.milliseconds||0)):(p=new Date(g),t.call(p,n.year,n.month,n.date),u.call(p,n.hours,n.minutes,n.seconds,n.milliseconds))),p}},this.toTimezone=h,this.fromTimezone=i,this.timezoneToOffset=j,this.addDateMinutes=k,this.convertTimezoneToLocal=l}]),angular.module("ui.bootstrap.isClass",[]).directive("uibIsClass",["$animate",function(a){var b=/^\s*([\s\S]+?)\s+on\s+([\s\S]+?)\s*$/,c=/^\s*([\s\S]+?)\s+for\s+([\s\S]+?)\s*$/;return{restrict:"A",compile:function(d,e){function f(a,b,c){i.push(a),j.push({scope:a,element:b}),o.forEach(function(b,c){g(b,a)}),a.$on("$destroy",h)}function g(b,d){var e=b.match(c),f=d.$eval(e[1]),g=e[2],h=k[b];if(!h){var i=function(b){var c=null;j.some(function(a){var d=a.scope.$eval(m);return d===b?(c=a,!0):void 0}),h.lastActivated!==c&&(h.lastActivated&&a.removeClass(h.lastActivated.element,f),c&&a.addClass(c.element,f),h.lastActivated=c)};k[b]=h={lastActivated:null,scope:d,watchFn:i,compareWithExp:g,watcher:d.$watch(g,i)}}h.watchFn(d.$eval(g))}function h(a){var b=a.targetScope,c=i.indexOf(b);if(i.splice(c,1),j.splice(c,1),i.length){var d=i[0];angular.forEach(k,function(a){a.scope===b&&(a.watcher=d.$watch(a.compareWithExp,a.watchFn),a.scope=d)})}else k={}}var i=[],j=[],k={},l=e.uibIsClass.match(b),m=l[2],n=l[1],o=n.split(",");return f}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.isClass"]).value("$datepickerSuppressError",!1).value("$datepickerLiteralWarning",!0).constant("uibDatepickerConfig",{datepickerMode:"day",formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",maxDate:null,maxMode:"year",minDate:null,minMode:"day",ngModelOptions:{},shortcutPropagation:!1,showWeeks:!0,yearColumns:5,yearRows:4}).controller("UibDatepickerController",["$scope","$attrs","$parse","$interpolate","$locale","$log","dateFilter","uibDatepickerConfig","$datepickerLiteralWarning","$datepickerSuppressError","uibDateParser",function(a,b,c,d,e,f,g,h,i,j,k){function l(b){a.datepickerMode=b,a.datepickerOptions.datepickerMode=b}var m=this,n={$setViewValue:angular.noop},o={},p=[];!!b.datepickerOptions;a.datepickerOptions||(a.datepickerOptions={}),this.modes=["day","month","year"],["customClass","dateDisabled","datepickerMode","formatDay","formatDayHeader","formatDayTitle","formatMonth","formatMonthTitle","formatYear","maxDate","maxMode","minDate","minMode","showWeeks","shortcutPropagation","startingDay","yearColumns","yearRows"].forEach(function(b){switch(b){case"customClass":case"dateDisabled":a[b]=a.datepickerOptions[b]||angular.noop;break;case"datepickerMode":a.datepickerMode=angular.isDefined(a.datepickerOptions.datepickerMode)?a.datepickerOptions.datepickerMode:h.datepickerMode;break;case"formatDay":case"formatDayHeader":case"formatDayTitle":case"formatMonth":case"formatMonthTitle":case"formatYear":m[b]=angular.isDefined(a.datepickerOptions[b])?d(a.datepickerOptions[b])(a.$parent):h[b];break;case"showWeeks":case"shortcutPropagation":case"yearColumns":case"yearRows":m[b]=angular.isDefined(a.datepickerOptions[b])?a.datepickerOptions[b]:h[b];break;case"startingDay":angular.isDefined(a.datepickerOptions.startingDay)?m.startingDay=a.datepickerOptions.startingDay:angular.isNumber(h.startingDay)?m.startingDay=h.startingDay:m.startingDay=(e.DATETIME_FORMATS.FIRSTDAYOFWEEK+8)%7;break;case"maxDate":case"minDate":a.$watch("datepickerOptions."+b,function(a){a?angular.isDate(a)?m[b]=k.fromTimezone(new Date(a),o.timezone):(i&&f.warn("Literal date support has been deprecated, please switch to date object usage"),m[b]=new Date(g(a,"medium"))):m[b]=h[b]?k.fromTimezone(new Date(h[b]),o.timezone):null,m.refreshView()});break;case"maxMode":case"minMode":a.datepickerOptions[b]?a.$watch(function(){return a.datepickerOptions[b]},function(c){m[b]=a[b]=angular.isDefined(c)?c:datepickerOptions[b],("minMode"===b&&m.modes.indexOf(a.datepickerOptions.datepickerMode)<m.modes.indexOf(m[b])||"maxMode"===b&&m.modes.indexOf(a.datepickerOptions.datepickerMode)>m.modes.indexOf(m[b]))&&(a.datepickerMode=m[b],a.datepickerOptions.datepickerMode=m[b])}):m[b]=a[b]=h[b]||null}}),a.uniqueId="datepicker-"+a.$id+"-"+Math.floor(1e4*Math.random()),a.disabled=angular.isDefined(b.disabled)||!1,angular.isDefined(b.ngDisabled)&&p.push(a.$parent.$watch(b.ngDisabled,function(b){a.disabled=b,m.refreshView()})),a.isActive=function(b){return 0===m.compare(b.date,m.activeDate)?(a.activeDateId=b.uid,!0):!1},this.init=function(b){n=b,o=b.$options||h.ngModelOptions,a.datepickerOptions.initDate?(m.activeDate=k.fromTimezone(a.datepickerOptions.initDate,o.timezone)||new Date,a.$watch("datepickerOptions.initDate",function(a){a&&(n.$isEmpty(n.$modelValue)||n.$invalid)&&(m.activeDate=k.fromTimezone(a,o.timezone),m.refreshView())})):m.activeDate=new Date;var c=n.$modelValue?new Date(n.$modelValue):new Date;this.activeDate=isNaN(c)?k.fromTimezone(new Date,o.timezone):k.fromTimezone(c,o.timezone),n.$render=function(){m.render()}},this.render=function(){if(n.$viewValue){var a=new Date(n.$viewValue),b=!isNaN(a);b?this.activeDate=k.fromTimezone(a,o.timezone):j||f.error('Datepicker directive: "ng-model" value must be a Date object')}this.refreshView()},this.refreshView=function(){
if(this.element){a.selectedDt=null,this._refreshView(),a.activeDt&&(a.activeDateId=a.activeDt.uid);var b=n.$viewValue?new Date(n.$viewValue):null;b=k.fromTimezone(b,o.timezone),n.$setValidity("dateDisabled",!b||this.element&&!this.isDisabled(b))}},this.createDateObject=function(b,c){var d=n.$viewValue?new Date(n.$viewValue):null;d=k.fromTimezone(d,o.timezone);var e=new Date;e=k.fromTimezone(e,o.timezone);var f=this.compare(b,e),g={date:b,label:k.filter(b,c),selected:d&&0===this.compare(b,d),disabled:this.isDisabled(b),past:0>f,current:0===f,future:f>0,customClass:this.customClass(b)||null};return d&&0===this.compare(b,d)&&(a.selectedDt=g),m.activeDate&&0===this.compare(g.date,m.activeDate)&&(a.activeDt=g),g},this.isDisabled=function(b){return a.disabled||this.minDate&&this.compare(b,this.minDate)<0||this.maxDate&&this.compare(b,this.maxDate)>0||a.dateDisabled&&a.dateDisabled({date:b,mode:a.datepickerMode})},this.customClass=function(b){return a.customClass({date:b,mode:a.datepickerMode})},this.split=function(a,b){for(var c=[];a.length>0;)c.push(a.splice(0,b));return c},a.select=function(b){if(a.datepickerMode===m.minMode){var c=n.$viewValue?k.fromTimezone(new Date(n.$viewValue),o.timezone):new Date(0,0,0,0,0,0,0);c.setFullYear(b.getFullYear(),b.getMonth(),b.getDate()),c=k.toTimezone(c,o.timezone),n.$setViewValue(c),n.$render()}else m.activeDate=b,l(m.modes[m.modes.indexOf(a.datepickerMode)-1]),a.$emit("uib:datepicker.mode");a.$broadcast("uib:datepicker.focus")},a.move=function(a){var b=m.activeDate.getFullYear()+a*(m.step.years||0),c=m.activeDate.getMonth()+a*(m.step.months||0);m.activeDate.setFullYear(b,c,1),m.refreshView()},a.toggleMode=function(b){b=b||1,a.datepickerMode===m.maxMode&&1===b||a.datepickerMode===m.minMode&&-1===b||(l(m.modes[m.modes.indexOf(a.datepickerMode)+b]),a.$emit("uib:datepicker.mode"))},a.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var q=function(){m.element[0].focus()};a.$on("uib:datepicker.focus",q),a.keydown=function(b){var c=a.keys[b.which];if(c&&!b.shiftKey&&!b.altKey&&!a.disabled)if(b.preventDefault(),m.shortcutPropagation||b.stopPropagation(),"enter"===c||"space"===c){if(m.isDisabled(m.activeDate))return;a.select(m.activeDate)}else!b.ctrlKey||"up"!==c&&"down"!==c?(m.handleKeyDown(c,b),m.refreshView()):a.toggleMode("up"===c?1:-1)},a.$on("$destroy",function(){for(;p.length;)p.shift()()})}]).controller("UibDaypickerController",["$scope","$element","dateFilter",function(a,b,c){function d(a,b){return 1!==b||a%4!==0||a%100===0&&a%400!==0?f[b]:29}function e(a){var b=new Date(a);b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/864e5)/7)+1}var f=[31,28,31,30,31,30,31,31,30,31,30,31];this.step={months:1},this.element=b,this.init=function(b){angular.extend(b,this),a.showWeeks=b.showWeeks,b.refreshView()},this.getDates=function(a,b){for(var c,d=new Array(b),e=new Date(a),f=0;b>f;)c=new Date(e),d[f++]=c,e.setDate(e.getDate()+1);return d},this._refreshView=function(){var b=this.activeDate.getFullYear(),d=this.activeDate.getMonth(),f=new Date(this.activeDate);f.setFullYear(b,d,1);var g=this.startingDay-f.getDay(),h=g>0?7-g:-g,i=new Date(f);h>0&&i.setDate(-h+1);for(var j=this.getDates(i,42),k=0;42>k;k++)j[k]=angular.extend(this.createDateObject(j[k],this.formatDay),{secondary:j[k].getMonth()!==d,uid:a.uniqueId+"-"+k});a.labels=new Array(7);for(var l=0;7>l;l++)a.labels[l]={abbr:c(j[l].date,this.formatDayHeader),full:c(j[l].date,"EEEE")};if(a.title=c(this.activeDate,this.formatDayTitle),a.rows=this.split(j,7),a.showWeeks){a.weekNumbers=[];for(var m=(11-this.startingDay)%7,n=a.rows.length,o=0;n>o;o++)a.weekNumbers.push(e(a.rows[o][m].date))}},this.compare=function(a,b){var c=new Date(a.getFullYear(),a.getMonth(),a.getDate()),d=new Date(b.getFullYear(),b.getMonth(),b.getDate());return c.setFullYear(a.getFullYear()),d.setFullYear(b.getFullYear()),c-d},this.handleKeyDown=function(a,b){var c=this.activeDate.getDate();if("left"===a)c-=1;else if("up"===a)c-=7;else if("right"===a)c+=1;else if("down"===a)c+=7;else if("pageup"===a||"pagedown"===a){var e=this.activeDate.getMonth()+("pageup"===a?-1:1);this.activeDate.setMonth(e,1),c=Math.min(d(this.activeDate.getFullYear(),this.activeDate.getMonth()),c)}else"home"===a?c=1:"end"===a&&(c=d(this.activeDate.getFullYear(),this.activeDate.getMonth()));this.activeDate.setDate(c)}}]).controller("UibMonthpickerController",["$scope","$element","dateFilter",function(a,b,c){this.step={years:1},this.element=b,this.init=function(a){angular.extend(a,this),a.refreshView()},this._refreshView=function(){for(var b,d=new Array(12),e=this.activeDate.getFullYear(),f=0;12>f;f++)b=new Date(this.activeDate),b.setFullYear(e,f,1),d[f]=angular.extend(this.createDateObject(b,this.formatMonth),{uid:a.uniqueId+"-"+f});a.title=c(this.activeDate,this.formatMonthTitle),a.rows=this.split(d,3)},this.compare=function(a,b){var c=new Date(a.getFullYear(),a.getMonth()),d=new Date(b.getFullYear(),b.getMonth());return c.setFullYear(a.getFullYear()),d.setFullYear(b.getFullYear()),c-d},this.handleKeyDown=function(a,b){var c=this.activeDate.getMonth();if("left"===a)c-=1;else if("up"===a)c-=3;else if("right"===a)c+=1;else if("down"===a)c+=3;else if("pageup"===a||"pagedown"===a){var d=this.activeDate.getFullYear()+("pageup"===a?-1:1);this.activeDate.setFullYear(d)}else"home"===a?c=0:"end"===a&&(c=11);this.activeDate.setMonth(c)}}]).controller("UibYearpickerController",["$scope","$element","dateFilter",function(a,b,c){function d(a){return parseInt((a-1)/f,10)*f+1}var e,f;this.element=b,this.yearpickerInit=function(){e=this.yearColumns,f=this.yearRows*e,this.step={years:f}},this._refreshView=function(){for(var b,c=new Array(f),g=0,h=d(this.activeDate.getFullYear());f>g;g++)b=new Date(this.activeDate),b.setFullYear(h+g,0,1),c[g]=angular.extend(this.createDateObject(b,this.formatYear),{uid:a.uniqueId+"-"+g});a.title=[c[0].label,c[f-1].label].join(" - "),a.rows=this.split(c,e),a.columns=e},this.compare=function(a,b){return a.getFullYear()-b.getFullYear()},this.handleKeyDown=function(a,b){var c=this.activeDate.getFullYear();"left"===a?c-=1:"up"===a?c-=e:"right"===a?c+=1:"down"===a?c+=e:"pageup"===a||"pagedown"===a?c+=("pageup"===a?-1:1)*f:"home"===a?c=d(this.activeDate.getFullYear()):"end"===a&&(c=d(this.activeDate.getFullYear())+f-1),this.activeDate.setFullYear(c)}}]).directive("uibDatepicker",function(){return{replace:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/datepicker/datepicker.html"},scope:{datepickerOptions:"=?"},require:["uibDatepicker","^ngModel"],controller:"UibDatepickerController",controllerAs:"datepicker",link:function(a,b,c,d){var e=d[0],f=d[1];e.init(f)}}}).directive("uibDaypicker",function(){return{replace:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/datepicker/day.html"},require:["^uibDatepicker","uibDaypicker"],controller:"UibDaypickerController",link:function(a,b,c,d){var e=d[0],f=d[1];f.init(e)}}}).directive("uibMonthpicker",function(){return{replace:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/datepicker/month.html"},require:["^uibDatepicker","uibMonthpicker"],controller:"UibMonthpickerController",link:function(a,b,c,d){var e=d[0],f=d[1];f.init(e)}}}).directive("uibYearpicker",function(){return{replace:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/datepicker/year.html"},require:["^uibDatepicker","uibYearpicker"],controller:"UibYearpickerController",link:function(a,b,c,d){var e=d[0];angular.extend(e,d[1]),e.yearpickerInit(),e.refreshView()}}}),angular.module("ui.bootstrap.position",[]).factory("$uibPosition",["$document","$window",function(a,b){var c,d,e={normal:/(auto|scroll)/,hidden:/(auto|scroll|hidden)/},f={auto:/\s?auto?\s?/i,primary:/^(top|bottom|left|right)$/,secondary:/^(top|bottom|left|right|center)$/,vertical:/^(top|bottom)$/},g=/(HTML|BODY)/;return{getRawNode:function(a){return a.nodeName?a:a[0]||a},parseStyle:function(a){return a=parseFloat(a),isFinite(a)?a:0},offsetParent:function(c){function d(a){return"static"===(b.getComputedStyle(a).position||"static")}c=this.getRawNode(c);for(var e=c.offsetParent||a[0].documentElement;e&&e!==a[0].documentElement&&d(e);)e=e.offsetParent;return e||a[0].documentElement},scrollbarWidth:function(e){if(e){if(angular.isUndefined(d)){var f=a.find("body");f.addClass("uib-position-body-scrollbar-measure"),d=b.innerWidth-f[0].clientWidth,d=isFinite(d)?d:0,f.removeClass("uib-position-body-scrollbar-measure")}return d}if(angular.isUndefined(c)){var g=angular.element('<div class="uib-position-scrollbar-measure"></div>');a.find("body").append(g),c=g[0].offsetWidth-g[0].clientWidth,c=isFinite(c)?c:0,g.remove()}return c},scrollbarPadding:function(a){a=this.getRawNode(a);var c=b.getComputedStyle(a),d=this.parseStyle(c.paddingRight),e=this.parseStyle(c.paddingBottom),f=this.scrollParent(a,!1,!0),h=this.scrollbarWidth(f,g.test(f.tagName));return{scrollbarWidth:h,widthOverflow:f.scrollWidth>f.clientWidth,right:d+h,originalRight:d,heightOverflow:f.scrollHeight>f.clientHeight,bottom:e+h,originalBottom:e}},isScrollable:function(a,c){a=this.getRawNode(a);var d=c?e.hidden:e.normal,f=b.getComputedStyle(a);return d.test(f.overflow+f.overflowY+f.overflowX)},scrollParent:function(c,d,f){c=this.getRawNode(c);var g=d?e.hidden:e.normal,h=a[0].documentElement,i=b.getComputedStyle(c);if(f&&g.test(i.overflow+i.overflowY+i.overflowX))return c;var j="absolute"===i.position,k=c.parentElement||h;if(k===h||"fixed"===i.position)return h;for(;k.parentElement&&k!==h;){var l=b.getComputedStyle(k);if(j&&"static"!==l.position&&(j=!1),!j&&g.test(l.overflow+l.overflowY+l.overflowX))break;k=k.parentElement}return k},position:function(c,d){c=this.getRawNode(c);var e=this.offset(c);if(d){var f=b.getComputedStyle(c);e.top-=this.parseStyle(f.marginTop),e.left-=this.parseStyle(f.marginLeft)}var g=this.offsetParent(c),h={top:0,left:0};return g!==a[0].documentElement&&(h=this.offset(g),h.top+=g.clientTop-g.scrollTop,h.left+=g.clientLeft-g.scrollLeft),{width:Math.round(angular.isNumber(e.width)?e.width:c.offsetWidth),height:Math.round(angular.isNumber(e.height)?e.height:c.offsetHeight),top:Math.round(e.top-h.top),left:Math.round(e.left-h.left)}},offset:function(c){c=this.getRawNode(c);var d=c.getBoundingClientRect();return{width:Math.round(angular.isNumber(d.width)?d.width:c.offsetWidth),height:Math.round(angular.isNumber(d.height)?d.height:c.offsetHeight),top:Math.round(d.top+(b.pageYOffset||a[0].documentElement.scrollTop)),left:Math.round(d.left+(b.pageXOffset||a[0].documentElement.scrollLeft))}},viewportOffset:function(c,d,e){c=this.getRawNode(c),e=e!==!1;var f=c.getBoundingClientRect(),g={top:0,left:0,bottom:0,right:0},h=d?a[0].documentElement:this.scrollParent(c),i=h.getBoundingClientRect();if(g.top=i.top+h.clientTop,g.left=i.left+h.clientLeft,h===a[0].documentElement&&(g.top+=b.pageYOffset,g.left+=b.pageXOffset),g.bottom=g.top+h.clientHeight,g.right=g.left+h.clientWidth,e){var j=b.getComputedStyle(h);g.top+=this.parseStyle(j.paddingTop),g.bottom-=this.parseStyle(j.paddingBottom),g.left+=this.parseStyle(j.paddingLeft),g.right-=this.parseStyle(j.paddingRight)}return{top:Math.round(f.top-g.top),bottom:Math.round(g.bottom-f.bottom),left:Math.round(f.left-g.left),right:Math.round(g.right-f.right)}},parsePlacement:function(a){var b=f.auto.test(a);return b&&(a=a.replace(f.auto,"")),a=a.split("-"),a[0]=a[0]||"top",f.primary.test(a[0])||(a[0]="top"),a[1]=a[1]||"center",f.secondary.test(a[1])||(a[1]="center"),b?a[2]=!0:a[2]=!1,a},positionElements:function(a,c,d,e){a=this.getRawNode(a),c=this.getRawNode(c);var g=angular.isDefined(c.offsetWidth)?c.offsetWidth:c.prop("offsetWidth"),h=angular.isDefined(c.offsetHeight)?c.offsetHeight:c.prop("offsetHeight");d=this.parsePlacement(d);var i=e?this.offset(a):this.position(a),j={top:0,left:0,placement:""};if(d[2]){var k=this.viewportOffset(a,e),l=b.getComputedStyle(c),m={width:g+Math.round(Math.abs(this.parseStyle(l.marginLeft)+this.parseStyle(l.marginRight))),height:h+Math.round(Math.abs(this.parseStyle(l.marginTop)+this.parseStyle(l.marginBottom)))};if(d[0]="top"===d[0]&&m.height>k.top&&m.height<=k.bottom?"bottom":"bottom"===d[0]&&m.height>k.bottom&&m.height<=k.top?"top":"left"===d[0]&&m.width>k.left&&m.width<=k.right?"right":"right"===d[0]&&m.width>k.right&&m.width<=k.left?"left":d[0],d[1]="top"===d[1]&&m.height-i.height>k.bottom&&m.height-i.height<=k.top?"bottom":"bottom"===d[1]&&m.height-i.height>k.top&&m.height-i.height<=k.bottom?"top":"left"===d[1]&&m.width-i.width>k.right&&m.width-i.width<=k.left?"right":"right"===d[1]&&m.width-i.width>k.left&&m.width-i.width<=k.right?"left":d[1],"center"===d[1])if(f.vertical.test(d[0])){var n=i.width/2-g/2;k.left+n<0&&m.width-i.width<=k.right?d[1]="left":k.right+n<0&&m.width-i.width<=k.left&&(d[1]="right")}else{var o=i.height/2-m.height/2;k.top+o<0&&m.height-i.height<=k.bottom?d[1]="top":k.bottom+o<0&&m.height-i.height<=k.top&&(d[1]="bottom")}}switch(d[0]){case"top":j.top=i.top-h;break;case"bottom":j.top=i.top+i.height;break;case"left":j.left=i.left-g;break;case"right":j.left=i.left+i.width}switch(d[1]){case"top":j.top=i.top;break;case"bottom":j.top=i.top+i.height-h;break;case"left":j.left=i.left;break;case"right":j.left=i.left+i.width-g;break;case"center":f.vertical.test(d[0])?j.left=i.left+i.width/2-g/2:j.top=i.top+i.height/2-h/2}return j.top=Math.round(j.top),j.left=Math.round(j.left),j.placement="center"===d[1]?d[0]:d[0]+"-"+d[1],j},positionArrow:function(a,c){a=this.getRawNode(a);var d=a.querySelector(".tooltip-inner, .popover-inner");if(d){var e=angular.element(d).hasClass("tooltip-inner"),g=e?a.querySelector(".tooltip-arrow"):a.querySelector(".arrow");if(g){var h={top:"",bottom:"",left:"",right:""};if(c=this.parsePlacement(c),"center"===c[1])return void angular.element(g).css(h);var i="border-"+c[0]+"-width",j=b.getComputedStyle(g)[i],k="border-";k+=f.vertical.test(c[0])?c[0]+"-"+c[1]:c[1]+"-"+c[0],k+="-radius";var l=b.getComputedStyle(e?d:a)[k];switch(c[0]){case"top":h.bottom=e?"0":"-"+j;break;case"bottom":h.top=e?"0":"-"+j;break;case"left":h.right=e?"0":"-"+j;break;case"right":h.left=e?"0":"-"+j}h[c[1]]=l,angular.element(g).css(h)}}}}}]),angular.module("ui.bootstrap.datepickerPopup",["ui.bootstrap.datepicker","ui.bootstrap.position"]).value("$datepickerPopupLiteralWarning",!0).constant("uibDatepickerPopupConfig",{altInputFormats:[],appendToBody:!1,clearText:"Clear",closeOnDateSelection:!0,closeText:"Done",currentText:"Today",datepickerPopup:"yyyy-MM-dd",datepickerPopupTemplateUrl:"uib/template/datepickerPopup/popup.html",datepickerTemplateUrl:"uib/template/datepicker/datepicker.html",html5Types:{date:"yyyy-MM-dd","datetime-local":"yyyy-MM-ddTHH:mm:ss.sss",month:"yyyy-MM"},onOpenFocus:!0,showButtonBar:!0,placement:"auto bottom-left"}).controller("UibDatepickerPopupController",["$scope","$element","$attrs","$compile","$log","$parse","$window","$document","$rootScope","$uibPosition","dateFilter","uibDateParser","uibDatepickerPopupConfig","$timeout","uibDatepickerConfig","$datepickerPopupLiteralWarning",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){function q(b){var c=l.parse(b,w,a.date);if(isNaN(c))for(var d=0;d<I.length;d++)if(c=l.parse(b,I[d],a.date),!isNaN(c))return c;return c}function r(a){if(angular.isNumber(a)&&(a=new Date(a)),!a)return null;if(angular.isDate(a)&&!isNaN(a))return a;if(angular.isString(a)){var b=q(a);if(!isNaN(b))return l.toTimezone(b,J)}return F.$options&&F.$options.allowInvalid?a:void 0}function s(a,b){var d=a||b;return c.ngRequired||d?(angular.isNumber(d)&&(d=new Date(d)),d?angular.isDate(d)&&!isNaN(d)?!0:angular.isString(d)?!isNaN(q(b)):!1:!0):!0}function t(c){if(a.isOpen||!a.disabled){var d=H[0],e=b[0].contains(c.target),f=void 0!==d.contains&&d.contains(c.target);!a.isOpen||e||f||a.$apply(function(){a.isOpen=!1})}}function u(c){27===c.which&&a.isOpen?(c.preventDefault(),c.stopPropagation(),a.$apply(function(){a.isOpen=!1}),b[0].focus()):40!==c.which||a.isOpen||(c.preventDefault(),c.stopPropagation(),a.$apply(function(){a.isOpen=!0}))}function v(){if(a.isOpen){var d=angular.element(H[0].querySelector(".uib-datepicker-popup")),e=c.popupPlacement?c.popupPlacement:m.placement,f=j.positionElements(b,d,e,y);d.css({top:f.top+"px",left:f.left+"px"}),d.hasClass("uib-position-measure")&&d.removeClass("uib-position-measure")}}var w,x,y,z,A,B,C,D,E,F,G,H,I,J,K=!1,L=[];this.init=function(e){if(F=e,G=e.$options,x=angular.isDefined(c.closeOnDateSelection)?a.$parent.$eval(c.closeOnDateSelection):m.closeOnDateSelection,y=angular.isDefined(c.datepickerAppendToBody)?a.$parent.$eval(c.datepickerAppendToBody):m.appendToBody,z=angular.isDefined(c.onOpenFocus)?a.$parent.$eval(c.onOpenFocus):m.onOpenFocus,A=angular.isDefined(c.datepickerPopupTemplateUrl)?c.datepickerPopupTemplateUrl:m.datepickerPopupTemplateUrl,B=angular.isDefined(c.datepickerTemplateUrl)?c.datepickerTemplateUrl:m.datepickerTemplateUrl,I=angular.isDefined(c.altInputFormats)?a.$parent.$eval(c.altInputFormats):m.altInputFormats,a.showButtonBar=angular.isDefined(c.showButtonBar)?a.$parent.$eval(c.showButtonBar):m.showButtonBar,m.html5Types[c.type]?(w=m.html5Types[c.type],K=!0):(w=c.uibDatepickerPopup||m.datepickerPopup,c.$observe("uibDatepickerPopup",function(a,b){var c=a||m.datepickerPopup;if(c!==w&&(w=c,F.$modelValue=null,!w))throw new Error("uibDatepickerPopup must have a date format specified.")})),!w)throw new Error("uibDatepickerPopup must have a date format specified.");if(K&&c.uibDatepickerPopup)throw new Error("HTML5 date input types do not support custom formats.");C=angular.element("<div uib-datepicker-popup-wrap><div uib-datepicker></div></div>"),G?(J=G.timezone,a.ngModelOptions=angular.copy(G),a.ngModelOptions.timezone=null,a.ngModelOptions.updateOnDefault===!0&&(a.ngModelOptions.updateOn=a.ngModelOptions.updateOn?a.ngModelOptions.updateOn+" default":"default"),C.attr("ng-model-options","ngModelOptions")):J=null,C.attr({"ng-model":"date","ng-change":"dateSelection(date)","template-url":A}),D=angular.element(C.children()[0]),D.attr("template-url",B),a.datepickerOptions||(a.datepickerOptions={}),K&&"month"===c.type&&(a.datepickerOptions.datepickerMode="month",a.datepickerOptions.minMode="month"),D.attr("datepicker-options","datepickerOptions"),K?F.$formatters.push(function(b){return a.date=l.fromTimezone(b,J),b}):(F.$$parserName="date",F.$validators.date=s,F.$parsers.unshift(r),F.$formatters.push(function(b){return F.$isEmpty(b)?(a.date=b,b):(angular.isNumber(b)&&(b=new Date(b)),a.date=l.fromTimezone(b,J),l.filter(a.date,w))})),F.$viewChangeListeners.push(function(){a.date=q(F.$viewValue)}),b.on("keydown",u),H=d(C)(a),C.remove(),y?h.find("body").append(H):b.after(H),a.$on("$destroy",function(){for(a.isOpen===!0&&(i.$$phase||a.$apply(function(){a.isOpen=!1})),H.remove(),b.off("keydown",u),h.off("click",t),E&&E.off("scroll",v),angular.element(g).off("resize",v);L.length;)L.shift()()})},a.getText=function(b){return a[b+"Text"]||m[b+"Text"]},a.isDisabled=function(b){"today"===b&&(b=l.fromTimezone(new Date,J));var c={};return angular.forEach(["minDate","maxDate"],function(b){a.datepickerOptions[b]?angular.isDate(a.datepickerOptions[b])?c[b]=l.fromTimezone(new Date(a.datepickerOptions[b]),J):(p&&e.warn("Literal date support has been deprecated, please switch to date object usage"),c[b]=new Date(k(a.datepickerOptions[b],"medium"))):c[b]=null}),a.datepickerOptions&&c.minDate&&a.compare(b,c.minDate)<0||c.maxDate&&a.compare(b,c.maxDate)>0},a.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth(),a.getDate())-new Date(b.getFullYear(),b.getMonth(),b.getDate())},a.dateSelection=function(c){angular.isDefined(c)&&(a.date=c);var d=a.date?l.filter(a.date,w):null;b.val(d),F.$setViewValue(d),x&&(a.isOpen=!1,b[0].focus())},a.keydown=function(c){27===c.which&&(c.stopPropagation(),a.isOpen=!1,b[0].focus())},a.select=function(b,c){if(c.stopPropagation(),"today"===b){var d=new Date;angular.isDate(a.date)?(b=new Date(a.date),b.setFullYear(d.getFullYear(),d.getMonth(),d.getDate())):b=new Date(d.setHours(0,0,0,0))}a.dateSelection(b)},a.close=function(c){c.stopPropagation(),a.isOpen=!1,b[0].focus()},a.disabled=angular.isDefined(c.disabled)||!1,c.ngDisabled&&L.push(a.$parent.$watch(f(c.ngDisabled),function(b){a.disabled=b})),a.$watch("isOpen",function(d){d?a.disabled?a.isOpen=!1:n(function(){v(),z&&a.$broadcast("uib:datepicker.focus"),h.on("click",t);var d=c.popupPlacement?c.popupPlacement:m.placement;y||j.parsePlacement(d)[2]?(E=E||angular.element(j.scrollParent(b)),E&&E.on("scroll",v)):E=null,angular.element(g).on("resize",v)},0,!1):(h.off("click",t),E&&E.off("scroll",v),angular.element(g).off("resize",v))}),a.$on("uib:datepicker.mode",function(){n(v,0,!1)})}]).directive("uibDatepickerPopup",function(){return{require:["ngModel","uibDatepickerPopup"],controller:"UibDatepickerPopupController",scope:{datepickerOptions:"=?",isOpen:"=?",currentText:"@",clearText:"@",closeText:"@"},link:function(a,b,c,d){var e=d[0],f=d[1];f.init(e)}}}).directive("uibDatepickerPopupWrap",function(){return{replace:!0,transclude:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/datepickerPopup/popup.html"}}}),angular.module("ui.bootstrap.debounce",[]).factory("$$debounce",["$timeout",function(a){return function(b,c){var d;return function(){var e=this,f=Array.prototype.slice.call(arguments);d&&a.cancel(d),d=a(function(){b.apply(e,f)},c)}}}]),angular.module("ui.bootstrap.dropdown",["ui.bootstrap.position"]).constant("uibDropdownConfig",{appendToOpenClass:"uib-dropdown-open",openClass:"open"}).service("uibDropdownService",["$document","$rootScope",function(a,b){var c=null;this.open=function(b,f){c||(a.on("click",d),f.on("keydown",e)),c&&c!==b&&(c.isOpen=!1),c=b},this.close=function(b,f){c===b&&(c=null,a.off("click",d),f.off("keydown",e))};var d=function(a){if(c&&!(a&&"disabled"===c.getAutoClose()||a&&3===a.which)){var d=c.getToggleElement();if(!(a&&d&&d[0].contains(a.target))){var e=c.getDropdownElement();a&&"outsideClick"===c.getAutoClose()&&e&&e[0].contains(a.target)||(c.isOpen=!1,b.$$phase||c.$apply())}}},e=function(a){27===a.which?(a.stopPropagation(),c.focusToggleElement(),d()):c.isKeynavEnabled()&&-1!==[38,40].indexOf(a.which)&&c.isOpen&&(a.preventDefault(),a.stopPropagation(),c.focusDropdownEntry(a.which))}}]).controller("UibDropdownController",["$scope","$element","$attrs","$parse","uibDropdownConfig","uibDropdownService","$animate","$uibPosition","$document","$compile","$templateRequest",function(a,b,c,d,e,f,g,h,i,j,k){var l,m,n=this,o=a.$new(),p=e.appendToOpenClass,q=e.openClass,r=angular.noop,s=c.onToggle?d(c.onToggle):angular.noop,t=!1,u=null,v=!1,w=i.find("body");b.addClass("dropdown"),this.init=function(){if(c.isOpen&&(m=d(c.isOpen),r=m.assign,a.$watch(m,function(a){o.isOpen=!!a})),angular.isDefined(c.dropdownAppendTo)){var e=d(c.dropdownAppendTo)(o);e&&(u=angular.element(e))}t=angular.isDefined(c.dropdownAppendToBody),v=angular.isDefined(c.keyboardNav),t&&!u&&(u=w),u&&n.dropdownMenu&&(u.append(n.dropdownMenu),b.on("$destroy",function(){n.dropdownMenu.remove()}))},this.toggle=function(a){return o.isOpen=arguments.length?!!a:!o.isOpen,angular.isFunction(r)&&r(o,o.isOpen),o.isOpen},this.isOpen=function(){return o.isOpen},o.getToggleElement=function(){return n.toggleElement},o.getAutoClose=function(){return c.autoClose||"always"},o.getElement=function(){return b},o.isKeynavEnabled=function(){return v},o.focusDropdownEntry=function(a){var c=n.dropdownMenu?angular.element(n.dropdownMenu).find("a"):b.find("ul").eq(0).find("a");switch(a){case 40:angular.isNumber(n.selectedOption)?n.selectedOption=n.selectedOption===c.length-1?n.selectedOption:n.selectedOption+1:n.selectedOption=0;break;case 38:angular.isNumber(n.selectedOption)?n.selectedOption=0===n.selectedOption?0:n.selectedOption-1:n.selectedOption=c.length-1}c[n.selectedOption].focus()},o.getDropdownElement=function(){return n.dropdownMenu},o.focusToggleElement=function(){n.toggleElement&&n.toggleElement[0].focus()},o.$watch("isOpen",function(c,d){if(u&&n.dropdownMenu){var e,i,m,v=h.positionElements(b,n.dropdownMenu,"bottom-left",!0);if(e={top:v.top+"px",display:c?"block":"none"},i=n.dropdownMenu.hasClass("dropdown-menu-right"),i?(e.left="auto",m=h.scrollbarWidth(!0),e.right=window.innerWidth-m-(v.left+b.prop("offsetWidth"))+"px"):(e.left=v.left+"px",e.right="auto"),!t){var w=h.offset(u);e.top=v.top-w.top+"px",i?e.right=window.innerWidth-(v.left-w.left+b.prop("offsetWidth"))+"px":e.left=v.left-w.left+"px"}n.dropdownMenu.css(e)}var x=u?u:b,y=x.hasClass(u?p:q);if(y===!c&&g[c?"addClass":"removeClass"](x,u?p:q).then(function(){angular.isDefined(c)&&c!==d&&s(a,{open:!!c})}),c)n.dropdownMenuTemplateUrl&&k(n.dropdownMenuTemplateUrl).then(function(a){l=o.$new(),j(a.trim())(l,function(a){var b=a;n.dropdownMenu.replaceWith(b),n.dropdownMenu=b})}),o.focusToggleElement(),f.open(o,b);else{if(n.dropdownMenuTemplateUrl){l&&l.$destroy();var z=angular.element('<ul class="dropdown-menu"></ul>');n.dropdownMenu.replaceWith(z),n.dropdownMenu=z}f.close(o,b),n.selectedOption=null}angular.isFunction(r)&&r(a,c)})}]).directive("uibDropdown",function(){return{controller:"UibDropdownController",link:function(a,b,c,d){d.init()}}}).directive("uibDropdownMenu",function(){return{restrict:"A",require:"?^uibDropdown",link:function(a,b,c,d){if(d&&!angular.isDefined(c.dropdownNested)){b.addClass("dropdown-menu");var e=c.templateUrl;e&&(d.dropdownMenuTemplateUrl=e),d.dropdownMenu||(d.dropdownMenu=b)}}}}).directive("uibDropdownToggle",function(){return{require:"?^uibDropdown",link:function(a,b,c,d){if(d){b.addClass("dropdown-toggle"),d.toggleElement=b;var e=function(e){e.preventDefault(),b.hasClass("disabled")||c.disabled||a.$apply(function(){d.toggle()})};b.bind("click",e),b.attr({"aria-haspopup":!0,"aria-expanded":!1}),a.$watch(d.isOpen,function(a){b.attr("aria-expanded",!!a)}),a.$on("$destroy",function(){b.unbind("click",e)})}}}}),angular.module("ui.bootstrap.stackedMap",[]).factory("$$stackedMap",function(){return{createNew:function(){var a=[];return{add:function(b,c){a.push({key:b,value:c})},get:function(b){for(var c=0;c<a.length;c++)if(b===a[c].key)return a[c]},keys:function(){for(var b=[],c=0;c<a.length;c++)b.push(a[c].key);return b},top:function(){return a[a.length-1]},remove:function(b){for(var c=-1,d=0;d<a.length;d++)if(b===a[d].key){c=d;break}return a.splice(c,1)[0]},removeTop:function(){return a.splice(a.length-1,1)[0]},length:function(){return a.length}}}}}),angular.module("ui.bootstrap.modal",["ui.bootstrap.stackedMap","ui.bootstrap.position"]).factory("$$multiMap",function(){return{createNew:function(){var a={};return{entries:function(){return Object.keys(a).map(function(b){return{key:b,value:a[b]}})},get:function(b){return a[b]},hasKey:function(b){return!!a[b]},keys:function(){return Object.keys(a)},put:function(b,c){a[b]||(a[b]=[]),a[b].push(c)},remove:function(b,c){var d=a[b];if(d){var e=d.indexOf(c);-1!==e&&d.splice(e,1),d.length||delete a[b]}}}}}}).provider("$uibResolve",function(){var a=this;this.resolver=null,this.setResolver=function(a){this.resolver=a},this.$get=["$injector","$q",function(b,c){var d=a.resolver?b.get(a.resolver):null;return{resolve:function(a,e,f,g){if(d)return d.resolve(a,e,f,g);var h=[];return angular.forEach(a,function(a){angular.isFunction(a)||angular.isArray(a)?h.push(c.resolve(b.invoke(a))):angular.isString(a)?h.push(c.resolve(b.get(a))):h.push(c.resolve(a))}),c.all(h).then(function(b){var c={},d=0;return angular.forEach(a,function(a,e){c[e]=b[d++]}),c})}}}]}).directive("uibModalBackdrop",["$animate","$injector","$uibModalStack",function(a,b,c){function d(b,d,e){e.modalInClass&&(a.addClass(d,e.modalInClass),b.$on(c.NOW_CLOSING_EVENT,function(c,f){var g=f();b.modalOptions.animation?a.removeClass(d,e.modalInClass).then(g):g()}))}return{replace:!0,templateUrl:"uib/template/modal/backdrop.html",compile:function(a,b){return a.addClass(b.backdropClass),d}}}]).directive("uibModalWindow",["$uibModalStack","$q","$animateCss","$document",function(a,b,c,d){return{scope:{index:"@"},replace:!0,transclude:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/modal/window.html"},link:function(e,f,g){f.addClass(g.windowClass||""),f.addClass(g.windowTopClass||""),e.size=g.size,e.close=function(b){var c=a.getTop();c&&c.value.backdrop&&"static"!==c.value.backdrop&&b.target===b.currentTarget&&(b.preventDefault(),b.stopPropagation(),a.dismiss(c.key,"backdrop click"))},f.on("click",e.close),e.$isRendered=!0;var h=b.defer();g.$observe("modalRender",function(a){"true"===a&&h.resolve()}),h.promise.then(function(){var h=null;g.modalInClass&&(h=c(f,{addClass:g.modalInClass}).start(),e.$on(a.NOW_CLOSING_EVENT,function(a,b){var d=b();c(f,{removeClass:g.modalInClass}).start().then(d)})),b.when(h).then(function(){var b=a.getTop();if(b&&a.modalRendered(b.key),!d[0].activeElement||!f[0].contains(d[0].activeElement)){var c=f[0].querySelector("[autofocus]");c?c.focus():f[0].focus()}})})}}}]).directive("uibModalAnimationClass",function(){return{compile:function(a,b){b.modalAnimation&&a.addClass(b.uibModalAnimationClass)}}}).directive("uibModalTransclude",function(){return{link:function(a,b,c,d,e){e(a.$parent,function(a){b.empty(),b.append(a)})}}}).factory("$uibModalStack",["$animate","$animateCss","$document","$compile","$rootScope","$q","$$multiMap","$$stackedMap","$uibPosition",function(a,b,c,d,e,f,g,h,i){function j(a){return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)}function k(){for(var a=-1,b=v.keys(),c=0;c<b.length;c++)v.get(b[c]).value.backdrop&&(a=c);return a>-1&&y>a&&(a=y),a}function l(a,b){var c=v.get(a).value,d=c.appendTo;v.remove(a),z=v.top(),z&&(y=parseInt(z.value.modalDomEl.attr("index"),10)),o(c.modalDomEl,c.modalScope,function(){var b=c.openedClass||u;w.remove(b,a);var e=w.hasKey(b);d.toggleClass(b,e),!e&&t&&t.heightOverflow&&t.scrollbarWidth&&(t.originalRight?d.css({paddingRight:t.originalRight+"px"}):d.css({paddingRight:""}),t=null),m(!0)},c.closedDeferred),n(),b&&b.focus?b.focus():d.focus&&d.focus()}function m(a){var b;v.length()>0&&(b=v.top().value,b.modalDomEl.toggleClass(b.windowTopClass||"",a))}function n(){if(r&&-1===k()){var a=s;o(r,s,function(){a=null}),r=void 0,s=void 0}}function o(b,c,d,e){function g(){g.done||(g.done=!0,a.leave(b).then(function(){b.remove(),e&&e.resolve()}),c.$destroy(),d&&d())}var h,i=null,j=function(){return h||(h=f.defer(),i=h.promise),function(){h.resolve()}};return c.$broadcast(x.NOW_CLOSING_EVENT,j),f.when(i).then(g)}function p(a){if(a.isDefaultPrevented())return a;var b=v.top();if(b)switch(a.which){case 27:b.value.keyboard&&(a.preventDefault(),e.$apply(function(){x.dismiss(b.key,"escape key press")}));break;case 9:var c=x.loadFocusElementList(b),d=!1;a.shiftKey?(x.isFocusInFirstItem(a,c)||x.isModalFocused(a,b))&&(d=x.focusLastFocusableElement(c)):x.isFocusInLastItem(a,c)&&(d=x.focusFirstFocusableElement(c)),d&&(a.preventDefault(),a.stopPropagation())}}function q(a,b,c){return!a.value.modalScope.$broadcast("modal.closing",b,c).defaultPrevented}var r,s,t,u="modal-open",v=h.createNew(),w=g.createNew(),x={NOW_CLOSING_EVENT:"modal.stack.now-closing"},y=0,z=null,A="a[href], area[href], input:not([disabled]), button:not([disabled]),select:not([disabled]), textarea:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable=true]";return e.$watch(k,function(a){s&&(s.index=a)}),c.on("keydown",p),e.$on("$destroy",function(){c.off("keydown",p)}),x.open=function(b,f){var g=c[0].activeElement,h=f.openedClass||u;m(!1),z=v.top(),v.add(b,{deferred:f.deferred,renderDeferred:f.renderDeferred,closedDeferred:f.closedDeferred,modalScope:f.scope,backdrop:f.backdrop,keyboard:f.keyboard,openedClass:f.openedClass,windowTopClass:f.windowTopClass,animation:f.animation,appendTo:f.appendTo}),w.put(h,b);var j=f.appendTo,l=k();if(!j.length)throw new Error("appendTo element not found. Make sure that the element passed is in DOM.");l>=0&&!r&&(s=e.$new(!0),s.modalOptions=f,s.index=l,r=angular.element('<div uib-modal-backdrop="modal-backdrop"></div>'),
r.attr("backdrop-class",f.backdropClass),f.animation&&r.attr("modal-animation","true"),d(r)(s),a.enter(r,j),t=i.scrollbarPadding(j),t.heightOverflow&&t.scrollbarWidth&&j.css({paddingRight:t.right+"px"})),y=z?parseInt(z.value.modalDomEl.attr("index"),10)+1:0;var n=angular.element('<div uib-modal-window="modal-window"></div>');n.attr({"template-url":f.windowTemplateUrl,"window-class":f.windowClass,"window-top-class":f.windowTopClass,size:f.size,index:y,animate:"animate"}).html(f.content),f.animation&&n.attr("modal-animation","true"),j.addClass(h),a.enter(d(n)(f.scope),j),v.top().value.modalDomEl=n,v.top().value.modalOpener=g},x.close=function(a,b){var c=v.get(a);return c&&q(c,b,!0)?(c.value.modalScope.$$uibDestructionScheduled=!0,c.value.deferred.resolve(b),l(a,c.value.modalOpener),!0):!c},x.dismiss=function(a,b){var c=v.get(a);return c&&q(c,b,!1)?(c.value.modalScope.$$uibDestructionScheduled=!0,c.value.deferred.reject(b),l(a,c.value.modalOpener),!0):!c},x.dismissAll=function(a){for(var b=this.getTop();b&&this.dismiss(b.key,a);)b=this.getTop()},x.getTop=function(){return v.top()},x.modalRendered=function(a){var b=v.get(a);b&&b.value.renderDeferred.resolve()},x.focusFirstFocusableElement=function(a){return a.length>0?(a[0].focus(),!0):!1},x.focusLastFocusableElement=function(a){return a.length>0?(a[a.length-1].focus(),!0):!1},x.isModalFocused=function(a,b){if(a&&b){var c=b.value.modalDomEl;if(c&&c.length)return(a.target||a.srcElement)===c[0]}return!1},x.isFocusInFirstItem=function(a,b){return b.length>0?(a.target||a.srcElement)===b[0]:!1},x.isFocusInLastItem=function(a,b){return b.length>0?(a.target||a.srcElement)===b[b.length-1]:!1},x.loadFocusElementList=function(a){if(a){var b=a.value.modalDomEl;if(b&&b.length){var c=b[0].querySelectorAll(A);return c?Array.prototype.filter.call(c,function(a){return j(a)}):c}}},x}]).provider("$uibModal",function(){var a={options:{animation:!0,backdrop:!0,keyboard:!0},$get:["$rootScope","$q","$document","$templateRequest","$controller","$uibResolve","$uibModalStack",function(b,c,d,e,f,g,h){function i(a){return a.template?c.when(a.template):e(angular.isFunction(a.templateUrl)?a.templateUrl():a.templateUrl)}var j={},k=null;return j.getPromiseChain=function(){return k},j.open=function(e){function j(){return r}var l=c.defer(),m=c.defer(),n=c.defer(),o=c.defer(),p={result:l.promise,opened:m.promise,closed:n.promise,rendered:o.promise,close:function(a){return h.close(p,a)},dismiss:function(a){return h.dismiss(p,a)}};if(e=angular.extend({},a.options,e),e.resolve=e.resolve||{},e.appendTo=e.appendTo||d.find("body").eq(0),!e.template&&!e.templateUrl)throw new Error("One of template or templateUrl options is required.");var q,r=c.all([i(e),g.resolve(e.resolve,{},null,null)]);return q=k=c.all([k]).then(j,j).then(function(a){var c=e.scope||b,d=c.$new();d.$close=p.close,d.$dismiss=p.dismiss,d.$on("$destroy",function(){d.$$uibDestructionScheduled||d.$dismiss("$uibUnscheduledDestruction")});var g,i,j={};e.controller&&(j.$scope=d,j.$scope.$resolve={},j.$uibModalInstance=p,angular.forEach(a[1],function(a,b){j[b]=a,j.$scope.$resolve[b]=a}),i=f(e.controller,j,!0,e.controllerAs),e.controllerAs&&e.bindToController&&(g=i.instance,g.$close=d.$close,g.$dismiss=d.$dismiss,angular.extend(g,{$resolve:j.$scope.$resolve},c)),g=i(),angular.isFunction(g.$onInit)&&g.$onInit()),h.open(p,{scope:d,deferred:l,renderDeferred:o,closedDeferred:n,content:a[0],animation:e.animation,backdrop:e.backdrop,keyboard:e.keyboard,backdropClass:e.backdropClass,windowTopClass:e.windowTopClass,windowClass:e.windowClass,windowTemplateUrl:e.windowTemplateUrl,size:e.size,openedClass:e.openedClass,appendTo:e.appendTo}),m.resolve(!0)},function(a){m.reject(a),l.reject(a)})["finally"](function(){k===q&&(k=null)}),p},j}]};return a}),angular.module("ui.bootstrap.paging",[]).factory("uibPaging",["$parse",function(a){return{create:function(b,c,d){b.setNumPages=d.numPages?a(d.numPages).assign:angular.noop,b.ngModelCtrl={$setViewValue:angular.noop},b._watchers=[],b.init=function(a,e){b.ngModelCtrl=a,b.config=e,a.$render=function(){b.render()},d.itemsPerPage?b._watchers.push(c.$parent.$watch(d.itemsPerPage,function(a){b.itemsPerPage=parseInt(a,10),c.totalPages=b.calculateTotalPages(),b.updatePage()})):b.itemsPerPage=e.itemsPerPage,c.$watch("totalItems",function(a,d){(angular.isDefined(a)||a!==d)&&(c.totalPages=b.calculateTotalPages(),b.updatePage())})},b.calculateTotalPages=function(){var a=b.itemsPerPage<1?1:Math.ceil(c.totalItems/b.itemsPerPage);return Math.max(a||0,1)},b.render=function(){c.page=parseInt(b.ngModelCtrl.$viewValue,10)||1},c.selectPage=function(a,d){d&&d.preventDefault();var e=!c.ngDisabled||!d;e&&c.page!==a&&a>0&&a<=c.totalPages&&(d&&d.target&&d.target.blur(),b.ngModelCtrl.$setViewValue(a),b.ngModelCtrl.$render())},c.getText=function(a){return c[a+"Text"]||b.config[a+"Text"]},c.noPrevious=function(){return 1===c.page},c.noNext=function(){return c.page===c.totalPages},b.updatePage=function(){b.setNumPages(c.$parent,c.totalPages),c.page>c.totalPages?c.selectPage(c.totalPages):b.ngModelCtrl.$render()},c.$on("$destroy",function(){for(;b._watchers.length;)b._watchers.shift()()})}}}]),angular.module("ui.bootstrap.pager",["ui.bootstrap.paging"]).controller("UibPagerController",["$scope","$attrs","uibPaging","uibPagerConfig",function(a,b,c,d){a.align=angular.isDefined(b.align)?a.$parent.$eval(b.align):d.align,c.create(this,a,b)}]).constant("uibPagerConfig",{itemsPerPage:10,previousText:" Previous",nextText:"Next ",align:!0}).directive("uibPager",["uibPagerConfig",function(a){return{scope:{totalItems:"=",previousText:"@",nextText:"@",ngDisabled:"="},require:["uibPager","?ngModel"],controller:"UibPagerController",controllerAs:"pager",templateUrl:function(a,b){return b.templateUrl||"uib/template/pager/pager.html"},replace:!0,link:function(b,c,d,e){var f=e[0],g=e[1];g&&f.init(g,a)}}}]),angular.module("ui.bootstrap.pagination",["ui.bootstrap.paging"]).controller("UibPaginationController",["$scope","$attrs","$parse","uibPaging","uibPaginationConfig",function(a,b,c,d,e){function f(a,b,c){return{number:a,text:b,active:c}}function g(a,b){var c=[],d=1,e=b,g=angular.isDefined(i)&&b>i;g&&(j?(d=Math.max(a-Math.floor(i/2),1),e=d+i-1,e>b&&(e=b,d=e-i+1)):(d=(Math.ceil(a/i)-1)*i+1,e=Math.min(d+i-1,b)));for(var h=d;e>=h;h++){var n=f(h,m(h),h===a);c.push(n)}if(g&&i>0&&(!j||k||l)){if(d>1){if(!l||d>3){var o=f(d-1,"...",!1);c.unshift(o)}if(l){if(3===d){var p=f(2,"2",!1);c.unshift(p)}var q=f(1,"1",!1);c.unshift(q)}}if(b>e){if(!l||b-2>e){var r=f(e+1,"...",!1);c.push(r)}if(l){if(e===b-2){var s=f(b-1,b-1,!1);c.push(s)}var t=f(b,b,!1);c.push(t)}}}return c}var h=this,i=angular.isDefined(b.maxSize)?a.$parent.$eval(b.maxSize):e.maxSize,j=angular.isDefined(b.rotate)?a.$parent.$eval(b.rotate):e.rotate,k=angular.isDefined(b.forceEllipses)?a.$parent.$eval(b.forceEllipses):e.forceEllipses,l=angular.isDefined(b.boundaryLinkNumbers)?a.$parent.$eval(b.boundaryLinkNumbers):e.boundaryLinkNumbers,m=angular.isDefined(b.pageLabel)?function(c){return a.$parent.$eval(b.pageLabel,{$page:c})}:angular.identity;a.boundaryLinks=angular.isDefined(b.boundaryLinks)?a.$parent.$eval(b.boundaryLinks):e.boundaryLinks,a.directionLinks=angular.isDefined(b.directionLinks)?a.$parent.$eval(b.directionLinks):e.directionLinks,d.create(this,a,b),b.maxSize&&h._watchers.push(a.$parent.$watch(c(b.maxSize),function(a){i=parseInt(a,10),h.render()}));var n=this.render;this.render=function(){n(),a.page>0&&a.page<=a.totalPages&&(a.pages=g(a.page,a.totalPages))}}]).constant("uibPaginationConfig",{itemsPerPage:10,boundaryLinks:!1,boundaryLinkNumbers:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0,forceEllipses:!1}).directive("uibPagination",["$parse","uibPaginationConfig",function(a,b){return{scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@",ngDisabled:"="},require:["uibPagination","?ngModel"],controller:"UibPaginationController",controllerAs:"pagination",templateUrl:function(a,b){return b.templateUrl||"uib/template/pagination/pagination.html"},replace:!0,link:function(a,c,d,e){var f=e[0],g=e[1];g&&f.init(g,b)}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.stackedMap"]).provider("$uibTooltip",function(){function a(a){var b=/[A-Z]/g,c="-";return a.replace(b,function(a,b){return(b?c:"")+a.toLowerCase()})}var b={placement:"top",placementClassPrefix:"",animation:!0,popupDelay:0,popupCloseDelay:0,useContentExp:!1},c={mouseenter:"mouseleave",click:"click",outsideClick:"outsideClick",focus:"blur",none:""},d={};this.options=function(a){angular.extend(d,a)},this.setTriggers=function(a){angular.extend(c,a)},this.$get=["$window","$compile","$timeout","$document","$uibPosition","$interpolate","$rootScope","$parse","$$stackedMap",function(e,f,g,h,i,j,k,l,m){function n(a){if(27===a.which){var b=o.top();b&&(b.value.close(),o.removeTop(),b=null)}}var o=m.createNew();return h.on("keypress",n),k.$on("$destroy",function(){h.off("keypress",n)}),function(e,k,m,n){function p(a){var b=(a||n.trigger||m).split(" "),d=b.map(function(a){return c[a]||a});return{show:b,hide:d}}n=angular.extend({},b,d,n);var q=a(e),r=j.startSymbol(),s=j.endSymbol(),t="<div "+q+'-popup uib-title="'+r+"title"+s+'" '+(n.useContentExp?'content-exp="contentExp()" ':'content="'+r+"content"+s+'" ')+'placement="'+r+"placement"+s+'" popup-class="'+r+"popupClass"+s+'" animation="animation" is-open="isOpen" origin-scope="origScope" class="uib-position-measure"></div>';return{compile:function(a,b){var c=f(t);return function(a,b,d,f){function j(){N.isOpen?q():m()}function m(){M&&!a.$eval(d[k+"Enable"])||(u(),x(),N.popupDelay?G||(G=g(r,N.popupDelay,!1)):r())}function q(){s(),N.popupCloseDelay?H||(H=g(t,N.popupCloseDelay,!1)):t()}function r(){return s(),u(),N.content?(v(),void N.$evalAsync(function(){N.isOpen=!0,y(!0),S()})):angular.noop}function s(){G&&(g.cancel(G),G=null),I&&(g.cancel(I),I=null)}function t(){N&&N.$evalAsync(function(){N&&(N.isOpen=!1,y(!1),N.animation?F||(F=g(w,150,!1)):w())})}function u(){H&&(g.cancel(H),H=null),F&&(g.cancel(F),F=null)}function v(){D||(E=N.$new(),D=c(E,function(a){K?h.find("body").append(a):b.after(a)}),z())}function w(){s(),u(),A(),D&&(D.remove(),D=null),E&&(E.$destroy(),E=null)}function x(){N.title=d[k+"Title"],Q?N.content=Q(a):N.content=d[e],N.popupClass=d[k+"Class"],N.placement=angular.isDefined(d[k+"Placement"])?d[k+"Placement"]:n.placement;var b=i.parsePlacement(N.placement);J=b[1]?b[0]+"-"+b[1]:b[0];var c=parseInt(d[k+"PopupDelay"],10),f=parseInt(d[k+"PopupCloseDelay"],10);N.popupDelay=isNaN(c)?n.popupDelay:c,N.popupCloseDelay=isNaN(f)?n.popupCloseDelay:f}function y(b){P&&angular.isFunction(P.assign)&&P.assign(a,b)}function z(){R.length=0,Q?(R.push(a.$watch(Q,function(a){N.content=a,!a&&N.isOpen&&t()})),R.push(E.$watch(function(){O||(O=!0,E.$$postDigest(function(){O=!1,N&&N.isOpen&&S()}))}))):R.push(d.$observe(e,function(a){N.content=a,!a&&N.isOpen?t():S()})),R.push(d.$observe(k+"Title",function(a){N.title=a,N.isOpen&&S()})),R.push(d.$observe(k+"Placement",function(a){N.placement=a?a:n.placement,N.isOpen&&S()}))}function A(){R.length&&(angular.forEach(R,function(a){a()}),R.length=0)}function B(a){N&&N.isOpen&&D&&(b[0].contains(a.target)||D[0].contains(a.target)||q())}function C(){var a=d[k+"Trigger"];T(),L=p(a),"none"!==L.show&&L.show.forEach(function(a,c){"outsideClick"===a?(b.on("click",j),h.on("click",B)):a===L.hide[c]?b.on(a,j):a&&(b.on(a,m),b.on(L.hide[c],q)),b.on("keypress",function(a){27===a.which&&q()})})}var D,E,F,G,H,I,J,K=angular.isDefined(n.appendToBody)?n.appendToBody:!1,L=p(void 0),M=angular.isDefined(d[k+"Enable"]),N=a.$new(!0),O=!1,P=angular.isDefined(d[k+"IsOpen"])?l(d[k+"IsOpen"]):!1,Q=n.useContentExp?l(d[e]):!1,R=[],S=function(){D&&D.html()&&(I||(I=g(function(){var a=i.positionElements(b,D,N.placement,K);D.css({top:a.top+"px",left:a.left+"px"}),D.hasClass(a.placement.split("-")[0])||(D.removeClass(J.split("-")[0]),D.addClass(a.placement.split("-")[0])),D.hasClass(n.placementClassPrefix+a.placement)||(D.removeClass(n.placementClassPrefix+J),D.addClass(n.placementClassPrefix+a.placement)),D.hasClass("uib-position-measure")?(i.positionArrow(D,a.placement),D.removeClass("uib-position-measure")):J!==a.placement&&i.positionArrow(D,a.placement),J=a.placement,I=null},0,!1)))};N.origScope=a,N.isOpen=!1,o.add(N,{close:t}),N.contentExp=function(){return N.content},d.$observe("disabled",function(a){a&&s(),a&&N.isOpen&&t()}),P&&a.$watch(P,function(a){N&&!a===N.isOpen&&j()});var T=function(){L.show.forEach(function(a){"outsideClick"===a?b.off("click",j):(b.off(a,m),b.off(a,j))}),L.hide.forEach(function(a){"outsideClick"===a?h.off("click",B):b.off(a,q)})};C();var U=a.$eval(d[k+"Animation"]);N.animation=angular.isDefined(U)?!!U:n.animation;var V,W=k+"AppendToBody";V=W in d&&void 0===d[W]?!0:a.$eval(d[W]),K=angular.isDefined(V)?V:K,a.$on("$destroy",function(){T(),w(),o.remove(N),N=null})}}}}}]}).directive("uibTooltipTemplateTransclude",["$animate","$sce","$compile","$templateRequest",function(a,b,c,d){return{link:function(e,f,g){var h,i,j,k=e.$eval(g.tooltipTemplateTranscludeScope),l=0,m=function(){i&&(i.remove(),i=null),h&&(h.$destroy(),h=null),j&&(a.leave(j).then(function(){i=null}),i=j,j=null)};e.$watch(b.parseAsResourceUrl(g.uibTooltipTemplateTransclude),function(b){var g=++l;b?(d(b,!0).then(function(d){if(g===l){var e=k.$new(),i=d,n=c(i)(e,function(b){m(),a.enter(b,f)});h=e,j=n,h.$emit("$includeContentLoaded",b)}},function(){g===l&&(m(),e.$emit("$includeContentError",b))}),e.$emit("$includeContentRequested",b)):m()}),e.$on("$destroy",m)}}}]).directive("uibTooltipClasses",["$uibPosition",function(a){return{restrict:"A",link:function(b,c,d){if(b.placement){var e=a.parsePlacement(b.placement);c.addClass(e[0])}b.popupClass&&c.addClass(b.popupClass),b.animation()&&c.addClass(d.tooltipAnimationClass)}}}]).directive("uibTooltipPopup",function(){return{replace:!0,scope:{content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"uib/template/tooltip/tooltip-popup.html"}}).directive("uibTooltip",["$uibTooltip",function(a){return a("uibTooltip","tooltip","mouseenter")}]).directive("uibTooltipTemplatePopup",function(){return{replace:!0,scope:{contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&",originScope:"&"},templateUrl:"uib/template/tooltip/tooltip-template-popup.html"}}).directive("uibTooltipTemplate",["$uibTooltip",function(a){return a("uibTooltipTemplate","tooltip","mouseenter",{useContentExp:!0})}]).directive("uibTooltipHtmlPopup",function(){return{replace:!0,scope:{contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"uib/template/tooltip/tooltip-html-popup.html"}}).directive("uibTooltipHtml",["$uibTooltip",function(a){return a("uibTooltipHtml","tooltip","mouseenter",{useContentExp:!0})}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("uibPopoverTemplatePopup",function(){return{replace:!0,scope:{uibTitle:"@",contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&",originScope:"&"},templateUrl:"uib/template/popover/popover-template.html"}}).directive("uibPopoverTemplate",["$uibTooltip",function(a){return a("uibPopoverTemplate","popover","click",{useContentExp:!0})}]).directive("uibPopoverHtmlPopup",function(){return{replace:!0,scope:{contentExp:"&",uibTitle:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"uib/template/popover/popover-html.html"}}).directive("uibPopoverHtml",["$uibTooltip",function(a){return a("uibPopoverHtml","popover","click",{useContentExp:!0})}]).directive("uibPopoverPopup",function(){return{replace:!0,scope:{uibTitle:"@",content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"uib/template/popover/popover.html"}}).directive("uibPopover",["$uibTooltip",function(a){return a("uibPopover","popover","click")}]),angular.module("ui.bootstrap.progressbar",[]).constant("uibProgressConfig",{animate:!0,max:100}).controller("UibProgressController",["$scope","$attrs","uibProgressConfig",function(a,b,c){function d(){return angular.isDefined(a.maxParam)?a.maxParam:c.max}var e=this,f=angular.isDefined(b.animate)?a.$parent.$eval(b.animate):c.animate;this.bars=[],a.max=d(),this.addBar=function(a,b,c){f||b.css({transition:"none"}),this.bars.push(a),a.max=d(),a.title=c&&angular.isDefined(c.title)?c.title:"progressbar",a.$watch("value",function(b){a.recalculatePercentage()}),a.recalculatePercentage=function(){var b=e.bars.reduce(function(a,b){return b.percent=+(100*b.value/b.max).toFixed(2),a+b.percent},0);b>100&&(a.percent-=b-100)},a.$on("$destroy",function(){b=null,e.removeBar(a)})},this.removeBar=function(a){this.bars.splice(this.bars.indexOf(a),1),this.bars.forEach(function(a){a.recalculatePercentage()})},a.$watch("maxParam",function(a){e.bars.forEach(function(a){a.max=d(),a.recalculatePercentage()})})}]).directive("uibProgress",function(){return{replace:!0,transclude:!0,controller:"UibProgressController",require:"uibProgress",scope:{maxParam:"=?max"},templateUrl:"uib/template/progressbar/progress.html"}}).directive("uibBar",function(){return{replace:!0,transclude:!0,require:"^uibProgress",scope:{value:"=",type:"@"},templateUrl:"uib/template/progressbar/bar.html",link:function(a,b,c,d){d.addBar(a,b,c)}}}).directive("uibProgressbar",function(){return{replace:!0,transclude:!0,controller:"UibProgressController",scope:{value:"=",maxParam:"=?max",type:"@"},templateUrl:"uib/template/progressbar/progressbar.html",link:function(a,b,c,d){d.addBar(a,angular.element(b.children()[0]),{title:c.title})}}}),angular.module("ui.bootstrap.rating",[]).constant("uibRatingConfig",{max:5,stateOn:null,stateOff:null,enableReset:!0,titles:["one","two","three","four","five"]}).controller("UibRatingController",["$scope","$attrs","uibRatingConfig",function(a,b,c){var d={$setViewValue:angular.noop},e=this;this.init=function(e){d=e,d.$render=this.render,d.$formatters.push(function(a){return angular.isNumber(a)&&a<<0!==a&&(a=Math.round(a)),a}),this.stateOn=angular.isDefined(b.stateOn)?a.$parent.$eval(b.stateOn):c.stateOn,this.stateOff=angular.isDefined(b.stateOff)?a.$parent.$eval(b.stateOff):c.stateOff,this.enableReset=angular.isDefined(b.enableReset)?a.$parent.$eval(b.enableReset):c.enableReset;var f=angular.isDefined(b.titles)?a.$parent.$eval(b.titles):c.titles;this.titles=angular.isArray(f)&&f.length>0?f:c.titles;var g=angular.isDefined(b.ratingStates)?a.$parent.$eval(b.ratingStates):new Array(angular.isDefined(b.max)?a.$parent.$eval(b.max):c.max);a.range=this.buildTemplateObjects(g)},this.buildTemplateObjects=function(a){for(var b=0,c=a.length;c>b;b++)a[b]=angular.extend({index:b},{stateOn:this.stateOn,stateOff:this.stateOff,title:this.getTitle(b)},a[b]);return a},this.getTitle=function(a){return a>=this.titles.length?a+1:this.titles[a]},a.rate=function(b){if(!a.readonly&&b>=0&&b<=a.range.length){var c=e.enableReset&&d.$viewValue===b?0:b;d.$setViewValue(c),d.$render()}},a.enter=function(b){a.readonly||(a.value=b),a.onHover({value:b})},a.reset=function(){a.value=d.$viewValue,a.onLeave()},a.onKeydown=function(b){/(37|38|39|40)/.test(b.which)&&(b.preventDefault(),b.stopPropagation(),a.rate(a.value+(38===b.which||39===b.which?1:-1)))},this.render=function(){a.value=d.$viewValue,a.title=e.getTitle(a.value-1)}}]).directive("uibRating",function(){return{require:["uibRating","ngModel"],scope:{readonly:"=?readOnly",onHover:"&",onLeave:"&"},controller:"UibRatingController",templateUrl:"uib/template/rating/rating.html",replace:!0,link:function(a,b,c,d){var e=d[0],f=d[1];e.init(f)}}}),angular.module("ui.bootstrap.tabs",[]).controller("UibTabsetController",["$scope",function(a){function b(a){for(var b=0;b<d.tabs.length;b++)if(d.tabs[b].index===a)return b}var c,d=this;d.tabs=[],d.select=function(a,f){if(!e){var g=b(c),h=d.tabs[g];if(h){if(h.tab.onDeselect({$event:f,$selectedIndex:a}),f&&f.isDefaultPrevented())return;h.tab.active=!1}var i=d.tabs[a];i?(i.tab.onSelect({$event:f}),i.tab.active=!0,d.active=i.index,c=i.index):!i&&angular.isDefined(c)&&(d.active=null,c=null)}},d.addTab=function(a){if(d.tabs.push({tab:a,index:a.index}),d.tabs.sort(function(a,b){return a.index>b.index?1:a.index<b.index?-1:0}),a.index===d.active||!angular.isDefined(d.active)&&1===d.tabs.length){var c=b(a.index);d.select(c)}},d.removeTab=function(a){for(var b,c=0;c<d.tabs.length;c++)if(d.tabs[c].tab===a){b=c;break}if(d.tabs[b].index===d.active){var e=b===d.tabs.length-1?b-1:b+1%d.tabs.length;d.select(e)}d.tabs.splice(b,1)},a.$watch("tabset.active",function(a){angular.isDefined(a)&&a!==c&&d.select(b(a))});var e;a.$on("$destroy",function(){e=!0})}]).directive("uibTabset",function(){return{transclude:!0,replace:!0,scope:{},bindToController:{active:"=?",type:"@"},controller:"UibTabsetController",controllerAs:"tabset",templateUrl:function(a,b){return b.templateUrl||"uib/template/tabs/tabset.html"},link:function(a,b,c){a.vertical=angular.isDefined(c.vertical)?a.$parent.$eval(c.vertical):!1,a.justified=angular.isDefined(c.justified)?a.$parent.$eval(c.justified):!1}}}).directive("uibTab",["$parse",function(a){return{require:"^uibTabset",replace:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/tabs/tab.html"},transclude:!0,scope:{heading:"@",index:"=?",classes:"@?",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},controllerAs:"tab",link:function(b,c,d,e,f){b.disabled=!1,d.disable&&b.$parent.$watch(a(d.disable),function(a){b.disabled=!!a}),angular.isUndefined(d.index)&&(e.tabs&&e.tabs.length?b.index=Math.max.apply(null,e.tabs.map(function(a){return a.index}))+1:b.index=0),angular.isUndefined(d.classes)&&(b.classes=""),b.select=function(a){if(!b.disabled){for(var c,d=0;d<e.tabs.length;d++)if(e.tabs[d].tab===b){c=d;break}e.select(c,a)}},e.addTab(b),b.$on("$destroy",function(){e.removeTab(b)}),b.$transcludeFn=f}}}]).directive("uibTabHeadingTransclude",function(){return{restrict:"A",require:"^uibTab",link:function(a,b){a.$watch("headingElement",function(a){a&&(b.html(""),b.append(a))})}}}).directive("uibTabContentTransclude",function(){function a(a){return a.tagName&&(a.hasAttribute("uib-tab-heading")||a.hasAttribute("data-uib-tab-heading")||a.hasAttribute("x-uib-tab-heading")||"uib-tab-heading"===a.tagName.toLowerCase()||"data-uib-tab-heading"===a.tagName.toLowerCase()||"x-uib-tab-heading"===a.tagName.toLowerCase()||"uib:tab-heading"===a.tagName.toLowerCase())}return{restrict:"A",require:"^uibTabset",link:function(b,c,d){var e=b.$eval(d.uibTabContentTransclude).tab;e.$transcludeFn(e.$parent,function(b){angular.forEach(b,function(b){a(b)?e.headingElement=b:c.append(b)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("uibTimepickerConfig",{hourStep:1,minuteStep:1,secondStep:1,showMeridian:!0,showSeconds:!1,meridians:null,readonlyInput:!1,mousewheel:!0,arrowkeys:!0,showSpinners:!0,templateUrl:"uib/template/timepicker/timepicker.html"}).controller("UibTimepickerController",["$scope","$element","$attrs","$parse","$log","$locale","uibTimepickerConfig",function(a,b,c,d,e,f,g){function h(){var b=+a.hours,c=a.showMeridian?b>0&&13>b:b>=0&&24>b;return c&&""!==a.hours?(a.showMeridian&&(12===b&&(b=0),a.meridian===v[1]&&(b+=12)),b):void 0}function i(){var b=+a.minutes,c=b>=0&&60>b;return c&&""!==a.minutes?b:void 0}function j(){var b=+a.seconds;return b>=0&&60>b?b:void 0}function k(a,b){return null===a?"":angular.isDefined(a)&&a.toString().length<2&&!b?"0"+a:a.toString()}function l(a){m(),u.$setViewValue(new Date(s)),n(a)}function m(){u.$setValidity("time",!0),a.invalidHours=!1,a.invalidMinutes=!1,a.invalidSeconds=!1}function n(b){if(u.$modelValue){var c=s.getHours(),d=s.getMinutes(),e=s.getSeconds();a.showMeridian&&(c=0===c||12===c?12:c%12),a.hours="h"===b?c:k(c,!w),"m"!==b&&(a.minutes=k(d)),a.meridian=s.getHours()<12?v[0]:v[1],"s"!==b&&(a.seconds=k(e)),a.meridian=s.getHours()<12?v[0]:v[1]}else a.hours=null,a.minutes=null,a.seconds=null,a.meridian=v[0]}function o(a){s=q(s,a),l()}function p(a,b){return q(a,60*b)}function q(a,b){var c=new Date(a.getTime()+1e3*b),d=new Date(a);return d.setHours(c.getHours(),c.getMinutes(),c.getSeconds()),d}function r(){return(null===a.hours||""===a.hours)&&(null===a.minutes||""===a.minutes)&&(!a.showSeconds||a.showSeconds&&(null===a.seconds||""===a.seconds))}var s=new Date,t=[],u={$setViewValue:angular.noop},v=angular.isDefined(c.meridians)?a.$parent.$eval(c.meridians):g.meridians||f.DATETIME_FORMATS.AMPMS,w=angular.isDefined(c.padHours)?a.$parent.$eval(c.padHours):!0;a.tabindex=angular.isDefined(c.tabindex)?c.tabindex:0,b.removeAttr("tabindex"),this.init=function(b,d){u=b,u.$render=this.render,u.$formatters.unshift(function(a){return a?new Date(a):null});var e=d.eq(0),f=d.eq(1),h=d.eq(2),i=angular.isDefined(c.mousewheel)?a.$parent.$eval(c.mousewheel):g.mousewheel;i&&this.setupMousewheelEvents(e,f,h);var j=angular.isDefined(c.arrowkeys)?a.$parent.$eval(c.arrowkeys):g.arrowkeys;j&&this.setupArrowkeyEvents(e,f,h),a.readonlyInput=angular.isDefined(c.readonlyInput)?a.$parent.$eval(c.readonlyInput):g.readonlyInput,this.setupInputEvents(e,f,h)};var x=g.hourStep;c.hourStep&&t.push(a.$parent.$watch(d(c.hourStep),function(a){x=+a}));var y=g.minuteStep;c.minuteStep&&t.push(a.$parent.$watch(d(c.minuteStep),function(a){y=+a}));var z;t.push(a.$parent.$watch(d(c.min),function(a){var b=new Date(a);z=isNaN(b)?void 0:b}));var A;t.push(a.$parent.$watch(d(c.max),function(a){var b=new Date(a);A=isNaN(b)?void 0:b}));var B=!1;c.ngDisabled&&t.push(a.$parent.$watch(d(c.ngDisabled),function(a){B=a})),a.noIncrementHours=function(){var a=p(s,60*x);return B||a>A||s>a&&z>a},a.noDecrementHours=function(){var a=p(s,60*-x);return B||z>a||a>s&&a>A},a.noIncrementMinutes=function(){var a=p(s,y);return B||a>A||s>a&&z>a},a.noDecrementMinutes=function(){var a=p(s,-y);return B||z>a||a>s&&a>A},a.noIncrementSeconds=function(){var a=q(s,C);return B||a>A||s>a&&z>a},a.noDecrementSeconds=function(){var a=q(s,-C);return B||z>a||a>s&&a>A},a.noToggleMeridian=function(){return s.getHours()<12?B||p(s,720)>A:B||p(s,-720)<z};var C=g.secondStep;c.secondStep&&t.push(a.$parent.$watch(d(c.secondStep),function(a){C=+a})),a.showSeconds=g.showSeconds,c.showSeconds&&t.push(a.$parent.$watch(d(c.showSeconds),function(b){a.showSeconds=!!b})),a.showMeridian=g.showMeridian,c.showMeridian&&t.push(a.$parent.$watch(d(c.showMeridian),function(b){if(a.showMeridian=!!b,u.$error.time){var c=h(),d=i();angular.isDefined(c)&&angular.isDefined(d)&&(s.setHours(c),l())}else n()})),this.setupMousewheelEvents=function(b,c,d){var e=function(a){a.originalEvent&&(a=a.originalEvent);var b=a.wheelDelta?a.wheelDelta:-a.deltaY;return a.detail||b>0};b.bind("mousewheel wheel",function(b){B||a.$apply(e(b)?a.incrementHours():a.decrementHours()),b.preventDefault()}),c.bind("mousewheel wheel",function(b){B||a.$apply(e(b)?a.incrementMinutes():a.decrementMinutes()),b.preventDefault()}),d.bind("mousewheel wheel",function(b){B||a.$apply(e(b)?a.incrementSeconds():a.decrementSeconds()),b.preventDefault()})},this.setupArrowkeyEvents=function(b,c,d){b.bind("keydown",function(b){B||(38===b.which?(b.preventDefault(),a.incrementHours(),a.$apply()):40===b.which&&(b.preventDefault(),a.decrementHours(),a.$apply()))}),c.bind("keydown",function(b){B||(38===b.which?(b.preventDefault(),a.incrementMinutes(),a.$apply()):40===b.which&&(b.preventDefault(),a.decrementMinutes(),a.$apply()))}),d.bind("keydown",function(b){B||(38===b.which?(b.preventDefault(),a.incrementSeconds(),a.$apply()):40===b.which&&(b.preventDefault(),a.decrementSeconds(),a.$apply()))})},this.setupInputEvents=function(b,c,d){if(a.readonlyInput)return a.updateHours=angular.noop,a.updateMinutes=angular.noop,void(a.updateSeconds=angular.noop);var e=function(b,c,d){u.$setViewValue(null),u.$setValidity("time",!1),angular.isDefined(b)&&(a.invalidHours=b),angular.isDefined(c)&&(a.invalidMinutes=c),angular.isDefined(d)&&(a.invalidSeconds=d)};a.updateHours=function(){var a=h(),b=i();u.$setDirty(),angular.isDefined(a)&&angular.isDefined(b)?(s.setHours(a),s.setMinutes(b),z>s||s>A?e(!0):l("h")):e(!0)},b.bind("blur",function(b){u.$setTouched(),r()?m():null===a.hours||""===a.hours?e(!0):!a.invalidHours&&a.hours<10&&a.$apply(function(){a.hours=k(a.hours,!w)})}),a.updateMinutes=function(){var a=i(),b=h();u.$setDirty(),angular.isDefined(a)&&angular.isDefined(b)?(s.setHours(b),s.setMinutes(a),z>s||s>A?e(void 0,!0):l("m")):e(void 0,!0)},c.bind("blur",function(b){u.$setTouched(),r()?m():null===a.minutes?e(void 0,!0):!a.invalidMinutes&&a.minutes<10&&a.$apply(function(){a.minutes=k(a.minutes)})}),a.updateSeconds=function(){var a=j();u.$setDirty(),angular.isDefined(a)?(s.setSeconds(a),l("s")):e(void 0,void 0,!0)},d.bind("blur",function(b){r()?m():!a.invalidSeconds&&a.seconds<10&&a.$apply(function(){a.seconds=k(a.seconds)})})},this.render=function(){var b=u.$viewValue;isNaN(b)?(u.$setValidity("time",!1),e.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(b&&(s=b),z>s||s>A?(u.$setValidity("time",!1),a.invalidHours=!0,a.invalidMinutes=!0):m(),n())},a.showSpinners=angular.isDefined(c.showSpinners)?a.$parent.$eval(c.showSpinners):g.showSpinners,a.incrementHours=function(){a.noIncrementHours()||o(60*x*60)},a.decrementHours=function(){a.noDecrementHours()||o(60*-x*60)},a.incrementMinutes=function(){a.noIncrementMinutes()||o(60*y)},a.decrementMinutes=function(){a.noDecrementMinutes()||o(60*-y)},a.incrementSeconds=function(){a.noIncrementSeconds()||o(C)},a.decrementSeconds=function(){a.noDecrementSeconds()||o(-C)},a.toggleMeridian=function(){var b=i(),c=h();a.noToggleMeridian()||(angular.isDefined(b)&&angular.isDefined(c)?o(720*(s.getHours()<12?60:-60)):a.meridian=a.meridian===v[0]?v[1]:v[0])},a.blur=function(){u.$setTouched()},a.$on("$destroy",function(){for(;t.length;)t.shift()()})}]).directive("uibTimepicker",["uibTimepickerConfig",function(a){return{require:["uibTimepicker","?^ngModel"],controller:"UibTimepickerController",controllerAs:"timepicker",replace:!0,scope:{},templateUrl:function(b,c){return c.templateUrl||a.templateUrl},link:function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f,b.find("input"))}}}]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.debounce","ui.bootstrap.position"]).factory("uibTypeaheadParser",["$parse",function(a){var b=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(c){var d=c.match(b);if(!d)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+c+'".');return{itemName:d[3],source:a(d[4]),viewMapper:a(d[2]||d[1]),modelMapper:a(d[1])}}}}]).controller("UibTypeaheadController",["$scope","$element","$attrs","$compile","$parse","$q","$timeout","$document","$window","$rootScope","$$debounce","$uibPosition","uibTypeaheadParser",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(){O.moveInProgress||(O.moveInProgress=!0,O.$digest()),Z()}function o(){O.position=E?l.offset(b):l.position(b),O.position.top+=b.prop("offsetHeight")}var p,q,r=[9,13,27,38,40],s=200,t=a.$eval(c.typeaheadMinLength);t||0===t||(t=1),a.$watch(c.typeaheadMinLength,function(a){t=a||0===a?a:1});var u=a.$eval(c.typeaheadWaitMs)||0,v=a.$eval(c.typeaheadEditable)!==!1;a.$watch(c.typeaheadEditable,function(a){v=a!==!1});var w,x,y=e(c.typeaheadLoading).assign||angular.noop,z=c.typeaheadShouldSelect?e(c.typeaheadShouldSelect):function(a,b){var c=b.$event;return 13===c.which||9===c.which},A=e(c.typeaheadOnSelect),B=angular.isDefined(c.typeaheadSelectOnBlur)?a.$eval(c.typeaheadSelectOnBlur):!1,C=e(c.typeaheadNoResults).assign||angular.noop,D=c.typeaheadInputFormatter?e(c.typeaheadInputFormatter):void 0,E=c.typeaheadAppendToBody?a.$eval(c.typeaheadAppendToBody):!1,F=c.typeaheadAppendTo?a.$eval(c.typeaheadAppendTo):null,G=a.$eval(c.typeaheadFocusFirst)!==!1,H=c.typeaheadSelectOnExact?a.$eval(c.typeaheadSelectOnExact):!1,I=e(c.typeaheadIsOpen).assign||angular.noop,J=a.$eval(c.typeaheadShowHint)||!1,K=e(c.ngModel),L=e(c.ngModel+"($$$p)"),M=function(b,c){
return angular.isFunction(K(a))&&q&&q.$options&&q.$options.getterSetter?L(b,{$$$p:c}):K.assign(b,c)},N=m.parse(c.uibTypeahead),O=a.$new(),P=a.$on("$destroy",function(){O.$destroy()});O.$on("$destroy",P);var Q="typeahead-"+O.$id+"-"+Math.floor(1e4*Math.random());b.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":Q});var R,S;J&&(R=angular.element("<div></div>"),R.css("position","relative"),b.after(R),S=b.clone(),S.attr("placeholder",""),S.attr("tabindex","-1"),S.val(""),S.css({position:"absolute",top:"0px",left:"0px","border-color":"transparent","box-shadow":"none",opacity:1,background:"none 0% 0% / auto repeat scroll padding-box border-box rgb(255, 255, 255)",color:"#999"}),b.css({position:"relative","vertical-align":"top","background-color":"transparent"}),R.append(S),S.after(b));var T=angular.element("<div uib-typeahead-popup></div>");T.attr({id:Q,matches:"matches",active:"activeIdx",select:"select(activeIdx, evt)","move-in-progress":"moveInProgress",query:"query",position:"position","assign-is-open":"assignIsOpen(isOpen)",debounce:"debounceUpdate"}),angular.isDefined(c.typeaheadTemplateUrl)&&T.attr("template-url",c.typeaheadTemplateUrl),angular.isDefined(c.typeaheadPopupTemplateUrl)&&T.attr("popup-template-url",c.typeaheadPopupTemplateUrl);var U=function(){J&&S.val("")},V=function(){O.matches=[],O.activeIdx=-1,b.attr("aria-expanded",!1),U()},W=function(a){return Q+"-option-"+a};O.$watch("activeIdx",function(a){0>a?b.removeAttr("aria-activedescendant"):b.attr("aria-activedescendant",W(a))});var X=function(a,b){return O.matches.length>b&&a?a.toUpperCase()===O.matches[b].label.toUpperCase():!1},Y=function(c,d){var e={$viewValue:c};y(a,!0),C(a,!1),f.when(N.source(a,e)).then(function(f){var g=c===p.$viewValue;if(g&&w)if(f&&f.length>0){O.activeIdx=G?0:-1,C(a,!1),O.matches.length=0;for(var h=0;h<f.length;h++)e[N.itemName]=f[h],O.matches.push({id:W(h),label:N.viewMapper(O,e),model:f[h]});if(O.query=c,o(),b.attr("aria-expanded",!0),H&&1===O.matches.length&&X(c,0)&&(angular.isNumber(O.debounceUpdate)||angular.isObject(O.debounceUpdate)?k(function(){O.select(0,d)},angular.isNumber(O.debounceUpdate)?O.debounceUpdate:O.debounceUpdate["default"]):O.select(0,d)),J){var i=O.matches[0].label;angular.isString(c)&&c.length>0&&i.slice(0,c.length).toUpperCase()===c.toUpperCase()?S.val(c+i.slice(c.length)):S.val("")}}else V(),C(a,!0);g&&y(a,!1)},function(){V(),y(a,!1),C(a,!0)})};E&&(angular.element(i).on("resize",n),h.find("body").on("scroll",n));var Z=k(function(){O.matches.length&&o(),O.moveInProgress=!1},s);O.moveInProgress=!1,O.query=void 0;var $,_=function(a){$=g(function(){Y(a)},u)},aa=function(){$&&g.cancel($)};V(),O.assignIsOpen=function(b){I(a,b)},O.select=function(d,e){var f,h,i={};x=!0,i[N.itemName]=h=O.matches[d].model,f=N.modelMapper(a,i),M(a,f),p.$setValidity("editable",!0),p.$setValidity("parse",!0),A(a,{$item:h,$model:f,$label:N.viewMapper(a,i),$event:e}),V(),O.$eval(c.typeaheadFocusOnSelect)!==!1&&g(function(){b[0].focus()},0,!1)},b.on("keydown",function(b){if(0!==O.matches.length&&-1!==r.indexOf(b.which)){var c=z(a,{$event:b});if(-1===O.activeIdx&&c||9===b.which&&b.shiftKey)return V(),void O.$digest();b.preventDefault();var d;switch(b.which){case 27:b.stopPropagation(),V(),a.$digest();break;case 38:O.activeIdx=(O.activeIdx>0?O.activeIdx:O.matches.length)-1,O.$digest(),d=T.find("li")[O.activeIdx],d.parentNode.scrollTop=d.offsetTop;break;case 40:O.activeIdx=(O.activeIdx+1)%O.matches.length,O.$digest(),d=T.find("li")[O.activeIdx],d.parentNode.scrollTop=d.offsetTop;break;default:c&&O.$apply(function(){angular.isNumber(O.debounceUpdate)||angular.isObject(O.debounceUpdate)?k(function(){O.select(O.activeIdx,b)},angular.isNumber(O.debounceUpdate)?O.debounceUpdate:O.debounceUpdate["default"]):O.select(O.activeIdx,b)})}}}),b.bind("focus",function(a){w=!0,0!==t||p.$viewValue||g(function(){Y(p.$viewValue,a)},0)}),b.bind("blur",function(a){B&&O.matches.length&&-1!==O.activeIdx&&!x&&(x=!0,O.$apply(function(){angular.isObject(O.debounceUpdate)&&angular.isNumber(O.debounceUpdate.blur)?k(function(){O.select(O.activeIdx,a)},O.debounceUpdate.blur):O.select(O.activeIdx,a)})),!v&&p.$error.editable&&(p.$setViewValue(),p.$setValidity("editable",!0),p.$setValidity("parse",!0),b.val("")),w=!1,x=!1});var ba=function(c){b[0]!==c.target&&3!==c.which&&0!==O.matches.length&&(V(),j.$$phase||a.$digest())};h.on("click",ba),a.$on("$destroy",function(){h.off("click",ba),(E||F)&&ca.remove(),E&&(angular.element(i).off("resize",n),h.find("body").off("scroll",n)),T.remove(),J&&R.remove()});var ca=d(T)(O);E?h.find("body").append(ca):F?angular.element(F).eq(0).append(ca):b.after(ca),this.init=function(b,c){p=b,q=c,O.debounceUpdate=p.$options&&e(p.$options.debounce)(a),p.$parsers.unshift(function(b){return w=!0,0===t||b&&b.length>=t?u>0?(aa(),_(b)):Y(b):(y(a,!1),aa(),V()),v?b:b?void p.$setValidity("editable",!1):(p.$setValidity("editable",!0),null)}),p.$formatters.push(function(b){var c,d,e={};return v||p.$setValidity("editable",!0),D?(e.$model=b,D(a,e)):(e[N.itemName]=b,c=N.viewMapper(a,e),e[N.itemName]=void 0,d=N.viewMapper(a,e),c!==d?c:b)})}}]).directive("uibTypeahead",function(){return{controller:"UibTypeaheadController",require:["ngModel","^?ngModelOptions","uibTypeahead"],link:function(a,b,c,d){d[2].init(d[0],d[1])}}}).directive("uibTypeaheadPopup",["$$debounce",function(a){return{scope:{matches:"=",query:"=",active:"=",position:"&",moveInProgress:"=",select:"&",assignIsOpen:"&",debounce:"&"},replace:!0,templateUrl:function(a,b){return b.popupTemplateUrl||"uib/template/typeahead/typeahead-popup.html"},link:function(b,c,d){b.templateUrl=d.templateUrl,b.isOpen=function(){var a=b.matches.length>0;return b.assignIsOpen({isOpen:a}),a},b.isActive=function(a){return b.active===a},b.selectActive=function(a){b.active=a},b.selectMatch=function(c,d){var e=b.debounce();angular.isNumber(e)||angular.isObject(e)?a(function(){b.select({activeIdx:c,evt:d})},angular.isNumber(e)?e:e["default"]):b.select({activeIdx:c,evt:d})}}}}]).directive("uibTypeaheadMatch",["$templateRequest","$compile","$parse",function(a,b,c){return{scope:{index:"=",match:"=",query:"="},link:function(d,e,f){var g=c(f.templateUrl)(d.$parent)||"uib/template/typeahead/typeahead-match.html";a(g).then(function(a){var c=angular.element(a.trim());e.replaceWith(c),b(c)(d)})}}}]).filter("uibTypeaheadHighlight",["$sce","$injector","$log",function(a,b,c){function d(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}function e(a){return/<.*>/g.test(a)}var f;return f=b.has("$sanitize"),function(b,g){return!f&&e(b)&&c.warn("Unsafe use of typeahead please use ngSanitize"),b=g?(""+b).replace(new RegExp(d(g),"gi"),"<strong>$&</strong>"):b,f||(b=a.trustAsHtml(b)),b}}]),angular.module("uib/template/accordion/accordion-group.html",[]).run(["$templateCache",function(a){a.put("uib/template/accordion/accordion-group.html",'<div class="panel" ng-class="panelClass || \'panel-default\'">\n  <div role="tab" id="{{::headingId}}" aria-selected="{{isOpen}}" class="panel-heading" ng-keypress="toggleOpen($event)">\n    <h4 class="panel-title">\n      <a role="button" data-toggle="collapse" href aria-expanded="{{isOpen}}" aria-controls="{{::panelId}}" tabindex="0" class="accordion-toggle" ng-click="toggleOpen()" uib-accordion-transclude="heading"><span uib-accordion-header ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n    </h4>\n  </div>\n  <div id="{{::panelId}}" aria-labelledby="{{::headingId}}" aria-hidden="{{!isOpen}}" role="tabpanel" class="panel-collapse collapse" uib-collapse="!isOpen">\n    <div class="panel-body" ng-transclude></div>\n  </div>\n</div>\n')}]),angular.module("uib/template/accordion/accordion.html",[]).run(["$templateCache",function(a){a.put("uib/template/accordion/accordion.html",'<div role="tablist" class="panel-group" ng-transclude></div>')}]),angular.module("uib/template/alert/alert.html",[]).run(["$templateCache",function(a){a.put("uib/template/alert/alert.html",'<div class="alert" ng-class="[\'alert-\' + (type || \'warning\'), closeable ? \'alert-dismissible\' : null]" role="alert">\n    <button ng-show="closeable" type="button" class="close" ng-click="close({$event: $event})">\n        <span aria-hidden="true">&times;</span>\n        <span class="sr-only">Close</span>\n    </button>\n    <div ng-transclude></div>\n</div>\n')}]),angular.module("uib/template/carousel/carousel.html",[]).run(["$templateCache",function(a){a.put("uib/template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel" ng-swipe-right="prev()" ng-swipe-left="next()">\n  <div class="carousel-inner" ng-transclude></div>\n  <a role="button" href class="left carousel-control" ng-click="prev()" ng-class="{ disabled: isPrevDisabled() }" ng-show="slides.length > 1">\n    <span aria-hidden="true" class="glyphicon glyphicon-chevron-left"></span>\n    <span class="sr-only">previous</span>\n  </a>\n  <a role="button" href class="right carousel-control" ng-click="next()" ng-class="{ disabled: isNextDisabled() }" ng-show="slides.length > 1">\n    <span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>\n    <span class="sr-only">next</span>\n  </a>\n  <ol class="carousel-indicators" ng-show="slides.length > 1">\n    <li ng-repeat="slide in slides | orderBy:indexOfSlide track by $index" ng-class="{ active: isActive(slide) }" ng-click="select(slide)">\n      <span class="sr-only">slide {{ $index + 1 }} of {{ slides.length }}<span ng-if="isActive(slide)">, currently active</span></span>\n    </li>\n  </ol>\n</div>\n')}]),angular.module("uib/template/carousel/slide.html",[]).run(["$templateCache",function(a){a.put("uib/template/carousel/slide.html",'<div ng-class="{\n    \'active\': active\n  }" class="item text-center" ng-transclude></div>\n')}]),angular.module("uib/template/datepicker/datepicker.html",[]).run(["$templateCache",function(a){a.put("uib/template/datepicker/datepicker.html",'<div class="uib-datepicker" ng-switch="datepickerMode" role="application" ng-keydown="keydown($event)">\n  <uib-daypicker ng-switch-when="day" tabindex="0"></uib-daypicker>\n  <uib-monthpicker ng-switch-when="month" tabindex="0"></uib-monthpicker>\n  <uib-yearpicker ng-switch-when="year" tabindex="0"></uib-yearpicker>\n</div>\n')}]),angular.module("uib/template/datepicker/day.html",[]).run(["$templateCache",function(a){a.put("uib/template/datepicker/day.html",'<table class="uib-daypicker" role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{::5 + showWeeks}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n    <tr>\n      <th ng-if="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in ::labels track by $index" class="text-center"><small aria-label="{{::label.full}}">{{::label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-weeks" ng-repeat="row in rows track by $index">\n      <td ng-if="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row" class="uib-day text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default btn-sm"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/datepicker/month.html",[]).run(["$templateCache",function(a){a.put("uib/template/datepicker/month.html",'<table class="uib-monthpicker" role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-months" ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row" class="uib-month text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/datepicker/year.html",[]).run(["$templateCache",function(a){a.put("uib/template/datepicker/year.html",'<table class="uib-yearpicker" role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{::columns - 2}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-years" ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row" class="uib-year text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/datepickerPopup/popup.html",[]).run(["$templateCache",function(a){a.put("uib/template/datepickerPopup/popup.html",'<div>\n  <ul class="uib-datepicker-popup dropdown-menu uib-position-measure" dropdown-nested ng-if="isOpen" ng-keydown="keydown($event)" ng-click="$event.stopPropagation()">\n    <li ng-transclude></li>\n    <li ng-if="showButtonBar" class="uib-button-bar">\n      <span class="btn-group pull-left">\n        <button type="button" class="btn btn-sm btn-info uib-datepicker-current" ng-click="select(\'today\', $event)" ng-disabled="isDisabled(\'today\')">{{ getText(\'current\') }}</button>\n        <button type="button" class="btn btn-sm btn-danger uib-clear" ng-click="select(null, $event)">{{ getText(\'clear\') }}</button>\n      </span>\n      <button type="button" class="btn btn-sm btn-success pull-right uib-close" ng-click="close($event)">{{ getText(\'close\') }}</button>\n    </li>\n  </ul>\n</div>\n')}]),angular.module("uib/template/modal/backdrop.html",[]).run(["$templateCache",function(a){a.put("uib/template/modal/backdrop.html",'<div class="modal-backdrop"\n     uib-modal-animation-class="fade"\n     modal-in-class="in"\n     ng-style="{\'z-index\': 1040 + (index && 1 || 0) + index*10}"\n></div>\n')}]),angular.module("uib/template/modal/window.html",[]).run(["$templateCache",function(a){a.put("uib/template/modal/window.html",'<div modal-render="{{$isRendered}}" tabindex="-1" role="dialog" class="modal"\n    uib-modal-animation-class="fade"\n    modal-in-class="in"\n    ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}">\n    <div class="modal-dialog {{size ? \'modal-\' + size : \'\'}}"><div class="modal-content" uib-modal-transclude></div></div>\n</div>\n')}]),angular.module("uib/template/pager/pager.html",[]).run(["$templateCache",function(a){a.put("uib/template/pager/pager.html",'<ul class="pager">\n  <li ng-class="{disabled: noPrevious()||ngDisabled, previous: align}"><a href ng-click="selectPage(page - 1, $event)">{{::getText(\'previous\')}}</a></li>\n  <li ng-class="{disabled: noNext()||ngDisabled, next: align}"><a href ng-click="selectPage(page + 1, $event)">{{::getText(\'next\')}}</a></li>\n</ul>\n')}]),angular.module("uib/template/pagination/pagination.html",[]).run(["$templateCache",function(a){a.put("uib/template/pagination/pagination.html",'<ul class="pagination">\n  <li ng-if="::boundaryLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-first"><a href ng-click="selectPage(1, $event)">{{::getText(\'first\')}}</a></li>\n  <li ng-if="::directionLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-prev"><a href ng-click="selectPage(page - 1, $event)">{{::getText(\'previous\')}}</a></li>\n  <li ng-repeat="page in pages track by $index" ng-class="{active: page.active,disabled: ngDisabled&&!page.active}" class="pagination-page"><a href ng-click="selectPage(page.number, $event)">{{page.text}}</a></li>\n  <li ng-if="::directionLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-next"><a href ng-click="selectPage(page + 1, $event)">{{::getText(\'next\')}}</a></li>\n  <li ng-if="::boundaryLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-last"><a href ng-click="selectPage(totalPages, $event)">{{::getText(\'last\')}}</a></li>\n</ul>\n')}]),angular.module("uib/template/tooltip/tooltip-html-popup.html",[]).run(["$templateCache",function(a){a.put("uib/template/tooltip/tooltip-html-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind-html="contentExp()"></div>\n</div>\n')}]),angular.module("uib/template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(a){a.put("uib/template/tooltip/tooltip-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n')}]),angular.module("uib/template/tooltip/tooltip-template-popup.html",[]).run(["$templateCache",function(a){a.put("uib/template/tooltip/tooltip-template-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner"\n    uib-tooltip-template-transclude="contentExp()"\n    tooltip-template-transclude-scope="originScope()"></div>\n</div>\n')}]),angular.module("uib/template/popover/popover-html.html",[]).run(["$templateCache",function(a){a.put("uib/template/popover/popover-html.html",'<div class="popover"\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n      <div class="popover-content" ng-bind-html="contentExp()"></div>\n  </div>\n</div>\n')}]),angular.module("uib/template/popover/popover-template.html",[]).run(["$templateCache",function(a){a.put("uib/template/popover/popover-template.html",'<div class="popover"\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n      <div class="popover-content"\n        uib-tooltip-template-transclude="contentExp()"\n        tooltip-template-transclude-scope="originScope()"></div>\n  </div>\n</div>\n')}]),angular.module("uib/template/popover/popover.html",[]).run(["$templateCache",function(a){a.put("uib/template/popover/popover.html",'<div class="popover"\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n')}]),angular.module("uib/template/progressbar/bar.html",[]).run(["$templateCache",function(a){a.put("uib/template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n')}]),angular.module("uib/template/progressbar/progress.html",[]).run(["$templateCache",function(a){a.put("uib/template/progressbar/progress.html",'<div class="progress" ng-transclude aria-labelledby="{{::title}}"></div>')}]),angular.module("uib/template/progressbar/progressbar.html",[]).run(["$templateCache",function(a){a.put("uib/template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n</div>\n')}]),angular.module("uib/template/rating/rating.html",[]).run(["$templateCache",function(a){a.put("uib/template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}" aria-valuetext="{{title}}">\n    <span ng-repeat-start="r in range track by $index" class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    <i ng-repeat-end ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')" ng-attr-title="{{r.title}}"></i>\n</span>\n')}]),angular.module("uib/template/tabs/tab.html",[]).run(["$templateCache",function(a){a.put("uib/template/tabs/tab.html",'<li ng-class="[{active: active, disabled: disabled}, classes]" class="uib-tab nav-item">\n  <a href ng-click="select($event)" class="nav-link" uib-tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("uib/template/tabs/tabset.html",[]).run(["$templateCache",function(a){a.put("uib/template/tabs/tabset.html",'<div>\n  <ul class="nav nav-{{tabset.type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane"\n         ng-repeat="tab in tabset.tabs"\n         ng-class="{active: tabset.active === tab.index}"\n         uib-tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("uib/template/timepicker/timepicker.html",[]).run(["$templateCache",function(a){a.put("uib/template/timepicker/timepicker.html",'<table class="uib-timepicker">\n  <tbody>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td class="uib-increment hours"><a ng-click="incrementHours()" ng-class="{disabled: noIncrementHours()}" class="btn btn-link" ng-disabled="noIncrementHours()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td>&nbsp;</td>\n      <td class="uib-increment minutes"><a ng-click="incrementMinutes()" ng-class="{disabled: noIncrementMinutes()}" class="btn btn-link" ng-disabled="noIncrementMinutes()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td ng-show="showSeconds">&nbsp;</td>\n      <td ng-show="showSeconds" class="uib-increment seconds"><a ng-click="incrementSeconds()" ng-class="{disabled: noIncrementSeconds()}" class="btn btn-link" ng-disabled="noIncrementSeconds()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n    <tr>\n      <td class="form-group uib-time hours" ng-class="{\'has-error\': invalidHours}">\n        <input type="text" placeholder="HH" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementHours()" ng-blur="blur()">\n      </td>\n      <td class="uib-separator">:</td>\n      <td class="form-group uib-time minutes" ng-class="{\'has-error\': invalidMinutes}">\n        <input type="text" placeholder="MM" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementMinutes()" ng-blur="blur()">\n      </td>\n      <td ng-show="showSeconds" class="uib-separator">:</td>\n      <td class="form-group uib-time seconds" ng-class="{\'has-error\': invalidSeconds}" ng-show="showSeconds">\n        <input type="text" placeholder="SS" ng-model="seconds" ng-change="updateSeconds()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementSeconds()" ng-blur="blur()">\n      </td>\n      <td ng-show="showMeridian" class="uib-time am-pm"><button type="button" ng-class="{disabled: noToggleMeridian()}" class="btn btn-default text-center" ng-click="toggleMeridian()" ng-disabled="noToggleMeridian()" tabindex="{{::tabindex}}">{{meridian}}</button></td>\n    </tr>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td class="uib-decrement hours"><a ng-click="decrementHours()" ng-class="{disabled: noDecrementHours()}" class="btn btn-link" ng-disabled="noDecrementHours()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td>&nbsp;</td>\n      <td class="uib-decrement minutes"><a ng-click="decrementMinutes()" ng-class="{disabled: noDecrementMinutes()}" class="btn btn-link" ng-disabled="noDecrementMinutes()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td ng-show="showSeconds">&nbsp;</td>\n      <td ng-show="showSeconds" class="uib-decrement seconds"><a ng-click="decrementSeconds()" ng-class="{disabled: noDecrementSeconds()}" class="btn btn-link" ng-disabled="noDecrementSeconds()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(a){a.put("uib/template/typeahead/typeahead-match.html",'<a href\n   tabindex="-1"\n   ng-bind-html="match.label | uibTypeaheadHighlight:query"\n   ng-attr-title="{{match.label}}"></a>\n')}]),angular.module("uib/template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(a){a.put("uib/template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen() && !moveInProgress" ng-style="{top: position().top+\'px\', left: position().left+\'px\'}" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index, $event)" role="option" id="{{::match.id}}">\n        <div uib-typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')}]),angular.module("ui.bootstrap.carousel").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibCarouselCss&&angular.element(document).find("head").prepend('<style type="text/css">.ng-animate.item:not(.left):not(.right){-webkit-transition:0s ease-in-out left;transition:0s ease-in-out left}</style>'),angular.$$uibCarouselCss=!0}),angular.module("ui.bootstrap.datepicker").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibDatepickerCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-datepicker .uib-title{width:100%;}.uib-day button,.uib-month button,.uib-year button{min-width:100%;}.uib-left,.uib-right{width:100%}</style>'),angular.$$uibDatepickerCss=!0}),angular.module("ui.bootstrap.position").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibPositionCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-position-measure{display:block !important;visibility:hidden !important;position:absolute !important;top:-9999px !important;left:-9999px !important;}.uib-position-scrollbar-measure{position:absolute !important;top:-9999px !important;width:50px !important;height:50px !important;overflow:scroll !important;}.uib-position-body-scrollbar-measure{overflow:scroll !important;}</style>'),angular.$$uibPositionCss=!0}),angular.module("ui.bootstrap.datepickerPopup").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibDatepickerpopupCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-datepicker-popup.dropdown-menu{display:block;float:none;margin:0;}.uib-button-bar{padding:10px 9px 2px;}</style>'),angular.$$uibDatepickerpopupCss=!0}),angular.module("ui.bootstrap.tooltip").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibTooltipCss&&angular.element(document).find("head").prepend('<style type="text/css">[uib-tooltip-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-popup].tooltip.right-bottom > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.right-bottom > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.right-bottom > .tooltip-arrow,[uib-popover-popup].popover.top-left > .arrow,[uib-popover-popup].popover.top-right > .arrow,[uib-popover-popup].popover.bottom-left > .arrow,[uib-popover-popup].popover.bottom-right > .arrow,[uib-popover-popup].popover.left-top > .arrow,[uib-popover-popup].popover.left-bottom > .arrow,[uib-popover-popup].popover.right-top > .arrow,[uib-popover-popup].popover.right-bottom > .arrow,[uib-popover-html-popup].popover.top-left > .arrow,[uib-popover-html-popup].popover.top-right > .arrow,[uib-popover-html-popup].popover.bottom-left > .arrow,[uib-popover-html-popup].popover.bottom-right > .arrow,[uib-popover-html-popup].popover.left-top > .arrow,[uib-popover-html-popup].popover.left-bottom > .arrow,[uib-popover-html-popup].popover.right-top > .arrow,[uib-popover-html-popup].popover.right-bottom > .arrow,[uib-popover-template-popup].popover.top-left > .arrow,[uib-popover-template-popup].popover.top-right > .arrow,[uib-popover-template-popup].popover.bottom-left > .arrow,[uib-popover-template-popup].popover.bottom-right > .arrow,[uib-popover-template-popup].popover.left-top > .arrow,[uib-popover-template-popup].popover.left-bottom > .arrow,[uib-popover-template-popup].popover.right-top > .arrow,[uib-popover-template-popup].popover.right-bottom > .arrow{top:auto;bottom:auto;left:auto;right:auto;margin:0;}[uib-popover-popup].popover,[uib-popover-html-popup].popover,[uib-popover-template-popup].popover{display:block !important;}</style>'),
angular.$$uibTooltipCss=!0}),angular.module("ui.bootstrap.timepicker").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibTimepickerCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-time input{width:50px;}</style>'),angular.$$uibTimepickerCss=!0}),angular.module("ui.bootstrap.typeahead").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibTypeaheadCss&&angular.element(document).find("head").prepend('<style type="text/css">[uib-typeahead-popup].dropdown-menu{display:block;}</style>'),angular.$$uibTypeaheadCss=!0}),"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ui.router"),function(a,b,c){"use strict";function d(a,b){return R(new(R(function(){},{prototype:a})),b)}function e(a){return Q(arguments,function(b){b!==a&&Q(b,function(b,c){a.hasOwnProperty(c)||(a[c]=b)})}),a}function f(a,b){var c=[];for(var d in a.path){if(a.path[d]!==b.path[d])break;c.push(a.path[d])}return c}function g(a){if(Object.keys)return Object.keys(a);var b=[];return Q(a,function(a,c){b.push(c)}),b}function h(a,b){if(Array.prototype.indexOf)return a.indexOf(b,Number(arguments[2])||0);var c=a.length>>>0,d=Number(arguments[2])||0;for(d=0>d?Math.ceil(d):Math.floor(d),0>d&&(d+=c);c>d;d++)if(d in a&&a[d]===b)return d;return-1}function i(a,b,c,d){var e,i=f(c,d),j={},k=[];for(var l in i)if(i[l]&&i[l].params&&(e=g(i[l].params),e.length))for(var m in e)h(k,e[m])>=0||(k.push(e[m]),j[e[m]]=a[e[m]]);return R({},j,b)}function j(a,b,c){if(!c){c=[];for(var d in a)c.push(d)}for(var e=0;e<c.length;e++){var f=c[e];if(a[f]!=b[f])return!1}return!0}function k(a,b){var c={};return Q(a,function(a){c[a]=b[a]}),c}function l(a){var b={},c=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));return Q(c,function(c){c in a&&(b[c]=a[c])}),b}function m(a){var b={},c=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));for(var d in a)-1==h(c,d)&&(b[d]=a[d]);return b}function n(a,b){var c=P(a),d=c?[]:{};return Q(a,function(a,e){b(a,e)&&(d[c?d.length:e]=a)}),d}function o(a,b){var c=P(a)?[]:{};return Q(a,function(a,d){c[d]=b(a,d)}),c}function p(a,b){var d=1,f=2,i={},j=[],k=i,l=R(a.when(i),{$$promises:i,$$values:i});this.study=function(i){function n(a,c){if(s[c]!==f){if(r.push(c),s[c]===d)throw r.splice(0,h(r,c)),new Error("Cyclic dependency: "+r.join(" -> "));if(s[c]=d,N(a))q.push(c,[function(){return b.get(a)}],j);else{var e=b.annotate(a);Q(e,function(a){a!==c&&i.hasOwnProperty(a)&&n(i[a],a)}),q.push(c,a,e)}r.pop(),s[c]=f}}function o(a){return O(a)&&a.then&&a.$$promises}if(!O(i))throw new Error("'invocables' must be an object");var p=g(i||{}),q=[],r=[],s={};return Q(i,n),i=r=s=null,function(d,f,g){function h(){--u||(v||e(t,f.$$values),r.$$values=t,r.$$promises=r.$$promises||!0,delete r.$$inheritedValues,n.resolve(t))}function i(a){r.$$failure=a,n.reject(a)}function j(c,e,f){function j(a){l.reject(a),i(a)}function k(){if(!L(r.$$failure))try{l.resolve(b.invoke(e,g,t)),l.promise.then(function(a){t[c]=a,h()},j)}catch(a){j(a)}}var l=a.defer(),m=0;Q(f,function(a){s.hasOwnProperty(a)&&!d.hasOwnProperty(a)&&(m++,s[a].then(function(b){t[a]=b,--m||k()},j))}),m||k(),s[c]=l.promise}if(o(d)&&g===c&&(g=f,f=d,d=null),d){if(!O(d))throw new Error("'locals' must be an object")}else d=k;if(f){if(!o(f))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else f=l;var n=a.defer(),r=n.promise,s=r.$$promises={},t=R({},d),u=1+q.length/3,v=!1;if(L(f.$$failure))return i(f.$$failure),r;f.$$inheritedValues&&e(t,m(f.$$inheritedValues,p)),R(s,f.$$promises),f.$$values?(v=e(t,m(f.$$values,p)),r.$$inheritedValues=m(f.$$values,p),h()):(f.$$inheritedValues&&(r.$$inheritedValues=m(f.$$inheritedValues,p)),f.then(h,i));for(var w=0,x=q.length;x>w;w+=3)d.hasOwnProperty(q[w])?h():j(q[w],q[w+1],q[w+2]);return r}},this.resolve=function(a,b,c,d){return this.study(a)(b,c,d)}}function q(a,b,c){this.fromConfig=function(a,b,c){return L(a.template)?this.fromString(a.template,b):L(a.templateUrl)?this.fromUrl(a.templateUrl,b):L(a.templateProvider)?this.fromProvider(a.templateProvider,b,c):null},this.fromString=function(a,b){return M(a)?a(b):a},this.fromUrl=function(c,d){return M(c)&&(c=c(d)),null==c?null:a.get(c,{cache:b,headers:{Accept:"text/html"}}).then(function(a){return a.data})},this.fromProvider=function(a,b,d){return c.invoke(a,null,d||{params:b})}}function r(a,b,e){function f(b,c,d,e){if(q.push(b),o[b])return o[b];if(!/^\w+([-.]+\w+)*(?:\[\])?$/.test(b))throw new Error("Invalid parameter name '"+b+"' in pattern '"+a+"'");if(p[b])throw new Error("Duplicate parameter name '"+b+"' in pattern '"+a+"'");return p[b]=new U.Param(b,c,d,e),p[b]}function g(a,b,c,d){var e=["",""],f=a.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!b)return f;switch(c){case!1:e=["(",")"+(d?"?":"")];break;case!0:f=f.replace(/\/$/,""),e=["(?:/(",")|/)?"];break;default:e=["("+c+"|",")?"]}return f+e[0]+b+e[1]}function h(e,f){var g,h,i,j,k;return g=e[2]||e[3],k=b.params[g],i=a.substring(m,e.index),h=f?e[4]:e[4]||("*"==e[1]?".*":null),h&&(j=U.type(h)||d(U.type("string"),{pattern:new RegExp(h,b.caseInsensitive?"i":c)})),{id:g,regexp:h,segment:i,type:j,cfg:k}}b=R({params:{}},O(b)?b:{});var i,j=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,k=/([:]?)([\w\[\].-]+)|\{([\w\[\].-]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,l="^",m=0,n=this.segments=[],o=e?e.params:{},p=this.params=e?e.params.$$new():new U.ParamSet,q=[];this.source=a;for(var r,s,t;(i=j.exec(a))&&(r=h(i,!1),!(r.segment.indexOf("?")>=0));)s=f(r.id,r.type,r.cfg,"path"),l+=g(r.segment,s.type.pattern.source,s.squash,s.isOptional),n.push(r.segment),m=j.lastIndex;t=a.substring(m);var u=t.indexOf("?");if(u>=0){var v=this.sourceSearch=t.substring(u);if(t=t.substring(0,u),this.sourcePath=a.substring(0,m+u),v.length>0)for(m=0;i=k.exec(v);)r=h(i,!0),s=f(r.id,r.type,r.cfg,"search"),m=j.lastIndex}else this.sourcePath=a,this.sourceSearch="";l+=g(t)+(b.strict===!1?"/?":"")+"$",n.push(t),this.regexp=new RegExp(l,b.caseInsensitive?"i":c),this.prefix=n[0],this.$$paramNames=q}function s(a){R(this,a)}function t(){function a(a){return null!=a?a.toString().replace(/~/g,"~~").replace(/\//g,"~2F"):a}function e(a){return null!=a?a.toString().replace(/~2F/g,"/").replace(/~~/g,"~"):a}function f(){return{strict:p,caseInsensitive:m}}function i(a){return M(a)||P(a)&&M(a[a.length-1])}function j(){for(;w.length;){var a=w.shift();if(a.pattern)throw new Error("You cannot override a type's .pattern at runtime.");b.extend(u[a.name],l.invoke(a.def))}}function k(a){R(this,a||{})}U=this;var l,m=!1,p=!0,q=!1,u={},v=!0,w=[],x={string:{encode:a,decode:e,is:function(a){return null==a||!L(a)||"string"==typeof a},pattern:/[^\/]*/},"int":{encode:a,decode:function(a){return parseInt(a,10)},is:function(a){return L(a)&&this.decode(a.toString())===a},pattern:/\d+/},bool:{encode:function(a){return a?1:0},decode:function(a){return 0!==parseInt(a,10)},is:function(a){return a===!0||a===!1},pattern:/0|1/},date:{encode:function(a){return this.is(a)?[a.getFullYear(),("0"+(a.getMonth()+1)).slice(-2),("0"+a.getDate()).slice(-2)].join("-"):c},decode:function(a){if(this.is(a))return a;var b=this.capture.exec(a);return b?new Date(b[1],b[2]-1,b[3]):c},is:function(a){return a instanceof Date&&!isNaN(a.valueOf())},equals:function(a,b){return this.is(a)&&this.is(b)&&a.toISOString()===b.toISOString()},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:b.toJson,decode:b.fromJson,is:b.isObject,equals:b.equals,pattern:/[^\/]*/},any:{encode:b.identity,decode:b.identity,equals:b.equals,pattern:/.*/}};t.$$getDefaultValue=function(a){if(!i(a.value))return a.value;if(!l)throw new Error("Injectable functions cannot be called at configuration time");return l.invoke(a.value)},this.caseInsensitive=function(a){return L(a)&&(m=a),m},this.strictMode=function(a){return L(a)&&(p=a),p},this.defaultSquashPolicy=function(a){if(!L(a))return q;if(a!==!0&&a!==!1&&!N(a))throw new Error("Invalid squash policy: "+a+". Valid policies: false, true, arbitrary-string");return q=a,a},this.compile=function(a,b){return new r(a,R(f(),b))},this.isMatcher=function(a){if(!O(a))return!1;var b=!0;return Q(r.prototype,function(c,d){M(c)&&(b=b&&L(a[d])&&M(a[d]))}),b},this.type=function(a,b,c){if(!L(b))return u[a];if(u.hasOwnProperty(a))throw new Error("A type named '"+a+"' has already been defined.");return u[a]=new s(R({name:a},b)),c&&(w.push({name:a,def:c}),v||j()),this},Q(x,function(a,b){u[b]=new s(R({name:b},a))}),u=d(u,{}),this.$get=["$injector",function(a){return l=a,v=!1,j(),Q(x,function(a,b){u[b]||(u[b]=new s(a))}),this}],this.Param=function(a,d,e,f){function j(a){var b=O(a)?g(a):[],c=-1===h(b,"value")&&-1===h(b,"type")&&-1===h(b,"squash")&&-1===h(b,"array");return c&&(a={value:a}),a.$$fn=i(a.value)?a.value:function(){return a.value},a}function k(c,d,e){if(c.type&&d)throw new Error("Param '"+a+"' has two type configurations.");return d?d:c.type?b.isString(c.type)?u[c.type]:c.type instanceof s?c.type:new s(c.type):"config"===e?u.any:u.string}function m(){var b={array:"search"===f?"auto":!1},c=a.match(/\[\]$/)?{array:!0}:{};return R(b,c,e).array}function p(a,b){var c=a.squash;if(!b||c===!1)return!1;if(!L(c)||null==c)return q;if(c===!0||N(c))return c;throw new Error("Invalid squash policy: '"+c+"'. Valid policies: false, true, or arbitrary string")}function r(a,b,d,e){var f,g,i=[{from:"",to:d||b?c:""},{from:null,to:d||b?c:""}];return f=P(a.replace)?a.replace:[],N(e)&&f.push({from:e,to:c}),g=o(f,function(a){return a.from}),n(i,function(a){return-1===h(g,a.from)}).concat(f)}function t(){if(!l)throw new Error("Injectable functions cannot be called at configuration time");var a=l.invoke(e.$$fn);if(null!==a&&a!==c&&!x.type.is(a))throw new Error("Default value ("+a+") for parameter '"+x.id+"' is not an instance of Type ("+x.type.name+")");return a}function v(a){function b(a){return function(b){return b.from===a}}function c(a){var c=o(n(x.replace,b(a)),function(a){return a.to});return c.length?c[0]:a}return a=c(a),L(a)?x.type.$normalize(a):t()}function w(){return"{Param:"+a+" "+d+" squash: '"+A+"' optional: "+z+"}"}var x=this;e=j(e),d=k(e,d,f);var y=m();d=y?d.$asArray(y,"search"===f):d,"string"!==d.name||y||"path"!==f||e.value!==c||(e.value="");var z=e.value!==c,A=p(e,z),B=r(e,y,z,A);R(this,{id:a,type:d,location:f,array:y,squash:A,replace:B,isOptional:z,value:v,dynamic:c,config:e,toString:w})},k.prototype={$$new:function(){return d(this,R(new k,{$$parent:this}))},$$keys:function(){for(var a=[],b=[],c=this,d=g(k.prototype);c;)b.push(c),c=c.$$parent;return b.reverse(),Q(b,function(b){Q(g(b),function(b){-1===h(a,b)&&-1===h(d,b)&&a.push(b)})}),a},$$values:function(a){var b={},c=this;return Q(c.$$keys(),function(d){b[d]=c[d].value(a&&a[d])}),b},$$equals:function(a,b){var c=!0,d=this;return Q(d.$$keys(),function(e){var f=a&&a[e],g=b&&b[e];d[e].type.equals(f,g)||(c=!1)}),c},$$validates:function(a){var d,e,f,g,h,i=this.$$keys();for(d=0;d<i.length&&(e=this[i[d]],f=a[i[d]],f!==c&&null!==f||!e.isOptional);d++){if(g=e.type.$normalize(f),!e.type.is(g))return!1;if(h=e.type.encode(g),b.isString(h)&&!e.type.pattern.exec(h))return!1}return!0},$$parent:c},this.ParamSet=k}function u(a,d){function e(a){var b=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(a.source);return null!=b?b[1].replace(/\\(.)/g,"$1"):""}function f(a,b){return a.replace(/\$(\$|\d{1,2})/,function(a,c){return b["$"===c?0:Number(c)]})}function g(a,b,c){if(!c)return!1;var d=a.invoke(b,b,{$match:c});return L(d)?d:!0}function h(d,e,f,g,h){function m(a,b,c){return"/"===q?a:b?q.slice(0,-1)+a:c?q.slice(1)+a:a}function n(a){function b(a){var b=a(f,d);return b?(N(b)&&d.replace().url(b),!0):!1}if(!a||!a.defaultPrevented){p&&d.url()===p;p=c;var e,g=j.length;for(e=0;g>e;e++)if(b(j[e]))return;k&&b(k)}}function o(){return i=i||e.$on("$locationChangeSuccess",n)}var p,q=g.baseHref(),r=d.url();return l||o(),{sync:function(){n()},listen:function(){return o()},update:function(a){return a?void(r=d.url()):void(d.url()!==r&&(d.url(r),d.replace()))},push:function(a,b,e){var f=a.format(b||{});null!==f&&b&&b["#"]&&(f+="#"+b["#"]),d.url(f),p=e&&e.$$avoidResync?d.url():c,e&&e.replace&&d.replace()},href:function(c,e,f){if(!c.validates(e))return null;var g=a.html5Mode();b.isObject(g)&&(g=g.enabled),g=g&&h.history;var i=c.format(e);if(f=f||{},g||null===i||(i="#"+a.hashPrefix()+i),null!==i&&e&&e["#"]&&(i+="#"+e["#"]),i=m(i,g,f.absolute),!f.absolute||!i)return i;var j=!g&&i?"/":"",k=d.port();return k=80===k||443===k?"":":"+k,[d.protocol(),"://",d.host(),k,j,i].join("")}}}var i,j=[],k=null,l=!1;this.rule=function(a){if(!M(a))throw new Error("'rule' must be a function");return j.push(a),this},this.otherwise=function(a){if(N(a)){var b=a;a=function(){return b}}else if(!M(a))throw new Error("'rule' must be a function");return k=a,this},this.when=function(a,b){var c,h=N(b);if(N(a)&&(a=d.compile(a)),!h&&!M(b)&&!P(b))throw new Error("invalid 'handler' in when()");var i={matcher:function(a,b){return h&&(c=d.compile(b),b=["$match",function(a){return c.format(a)}]),R(function(c,d){return g(c,b,a.exec(d.path(),d.search()))},{prefix:N(a.prefix)?a.prefix:""})},regex:function(a,b){if(a.global||a.sticky)throw new Error("when() RegExp must not be global or sticky");return h&&(c=b,b=["$match",function(a){return f(c,a)}]),R(function(c,d){return g(c,b,a.exec(d.path()))},{prefix:e(a)})}},j={matcher:d.isMatcher(a),regex:a instanceof RegExp};for(var k in j)if(j[k])return this.rule(i[k](a,b));throw new Error("invalid 'what' in when()")},this.deferIntercept=function(a){a===c&&(a=!0),l=a},this.$get=h,h.$inject=["$location","$rootScope","$injector","$browser","$sniffer"]}function v(a,e){function f(a){return 0===a.indexOf(".")||0===a.indexOf("^")}function m(a,b){if(!a)return c;var d=N(a),e=d?a:a.name,g=f(e);if(g){if(!b)throw new Error("No reference point given for path '"+e+"'");b=m(b);for(var h=e.split("."),i=0,j=h.length,k=b;j>i;i++)if(""!==h[i]||0!==i){if("^"!==h[i])break;if(!k.parent)throw new Error("Path '"+e+"' not valid for state '"+b.name+"'");k=k.parent}else k=b;h=h.slice(i).join("."),e=k.name+(k.name&&h?".":"")+h}var l=z[e];return!l||!d&&(d||l!==a&&l.self!==a)?c:l}function n(a,b){A[a]||(A[a]=[]),A[a].push(b)}function p(a){for(var b=A[a]||[];b.length;)q(b.shift())}function q(b){b=d(b,{self:b,resolve:b.resolve||{},toString:function(){return this.name}});var c=b.name;if(!N(c)||c.indexOf("@")>=0)throw new Error("State must have a valid name");if(z.hasOwnProperty(c))throw new Error("State '"+c+"' is already defined");var e=-1!==c.indexOf(".")?c.substring(0,c.lastIndexOf(".")):N(b.parent)?b.parent:O(b.parent)&&N(b.parent.name)?b.parent.name:"";if(e&&!z[e])return n(e,b.self);for(var f in C)M(C[f])&&(b[f]=C[f](b,C.$delegates[f]));return z[c]=b,!b[B]&&b.url&&a.when(b.url,["$match","$stateParams",function(a,c){y.$current.navigable==b&&j(a,c)||y.transitionTo(b,a,{inherit:!0,location:!1})}]),p(c),b}function r(a){return a.indexOf("*")>-1}function s(a){for(var b=a.split("."),c=y.$current.name.split("."),d=0,e=b.length;e>d;d++)"*"===b[d]&&(c[d]="*");return"**"===b[0]&&(c=c.slice(h(c,b[1])),c.unshift("**")),"**"===b[b.length-1]&&(c.splice(h(c,b[b.length-2])+1,Number.MAX_VALUE),c.push("**")),b.length!=c.length?!1:c.join("")===b.join("")}function t(a,b){return N(a)&&!L(b)?C[a]:M(b)&&N(a)?(C[a]&&!C.$delegates[a]&&(C.$delegates[a]=C[a]),C[a]=b,this):this}function u(a,b){return O(a)?b=a:b.name=a,q(b),this}function v(a,e,f,h,l,n,p,q,t){function u(b,c,d,f){var g=a.$broadcast("$stateNotFound",b,c,d);if(g.defaultPrevented)return p.update(),D;if(!g.retry)return null;if(f.$retry)return p.update(),E;var h=y.transition=e.when(g.retry);return h.then(function(){return h!==y.transition?A:(b.options.$retry=!0,y.transitionTo(b.to,b.toParams,b.options))},function(){return D}),p.update(),h}function v(a,c,d,g,i,j){function m(){var c=[];return Q(a.views,function(d,e){var g=d.resolve&&d.resolve!==a.resolve?d.resolve:{};g.$template=[function(){return f.load(e,{view:d,locals:i.globals,params:n,notify:j.notify})||""}],c.push(l.resolve(g,i.globals,i.resolve,a).then(function(c){if(M(d.controllerProvider)||P(d.controllerProvider)){var f=b.extend({},g,i.globals);c.$$controller=h.invoke(d.controllerProvider,null,f)}else c.$$controller=d.controller;c.$$state=a,c.$$controllerAs=d.controllerAs,c.$$resolveAs=d.resolveAs,i[e]=c}))}),e.all(c).then(function(){return i.globals})}var n=d?c:k(a.params.$$keys(),c),o={$stateParams:n};i.resolve=l.resolve(a.resolve,o,i.resolve,a);var p=[i.resolve.then(function(a){i.globals=a})];return g&&p.push(g),e.all(p).then(m).then(function(a){return i})}var A=e.reject(new Error("transition superseded")),C=e.reject(new Error("transition prevented")),D=e.reject(new Error("transition aborted")),E=e.reject(new Error("transition failed"));return x.locals={resolve:null,globals:{$stateParams:{}}},y={params:{},current:x.self,$current:x,transition:null},y.reload=function(a){return y.transitionTo(y.current,n,{reload:a||!0,inherit:!1,notify:!0})},y.go=function(a,b,c){return y.transitionTo(a,b,R({inherit:!0,relative:y.$current},c))},y.transitionTo=function(b,c,f){c=c||{},f=R({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},f||{});var g,j=y.$current,l=y.params,o=j.path,q=m(b,f.relative),r=c["#"];if(!L(q)){var s={to:b,toParams:c,options:f},t=u(s,j.self,l,f);if(t)return t;if(b=s.to,c=s.toParams,f=s.options,q=m(b,f.relative),!L(q)){if(!f.relative)throw new Error("No such state '"+b+"'");throw new Error("Could not resolve '"+b+"' from state '"+f.relative+"'")}}if(q[B])throw new Error("Cannot transition to abstract state '"+b+"'");if(f.inherit&&(c=i(n,c||{},y.$current,q)),!q.params.$$validates(c))return E;c=q.params.$$values(c),b=q;var z=b.path,D=0,F=z[D],G=x.locals,H=[];if(f.reload){if(N(f.reload)||O(f.reload)){if(O(f.reload)&&!f.reload.name)throw new Error("Invalid reload state object");var I=f.reload===!0?o[0]:m(f.reload);if(f.reload&&!I)throw new Error("No such reload state '"+(N(f.reload)?f.reload:f.reload.name)+"'");for(;F&&F===o[D]&&F!==I;)G=H[D]=F.locals,D++,F=z[D]}}else for(;F&&F===o[D]&&F.ownParams.$$equals(c,l);)G=H[D]=F.locals,D++,F=z[D];if(w(b,c,j,l,G,f))return r&&(c["#"]=r),y.params=c,S(y.params,n),S(k(b.params.$$keys(),n),b.locals.globals.$stateParams),f.location&&b.navigable&&b.navigable.url&&(p.push(b.navigable.url,c,{$$avoidResync:!0,replace:"replace"===f.location}),p.update(!0)),y.transition=null,e.when(y.current);if(c=k(b.params.$$keys(),c||{}),r&&(c["#"]=r),f.notify&&a.$broadcast("$stateChangeStart",b.self,c,j.self,l,f).defaultPrevented)return a.$broadcast("$stateChangeCancel",b.self,c,j.self,l),null==y.transition&&p.update(),C;for(var J=e.when(G),K=D;K<z.length;K++,F=z[K])G=H[K]=d(G),J=v(F,c,F===b,J,G,f);var M=y.transition=J.then(function(){var d,e,g;if(y.transition!==M)return A;for(d=o.length-1;d>=D;d--)g=o[d],g.self.onExit&&h.invoke(g.self.onExit,g.self,g.locals.globals),g.locals=null;for(d=D;d<z.length;d++)e=z[d],e.locals=H[d],e.self.onEnter&&h.invoke(e.self.onEnter,e.self,e.locals.globals);return y.transition!==M?A:(y.$current=b,y.current=b.self,y.params=c,S(y.params,n),y.transition=null,f.location&&b.navigable&&p.push(b.navigable.url,b.navigable.locals.globals.$stateParams,{$$avoidResync:!0,replace:"replace"===f.location}),f.notify&&a.$broadcast("$stateChangeSuccess",b.self,c,j.self,l),p.update(!0),y.current)},function(d){return y.transition!==M?A:(y.transition=null,g=a.$broadcast("$stateChangeError",b.self,c,j.self,l,d),g.defaultPrevented||p.update(),e.reject(d))});return M},y.is=function(a,b,d){d=R({relative:y.$current},d||{});var e=m(a,d.relative);return L(e)?y.$current!==e?!1:b?j(e.params.$$values(b),n):!0:c},y.includes=function(a,b,d){if(d=R({relative:y.$current},d||{}),N(a)&&r(a)){if(!s(a))return!1;a=y.$current.name}var e=m(a,d.relative);return L(e)?L(y.$current.includes[e.name])?b?j(e.params.$$values(b),n,g(b)):!0:!1:c},y.href=function(a,b,d){d=R({lossy:!0,inherit:!0,absolute:!1,relative:y.$current},d||{});var e=m(a,d.relative);if(!L(e))return null;d.inherit&&(b=i(n,b||{},y.$current,e));var f=e&&d.lossy?e.navigable:e;return f&&f.url!==c&&null!==f.url?p.href(f.url,k(e.params.$$keys().concat("#"),b||{}),{absolute:d.absolute}):null},y.get=function(a,b){if(0===arguments.length)return o(g(z),function(a){return z[a].self});var c=m(a,b||y.$current);return c&&c.self?c.self:null},y}function w(a,b,c,d,e,f){function g(a,b,c){function d(b){return"search"!=a.params[b].location}var e=a.params.$$keys().filter(d),f=l.apply({},[a.params].concat(e)),g=new U.ParamSet(f);return g.$$equals(b,c)}return!f.reload&&a===c&&(e===c.locals||a.self.reloadOnSearch===!1&&g(c,d,b))?!0:void 0}var x,y,z={},A={},B="abstract",C={parent:function(a){if(L(a.parent)&&a.parent)return m(a.parent);var b=/^(.+)\.[^.]+$/.exec(a.name);return b?m(b[1]):x},data:function(a){return a.parent&&a.parent.data&&(a.data=a.self.data=d(a.parent.data,a.data)),a.data},url:function(a){var b=a.url,c={params:a.params||{}};if(N(b))return"^"==b.charAt(0)?e.compile(b.substring(1),c):(a.parent.navigable||x).url.concat(b,c);if(!b||e.isMatcher(b))return b;throw new Error("Invalid url '"+b+"' in state '"+a+"'")},navigable:function(a){return a.url?a:a.parent?a.parent.navigable:null},ownParams:function(a){var b=a.url&&a.url.params||new U.ParamSet;return Q(a.params||{},function(a,c){b[c]||(b[c]=new U.Param(c,null,a,"config"))}),b},params:function(a){var b=l(a.ownParams,a.ownParams.$$keys());return a.parent&&a.parent.params?R(a.parent.params.$$new(),b):new U.ParamSet},views:function(a){var b={};return Q(L(a.views)?a.views:{"":a},function(c,d){d.indexOf("@")<0&&(d+="@"+a.parent.name),c.resolveAs=c.resolveAs||a.resolveAs||"$resolve",b[d]=c}),b},path:function(a){return a.parent?a.parent.path.concat(a):[]},includes:function(a){var b=a.parent?R({},a.parent.includes):{};return b[a.name]=!0,b},$delegates:{}};x=q({name:"",url:"^",views:null,"abstract":!0}),x.navigable=null,this.decorator=t,this.state=u,this.$get=v,v.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter","$location","$urlMatcherFactory"]}function w(){function a(a,b){return{load:function(a,c){var d,e={template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}};return c=R(e,c),c.view&&(d=b.fromConfig(c.view,c.params,c.locals)),d}}}this.$get=a,a.$inject=["$rootScope","$templateFactory"]}function x(){var a=!1;this.useAnchorScroll=function(){a=!0},this.$get=["$anchorScroll","$timeout",function(b,c){return a?b:function(a){return c(function(){a[0].scrollIntoView()},0,!1)}}]}function y(a,c,d,e,f){function g(){return c.has?function(a){return c.has(a)?c.get(a):null}:function(a){try{return c.get(a)}catch(b){return null}}}function h(a,c){var d=function(){return{enter:function(a,b,c){b.after(a),c()},leave:function(a,b){a.remove(),b()}}};if(k)return{enter:function(a,c,d){b.version.minor>2?k.enter(a,null,c).then(d):k.enter(a,null,c,d)},leave:function(a,c){b.version.minor>2?k.leave(a).then(c):k.leave(a,c)}};if(j){var e=j&&j(c,a);return{enter:function(a,b,c){e.enter(a,null,b),c()},leave:function(a,b){e.leave(a),b()}}}return d()}var i=g(),j=i("$animator"),k=i("$animate"),l={restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(c,g,i){return function(c,g,j){function k(){if(m&&(m.remove(),m=null),o&&(o.$destroy(),o=null),n){var a=n.data("$uiView");s.leave(n,function(){a.$$animLeave.resolve(),m=null}),m=n,n=null}}function l(h){var l,m=A(c,j,t,e),u=m&&a.$current&&a.$current.locals[m];if(h||u!==p){l=c.$new(),p=a.$current.locals[m],l.$emit("$viewContentLoading",m);var v=i(l,function(a){var e=f.defer(),h=f.defer(),i={name:m,$animEnter:e.promise,$animLeave:h.promise,$$animLeave:h};s.enter(a.data("$uiView",i),g,function(){e.resolve(),o&&o.$emit("$viewContentAnimationEnded"),(b.isDefined(r)&&!r||c.$eval(r))&&d(a)}),k()});n=v,o=l,o.$emit("$viewContentLoaded",m),o.$eval(q)}}var m,n,o,p,q=j.onload||"",r=j.autoscroll,s=h(j,c),t=g.inheritedData("$uiView");c.$on("$stateChangeSuccess",function(){l(!1)}),l(!0)}}};return l}function z(a,c,d,e){return{restrict:"ECA",priority:-400,compile:function(e){var f=e.html();return function(e,g,h){var i=d.$current,j=g.data("$uiView"),k=i&&i.locals[j.name];if(k){R(j,{state:k.$$state}),g.html(k.$template?k.$template:f);var l=b.extend({},k);e[k.$$resolveAs]=l;var m=a(g.contents());if(k.$$controller){k.$scope=e,k.$element=g;var n=c(k.$$controller,k);k.$$controllerAs&&(e[k.$$controllerAs]=n,e[k.$$controllerAs][k.$$resolveAs]=l),M(n.$onInit)&&n.$onInit(),g.data("$ngControllerController",n),g.children().data("$ngControllerController",n)}m(e)}}}}}function A(a,b,c,d){var e=d(b.uiView||b.name||"")(a);return e.indexOf("@")>=0?e:e+"@"+(c?c.state.name:"")}function B(a,b){var c,d=a.match(/^\s*({[^}]*})\s*$/);if(d&&(a=b+"("+d[1]+")"),c=a.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/),!c||4!==c.length)throw new Error("Invalid state ref '"+a+"'");return{state:c[1],paramExpr:c[3]||null}}function C(a){var b=a.parent().inheritedData("$uiView");return b&&b.state&&b.state.name?b.state:void 0}function D(a){var b="[object SVGAnimatedString]"===Object.prototype.toString.call(a.prop("href")),c="FORM"===a[0].nodeName;return{attr:c?"action":b?"xlink:href":"href",isAnchor:"A"===a.prop("tagName").toUpperCase(),clickable:!c}}function E(a,b,c,d,e){return function(f){var g=f.which||f.button,h=e();if(!(g>1||f.ctrlKey||f.metaKey||f.shiftKey||a.attr("target"))){var i=c(function(){b.go(h.state,h.params,h.options)});f.preventDefault();var j=d.isAnchor&&!h.href?1:0;f.preventDefault=function(){j--<=0&&c.cancel(i)}}}}function F(a,b){return{relative:C(a)||b.$current,inherit:!0}}function G(a,c){return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(d,e,f,g){var h,i=B(f.uiSref,a.current.name),j={state:i.state,href:null,params:null},k=D(e),l=g[1]||g[0],m=null;j.options=R(F(e,a),f.uiSrefOpts?d.$eval(f.uiSrefOpts):{});var n=function(c){c&&(j.params=b.copy(c)),j.href=a.href(i.state,j.params,j.options),m&&m(),l&&(m=l.$$addStateInfo(i.state,j.params)),null!==j.href&&f.$set(k.attr,j.href)};i.paramExpr&&(d.$watch(i.paramExpr,function(a){a!==j.params&&n(a)},!0),j.params=b.copy(d.$eval(i.paramExpr))),n(),k.clickable&&(h=E(e,a,c,k,function(){return j}),e.bind("click",h),d.$on("$destroy",function(){e.unbind("click",h)}))}}}function H(a,b){return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(c,d,e,f){function g(b){m.state=b[0],m.params=b[1],m.options=b[2],m.href=a.href(m.state,m.params,m.options),n&&n(),j&&(n=j.$$addStateInfo(m.state,m.params)),m.href&&e.$set(i.attr,m.href)}var h,i=D(d),j=f[1]||f[0],k=[e.uiState,e.uiStateParams||null,e.uiStateOpts||null],l="["+k.map(function(a){return a||"null"}).join(", ")+"]",m={state:null,params:null,options:null,href:null},n=null;c.$watch(l,g,!0),g(c.$eval(l)),i.clickable&&(h=E(d,a,b,i,function(){return m}),d.bind("click",h),c.$on("$destroy",function(){d.unbind("click",h)}))}}}function I(a,b,c){return{restrict:"A",controller:["$scope","$element","$attrs","$timeout",function(b,d,e,f){function g(b,c,e){var f=a.get(b,C(d)),g=h(b,c),i={state:f||{name:b},params:c,hash:g};return p.push(i),q[g]=e,function(){var a=p.indexOf(i);-1!==a&&p.splice(a,1)}}function h(a,c){if(!N(a))throw new Error("state should be a string");return O(c)?a+T(c):(c=b.$eval(c),O(c)?a+T(c):a)}function i(){for(var a=0;a<p.length;a++)l(p[a].state,p[a].params)?j(d,q[p[a].hash]):k(d,q[p[a].hash]),m(p[a].state,p[a].params)?j(d,n):k(d,n)}function j(a,b){f(function(){a.addClass(b)})}function k(a,b){a.removeClass(b)}function l(b,c){return a.includes(b.name,c)}function m(b,c){return a.is(b.name,c)}var n,o,p=[],q={};n=c(e.uiSrefActiveEq||"",!1)(b);try{o=b.$eval(e.uiSrefActive)}catch(r){}o=o||c(e.uiSrefActive||"",!1)(b),O(o)&&Q(o,function(c,d){if(N(c)){var e=B(c,a.current.name);g(e.state,b.$eval(e.paramExpr),d)}}),this.$$addStateInfo=function(a,b){if(!(O(o)&&p.length>0)){var c=g(a,b,o);return i(),c}},b.$on("$stateChangeSuccess",i),i()}]}}function J(a){var b=function(b,c){return a.is(b,c)};return b.$stateful=!0,b}function K(a){var b=function(b,c,d){return a.includes(b,c,d)};return b.$stateful=!0,b}var L=b.isDefined,M=b.isFunction,N=b.isString,O=b.isObject,P=b.isArray,Q=b.forEach,R=b.extend,S=b.copy,T=b.toJson;b.module("ui.router.util",["ng"]),b.module("ui.router.router",["ui.router.util"]),b.module("ui.router.state",["ui.router.router","ui.router.util"]),b.module("ui.router",["ui.router.state"]),b.module("ui.router.compat",["ui.router"]),p.$inject=["$q","$injector"],b.module("ui.router.util").service("$resolve",p),q.$inject=["$http","$templateCache","$injector"],b.module("ui.router.util").service("$templateFactory",q);var U;r.prototype.concat=function(a,b){var c={caseInsensitive:U.caseInsensitive(),strict:U.strictMode(),squash:U.defaultSquashPolicy()};return new r(this.sourcePath+a+this.sourceSearch,R(c,b),this)},r.prototype.toString=function(){return this.source},r.prototype.exec=function(a,b){function c(a){function b(a){return a.split("").reverse().join("")}function c(a){return a.replace(/\\-/g,"-")}var d=b(a).split(/-(?!\\)/),e=o(d,b);return o(e,c).reverse()}var d=this.regexp.exec(a);if(!d)return null;b=b||{};var e,f,g,h=this.parameters(),i=h.length,j=this.segments.length-1,k={};if(j!==d.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");var l,m;for(e=0;j>e;e++){for(g=h[e],l=this.params[g],m=d[e+1],f=0;f<l.replace.length;f++)l.replace[f].from===m&&(m=l.replace[f].to);m&&l.array===!0&&(m=c(m)),L(m)&&(m=l.type.decode(m)),k[g]=l.value(m)}for(;i>e;e++){for(g=h[e],k[g]=this.params[g].value(b[g]),l=this.params[g],m=b[g],f=0;f<l.replace.length;f++)l.replace[f].from===m&&(m=l.replace[f].to);L(m)&&(m=l.type.decode(m)),k[g]=l.value(m)}return k},r.prototype.parameters=function(a){return L(a)?this.params[a]||null:this.$$paramNames},r.prototype.validates=function(a){return this.params.$$validates(a)},r.prototype.format=function(a){function b(a){return encodeURIComponent(a).replace(/-/g,function(a){return"%5C%"+a.charCodeAt(0).toString(16).toUpperCase()})}a=a||{};var c=this.segments,d=this.parameters(),e=this.params;if(!this.validates(a))return null;var f,g=!1,h=c.length-1,i=d.length,j=c[0];for(f=0;i>f;f++){var k=h>f,l=d[f],m=e[l],n=m.value(a[l]),p=m.isOptional&&m.type.equals(m.value(),n),q=p?m.squash:!1,r=m.type.encode(n);if(k){var s=c[f+1],t=f+1===h;if(q===!1)null!=r&&(j+=P(r)?o(r,b).join("-"):encodeURIComponent(r)),j+=s;else if(q===!0){var u=j.match(/\/$/)?/\/?(.*)/:/(.*)/;j+=s.match(u)[1]}else N(q)&&(j+=q+s);t&&m.squash===!0&&"/"===j.slice(-1)&&(j=j.slice(0,-1))}else{if(null==r||p&&q!==!1)continue;if(P(r)||(r=[r]),0===r.length)continue;r=o(r,encodeURIComponent).join("&"+l+"="),j+=(g?"&":"?")+(l+"="+r),g=!0}}return j},s.prototype.is=function(a,b){return!0},s.prototype.encode=function(a,b){return a},s.prototype.decode=function(a,b){return a},s.prototype.equals=function(a,b){return a==b},s.prototype.$subPattern=function(){var a=this.pattern.toString();return a.substr(1,a.length-2)},s.prototype.pattern=/.*/,s.prototype.toString=function(){return"{Type:"+this.name+"}"},s.prototype.$normalize=function(a){return this.is(a)?a:this.decode(a)},s.prototype.$asArray=function(a,b){function d(a,b){function d(a,b){return function(){return a[b].apply(a,arguments)}}function e(a){return P(a)?a:L(a)?[a]:[]}function f(a){switch(a.length){case 0:return c;case 1:return"auto"===b?a[0]:a;default:return a}}function g(a){return!a}function h(a,b){return function(c){if(P(c)&&0===c.length)return c;c=e(c);var d=o(c,a);return b===!0?0===n(d,g).length:f(d)}}function i(a){return function(b,c){var d=e(b),f=e(c);if(d.length!==f.length)return!1;for(var g=0;g<d.length;g++)if(!a(d[g],f[g]))return!1;return!0}}this.encode=h(d(a,"encode")),this.decode=h(d(a,"decode")),this.is=h(d(a,"is"),!0),this.equals=i(d(a,"equals")),this.pattern=a.pattern,this.$normalize=h(d(a,"$normalize")),this.name=a.name,this.$arrayMode=b}if(!a)return this;if("auto"===a&&!b)throw new Error("'auto' array mode is for query parameters only");
return new d(this,a)},b.module("ui.router.util").provider("$urlMatcherFactory",t),b.module("ui.router.util").run(["$urlMatcherFactory",function(a){}]),u.$inject=["$locationProvider","$urlMatcherFactoryProvider"],b.module("ui.router.router").provider("$urlRouter",u),v.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"],b.module("ui.router.state").factory("$stateParams",function(){return{}}).constant("$state.runtime",{autoinject:!0}).provider("$state",v).run(["$injector",function(a){a.get("$state.runtime").autoinject&&a.get("$state")}]),w.$inject=[],b.module("ui.router.state").provider("$view",w),b.module("ui.router.state").provider("$uiViewScroll",x),y.$inject=["$state","$injector","$uiViewScroll","$interpolate","$q"],z.$inject=["$compile","$controller","$state","$interpolate"],b.module("ui.router.state").directive("uiView",y),b.module("ui.router.state").directive("uiView",z),G.$inject=["$state","$timeout"],H.$inject=["$state","$timeout"],I.$inject=["$state","$stateParams","$interpolate"],b.module("ui.router.state").directive("uiSref",G).directive("uiSrefActive",I).directive("uiSrefActiveEq",I).directive("uiState",H),J.$inject=["$state"],K.$inject=["$state"],b.module("ui.router.state").filter("isState",J).filter("includedByState",K)}(window,window.angular),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(a){"use strict";var b=a.fn.jquery.split(" ")[0].split(".");if(b[0]<2&&b[1]<9||1==b[0]&&9==b[1]&&b[2]<1||b[0]>2)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 3")}(jQuery),+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one("bsTransitionEnd",function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){return a(b.target).is(this)?b.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var c=a(this),e=c.data("bs.alert");e||c.data("bs.alert",e=new d(this)),"string"==typeof b&&e[b].call(c)})}var c='[data-dismiss="alert"]',d=function(b){a(b).on("click",c,this.close)};d.VERSION="3.3.6",d.TRANSITION_DURATION=150,d.prototype.close=function(b){function c(){g.detach().trigger("closed.bs.alert").remove()}var e=a(this),f=e.attr("data-target");f||(f=e.attr("href"),f=f&&f.replace(/.*(?=#[^\s]*$)/,""));var g=a(f);b&&b.preventDefault(),g.length||(g=e.closest(".alert")),g.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(g.removeClass("in"),a.support.transition&&g.hasClass("fade")?g.one("bsTransitionEnd",c).emulateTransitionEnd(d.TRANSITION_DURATION):c())};var e=a.fn.alert;a.fn.alert=b,a.fn.alert.Constructor=d,a.fn.alert.noConflict=function(){return a.fn.alert=e,this},a(document).on("click.bs.alert.data-api",c,d.prototype.close)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof b&&b;e||d.data("bs.button",e=new c(this,f)),"toggle"==b?e.toggle():b&&e.setState(b)})}var c=function(b,d){this.$element=a(b),this.options=a.extend({},c.DEFAULTS,d),this.isLoading=!1};c.VERSION="3.3.6",c.DEFAULTS={loadingText:"loading..."},c.prototype.setState=function(b){var c="disabled",d=this.$element,e=d.is("input")?"val":"html",f=d.data();b+="Text",null==f.resetText&&d.data("resetText",d[e]()),setTimeout(a.proxy(function(){d[e](null==f[b]?this.options[b]:f[b]),"loadingText"==b?(this.isLoading=!0,d.addClass(c).attr(c,c)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c))},this),0)},c.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var c=this.$element.find("input");"radio"==c.prop("type")?(c.prop("checked")&&(a=!1),b.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==c.prop("type")&&(c.prop("checked")!==this.$element.hasClass("active")&&(a=!1),this.$element.toggleClass("active")),c.prop("checked",this.$element.hasClass("active")),a&&c.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var d=a.fn.button;a.fn.button=b,a.fn.button.Constructor=c,a.fn.button.noConflict=function(){return a.fn.button=d,this},a(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(c){var d=a(c.target);d.hasClass("btn")||(d=d.closest(".btn")),b.call(d,"toggle"),a(c.target).is('input[type="radio"]')||a(c.target).is('input[type="checkbox"]')||c.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(b){a(b.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(b.type))})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},c.DEFAULTS,d.data(),"object"==typeof b&&b),g="string"==typeof b?b:f.slide;e||d.data("bs.carousel",e=new c(this,f)),"number"==typeof b?e.to(b):g?e[g]():f.interval&&e.pause().cycle()})}var c=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",a.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",a.proxy(this.pause,this)).on("mouseleave.bs.carousel",a.proxy(this.cycle,this))};c.VERSION="3.3.6",c.TRANSITION_DURATION=600,c.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},c.prototype.keydown=function(a){if(!/input|textarea/i.test(a.target.tagName)){switch(a.which){case 37:this.prev();break;case 39:this.next();break;default:return}a.preventDefault()}},c.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},c.prototype.getItemIndex=function(a){return this.$items=a.parent().children(".item"),this.$items.index(a||this.$active)},c.prototype.getItemForDirection=function(a,b){var c=this.getItemIndex(b),d="prev"==a&&0===c||"next"==a&&c==this.$items.length-1;if(d&&!this.options.wrap)return b;var e="prev"==a?-1:1,f=(c+e)%this.$items.length;return this.$items.eq(f)},c.prototype.to=function(a){var b=this,c=this.getItemIndex(this.$active=this.$element.find(".item.active"));return a>this.$items.length-1||0>a?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){b.to(a)}):c==a?this.pause().cycle():this.slide(a>c?"next":"prev",this.$items.eq(a))},c.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},c.prototype.next=function(){return this.sliding?void 0:this.slide("next")},c.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},c.prototype.slide=function(b,d){var e=this.$element.find(".item.active"),f=d||this.getItemForDirection(b,e),g=this.interval,h="next"==b?"left":"right",i=this;if(f.hasClass("active"))return this.sliding=!1;var j=f[0],k=a.Event("slide.bs.carousel",{relatedTarget:j,direction:h});if(this.$element.trigger(k),!k.isDefaultPrevented()){if(this.sliding=!0,g&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var l=a(this.$indicators.children()[this.getItemIndex(f)]);l&&l.addClass("active")}var m=a.Event("slid.bs.carousel",{relatedTarget:j,direction:h});return a.support.transition&&this.$element.hasClass("slide")?(f.addClass(b),f[0].offsetWidth,e.addClass(h),f.addClass(h),e.one("bsTransitionEnd",function(){f.removeClass([b,h].join(" ")).addClass("active"),e.removeClass(["active",h].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger(m)},0)}).emulateTransitionEnd(c.TRANSITION_DURATION)):(e.removeClass("active"),f.addClass("active"),this.sliding=!1,this.$element.trigger(m)),g&&this.cycle(),this}};var d=a.fn.carousel;a.fn.carousel=b,a.fn.carousel.Constructor=c,a.fn.carousel.noConflict=function(){return a.fn.carousel=d,this};var e=function(c){var d,e=a(this),f=a(e.attr("data-target")||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""));if(f.hasClass("carousel")){var g=a.extend({},f.data(),e.data()),h=e.attr("data-slide-to");h&&(g.interval=!1),b.call(f,g),h&&f.data("bs.carousel").to(h),c.preventDefault()}};a(document).on("click.bs.carousel.data-api","[data-slide]",e).on("click.bs.carousel.data-api","[data-slide-to]",e),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var c=a(this);b.call(c,c.data())})})}(jQuery),+function(a){"use strict";function b(b){var c,d=b.attr("data-target")||(c=b.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"");return a(d)}function c(b){return this.each(function(){var c=a(this),e=c.data("bs.collapse"),f=a.extend({},d.DEFAULTS,c.data(),"object"==typeof b&&b);!e&&f.toggle&&/show|hide/.test(b)&&(f.toggle=!1),e||c.data("bs.collapse",e=new d(this,f)),"string"==typeof b&&e[b]()})}var d=function(b,c){this.$element=a(b),this.options=a.extend({},d.DEFAULTS,c),this.$trigger=a('[data-toggle="collapse"][href="#'+b.id+'"],[data-toggle="collapse"][data-target="#'+b.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};d.VERSION="3.3.6",d.TRANSITION_DURATION=350,d.DEFAULTS={toggle:!0},d.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},d.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b,e=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(e&&e.length&&(b=e.data("bs.collapse"),b&&b.transitioning))){var f=a.Event("show.bs.collapse");if(this.$element.trigger(f),!f.isDefaultPrevented()){e&&e.length&&(c.call(e,"hide"),b||e.data("bs.collapse",null));var g=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[g](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var h=function(){this.$element.removeClass("collapsing").addClass("collapse in")[g](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return h.call(this);var i=a.camelCase(["scroll",g].join("-"));this.$element.one("bsTransitionEnd",a.proxy(h,this)).emulateTransitionEnd(d.TRANSITION_DURATION)[g](this.$element[0][i])}}}},d.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var e=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return a.support.transition?void this.$element[c](0).one("bsTransitionEnd",a.proxy(e,this)).emulateTransitionEnd(d.TRANSITION_DURATION):e.call(this)}}},d.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},d.prototype.getParent=function(){return a(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(a.proxy(function(c,d){var e=a(d);this.addAriaAndCollapsedClass(b(e),e)},this)).end()},d.prototype.addAriaAndCollapsedClass=function(a,b){var c=a.hasClass("in");a.attr("aria-expanded",c),b.toggleClass("collapsed",!c).attr("aria-expanded",c)};var e=a.fn.collapse;a.fn.collapse=c,a.fn.collapse.Constructor=d,a.fn.collapse.noConflict=function(){return a.fn.collapse=e,this},a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(d){var e=a(this);e.attr("data-target")||d.preventDefault();var f=b(e),g=f.data("bs.collapse"),h=g?"toggle":e.data();c.call(f,h)})}(jQuery),+function(a){"use strict";function b(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}function c(c){c&&3===c.which||(a(e).remove(),a(f).each(function(){var d=a(this),e=b(d),f={relatedTarget:this};e.hasClass("open")&&(c&&"click"==c.type&&/input|textarea/i.test(c.target.tagName)&&a.contains(e[0],c.target)||(e.trigger(c=a.Event("hide.bs.dropdown",f)),c.isDefaultPrevented()||(d.attr("aria-expanded","false"),e.removeClass("open").trigger(a.Event("hidden.bs.dropdown",f)))))}))}function d(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new g(this)),"string"==typeof b&&d[b].call(c)})}var e=".dropdown-backdrop",f='[data-toggle="dropdown"]',g=function(b){a(b).on("click.bs.dropdown",this.toggle)};g.VERSION="3.3.6",g.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=b(e),g=f.hasClass("open");if(c(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(a(this)).on("click",c);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),f.toggleClass("open").trigger(a.Event("shown.bs.dropdown",h))}return!1}},g.prototype.keydown=function(c){if(/(38|40|27|32)/.test(c.which)&&!/input|textarea/i.test(c.target.tagName)){var d=a(this);if(c.preventDefault(),c.stopPropagation(),!d.is(".disabled, :disabled")){var e=b(d),g=e.hasClass("open");if(!g&&27!=c.which||g&&27==c.which)return 27==c.which&&e.find(f).trigger("focus"),d.trigger("click");var h=" li:not(.disabled):visible a",i=e.find(".dropdown-menu"+h);if(i.length){var j=i.index(c.target);38==c.which&&j>0&&j--,40==c.which&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger("focus")}}}};var h=a.fn.dropdown;a.fn.dropdown=d,a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on("click.bs.dropdown.data-api",c).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",f,g.prototype.toggle).on("keydown.bs.dropdown.data-api",f,g.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",g.prototype.keydown)}(jQuery),+function(a){"use strict";function b(b,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("bs.modal",f=new c(this,g)),"string"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};c.VERSION="3.3.6",c.TRANSITION_DURATION=300,c.BACKDROP_TRANSITION_DURATION=150,c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var d=this,e=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){d.$element.one("mouseup.dismiss.bs.modal",function(b){a(b.target).is(d.$element)&&(d.ignoreBackdropClick=!0)})}),this.backdrop(function(){var e=a.support.transition&&d.$element.hasClass("fade");d.$element.parent().length||d.$element.appendTo(d.$body),d.$element.show().scrollTop(0),d.adjustDialog(),e&&d.$element[0].offsetWidth,d.$element.addClass("in"),d.enforceFocus();var f=a.Event("shown.bs.modal",{relatedTarget:b});e?d.$dialog.one("bsTransitionEnd",function(){d.$element.trigger("focus").trigger(f)}).emulateTransitionEnd(c.TRANSITION_DURATION):d.$element.trigger("focus").trigger(f)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(c.TRANSITION_DURATION):this.hideModal())},c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},c.prototype.resize=function(){this.isShown?a(window).on("resize.bs.modal",a.proxy(this.handleUpdate,this)):a(window).off("resize.bs.modal")},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$body.removeClass("modal-open"),a.resetAdjustments(),a.resetScrollbar(),a.$element.trigger("hidden.bs.modal")})},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var d=this,e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var f=a.support.transition&&e;if(this.$backdrop=a(document.createElement("div")).addClass("modal-backdrop "+e).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),f&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;f?this.$backdrop.one("bsTransitionEnd",b).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var g=function(){d.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",g).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):g()}else b&&b()},c.prototype.handleUpdate=function(){this.adjustDialog()},c.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:""})},c.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},c.prototype.checkScrollbar=function(){var a=window.innerWidth;if(!a){var b=document.documentElement.getBoundingClientRect();a=b.right-Math.abs(b.left)}this.bodyIsOverflowing=document.body.clientWidth<a,this.scrollbarWidth=this.measureScrollbar()},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",a+this.scrollbarWidth)},c.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},c.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var d=a(this),e=d.attr("href"),f=a(d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),g=f.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is("a")&&c.preventDefault(),f.one("show.bs.modal",function(a){a.isDefaultPrevented()||f.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})}),b.call(f,g,this)})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof b&&b;!e&&/destroy|hide/.test(b)||(e||d.data("bs.tooltip",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",a,b)};c.VERSION="3.3.6",c.TRANSITION_DURATION=150,c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},c.prototype.init=function(b,c,d){if(this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(a.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},c.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},c.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusin"==b.type?"focus":"hover"]=!0),c.tip().hasClass("in")||"in"==c.hoverState?void(c.hoverState="in"):(clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show())},c.prototype.isInStateTrue=function(){for(var a in this.inState)if(this.inState[a])return!0;return!1},c.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusout"==b.type?"focus":"hover"]=!1),c.isInStateTrue()?void 0:(clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide())},c.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var d=a.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!d)return;var e=this,f=this.tip(),g=this.getUID(this.type);this.setContent(),f.attr("id",g),this.$element.attr("aria-describedby",g),this.options.animation&&f.addClass("fade");var h="function"==typeof this.options.placement?this.options.placement.call(this,f[0],this.$element[0]):this.options.placement,i=/\s?auto?\s?/i,j=i.test(h);j&&(h=h.replace(i,"")||"top"),f.detach().css({top:0,left:0,display:"block"}).addClass(h).data("bs."+this.type,this),this.options.container?f.appendTo(this.options.container):f.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var k=this.getPosition(),l=f[0].offsetWidth,m=f[0].offsetHeight;if(j){var n=h,o=this.getPosition(this.$viewport);h="bottom"==h&&k.bottom+m>o.bottom?"top":"top"==h&&k.top-m<o.top?"bottom":"right"==h&&k.right+l>o.width?"left":"left"==h&&k.left-l<o.left?"right":h,f.removeClass(n).addClass(h)}var p=this.getCalculatedOffset(h,k,l,m);this.applyPlacement(p,h);var q=function(){var a=e.hoverState;e.$element.trigger("shown.bs."+e.type),e.hoverState=null,"out"==a&&e.leave(e)};a.support.transition&&this.$tip.hasClass("fade")?f.one("bsTransitionEnd",q).emulateTransitionEnd(c.TRANSITION_DURATION):q()}},c.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top+=g,b.left+=h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;"top"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=/top|bottom/.test(c),m=l?2*k.left-e+i:2*k.top-f+j,n=l?"offsetWidth":"offsetHeight";d.offset(b),this.replaceArrow(m,d[0][n],l)},c.prototype.replaceArrow=function(a,b,c){this.arrow().css(c?"left":"top",50*(1-a/b)+"%").css(c?"top":"left","")},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},c.prototype.hide=function(b){function d(){"in"!=e.hoverState&&f.detach(),e.$element.removeAttr("aria-describedby").trigger("hidden.bs."+e.type),b&&b()}var e=this,f=a(this.$tip),g=a.Event("hide.bs."+this.type);return this.$element.trigger(g),g.isDefaultPrevented()?void 0:(f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one("bsTransitionEnd",d).emulateTransitionEnd(c.TRANSITION_DURATION):d(),this.hoverState=null,this)},c.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},c.prototype.hasContent=function(){return this.getTitle()},c.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d="BODY"==c.tagName,e=c.getBoundingClientRect();null==e.width&&(e=a.extend({},e,{width:e.right-e.left,height:e.bottom-e.top}));var f=d?{top:0,left:0}:b.offset(),g={scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop()},h=d?{width:a(window).width(),height:a(window).height()}:null;return a.extend({},e,g,h,f)},c.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},c.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.right&&(e.left=g.left+g.width-k)}return e},c.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},c.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a},c.prototype.tip=function(){if(!this.$tip&&(this.$tip=a(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},c.prototype.enable=function(){this.enabled=!0},c.prototype.disable=function(){this.enabled=!1},c.prototype.toggleEnabled=function(){this.enabled=!this.enabled},c.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data("bs."+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c))),b?(c.inState.click=!c.inState.click,c.isInStateTrue()?c.enter(c):c.leave(c)):c.tip().hasClass("in")?c.leave(c):c.enter(c)},c.prototype.destroy=function(){var a=this;clearTimeout(this.timeout),this.hide(function(){a.$element.off("."+a.type).removeData("bs."+a.type),a.$tip&&a.$tip.detach(),a.$tip=null,a.$arrow=null,a.$viewport=null})};var d=a.fn.tooltip;a.fn.tooltip=b,a.fn.tooltip.Constructor=c,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=d,this}}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof b&&b;!e&&/destroy|hide/.test(b)||(e||d.data("bs.popover",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");c.VERSION="3.3.6",c.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),c.prototype.constructor=c,c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},c.prototype.hasContent=function(){return this.getTitle()||this.getContent()},c.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var d=a.fn.popover;a.fn.popover=b,a.fn.popover.Constructor=c,a.fn.popover.noConflict=function(){return a.fn.popover=d,this}}(jQuery),+function(a){"use strict";function b(c,d){this.$body=a(document.body),this.$scrollElement=a(a(c).is(document.body)?window:c),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",a.proxy(this.process,this)),this.refresh(),this.process()}function c(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})}b.VERSION="3.3.6",b.DEFAULTS={offset:10},b.prototype.getScrollHeight=function(){
return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},b.prototype.refresh=function(){var b=this,c="offset",d=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),a.isWindow(this.$scrollElement[0])||(c="position",d=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var b=a(this),e=b.data("target")||b.attr("href"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(":visible")&&[[f[c]().top+d,e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]),b.targets.push(this[1])})},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.getScrollHeight(),d=this.options.offset+c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(this.scrollHeight!=c&&this.refresh(),b>=d)return g!=(a=f[f.length-1])&&this.activate(a);if(g&&b<e[0])return this.activeTarget=null,this.clear();for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(void 0===e[a+1]||b<e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){this.activeTarget=b,this.clear();var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")},b.prototype.clear=function(){a(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var d=a.fn.scrollspy;a.fn.scrollspy=c,a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=d,this},a(window).on("load.bs.scrollspy.data-api",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);c.call(b,b.data())})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new c(this)),"string"==typeof b&&e[b]()})}var c=function(b){this.element=a(b)};c.VERSION="3.3.6",c.TRANSITION_DURATION=150,c.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a"),f=a.Event("hide.bs.tab",{relatedTarget:b[0]}),g=a.Event("show.bs.tab",{relatedTarget:e[0]});if(e.trigger(f),b.trigger(g),!g.isDefaultPrevented()&&!f.isDefaultPrevented()){var h=a(d);this.activate(b.closest("li"),c),this.activate(h,h.parent(),function(){e.trigger({type:"hidden.bs.tab",relatedTarget:b[0]}),b.trigger({type:"shown.bs.tab",relatedTarget:e[0]})})}}},c.prototype.activate=function(b,d,e){function f(){g.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),b.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),h?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu").length&&b.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),e&&e()}var g=d.find("> .active"),h=e&&a.support.transition&&(g.length&&g.hasClass("fade")||!!d.find("> .fade").length);g.length&&h?g.one("bsTransitionEnd",f).emulateTransitionEnd(c.TRANSITION_DURATION):f(),g.removeClass("in")};var d=a.fn.tab;a.fn.tab=b,a.fn.tab.Constructor=c,a.fn.tab.noConflict=function(){return a.fn.tab=d,this};var e=function(c){c.preventDefault(),b.call(a(this),"show")};a(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',e).on("click.bs.tab.data-api",'[data-toggle="pill"]',e)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof b&&b;e||d.data("bs.affix",e=new c(this,f)),"string"==typeof b&&e[b]()})}var c=function(b,d){this.options=a.extend({},c.DEFAULTS,d),this.$target=a(this.options.target).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(b),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};c.VERSION="3.3.6",c.RESET="affix affix-top affix-bottom",c.DEFAULTS={offset:0,target:window},c.prototype.getState=function(a,b,c,d){var e=this.$target.scrollTop(),f=this.$element.offset(),g=this.$target.height();if(null!=c&&"top"==this.affixed)return c>e?"top":!1;if("bottom"==this.affixed)return null!=c?e+this.unpin<=f.top?!1:"bottom":a-d>=e+g?!1:"bottom";var h=null==this.affixed,i=h?e:f.top,j=h?g:b;return null!=c&&c>=e?"top":null!=d&&i+j>=a-d?"bottom":!1},c.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(c.RESET).addClass("affix");var a=this.$target.scrollTop(),b=this.$element.offset();return this.pinnedOffset=b.top-a},c.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},c.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b=this.$element.height(),d=this.options.offset,e=d.top,f=d.bottom,g=Math.max(a(document).height(),a(document.body).height());"object"!=typeof d&&(f=e=d),"function"==typeof e&&(e=d.top(this.$element)),"function"==typeof f&&(f=d.bottom(this.$element));var h=this.getState(g,b,e,f);if(this.affixed!=h){null!=this.unpin&&this.$element.css("top","");var i="affix"+(h?"-"+h:""),j=a.Event(i+".bs.affix");if(this.$element.trigger(j),j.isDefaultPrevented())return;this.affixed=h,this.unpin="bottom"==h?this.getPinnedOffset():null,this.$element.removeClass(c.RESET).addClass(i).trigger(i.replace("affix","affixed")+".bs.affix")}"bottom"==h&&this.$element.offset({top:g-b-f})}};var d=a.fn.affix;a.fn.affix=b,a.fn.affix.Constructor=c,a.fn.affix.noConflict=function(){return a.fn.affix=d,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var c=a(this),d=c.data();d.offset=d.offset||{},null!=d.offsetBottom&&(d.offset.bottom=d.offsetBottom),null!=d.offsetTop&&(d.offset.top=d.offsetTop),b.call(c,d)})})}(jQuery),function(a,b){"function"==typeof define&&define.amd?define(a):"undefined"!=typeof module&&"object"==typeof exports?module.exports=a():b.rangy=a()}(function(){function a(a,b){var c=typeof a[b];return c==u||!(c!=t||!a[b])||"unknown"==c}function b(a,b){return!(typeof a[b]!=t||!a[b])}function c(a,b){return typeof a[b]!=v}function d(a){return function(b,c){for(var d=c.length;d--;)if(!a(b,c[d]))return!1;return!0}}function e(a){return a&&A(a,z)&&C(a,y)}function f(a){return b(a,"body")?a.body:a.getElementsByTagName("body")[0]}function g(b){typeof console!=v&&a(console,"log")&&console.log(b)}function h(a,b){F&&b?alert(a):g(a)}function i(a){H.initialized=!0,H.supported=!1,h("Rangy is not supported in this environment. Reason: "+a,H.config.alertOnFail)}function j(a){h("Rangy warning: "+a,H.config.alertOnWarn)}function k(a){return a.message||a.description||String(a)}function l(){if(F&&!H.initialized){var b,c=!1,d=!1;a(document,"createRange")&&(b=document.createRange(),A(b,x)&&C(b,w)&&(c=!0));var h=f(document);if(!h||"body"!=h.nodeName.toLowerCase())return void i("No body element found");if(h&&a(h,"createTextRange")&&(b=h.createTextRange(),e(b)&&(d=!0)),!c&&!d)return void i("Neither Range nor TextRange are available");H.initialized=!0,H.features={implementsDomRange:c,implementsTextRange:d};var j,l;for(var m in E)(j=E[m])instanceof p&&j.init(j,H);for(var n=0,o=K.length;o>n;++n)try{K[n](H)}catch(q){l="Rangy init listener threw an exception. Continuing. Detail: "+k(q),g(l)}}}function m(a,b,c){c&&(a+=" in module "+c.name),H.warn("DEPRECATED: "+a+" is deprecated. Please use "+b+" instead.")}function n(a,b,c,d){a[b]=function(){return m(b,c,d),a[c].apply(a,G.toArray(arguments))}}function o(a){a=a||window,l();for(var b=0,c=L.length;c>b;++b)L[b](a)}function p(a,b,c){this.name=a,this.dependencies=b,this.initialized=!1,this.supported=!1,this.initializer=c}function q(a,b,c){var d=new p(a,b,function(b){if(!b.initialized){b.initialized=!0;try{c(H,b),b.supported=!0}catch(d){var e="Module '"+a+"' failed to load: "+k(d);g(e),d.stack&&g(d.stack)}}});return E[a]=d,d}function r(){}function s(){}var t="object",u="function",v="undefined",w=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],x=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],y=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],z=["collapse","compareEndPoints","duplicate","moveToElementText","parentElement","select","setEndPoint","getBoundingClientRect"],A=d(a),B=d(b),C=d(c),D=[].forEach?function(a,b){a.forEach(b)}:function(a,b){for(var c=0,d=a.length;d>c;++c)b(a[c],c)},E={},F=typeof window!=v&&typeof document!=v,G={isHostMethod:a,isHostObject:b,isHostProperty:c,areHostMethods:A,areHostObjects:B,areHostProperties:C,isTextRange:e,getBody:f,forEach:D},H={version:"1.3.0",initialized:!1,isBrowser:F,supported:!0,util:G,features:{},modules:E,config:{alertOnFail:!1,alertOnWarn:!1,preferTextRange:!1,autoInitialize:typeof rangyAutoInitialize==v?!0:rangyAutoInitialize}};H.fail=i,H.warn=j;var I;({}).hasOwnProperty?(G.extend=I=function(a,b,c){var d,e;for(var f in b)b.hasOwnProperty(f)&&(d=a[f],e=b[f],c&&null!==d&&"object"==typeof d&&null!==e&&"object"==typeof e&&I(d,e,!0),a[f]=e);return b.hasOwnProperty("toString")&&(a.toString=b.toString),a},G.createOptions=function(a,b){var c={};return I(c,b),a&&I(c,a),c}):i("hasOwnProperty not supported"),F||i("Rangy can only run in a browser"),function(){var a;if(F){var b=document.createElement("div");b.appendChild(document.createElement("span"));var c=[].slice;try{1==c.call(b.childNodes,0)[0].nodeType&&(a=function(a){return c.call(a,0)})}catch(d){}}a||(a=function(a){for(var b=[],c=0,d=a.length;d>c;++c)b[c]=a[c];return b}),G.toArray=a}();var J;F&&(a(document,"addEventListener")?J=function(a,b,c){a.addEventListener(b,c,!1)}:a(document,"attachEvent")?J=function(a,b,c){a.attachEvent("on"+b,c)}:i("Document does not have required addEventListener or attachEvent method"),G.addListener=J);var K=[];G.deprecationNotice=m,G.createAliasForDeprecatedMethod=n,H.init=l,H.addInitListener=function(a){H.initialized?a(H):K.push(a)};var L=[];H.addShimListener=function(a){L.push(a)},F&&(H.shim=H.createMissingNativeApi=o,n(H,"createMissingNativeApi","shim")),p.prototype={init:function(){for(var a,b,c=this.dependencies||[],d=0,e=c.length;e>d;++d){if(b=c[d],a=E[b],!(a&&a instanceof p))throw new Error("required module '"+b+"' not found");if(a.init(),!a.supported)throw new Error("required module '"+b+"' not supported")}this.initializer(this)},fail:function(a){throw this.initialized=!0,this.supported=!1,new Error(a)},warn:function(a){H.warn("Module "+this.name+": "+a)},deprecationNotice:function(a,b){H.warn("DEPRECATED: "+a+" in module "+this.name+" is deprecated. Please use "+b+" instead")},createError:function(a){return new Error("Error in Rangy "+this.name+" module: "+a)}},H.createModule=function(a){var b,c;2==arguments.length?(b=arguments[1],c=[]):(b=arguments[2],c=arguments[1]);var d=q(a,c,b);H.initialized&&H.supported&&d.init()},H.createCoreModule=function(a,b,c){q(a,b,c)},H.RangePrototype=r,H.rangePrototype=new r,H.selectionPrototype=new s,H.createCoreModule("DomUtil",[],function(a,b){function c(a){var b;return typeof a.namespaceURI==F||null===(b=a.namespaceURI)||"http://www.w3.org/1999/xhtml"==b}function d(a){var b=a.parentNode;return 1==b.nodeType?b:null}function e(a){for(var b=0;a=a.previousSibling;)++b;return b}function f(a){switch(a.nodeType){case 7:case 10:return 0;case 3:case 8:return a.length;default:return a.childNodes.length}}function g(a,b){var c,d=[];for(c=a;c;c=c.parentNode)d.push(c);for(c=b;c;c=c.parentNode)if(K(d,c))return c;return null}function h(a,b,c){for(var d=c?b:b.parentNode;d;){if(d===a)return!0;d=d.parentNode}return!1}function i(a,b){return h(a,b,!0)}function j(a,b,c){for(var d,e=c?a:a.parentNode;e;){if(d=e.parentNode,d===b)return e;e=d}return null}function k(a){var b=a.nodeType;return 3==b||4==b||8==b}function l(a){if(!a)return!1;var b=a.nodeType;return 3==b||8==b}function m(a,b){var c=b.nextSibling,d=b.parentNode;return c?d.insertBefore(a,c):d.appendChild(a),a}function n(a,b,c){var d=a.cloneNode(!1);if(d.deleteData(0,b),a.deleteData(b,a.length-b),m(d,a),c)for(var f,g=0;f=c[g++];)f.node==a&&f.offset>b?(f.node=d,f.offset-=b):f.node==a.parentNode&&f.offset>e(a)&&++f.offset;return d}function o(a){if(9==a.nodeType)return a;if(typeof a.ownerDocument!=F)return a.ownerDocument;if(typeof a.document!=F)return a.document;if(a.parentNode)return o(a.parentNode);throw b.createError("getDocument: no document found for node")}function p(a){var c=o(a);if(typeof c.defaultView!=F)return c.defaultView;if(typeof c.parentWindow!=F)return c.parentWindow;throw b.createError("Cannot get a window object for node")}function q(a){if(typeof a.contentDocument!=F)return a.contentDocument;if(typeof a.contentWindow!=F)return a.contentWindow.document;throw b.createError("getIframeDocument: No Document object found for iframe element")}function r(a){if(typeof a.contentWindow!=F)return a.contentWindow;if(typeof a.contentDocument!=F)return a.contentDocument.defaultView;throw b.createError("getIframeWindow: No Window object found for iframe element")}function s(a){return a&&G.isHostMethod(a,"setTimeout")&&G.isHostObject(a,"document")}function t(a,b,c){var d;if(a?G.isHostProperty(a,"nodeType")?d=1==a.nodeType&&"iframe"==a.tagName.toLowerCase()?q(a):o(a):s(a)&&(d=a.document):d=document,!d)throw b.createError(c+"(): Parameter must be a Window object or DOM node");return d}function u(a){for(var b;b=a.parentNode;)a=b;return a}function v(a,c,d,f){var h,i,k,l,m;if(a==d)return c===f?0:f>c?-1:1;if(h=j(d,a,!0))return c<=e(h)?-1:1;if(h=j(a,d,!0))return e(h)<f?-1:1;if(i=g(a,d),!i)throw new Error("comparePoints error: nodes have no common ancestor");if(k=a===i?i:j(a,i,!0),l=d===i?i:j(d,i,!0),k===l)throw b.createError("comparePoints got to case 4 and childA and childB are the same!");for(m=i.firstChild;m;){if(m===k)return-1;if(m===l)return 1;m=m.nextSibling}}function w(a){var b;try{return b=a.parentNode,!1}catch(c){return!0}}function x(a){if(!a)return"[No node]";if(L&&w(a))return"[Broken node]";if(k(a))return'"'+a.data+'"';if(1==a.nodeType){var b=a.id?' id="'+a.id+'"':"";return"<"+a.nodeName+b+">[index:"+e(a)+",length:"+a.childNodes.length+"]["+(a.innerHTML||"[innerHTML not supported]").slice(0,25)+"]"}return a.nodeName}function y(a){for(var b,c=o(a).createDocumentFragment();b=a.firstChild;)c.appendChild(b);return c}function z(a,b,c){var d=H(a),e=a.createElement("div");e.contentEditable=""+!!c,b&&(e.innerHTML=b);var f=d.firstChild;return f?d.insertBefore(e,f):d.appendChild(e),e}function A(a){return a.parentNode.removeChild(a)}function B(a){this.root=a,this._next=a}function C(a){return new B(a)}function D(a,b){this.node=a,this.offset=b}function E(a){this.code=this[a],this.codeName=a,this.message="DOMException: "+this.codeName}var F="undefined",G=a.util,H=G.getBody;G.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||b.fail("document missing a Node creation method"),G.isHostMethod(document,"getElementsByTagName")||b.fail("document missing getElementsByTagName method");var I=document.createElement("div");G.areHostMethods(I,["insertBefore","appendChild","cloneNode"]||!G.areHostObjects(I,["previousSibling","nextSibling","childNodes","parentNode"]))||b.fail("Incomplete Element implementation"),G.isHostProperty(I,"innerHTML")||b.fail("Element is missing innerHTML property");var J=document.createTextNode("test");G.areHostMethods(J,["splitText","deleteData","insertData","appendData","cloneNode"]||!G.areHostObjects(I,["previousSibling","nextSibling","childNodes","parentNode"])||!G.areHostProperties(J,["data"]))||b.fail("Incomplete Text Node implementation");var K=function(a,b){for(var c=a.length;c--;)if(a[c]===b)return!0;return!1},L=!1;!function(){var b=document.createElement("b");b.innerHTML="1";var c=b.firstChild;b.innerHTML="<br />",L=w(c),a.features.crashyTextNodes=L}();var M;typeof window.getComputedStyle!=F?M=function(a,b){return p(a).getComputedStyle(a,null)[b]}:typeof document.documentElement.currentStyle!=F?M=function(a,b){return a.currentStyle?a.currentStyle[b]:""}:b.fail("No means of obtaining computed style properties found"),B.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var a,b,c=this._current=this._next;if(this._current)if(a=c.firstChild)this._next=a;else{for(b=null;c!==this.root&&!(b=c.nextSibling);)c=c.parentNode;this._next=b}return this._current},detach:function(){this._current=this._next=this.root=null}},D.prototype={equals:function(a){return!!a&&this.node===a.node&&this.offset==a.offset},inspect:function(){return"[DomPosition("+x(this.node)+":"+this.offset+")]"},toString:function(){return this.inspect()}},E.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11,INVALID_NODE_TYPE_ERR:24},E.prototype.toString=function(){return this.message},a.dom={arrayContains:K,isHtmlNamespace:c,parentElement:d,getNodeIndex:e,getNodeLength:f,getCommonAncestor:g,isAncestorOf:h,isOrIsAncestorOf:i,getClosestAncestorIn:j,isCharacterDataNode:k,isTextOrCommentNode:l,insertAfter:m,splitDataNode:n,getDocument:o,getWindow:p,getIframeWindow:r,getIframeDocument:q,getBody:H,isWindow:s,getContentDocument:t,getRootContainer:u,comparePoints:v,isBrokenNode:w,inspectNode:x,getComputedStyleProperty:M,createTestElement:z,removeNode:A,fragmentFromNodeChildren:y,createIterator:C,DomPosition:D},a.DOMException=E}),H.createCoreModule("DomRange",["DomUtil"],function(a,b){function c(a,b){return 3!=a.nodeType&&(P(a,b.startContainer)||P(a,b.endContainer))}function d(a){return a.document||Q(a.startContainer)}function e(a){return W(a.startContainer)}function f(a){return new L(a.parentNode,O(a))}function g(a){return new L(a.parentNode,O(a)+1)}function h(a,b,c){var d=11==a.nodeType?a.firstChild:a;return N(b)?c==b.length?J.insertAfter(a,b):b.parentNode.insertBefore(a,0==c?b:S(b,c)):c>=b.childNodes.length?b.appendChild(a):b.insertBefore(a,b.childNodes[c]),d}function i(a,b,c){if(z(a),z(b),d(b)!=d(a))throw new M("WRONG_DOCUMENT_ERR");var e=R(a.startContainer,a.startOffset,b.endContainer,b.endOffset),f=R(a.endContainer,a.endOffset,b.startContainer,b.startOffset);return c?0>=e&&f>=0:0>e&&f>0}function j(a){for(var b,c,e,f=d(a.range).createDocumentFragment();c=a.next();){if(b=a.isPartiallySelectedSubtree(),c=c.cloneNode(!b),b&&(e=a.getSubtreeIterator(),c.appendChild(j(e)),e.detach()),10==c.nodeType)throw new M("HIERARCHY_REQUEST_ERR");f.appendChild(c)}return f}function k(a,b,c){var d,e;c=c||{stop:!1};for(var f,g;f=a.next();)if(a.isPartiallySelectedSubtree()){if(b(f)===!1)return void(c.stop=!0);if(g=a.getSubtreeIterator(),k(g,b,c),g.detach(),c.stop)return}else for(d=J.createIterator(f);e=d.next();)if(b(e)===!1)return void(c.stop=!0)}function l(a){for(var b;a.next();)a.isPartiallySelectedSubtree()?(b=a.getSubtreeIterator(),l(b),b.detach()):a.remove()}function m(a){for(var b,c,e=d(a.range).createDocumentFragment();b=a.next();){if(a.isPartiallySelectedSubtree()?(b=b.cloneNode(!1),c=a.getSubtreeIterator(),b.appendChild(m(c)),c.detach()):a.remove(),10==b.nodeType)throw new M("HIERARCHY_REQUEST_ERR");e.appendChild(b)}return e}function n(a,b,c){var d,e=!(!b||!b.length),f=!!c;e&&(d=new RegExp("^("+b.join("|")+")$"));var g=[];return k(new p(a,!1),function(b){if((!e||d.test(b.nodeType))&&(!f||c(b))){var h=a.startContainer;if(b!=h||!N(h)||a.startOffset!=h.length){var i=a.endContainer;b==i&&N(i)&&0==a.endOffset||g.push(b)}}}),g}function o(a){var b="undefined"==typeof a.getName?"Range":a.getName();return"["+b+"("+J.inspectNode(a.startContainer)+":"+a.startOffset+", "+J.inspectNode(a.endContainer)+":"+a.endOffset+")]"}function p(a,b){if(this.range=a,this.clonePartiallySelectedTextNodes=b,!a.collapsed){this.sc=a.startContainer,this.so=a.startOffset,this.ec=a.endContainer,this.eo=a.endOffset;var c=a.commonAncestorContainer;this.sc===this.ec&&N(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==c||N(this.sc)?T(this.sc,c,!0):this.sc.childNodes[this.so],this._last=this.ec!==c||N(this.ec)?T(this.ec,c,!0):this.ec.childNodes[this.eo-1])}}function q(a){return function(b,c){for(var d,e=c?b:b.parentNode;e;){if(d=e.nodeType,V(a,d))return e;e=e.parentNode}return null}}function r(a,b){if(ea(a,b))throw new M("INVALID_NODE_TYPE_ERR")}function s(a,b){if(!V(b,a.nodeType))throw new M("INVALID_NODE_TYPE_ERR")}function t(a,b){if(0>b||b>(N(a)?a.length:a.childNodes.length))throw new M("INDEX_SIZE_ERR")}function u(a,b){if(ca(a,!0)!==ca(b,!0))throw new M("WRONG_DOCUMENT_ERR")}function v(a){if(da(a,!0))throw new M("NO_MODIFICATION_ALLOWED_ERR")}function w(a,b){if(!a)throw new M(b)}function x(a,b){return b<=(N(a)?a.length:a.childNodes.length)}function y(a){return!!a.startContainer&&!!a.endContainer&&!(X&&(J.isBrokenNode(a.startContainer)||J.isBrokenNode(a.endContainer)))&&W(a.startContainer)==W(a.endContainer)&&x(a.startContainer,a.startOffset)&&x(a.endContainer,a.endOffset)}function z(a){if(!y(a))throw new Error("Range error: Range is not valid. This usually happens after DOM mutation. Range: ("+a.inspect()+")")}function A(a,b){z(a);var c=a.startContainer,d=a.startOffset,e=a.endContainer,f=a.endOffset,g=c===e;N(e)&&f>0&&f<e.length&&S(e,f,b),N(c)&&d>0&&d<c.length&&(c=S(c,d,b),g?(f-=d,e=c):e==c.parentNode&&f>=O(c)&&f++,d=0),a.setStartAndEnd(c,d,e,f)}function B(a){z(a);var b=a.commonAncestorContainer.parentNode.cloneNode(!1);return b.appendChild(a.cloneContents()),b.innerHTML}function C(a){a.START_TO_START=ka,a.START_TO_END=la,a.END_TO_END=ma,a.END_TO_START=na,a.NODE_BEFORE=oa,a.NODE_AFTER=pa,a.NODE_BEFORE_AND_AFTER=qa,a.NODE_INSIDE=ra}function D(a){C(a),C(a.prototype)}function E(a,b){return function(){z(this);var c,d,e=this.startContainer,f=this.startOffset,h=this.commonAncestorContainer,i=new p(this,!0);e!==h&&(c=T(e,h,!0),d=g(c),e=d.node,f=d.offset),k(i,v),i.reset();var j=a(i);return i.detach(),b(this,e,f,e,f),j}}function F(b,d){function e(a,b){return function(c){s(c,Z),s(W(c),$);var d=(a?f:g)(c);(b?h:i)(this,d.node,d.offset)}}function h(a,b,c){var e=a.endContainer,f=a.endOffset;b===a.startContainer&&c===a.startOffset||(W(b)==W(e)&&1!=R(b,c,e,f)||(e=b,f=c),d(a,b,c,e,f))}function i(a,b,c){var e=a.startContainer,f=a.startOffset;b===a.endContainer&&c===a.endOffset||(W(b)==W(e)&&-1!=R(b,c,e,f)||(e=b,f=c),d(a,e,f,b,c))}var j=function(){};j.prototype=a.rangePrototype,b.prototype=new j,K.extend(b.prototype,{setStart:function(a,b){r(a,!0),t(a,b),h(this,a,b)},setEnd:function(a,b){r(a,!0),t(a,b),i(this,a,b)},setStartAndEnd:function(){var a=arguments,b=a[0],c=a[1],e=b,f=c;switch(a.length){case 3:f=a[2];break;case 4:e=a[2],f=a[3]}d(this,b,c,e,f)},setBoundary:function(a,b,c){this["set"+(c?"Start":"End")](a,b)},setStartBefore:e(!0,!0),setStartAfter:e(!1,!0),setEndBefore:e(!0,!1),setEndAfter:e(!1,!1),collapse:function(a){z(this),a?d(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):d(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(a){r(a,!0),d(this,a,0,a,U(a))},selectNode:function(a){r(a,!1),s(a,Z);var b=f(a),c=g(a);d(this,b.node,b.offset,c.node,c.offset)},extractContents:E(m,d),deleteContents:E(l,d),canSurroundContents:function(){z(this),v(this.startContainer),v(this.endContainer);var a=new p(this,!0),b=a._first&&c(a._first,this)||a._last&&c(a._last,this);return a.detach(),!b},splitBoundaries:function(){A(this)},splitBoundariesPreservingPositions:function(a){A(this,a)},normalizeBoundaries:function(){z(this);var a,b=this.startContainer,c=this.startOffset,e=this.endContainer,f=this.endOffset,g=function(a){var b=a.nextSibling;b&&b.nodeType==a.nodeType&&(e=a,f=a.length,a.appendData(b.data),Y(b))},h=function(a){var d=a.previousSibling;if(d&&d.nodeType==a.nodeType){b=a;var g=a.length;if(c=d.length,a.insertData(0,d.data),Y(d),b==e)f+=c,e=b;else if(e==a.parentNode){var h=O(a);f==h?(e=a,f=g):f>h&&f--}}},i=!0;if(N(e))f==e.length?g(e):0==f&&(a=e.previousSibling,a&&a.nodeType==e.nodeType&&(f=a.length,b==e&&(i=!1),a.appendData(e.data),Y(e),e=a));else{if(f>0){var j=e.childNodes[f-1];j&&N(j)&&g(j)}i=!this.collapsed}if(i){if(N(b))0==c?h(b):c==b.length&&(a=b.nextSibling,a&&a.nodeType==b.nodeType&&(e==a&&(e=b,f+=b.length),b.appendData(a.data),Y(a)));else if(c<b.childNodes.length){var k=b.childNodes[c];k&&N(k)&&h(k)}}else b=e,c=f;d(this,b,c,e,f)},collapseToPoint:function(a,b){r(a,!0),t(a,b),this.setStartAndEnd(a,b)}}),D(b)}function G(a){a.collapsed=a.startContainer===a.endContainer&&a.startOffset===a.endOffset,a.commonAncestorContainer=a.collapsed?a.startContainer:J.getCommonAncestor(a.startContainer,a.endContainer)}function H(a,b,c,d,e){a.startContainer=b,a.startOffset=c,a.endContainer=d,a.endOffset=e,a.document=J.getDocument(b),G(a)}function I(a){this.startContainer=a,this.startOffset=0,this.endContainer=a,this.endOffset=0,this.document=a,G(this)}var J=a.dom,K=a.util,L=J.DomPosition,M=a.DOMException,N=J.isCharacterDataNode,O=J.getNodeIndex,P=J.isOrIsAncestorOf,Q=J.getDocument,R=J.comparePoints,S=J.splitDataNode,T=J.getClosestAncestorIn,U=J.getNodeLength,V=J.arrayContains,W=J.getRootContainer,X=a.features.crashyTextNodes,Y=J.removeNode;p.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var a=this._current=this._next;return a&&(this._next=a!==this._last?a.nextSibling:null,N(a)&&this.clonePartiallySelectedTextNodes&&(a===this.ec&&(a=a.cloneNode(!0)).deleteData(this.eo,a.length-this.eo),this._current===this.sc&&(a=a.cloneNode(!0)).deleteData(0,this.so))),a},remove:function(){var a,b,c=this._current;!N(c)||c!==this.sc&&c!==this.ec?c.parentNode&&Y(c):(a=c===this.sc?this.so:0,b=c===this.ec?this.eo:c.length,a!=b&&c.deleteData(a,b-a))},isPartiallySelectedSubtree:function(){var a=this._current;return c(a,this.range)},getSubtreeIterator:function(){var a;if(this.isSingleCharacterDataNode)a=this.range.cloneRange(),a.collapse(!1);else{a=new I(d(this.range));var b=this._current,c=b,e=0,f=b,g=U(b);P(b,this.sc)&&(c=this.sc,e=this.so),P(b,this.ec)&&(f=this.ec,g=this.eo),H(a,c,e,f,g)}return new p(a,this.clonePartiallySelectedTextNodes)},detach:function(){this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};var Z=[1,3,4,5,7,8,10],$=[2,9,11],_=[5,6,10,12],aa=[1,3,4,5,7,8,10,11],ba=[1,3,4,5,7,8],ca=q([9,11]),da=q(_),ea=q([6,10,12]),fa=document.createElement("style"),ga=!1;try{fa.innerHTML="<b>x</b>",ga=3==fa.firstChild.nodeType}catch(ha){}a.features.htmlParsingConforms=ga;var ia=ga?function(a){var b=this.startContainer,c=Q(b);if(!b)throw new M("INVALID_STATE_ERR");var d=null;return 1==b.nodeType?d=b:N(b)&&(d=J.parentElement(b)),d=null===d||"HTML"==d.nodeName&&J.isHtmlNamespace(Q(d).documentElement)&&J.isHtmlNamespace(d)?c.createElement("body"):d.cloneNode(!1),d.innerHTML=a,J.fragmentFromNodeChildren(d)}:function(a){var b=d(this),c=b.createElement("body");return c.innerHTML=a,J.fragmentFromNodeChildren(c)},ja=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],ka=0,la=1,ma=2,na=3,oa=0,pa=1,qa=2,ra=3;K.extend(a.rangePrototype,{compareBoundaryPoints:function(a,b){z(this),u(this.startContainer,b.startContainer);var c,d,e,f,g=a==na||a==ka?"start":"end",h=a==la||a==ka?"start":"end";return c=this[g+"Container"],d=this[g+"Offset"],e=b[h+"Container"],f=b[h+"Offset"],R(c,d,e,f)},insertNode:function(a){if(z(this),s(a,aa),v(this.startContainer),P(a,this.startContainer))throw new M("HIERARCHY_REQUEST_ERR");var b=h(a,this.startContainer,this.startOffset);this.setStartBefore(b)},cloneContents:function(){z(this);var a,b;if(this.collapsed)return d(this).createDocumentFragment();if(this.startContainer===this.endContainer&&N(this.startContainer))return a=this.startContainer.cloneNode(!0),a.data=a.data.slice(this.startOffset,this.endOffset),b=d(this).createDocumentFragment(),b.appendChild(a),b;var c=new p(this,!0);return a=j(c),c.detach(),a},canSurroundContents:function(){z(this),v(this.startContainer),v(this.endContainer);var a=new p(this,!0),b=a._first&&c(a._first,this)||a._last&&c(a._last,this);return a.detach(),!b},surroundContents:function(a){if(s(a,ba),!this.canSurroundContents())throw new M("INVALID_STATE_ERR");var b=this.extractContents();if(a.hasChildNodes())for(;a.lastChild;)a.removeChild(a.lastChild);h(a,this.startContainer,this.startOffset),a.appendChild(b),this.selectNode(a)},cloneRange:function(){z(this);for(var a,b=new I(d(this)),c=ja.length;c--;)a=ja[c],b[a]=this[a];return b},toString:function(){z(this);var a=this.startContainer;if(a===this.endContainer&&N(a))return 3==a.nodeType||4==a.nodeType?a.data.slice(this.startOffset,this.endOffset):"";var b=[],c=new p(this,!0);return k(c,function(a){3!=a.nodeType&&4!=a.nodeType||b.push(a.data)}),c.detach(),b.join("")},compareNode:function(a){z(this);var b=a.parentNode,c=O(a);if(!b)throw new M("NOT_FOUND_ERR");var d=this.comparePoint(b,c),e=this.comparePoint(b,c+1);return 0>d?e>0?qa:oa:e>0?pa:ra},comparePoint:function(a,b){return z(this),w(a,"HIERARCHY_REQUEST_ERR"),u(a,this.startContainer),R(a,b,this.startContainer,this.startOffset)<0?-1:R(a,b,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:ia,toHtml:function(){return B(this)},intersectsNode:function(a,b){if(z(this),W(a)!=e(this))return!1;var c=a.parentNode,d=O(a);if(!c)return!0;var f=R(c,d,this.endContainer,this.endOffset),g=R(c,d+1,this.startContainer,this.startOffset);return b?0>=f&&g>=0:0>f&&g>0},isPointInRange:function(a,b){return z(this),w(a,"HIERARCHY_REQUEST_ERR"),u(a,this.startContainer),R(a,b,this.startContainer,this.startOffset)>=0&&R(a,b,this.endContainer,this.endOffset)<=0},intersectsRange:function(a){return i(this,a,!1)},intersectsOrTouchesRange:function(a){return i(this,a,!0)},intersection:function(a){if(this.intersectsRange(a)){var b=R(this.startContainer,this.startOffset,a.startContainer,a.startOffset),c=R(this.endContainer,this.endOffset,a.endContainer,a.endOffset),d=this.cloneRange();return-1==b&&d.setStart(a.startContainer,a.startOffset),1==c&&d.setEnd(a.endContainer,a.endOffset),d}return null},union:function(a){if(this.intersectsOrTouchesRange(a)){var b=this.cloneRange();return-1==R(a.startContainer,a.startOffset,this.startContainer,this.startOffset)&&b.setStart(a.startContainer,a.startOffset),1==R(a.endContainer,a.endOffset,this.endContainer,this.endOffset)&&b.setEnd(a.endContainer,a.endOffset),b}throw new M("Ranges do not intersect")},containsNode:function(a,b){return b?this.intersectsNode(a,!1):this.compareNode(a)==ra},containsNodeContents:function(a){return this.comparePoint(a,0)>=0&&this.comparePoint(a,U(a))<=0},containsRange:function(a){var b=this.intersection(a);return null!==b&&a.equals(b)},containsNodeText:function(a){var b=this.cloneRange();b.selectNode(a);var c=b.getNodes([3]);if(c.length>0){b.setStart(c[0],0);var d=c.pop();return b.setEnd(d,d.length),this.containsRange(b)}return this.containsNodeContents(a)},getNodes:function(a,b){return z(this),n(this,a,b)},getDocument:function(){return d(this)},collapseBefore:function(a){this.setEndBefore(a),this.collapse(!1)},collapseAfter:function(a){this.setStartAfter(a),this.collapse(!0)},getBookmark:function(b){var c=d(this),e=a.createRange(c);b=b||J.getBody(c),e.selectNodeContents(b);var f=this.intersection(e),g=0,h=0;return f&&(e.setEnd(f.startContainer,f.startOffset),g=e.toString().length,h=g+f.toString().length),{start:g,end:h,containerNode:b}},moveToBookmark:function(a){var b=a.containerNode,c=0;this.setStart(b,0),this.collapse(!0);for(var d,e,f,g,h=[b],i=!1,j=!1;!j&&(d=h.pop());)if(3==d.nodeType)e=c+d.length,
!i&&a.start>=c&&a.start<=e&&(this.setStart(d,a.start-c),i=!0),i&&a.end>=c&&a.end<=e&&(this.setEnd(d,a.end-c),j=!0),c=e;else for(g=d.childNodes,f=g.length;f--;)h.push(g[f])},getName:function(){return"DomRange"},equals:function(a){return I.rangesEqual(this,a)},isValid:function(){return y(this)},inspect:function(){return o(this)},detach:function(){}}),F(I,H),K.extend(I,{rangeProperties:ja,RangeIterator:p,copyComparisonConstants:D,createPrototypeRange:F,inspect:o,toHtml:B,getRangeDocument:d,rangesEqual:function(a,b){return a.startContainer===b.startContainer&&a.startOffset===b.startOffset&&a.endContainer===b.endContainer&&a.endOffset===b.endOffset}}),a.DomRange=I}),H.createCoreModule("WrappedRange",["DomRange"],function(a,b){var c,d,e=a.dom,f=a.util,g=e.DomPosition,h=a.DomRange,i=e.getBody,j=e.getContentDocument,k=e.isCharacterDataNode;if(a.features.implementsDomRange&&!function(){function d(a){for(var b,c=m.length;c--;)b=m[c],a[b]=a.nativeRange[b];a.collapsed=a.startContainer===a.endContainer&&a.startOffset===a.endOffset}function g(a,b,c,d,e){var f=a.startContainer!==b||a.startOffset!=c,g=a.endContainer!==d||a.endOffset!=e,h=!a.equals(a.nativeRange);(f||g||h)&&(a.setEnd(d,e),a.setStart(b,c))}var k,l,m=h.rangeProperties;c=function(a){if(!a)throw b.createError("WrappedRange: Range must be specified");this.nativeRange=a,d(this)},h.createPrototypeRange(c,g),k=c.prototype,k.selectNode=function(a){this.nativeRange.selectNode(a),d(this)},k.cloneContents=function(){return this.nativeRange.cloneContents()},k.surroundContents=function(a){this.nativeRange.surroundContents(a),d(this)},k.collapse=function(a){this.nativeRange.collapse(a),d(this)},k.cloneRange=function(){return new c(this.nativeRange.cloneRange())},k.refresh=function(){d(this)},k.toString=function(){return this.nativeRange.toString()};var n=document.createTextNode("test");i(document).appendChild(n);var o=document.createRange();o.setStart(n,0),o.setEnd(n,0);try{o.setStart(n,1),k.setStart=function(a,b){this.nativeRange.setStart(a,b),d(this)},k.setEnd=function(a,b){this.nativeRange.setEnd(a,b),d(this)},l=function(a){return function(b){this.nativeRange[a](b),d(this)}}}catch(p){k.setStart=function(a,b){try{this.nativeRange.setStart(a,b)}catch(c){this.nativeRange.setEnd(a,b),this.nativeRange.setStart(a,b)}d(this)},k.setEnd=function(a,b){try{this.nativeRange.setEnd(a,b)}catch(c){this.nativeRange.setStart(a,b),this.nativeRange.setEnd(a,b)}d(this)},l=function(a,b){return function(c){try{this.nativeRange[a](c)}catch(e){this.nativeRange[b](c),this.nativeRange[a](c)}d(this)}}}k.setStartBefore=l("setStartBefore","setEndBefore"),k.setStartAfter=l("setStartAfter","setEndAfter"),k.setEndBefore=l("setEndBefore","setStartBefore"),k.setEndAfter=l("setEndAfter","setStartAfter"),k.selectNodeContents=function(a){this.setStartAndEnd(a,0,e.getNodeLength(a))},o.selectNodeContents(n),o.setEnd(n,3);var q=document.createRange();q.selectNodeContents(n),q.setEnd(n,4),q.setStart(n,2),-1==o.compareBoundaryPoints(o.START_TO_END,q)&&1==o.compareBoundaryPoints(o.END_TO_START,q)?k.compareBoundaryPoints=function(a,b){return b=b.nativeRange||b,a==b.START_TO_END?a=b.END_TO_START:a==b.END_TO_START&&(a=b.START_TO_END),this.nativeRange.compareBoundaryPoints(a,b)}:k.compareBoundaryPoints=function(a,b){return this.nativeRange.compareBoundaryPoints(a,b.nativeRange||b)};var r=document.createElement("div");r.innerHTML="123";var s=r.firstChild,t=i(document);t.appendChild(r),o.setStart(s,1),o.setEnd(s,2),o.deleteContents(),"13"==s.data&&(k.deleteContents=function(){this.nativeRange.deleteContents(),d(this)},k.extractContents=function(){var a=this.nativeRange.extractContents();return d(this),a}),t.removeChild(r),t=null,f.isHostMethod(o,"createContextualFragment")&&(k.createContextualFragment=function(a){return this.nativeRange.createContextualFragment(a)}),i(document).removeChild(n),k.getName=function(){return"WrappedRange"},a.WrappedRange=c,a.createNativeRange=function(a){return a=j(a,b,"createNativeRange"),a.createRange()}}(),a.features.implementsTextRange){var l=function(a){var b=a.parentElement(),c=a.duplicate();c.collapse(!0);var d=c.parentElement();c=a.duplicate(),c.collapse(!1);var f=c.parentElement(),g=d==f?d:e.getCommonAncestor(d,f);return g==b?g:e.getCommonAncestor(b,g)},m=function(a){return 0==a.compareEndPoints("StartToEnd",a)},n=function(a,b,c,d,f){var h=a.duplicate();h.collapse(c);var i=h.parentElement();if(e.isOrIsAncestorOf(b,i)||(i=b),!i.canHaveHTML){var j=new g(i.parentNode,e.getNodeIndex(i));return{boundaryPosition:j,nodeInfo:{nodeIndex:j.offset,containerElement:j.node}}}var l=e.getDocument(i).createElement("span");l.parentNode&&e.removeNode(l);for(var m,n,o,p,q,r=c?"StartToStart":"StartToEnd",s=f&&f.containerElement==i?f.nodeIndex:0,t=i.childNodes.length,u=t,v=u;;){if(v==t?i.appendChild(l):i.insertBefore(l,i.childNodes[v]),h.moveToElementText(l),m=h.compareEndPoints(r,a),0==m||s==u)break;if(-1==m){if(u==s+1)break;s=v}else u=u==s+1?s:v;v=Math.floor((s+u)/2),i.removeChild(l)}if(q=l.nextSibling,-1==m&&q&&k(q)){h.setEndPoint(c?"EndToStart":"EndToEnd",a);var w;if(/[\r\n]/.test(q.data)){var x=h.duplicate(),y=x.text.replace(/\r\n/g,"\r").length;for(w=x.moveStart("character",y);-1==(m=x.compareEndPoints("StartToEnd",x));)w++,x.moveStart("character",1)}else w=h.text.length;p=new g(q,w)}else n=(d||!c)&&l.previousSibling,o=(d||c)&&l.nextSibling,p=o&&k(o)?new g(o,0):n&&k(n)?new g(n,n.data.length):new g(i,e.getNodeIndex(l));return e.removeNode(l),{boundaryPosition:p,nodeInfo:{nodeIndex:v,containerElement:i}}},o=function(a,b){var c,d,f,g,h=a.offset,j=e.getDocument(a.node),l=i(j).createTextRange(),m=k(a.node);return m?(c=a.node,d=c.parentNode):(g=a.node.childNodes,c=h<g.length?g[h]:null,d=a.node),f=j.createElement("span"),f.innerHTML="&#feff;",c?d.insertBefore(f,c):d.appendChild(f),l.moveToElementText(f),l.collapse(!b),d.removeChild(f),m&&l[b?"moveStart":"moveEnd"]("character",h),l};d=function(a){this.textRange=a,this.refresh()},d.prototype=new h(document),d.prototype.refresh=function(){var a,b,c,d=l(this.textRange);m(this.textRange)?b=a=n(this.textRange,d,!0,!0).boundaryPosition:(c=n(this.textRange,d,!0,!1),a=c.boundaryPosition,b=n(this.textRange,d,!1,!1,c.nodeInfo).boundaryPosition),this.setStart(a.node,a.offset),this.setEnd(b.node,b.offset)},d.prototype.getName=function(){return"WrappedTextRange"},h.copyComparisonConstants(d);var p=function(a){if(a.collapsed)return o(new g(a.startContainer,a.startOffset),!0);var b=o(new g(a.startContainer,a.startOffset),!0),c=o(new g(a.endContainer,a.endOffset),!1),d=i(h.getRangeDocument(a)).createTextRange();return d.setEndPoint("StartToStart",b),d.setEndPoint("EndToEnd",c),d};if(d.rangeToTextRange=p,d.prototype.toTextRange=function(){return p(this)},a.WrappedTextRange=d,!a.features.implementsDomRange||a.config.preferTextRange){var q=function(a){return a("return this;")()}(Function);"undefined"==typeof q.Range&&(q.Range=d),a.createNativeRange=function(a){return a=j(a,b,"createNativeRange"),i(a).createTextRange()},a.WrappedRange=d}}a.createRange=function(c){return c=j(c,b,"createRange"),new a.WrappedRange(a.createNativeRange(c))},a.createRangyRange=function(a){return a=j(a,b,"createRangyRange"),new h(a)},f.createAliasForDeprecatedMethod(a,"createIframeRange","createRange"),f.createAliasForDeprecatedMethod(a,"createIframeRangyRange","createRangyRange"),a.addShimListener(function(b){var c=b.document;"undefined"==typeof c.createRange&&(c.createRange=function(){return a.createRange(c)}),c=b=null})}),H.createCoreModule("WrappedSelection",["DomRange","WrappedRange"],function(a,b){function c(a){return"string"==typeof a?/^backward(s)?$/i.test(a):!!a}function d(a,c){if(a){if(C.isWindow(a))return a;if(a instanceof r)return a.win;var d=C.getContentDocument(a,b,c);return C.getWindow(d)}return window}function e(a){return d(a,"getWinSelection").getSelection()}function f(a){return d(a,"getDocSelection").document.selection}function g(a){var b=!1;return a.anchorNode&&(b=1==C.comparePoints(a.anchorNode,a.anchorOffset,a.focusNode,a.focusOffset)),b}function h(a,b,c){var d=c?"end":"start",e=c?"start":"end";a.anchorNode=b[d+"Container"],a.anchorOffset=b[d+"Offset"],a.focusNode=b[e+"Container"],a.focusOffset=b[e+"Offset"]}function i(a){var b=a.nativeSelection;a.anchorNode=b.anchorNode,a.anchorOffset=b.anchorOffset,a.focusNode=b.focusNode,a.focusOffset=b.focusOffset}function j(a){a.anchorNode=a.focusNode=null,a.anchorOffset=a.focusOffset=0,a.rangeCount=0,a.isCollapsed=!0,a._ranges.length=0}function k(b){var c;return b instanceof F?(c=a.createNativeRange(b.getDocument()),c.setEnd(b.endContainer,b.endOffset),c.setStart(b.startContainer,b.startOffset)):b instanceof G?c=b.nativeRange:J.implementsDomRange&&b instanceof C.getWindow(b.startContainer).Range&&(c=b),c}function l(a){if(!a.length||1!=a[0].nodeType)return!1;for(var b=1,c=a.length;c>b;++b)if(!C.isAncestorOf(a[0],a[b]))return!1;return!0}function m(a){var c=a.getNodes();if(!l(c))throw b.createError("getSingleElementFromRange: range "+a.inspect()+" did not consist of a single element");return c[0]}function n(a){return!!a&&"undefined"!=typeof a.text}function o(a,b){var c=new G(b);a._ranges=[c],h(a,c,!1),a.rangeCount=1,a.isCollapsed=c.collapsed}function p(b){if(b._ranges.length=0,"None"==b.docSelection.type)j(b);else{var c=b.docSelection.createRange();if(n(c))o(b,c);else{b.rangeCount=c.length;for(var d,e=L(c.item(0)),f=0;f<b.rangeCount;++f)d=a.createRange(e),d.selectNode(c.item(f)),b._ranges.push(d);b.isCollapsed=1==b.rangeCount&&b._ranges[0].collapsed,h(b,b._ranges[b.rangeCount-1],!1)}}}function q(a,c){for(var d=a.docSelection.createRange(),e=m(c),f=L(d.item(0)),g=M(f).createControlRange(),h=0,i=d.length;i>h;++h)g.add(d.item(h));try{g.add(e)}catch(j){throw b.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}g.select(),p(a)}function r(a,b,c){this.nativeSelection=a,this.docSelection=b,this._ranges=[],this.win=c,this.refresh()}function s(a){a.win=a.anchorNode=a.focusNode=a._ranges=null,a.rangeCount=a.anchorOffset=a.focusOffset=0,a.detached=!0}function t(a,b){for(var c,d,e=ba.length;e--;)if(c=ba[e],d=c.selection,"deleteAll"==b)s(d);else if(c.win==a)return"delete"==b?(ba.splice(e,1),!0):d;return"deleteAll"==b&&(ba.length=0),null}function u(a,c){for(var d,e=L(c[0].startContainer),f=M(e).createControlRange(),g=0,h=c.length;h>g;++g){d=m(c[g]);try{f.add(d)}catch(i){throw b.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)")}}f.select(),p(a)}function v(a,b){if(a.win.document!=L(b))throw new H("WRONG_DOCUMENT_ERR")}function w(b){return function(c,d){var e;this.rangeCount?(e=this.getRangeAt(0),e["set"+(b?"Start":"End")](c,d)):(e=a.createRange(this.win.document),e.setStartAndEnd(c,d)),this.setSingleRange(e,this.isBackward())}}function x(a){var b=[],c=new I(a.anchorNode,a.anchorOffset),d=new I(a.focusNode,a.focusOffset),e="function"==typeof a.getName?a.getName():"Selection";if("undefined"!=typeof a.rangeCount)for(var f=0,g=a.rangeCount;g>f;++f)b[f]=F.inspect(a.getRangeAt(f));return"["+e+"(Ranges: "+b.join(", ")+")(anchor: "+c.inspect()+", focus: "+d.inspect()+"]"}a.config.checkSelectionRanges=!0;var y,z,A="boolean",B="number",C=a.dom,D=a.util,E=D.isHostMethod,F=a.DomRange,G=a.WrappedRange,H=a.DOMException,I=C.DomPosition,J=a.features,K="Control",L=C.getDocument,M=C.getBody,N=F.rangesEqual,O=E(window,"getSelection"),P=D.isHostObject(document,"selection");J.implementsWinGetSelection=O,J.implementsDocSelection=P;var Q=P&&(!O||a.config.preferTextRange);if(Q)y=f,a.isSelectionValid=function(a){var b=d(a,"isSelectionValid").document,c=b.selection;return"None"!=c.type||L(c.createRange().parentElement())==b};else{if(!O)return b.fail("Neither document.selection or window.getSelection() detected."),!1;y=e,a.isSelectionValid=function(){return!0}}a.getNativeSelection=y;var R=y();if(!R)return b.fail("Native selection was null (possibly issue 138?)"),!1;var S=a.createNativeRange(document),T=M(document),U=D.areHostProperties(R,["anchorNode","focusNode","anchorOffset","focusOffset"]);J.selectionHasAnchorAndFocus=U;var V=E(R,"extend");J.selectionHasExtend=V;var W=typeof R.rangeCount==B;J.selectionHasRangeCount=W;var X=!1,Y=!0,Z=V?function(b,c){var d=F.getRangeDocument(c),e=a.createRange(d);e.collapseToPoint(c.endContainer,c.endOffset),b.addRange(k(e)),b.extend(c.startContainer,c.startOffset)}:null;D.areHostMethods(R,["addRange","getRangeAt","removeAllRanges"])&&typeof R.rangeCount==B&&J.implementsDomRange&&!function(){var b=window.getSelection();if(b){for(var c=b.rangeCount,d=c>1,e=[],f=g(b),h=0;c>h;++h)e[h]=b.getRangeAt(h);var i=C.createTestElement(document,"",!1),j=i.appendChild(document.createTextNode("")),k=document.createRange();if(k.setStart(j,1),k.collapse(!0),b.removeAllRanges(),b.addRange(k),Y=1==b.rangeCount,b.removeAllRanges(),!d){var l=window.navigator.appVersion.match(/Chrome\/(.*?) /);if(l&&parseInt(l[1])>=36)X=!1;else{var m=k.cloneRange();k.setStart(j,0),m.setEnd(j,3),m.setStart(j,2),b.addRange(k),b.addRange(m),X=2==b.rangeCount}}for(C.removeNode(i),b.removeAllRanges(),h=0;c>h;++h)0==h&&f?Z?Z(b,e[h]):(a.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend"),b.addRange(e[h])):b.addRange(e[h])}}(),J.selectionSupportsMultipleRanges=X,J.collapsedNonEditableSelectionsSupported=Y;var $,_=!1;T&&E(T,"createControlRange")&&($=T.createControlRange(),D.areHostProperties($,["item","add"])&&(_=!0)),J.implementsControlRange=_,z=U?function(a){return a.anchorNode===a.focusNode&&a.anchorOffset===a.focusOffset}:function(a){return a.rangeCount?a.getRangeAt(a.rangeCount-1).collapsed:!1};var aa;E(R,"getRangeAt")?aa=function(a,b){try{return a.getRangeAt(b)}catch(c){return null}}:U&&(aa=function(b){var c=L(b.anchorNode),d=a.createRange(c);return d.setStartAndEnd(b.anchorNode,b.anchorOffset,b.focusNode,b.focusOffset),d.collapsed!==this.isCollapsed&&d.setStartAndEnd(b.focusNode,b.focusOffset,b.anchorNode,b.anchorOffset),d}),r.prototype=a.selectionPrototype;var ba=[],ca=function(a){if(a&&a instanceof r)return a.refresh(),a;a=d(a,"getNativeSelection");var b=t(a),c=y(a),e=P?f(a):null;return b?(b.nativeSelection=c,b.docSelection=e,b.refresh()):(b=new r(c,e,a),ba.push({win:a,selection:b})),b};a.getSelection=ca,D.createAliasForDeprecatedMethod(a,"getIframeSelection","getSelection");var da=r.prototype;if(!Q&&U&&D.areHostMethods(R,["removeAllRanges","addRange"])){da.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),j(this)};var ea=function(a,b){Z(a.nativeSelection,b),a.refresh()};W?da.addRange=function(b,d){if(_&&P&&this.docSelection.type==K)q(this,b);else if(c(d)&&V)ea(this,b);else{var e;X?e=this.rangeCount:(this.removeAllRanges(),e=0);var f=k(b).cloneRange();try{this.nativeSelection.addRange(f)}catch(g){}if(this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==e+1){if(a.config.checkSelectionRanges){var i=aa(this.nativeSelection,this.rangeCount-1);i&&!N(i,b)&&(b=new G(i))}this._ranges[this.rangeCount-1]=b,h(this,b,ha(this.nativeSelection)),this.isCollapsed=z(this)}else this.refresh()}}:da.addRange=function(a,b){c(b)&&V?ea(this,a):(this.nativeSelection.addRange(k(a)),this.refresh())},da.setRanges=function(a){if(_&&P&&a.length>1)u(this,a);else{this.removeAllRanges();for(var b=0,c=a.length;c>b;++b)this.addRange(a[b])}}}else{if(!(E(R,"empty")&&E(S,"select")&&_&&Q))return b.fail("No means of selecting a Range or TextRange was found"),!1;da.removeAllRanges=function(){try{if(this.docSelection.empty(),"None"!=this.docSelection.type){var a;if(this.anchorNode)a=L(this.anchorNode);else if(this.docSelection.type==K){var b=this.docSelection.createRange();b.length&&(a=L(b.item(0)))}if(a){var c=M(a).createTextRange();c.select(),this.docSelection.empty()}}}catch(d){}j(this)},da.addRange=function(b){this.docSelection.type==K?q(this,b):(a.WrappedTextRange.rangeToTextRange(b).select(),this._ranges[0]=b,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,h(this,b,!1))},da.setRanges=function(a){this.removeAllRanges();var b=a.length;b>1?u(this,a):b&&this.addRange(a[0])}}da.getRangeAt=function(a){if(0>a||a>=this.rangeCount)throw new H("INDEX_SIZE_ERR");return this._ranges[a].cloneRange()};var fa;if(Q)fa=function(b){var c;a.isSelectionValid(b.win)?c=b.docSelection.createRange():(c=M(b.win.document).createTextRange(),c.collapse(!0)),b.docSelection.type==K?p(b):n(c)?o(b,c):j(b)};else if(E(R,"getRangeAt")&&typeof R.rangeCount==B)fa=function(b){if(_&&P&&b.docSelection.type==K)p(b);else if(b._ranges.length=b.rangeCount=b.nativeSelection.rangeCount,b.rangeCount){for(var c=0,d=b.rangeCount;d>c;++c)b._ranges[c]=new a.WrappedRange(b.nativeSelection.getRangeAt(c));h(b,b._ranges[b.rangeCount-1],ha(b.nativeSelection)),b.isCollapsed=z(b)}else j(b)};else{if(!U||typeof R.isCollapsed!=A||typeof S.collapsed!=A||!J.implementsDomRange)return b.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;fa=function(a){var b,c=a.nativeSelection;c.anchorNode?(b=aa(c,0),a._ranges=[b],a.rangeCount=1,i(a),a.isCollapsed=z(a)):j(a)}}da.refresh=function(a){var b=a?this._ranges.slice(0):null,c=this.anchorNode,d=this.anchorOffset;if(fa(this),a){var e=b.length;if(e!=this._ranges.length)return!0;if(this.anchorNode!=c||this.anchorOffset!=d)return!0;for(;e--;)if(!N(b[e],this._ranges[e]))return!0;return!1}};var ga=function(a,b){var c=a.getAllRanges();a.removeAllRanges();for(var d=0,e=c.length;e>d;++d)N(b,c[d])||a.addRange(c[d]);a.rangeCount||j(a)};_&&P?da.removeRange=function(a){if(this.docSelection.type==K){for(var b,c=this.docSelection.createRange(),d=m(a),e=L(c.item(0)),f=M(e).createControlRange(),g=!1,h=0,i=c.length;i>h;++h)b=c.item(h),b!==d||g?f.add(c.item(h)):g=!0;f.select(),p(this)}else ga(this,a)}:da.removeRange=function(a){ga(this,a)};var ha;!Q&&U&&J.implementsDomRange?(ha=g,da.isBackward=function(){return ha(this)}):ha=da.isBackward=function(){return!1},da.isBackwards=da.isBackward,da.toString=function(){for(var a=[],b=0,c=this.rangeCount;c>b;++b)a[b]=""+this._ranges[b];return a.join("")},da.collapse=function(b,c){v(this,b);var d=a.createRange(b);d.collapseToPoint(b,c),this.setSingleRange(d),this.isCollapsed=!0},da.collapseToStart=function(){if(!this.rangeCount)throw new H("INVALID_STATE_ERR");var a=this._ranges[0];this.collapse(a.startContainer,a.startOffset)},da.collapseToEnd=function(){if(!this.rangeCount)throw new H("INVALID_STATE_ERR");var a=this._ranges[this.rangeCount-1];this.collapse(a.endContainer,a.endOffset)},da.selectAllChildren=function(b){v(this,b);var c=a.createRange(b);c.selectNodeContents(b),this.setSingleRange(c)},da.deleteFromDocument=function(){if(_&&P&&this.docSelection.type==K){for(var a,b=this.docSelection.createRange();b.length;)a=b.item(0),b.remove(a),C.removeNode(a);this.refresh()}else if(this.rangeCount){var c=this.getAllRanges();if(c.length){this.removeAllRanges();for(var d=0,e=c.length;e>d;++d)c[d].deleteContents();this.addRange(c[e-1])}}},da.eachRange=function(a,b){for(var c=0,d=this._ranges.length;d>c;++c)if(a(this.getRangeAt(c)))return b},da.getAllRanges=function(){var a=[];return this.eachRange(function(b){a.push(b)}),a},da.setSingleRange=function(a,b){this.removeAllRanges(),this.addRange(a,b)},da.callMethodOnEachRange=function(a,b){var c=[];return this.eachRange(function(d){c.push(d[a].apply(d,b||[]))}),c},da.setStart=w(!0),da.setEnd=w(!1),a.rangePrototype.select=function(a){ca(this.getDocument()).setSingleRange(this,a)},da.changeEachRange=function(a){var b=[],c=this.isBackward();this.eachRange(function(c){a(c),b.push(c)}),this.removeAllRanges(),c&&1==b.length?this.addRange(b[0],"backward"):this.setRanges(b)},da.containsNode=function(a,b){return this.eachRange(function(c){return c.containsNode(a,b)},!0)||!1},da.getBookmark=function(a){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[a])}},da.moveToBookmark=function(b){for(var c,d,e=[],f=0;c=b.rangeBookmarks[f++];)d=a.createRange(this.win),d.moveToBookmark(c),e.push(d);b.backward?this.setSingleRange(e[0],"backward"):this.setRanges(e)},da.saveRanges=function(){return{backward:this.isBackward(),ranges:this.callMethodOnEachRange("cloneRange")}},da.restoreRanges=function(a){this.removeAllRanges();for(var b,c=0;b=a.ranges[c];++c)this.addRange(b,a.backward&&0==c)},da.toHtml=function(){var a=[];return this.eachRange(function(b){a.push(F.toHtml(b))}),a.join("")},J.implementsTextRange&&(da.getNativeTextRange=function(){var c;if(c=this.docSelection){var d=c.createRange();if(n(d))return d;throw b.createError("getNativeTextRange: selection is a control selection")}if(this.rangeCount>0)return a.WrappedTextRange.rangeToTextRange(this.getRangeAt(0));throw b.createError("getNativeTextRange: selection contains no range")}),da.getName=function(){return"WrappedSelection"},da.inspect=function(){return x(this)},da.detach=function(){t(this.win,"delete"),s(this)},r.detachAll=function(){t(null,"deleteAll")},r.inspect=x,r.isDirectionBackward=c,a.Selection=r,a.selectionPrototype=da,a.addShimListener(function(a){"undefined"==typeof a.getSelection&&(a.getSelection=function(){return ca(a)}),a=null})});var M=!1,N=function(a){M||(M=!0,!H.initialized&&H.config.autoInitialize&&l())};return F&&("complete"==document.readyState?N():(a(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",N,!1),J(window,"load",N))),H},this),function(a,b){"function"==typeof define&&define.amd?define(["./rangy-core"],a):"undefined"!=typeof module&&"object"==typeof exports?module.exports=a(require("rangy")):a(b.rangy)}(function(a){return a.createModule("ClassApplier",["WrappedSelection"],function(a,b){function c(a,b){for(var c in a)if(a.hasOwnProperty(c)&&b(c,a[c])===!1)return!1;return!0}function d(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function e(a,b){return!!a&&new RegExp("(?:^|\\s)"+b+"(?:\\s|$)").test(a)}function f(a,b){if("object"==typeof a.classList)return a.classList.contains(b);var c="string"==typeof a.className,d=c?a.className:a.getAttribute("class");return e(d,b)}function g(a,b){if("object"==typeof a.classList)a.classList.add(b);else{var c="string"==typeof a.className,d=c?a.className:a.getAttribute("class");d?e(d,b)||(d+=" "+b):d=b,c?a.className=d:a.setAttribute("class",d)}}function h(a){var b="string"==typeof a.className;return b?a.className:a.getAttribute("class")}function j(a){return a&&a.split(/\s+/).sort().join(" ")}function k(a){return j(h(a))}function l(a,b){return k(a)==k(b)}function m(a,b){for(var c=b.split(/\s+/),e=0,g=c.length;g>e;++e)if(!f(a,d(c[e])))return!1;return!0}function n(a){var b=a.parentNode;return b&&1==b.nodeType&&!/^(textarea|style|script|select|iframe)$/i.test(b.nodeName)}function o(a,b,c,d,e){var f=a.node,g=a.offset,h=f,i=g;f==d&&g>e&&++i,f!=b||g!=c&&g!=c+1||(h=d,i+=e-c),f==b&&g>c+1&&--i,a.node=h,a.offset=i}function p(a,b,c){a.node==b&&a.offset>c&&--a.offset}function q(a,b,c,d){-1==c&&(c=b.childNodes.length);var e=a.parentNode,f=L.getNodeIndex(a);P(d,function(a){o(a,e,f,b,c)}),b.childNodes.length==c?b.appendChild(a):b.insertBefore(a,b.childNodes[c])}function r(a,b){var c=a.parentNode,d=L.getNodeIndex(a);P(b,function(a){p(a,c,d)}),L.removeNode(a)}function s(a,b,c,d,e){for(var f,g=[];f=a.firstChild;)q(f,b,c++,e),g.push(f);return d&&r(a,e),g}function t(a,b){return s(a,a.parentNode,L.getNodeIndex(a),!0,b)}function u(a,b){var c=a.cloneRange();c.selectNodeContents(b);var d=c.intersection(a),e=d?d.toString():"";return""!=e}function v(a){for(var b,c=a.getNodes([3]),d=0;(b=c[d])&&!u(a,b);)++d;for(var e=c.length-1;(b=c[e])&&!u(a,b);)--e;return c.slice(d,e+1)}function w(a,b){if(a.attributes.length!=b.attributes.length)return!1;for(var c,d,e,f=0,g=a.attributes.length;g>f;++f)if(c=a.attributes[f],e=c.name,"class"!=e){if(d=b.attributes.getNamedItem(e),null===c!=(null===d))return!1;if(c.specified!=d.specified)return!1;if(c.specified&&c.nodeValue!==d.nodeValue)return!1}return!0}function x(a,b){for(var c,d=0,e=a.attributes.length;e>d;++d)if(c=a.attributes[d].name,(!b||!N(b,c))&&a.attributes[d].specified&&"class"!=c)return!0;return!1}function y(a){var b;return a&&1==a.nodeType&&((b=a.parentNode)&&9==b.nodeType&&"on"==b.designMode||U(a)&&!U(a.parentNode))}function z(a){return(U(a)||1!=a.nodeType&&U(a.parentNode))&&!y(a)}function A(a){return a&&1==a.nodeType&&!V.test(T(a,"display"))}function B(a){if(0==a.data.length)return!0;if(W.test(a.data))return!1;var b=T(a.parentNode,"whiteSpace");switch(b){case"pre":case"pre-wrap":case"-moz-pre-wrap":return!1;case"pre-line":if(/[\r\n]/.test(a.data))return!1}return A(a.previousSibling)||A(a.nextSibling)}function C(a){var b,c,d=[];for(b=0;c=a[b++];)d.push(new M(c.startContainer,c.startOffset),new M(c.endContainer,c.endOffset));return d}function D(a,b){for(var c,d,e,f=0,g=a.length;g>f;++f)c=a[f],d=b[2*f],e=b[2*f+1],c.setStartAndEnd(d.node,d.offset,e.node,e.offset)}function E(a,b){return L.isCharacterDataNode(a)?0==b?!!a.previousSibling:b==a.length?!!a.nextSibling:!0:b>0&&b<a.childNodes.length}function F(a,c,d,e){var f,g,h=0==d;if(L.isAncestorOf(c,a))return a;if(L.isCharacterDataNode(c)){var i=L.getNodeIndex(c);if(0==d)d=i;else{if(d!=c.length)throw b.createError("splitNodeAt() should not be called with offset in the middle of a data node ("+d+" in "+c.data);d=i+1}c=c.parentNode}if(E(c,d)){f=c.cloneNode(!1),g=c.parentNode,f.id&&f.removeAttribute("id");for(var j,k=0;j=c.childNodes[d];)q(j,f,k++,e);return q(f,g,L.getNodeIndex(c)+1,e),c==a?f:F(a,g,L.getNodeIndex(f),e)}if(a!=c){f=c.parentNode;var l=L.getNodeIndex(c);return h||l++,F(a,f,l,e)}return a}function G(a,b){return a.namespaceURI==b.namespaceURI&&a.tagName.toLowerCase()==b.tagName.toLowerCase()&&l(a,b)&&w(a,b)&&"inline"==T(a,"display")&&"inline"==T(b,"display")}function H(a){var b=a?"nextSibling":"previousSibling";return function(c,d){var e=c.parentNode,f=c[b];if(f){if(f&&3==f.nodeType)return f}else if(d&&(f=e[b],f&&1==f.nodeType&&G(e,f))){var g=f[a?"firstChild":"lastChild"];if(g&&3==g.nodeType)return g}return null}}function I(a){this.isElementMerge=1==a.nodeType,this.textNodes=[];var b=this.isElementMerge?a.lastChild:a;b&&(this.textNodes[0]=b)}function J(a,b,e){var f,g,h,i,k=this;k.cssClass=k.className=a;var l=null,m={};if("object"==typeof b&&null!==b){for("undefined"!=typeof b.elementTagName&&(b.elementTagName=b.elementTagName.toLowerCase()),e=b.tagNames,l=b.elementProperties,m=b.elementAttributes,g=0;i=Z[g++];)b.hasOwnProperty(i)&&(k[i]=b[i]);f=b.normalize}else f=b;k.normalize="undefined"==typeof f?!0:f,k.attrExceptions=[];var n=document.createElement(k.elementTagName);k.elementProperties=k.copyPropertiesToElement(l,n,!0),c(m,function(a,b){k.attrExceptions.push(a),m[a]=""+b}),k.elementAttributes=m,k.elementSortedClassName=k.elementProperties.hasOwnProperty("className")?j(k.elementProperties.className+" "+a):a,k.applyToAnyTagName=!1;var o=typeof e;if("string"==o)"*"==e?k.applyToAnyTagName=!0:k.tagNames=d(e.toLowerCase()).split(/\s*,\s*/);else if("object"==o&&"number"==typeof e.length)for(k.tagNames=[],g=0,h=e.length;h>g;++g)"*"==e[g]?k.applyToAnyTagName=!0:k.tagNames.push(e[g].toLowerCase());else k.tagNames=[k.elementTagName]}function K(a,b,c){return new J(a,b,c)}var L=a.dom,M=L.DomPosition,N=L.arrayContains,O=a.util,P=O.forEach,Q="span",R=O.isHostMethod(document,"createElementNS"),S=function(){function a(a,b,c){return b&&c?" ":""}return function(b,c){if("object"==typeof b.classList)b.classList.remove(c);else{var d="string"==typeof b.className,e=d?b.className:b.getAttribute("class");e=e.replace(new RegExp("(^|\\s)"+c+"(\\s|$)"),a),d?b.className=e:b.setAttribute("class",e)}}}(),T=L.getComputedStyleProperty,U=function(){var a=document.createElement("div");return"boolean"==typeof a.isContentEditable?function(a){return a&&1==a.nodeType&&a.isContentEditable}:function(a){return a&&1==a.nodeType&&"false"!=a.contentEditable?"true"==a.contentEditable||U(a.parentNode):!1}}(),V=/^inline(-block|-table)?$/i,W=/[^\r\n\t\f \u200B]/,X=H(!1),Y=H(!0);I.prototype={doMerge:function(a){var b=this.textNodes,c=b[0];if(b.length>1){var d,e=L.getNodeIndex(c),f=[],g=0;P(b,function(b,h){d=b.parentNode,h>0&&(d.removeChild(b),d.hasChildNodes()||L.removeNode(d),a&&P(a,function(a){a.node==b&&(a.node=c,a.offset+=g),a.node==d&&a.offset>e&&(--a.offset,a.offset==e+1&&h<len-1&&(a.node=c,a.offset=g))})),f[h]=b.data,g+=b.data.length}),c.data=f.join("")}return c.data},getLength:function(){for(var a=this.textNodes.length,b=0;a--;)b+=this.textNodes[a].length;return b},toString:function(){var a=[];return P(this.textNodes,function(b,c){a[c]="'"+b.data+"'"}),"[Merge("+a.join(",")+")]"}};var Z=["elementTagName","ignoreWhiteSpace","applyToEditableOnly","useExistingElements","removeEmptyElements","onElementCreate"],$={};J.prototype={elementTagName:Q,elementProperties:{},elementAttributes:{},ignoreWhiteSpace:!0,applyToEditableOnly:!1,useExistingElements:!0,removeEmptyElements:!0,onElementCreate:null,copyPropertiesToElement:function(a,b,c){var d,e,f,h,i,k,l={};for(var m in a)if(a.hasOwnProperty(m))if(h=a[m],i=b[m],"className"==m)g(b,h),g(b,this.className),b[m]=j(b[m]),c&&(l[m]=h);else if("style"==m){e=i,c&&(l[m]=f={});for(d in a[m])a[m].hasOwnProperty(d)&&(e[d]=h[d],c&&(f[d]=e[d]));this.attrExceptions.push(m)}else b[m]=h,c&&(l[m]=b[m],k=$.hasOwnProperty(m)?$[m]:m,this.attrExceptions.push(k));return c?l:""},copyAttributesToElement:function(a,b){for(var c in a)a.hasOwnProperty(c)&&!/^class(?:Name)?$/i.test(c)&&b.setAttribute(c,a[c])},appliesToElement:function(a){return N(this.tagNames,a.tagName.toLowerCase())},getEmptyElements:function(a){var b=this;return a.getNodes([1],function(a){return b.appliesToElement(a)&&!a.hasChildNodes()})},hasClass:function(a){return 1==a.nodeType&&(this.applyToAnyTagName||this.appliesToElement(a))&&f(a,this.className)},getSelfOrAncestorWithClass:function(a){for(;a;){if(this.hasClass(a))return a;a=a.parentNode}return null},isModifiable:function(a){return!this.applyToEditableOnly||z(a)},isIgnorableWhiteSpaceNode:function(a){return this.ignoreWhiteSpace&&a&&3==a.nodeType&&B(a)},postApply:function(a,b,c,d){var e,f,g=a[0],h=a[a.length-1],j=[],k=g,l=h,m=0,n=h.length;P(a,function(a){f=X(a,!d),f?(e||(e=new I(f),j.push(e)),e.textNodes.push(a),a===g&&(k=e.textNodes[0],m=k.length),a===h&&(l=e.textNodes[0],n=e.getLength())):e=null});var o=Y(h,!d);if(o&&(e||(e=new I(h),j.push(e)),e.textNodes.push(o)),j.length){for(i=0,len=j.length;i<len;++i)j[i].doMerge(c);b.setStartAndEnd(k,m,l,n)}},createContainer:function(a){var b,c=L.getDocument(a),d=R&&!L.isHtmlNamespace(a)&&(b=a.namespaceURI)?c.createElementNS(a.namespaceURI,this.elementTagName):c.createElement(this.elementTagName);return this.copyPropertiesToElement(this.elementProperties,d,!1),this.copyAttributesToElement(this.elementAttributes,d),g(d,this.className),this.onElementCreate&&this.onElementCreate(d,this),d},elementHasProperties:function(a,b){var d=this;return c(b,function(b,c){if("className"==b)return m(a,c);if("object"==typeof c){if(!d.elementHasProperties(a[b],c))return!1}else if(a[b]!==c)return!1})},elementHasAttributes:function(a,b){return c(b,function(b,c){return a.getAttribute(b)!==c?!1:void 0})},applyToTextNode:function(a,b){if(n(a)){var c=a.parentNode;if(1==c.childNodes.length&&this.useExistingElements&&this.appliesToElement(c)&&this.elementHasProperties(c,this.elementProperties)&&this.elementHasAttributes(c,this.elementAttributes))g(c,this.className);else{var d=a.parentNode,e=this.createContainer(d);d.insertBefore(e,a),e.appendChild(a)}}},isRemovable:function(a){return a.tagName.toLowerCase()==this.elementTagName&&k(a)==this.elementSortedClassName&&this.elementHasProperties(a,this.elementProperties)&&!x(a,this.attrExceptions)&&this.elementHasAttributes(a,this.elementAttributes)&&this.isModifiable(a)},isEmptyContainer:function(a){var b=a.childNodes.length;return 1==a.nodeType&&this.isRemovable(a)&&(0==b||1==b&&this.isEmptyContainer(a.firstChild))},removeEmptyContainers:function(a){var b=this,c=a.getNodes([1],function(a){return b.isEmptyContainer(a)}),d=[a],e=C(d);
P(c,function(a){r(a,e)}),D(d,e)},undoToTextNode:function(a,b,c,d){if(!b.containsNode(c)){var e=b.cloneRange();e.selectNode(c),e.isPointInRange(b.endContainer,b.endOffset)&&(F(c,b.endContainer,b.endOffset,d),b.setEndAfter(c)),e.isPointInRange(b.startContainer,b.startOffset)&&(c=F(c,b.startContainer,b.startOffset,d))}this.isRemovable(c)?t(c,d):S(c,this.className)},splitAncestorWithClass:function(a,b,c){var d=this.getSelfOrAncestorWithClass(a);d&&F(d,a,b,c)},undoToAncestor:function(a,b){this.isRemovable(a)?t(a,b):S(a,this.className)},applyToRange:function(a,b){var c=this;b=b||[];var d=C(b||[]);a.splitBoundariesPreservingPositions(d),c.removeEmptyElements&&c.removeEmptyContainers(a);var e=v(a);if(e.length){P(e,function(a){c.isIgnorableWhiteSpaceNode(a)||c.getSelfOrAncestorWithClass(a)||!c.isModifiable(a)||c.applyToTextNode(a,d)});var f=e[e.length-1];a.setStartAndEnd(e[0],0,f,f.length),c.normalize&&c.postApply(e,a,d,!1),D(b,d)}var h=c.getEmptyElements(a);P(h,function(a){g(a,c.className)})},applyToRanges:function(a){for(var b=a.length;b--;)this.applyToRange(a[b],a);return a},applyToSelection:function(b){var c=a.getSelection(b);c.setRanges(this.applyToRanges(c.getAllRanges()))},undoToRange:function(a,b){var c=this;b=b||[];var d=C(b);a.splitBoundariesPreservingPositions(d),c.removeEmptyElements&&c.removeEmptyContainers(a,d);var e,f,g=v(a),h=g[g.length-1];if(g.length){c.splitAncestorWithClass(a.endContainer,a.endOffset,d),c.splitAncestorWithClass(a.startContainer,a.startOffset,d);for(var i=0,j=g.length;j>i;++i)e=g[i],f=c.getSelfOrAncestorWithClass(e),f&&c.isModifiable(e)&&c.undoToAncestor(f,d);a.setStartAndEnd(g[0],0,h,h.length),c.normalize&&c.postApply(g,a,d,!0),D(b,d)}var k=c.getEmptyElements(a);P(k,function(a){S(a,c.className)})},undoToRanges:function(a){for(var b=a.length;b--;)this.undoToRange(a[b],a);return a},undoToSelection:function(b){var c=a.getSelection(b),d=a.getSelection(b).getAllRanges();this.undoToRanges(d),c.setRanges(d)},isAppliedToRange:function(a){if(a.collapsed||""==a.toString())return!!this.getSelfOrAncestorWithClass(a.commonAncestorContainer);var b=a.getNodes([3]);if(b.length)for(var c,d=0;c=b[d++];)if(!this.isIgnorableWhiteSpaceNode(c)&&u(a,c)&&this.isModifiable(c)&&!this.getSelfOrAncestorWithClass(c))return!1;return!0},isAppliedToRanges:function(a){var b=a.length;if(0==b)return!1;for(;b--;)if(!this.isAppliedToRange(a[b]))return!1;return!0},isAppliedToSelection:function(b){var c=a.getSelection(b);return this.isAppliedToRanges(c.getAllRanges())},toggleRange:function(a){this.isAppliedToRange(a)?this.undoToRange(a):this.applyToRange(a)},toggleSelection:function(a){this.isAppliedToSelection(a)?this.undoToSelection(a):this.applyToSelection(a)},getElementsWithClassIntersectingRange:function(a){var b=[],c=this;return a.getNodes([3],function(a){var d=c.getSelfOrAncestorWithClass(a);d&&!N(b,d)&&b.push(d)}),b},detach:function(){}},J.util={hasClass:f,addClass:g,removeClass:S,getClass:h,hasSameClasses:l,hasAllClasses:m,replaceWithOwnChildren:t,elementsHaveSameNonClassAttributes:w,elementHasNonClassAttributes:x,splitNodeAt:F,isEditableElement:U,isEditingHost:y,isEditable:z},a.CssClassApplier=a.ClassApplier=J,a.createClassApplier=K,O.createAliasForDeprecatedMethod(a,"createCssClassApplier","createClassApplier",b)}),a},this),function(a,b){"function"==typeof define&&define.amd?define(["./rangy-core"],a):"undefined"!=typeof module&&"object"==typeof exports?module.exports=a(require("rangy")):a(b.rangy)}(function(a){return a.createModule("SaveRestore",["WrappedRange"],function(a,b){function c(a,b){return(b||document).getElementById(a)}function d(a,b){var c,d="selectionBoundary_"+ +new Date+"_"+(""+Math.random()).slice(2),e=o.getDocument(a.startContainer),f=a.cloneRange();return f.collapse(b),c=e.createElement("span"),c.id=d,c.style.lineHeight="0",c.style.display="none",c.className="rangySelectionBoundary",c.appendChild(e.createTextNode(r)),f.insertNode(c),c}function e(a,d,e,f){var g=c(e,a);g?(d[f?"setStartBefore":"setEndBefore"](g),p(g)):b.warn("Marker element has been removed. Cannot restore selection.")}function f(a,b){return b.compareBoundaryPoints(a.START_TO_START,a)}function g(b,c){var e,f,g=a.DomRange.getRangeDocument(b),h=b.toString(),i=q(c);return b.collapsed?(f=d(b,!1),{document:g,markerId:f.id,collapsed:!0}):(f=d(b,!1),e=d(b,!0),{document:g,startMarkerId:e.id,endMarkerId:f.id,collapsed:!1,backward:i,toString:function(){return"original text: '"+h+"', new text: '"+b.toString()+"'"}})}function h(d,f){var g=d.document;"undefined"==typeof f&&(f=!0);var h=a.createRange(g);if(d.collapsed){var i=c(d.markerId,g);if(i){i.style.display="inline";var j=i.previousSibling;j&&3==j.nodeType?(p(i),h.collapseToPoint(j,j.length)):(h.collapseBefore(i),p(i))}else b.warn("Marker element has been removed. Cannot restore selection.")}else e(g,h,d.startMarkerId,!0),e(g,h,d.endMarkerId,!1);return f&&h.normalizeBoundaries(),h}function i(b,d){var e,h,i=[],j=q(d);b=b.slice(0),b.sort(f);for(var k=0,l=b.length;l>k;++k)i[k]=g(b[k],j);for(k=l-1;k>=0;--k)e=b[k],h=a.DomRange.getRangeDocument(e),e.collapsed?e.collapseAfter(c(i[k].markerId,h)):(e.setEndBefore(c(i[k].endMarkerId,h)),e.setStartAfter(c(i[k].startMarkerId,h)));return i}function j(c){if(!a.isSelectionValid(c))return b.warn("Cannot save selection. This usually happens when the selection is collapsed and the selection document has lost focus."),null;var d=a.getSelection(c),e=d.getAllRanges(),f=1==e.length&&d.isBackward(),g=i(e,f);return f?d.setSingleRange(e[0],f):d.setRanges(e),{win:c,rangeInfos:g,restored:!1}}function k(a){for(var b=[],c=a.length,d=c-1;d>=0;d--)b[d]=h(a[d],!0);return b}function l(b,c){if(!b.restored){var d=b.rangeInfos,e=a.getSelection(b.win),f=k(d),g=d.length;1==g&&c&&a.features.selectionHasExtend&&d[0].backward?(e.removeAllRanges(),e.addRange(f[0],!0)):e.setRanges(f),b.restored=!0}}function m(a,b){var d=c(b,a);d&&p(d)}function n(a){for(var b,c=a.rangeInfos,d=0,e=c.length;e>d;++d)b=c[d],b.collapsed?m(a.doc,b.markerId):(m(a.doc,b.startMarkerId),m(a.doc,b.endMarkerId))}var o=a.dom,p=o.removeNode,q=a.Selection.isDirectionBackward,r="\ufeff";a.util.extend(a,{saveRange:g,restoreRange:h,saveRanges:i,restoreRanges:k,saveSelection:j,restoreSelection:l,removeMarkerElement:m,removeMarkers:n})}),a},this),function(a,b){"function"==typeof define&&define.amd?define(["./rangy-core"],a):"undefined"!=typeof module&&"object"==typeof exports?module.exports=a(require("rangy")):a(b.rangy)}(function(a){return a.createModule("Serializer",["WrappedSelection"],function(a,b){function c(a){return a.replace(/</g,"&lt;").replace(/>/g,"&gt;")}function d(a,b){b=b||[];var e=a.nodeType,f=a.childNodes,g=f.length,h=[e,a.nodeName,g].join(":"),i="",j="";switch(e){case 3:i=c(a.nodeValue);break;case 8:i="<!--"+c(a.nodeValue)+"-->";break;default:i="<"+h+">",j="</>"}i&&b.push(i);for(var k=0;g>k;++k)d(f[k],b);return j&&b.push(j),b}function e(a){var b=d(a).join("");return s(b).toString(16)}function f(a,b,c){var d=[],e=a;for(c=c||t.getDocument(a).documentElement;e&&e!=c;)d.push(t.getNodeIndex(e,!0)),e=e.parentNode;return d.join("/")+":"+b}function g(a,c,d){c||(c=(d||document).documentElement);for(var e,f=a.split(":"),g=c,h=f[0]?f[0].split("/"):[],i=h.length;i--;){if(e=parseInt(h[i],10),!(e<g.childNodes.length))throw b.createError("deserializePosition() failed: node "+t.inspectNode(g)+" has no child with index "+e+", "+i);g=g.childNodes[e]}return new t.DomPosition(g,parseInt(f[1],10))}function h(c,d,g){if(g=g||a.DomRange.getRangeDocument(c).documentElement,!t.isOrIsAncestorOf(g,c.commonAncestorContainer))throw b.createError("serializeRange(): range "+c.inspect()+" is not wholly contained within specified root node "+t.inspectNode(g));var h=f(c.startContainer,c.startOffset,g)+","+f(c.endContainer,c.endOffset,g);return d||(h+="{"+e(g)+"}"),h}function i(c,d,f){d?f=f||t.getDocument(d):(f=f||document,d=f.documentElement);var h=u.exec(c),i=h[4];if(i){var j=e(d);if(i!==j)throw b.createError("deserializeRange(): checksums of serialized range root node ("+i+") and target root node ("+j+") do not match")}var k=g(h[1],d,f),l=g(h[2],d,f),m=a.createRange(f);return m.setStartAndEnd(k.node,k.offset,l.node,l.offset),m}function j(a,b,c){b||(b=(c||document).documentElement);var d=u.exec(a),f=d[3];return!f||f===e(b)}function k(b,c,d){b=a.getSelection(b);for(var e=b.getAllRanges(),f=[],g=0,i=e.length;i>g;++g)f[g]=h(e[g],c,d);return f.join("|")}function l(b,c,d){c?d=d||t.getWindow(c):(d=d||window,c=d.document.documentElement);for(var e=b.split("|"),f=a.getSelection(d),g=[],h=0,j=e.length;j>h;++h)g[h]=i(e[h],c,d.document);return f.setRanges(g),f}function m(a,b,c){var d;b?d=c?c.document:t.getDocument(b):(c=c||window,b=c.document.documentElement);for(var e=a.split("|"),f=0,g=e.length;g>f;++f)if(!j(e[f],b,d))return!1;return!0}function n(a){for(var b,c,d=a.split(/[;,]/),e=0,f=d.length;f>e;++e)if(b=d[e].split("="),b[0].replace(/^\s+/,"")==v&&(c=b[1]))return decodeURIComponent(c.replace(/\s+$/,""));return null}function o(a){a=a||window;var b=n(a.document.cookie);b&&l(b,a.doc)}function p(b,c){b=b||window,c="object"==typeof c?c:{};var d=c.expires?";expires="+c.expires.toUTCString():"",e=c.path?";path="+c.path:"",f=c.domain?";domain="+c.domain:"",g=c.secure?";secure":"",h=k(a.getSelection(b));b.document.cookie=encodeURIComponent(v)+"="+encodeURIComponent(h)+d+e+f+g}var q="undefined",r=a.util;typeof encodeURIComponent!=q&&typeof decodeURIComponent!=q||b.fail("encodeURIComponent and/or decodeURIComponent method is missing");var s=function(){function a(a){for(var b,c=[],d=0,e=a.length;e>d;++d)b=a.charCodeAt(d),128>b?c.push(b):2048>b?c.push(b>>6|192,63&b|128):c.push(b>>12|224,b>>6&63|128,63&b|128);return c}function b(){for(var a,b,c=[],d=0;256>d;++d){for(b=d,a=8;a--;)1==(1&b)?b=b>>>1^3988292384:b>>>=1;c[d]=b>>>0}return c}function c(){return d||(d=b()),d}var d=null;return function(b){for(var d,e=a(b),f=-1,g=c(),h=0,i=e.length;i>h;++h)d=255&(f^e[h]),f=f>>>8^g[d];return(-1^f)>>>0}}(),t=a.dom,u=/^([^,]+),([^,\{]+)(\{([^}]+)\})?$/,v="rangySerializedSelection";r.extend(a,{serializePosition:f,deserializePosition:g,serializeRange:h,deserializeRange:i,canDeserializeRange:j,serializeSelection:k,deserializeSelection:l,canDeserializeSelection:m,restoreSelectionFromCookie:o,saveSelectionCookie:p,getElementChecksum:e,nodeToInfoString:d}),r.crc32=s}),a},this),function(a,b,c){"use strict";function d(){this.$get=["$$sanitizeUri",function(a){return function(b){"undefined"!=typeof arguments[1]&&(arguments[1].version="taSanitize");var c=[];return g(b,l(c,function(b,c){return!/^unsafe/.test(a(b,c))})),c.join("")}}]}function e(a){var c=[],d=l(c,b.noop);return d.chars(a),c.join("")}function f(a){var b,c={},d=a.split(",");for(b=0;b<d.length;b++)c[d[b]]=!0;return c}function g(a,c){function d(a,d,f,g){if(d=b.lowercase(d),D[d])for(;k.last()&&E[k.last()];)e("",k.last());C[d]&&k.last()==d&&e("",d),g=z[d]||!!g,g||k.push(d);var i={};f.replace(p,function(a,b,c,d,e){var f=c||d||e||"";i[b]=h(f)}),c.start&&c.start(d,i,g)}function e(a,d){var e,f=0;if(d=b.lowercase(d))for(f=k.length-1;f>=0&&k[f]!=d;f--);if(f>=0){for(e=k.length-1;e>=f;e--)c.end&&c.end(k[e]);k.length=f}}"string"!=typeof a&&(a=null===a||"undefined"==typeof a?"":""+a);var f,g,i,j,k=[],l=a;for(k.last=function(){return k[k.length-1]};a;){if(j="",g=!0,k.last()&&G[k.last()])a=a.replace(new RegExp("([^]*)<\\s*\\/\\s*"+k.last()+"[^>]*>","i"),function(a,b){return b=b.replace(s,"$1").replace(v,"$1"),c.chars&&c.chars(h(b)),""}),e("",k.last());else{if(y.test(a)){if(i=a.match(y)){i[0];c.whitespace&&c.whitespace(i[0]),a=a.replace(i[0],""),g=!1}}else t.test(a)?(i=a.match(t),i&&(c.comment&&c.comment(i[1]),a=a.replace(i[0],""),g=!1)):u.test(a)?(i=a.match(u),i&&(a=a.replace(i[0],""),g=!1)):r.test(a)?(i=a.match(o),i&&(a=a.substring(i[0].length),i[0].replace(o,e),g=!1)):q.test(a)&&(i=a.match(n),i?(i[4]&&(a=a.substring(i[0].length),i[0].replace(n,d)),g=!1):(j+="<",a=a.substring(1)));g&&(f=a.indexOf("<"),j+=0>f?a:a.substring(0,f),a=0>f?"":a.substring(f),c.chars&&c.chars(h(j)))}if(a==l)throw m("badparse","The sanitizer was unable to parse the following block of html: {0}",a);l=a}e()}function h(a){if(!a)return"";var b=N.exec(a),c=b[1],d=b[3],e=b[2];return e&&(M.innerHTML=e.replace(/</g,"&lt;"),e="textContent"in M?M.textContent:M.innerText),c+e+d}function i(a){return a.replace(/&/g,"&amp;").replace(w,function(a){var b=a.charCodeAt(0),c=a.charCodeAt(1);return"&#"+(1024*(b-55296)+(c-56320)+65536)+";"}).replace(x,function(a){var b=a.charCodeAt(0);return 159>=b||173==b||b>=1536&&1540>=b||1807==b||6068==b||6069==b||b>=8204&&8207>=b||b>=8232&&8239>=b||b>=8288&&8303>=b||65279==b||b>=65520&&65535>=b?"&#"+b+";":a}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function j(a){var c="",d=a.split(";");return b.forEach(d,function(a){var d=a.split(":");if(2==d.length){var e=O(b.lowercase(d[0])),a=O(b.lowercase(d[1]));(("color"===e||"background-color"===e)&&(a.match(/^rgb\([0-9%,\. ]*\)$/i)||a.match(/^rgba\([0-9%,\. ]*\)$/i)||a.match(/^hsl\([0-9%,\. ]*\)$/i)||a.match(/^hsla\([0-9%,\. ]*\)$/i)||a.match(/^#[0-9a-f]{3,6}$/i)||a.match(/^[a-z]*$/i))||"text-align"===e&&("left"===a||"right"===a||"center"===a||"justify"===a)||"text-decoration"===e&&("underline"===a||"line-through"===a)||"font-weight"===e&&"bold"===a||"float"===e&&("left"===a||"right"===a||"none"===a)||("width"===e||"height"===e)&&a.match(/[0-9\.]*(px|em|rem|%)/)||"direction"===e&&a.match(/^ltr|rtl|initial|inherit$/))&&(c+=e+": "+a+";")}}),c}function k(a,b,c,d){return!("img"!==a||!b["ta-insert-video"]||"ta-insert-video"!==c&&"allowfullscreen"!==c&&"frameborder"!==c&&("contenteditable"!==c||"false"!==d))}function l(a,c){var d=!1,e=b.bind(a,a.push);return{start:function(a,f,g){a=b.lowercase(a),!d&&G[a]&&(d=a),d||H[a]!==!0||(e("<"),e(a),b.forEach(f,function(d,g){var h=b.lowercase(g),l="img"===a&&"src"===h||"background"===h;("style"===h&&""!==(d=j(d))||k(a,f,h,d)||L[h]===!0&&(I[h]!==!0||c(d,l)))&&(e(" "),e(g),e('="'),e(i(d)),e('"'))}),e(g?"/>":">"))},comment:function(a){e(a)},whitespace:function(a){e(i(a))},end:function(a){a=b.lowercase(a),d||H[a]!==!0||(e("</"),e(a),e(">")),a==d&&(d=!1)},chars:function(a){d||e(i(a))}}}var m=b.$$minErr("$sanitize"),n=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,o=/^<\/\s*([\w:-]+)[^>]*>/,p=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,q=/^</,r=/^<\//,s=/<!--(.*?)-->/g,t=/(^<!--.*?-->)/,u=/<!DOCTYPE([^>]*?)>/i,v=/<!\[CDATA\[(.*?)]]>/g,w=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,x=/([^\#-~| |!])/g,y=/^(\s+)/,z=f("area,br,col,hr,img,wbr,input"),A=f("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),B=f("rp,rt"),C=b.extend({},B,A),D=b.extend({},A,f("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),E=b.extend({},B,f("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),F=f("animate,animateColor,animateMotion,animateTransform,circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,set,stop,svg,switch,text,title,tspan,use"),G=f("script,style"),H=b.extend({},z,D,E,C,F),I=f("background,cite,href,longdesc,src,usemap,xlink:href"),J=f("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,id,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width"),K=f("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,attributeName,attributeType,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan"),L=b.extend({},I,K,J),M=document.createElement("pre"),N=/^(\s*)([\s\S]*?)(\s*)$/,O=function(){return String.prototype.trim?function(a){return b.isString(a)?a.trim():a}:function(a){return b.isString(a)?a.replace(/^\s\s*/,"").replace(/\s\s*$/,""):a}}();b.module("ngSanitize",[]).provider("$sanitize",d),b.module("ngSanitize").filter("linky",["$sanitize",function(a){var c=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"]/,d=/^mailto:/;return function(f,g){function h(a){a&&n.push(e(a))}function i(a,c){n.push("<a "),b.isDefined(g)&&n.push('target="',g,'" '),n.push('href="',a.replace(/"/g,"&quot;"),'">'),h(c),n.push("</a>")}if(!f)return f;for(var j,k,l,m=f,n=[];j=m.match(c);)k=j[0],j[2]||j[4]||(k=(j[3]?"http://":"mailto:")+k),l=j.index,h(m.substr(0,l)),i(k,j[0].replace(d,"")),m=m.substring(l+j[0].length);return h(m),a(n.join(""))}}])}(window,window.angular),"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="textAngular"),function(){"use strict";var a={ie:function(){for(var a,b=3,c=document.createElement("div"),d=c.getElementsByTagName("i");c.innerHTML="<!--[if gt IE "+ ++b+"]><i></i><![endif]-->",d[0];);return b>4?b:a}(),webkit:/AppleWebKit\/([\d.]+)/i.test(navigator.userAgent)},b=!1;a.webkit&&(document.addEventListener("mousedown",function(a){var c=a||window.event,d=c.target;if(b&&null!==d){for(var e=!1,f=d;null!==f&&"html"!==f.tagName.toLowerCase()&&!e;)e="true"===f.contentEditable,f=f.parentNode;e||(document.getElementById("textAngular-editableFix-010203040506070809").setSelectionRange(0,0),d.focus(),d.select&&d.select())}b=!1},!1),angular.element(document).ready(function(){angular.element(document.body).append(angular.element('<input id="textAngular-editableFix-010203040506070809" class="ta-hidden-input" aria-hidden="true" unselectable="on" tabIndex="-1">'))}));var c=/^(address|article|aside|audio|blockquote|canvas|dd|div|dl|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|noscript|ol|output|p|pre|section|table|tfoot|ul|video)$/i,d=/^(ul|li|ol)$/i,e=/^(address|article|aside|audio|blockquote|canvas|dd|div|dl|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|noscript|ol|output|p|pre|section|table|tfoot|ul|video|li)$/i;String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var f,g,h,i,j,k;if(a.ie>8||void 0===a.ie){for(var l=document.styleSheets,m=0;m<l.length;m++)if((0===l[m].media.length||l[m].media.mediaText.match(/(all|screen)/gi))&&l[m].href&&l[m].href.match(/textangular\.(min\.|)css/gi)){f=l[m];break}f||(f=function(){var b=document.createElement("style");return a.webkit&&b.appendChild(document.createTextNode("")),document.getElementsByTagName("head")[0].appendChild(b),b.sheet}()),g=function(a,b){return i(f,a,b)},i=function(a,b,c){var d,e;return a.cssRules?d=Math.max(a.cssRules.length-1,0):a.rules&&(d=Math.max(a.rules.length-1,0)),a.insertRule?a.insertRule(b+"{"+c+"}",d):a.addRule(b,c,d),f.rules?e=f.rules[d]:f.cssRules&&(e=f.cssRules[d]),e},k=function(a,b){var c,d;for(c=0;c<b.length;c++)if(b[c].cssText===a.cssText){d=c;break}return d},h=function(a){j(f,a)},j=function(a,b){var c=a.cssRules||a.rules;if(c&&0!==c.length){var d=k(b,c);a.removeRule?a.removeRule(d):a.deleteRule(d)}}}angular.module("textAngular.factories",[]).factory("taBrowserTag",[function(){return function(b){return b?""===b?void 0===a.ie?"div":a.ie<=8?"P":"p":a.ie<=8?b.toUpperCase():b:a.ie<=8?"P":"p"}}]).factory("taApplyCustomRenderers",["taCustomRenderers","taDOM",function(a,b){return function(c){var d=angular.element("<div></div>");return d[0].innerHTML=c,angular.forEach(a,function(a){var c=[];a.selector&&""!==a.selector?c=d.find(a.selector):a.customAttribute&&""!==a.customAttribute&&(c=b.getByAttribute(d,a.customAttribute)),angular.forEach(c,function(b){b=angular.element(b),a.selector&&""!==a.selector&&a.customAttribute&&""!==a.customAttribute?void 0!==b.attr(a.customAttribute)&&a.renderLogic(b):a.renderLogic(b)})}),d[0].innerHTML}}]).factory("taFixChrome",function(){var a=function(a){if(!a||!angular.isString(a)||a.length<=0)return a;for(var b,c,d,e=/<([^>\/]+?)style=("([^"]+)"|'([^']+)')([^>]*)>/gi,f="",g=0;b=e.exec(a);)c=b[3]||b[4],c&&c.match(/line-height: 1.[0-9]{3,12};|color: inherit; line-height: 1.1;/i)&&(c=c.replace(/( |)font-family: inherit;|( |)line-height: 1.[0-9]{3,12};|( |)color: inherit;/gi,""),d="<"+b[1].trim(),c.trim().length>0&&(d+=" style="+b[2].substring(0,1)+c+b[2].substring(0,1)),d+=b[5].trim()+">",f+=a.substring(g,b.index)+d,g=b.index+b[0].length);return f+=a.substring(g),g>0?f.replace(/<span\s?>(.*?)<\/span>(<br(\/|)>|)/gi,"$1"):a};return a}).factory("taSanitize",["$sanitize",function(a){function b(a,b){for(var c,d=0,e=0,f=/<[^>]*>/gi;c=f.exec(a);)if(e=c.index,"/"===c[0].substr(1,1)){if(0===d)break;d--}else d++;return b+a.substring(0,e)+angular.element(b)[0].outerHTML.substring(b.length)+a.substring(e)}function c(a){if(!a||!angular.isString(a)||a.length<=0)return a;for(var d,f,g,h,i,k,l=/<([^>\/]+?)style=("([^"]+)"|'([^']+)')([^>]*)>/gi,m="",n="",o=0;f=l.exec(a);){h=f[3]||f[4];var p=new RegExp(j,"i");if(angular.isString(h)&&p.test(h)){i="";for(var q=new RegExp(j,"ig");g=q.exec(h);)for(d=0;d<e.length;d++)g[2*d+2]&&(i+="<"+e[d].tag+">");k=c(a.substring(o,f.index)),n+=m.length>0?b(k,m):k,h=h.replace(new RegExp(j,"ig"),""),n+="<"+f[1].trim(),h.length>0&&(n+=' style="'+h+'"'),n+=f[5]+">",o=f.index+f[0].length,m=i}}return n+=m.length>0?b(a.substring(o),m):a.substring(o)}function d(a){if(!a||!angular.isString(a)||a.length<=0)return a;for(var b,c=/<([^>\/]+?)align=("([^"]+)"|'([^']+)')([^>]*)>/gi,d="",e=0;b=c.exec(a);){d+=a.substring(e,b.index),e=b.index+b[0].length;var f="<"+b[1]+b[5];/style=("([^"]+)"|'([^']+)')/gi.test(f)?f=f.replace(/style=("([^"]+)"|'([^']+)')/i,'style="$2$3 text-align:'+(b[3]||b[4])+';"'):f+=' style="text-align:'+(b[3]||b[4])+';"',f+=">",d+=f}return d+a.substring(e)}for(var e=[{property:"font-weight",values:["bold"],tag:"b"},{property:"font-style",values:["italic"],tag:"i"}],f=[],g=0;g<e.length;g++){for(var h="("+e[g].property+":\\s*(",i=0;i<e[g].values.length;i++)i>0&&(h+="|"),h+=e[g].values[i];h+=");)",f.push(h)}var j="("+f.join("|")+")";return function(b,e,f){if(!f)try{b=c(b)}catch(g){}b=d(b);var h;try{h=a(b),f&&(h=b)}catch(g){h=e||""}var i,j=h.match(/(<pre[^>]*>.*?<\/pre[^>]*>)/gi),k=h.replace(/(&#(9|10);)*/gi,""),l=/<pre[^>]*>.*?<\/pre[^>]*>/gi,m=0,n=0;for(h="";null!==(i=l.exec(k))&&m<j.length;)h+=k.substring(n,i.index)+j[m],n=i.index+i[0].length,m++;return h+k.substring(n)}}]).factory("taToolExecuteAction",["$q","$log",function(a,b){return function(c){void 0!==c&&(this.$editor=function(){return c});var d,e=a.defer(),f=e.promise,g=this.$editor();try{d=this.action(e,g.startAction()),f["finally"](function(){g.endAction.call(g)})}catch(h){b.error(h)}(d||void 0===d)&&e.resolve()}}]),angular.module("textAngular.DOM",["textAngular.factories"]).factory("taExecCommand",["taSelection","taBrowserTag","$document",function(a,b,e){var f=function(b,c){var d,e,f=b.find("li");for(e=f.length-1;e>=0;e--)d=angular.element("<"+c+">"+f[e].innerHTML+"</"+c+">"),b.after(d);b.remove(),a.setSelectionToElementEnd(d[0])},g=function(b){/(<br(|\/)>)$/i.test(b.innerHTML.trim())?a.setSelectionBeforeElement(angular.element(b).find("br")[0]):a.setSelectionToElementEnd(b)},h=function(a,b){var c=angular.element("<"+b+">"+a[0].innerHTML+"</"+b+">");a.after(c),a.remove(),g(c.find("li")[0])},i=function(a,c,d){for(var e="",f=0;f<a.length;f++)e+="<"+b("li")+">"+a[f].innerHTML+"</"+b("li")+">";var h=angular.element("<"+d+">"+e+"</"+d+">");c.after(h),c.remove(),g(h.find("li")[0])};return function(g,j){return g=b(g),function(k,l,m,n){var o,p,q,r,s,t,u,v=angular.element("<"+g+">");try{u=a.getSelectionElement()}catch(w){}var x=angular.element(u);if(void 0!==u){var y=u.tagName.toLowerCase();if("insertorderedlist"===k.toLowerCase()||"insertunorderedlist"===k.toLowerCase()){var z=b("insertorderedlist"===k.toLowerCase()?"ol":"ul");if(y===z)return f(x,g);if("li"===y&&x.parent()[0].tagName.toLowerCase()===z&&1===x.parent().children().length)return f(x.parent(),g);if("li"===y&&x.parent()[0].tagName.toLowerCase()!==z&&1===x.parent().children().length)return h(x.parent(),z);if(y.match(c)&&!x.hasClass("ta-bind")){if("ol"===y||"ul"===y)return h(x,z);var A=!1;return angular.forEach(x.children(),function(a){a.tagName.match(c)&&(A=!0)}),A?i(x.children(),x,z):i([angular.element("<div>"+u.innerHTML+"</div>")[0]],x,z)}if(y.match(c)){if(r=a.getOnlySelectedElements(),0===r.length)p=angular.element("<"+z+"><li>"+u.innerHTML+"</li></"+z+">"),x.html(""),x.append(p);else{if(1===r.length&&("ol"===r[0].tagName.toLowerCase()||"ul"===r[0].tagName.toLowerCase()))return r[0].tagName.toLowerCase()===z?f(angular.element(r[0]),g):h(angular.element(r[0]),z);q="";var B=[];for(o=0;o<r.length;o++)if(3!==r[o].nodeType){var C=angular.element(r[o]);if("li"===r[o].tagName.toLowerCase())continue;q+="ol"===r[o].tagName.toLowerCase()||"ul"===r[o].tagName.toLowerCase()?C[0].innerHTML:"span"!==r[o].tagName.toLowerCase()||"ol"!==r[o].childNodes[0].tagName.toLowerCase()&&"ul"!==r[o].childNodes[0].tagName.toLowerCase()?"<"+b("li")+">"+C[0].innerHTML+"</"+b("li")+">":C[0].childNodes[0].innerHTML,B.unshift(C)}p=angular.element("<"+z+">"+q+"</"+z+">"),B.pop().replaceWith(p),angular.forEach(B,function(a){a.remove()})}return void a.setSelectionToElementEnd(p[0])}}else{if("formatblock"===k.toLowerCase()){for(t=m.toLowerCase().replace(/[<>]/gi,""),"default"===t.trim()&&(t=g,m="<"+g+">"),p="li"===y?x.parent():x;!p[0].tagName||!p[0].tagName.match(c)&&!p.parent().attr("contenteditable");)p=p.parent(),y=(p[0].tagName||"").toLowerCase();if(y===t){r=p.children();var D=!1;for(o=0;o<r.length;o++)D=D||r[o].tagName.match(c);D?(p.after(r),s=p.next(),p.remove(),p=s):(v.append(p[0].childNodes),p.after(v),p.remove(),p=v)}else if(p.parent()[0].tagName.toLowerCase()!==t||p.parent().hasClass("ta-bind"))if(y.match(d))p.wrap(m);else{for(r=a.getOnlySelectedElements(),0===r.length&&(r=[p[0]]),o=0;o<r.length;o++)if(3===r[o].nodeType||!r[o].tagName.match(c))for(;3===r[o].nodeType||!r[o].tagName||!r[o].tagName.match(c);)r[o]=r[o].parentNode;if(angular.element(r[0]).hasClass("ta-bind"))p=angular.element(m),p[0].innerHTML=r[0].innerHTML,r[0].innerHTML=p[0].outerHTML;else if("blockquote"===t){for(q="",o=0;o<r.length;o++)q+=r[o].outerHTML;for(p=angular.element(m),p[0].innerHTML=q,r[0].parentNode.insertBefore(p[0],r[0]),o=r.length-1;o>=0;o--)r[o].parentNode&&r[o].parentNode.removeChild(r[o])}else for(o=0;o<r.length;o++)p=angular.element(m),p[0].innerHTML=r[o].innerHTML,r[o].parentNode.insertBefore(p[0],r[o]),r[o].parentNode.removeChild(r[o])}else{var E=p.parent(),F=E.contents();for(o=0;o<F.length;o++)E.parent().hasClass("ta-bind")&&3===F[o].nodeType&&(v=angular.element("<"+g+">"),v[0].innerHTML=F[o].outerHTML,F[o]=v[0]),E.parent()[0].insertBefore(F[o],E[0]);E.remove()}return void a.setSelectionToElementEnd(p[0])}if("createlink"===k.toLowerCase()){var G='<a href="'+m+'" target="'+(n.a.target?n.a.target:"")+'">',H="</a>",I=a.getSelection();if(I.collapsed)a.insertHtml(G+m+H,j);else if(rangy.getSelection().getRangeAt(0).canSurroundContents()){var J=angular.element(G+H)[0];rangy.getSelection().getRangeAt(0).surroundContents(J)}return}if("inserthtml"===k.toLowerCase())return void a.insertHtml(m,j)}}try{e[0].execCommand(k,l,m)}catch(w){}}}}]).service("taSelection",["$window","$document","taDOM",function(a,b,d){var f=b[0],g=a.rangy,h=function(a,b){return a.tagName&&a.tagName.match(/^br$/i)&&0===b&&!a.previousSibling?{element:a.parentNode,offset:0}:{element:a,offset:b}},i={getSelection:function(){var a=g.getSelection().getRangeAt(0),b=a.commonAncestorContainer,c={start:h(a.startContainer,a.startOffset),end:h(a.endContainer,a.endOffset),collapsed:a.collapsed};return b=3===b.nodeType?b.parentNode:b,b.parentNode===c.start.element||b.parentNode===c.end.element?c.container=b.parentNode:c.container=b,c},getOnlySelectedElements:function(){var a=g.getSelection().getRangeAt(0),b=a.commonAncestorContainer;return b=3===b.nodeType?b.parentNode:b,a.getNodes([1],function(a){return a.parentNode===b})},getSelectionElement:function(){return i.getSelection().container},setSelection:function(a,b,c){var d=g.createRange();d.setStart(a,b),d.setEnd(a,c),g.getSelection().setSingleRange(d)},setSelectionBeforeElement:function(a){var b=g.createRange();b.selectNode(a),b.collapse(!0),g.getSelection().setSingleRange(b)},setSelectionAfterElement:function(a){var b=g.createRange();b.selectNode(a),b.collapse(!1),g.getSelection().setSingleRange(b)},setSelectionToElementStart:function(a){var b=g.createRange();b.selectNodeContents(a),b.collapse(!0),g.getSelection().setSingleRange(b)},setSelectionToElementEnd:function(a){var b=g.createRange();b.selectNodeContents(a),b.collapse(!1),a.childNodes&&a.childNodes[a.childNodes.length-1]&&"br"===a.childNodes[a.childNodes.length-1].nodeName&&(b.startOffset=b.endOffset=b.startOffset-1),g.getSelection().setSingleRange(b)},insertHtml:function(a,b){var h,j,k,l,m,n,o,p=angular.element("<div>"+a+"</div>"),q=g.getSelection().getRangeAt(0),r=f.createDocumentFragment(),s=p[0].childNodes,t=!0;if(s.length>0){for(l=[],k=0;k<s.length;k++)"p"===s[k].nodeName.toLowerCase()&&""===s[k].innerHTML.trim()||3===s[k].nodeType&&""===s[k].nodeValue.trim()||(t=t&&!c.test(s[k].nodeName),l.push(s[k]));for(var u=0;u<l.length;u++)n=r.appendChild(l[u]);!t&&q.collapsed&&/^(|<br(|\/)>)$/i.test(q.startContainer.innerHTML)&&q.selectNode(q.startContainer)}else t=!0,n=r=f.createTextNode(a);if(t)q.deleteContents();else if(q.collapsed&&q.startContainer!==b)if(q.startContainer.innerHTML&&q.startContainer.innerHTML.match(/^<[^>]*>$/i))h=q.startContainer,1===q.startOffset?(q.setStartAfter(h),q.setEndAfter(h)):(q.setStartBefore(h),q.setEndBefore(h));else{if(3===q.startContainer.nodeType&&q.startContainer.parentNode!==b)for(h=q.startContainer.parentNode,j=h.cloneNode(),d.splitNodes(h.childNodes,h,j,q.startContainer,q.startOffset);!e.test(h.nodeName);){angular.element(h).after(j),h=h.parentNode;var v=j;j=h.cloneNode(),d.splitNodes(h.childNodes,h,j,v)}else h=q.startContainer,j=h.cloneNode(),d.splitNodes(h.childNodes,h,j,void 0,void 0,q.startOffset);if(angular.element(h).after(j),q.setStartAfter(h),q.setEndAfter(h),/^(|<br(|\/)>)$/i.test(h.innerHTML.trim())&&(q.setStartBefore(h),q.setEndBefore(h),angular.element(h).remove()),/^(|<br(|\/)>)$/i.test(j.innerHTML.trim())&&angular.element(j).remove(),"li"===h.nodeName.toLowerCase()){for(o=f.createDocumentFragment(),m=0;m<r.childNodes.length;m++)p=angular.element("<li>"),d.transferChildNodes(r.childNodes[m],p[0]),d.transferNodeAttributes(r.childNodes[m],p[0]),o.appendChild(p[0]);r=o,n&&(n=r.childNodes[r.childNodes.length-1],n=n.childNodes[n.childNodes.length-1])}}else q.deleteContents();q.insertNode(r),n&&i.setSelectionToElementEnd(n)}};return i}]).service("taDOM",function(){var a={getByAttribute:function(b,c){var d=[],e=b.children();return e.length&&angular.forEach(e,function(b){d=d.concat(a.getByAttribute(angular.element(b),c));
}),void 0!==b.attr(c)&&d.push(b),d},transferChildNodes:function(a,b){for(b.innerHTML="";a.childNodes.length>0;)b.appendChild(a.childNodes[0]);return b},splitNodes:function(b,c,d,e,f,g){if(!e&&isNaN(g))throw new Error("taDOM.splitNodes requires a splitNode or splitIndex");for(var h=document.createDocumentFragment(),i=document.createDocumentFragment(),j=0;b.length>0&&(isNaN(g)||g!==j)&&b[0]!==e;)h.appendChild(b[0]),j++;for(!isNaN(f)&&f>=0&&b[0]&&(h.appendChild(document.createTextNode(b[0].nodeValue.substring(0,f))),b[0].nodeValue=b[0].nodeValue.substring(f));b.length>0;)i.appendChild(b[0]);a.transferChildNodes(h,c),a.transferChildNodes(i,d)},transferNodeAttributes:function(a,b){for(var c=0;c<a.attributes.length;c++)b.setAttribute(a.attributes[c].name,a.attributes[c].value);return b}};return a}),angular.module("textAngular.validators",[]).directive("taMaxText",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){var e=parseInt(a.$eval(c.taMaxText));if(isNaN(e))throw"Max text must be an integer";c.$observe("taMaxText",function(a){if(e=parseInt(a),isNaN(e))throw"Max text must be an integer";d.$dirty&&d.$validate()}),d.$validators.taMaxText=function(a){var b=angular.element("<div/>");return b.html(a),b.text().length<=e}}}}).directive("taMinText",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){var e=parseInt(a.$eval(c.taMinText));if(isNaN(e))throw"Min text must be an integer";c.$observe("taMinText",function(a){if(e=parseInt(a),isNaN(e))throw"Min text must be an integer";d.$dirty&&d.$validate()}),d.$validators.taMinText=function(a){var b=angular.element("<div/>");return b.html(a),!b.text().length||b.text().length>=e}}}}),angular.module("textAngular.taBind",["textAngular.factories","textAngular.DOM"]).service("_taBlankTest",[function(){var a=/<(a|abbr|acronym|bdi|bdo|big|cite|code|del|dfn|img|ins|kbd|label|map|mark|q|ruby|rp|rt|s|samp|time|tt|var)[^>]*(>|$)/i;return function(b){return function(c){if(!c)return!0;var d,e=/(^[^<]|>)[^<]/i.exec(c);return e?d=e.index:(c=c.toString().replace(/="[^"]*"/i,"").replace(/="[^"]*"/i,"").replace(/="[^"]*"/i,"").replace(/="[^"]*"/i,""),d=c.indexOf(">")),c=c.trim().substring(d,d+100),/^[^<>]+$/i.test(c)?!1:0===c.length||c===b||/^>(\s|&nbsp;)*<\/[^>]+>$/gi.test(c)?!0:!/>\s*[^\s<]/i.test(c)&&!a.test(c)}}}]).directive("taButton",[function(){return{link:function(a,b,c){b.attr("unselectable","on"),b.on("mousedown",function(a,b){return b&&angular.extend(a,b),a.preventDefault(),!1})}}}]).directive("taBind",["taSanitize","$timeout","$window","$document","taFixChrome","taBrowserTag","taSelection","taSelectableElements","taApplyCustomRenderers","taOptions","_taBlankTest","$parse","taDOM","textAngularManager",function(d,f,i,j,k,l,m,o,p,q,r,s,t,u){return{priority:2,require:["ngModel","?ngModelOptions"],link:function(l,v,w,x){function y(a){var b;return R.forEach(function(c){if(c.keyCode===a.keyCode){var d=(a.metaKey?O:0)+(a.ctrlKey?N:0)+(a.shiftKey?Q:0)+(a.altKey?P:0);if(c.forbiddenModifiers&d)return;c.mustHaveModifiers.every(function(a){return d&a})&&(b=c.specialKey)}}),b}var z,A,B,C,D=x[0],E=x[1]||{},F=void 0!==v.attr("contenteditable")&&v.attr("contenteditable"),G=F||"textarea"===v[0].tagName.toLowerCase()||"input"===v[0].tagName.toLowerCase(),H=!1,I=!1,J=!1,K=w.taUnsafeSanitizer||q.disableSanitizer,L=/^(9|19|20|27|33|34|35|36|37|38|39|40|45|112|113|114|115|116|117|118|119|120|121|122|123|144|145)$/i,M=/^(8|13|32|46|59|61|107|109|173|186|187|188|189|190|191|192|219|220|221|222)$/i,N=1,O=2,P=4,Q=8,R=[{specialKey:"UndoKey",forbiddenModifiers:P+Q,mustHaveModifiers:[O+N],keyCode:90},{specialKey:"RedoKey",forbiddenModifiers:P,mustHaveModifiers:[O+N,Q],keyCode:90},{specialKey:"RedoKey",forbiddenModifiers:P+Q,mustHaveModifiers:[O+N],keyCode:89},{specialKey:"TabKey",forbiddenModifiers:O+Q+P+N,mustHaveModifiers:[],keyCode:9},{specialKey:"ShiftTabKey",forbiddenModifiers:O+P+N,mustHaveModifiers:[Q],keyCode:9}];void 0===w.taDefaultWrap&&(w.taDefaultWrap="p"),""===w.taDefaultWrap?(B="",C=void 0===a.ie?"<div><br></div>":a.ie>=11?"<p><br></p>":a.ie<=8?"<P>&nbsp;</P>":"<p>&nbsp;</p>"):(B=void 0===a.ie||a.ie>=11?"<"+w.taDefaultWrap+"><br></"+w.taDefaultWrap+">":a.ie<=8?"<"+w.taDefaultWrap.toUpperCase()+"></"+w.taDefaultWrap.toUpperCase()+">":"<"+w.taDefaultWrap+"></"+w.taDefaultWrap+">",C=void 0===a.ie||a.ie>=11?"<"+w.taDefaultWrap+"><br></"+w.taDefaultWrap+">":a.ie<=8?"<"+w.taDefaultWrap.toUpperCase()+">&nbsp;</"+w.taDefaultWrap.toUpperCase()+">":"<"+w.taDefaultWrap+">&nbsp;</"+w.taDefaultWrap+">"),E.$options||(E.$options={});var S=r(C),T=function(a){if(S(a))return a;var b=angular.element("<div>"+a+"</div>");if(0===b.children().length)a=""+a;else{var d,e=b[0].childNodes,f=!1;for(d=0;d<e.length&&!(f=e[d].nodeName.toLowerCase().match(c));d++);if(f)for(a="",d=0;d<e.length;d++){var g=e[d],h=g.nodeName.toLowerCase();if("#comment"===h)a+="<!--"+g.nodeValue+"-->";else if("#text"===h){var i=g.textContent;a+=i.trim()?""+i:i}else if(h.match(c))a+=g.outerHTML;else{var j=g.outerHTML||g.nodeValue;a+=""!==j.trim()?""+j:j}}else a=""+a}return a};w.taPaste&&(A=s(w.taPaste)),v.addClass("ta-bind");var U;l["$undoManager"+(w.id||"")]=D.$undoManager={_stack:[],_index:0,_max:1e3,push:function(a){return"undefined"==typeof a||null===a||"undefined"!=typeof this.current()&&null!==this.current()&&a===this.current()?a:(this._index<this._stack.length-1&&(this._stack=this._stack.slice(0,this._index+1)),this._stack.push(a),U&&f.cancel(U),this._stack.length>this._max&&this._stack.shift(),this._index=this._stack.length-1,a)},undo:function(){return this.setToIndex(this._index-1)},redo:function(){return this.setToIndex(this._index+1)},setToIndex:function(a){return 0>a||a>this._stack.length-1?void 0:(this._index=a,this.current())},current:function(){return this._stack[this._index]}};var V,W=l["$undoTaBind"+(w.id||"")]=function(){if(!H&&F){var a=D.$undoManager.undo();"undefined"!=typeof a&&null!==a&&(ka(a),Z(a,!1),V&&f.cancel(V),V=f(function(){v[0].focus(),m.setSelectionToElementEnd(v[0])},1))}},X=l["$redoTaBind"+(w.id||"")]=function(){if(!H&&F){var a=D.$undoManager.redo();"undefined"!=typeof a&&null!==a&&(ka(a),Z(a,!1),V&&f.cancel(V),V=f(function(){v[0].focus(),m.setSelectionToElementEnd(v[0])},1))}},Y=function(){if(F)return v[0].innerHTML;if(G)return v.val();throw"textAngular Error: attempting to update non-editable taBind"},Z=function(a,b,c){J=c||!1,"undefined"!=typeof b&&null!==b||(b=F),"undefined"!=typeof a&&null!==a||(a=Y()),S(a)?(""!==D.$viewValue&&D.$setViewValue(""),b&&""!==D.$undoManager.current()&&D.$undoManager.push("")):(ja(),D.$viewValue!==a&&(D.$setViewValue(a),b&&D.$undoManager.push(a))),D.$render()};l["updateTaBind"+(w.id||"")]=function(){H||Z(void 0,void 0,!0)};var $=function(a){return D.$oldViewValue=d(k(a),D.$oldViewValue,K)};if(v.attr("required")&&(D.$validators.required=function(a,b){return!S(a||b)}),D.$parsers.push($),D.$parsers.unshift(T),D.$formatters.push($),D.$formatters.unshift(T),D.$formatters.unshift(function(a){return D.$undoManager.push(a||"")}),G)if(l.events={},F){var _=!1,aa=function(a){if(a&&a.trim().length){if(a.match(/class=["']*Mso(Normal|List)/i)){var b=a.match(/<!--StartFragment-->([\s\S]*?)<!--EndFragment-->/i);b=b?b[1]:a,b=b.replace(/<o:p>[\s\S]*?<\/o:p>/gi,"").replace(/class=(["']|)MsoNormal(["']|)/gi,"");var c=angular.element("<div>"+b+"</div>"),e=angular.element("<div></div>"),g={element:null,lastIndent:[],lastLi:null,isUl:!1};g.lastIndent.peek=function(){var a=this.length;return a>0?this[a-1]:void 0};for(var h=function(a){g.isUl=a,g.element=angular.element(a?"<ul>":"<ol>"),g.lastIndent=[],g.lastIndent.peek=function(){var a=this.length;return a>0?this[a-1]:void 0},g.lastLevelMatch=null},i=0;i<=c[0].childNodes.length;i++)if(c[0].childNodes[i]&&"#text"!==c[0].childNodes[i].nodeName&&"p"===c[0].childNodes[i].tagName.toLowerCase()){var j=angular.element(c[0].childNodes[i]),k=(j.attr("class")||"").match(/MsoList(Bullet|Number|Paragraph)(CxSp(First|Middle|Last)|)/i);if(k){if(j[0].childNodes.length<2||j[0].childNodes[1].childNodes.length<1)continue;var n="bullet"===k[1].toLowerCase()||"number"!==k[1].toLowerCase()&&!(/^[^0-9a-z<]*[0-9a-z]+[^0-9a-z<>]</i.test(j[0].childNodes[1].innerHTML)||/^[^0-9a-z<]*[0-9a-z]+[^0-9a-z<>]</i.test(j[0].childNodes[1].childNodes[0].innerHTML)),o=(j.attr("style")||"").match(/margin-left:([\-\.0-9]*)/i),p=parseFloat(o?o[1]:0),q=(j.attr("style")||"").match(/mso-list:l([0-9]+) level([0-9]+) lfo[0-9+]($|;)/i);if(q&&q[2]&&(p=parseInt(q[2])),q&&(!g.lastLevelMatch||q[1]!==g.lastLevelMatch[1])||!k[3]||"first"===k[3].toLowerCase()||null===g.lastIndent.peek()||g.isUl!==n&&g.lastIndent.peek()===p)h(n),e.append(g.element);else if(null!=g.lastIndent.peek()&&g.lastIndent.peek()<p)g.element=angular.element(n?"<ul>":"<ol>"),g.lastLi.append(g.element);else if(null!=g.lastIndent.peek()&&g.lastIndent.peek()>p){for(;null!=g.lastIndent.peek()&&g.lastIndent.peek()>p;)if("li"!==g.element.parent()[0].tagName.toLowerCase()){if(!/[uo]l/i.test(g.element.parent()[0].tagName.toLowerCase()))break;g.element=g.element.parent(),g.lastIndent.pop()}else g.element=g.element.parent();g.isUl="ul"===g.element[0].tagName.toLowerCase(),n!==g.isUl&&(h(n),e.append(g.element))}g.lastLevelMatch=q,p!==g.lastIndent.peek()&&g.lastIndent.push(p),g.lastLi=angular.element("<li>"),g.element.append(g.lastLi),g.lastLi.html(j.html().replace(/<!(--|)\[if !supportLists\](--|)>[\s\S]*?<!(--|)\[endif\](--|)>/gi,"")),j.remove()}else h(!1),e.append(j)}var r=function(a){a=angular.element(a);for(var b=a[0].childNodes.length-1;b>=0;b--)a.after(a[0].childNodes[b]);a.remove()};angular.forEach(e.find("span"),function(a){a.removeAttribute("lang"),a.attributes.length<=0&&r(a)}),angular.forEach(e.find("font"),r),a=e.html()}else{if(a=a.replace(/<(|\/)meta[^>]*?>/gi,""),a.match(/<[^>]*?(ta-bind)[^>]*?>/)){if(a.match(/<[^>]*?(text-angular)[^>]*?>/)){var s=angular.element("<div>"+a+"</div>");s.find("textarea").remove();for(var u=t.getByAttribute(s,"ta-bind"),w=0;w<u.length;w++){for(var x=u[w][0].parentNode.parentNode,y=0;y<u[w][0].childNodes.length;y++)x.parentNode.insertBefore(u[w][0].childNodes[y],x);x.parentNode.removeChild(x)}a=s.html().replace('<br class="Apple-interchange-newline">',"")}}else a.match(/^<span/)&&(a.match(/<span class=(\"Apple-converted-space\"|\'Apple-converted-space\')>.<\/span>/gi)||(a=a.replace(/<(|\/)span[^>]*?>/gi,"")));a=a.replace(/<br class="Apple-interchange-newline"[^>]*?>/gi,"").replace(/<span class="Apple-converted-space">( |&nbsp;)<\/span>/gi,"&nbsp;")}/<li(\s.*)?>/i.test(a)&&/(<ul(\s.*)?>|<ol(\s.*)?>).*<li(\s.*)?>/i.test(a)===!1&&(a=a.replace(/<li(\s.*)?>.*<\/li(\s.*)?>/i,"<ul>$&</ul>")),a=a.replace(/^[ |\u00A0]+/gm,function(a){for(var b="",c=0;c<a.length;c++)b+="&nbsp;";return b}).replace(/\n|\r\n|\r/g,"<br />").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;"),A&&(a=A(l,{$html:a})||a),a=d(a,"",K),m.insertHtml(a,v[0]),f(function(){D.$setViewValue(Y()),_=!1,v.removeClass("processing-paste")},0)}else _=!1,v.removeClass("processing-paste")};v.on("paste",l.events.paste=function(a,b){if(b&&angular.extend(a,b),H||_)return a.stopPropagation(),a.preventDefault(),!1;_=!0,v.addClass("processing-paste");var c,d=(a.originalEvent||a).clipboardData;if(d&&d.getData&&d.types.length>0){for(var e="",g=0;g<d.types.length;g++)e+=" "+d.types[g];return/text\/html/i.test(e)?c=d.getData("text/html"):/text\/plain/i.test(e)&&(c=d.getData("text/plain")),aa(c),a.stopPropagation(),a.preventDefault(),!1}var h=i.rangy.saveSelection(),k=angular.element('<div class="ta-hidden-input" contenteditable="true"></div>');j.find("body").append(k),k[0].focus(),f(function(){i.rangy.restoreSelection(h),aa(k[0].innerHTML),v[0].focus(),k.remove()},0)}),v.on("cut",l.events.cut=function(a){H?a.preventDefault():f(function(){D.$setViewValue(Y())},0)}),v.on("keydown",l.events.keydown=function(a,b){b&&angular.extend(a,b),a.specialKey=y(a);var c;if(q.keyMappings.forEach(function(b){a.specialKey===b.commandKeyCode&&(a.specialKey=void 0),b.testForKey(a)&&(c=b.commandKeyCode),"UndoKey"!==b.commandKeyCode&&"RedoKey"!==b.commandKeyCode||b.enablePropagation||a.preventDefault()}),"undefined"!=typeof c&&(a.specialKey=c),"undefined"==typeof a.specialKey||"UndoKey"===a.specialKey&&"RedoKey"===a.specialKey||(a.preventDefault(),u.sendKeyCommand(l,a)),!H&&("UndoKey"===a.specialKey&&(W(),a.preventDefault()),"RedoKey"===a.specialKey&&(X(),a.preventDefault()),13===a.keyCode&&!a.shiftKey)){var d,f=m.getSelectionElement();if(!f.tagName.match(e))return;var g=angular.element(B);if(/^<br(|\/)>$/i.test(f.innerHTML.trim())&&"blockquote"===f.parentNode.tagName.toLowerCase()&&!f.nextSibling){d=angular.element(f);var h=d.parent();h.after(g),d.remove(),0===h.children().length&&h.remove(),m.setSelectionToElementStart(g[0]),a.preventDefault()}else/^<[^>]+><br(|\/)><\/[^>]+>$/i.test(f.innerHTML.trim())&&"blockquote"===f.tagName.toLowerCase()&&(d=angular.element(f),d.after(g),d.remove(),m.setSelectionToElementStart(g[0]),a.preventDefault())}});var ba;if(v.on("keyup",l.events.keyup=function(a,b){if(b&&angular.extend(a,b),9===a.keyCode){var c=m.getSelection();return void(c.start.element===v[0]&&v.children().length&&m.setSelectionToElementStart(v.children()[0]))}if(U&&f.cancel(U),!H&&!L.test(a.keyCode)){if(""!==B&&13===a.keyCode&&!a.shiftKey){for(var d=m.getSelectionElement();!d.tagName.match(e)&&d!==v[0];)d=d.parentNode;if(d.tagName.toLowerCase()!==w.taDefaultWrap&&"li"!==d.tagName.toLowerCase()&&(""===d.innerHTML.trim()||"<br>"===d.innerHTML.trim())){var g=angular.element(B);angular.element(d).replaceWith(g),m.setSelectionToElementStart(g[0])}}var h=Y();""!==B&&""===h.trim()?(ka(B),m.setSelectionToElementStart(v.children()[0])):"<"!==h.substring(0,1)&&""!==w.taDefaultWrap;var i=z!==a.keyCode&&M.test(a.keyCode);ba&&f.cancel(ba),ba=f(function(){Z(h,i,!0)},E.$options.debounce||400),i||(U=f(function(){D.$undoManager.push(h)},250)),z=a.keyCode}}),v.on("blur",l.events.blur=function(){I=!1,H?(J=!0,D.$render()):Z(void 0,void 0,!0)}),w.placeholder&&(a.ie>8||void 0===a.ie)){var ca;if(!w.id)throw"textAngular Error: An unique ID is required for placeholders to work";ca=g("#"+w.id+".placeholder-text:before",'content: "'+w.placeholder+'"'),l.$on("$destroy",function(){h(ca)})}v.on("focus",l.events.focus=function(){I=!0,v.removeClass("placeholder-text"),ja()}),v.on("mouseup",l.events.mouseup=function(){var a=m.getSelection();a.start.element===v[0]&&v.children().length&&m.setSelectionToElementStart(v.children()[0])}),v.on("mousedown",l.events.mousedown=function(a,b){b&&angular.extend(a,b),a.stopPropagation()})}else{v.on("change blur",l.events.change=l.events.blur=function(){H||D.$setViewValue(Y())}),v.on("keydown",l.events.keydown=function(a,b){if(b&&angular.extend(a,b),9===a.keyCode){var c=this.selectionStart,d=this.selectionEnd,e=v.val();if(a.shiftKey){var f=e.lastIndexOf("\n",c),g=e.lastIndexOf("	",c);-1!==g&&g>=f&&(v.val(e.substring(0,g)+e.substring(g+1)),this.selectionStart=this.selectionEnd=c-1)}else v.val(e.substring(0,c)+"	"+e.substring(d)),this.selectionStart=this.selectionEnd=c+1;a.preventDefault()}});var da=function(a,b){for(var c="",d=0;b>d;d++)c+=a;return c},ea=function(a,b,c){for(var d=0;d<a.length;d++)b.call(c,d,a[d])},fa=function(a,b){var c="",d=a.childNodes;return b++,c+=da("	",b-1)+a.outerHTML.substring(0,4),ea(d,function(a,d){var e=d.nodeName.toLowerCase();return"#comment"===e?void(c+="<!--"+d.nodeValue+"-->"):"#text"===e?void(c+=d.textContent):void(d.outerHTML&&(c+="ul"===e||"ol"===e?"\n"+fa(d,b):"\n"+da("	",b)+d.outerHTML))}),c+="\n"+da("	",b-1)+a.outerHTML.substring(a.outerHTML.lastIndexOf("<"))};D.$formatters.unshift(function(a){var b=angular.element("<div>"+a+"</div>")[0].childNodes;return b.length>0&&(a="",ea(b,function(b,c){var d=c.nodeName.toLowerCase();return"#comment"===d?void(a+="<!--"+c.nodeValue+"-->"):"#text"===d?void(a+=c.textContent):void(c.outerHTML&&(a.length>0&&(a+="\n"),a+="ul"===d||"ol"===d?""+fa(c,0):""+c.outerHTML))})),a})}var ga,ha=function(a){return l.$emit("ta-element-select",this),a.preventDefault(),!1},ia=function(a,b){if(b&&angular.extend(a,b),!n&&!H){n=!0;var c;c=a.originalEvent?a.originalEvent.dataTransfer:a.dataTransfer,l.$emit("ta-drop-event",this,a,c),f(function(){n=!1,Z(void 0,void 0,!0)},100)}},ja=l["reApplyOnSelectorHandlers"+(w.id||"")]=function(){H||angular.forEach(o,function(a){v.find(a).off("click",ha).on("click",ha)})},ka=function(a){v[0].innerHTML=a},la=!1;D.$render=function(){if(!la){la=!0;var a=D.$viewValue||"";J||(F&&I&&(v.removeClass("placeholder-text"),ga&&f.cancel(ga),ga=f(function(){I||(v[0].focus(),m.setSelectionToElementEnd(v.children()[v.children().length-1])),ga=void 0},1)),F?(ka(w.placeholder?""===a?B:a:""===a?B:a),H?v.off("drop",ia):(ja(),v.on("drop",ia))):"textarea"!==v[0].tagName.toLowerCase()&&"input"!==v[0].tagName.toLowerCase()?ka(p(a)):v.val(a)),F&&w.placeholder&&(""===a?I?v.removeClass("placeholder-text"):v.addClass("placeholder-text"):v.removeClass("placeholder-text")),la=J=!1}},w.taReadonly&&(H=l.$eval(w.taReadonly),H?(v.addClass("ta-readonly"),"textarea"!==v[0].tagName.toLowerCase()&&"input"!==v[0].tagName.toLowerCase()||v.attr("disabled","disabled"),void 0!==v.attr("contenteditable")&&v.attr("contenteditable")&&v.removeAttr("contenteditable")):(v.removeClass("ta-readonly"),"textarea"===v[0].tagName.toLowerCase()||"input"===v[0].tagName.toLowerCase()?v.removeAttr("disabled"):F&&v.attr("contenteditable","true")),l.$watch(w.taReadonly,function(a,b){b!==a&&(a?(v.addClass("ta-readonly"),"textarea"!==v[0].tagName.toLowerCase()&&"input"!==v[0].tagName.toLowerCase()||v.attr("disabled","disabled"),void 0!==v.attr("contenteditable")&&v.attr("contenteditable")&&v.removeAttr("contenteditable"),angular.forEach(o,function(a){v.find(a).on("click",ha)}),v.off("drop",ia)):(v.removeClass("ta-readonly"),"textarea"===v[0].tagName.toLowerCase()||"input"===v[0].tagName.toLowerCase()?v.removeAttr("disabled"):F&&v.attr("contenteditable","true"),angular.forEach(o,function(a){v.find(a).off("click",ha)}),v.on("drop",ia)),H=a)})),F&&!H&&(angular.forEach(o,function(a){v.find(a).on("click",ha)}),v.on("drop",ia),v.on("blur",function(){a.webkit&&(b=!0)}))}}}]);var n=!1,o=angular.module("textAngular",["ngSanitize","textAngularSetup","textAngular.factories","textAngular.DOM","textAngular.validators","textAngular.taBind"]);o.config([function(){angular.forEach(taTools,function(a,b){delete taTools[b]})}]),o.run([function(){if("function"==typeof define&&define.amd)define(function(a){window.rangy=a("rangy"),window.rangy.saveSelection=a("rangy/lib/rangy-selectionsaverestore")});else if("function"==typeof require&&"undefined"!=typeof module&&"object"==typeof exports)window.rangy=require("rangy"),window.rangy.saveSelection=require("rangy/lib/rangy-selectionsaverestore");else{if(!window.rangy)throw"rangy-core.js and rangy-selectionsaverestore.js are required for textAngular to work correctly, rangy-core is not yet loaded.";if(window.rangy.init(),!window.rangy.saveSelection)throw"rangy-selectionsaverestore.js is required for textAngular to work correctly."}}]),o.directive("textAngular",["$compile","$timeout","taOptions","taSelection","taExecCommand","textAngularManager","$window","$document","$animate","$log","$q","$parse",function(a,b,c,d,e,f,g,h,i,j,k,l){return{require:"?ngModel",scope:{},restrict:"EA",priority:2,link:function(m,n,o,p){var q,r,s,t,u,v,w,x,y,z,A,B=o.serial?o.serial:Math.floor(1e16*Math.random());m._name=o.name?o.name:"textAngularEditor"+B;var C=function(a,c,d){b(function(){var b=function(){a.off(c,b),d.apply(this,arguments)};a.on(c,b)},100)};if(y=e(o.taDefaultWrap),angular.extend(m,angular.copy(c),{wrapSelection:function(a,b,c){"undo"===a.toLowerCase()?m["$undoTaBindtaTextElement"+B]():"redo"===a.toLowerCase()?m["$redoTaBindtaTextElement"+B]():(y(a,!1,b,m.defaultTagAttributes),c&&m["reApplyOnSelectorHandlerstaTextElement"+B](),m.displayElements.text[0].focus())},showHtml:m.$eval(o.taShowHtml)||!1}),o.taFocussedClass&&(m.classes.focussed=o.taFocussedClass),o.taTextEditorClass&&(m.classes.textEditor=o.taTextEditorClass),o.taHtmlEditorClass&&(m.classes.htmlEditor=o.taHtmlEditorClass),o.taDefaultTagAttributes)try{angular.extend(m.defaultTagAttributes,angular.fromJson(o.taDefaultTagAttributes))}catch(D){j.error(D)}o.taTextEditorSetup&&(m.setup.textEditorSetup=m.$parent.$eval(o.taTextEditorSetup)),o.taHtmlEditorSetup&&(m.setup.htmlEditorSetup=m.$parent.$eval(o.taHtmlEditorSetup)),o.taFileDrop?m.fileDropHandler=m.$parent.$eval(o.taFileDrop):m.fileDropHandler=m.defaultFileDropHandler,w=n[0].innerHTML,n[0].innerHTML="",m.displayElements={forminput:angular.element("<input type='hidden' tabindex='-1' style='display: none;'>"),html:angular.element("<textarea></textarea>"),text:angular.element("<div></div>"),scrollWindow:angular.element("<div class='ta-scroll-window'></div>"),popover:angular.element('<div class="popover fade bottom" style="max-width: none; width: 305px;"></div>'),popoverArrow:angular.element('<div class="arrow"></div>'),popoverContainer:angular.element('<div class="popover-content"></div>'),resize:{overlay:angular.element('<div class="ta-resizer-handle-overlay"></div>'),background:angular.element('<div class="ta-resizer-handle-background"></div>'),anchors:[angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-tl"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-tr"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-bl"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-br"></div>')],info:angular.element('<div class="ta-resizer-handle-info"></div>')}},m.displayElements.popover.append(m.displayElements.popoverArrow),m.displayElements.popover.append(m.displayElements.popoverContainer),m.displayElements.scrollWindow.append(m.displayElements.popover),m.displayElements.popover.on("mousedown",function(a,b){return b&&angular.extend(a,b),a.preventDefault(),!1}),m.showPopover=function(a){m.displayElements.popover.css("display","block"),m.reflowPopover(a),i.addClass(m.displayElements.popover,"in"),C(h.find("body"),"click keyup",function(){m.hidePopover()})},m.reflowPopover=function(a){m.displayElements.text[0].offsetHeight-51>a[0].offsetTop?(m.displayElements.popover.css("top",a[0].offsetTop+a[0].offsetHeight+m.displayElements.scrollWindow[0].scrollTop+"px"),m.displayElements.popover.removeClass("top").addClass("bottom")):(m.displayElements.popover.css("top",a[0].offsetTop-54+m.displayElements.scrollWindow[0].scrollTop+"px"),m.displayElements.popover.removeClass("bottom").addClass("top"));var b=m.displayElements.text[0].offsetWidth-m.displayElements.popover[0].offsetWidth,c=a[0].offsetLeft+a[0].offsetWidth/2-m.displayElements.popover[0].offsetWidth/2;m.displayElements.popover.css("left",Math.max(0,Math.min(b,c))+"px"),m.displayElements.popoverArrow.css("margin-left",Math.min(c,Math.max(0,c-b))-11+"px")},m.hidePopover=function(){m.displayElements.popover.css("display",""),m.displayElements.popoverContainer.attr("style",""),m.displayElements.popoverContainer.attr("class","popover-content"),m.displayElements.popover.removeClass("in")},m.displayElements.resize.overlay.append(m.displayElements.resize.background),angular.forEach(m.displayElements.resize.anchors,function(a){m.displayElements.resize.overlay.append(a)}),m.displayElements.resize.overlay.append(m.displayElements.resize.info),m.displayElements.scrollWindow.append(m.displayElements.resize.overlay),m.reflowResizeOverlay=function(a){a=angular.element(a)[0],m.displayElements.resize.overlay.css({display:"block",left:a.offsetLeft-5+"px",top:a.offsetTop-5+"px",width:a.offsetWidth+10+"px",height:a.offsetHeight+10+"px"}),m.displayElements.resize.info.text(a.offsetWidth+" x "+a.offsetHeight)},m.showResizeOverlay=function(a){var b=h.find("body");z=function(c){var d={width:parseInt(a.attr("width")),height:parseInt(a.attr("height")),x:c.clientX,y:c.clientY};(void 0===d.width||isNaN(d.width))&&(d.width=a[0].offsetWidth),(void 0===d.height||isNaN(d.height))&&(d.height=a[0].offsetHeight),m.hidePopover();var e=d.height/d.width,f=function(b){function c(a){return Math.round(Math.max(0,a))}var f={x:Math.max(0,d.width+(b.clientX-d.x)),y:Math.max(0,d.height+(b.clientY-d.y))},g=void 0!==o.taResizeForceAspectRatio,h=o.taResizeMaintainAspectRatio,i=g||h&&!b.shiftKey;if(i){var j=f.y/f.x;f.x=e>j?f.x:f.y/e,f.y=e>j?f.x*e:f.y}var k=angular.element(a);k.css("height",c(f.y)+"px"),k.css("width",c(f.x)+"px"),m.reflowResizeOverlay(a)};b.on("mousemove",f),C(b,"mouseup",function(c){c.preventDefault(),c.stopPropagation(),b.off("mousemove",f),m.showPopover(a)}),c.stopPropagation(),c.preventDefault()},m.displayElements.resize.anchors[3].off("mousedown"),m.displayElements.resize.anchors[3].on("mousedown",z),m.reflowResizeOverlay(a),C(b,"click",function(){m.hideResizeOverlay()})},m.hideResizeOverlay=function(){m.displayElements.resize.anchors[3].off("mousedown",z),m.displayElements.resize.overlay.css("display","")},m.setup.htmlEditorSetup(m.displayElements.html),m.setup.textEditorSetup(m.displayElements.text),m.displayElements.html.attr({id:"taHtmlElement"+B,"ng-show":"showHtml","ta-bind":"ta-bind","ng-model":"html","ng-model-options":n.attr("ng-model-options")}),m.displayElements.text.attr({id:"taTextElement"+B,contentEditable:"true","ta-bind":"ta-bind","ng-model":"html","ng-model-options":n.attr("ng-model-options")}),m.displayElements.scrollWindow.attr({"ng-hide":"showHtml"}),o.taDefaultWrap&&m.displayElements.text.attr("ta-default-wrap",o.taDefaultWrap),o.taUnsafeSanitizer&&(m.displayElements.text.attr("ta-unsafe-sanitizer",o.taUnsafeSanitizer),m.displayElements.html.attr("ta-unsafe-sanitizer",o.taUnsafeSanitizer)),m.displayElements.scrollWindow.append(m.displayElements.text),n.append(m.displayElements.scrollWindow),n.append(m.displayElements.html),m.displayElements.forminput.attr("name",m._name),n.append(m.displayElements.forminput),o.tabindex&&(n.removeAttr("tabindex"),m.displayElements.text.attr("tabindex",o.tabindex),m.displayElements.html.attr("tabindex",o.tabindex)),o.placeholder&&(m.displayElements.text.attr("placeholder",o.placeholder),m.displayElements.html.attr("placeholder",o.placeholder)),o.taDisabled&&(m.displayElements.text.attr("ta-readonly","disabled"),m.displayElements.html.attr("ta-readonly","disabled"),m.disabled=m.$parent.$eval(o.taDisabled),m.$parent.$watch(o.taDisabled,function(a){m.disabled=a,m.disabled?n.addClass(m.classes.disabled):n.removeClass(m.classes.disabled)})),o.taPaste&&(m._pasteHandler=function(a){return l(o.taPaste)(m.$parent,{$html:a})},m.displayElements.text.attr("ta-paste","_pasteHandler($html)")),a(m.displayElements.scrollWindow)(m),a(m.displayElements.html)(m),m.updateTaBindtaTextElement=m["updateTaBindtaTextElement"+B],m.updateTaBindtaHtmlElement=m["updateTaBindtaHtmlElement"+B],n.addClass("ta-root"),m.displayElements.scrollWindow.addClass("ta-text ta-editor "+m.classes.textEditor),m.displayElements.html.addClass("ta-html ta-editor "+m.classes.htmlEditor),m._actionRunning=!1;var E=!1;if(m.startAction=function(){return m._actionRunning=!0,E=g.rangy.saveSelection(),function(){E&&g.rangy.restoreSelection(E)}},m.endAction=function(){m._actionRunning=!1,E&&(m.showHtml?m.displayElements.html[0].focus():m.displayElements.text[0].focus(),g.rangy.removeMarkers(E)),E=!1,m.updateSelectedStyles(),m.showHtml||m["updateTaBindtaTextElement"+B]()},u=function(){m.focussed=!0,n.addClass(m.classes.focussed),x.focus(),n.triggerHandler("focus")},m.displayElements.html.on("focus",u),m.displayElements.text.on("focus",u),v=function(a){return m._actionRunning||h[0].activeElement===m.displayElements.html[0]||h[0].activeElement===m.displayElements.text[0]||(n.removeClass(m.classes.focussed),x.unfocus(),b(function(){m._bUpdateSelectedStyles=!1,n.triggerHandler("blur"),m.focussed=!1},0)),a.preventDefault(),!1},m.displayElements.html.on("blur",v),m.displayElements.text.on("blur",v),m.displayElements.text.on("paste",function(a){n.triggerHandler("paste",a)}),m.queryFormatBlockState=function(a){return!m.showHtml&&a.toLowerCase()===h[0].queryCommandValue("formatBlock").toLowerCase()},m.queryCommandState=function(a){return m.showHtml?"":h[0].queryCommandState(a)},m.switchView=function(){m.showHtml=!m.showHtml,i.enabled(!1,m.displayElements.html),i.enabled(!1,m.displayElements.text),m.showHtml?b(function(){return i.enabled(!0,m.displayElements.html),i.enabled(!0,m.displayElements.text),m.displayElements.html[0].focus()},100):b(function(){return i.enabled(!0,m.displayElements.html),i.enabled(!0,m.displayElements.text),m.displayElements.text[0].focus()},100)},o.ngModel){var F=!0;p.$render=function(){if(F){F=!1;var a=m.$parent.$eval(o.ngModel);void 0!==a&&null!==a||!w||""===w||p.$setViewValue(w)}m.displayElements.forminput.val(p.$viewValue),m.html=p.$viewValue||""},n.attr("required")&&(p.$validators.required=function(a,b){var c=a||b;return!(!c||""===c.trim())})}else m.displayElements.forminput.val(w),m.html=w;if(m.$watch("html",function(a,b){a!==b&&(o.ngModel&&p.$viewValue!==a&&p.$setViewValue(a),m.displayElements.forminput.val(a))}),o.taTargetToolbars)x=f.registerEditor(m._name,m,o.taTargetToolbars.split(","));else{var G=angular.element('<div text-angular-toolbar name="textAngularToolbar'+B+'">');o.taToolbar&&G.attr("ta-toolbar",o.taToolbar),o.taToolbarClass&&G.attr("ta-toolbar-class",o.taToolbarClass),o.taToolbarGroupClass&&G.attr("ta-toolbar-group-class",o.taToolbarGroupClass),o.taToolbarButtonClass&&G.attr("ta-toolbar-button-class",o.taToolbarButtonClass),o.taToolbarActiveButtonClass&&G.attr("ta-toolbar-active-button-class",o.taToolbarActiveButtonClass),o.taFocussedClass&&G.attr("ta-focussed-class",o.taFocussedClass),n.prepend(G),a(G)(m.$parent),x=f.registerEditor(m._name,m,["textAngularToolbar"+B])}m.$on("$destroy",function(){f.unregisterEditor(m._name),angular.element(window).off("blur")}),m.$on("ta-element-select",function(a,b){x.triggerElementSelect(a,b)&&m["reApplyOnSelectorHandlerstaTextElement"+B]()}),m.$on("ta-drop-event",function(a,c,d,e){m.displayElements.text[0].focus(),e&&e.files&&e.files.length>0?(angular.forEach(e.files,function(a){try{k.when(m.fileDropHandler(a,m.wrapSelection)||m.fileDropHandler!==m.defaultFileDropHandler&&k.when(m.defaultFileDropHandler(a,m.wrapSelection))).then(function(){m["updateTaBindtaTextElement"+B]()})}catch(b){j.error(b)}}),d.preventDefault(),d.stopPropagation()):b(function(){m["updateTaBindtaTextElement"+B]()},0)}),m._bUpdateSelectedStyles=!1,angular.element(window).on("blur",function(){m._bUpdateSelectedStyles=!1,m.focussed=!1}),m.updateSelectedStyles=function(){var a;A&&b.cancel(A),void 0!==(a=d.getSelectionElement())&&a.parentNode!==m.displayElements.text[0]?x.updateSelectedStyles(angular.element(a)):x.updateSelectedStyles(),m._bUpdateSelectedStyles&&(A=b(m.updateSelectedStyles,200))},q=function(){return m.focussed?void(m._bUpdateSelectedStyles||(m._bUpdateSelectedStyles=!0,m.$apply(function(){m.updateSelectedStyles()}))):void(m._bUpdateSelectedStyles=!1)},m.displayElements.html.on("keydown",q),m.displayElements.text.on("keydown",q),r=function(){m._bUpdateSelectedStyles=!1},m.displayElements.html.on("keyup",r),m.displayElements.text.on("keyup",r),s=function(a,b){b&&angular.extend(a,b),m.$apply(function(){return x.sendKeyCommand(a)?(m._bUpdateSelectedStyles||m.updateSelectedStyles(),a.preventDefault(),!1):void 0})},m.displayElements.html.on("keypress",s),m.displayElements.text.on("keypress",s),t=function(){m._bUpdateSelectedStyles=!1,m.$apply(function(){m.updateSelectedStyles()})},m.displayElements.html.on("mouseup",t),m.displayElements.text.on("mouseup",t)}}}]),o.service("textAngularManager",["taToolExecuteAction","taTools","taRegisterTool",function(a,b,c){var d={},e={};return{registerEditor:function(c,f,g){if(!c||""===c)throw"textAngular Error: An editor requires a name";if(!f)throw"textAngular Error: An editor requires a scope";if(e[c])throw'textAngular Error: An Editor with name "'+c+'" already exists';var h=[];return angular.forEach(g,function(a){d[a]&&h.push(d[a])}),e[c]={scope:f,toolbars:g,
_registerToolbar:function(a){this.toolbars.indexOf(a.name)>=0&&h.push(a)},editorFunctions:{disable:function(){angular.forEach(h,function(a){a.disabled=!0})},enable:function(){angular.forEach(h,function(a){a.disabled=!1})},focus:function(){angular.forEach(h,function(a){a._parent=f,a.disabled=!1,a.focussed=!0,f.focussed=!0})},unfocus:function(){angular.forEach(h,function(a){a.disabled=!0,a.focussed=!1}),f.focussed=!1},updateSelectedStyles:function(a){angular.forEach(h,function(b){angular.forEach(b.tools,function(c){c.activeState&&(b._parent=f,c.active=c.activeState(a))})})},sendKeyCommand:function(c){var d=!1;return(c.ctrlKey||c.metaKey||c.specialKey)&&angular.forEach(b,function(b,e){if(b.commandKeyCode&&(b.commandKeyCode===c.which||b.commandKeyCode===c.specialKey))for(var g=0;g<h.length;g++)if(void 0!==h[g].tools[e]){a.call(h[g].tools[e],f),d=!0;break}}),d},triggerElementSelect:function(a,c){var d=function(a,b){for(var c=!0,d=0;d<b.length;d++)c=c&&a.attr(b[d]);return c},e=[],g={},i=!1;c=angular.element(c);var j=!1;if(angular.forEach(b,function(a,b){a.onElementSelect&&a.onElementSelect.element&&a.onElementSelect.element.toLowerCase()===c[0].tagName.toLowerCase()&&(!a.onElementSelect.filter||a.onElementSelect.filter(c))&&(j=j||angular.isArray(a.onElementSelect.onlyWithAttrs)&&d(c,a.onElementSelect.onlyWithAttrs),a.onElementSelect.onlyWithAttrs&&!d(c,a.onElementSelect.onlyWithAttrs)||(g[b]=a))}),j?(angular.forEach(g,function(a,b){a.onElementSelect.onlyWithAttrs&&d(c,a.onElementSelect.onlyWithAttrs)&&e.push({name:b,tool:a})}),e.sort(function(a,b){return b.tool.onElementSelect.onlyWithAttrs.length-a.tool.onElementSelect.onlyWithAttrs.length})):angular.forEach(g,function(a,b){e.push({name:b,tool:a})}),e.length>0)for(var k=0;k<e.length;k++){for(var l=e[k].tool,m=e[k].name,n=0;n<h.length;n++)if(void 0!==h[n].tools[m]){l.onElementSelect.action.call(h[n].tools[m],a,c,f),i=!0;break}if(i)break}return i}}},e[c].editorFunctions},retrieveEditor:function(a){return e[a]},unregisterEditor:function(a){delete e[a]},registerToolbar:function(a){if(!a)throw"textAngular Error: A toolbar requires a scope";if(!a.name||""===a.name)throw"textAngular Error: A toolbar requires a name";if(d[a.name])throw'textAngular Error: A toolbar with name "'+a.name+'" already exists';d[a.name]=a,angular.forEach(e,function(b){b._registerToolbar(a)})},retrieveToolbar:function(a){return d[a]},retrieveToolbarsViaEditor:function(a){var b=[],c=this;return angular.forEach(this.retrieveEditor(a).toolbars,function(a){b.push(c.retrieveToolbar(a))}),b},unregisterToolbar:function(a){delete d[a]},updateToolsDisplay:function(a){var b=this;angular.forEach(a,function(a,c){b.updateToolDisplay(c,a)})},resetToolsDisplay:function(){var a=this;angular.forEach(b,function(b,c){a.resetToolDisplay(c)})},updateToolDisplay:function(a,b){var c=this;angular.forEach(d,function(d,e){c.updateToolbarToolDisplay(e,a,b)})},resetToolDisplay:function(a){var b=this;angular.forEach(d,function(c,d){b.resetToolbarToolDisplay(d,a)})},updateToolbarToolDisplay:function(a,b,c){if(!d[a])throw'textAngular Error: No Toolbar with name "'+a+'" exists';d[a].updateToolDisplay(b,c)},resetToolbarToolDisplay:function(a,c){if(!d[a])throw'textAngular Error: No Toolbar with name "'+a+'" exists';d[a].updateToolDisplay(c,b[c],!0)},removeTool:function(a){delete b[a],angular.forEach(d,function(b){delete b.tools[a];for(var c=0;c<b.toolbar.length;c++){for(var d,e=0;e<b.toolbar[c].length;e++){if(b.toolbar[c][e]===a){d={group:c,index:e};break}if(void 0!==d)break}void 0!==d&&(b.toolbar[d.group].slice(d.index,1),b._$element.children().eq(d.group).children().eq(d.index).remove())}})},addTool:function(a,b,e,f){c(a,b),angular.forEach(d,function(c){c.addTool(a,b,e,f)})},addToolToToolbar:function(a,b,e,f,g){c(a,b),d[e].addTool(a,b,f,g)},refreshEditor:function(a){if(!e[a])throw'textAngular Error: No Editor with name "'+a+'" exists';e[a].scope.updateTaBindtaTextElement(),e[a].scope.$$phase||e[a].scope.$digest()},sendKeyCommand:function(a,b){angular.forEach(e,function(c){return c.editorFunctions.sendKeyCommand(b)?(a._bUpdateSelectedStyles||a.updateSelectedStyles(),b.preventDefault(),!1):void 0})}}}]),o.directive("textAngularToolbar",["$compile","textAngularManager","taOptions","taTools","taToolExecuteAction","$window",function(a,b,c,d,e,f){return{scope:{name:"@"},restrict:"EA",link:function(g,h,i){if(!g.name||""===g.name)throw"textAngular Error: A toolbar requires a name";angular.extend(g,angular.copy(c)),i.taToolbar&&(g.toolbar=g.$parent.$eval(i.taToolbar)),i.taToolbarClass&&(g.classes.toolbar=i.taToolbarClass),i.taToolbarGroupClass&&(g.classes.toolbarGroup=i.taToolbarGroupClass),i.taToolbarButtonClass&&(g.classes.toolbarButton=i.taToolbarButtonClass),i.taToolbarActiveButtonClass&&(g.classes.toolbarButtonActive=i.taToolbarActiveButtonClass),i.taFocussedClass&&(g.classes.focussed=i.taFocussedClass),g.disabled=!0,g.focussed=!1,g._$element=h,h[0].innerHTML="",h.addClass("ta-toolbar "+g.classes.toolbar),g.$watch("focussed",function(){g.focussed?h.addClass(g.classes.focussed):h.removeClass(g.classes.focussed)});var j=function(b,c){var d;if(d=b&&b.display?angular.element(b.display):angular.element("<button type='button'>"),b&&b["class"]?d.addClass(b["class"]):d.addClass(g.classes.toolbarButton),d.attr("name",c.name),d.attr("ta-button","ta-button"),d.attr("ng-disabled","isDisabled()"),d.attr("tabindex","-1"),d.attr("ng-click","executeAction()"),d.attr("ng-class","displayActiveToolClass(active)"),b&&b.tooltiptext&&d.attr("title",b.tooltiptext),b&&!b.display&&!c._display&&(d[0].innerHTML="",b.buttontext&&(d[0].innerHTML=b.buttontext),b.iconclass)){var e=angular.element("<i>"),f=d[0].innerHTML;e.addClass(b.iconclass),d[0].innerHTML="",d.append(e),f&&""!==f&&d.append("&nbsp;"+f)}return c._lastToolDefinition=angular.copy(b),a(d)(c)};g.tools={},g._parent={disabled:!0,showHtml:!1,queryFormatBlockState:function(){return!1},queryCommandState:function(){return!1}};var k={$window:f,$editor:function(){return g._parent},isDisabled:function(){return"function"!=typeof this.$eval("disabled")&&this.$eval("disabled")||this.$eval("disabled()")||"html"!==this.name&&this.$editor().showHtml||this.$parent.disabled||this.$editor().disabled},displayActiveToolClass:function(a){return a?g.classes.toolbarButtonActive:""},executeAction:e};angular.forEach(g.toolbar,function(a){var b=angular.element("<div>");b.addClass(g.classes.toolbarGroup),angular.forEach(a,function(a){g.tools[a]=angular.extend(g.$new(!0),d[a],k,{name:a}),g.tools[a].$element=j(d[a],g.tools[a]),b.append(g.tools[a].$element)}),h.append(b)}),g.updateToolDisplay=function(a,b,c){var d=g.tools[a];if(d){if(d._lastToolDefinition&&!c&&(b=angular.extend({},d._lastToolDefinition,b)),null===b.buttontext&&null===b.iconclass&&null===b.display)throw'textAngular Error: Tool Definition for updating "'+a+'" does not have a valid display/iconclass/buttontext value';null===b.buttontext&&delete b.buttontext,null===b.iconclass&&delete b.iconclass,null===b.display&&delete b.display;var e=j(b,d);d.$element.replaceWith(e),d.$element=e}},g.addTool=function(a,b,c,e){g.tools[a]=angular.extend(g.$new(!0),d[a],k,{name:a}),g.tools[a].$element=j(d[a],g.tools[a]);var f;void 0===c&&(c=g.toolbar.length-1),f=angular.element(h.children()[c]),void 0===e?(f.append(g.tools[a].$element),g.toolbar[c][g.toolbar[c].length-1]=a):(f.children().eq(e).after(g.tools[a].$element),g.toolbar[c][e]=a)},b.registerToolbar(g),g.$on("$destroy",function(){b.unregisterToolbar(g.name)})}}}])}();var taTools={};angular.module("textAngularSetup",[]).constant("taRegisterTool",registerTextAngularTool).value("taTools",taTools).value("taOptions",{forceTextAngularSanitize:!0,keyMappings:[],toolbar:[["h1","h2","h3","h4","h5","h6","p","pre","quote"],["bold","italics","underline","strikeThrough","ul","ol","redo","undo","clear"],["justifyLeft","justifyCenter","justifyRight","justifyFull","indent","outdent"],["html","insertImage","insertLink","insertVideo","wordcount","charcount"]],classes:{focussed:"focussed",toolbar:"btn-toolbar",toolbarGroup:"btn-group",toolbarButton:"btn btn-default",toolbarButtonActive:"active",disabled:"disabled",textEditor:"form-control",htmlEditor:"form-control"},defaultTagAttributes:{a:{target:""}},setup:{textEditorSetup:function(a){},htmlEditorSetup:function(a){}},defaultFileDropHandler:function(a,b){var c=new FileReader;return"image"===a.type.substring(0,5)?(c.onload=function(){""!==c.result&&b("insertImage",c.result,!0)},c.readAsDataURL(a),!0):!1}}).value("taSelectableElements",["a","img"]).value("taCustomRenderers",[{selector:"img",customAttribute:"ta-insert-video",renderLogic:function(a){var b=angular.element("<iframe></iframe>"),c=a.prop("attributes");angular.forEach(c,function(a){b.attr(a.name,a.value)}),b.attr("src",b.attr("ta-insert-video")),a.replaceWith(b)}}]).value("taTranslations",{html:{tooltip:"Toggle html / Rich Text"},heading:{tooltip:"Heading "},p:{tooltip:"Paragraph"},pre:{tooltip:"Preformatted text"},ul:{tooltip:"Unordered List"},ol:{tooltip:"Ordered List"},quote:{tooltip:"Quote/unquote selection or paragraph"},undo:{tooltip:"Undo"},redo:{tooltip:"Redo"},bold:{tooltip:"Bold"},italic:{tooltip:"Italic"},underline:{tooltip:"Underline"},strikeThrough:{tooltip:"Strikethrough"},justifyLeft:{tooltip:"Align text left"},justifyRight:{tooltip:"Align text right"},justifyFull:{tooltip:"Justify text"},justifyCenter:{tooltip:"Center"},indent:{tooltip:"Increase indent"},outdent:{tooltip:"Decrease indent"},clear:{tooltip:"Clear formatting"},insertImage:{dialogPrompt:"Please enter an image URL to insert",tooltip:"Insert image",hotkey:"the - possibly language dependent hotkey ... for some future implementation"},insertVideo:{tooltip:"Insert video",dialogPrompt:"Please enter a youtube URL to embed"},insertLink:{tooltip:"Insert / edit link",dialogPrompt:"Please enter a URL to insert"},editLink:{reLinkButton:{tooltip:"Relink"},unLinkButton:{tooltip:"Unlink"},targetToggle:{buttontext:"Open in New Window"}},wordcount:{tooltip:"Display words Count"},charcount:{tooltip:"Display characters Count"}}).factory("taToolFunctions",["$window","taTranslations",function(a,b){return{imgOnSelectAction:function(a,b,c){var d=function(){c.updateTaBindtaTextElement(),c.hidePopover()};a.preventDefault(),c.displayElements.popover.css("width","375px");var e=c.displayElements.popoverContainer;e.empty();var f=angular.element('<div class="btn-group" style="padding-right: 6px;">'),g=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">100% </button>');g.on("click",function(a){a.preventDefault(),b.css({width:"100%",height:""}),d()});var h=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">50% </button>');h.on("click",function(a){a.preventDefault(),b.css({width:"50%",height:""}),d()});var i=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">25% </button>');i.on("click",function(a){a.preventDefault(),b.css({width:"25%",height:""}),d()});var j=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">Reset</button>');j.on("click",function(a){a.preventDefault(),b.css({width:"",height:""}),d()}),f.append(g),f.append(h),f.append(i),f.append(j),e.append(f),f=angular.element('<div class="btn-group" style="padding-right: 6px;">');var k=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-left"></i></button>');k.on("click",function(a){a.preventDefault(),b.css("float","left"),b.css("cssFloat","left"),b.css("styleFloat","left"),d()});var l=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-right"></i></button>');l.on("click",function(a){a.preventDefault(),b.css("float","right"),b.css("cssFloat","right"),b.css("styleFloat","right"),d()});var m=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-justify"></i></button>');m.on("click",function(a){a.preventDefault(),b.css("float",""),b.css("cssFloat",""),b.css("styleFloat",""),d()}),f.append(k),f.append(m),f.append(l),e.append(f),f=angular.element('<div class="btn-group">');var n=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-trash-o"></i></button>');n.on("click",function(a){a.preventDefault(),b.remove(),d()}),f.append(n),e.append(f),c.showPopover(b),c.showResizeOverlay(b)},aOnSelectAction:function(c,d,e){c.preventDefault(),e.displayElements.popover.css("width","436px");var f=e.displayElements.popoverContainer;f.empty(),f.css("line-height","28px");var g=angular.element('<a href="'+d.attr("href")+'" target="_blank">'+d.attr("href")+"</a>");g.css({display:"inline-block","max-width":"200px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap","vertical-align":"middle"}),f.append(g);var h=angular.element('<div class="btn-group pull-right">'),i=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on" title="'+b.editLink.reLinkButton.tooltip+'"><i class="fa fa-edit icon-edit"></i></button>');i.on("click",function(c){c.preventDefault();var f=a.prompt(b.insertLink.dialogPrompt,d.attr("href"));f&&""!==f&&"http://"!==f&&(d.attr("href",f),e.updateTaBindtaTextElement()),e.hidePopover()}),h.append(i);var j=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on" title="'+b.editLink.unLinkButton.tooltip+'"><i class="fa fa-unlink icon-unlink"></i></button>');j.on("click",function(a){a.preventDefault(),d.replaceWith(d.contents()),e.updateTaBindtaTextElement(),e.hidePopover()}),h.append(j);var k=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on">'+b.editLink.targetToggle.buttontext+"</button>");"_blank"===d.attr("target")&&k.addClass("active"),k.on("click",function(a){a.preventDefault(),d.attr("target","_blank"===d.attr("target")?"":"_blank"),k.toggleClass("active"),e.updateTaBindtaTextElement()}),h.append(k),f.append(h),e.showPopover(d)},extractYoutubeVideoId:function(a){var b=/(?:youtube(?:-nocookie)?\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/i,c=a.match(b);return c&&c[1]||null}}}]).run(["taRegisterTool","$window","taTranslations","taSelection","taToolFunctions","$sanitize","taOptions",function(a,b,c,d,e,f,g){var h={};if(f("",h),g.forceTextAngularSanitize===!0&&"taSanitize"!==h.version)throw angular.$$minErr("textAngular")("textAngularSetup","The textAngular-sanitize provider has been replaced by another -- have you included angular-sanitize by mistake?");a("html",{iconclass:"fa fa-code",tooltiptext:c.html.tooltip,action:function(){this.$editor().switchView()},activeState:function(){return this.$editor().showHtml}});var i=function(a){return function(){return this.$editor().queryFormatBlockState(a)}},j=function(){return this.$editor().wrapSelection("formatBlock","<"+this.name.toUpperCase()+">")};angular.forEach(["h1","h2","h3","h4","h5","h6"],function(b){a(b.toLowerCase(),{buttontext:b.toUpperCase(),tooltiptext:c.heading.tooltip+b.charAt(1),action:j,activeState:i(b.toLowerCase())})}),a("p",{buttontext:"P",tooltiptext:c.p.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<P>")},activeState:function(){return this.$editor().queryFormatBlockState("p")}}),a("pre",{buttontext:"pre",tooltiptext:c.pre.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<PRE>")},activeState:function(){return this.$editor().queryFormatBlockState("pre")}}),a("ul",{iconclass:"fa fa-list-ul",tooltiptext:c.ul.tooltip,action:function(){return this.$editor().wrapSelection("insertUnorderedList",null)},activeState:function(){return this.$editor().queryCommandState("insertUnorderedList")}}),a("ol",{iconclass:"fa fa-list-ol",tooltiptext:c.ol.tooltip,action:function(){return this.$editor().wrapSelection("insertOrderedList",null)},activeState:function(){return this.$editor().queryCommandState("insertOrderedList")}}),a("quote",{iconclass:"fa fa-quote-right",tooltiptext:c.quote.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<BLOCKQUOTE>")},activeState:function(){return this.$editor().queryFormatBlockState("blockquote")}}),a("undo",{iconclass:"fa fa-undo",tooltiptext:c.undo.tooltip,action:function(){return this.$editor().wrapSelection("undo",null)}}),a("redo",{iconclass:"fa fa-repeat",tooltiptext:c.redo.tooltip,action:function(){return this.$editor().wrapSelection("redo",null)}}),a("bold",{iconclass:"fa fa-bold",tooltiptext:c.bold.tooltip,action:function(){return this.$editor().wrapSelection("bold",null)},activeState:function(){return this.$editor().queryCommandState("bold")},commandKeyCode:98}),a("justifyLeft",{iconclass:"fa fa-align-left",tooltiptext:c.justifyLeft.tooltip,action:function(){return this.$editor().wrapSelection("justifyLeft",null)},activeState:function(a){if(a&&"#document"===a.nodeName)return!1;var b=!1;return a&&(b="left"===a.css("text-align")||"left"===a.attr("align")||"right"!==a.css("text-align")&&"center"!==a.css("text-align")&&"justify"!==a.css("text-align")&&!this.$editor().queryCommandState("justifyRight")&&!this.$editor().queryCommandState("justifyCenter")&&!this.$editor().queryCommandState("justifyFull")),b=b||this.$editor().queryCommandState("justifyLeft")}}),a("justifyRight",{iconclass:"fa fa-align-right",tooltiptext:c.justifyRight.tooltip,action:function(){return this.$editor().wrapSelection("justifyRight",null)},activeState:function(a){if(a&&"#document"===a.nodeName)return!1;var b=!1;return a&&(b="right"===a.css("text-align")),b=b||this.$editor().queryCommandState("justifyRight")}}),a("justifyFull",{iconclass:"fa fa-align-justify",tooltiptext:c.justifyFull.tooltip,action:function(){return this.$editor().wrapSelection("justifyFull",null)},activeState:function(a){var b=!1;return a&&(b="justify"===a.css("text-align")),b=b||this.$editor().queryCommandState("justifyFull")}}),a("justifyCenter",{iconclass:"fa fa-align-center",tooltiptext:c.justifyCenter.tooltip,action:function(){return this.$editor().wrapSelection("justifyCenter",null)},activeState:function(a){if(a&&"#document"===a.nodeName)return!1;var b=!1;return a&&(b="center"===a.css("text-align")),b=b||this.$editor().queryCommandState("justifyCenter")}}),a("indent",{iconclass:"fa fa-indent",tooltiptext:c.indent.tooltip,action:function(){return this.$editor().wrapSelection("indent",null)},activeState:function(){return this.$editor().queryFormatBlockState("blockquote")},commandKeyCode:"TabKey"}),a("outdent",{iconclass:"fa fa-outdent",tooltiptext:c.outdent.tooltip,action:function(){return this.$editor().wrapSelection("outdent",null)},activeState:function(){return!1},commandKeyCode:"ShiftTabKey"}),a("italics",{iconclass:"fa fa-italic",tooltiptext:c.italic.tooltip,action:function(){return this.$editor().wrapSelection("italic",null)},activeState:function(){return this.$editor().queryCommandState("italic")},commandKeyCode:105}),a("underline",{iconclass:"fa fa-underline",tooltiptext:c.underline.tooltip,action:function(){return this.$editor().wrapSelection("underline",null)},activeState:function(){return this.$editor().queryCommandState("underline")},commandKeyCode:117}),a("strikeThrough",{iconclass:"fa fa-strikethrough",tooltiptext:c.strikeThrough.tooltip,action:function(){return this.$editor().wrapSelection("strikeThrough",null)},activeState:function(){return document.queryCommandState("strikeThrough")}}),a("clear",{iconclass:"fa fa-ban",tooltiptext:c.clear.tooltip,action:function(a,b){var c;this.$editor().wrapSelection("removeFormat",null);var e=angular.element(d.getSelectionElement()),f=function(a){a=angular.element(a);var b=a;angular.forEach(a.children(),function(a){var c=angular.element("<p></p>");c.html(angular.element(a).html()),b.after(c),b=c}),a.remove()};if(angular.forEach(e.find("ul"),f),angular.forEach(e.find("ol"),f),"li"===e[0].tagName.toLowerCase()){var g=e[0].parentNode.childNodes,h=[],i=[],j=!1;for(c=0;c<g.length;c++)g[c]===e[0]?j=!0:j?i.push(g[c]):h.push(g[c]);var k=angular.element(e[0].parentNode),l=angular.element("<p></p>");if(l.html(angular.element(e[0]).html()),0===h.length||0===i.length)0===i.length?k.after(l):k[0].parentNode.insertBefore(l[0],k[0]),0===h.length&&0===i.length?k.remove():angular.element(e[0]).remove();else{var m=angular.element("<"+k[0].tagName+"></"+k[0].tagName+">"),n=angular.element("<"+k[0].tagName+"></"+k[0].tagName+">");for(c=0;c<h.length;c++)m.append(angular.element(h[c]));for(c=0;c<i.length;c++)n.append(angular.element(i[c]));k.after(n),k.after(l),k.after(m),k.remove()}d.setSelectionToElementEnd(l[0])}var o=this.$editor(),p=function(a){a=angular.element(a),a[0]!==o.displayElements.text[0]&&a.removeAttr("class"),angular.forEach(a.children(),p)};angular.forEach(e,p),"li"!==e[0].tagName.toLowerCase()&&"ol"!==e[0].tagName.toLowerCase()&&"ul"!==e[0].tagName.toLowerCase()&&this.$editor().wrapSelection("formatBlock","default"),b()}}),a("insertImage",{iconclass:"fa fa-picture-o",tooltiptext:c.insertImage.tooltip,action:function(){var a;return a=b.prompt(c.insertImage.dialogPrompt,"http://"),a&&""!==a&&"http://"!==a?this.$editor().wrapSelection("insertImage",a,!0):void 0},onElementSelect:{element:"img",action:e.imgOnSelectAction}}),a("insertVideo",{iconclass:"fa fa-youtube-play",tooltiptext:c.insertVideo.tooltip,action:function(){var a;if(a=b.prompt(c.insertVideo.dialogPrompt,"https://"),a&&""!==a&&"https://"!==a&&(videoId=e.extractYoutubeVideoId(a),videoId)){var d="https://www.youtube.com/embed/"+videoId,f='<img class="ta-insert-video" src="https://img.youtube.com/vi/'+videoId+'/hqdefault.jpg" ta-insert-video="'+d+'" contenteditable="false" allowfullscreen="true" frameborder="0" />';return this.$editor().wrapSelection("insertHTML",f,!0)}},onElementSelect:{element:"img",onlyWithAttrs:["ta-insert-video"],action:e.imgOnSelectAction}}),a("insertLink",{tooltiptext:c.insertLink.tooltip,iconclass:"fa fa-link",action:function(){var a;return a=b.prompt(c.insertLink.dialogPrompt,"http://"),a&&""!==a&&"http://"!==a?this.$editor().wrapSelection("createLink",a,!0):void 0},activeState:function(a){return a?"A"===a[0].tagName:!1},onElementSelect:{element:"a",action:e.aOnSelectAction}}),a("wordcount",{display:'<div id="toolbarWC" style="display:block; min-width:100px;">Words: <span ng-bind="wordcount"></span></div>',disabled:!0,wordcount:0,activeState:function(){var a=this.$editor().displayElements.text,b=a[0].innerHTML||"",c=0;return""!==b.replace(/\s*<[^>]*?>\s*/g,"")&&(c=b.replace(/<\/?(b|i|em|strong|span|u|strikethrough|a|img|small|sub|sup|label)( [^>*?])?>/gi,"").replace(/(<[^>]*?>\s*<[^>]*?>)/gi," ").replace(/(<[^>]*?>)/gi,"").replace(/\s+/gi," ").match(/\S+/g).length),this.wordcount=c,this.$editor().wordcount=c,!1}}),a("charcount",{display:'<div id="toolbarCC" style="display:block; min-width:120px;">Characters: <span ng-bind="charcount"></span></div>',disabled:!0,charcount:0,activeState:function(){var a=this.$editor().displayElements.text,b=a[0].innerText||a[0].textContent,c=b.replace(/(\r\n|\n|\r)/gm,"").replace(/^\s+/g," ").replace(/\s+$/g," ").length;return this.charcount=c,this.$editor().charcount=c,!1}})}]),function(){"use strict";angular.module("ui.tree",[]).constant("treeConfig",{treeClass:"angular-ui-tree",emptyTreeClass:"angular-ui-tree-empty",hiddenClass:"angular-ui-tree-hidden",nodesClass:"angular-ui-tree-nodes",nodeClass:"angular-ui-tree-node",handleClass:"angular-ui-tree-handle",placeholderClass:"angular-ui-tree-placeholder",dragClass:"angular-ui-tree-drag",dragThreshold:3,levelThreshold:30,defaultCollapsed:!1})}(),function(){"use strict";angular.module("ui.tree").controller("TreeHandleController",["$scope","$element",function(a,b){this.scope=a,a.$element=b,a.$nodeScope=null,a.$type="uiTreeHandle"}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeNodeController",["$scope","$element",function(a,b){function c(a){var b,d,e,f=0,g=a.childNodes();if(!g||0===g.length)return 0;for(e=g.length-1;e>=0;e--)b=g[e],d=1+c(b),f=Math.max(f,d);return f}this.scope=a,a.$element=b,a.$modelValue=null,a.$parentNodeScope=null,a.$childNodesScope=null,a.$parentNodesScope=null,a.$treeScope=null,a.$handleScope=null,a.$type="uiTreeNode",a.$$allowNodeDrop=!1,a.collapsed=!1,a.init=function(c){var d=c[0];a.$treeScope=c[1]?c[1].scope:null,a.$parentNodeScope=d.scope.$nodeScope,a.$modelValue=d.scope.$modelValue[a.$index],a.$parentNodesScope=d.scope,d.scope.initSubNode(a),b.on("$destroy",function(){d.scope.destroySubNode(a)})},a.index=function(){return a.$parentNodesScope.$modelValue.indexOf(a.$modelValue)},a.dragEnabled=function(){return!(a.$treeScope&&!a.$treeScope.dragEnabled)},a.isSibling=function(b){return a.$parentNodesScope==b.$parentNodesScope},a.isChild=function(b){var c=a.childNodes();return c&&c.indexOf(b)>-1},a.prev=function(){var b=a.index();return b>0?a.siblings()[b-1]:null},a.siblings=function(){return a.$parentNodesScope.childNodes()},a.childNodesCount=function(){return a.childNodes()?a.childNodes().length:0},a.hasChild=function(){return a.childNodesCount()>0},a.childNodes=function(){return a.$childNodesScope&&a.$childNodesScope.$modelValue?a.$childNodesScope.childNodes():null},a.accept=function(b,c){return a.$childNodesScope&&a.$childNodesScope.$modelValue&&a.$childNodesScope.accept(b,c)},a.remove=function(){return a.$parentNodesScope.removeNode(a)},a.toggle=function(){a.collapsed=!a.collapsed},a.collapse=function(){a.collapsed=!0},a.expand=function(){a.collapsed=!1},a.depth=function(){var b=a.$parentNodeScope;return b?b.depth()+1:1},a.maxSubDepth=function(){return a.$childNodesScope?c(a.$childNodesScope):0}}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeNodesController",["$scope","$element",function(a,b){this.scope=a,a.$element=b,a.$modelValue=null,a.$nodeScope=null,a.$treeScope=null,a.$type="uiTreeNodes",a.$nodesMap={},a.nodropEnabled=!1,a.maxDepth=0,a.cloneEnabled=!1,a.initSubNode=function(b){return b.$modelValue?void(a.$nodesMap[b.$modelValue.$$hashKey]=b):null},a.destroySubNode=function(b){return b.$modelValue?void(a.$nodesMap[b.$modelValue.$$hashKey]=null):null},a.accept=function(b,c){return a.$treeScope.$callbacks.accept(b,a,c)},a.beforeDrag=function(b){return a.$treeScope.$callbacks.beforeDrag(b)},a.isParent=function(b){return b.$parentNodesScope==a},a.hasChild=function(){return a.$modelValue.length>0},a.safeApply=function(a){var b=this.$root.$$phase;"$apply"==b||"$digest"==b?a&&"function"==typeof a&&a():this.$apply(a)},a.removeNode=function(b){var c=a.$modelValue.indexOf(b.$modelValue);return c>-1?(a.safeApply(function(){a.$modelValue.splice(c,1)[0]}),a.$treeScope.$callbacks.removed(b)):null},a.insertNode=function(b,c){a.safeApply(function(){a.$modelValue.splice(b,0,c)})},a.childNodes=function(){var b,c=[];if(a.$modelValue)for(b=0;b<a.$modelValue.length;b++)c.push(a.$nodesMap[a.$modelValue[b].$$hashKey]);return c},a.depth=function(){return a.$nodeScope?a.$nodeScope.depth():0},a.outOfDepth=function(b){var c=a.maxDepth||a.$treeScope.maxDepth;return c>0?a.depth()+b.maxSubDepth()+1>c:!1}}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeController",["$scope","$element",function(a,b){this.scope=a,a.$element=b,a.$nodesScope=null,a.$type="uiTree",a.$emptyElm=null,a.$callbacks=null,a.dragEnabled=!0,a.emptyPlaceholderEnabled=!0,a.maxDepth=0,a.dragDelay=0,a.cloneEnabled=!1,a.nodropEnabled=!1,a.isEmpty=function(){return a.$nodesScope&&a.$nodesScope.$modelValue&&0===a.$nodesScope.$modelValue.length},a.place=function(b){a.$nodesScope.$element.append(b),a.$emptyElm.remove()},this.resetEmptyElement=function(){a.$nodesScope.$modelValue&&0!==a.$nodesScope.$modelValue.length||!a.emptyPlaceholderEnabled?a.$emptyElm.remove():b.append(a.$emptyElm)},a.resetEmptyElement=this.resetEmptyElement}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTree",["treeConfig","$window",function(a,b){return{restrict:"A",scope:!0,controller:"TreeController",link:function(c,d,e,f){var g,h,i,j={accept:null,beforeDrag:null},k={};angular.extend(k,a),k.treeClass&&d.addClass(k.treeClass),"table"===d.prop("tagName").toLowerCase()?(c.$emptyElm=angular.element(b.document.createElement("tr")),h=d.find("tr"),i=h.length>0?angular.element(h).children().length:1e6,g=angular.element(b.document.createElement("td")).attr("colspan",i),c.$emptyElm.append(g)):c.$emptyElm=angular.element(b.document.createElement("div")),k.emptyTreeClass&&c.$emptyElm.addClass(k.emptyTreeClass),c.$watch("$nodesScope.$modelValue.length",function(a){angular.isNumber(a)&&f.resetEmptyElement()},!0),c.$watch(e.dragEnabled,function(a){"boolean"==typeof a&&(c.dragEnabled=a)}),c.$watch(e.emptyPlaceholderEnabled,function(a){"boolean"==typeof a&&(c.emptyPlaceholderEnabled=a,f.resetEmptyElement())}),c.$watch(e.nodropEnabled,function(a){"boolean"==typeof a&&(c.nodropEnabled=a)}),c.$watch(e.cloneEnabled,function(a){"boolean"==typeof a&&(c.cloneEnabled=a)}),c.$watch(e.maxDepth,function(a){"number"==typeof a&&(c.maxDepth=a)}),c.$watch(e.dragDelay,function(a){"number"==typeof a&&(c.dragDelay=a)}),j.accept=function(a,b,c){return!(b.nodropEnabled||b.$treeScope.nodropEnabled||b.outOfDepth(a))},j.beforeDrag=function(a){return!0},j.removed=function(a){},j.dropped=function(a){},j.dragStart=function(a){},j.dragMove=function(a){},j.dragStop=function(a){},j.beforeDrop=function(a){},c.$watch(e.uiTree,function(a,b){angular.forEach(a,function(a,b){j[b]&&"function"==typeof a&&(j[b]=a)}),c.$callbacks=j},!0)}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeHandle",["treeConfig",function(a){return{require:"^uiTreeNode",restrict:"A",scope:!0,controller:"TreeHandleController",link:function(b,c,d,e){var f={};angular.extend(f,a),f.handleClass&&c.addClass(f.handleClass),b!=e.scope&&(b.$nodeScope=e.scope,e.scope.$handleScope=b)}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeNode",["treeConfig","UiTreeHelper","$window","$document","$timeout","$q","$rootElement",function(a,b,c,d,e,f,g){return{require:["^uiTreeNodes","^uiTree"],restrict:"A",controller:"TreeNodeController",link:function(h,i,j,k){var l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J={},K="ontouchstart"in window,L=null,M=document.body,N=document.documentElement;angular.extend(J,a),J.nodeClass&&i.addClass(J.nodeClass),h.init(k),h.collapsed=!!b.getNodeAttribute(h,"collapsed")||a.defaultCollapsed,h.sourceOnly=h.nodropEnabled||h.$treeScope.nodropEnabled,h.$watch(j.collapsed,function(a){"boolean"==typeof a&&(h.collapsed=a)}),h.$watch("collapsed",function(a){b.setNodeAttribute(h,"collapsed",a),j.$set("collapsed",a)}),h.$on("angular-ui-tree:collapse-all",function(){h.collapsed=!0}),h.$on("angular-ui-tree:expand-all",function(){h.collapsed=!1}),u=function(a){if((K||2!==a.button&&3!==a.which)&&!(a.uiTreeDragging||a.originalEvent&&a.originalEvent.uiTreeDragging)){var e,f,j,k,u,v,w,x,y,z=angular.element(a.target);if(e=b.treeNodeHandlerContainerOfElement(z),e&&(z=angular.element(e)),f=i.clone(),x=b.elementIsTreeNode(z),y=b.elementIsTreeNodeHandle(z),(x||y)&&!(x&&b.elementContainsTreeNodeHandler(z)||(j=z.prop("tagName").toLowerCase(),"input"==j||"textarea"==j||"button"==j||"select"==j))){for(I=angular.element(a.target);I&&I[0]&&I[0]!==i;){if(b.nodrag(I))return;I=I.parent()}h.beforeDrag(h)&&(a.uiTreeDragging=!0,a.originalEvent&&(a.originalEvent.uiTreeDragging=!0),a.preventDefault(),u=b.eventObj(a),l=!0,m=b.dragInfo(h),k=i.prop("tagName"),"tr"===k.toLowerCase()?(o=angular.element(c.document.createElement(k)),v=angular.element(c.document.createElement("td")).addClass(J.placeholderClass).attr("colspan",i[0].children.length),o.append(v)):o=angular.element(c.document.createElement(k)).addClass(J.placeholderClass),p=angular.element(c.document.createElement(k)),
J.hiddenClass&&p.addClass(J.hiddenClass),n=b.positionStarted(u,i),o.css("height",b.height(i)+"px"),q=angular.element(c.document.createElement(h.$parentNodesScope.$element.prop("tagName"))).addClass(h.$parentNodesScope.$element.attr("class")).addClass(J.dragClass),q.css("width",b.width(i)+"px"),q.css("z-index",9999),w=(i[0].querySelector(".angular-ui-tree-handle")||i[0]).currentStyle,w&&(document.body.setAttribute("ui-tree-cursor",d.find("body").css("cursor")||""),d.find("body").css({cursor:w.cursor+"!important"})),h.sourceOnly&&o.css("display","none"),i.after(o),i.after(p),m.isClone()&&h.sourceOnly?q.append(f):q.append(i),g.append(q),q.css({left:u.pageX-n.offsetX+"px",top:u.pageY-n.offsetY+"px"}),r={placeholder:o,dragging:q},D(),h.$apply(function(){h.$treeScope.$callbacks.dragStart(m.eventArgs(r,n))}),s=Math.max(M.scrollHeight,M.offsetHeight,N.clientHeight,N.scrollHeight,N.offsetHeight),t=Math.max(M.scrollWidth,M.offsetWidth,N.clientWidth,N.scrollWidth,N.offsetWidth))}}},v=function(a){var d,e,f,g,i,j,k,p,u,v,w,x,y,z,A,B,C=b.eventObj(a);if(q){if(a.preventDefault(),c.getSelection?c.getSelection().removeAllRanges():c.document.selection&&c.document.selection.empty(),f=C.pageX-n.offsetX,g=C.pageY-n.offsetY,0>f&&(f=0),0>g&&(g=0),g+10>s&&(g=s-10),f+10>t&&(f=t-10),q.css({left:f+"px",top:g+"px"}),i=window.pageYOffset||c.document.documentElement.scrollTop,j=i+(window.innerHeight||c.document.clientHeight||c.document.clientHeight),j<C.pageY&&s>=j&&window.scrollBy(0,10),i>C.pageY&&window.scrollBy(0,-10),b.positionMoved(a,n,l),l)return void(l=!1);if(p=b.offset(q).left-b.offset(o).left>=J.threshold,u=C.pageX-(c.pageXOffset||c.document.body.scrollLeft||c.document.documentElement.scrollLeft)-(c.document.documentElement.clientLeft||0),v=C.pageY-(c.pageYOffset||c.document.body.scrollTop||c.document.documentElement.scrollTop)-(c.document.documentElement.clientTop||0),angular.isFunction(q.hide)?q.hide():(w=q[0].style.display,q[0].style.display="none"),c.document.elementFromPoint(u,v),y=angular.element(c.document.elementFromPoint(u,v)),H=b.treeNodeHandlerContainerOfElement(y),H&&(y=angular.element(H)),angular.isFunction(q.show)?q.show():q[0].style.display=w,G=!(b.elementIsTreeNodeHandle(y)||b.elementIsTreeNode(y)||b.elementIsTreeNodes(y)||b.elementIsTree(y)||b.elementIsPlaceholder(y)),G&&(o.remove(),L&&(L.resetEmptyElement(),L=null)),n.dirAx&&n.distAxX>=J.levelThreshold&&(n.distAxX=0,n.distX>0&&(d=m.prev(),d&&!d.collapsed&&d.accept(h,d.childNodesCount())&&(d.$childNodesScope.$element.append(o),m.moveTo(d.$childNodesScope,d.childNodes(),d.childNodesCount()))),n.distX<0&&(e=m.next(),e||(k=m.parentNode(),k&&k.$parentNodesScope.accept(h,k.index()+1)&&(k.$element.after(o),m.moveTo(k.$parentNodesScope,k.siblings(),k.index()+1))))),!n.dirAx){if(b.elementIsTree(y)?x=y.controller("uiTree").scope:b.elementIsTreeNodeHandle(y)?x=y.controller("uiTreeHandle").scope:b.elementIsTreeNode(y)?x=y.controller("uiTreeNode").scope:b.elementIsTreeNodes(y)?x=y.controller("uiTreeNodes").scope:b.elementIsPlaceholder(y)?x=y.controller("uiTreeNodes").scope:y.controller("uiTreeNode")&&(x=y.controller("uiTreeNode").scope),z=!1,!x)return;if(!x.$treeScope||x.$parent.nodropEnabled||x.$treeScope.nodropEnabled||o.css("display",""),"uiTree"==x.$type&&x.dragEnabled&&(z=x.isEmpty()),"uiTreeHandle"==x.$type&&(x=x.$nodeScope),"uiTreeNode"!=x.$type&&!z)return;L&&o.parent()[0]!=L.$element[0]&&(L.resetEmptyElement(),L=null),z?(L=x,x.$nodesScope.accept(h,0)&&(x.place(o),m.moveTo(x.$nodesScope,x.$nodesScope.childNodes(),0))):x.dragEnabled()&&(y=x.$element,A=b.offset(y),B=x.horizontal?C.pageX<A.left+b.width(y)/2:C.pageY<A.top+b.height(y)/2,x.$parentNodesScope.accept(h,x.index())?B?(y[0].parentNode.insertBefore(o[0],y[0]),m.moveTo(x.$parentNodesScope,x.siblings(),x.index())):(y.after(o),m.moveTo(x.$parentNodesScope,x.siblings(),x.index()+1)):!B&&x.accept(h,x.childNodesCount())?(x.$childNodesScope.$element.append(o),m.moveTo(x.$childNodesScope,x.childNodes(),x.childNodesCount())):G=!0)}h.$apply(function(){h.$treeScope.$callbacks.dragMove(m.eventArgs(r,n))})}},w=function(a){var b=m.eventArgs(r,n);a.preventDefault(),E(),h.$treeScope.$apply(function(){f.when(h.$treeScope.$callbacks.beforeDrop(b)).then(function(a){a!==!1&&h.$$allowNodeDrop&&!G?(m.apply(),h.$treeScope.$callbacks.dropped(b)):C()})["catch"](function(){C()})["finally"](function(){p.replaceWith(h.$element),o.remove(),q&&(q.remove(),q=null),h.$treeScope.$callbacks.dragStop(b),h.$$allowNodeDrop=!1,m=null;var a=document.body.getAttribute("ui-tree-cursor");null!==a&&(d.find("body").css({cursor:a}),document.body.removeAttribute("ui-tree-cursor"))})})},x=function(a){h.dragEnabled()&&u(a)},y=function(a){v(a)},z=function(a){h.$$allowNodeDrop=!0,w(a)},A=function(a){w(a)},B=function(){var a;return{exec:function(b,c){c||(c=0),this.cancel(),a=e(b,c)},cancel:function(){e.cancel(a)}}}(),C=function(){i.bind("touchstart mousedown",function(a){B.exec(function(){x(a)},h.dragDelay||0)}),i.bind("touchend touchcancel mouseup",function(){B.cancel()})},C(),D=function(){angular.element(d).bind("touchend",z),angular.element(d).bind("touchcancel",z),angular.element(d).bind("touchmove",y),angular.element(d).bind("mouseup",z),angular.element(d).bind("mousemove",y),angular.element(d).bind("mouseleave",A)},E=function(){angular.element(d).unbind("touchend",z),angular.element(d).unbind("touchcancel",z),angular.element(d).unbind("touchmove",y),angular.element(d).unbind("mouseup",z),angular.element(d).unbind("mousemove",y),angular.element(d).unbind("mouseleave",A)},F=function(a){27==a.keyCode&&(h.$$allowNodeDrop=!1,w(a))},angular.element(c.document).bind("keydown",F),h.$on("$destroy",function(){angular.element(c.document).unbind("keydown",F)})}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeNodes",["treeConfig","$window",function(a){return{require:["ngModel","?^uiTreeNode","^uiTree"],restrict:"A",scope:!0,controller:"TreeNodesController",link:function(b,c,d,e){var f={},g=e[0],h=e[1],i=e[2];angular.extend(f,a),f.nodesClass&&c.addClass(f.nodesClass),h?(h.scope.$childNodesScope=b,b.$nodeScope=h.scope):i.scope.$nodesScope=b,b.$treeScope=i.scope,g&&(g.$render=function(){b.$modelValue=g.$modelValue}),b.$watch(function(){return d.maxDepth},function(a){"number"==typeof a&&(b.maxDepth=a)}),b.$watch(function(){return d.nodropEnabled},function(a){"undefined"!=typeof a&&(b.nodropEnabled=!0)},!0),d.$observe("horizontal",function(a){b.horizontal="undefined"!=typeof a})}}}])}(),function(){"use strict";function a(a,b){if(void 0===b)return null;for(var c=b.parentNode,d=1,e="function"==typeof c.setAttribute&&c.hasAttribute(a)?c:null;c&&"function"==typeof c.setAttribute&&!c.hasAttribute(a);){if(c=c.parentNode,e=c,c===document.documentElement){e=null;break}d++}return e}angular.module("ui.tree").factory("UiTreeHelper",["$document","$window","treeConfig",function(b,c,d){return{nodesData:{},setNodeAttribute:function(a,b,c){if(!a.$modelValue)return null;var d=this.nodesData[a.$modelValue.$$hashKey];d||(d={},this.nodesData[a.$modelValue.$$hashKey]=d),d[b]=c},getNodeAttribute:function(a,b){if(!a.$modelValue)return null;var c=this.nodesData[a.$modelValue.$$hashKey];return c?c[b]:null},nodrag:function(a){return"undefined"!=typeof a.attr("data-nodrag")?"false"!==a.attr("data-nodrag"):!1},eventObj:function(a){var b=a;return void 0!==a.targetTouches?b=a.targetTouches.item(0):void 0!==a.originalEvent&&void 0!==a.originalEvent.targetTouches&&(b=a.originalEvent.targetTouches.item(0)),b},dragInfo:function(a){return{source:a,sourceInfo:{cloneModel:a.$treeScope.cloneEnabled===!0?angular.copy(a.$modelValue):void 0,nodeScope:a,index:a.index(),nodesScope:a.$parentNodesScope},index:a.index(),siblings:a.siblings().slice(0),parent:a.$parentNodesScope,moveTo:function(a,b,c){this.parent=a,this.siblings=b.slice(0);var d=this.siblings.indexOf(this.source);d>-1&&(this.siblings.splice(d,1),this.source.index()<c&&c--),this.siblings.splice(c,0,this.source),this.index=c},parentNode:function(){return this.parent.$nodeScope},prev:function(){return this.index>0?this.siblings[this.index-1]:null},next:function(){return this.index<this.siblings.length-1?this.siblings[this.index+1]:null},isClone:function(){return this.source.$treeScope.cloneEnabled===!0},clonedNode:function(a){return angular.copy(a)},isDirty:function(){return this.source.$parentNodesScope!=this.parent||this.source.index()!=this.index},isForeign:function(){return this.source.$treeScope!==this.parent.$treeScope},eventArgs:function(a,b){return{source:this.sourceInfo,dest:{index:this.index,nodesScope:this.parent},elements:a,pos:b}},apply:function(){var a=this.source.$modelValue;this.parent.nodropEnabled||this.parent.$treeScope.nodropEnabled||this.isDirty()&&(this.isClone()&&this.isForeign()?this.parent.insertNode(this.index,this.sourceInfo.cloneModel):(this.source.remove(),this.parent.insertNode(this.index,a)))}}},height:function(a){return a.prop("scrollHeight")},width:function(a){return a.prop("scrollWidth")},offset:function(a){var d=a[0].getBoundingClientRect();return{width:a.prop("offsetWidth"),height:a.prop("offsetHeight"),top:d.top+(c.pageYOffset||b[0].body.scrollTop||b[0].documentElement.scrollTop),left:d.left+(c.pageXOffset||b[0].body.scrollLeft||b[0].documentElement.scrollLeft)}},positionStarted:function(a,b){var c={},d=a.pageX,e=a.pageY;return a.originalEvent&&a.originalEvent.touches&&a.originalEvent.touches.length>0&&(d=a.originalEvent.touches[0].pageX,e=a.originalEvent.touches[0].pageY),c.offsetX=d-this.offset(b).left,c.offsetY=e-this.offset(b).top,c.startX=c.lastX=d,c.startY=c.lastY=e,c.nowX=c.nowY=c.distX=c.distY=c.dirAx=0,c.dirX=c.dirY=c.lastDirX=c.lastDirY=c.distAxX=c.distAxY=0,c},positionMoved:function(a,b,c){var d,e=a.pageX,f=a.pageY;return a.originalEvent&&a.originalEvent.touches&&a.originalEvent.touches.length>0&&(e=a.originalEvent.touches[0].pageX,f=a.originalEvent.touches[0].pageY),b.lastX=b.nowX,b.lastY=b.nowY,b.nowX=e,b.nowY=f,b.distX=b.nowX-b.lastX,b.distY=b.nowY-b.lastY,b.lastDirX=b.dirX,b.lastDirY=b.dirY,b.dirX=0===b.distX?0:b.distX>0?1:-1,b.dirY=0===b.distY?0:b.distY>0?1:-1,d=Math.abs(b.distX)>Math.abs(b.distY)?1:0,c?(b.dirAx=d,void(b.moving=!0)):(b.dirAx!==d?(b.distAxX=0,b.distAxY=0):(b.distAxX+=Math.abs(b.distX),0!==b.dirX&&b.dirX!==b.lastDirX&&(b.distAxX=0),b.distAxY+=Math.abs(b.distY),0!==b.dirY&&b.dirY!==b.lastDirY&&(b.distAxY=0)),void(b.dirAx=d))},elementIsTreeNode:function(a){return"undefined"!=typeof a.attr("ui-tree-node")},elementIsTreeNodeHandle:function(a){return"undefined"!=typeof a.attr("ui-tree-handle")},elementIsTree:function(a){return"undefined"!=typeof a.attr("ui-tree")},elementIsTreeNodes:function(a){return"undefined"!=typeof a.attr("ui-tree-nodes")},elementIsPlaceholder:function(a){return a.hasClass(d.placeholderClass)},elementContainsTreeNodeHandler:function(a){return a[0].querySelectorAll("[ui-tree-handle]").length>=1},treeNodeHandlerContainerOfElement:function(b){return a("ui-tree-handle",b[0])}}}])}(),function(){"use strict";function a(a,b){var c=a.$eval(b.legendmargin)||{left:0,top:5,bottom:5,right:0};"object"!=typeof c&&(c={left:c,top:c,bottom:c,right:c}),a.legendmargin=c}function b(b,c,d){b.legend&&d.showlegend&&"true"===d.showlegend&&(a(c,d),b.legend.margin(c.legendmargin),b.legend.width(void 0===d.legendwidth?400:+d.legendwidth),b.legend.height(void 0===d.legendheight?20:+d.legendheight),b.legend.key(void 0===d.legendkey?function(a){return a.key}:c.legendkey()),b.legend.color(void 0===d.legendcolor?nv.utils.defaultColor():c.legendcolor()),b.legend.align(void 0===d.legendalign?!0:"true"===d.legendalign),b.legend.rightAlign(void 0===d.legendrightalign?!0:"true"===d.legendrightalign),b.legend.updateState(void 0===d.legendupdatestate?!0:"true"===d.legendupdatestate),b.legend.radioButtonMode(void 0===d.legendradiobuttonmode?!1:"true"===d.legendradiobuttonmode))}function c(a,b){a.dispatch&&(a.dispatch.tooltipShow&&a.dispatch.on("tooltipShow.directive",function(a){b.$emit("tooltipShow.directive",a)}),a.dispatch.tooltipHide&&a.dispatch.on("tooltipHide.directive",function(a){b.$emit("tooltipHide.directive",a)}),a.dispatch.beforeUpdate&&a.dispatch.on("beforeUpdate.directive",function(a){b.$emit("beforeUpdate.directive",a)}),a.dispatch.stateChange&&a.dispatch.on("stateChange.directive",function(a){b.$emit("stateChange.directive",a)}),a.dispatch.changeState&&a.dispatch.on("changeState.directive",function(a){b.$emit("changeState.directive",a)})),a.lines&&(a.lines.dispatch.on("elementMouseover.tooltip.directive",function(a){b.$emit("elementMouseover.tooltip.directive",a)}),a.lines.dispatch.on("elementMouseout.tooltip.directive",function(a){b.$emit("elementMouseout.tooltip.directive",a)}),a.lines.dispatch.on("elementClick.directive",function(a){b.$emit("elementClick.directive",a)})),a.stacked&&a.stacked.dispatch&&(a.stacked.dispatch.on("areaClick.toggle.directive",function(a){b.$emit("areaClick.toggle.directive",a)}),a.stacked.dispatch.on("tooltipShow.directive",function(a){b.$emit("tooltipShow.directive",a)}),a.stacked.dispatch.on("tooltipHide.directive",function(a){b.$emit("tooltipHide.directive",a)})),a.interactiveLayer&&(a.interactiveLayer.elementMouseout&&a.interactiveLayer.dispatch.on("elementMouseout.directive",function(a){b.$emit("elementMouseout.directive",a)}),a.interactiveLayer.elementMousemove&&a.interactiveLayer.dispatch.on("elementMousemove.directive",function(a){b.$emit("elementMousemove.directive",a)})),a.discretebar&&(a.discretebar.dispatch.on("elementMouseover.tooltip.directive",function(a){b.$emit("elementMouseover.tooltip.directive",a)}),a.discretebar.dispatch.on("elementMouseout.tooltip.directive",function(a){b.$emit("elementMouseover.tooltip.directive",a)}),a.discretebar.dispatch.on("elementClick.directive",function(a){b.$emit("elementClick.directive",a)})),a.multibar&&(a.multibar.dispatch.on("elementMouseover.tooltip.directive",function(a){b.$emit("elementMouseover.tooltip.directive",a)}),a.multibar.dispatch.on("elementMouseout.tooltip.directive",function(a){b.$emit("elementMouseover.tooltip.directive",a)}),a.multibar.dispatch.on("elementClick.directive",function(a){b.$emit("elementClick.directive",a)})),a.pie&&(a.pie.dispatch.on("elementMouseover.tooltip.directive",function(a){b.$emit("elementMouseover.tooltip.directive",a)}),a.pie.dispatch.on("elementMouseout.tooltip.directive",function(a){b.$emit("elementMouseover.tooltip.directive",a)}),a.pie.dispatch.on("elementClick.directive",function(a){b.$emit("elementClick.directive",a)})),a.scatter&&(a.scatter.dispatch.on("elementMouseover.tooltip.directive",function(a){b.$emit("elementMouseover.tooltip.directive",a)}),a.scatter.dispatch.on("elementMouseout.tooltip.directive",function(a){b.$emit("elementMouseover.tooltip.directive",a)})),a.bullet&&(a.bullet.dispatch.on("elementMouseover.tooltip.directive",function(a){b.$emit("elementMouseover.tooltip.directive",a)}),a.bullet.dispatch.on("elementMouseout.tooltip.directive",function(a){b.$emit("elementMouseover.tooltip.directive",a)})),a.legend&&(a.legend.dispatch.on("stateChange.legend.directive",function(a){b.$emit("stateChange.legend.directive",a)}),a.legend.dispatch.on("legendClick.directive",function(a,c){b.$emit("legendClick.directive",a,c)}),a.legend.dispatch.on("legendDblclick.directive",function(a,c){b.$emit("legendDblclick.directive",a,c)}),a.legend.dispatch.on("legendMouseover.directive",function(a,c){b.$emit("legendMouseover.directive",a,c)})),a.controls&&a.controls.legendClick&&a.controls.dispatch.on("legendClick.directive",function(a,c){b.$emit("legendClick.directive",a,c)})}function d(a,b,c){c.xaxisorient&&a.xAxis.orient(c.xaxisorient),c.xaxisticks&&a.xAxis.scale().ticks(c.xaxisticks),c.xaxistickvalues&&(Array.isArray(b.$eval(c.xaxistickvalues))?a.xAxis.tickValues(b.$eval(c.xaxistickvalues)):"function"==typeof b.xaxistickvalues()&&a.xAxis.tickValues(b.xaxistickvalues())),c.xaxisticksubdivide&&a.xAxis.tickSubdivide(b.xaxisticksubdivide()),c.xaxisticksize&&a.xAxis.tickSize(b.xaxisticksize()),c.xaxistickpadding&&a.xAxis.tickPadding(b.xaxistickpadding()),c.xaxistickformat&&a.xAxis.tickFormat(b.xaxistickformat()),c.xaxislabel&&a.xAxis.axisLabel(c.xaxislabel),c.xaxisscale&&a.xAxis.scale(b.xaxisscale()),c.xaxisdomain&&(Array.isArray(b.$eval(c.xaxisdomain))?a.xDomain(b.$eval(c.xaxisdomain)):"function"==typeof b.xaxisdomain()&&a.xDomain(b.xaxisdomain())),c.xaxisrange&&(Array.isArray(b.$eval(c.xaxisrange))?a.xRange(b.$eval(c.xaxisrange)):"function"==typeof b.xaxisrange()&&a.xRange(b.xaxisrange())),c.xaxisrangeband&&a.xAxis.rangeBand(b.xaxisrangeband()),c.xaxisrangebands&&a.xAxis.rangeBands(b.xaxisrangebands()),c.xaxisshowmaxmin&&a.xAxis.showMaxMin("true"===c.xaxisshowmaxmin),c.xaxishighlightzero&&a.xAxis.highlightZero("true"===c.xaxishighlightzero),c.xaxisrotatelabels&&a.xAxis.rotateLabels(+c.xaxisrotatelabels),c.xaxisstaggerlabels&&a.xAxis.staggerLabels("true"===c.xaxisstaggerlabels),c.xaxislabeldistance&&a.xAxis.axisLabelDistance(+c.xaxislabeldistance)}function e(a,b,c){c.x2axisorient&&a.x2Axis.orient(c.x2axisorient),c.x2axisticks&&a.x2Axis.scale().ticks(c.x2axisticks),c.x2axistickvalues&&(Array.isArray(b.$eval(c.x2axistickvalues))?a.x2Axis.tickValues(b.$eval(c.x2axistickvalues)):"function"==typeof b.xaxistickvalues()&&a.x2Axis.tickValues(b.x2axistickvalues())),c.x2axisticksubdivide&&a.x2Axis.tickSubdivide(b.x2axisticksubdivide()),c.x2axisticksize&&a.x2Axis.tickSize(b.x2axisticksize()),c.x2axistickpadding&&a.x2Axis.tickPadding(b.x2axistickpadding()),c.x2axistickformat&&a.x2Axis.tickFormat(b.x2axistickformat()),c.x2axislabel&&a.x2Axis.axisLabel(c.x2axislabel),c.x2axisscale&&a.x2Axis.scale(b.x2axisscale()),c.x2axisdomain&&(Array.isArray(b.$eval(c.x2axisdomain))?a.x2Axis.domain(b.$eval(c.x2axisdomain)):"function"==typeof b.x2axisdomain()&&a.x2Axis.domain(b.x2axisdomain())),c.x2axisrange&&(Array.isArray(b.$eval(c.x2axisrange))?a.x2Axis.range(b.$eval(c.x2axisrange)):"function"==typeof b.x2axisrange()&&a.x2Axis.range(b.x2axisrange())),c.x2axisrangeband&&a.x2Axis.rangeBand(b.x2axisrangeband()),c.x2axisrangebands&&a.x2Axis.rangeBands(b.x2axisrangebands()),c.x2axisshowmaxmin&&a.x2Axis.showMaxMin("true"===c.x2axisshowmaxmin),c.x2axishighlightzero&&a.x2Axis.highlightZero("true"===c.x2axishighlightzero),c.x2axisrotatelables&&a.x2Axis.rotateLabels(+c.x2axisrotatelables),c.x2axisstaggerlabels&&a.x2Axis.staggerLabels("true"===c.x2axisstaggerlabels),c.x2axislabeldistance&&a.x2Axis.axisLabelDistance(+c.x2axislabeldistance)}function f(a,b,c){c.yaxisorient&&a.yAxis.orient(c.yaxisorient),c.yaxisticks&&a.yAxis.scale().ticks(c.yaxisticks),c.yaxistickvalues&&(Array.isArray(b.$eval(c.yaxistickvalues))?a.yAxis.tickValues(b.$eval(c.yaxistickvalues)):"function"==typeof b.yaxistickvalues()&&a.yAxis.tickValues(b.yaxistickvalues())),c.yaxisticksubdivide&&a.yAxis.tickSubdivide(b.yaxisticksubdivide()),c.yaxisticksize&&a.yAxis.tickSize(b.yaxisticksize()),c.yaxistickpadding&&a.yAxis.tickPadding(b.yaxistickpadding()),c.yaxistickformat&&a.yAxis.tickFormat(b.yaxistickformat()),c.yaxislabel&&a.yAxis.axisLabel(c.yaxislabel),c.yaxisscale&&a.yAxis.scale(b.yaxisscale()),c.yaxisdomain&&(Array.isArray(b.$eval(c.yaxisdomain))?a.yDomain(b.$eval(c.yaxisdomain)):"function"==typeof b.yaxisdomain()&&a.yDomain(b.yaxisdomain())),c.yaxisrange&&(Array.isArray(b.$eval(c.yaxisrange))?a.yRange(b.$eval(c.yaxisrange)):"function"==typeof b.yaxisrange()&&a.yRange(b.yaxisrange())),c.yaxisrangeband&&a.yAxis.rangeBand(b.yaxisrangeband()),c.yaxisrangebands&&a.yAxis.rangeBands(b.yaxisrangebands()),c.yaxisshowmaxmin&&a.yAxis.showMaxMin("true"===c.yaxisshowmaxmin),c.yaxishighlightzero&&a.yAxis.highlightZero("true"===c.yaxishighlightzero),c.yaxisrotatelabels&&a.yAxis.rotateLabels(+c.yaxisrotatelabels),c.yaxisrotateylabel&&a.yAxis.rotateYLabel("true"===c.yaxisrotateylabel),c.yaxisstaggerlabels&&a.yAxis.staggerLabels("true"===c.yaxisstaggerlabels),c.yaxislabeldistance&&a.yAxis.axisLabelDistance(+c.yaxislabeldistance)}function g(a,b,c){c.y1axisticks&&a.y1Axis.scale().ticks(c.y1axisticks),c.y1axistickvalues&&(Array.isArray(b.$eval(c.y1axistickvalues))?a.y1Axis.tickValues(b.$eval(c.y1axistickvalues)):"function"==typeof b.y1axistickvalues()&&a.y1Axis.tickValues(b.y1axistickvalues())),c.y1axisticksubdivide&&a.y1Axis.tickSubdivide(b.y1axisticksubdivide()),c.y1axisticksize&&a.y1Axis.tickSize(b.y1axisticksize()),c.y1axistickpadding&&a.y1Axis.tickPadding(b.y1axistickpadding()),c.y1axistickformat&&a.y1Axis.tickFormat(b.y1axistickformat()),c.y1axislabel&&a.y1Axis.axisLabel(c.y1axislabel),c.y1axisscale&&a.y1Axis.yScale(b.y1axisscale()),c.y1axisdomain&&(Array.isArray(b.$eval(c.y1axisdomain))?a.y1Axis.domain(b.$eval(c.y1axisdomain)):"function"==typeof b.y1axisdomain()&&a.y1Axis.domain(b.y1axisdomain())),c.y1axisrange&&(Array.isArray(b.$eval(c.y1axisrange))?a.y1Axis.range(b.$eval(c.y1axisrange)):"function"==typeof b.y1axisrange()&&a.y1Axis.range(b.y1axisrange())),c.y1axisrangeband&&a.y1Axis.rangeBand(b.y1axisrangeband()),c.y1axisrangebands&&a.y1Axis.rangeBands(b.y1axisrangebands()),c.y1axisshowmaxmin&&a.y1Axis.showMaxMin("true"===c.y1axisshowmaxmin),c.y1axishighlightzero&&a.y1Axis.highlightZero("true"===c.y1axishighlightzero),c.y1axisrotatelabels&&a.y1Axis.rotateLabels(+b.y1axisrotatelabels),c.y1axisrotateylabel&&a.y1Axis.rotateYLabel("true"===c.y1axisrotateylabel),c.y1axisstaggerlabels&&a.y1Axis.staggerlabels("true"===c.y1axisstaggerlabels),c.y1axislabeldistance&&a.y1Axis.axisLabelDistance(+c.y1axislabeldistance)}function h(a,b,c){c.y2axisticks&&a.y2Axis.scale().ticks(c.y2axisticks),c.y2axistickvalues&&a.y2Axis.tickValues(b.$eval(c.y2axistickvalues)),c.y2axisticksubdivide&&a.y2Axis.tickSubdivide(b.y2axisticksubdivide()),c.y2axisticksize&&a.y2Axis.tickSize(b.y2axisticksize()),c.y2axistickpadding&&a.y2Axis.tickPadding(b.y2axistickpadding()),c.y2axistickformat&&a.y2Axis.tickFormat(b.y2axistickformat()),c.y2axislabel&&a.y2Axis.axisLabel(c.y2axislabel),c.y2axisscale&&a.y2Axis.yScale(b.y2axisscale()),c.y2axisdomain&&(Array.isArray(b.$eval(c.y2axisdomain))?a.y2Axis.domain(b.$eval(c.y2axisdomain)):"function"==typeof b.y2axisdomain()&&a.y2Axis.domain(b.y2axisdomain())),c.y2axisrange&&(Array.isArray(b.$eval(c.y2axisrange))?a.y2Axis.range(b.$eval(c.y2axisrange)):"function"==typeof b.y2axisrange()&&a.y2Axis.range(b.y2axisrange())),c.y2axisrangeband&&a.y2Axis.rangeBand(b.y2axisrangeband()),c.y2axisrangebands&&a.y2Axis.rangeBands(b.y2axisrangebands()),c.y2axisshowmaxmin&&a.y2Axis.showMaxMin("true"===c.y2axisshowmaxmin),c.y2axishighlightzero&&a.y2Axis.highlightZero("true"===c.y2axishighlightzero),c.y2axisrotatelabels&&a.y2Axis.rotateLabels(+b.y2axisrotatelabels),c.y2axisrotateylabel&&a.y2Axis.rotateYLabel("true"===c.y2axisrotateylabel),c.y2axisstaggerlabels&&a.y2Axis.staggerlabels("true"===c.y2axisstaggerlabels),c.y2axislabeldistance&&a.y2Axis.axisLabelDistance(+c.y2axislabeldistance)}function i(a,b){var c=a.$eval(b.margin)||{left:50,top:50,bottom:50,right:50};"object"!=typeof c&&(c={left:c,top:c,bottom:c,right:c}),a.margin=c}function j(a,i,j,k,l){d(k,a,i),e(k,a,i),f(k,a,i),g(k,a,i),h(k,a,i),b(k,a,i),c(k,a);var m;i.id?(angular.isArray(l)&&0===l.length&&d3.select("#"+i.id+" svg").remove(),d3.select("#"+i.id+" svg").empty()&&d3.select("#"+i.id).append("svg"),d3.select("#"+i.id+" svg").attr("height",a.height).attr("width",a.width).datum(l).transition().duration(void 0===i.transitionduration?250:+i.transitionduration).call(k)):(m="chartid"+Math.floor(1000000001*Math.random()),angular.element(j).attr("data-chartid",m),d3.select("[data-chartid="+m+"] svg").empty()?d3.select("[data-chartid="+m+"]").append("svg").attr("height",a.height).attr("width",a.width).datum(l).transition().duration(void 0===i.transitionduration?250:+i.transitionduration).call(k):d3.select("[data-chartid="+m+"] svg").attr("height",a.height).attr("width",a.width).datum(l).transition().duration(void 0===i.transitionduration?250:+i.transitionduration).call(k))}angular.module("legendDirectives",[]).directive("simpleSvgLegend",function(){return{restrict:"EA",scope:{id:"@",width:"@",height:"@",margin:"@",x:"@",y:"@",labels:"@",styles:"@",classes:"@",shapes:"@",padding:"@",columns:"@"},compile:function(){return function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o=0,p=0,q=1,r=0,s=10,t="http://www.w3.org/2000/svg",u=0,v=0;g=a.$eval(c.margin)||{left:5,top:5,bottom:5,right:5},e="undefined"===c.width?b[0].parentElement.offsetWidth-(g.left+g.right):+c.width-(g.left+g.right),f="undefined"===c.height?b[0].parentElement.offsetHeight-(g.top+g.bottom):+c.height-(g.top+g.bottom),d=c.id?c.id:"legend-"+Math.random(),c.columns&&(q=+c.columns),c.padding&&(s=+c.padding),h=s+"",i=document.createElementNS(t,"svg"),c.width&&i.setAttribute("width",e+""),c.height&&i.setAttribute("height",f+""),i.setAttribute("id",d),c.x&&(u=+c.x),c.y&&(v=+c.y),b.append(i),j=document.createElementNS(t,"g"),j.setAttribute("transform","translate("+u+","+v+")"),i.appendChild(j),c.labels&&(k=a.$eval(c.labels)),c.styles&&(l=a.$eval(c.styles)),c.classes&&(m=a.$eval(c.classes)),c.shapes&&(n=a.$eval(c.shapes));for(var w in k)if(k.hasOwnProperty(w)){var x,y,z,A,B=n[w];r%q===0&&(o=0,p+=s+1.5*s),A=document.createElementNS(t,"g"),A.setAttribute("transform","translate("+o+", "+p+")"),"rect"===B?(x=document.createElementNS(t,"rect"),x.setAttribute("y",0-s/2+""),x.setAttribute("width",h),x.setAttribute("height",h)):"ellipse"===B?(x=document.createElementNS(t,"ellipse"),x.setAttribute("rx",h),x.setAttribute("ry",s+s/2+"")):(x=document.createElementNS(t,"circle"),x.setAttribute("r",s/2+"")),l&&l[w]&&x.setAttribute("style",l[w]),m&&m[w]&&x.setAttribute("class",m[w]),A.appendChild(x),o=o+x.clientWidth+(s+s/2),y=document.createElementNS(t,"text"),y.setAttribute("transform","translate(10, 5)"),y.appendChild(document.createTextNode(k[w])),A.appendChild(y),j.appendChild(A),z=y.clientWidth,o=o+z+(s+.75*s),r++}}}}}).directive("nvd3Legend",[function(){var a,b,c,d;return{restrict:"EA",scope:{data:"=",id:"@",margin:"&",width:"@",height:"@",key:"&",color:"&",align:"@",rightalign:"@",updatestate:"@",radiobuttonmode:"@",x:"&",y:"&"},link:function(e,f,g){e.$watch("data",function(h){if(h){if(e.chart)return d3.select("#"+g.id+" svg").attr("height",c).attr("width",b).datum(h).transition().duration(250).call(e.chart);a=e.$eval(g.margin)||{top:5,right:0,bottom:5,left:0},b=void 0===g.width?f[0].parentElement.offsetWidth-(a.left+a.right):+g.width-(a.left+a.right),c=void 0===g.height?f[0].parentElement.offsetHeight-(a.top+a.bottom):+g.height-(a.top+a.bottom),(void 0===b||0>b)&&(b=400),(void 0===c||0>c)&&(c=20),d=g.id?g.id:"legend-"+Math.random(),nv.addGraph({generate:function(){var d=nv.models.legend().width(b).height(c).margin(a).align(void 0===g.align?!0:"true"===g.align).rightAlign(void 0===g.rightalign?!0:"true"===g.rightalign).updateState(void 0===g.updatestate?!0:"true"===g.updatestate).radioButtonMode(void 0===g.radiobuttonmode?!1:"true"===g.radiobuttonmode).color(void 0===g.color?nv.utils.defaultColor():e.color()).key(void 0===g.key?function(a){return a.key}:e.key());return d3.select("#"+g.id+" svg")[0][0]||d3.select("#"+g.id).append("svg"),d3.select("#"+g.id+" svg").attr("height",c).attr("width",b).datum(h).transition().duration(250).call(d),nv.utils.windowResize(d.update),e.chart=d,d}})}})}}}]),angular.module("nvd3ChartDirectives",[]).directive("nvd3LineChart",[function(){return{restrict:"EA",scope:{data:"=",width:"@",height:"@",id:"@",showlegend:"@",tooltips:"@",showxaxis:"@",showyaxis:"@",rightalignyaxis:"@",defaultstate:"@",nodata:"@",margin:"&",tooltipcontent:"&",color:"&",x:"&",y:"&",forcex:"@",forcey:"@",isArea:"@",interactive:"@",clipedge:"@",clipvoronoi:"@",interpolate:"@",callback:"&",useinteractiveguideline:"@",xaxisorient:"&",xaxisticks:"@",xaxistickvalues:"&xaxistickvalues",xaxisticksubdivide:"&",xaxisticksize:"&",xaxistickpadding:"&",xaxistickformat:"&",xaxislabel:"@",xaxisscale:"&",xaxisdomain:"&",xaxisrange:"&",xaxisrangeband:"&",xaxisrangebands:"&",xaxisshowmaxmin:"@",xaxishighlightzero:"@",xaxisrotatelabels:"@",xaxisrotateylabel:"@",xaxisstaggerlabels:"@",xaxislabeldistance:"@",yaxisorient:"&",yaxisticks:"&",yaxistickvalues:"&yaxistickvalues",yaxisticksubdivide:"&",yaxisticksize:"&",yaxistickpadding:"&",yaxistickformat:"&",yaxislabel:"@",yaxisscale:"&",yaxisdomain:"&",yaxisrange:"&",yaxisrangeband:"&",yaxisrangebands:"&",yaxisshowmaxmin:"@",yaxishighlightzero:"@",yaxisrotatelabels:"@",yaxisrotateylabel:"@",yaxisstaggerlabels:"@",yaxislabeldistance:"@",legendmargin:"&",legendwidth:"@",legendheight:"@",legendkey:"@",legendcolor:"&",legendalign:"@",legendrightalign:"@",legendupdatestate:"@",legendradiobuttonmode:"@",objectequality:"@",transitionduration:"@"},controller:["$scope","$element","$attrs",function(a,b,c){a.d3Call=function(d,e){j(a,c,b,e,d)}}],link:function(a,b,c){a.$watch("data",function(b){if(b){if(a.chart)return a.d3Call(b,a.chart);nv.addGraph({generate:function(){i(a,c);var d=nv.models.lineChart().width(a.width).height(a.height).margin(a.margin).x(void 0===c.x?function(a){return a[0]}:a.x()).y(void 0===c.y?function(a){return a[1]}:a.y()).forceX(void 0===c.forcex?[]:a.$eval(c.forcex)).forceY(void 0===c.forcey?[0]:a.$eval(c.forcey)).showLegend(void 0===c.showlegend?!1:"true"===c.showlegend).tooltips(void 0===c.tooltips?!1:"true"===c.tooltips).showXAxis(void 0===c.showxaxis?!1:"true"===c.showxaxis).showYAxis(void 0===c.showyaxis?!1:"true"===c.showyaxis).rightAlignYAxis(void 0===c.rightalignyaxis?!1:"true"===c.rightalignyaxis).noData(void 0===c.nodata?"No Data Available.":a.nodata).interactive(void 0===c.interactive?!1:"true"===c.interactive).clipEdge(void 0===c.clipedge?!1:"true"===c.clipedge).clipVoronoi(void 0===c.clipvoronoi?!1:"true"===c.clipvoronoi).interpolate(void 0===c.interpolate?"linear":c.interpolate).color(void 0===c.color?nv.utils.defaultColor():a.color()).isArea(void 0===c.isarea?function(a){return a.area}:function(){return"true"===c.isarea});return d.useInteractiveGuideline&&d.useInteractiveGuideline(void 0===c.useinteractiveguideline?!1:"true"===c.useinteractiveguideline),c.tooltipcontent&&d.tooltipContent(a.tooltipcontent()),a.d3Call(b,d),nv.utils.windowResize(d.update),a.chart=d,d},callback:void 0===c.callback?null:a.callback()})}},void 0===c.objectequality?!1:"true"===c.objectequality)}}}]).directive("nvd3CumulativeLineChart",[function(){return{restrict:"EA",scope:{data:"=",width:"@",height:"@",id:"@",showlegend:"@",tooltips:"@",showxaxis:"@",showyaxis:"@",rightalignyaxis:"@",defaultstate:"@",nodata:"@",margin:"&",tooltipcontent:"&",color:"&",x:"&",y:"&",forcex:"@",forcey:"@",isArea:"@",interactive:"@",clipedge:"@",clipvoronoi:"@",usevoronoi:"@",average:"&",rescaley:"@",callback:"&",useinteractiveguideline:"@",xaxisorient:"&",xaxisticks:"&",xaxistickvalues:"&xaxistickvalues",xaxisticksubdivide:"&",xaxisticksize:"&",xaxistickpadding:"&",xaxistickformat:"&",xaxislabel:"@",xaxisscale:"&",xaxisdomain:"&",xaxisrange:"&",xaxisrangeband:"&",xaxisrangebands:"&",xaxisshowmaxmin:"@",xaxishighlightzero:"@",xaxisrotatelabels:"@",xaxisrotateylabel:"@",xaxisstaggerlabels:"@",xaxislabeldistance:"@",yaxisorient:"&",yaxisticks:"&",yaxistickvalues:"&yaxistickvalues",yaxisticksubdivide:"&",yaxisticksize:"&",yaxistickpadding:"&",yaxistickformat:"&",yaxislabel:"@",yaxisscale:"&",yaxisdomain:"&",yaxisrange:"&",yaxisrangeband:"&",yaxisrangebands:"&",yaxisshowmaxmin:"@",yaxishighlightzero:"@",yaxisrotatelabels:"@",yaxisrotateylabel:"@",yaxisstaggerlabels:"@",yaxislabeldistance:"@",legendmargin:"&",legendwidth:"@",legendheight:"@",legendkey:"@",legendcolor:"&",legendalign:"@",legendrightalign:"@",legendupdatestate:"@",legendradiobuttonmode:"@",objectequality:"@",transitionduration:"@"},controller:["$scope","$element","$attrs",function(a,b,c){a.d3Call=function(d,e){j(a,c,b,e,d)}}],link:function(a,b,c){a.$watch("data",function(b){if(b){if(a.chart)return a.d3Call(b,a.chart);nv.addGraph({generate:function(){i(a,c);var d=nv.models.cumulativeLineChart().width(a.width).height(a.height).margin(a.margin).x(void 0===c.x?function(a){return a[0]}:a.x()).y(void 0===c.y?function(a){return a[1]}:a.y()).forceX(void 0===c.forcex?[]:a.$eval(c.forcex)).forceY(void 0===c.forcey?[0]:a.$eval(c.forcey)).showLegend(void 0===c.showlegend?!1:"true"===c.showlegend).tooltips(void 0===c.tooltips?!1:"true"===c.tooltips).showXAxis(void 0===c.showxaxis?!1:"true"===c.showxaxis).showYAxis(void 0===c.showyaxis?!1:"true"===c.showyaxis).rightAlignYAxis(void 0===c.rightalignyaxis?!1:"true"===c.rightalignyaxis).noData(void 0===c.nodata?"No Data Available.":a.nodata).interactive(void 0===c.interactive?!1:"true"===c.interactive).clipEdge(void 0===c.clipedge?!1:"true"===c.clipedge).clipVoronoi(void 0===c.clipvoronoi?!1:"true"===c.clipvoronoi).useVoronoi(void 0===c.usevoronoi?!1:"true"===c.usevoronoi).average(void 0===c.average?function(a){
return a.average}:a.average()).color(void 0===c.color?d3.scale.category10().range():a.color()).isArea(void 0===c.isarea?function(a){return a.area}:"true"===c.isarea);return d.useInteractiveGuideline&&d.useInteractiveGuideline(void 0===c.useinteractiveguideline?!1:"true"===c.useinteractiveguideline),c.tooltipcontent&&d.tooltipContent(a.tooltipcontent()),a.d3Call(b,d),nv.utils.windowResize(d.update),a.chart=d,d},callback:void 0===c.callback?null:a.callback()})}},void 0===c.objectequality?!1:"true"===c.objectequality)}}}]).directive("nvd3StackedAreaChart",[function(){return{restrict:"EA",scope:{data:"=",width:"@",height:"@",id:"@",showlegend:"@",tooltips:"@",showcontrols:"@",nodata:"@",margin:"&",tooltipcontent:"&",color:"&",x:"&",y:"&",forcex:"@",forcey:"@",forcesize:"@",interactive:"@",usevoronoi:"@",clipedge:"@",interpolate:"@",style:"@",order:"@",offset:"@",size:"&",xScale:"&",yScale:"&",xDomain:"&",yDomain:"&",xRange:"&",yRange:"&",sizeDomain:"&",callback:"&",showxaxis:"&",xaxisorient:"&",xaxisticks:"&",xaxistickvalues:"&xaxistickvalues",xaxisticksubdivide:"&",xaxisticksize:"&",xaxistickpadding:"&",xaxistickformat:"&",xaxislabel:"@",xaxisscale:"&",xaxisdomain:"&",xaxisrange:"&",xaxisrangeband:"&",xaxisrangebands:"&",xaxisshowmaxmin:"@",xaxishighlightzero:"@",xaxisrotatelabels:"@",xaxisrotateylabel:"@",xaxisstaggerlabels:"@",xaxisaxislabeldistance:"@",showyaxis:"&",useinteractiveguideline:"@",yaxisorient:"&",yaxisticks:"&",yaxistickvalues:"&yaxistickvalues",yaxisticksubdivide:"&",yaxisticksize:"&",yaxistickpadding:"&",yaxistickformat:"&",yaxislabel:"@",yaxisscale:"&",yaxisdomain:"&",yaxisrange:"&",yaxisrangeband:"&",yaxisrangebands:"&",yaxisshowmaxmin:"@",yaxishighlightzero:"@",yaxisrotatelabels:"@",yaxisrotateylabel:"@",yaxisstaggerlabels:"@",yaxislabeldistance:"@",legendmargin:"&",legendwidth:"@",legendheight:"@",legendkey:"@",legendcolor:"&",legendalign:"@",legendrightalign:"@",legendupdatestate:"@",legendradiobuttonmode:"@",objectequality:"@",transitionduration:"@"},controller:["$scope","$element","$attrs",function(a,b,c){a.d3Call=function(d,e){j(a,c,b,e,d)}}],link:function(a,b,c){a.$watch("data",function(b){if(b){if(a.chart)return a.d3Call(b,a.chart);nv.addGraph({generate:function(){i(a,c);var d=nv.models.stackedAreaChart().width(a.width).height(a.height).margin(a.margin).x(void 0===c.x?function(a){return a[0]}:a.x()).y(void 0===c.y?function(a){return a[1]}:a.y()).forceX(void 0===c.forcex?[]:a.$eval(c.forcex)).forceY(void 0===c.forcey?[0]:a.$eval(c.forcey)).size(void 0===c.size?function(a){return void 0===a.size?1:a.size}:a.size()).forceSize(void 0===c.forcesize?[]:a.$eval(c.forcesize)).showLegend(void 0===c.showlegend?!1:"true"===c.showlegend).showControls(void 0===c.showcontrols?!1:"true"===c.showcontrols).showXAxis(void 0===c.showxaxis?!1:"true"===c.showxaxis).showYAxis(void 0===c.showyaxis?!1:"true"===c.showyaxis).tooltips(void 0===c.tooltips?!1:"true"===c.tooltips).noData(void 0===c.nodata?"No Data Available.":a.nodata).interactive(void 0===c.interactive?!1:"true"===c.interactive).clipEdge(void 0===c.clipedge?!1:"true"===c.clipedge).color(void 0===c.color?nv.utils.defaultColor():a.color());return d.useInteractiveGuideline&&d.useInteractiveGuideline(void 0===c.useinteractiveguideline?!1:"true"===c.useinteractiveguideline),c.usevoronoi&&d.useVoronoi("true"===c.usevoronoi),c.style&&d.style(c.style),c.order&&d.order(c.order),c.offset&&d.offset(c.offset),c.interpolate&&d.interpolate(c.interpolate),c.tooltipcontent&&d.tooltipContent(a.tooltipcontent()),c.xscale&&d.xScale(a.xscale()),c.yscale&&d.yScale(a.yscale()),c.xdomain&&(Array.isArray(a.$eval(c.xdomain))?d.xDomain(a.$eval(c.xdomain)):"function"==typeof a.xdomain()&&d.xDomain(a.xdomain())),c.ydomain&&(Array.isArray(a.$eval(c.ydomain))?d.yDomain(a.$eval(c.ydomain)):"function"==typeof a.ydomain()&&d.yDomain(a.ydomain())),c.sizedomain&&d.sizeDomain(a.sizedomain()),a.d3Call(b,d),nv.utils.windowResize(d.update),a.chart=d,d},callback:void 0===c.callback?null:a.callback()})}},void 0===c.objectequality?!1:"true"===c.objectequality)}}}]).directive("nvd3MultiBarChart",[function(){return{restrict:"EA",scope:{data:"=",width:"@",height:"@",id:"@",showlegend:"@",tooltips:"@",tooltipcontent:"&",color:"&",showcontrols:"@",nodata:"@",reducexticks:"@",staggerlabels:"@",rotatelabels:"@",margin:"&",x:"&",y:"&",forcey:"@",delay:"@",stacked:"@",callback:"&",showxaxis:"&",xaxisorient:"&",xaxisticks:"&",xaxistickvalues:"&xaxistickvalues",xaxisticksubdivide:"&",xaxisticksize:"&",xaxistickpadding:"&",xaxistickformat:"&",xaxislabel:"@",xaxisscale:"&",xaxisdomain:"&",xaxisrange:"&",xaxisrangeband:"&",xaxisrangebands:"&",xaxisshowmaxmin:"@",xaxishighlightzero:"@",xaxisrotatelabels:"@",xaxisrotateylabel:"@",xaxisstaggerlabels:"@",xaxisaxislabeldistance:"@",showyaxis:"&",yaxisorient:"&",yaxisticks:"&",yaxistickvalues:"&yaxistickvalues",yaxisticksubdivide:"&",yaxisticksize:"&",yaxistickpadding:"&",yaxistickformat:"&",yaxislabel:"@",yaxisscale:"&",yaxisdomain:"&",yaxisrange:"&",yaxisrangeband:"&",yaxisrangebands:"&",yaxisshowmaxmin:"@",yaxishighlightzero:"@",yaxisrotatelabels:"@",yaxisrotateylabel:"@",yaxisstaggerlabels:"@",yaxislabeldistance:"@",legendmargin:"&",legendwidth:"@",legendheight:"@",legendkey:"@",legendcolor:"&",legendalign:"@",legendrightalign:"@",legendupdatestate:"@",legendradiobuttonmode:"@",objectequality:"@",transitionduration:"@"},controller:["$scope","$element","$attrs",function(a,b,c){a.d3Call=function(d,e){j(a,c,b,e,d)}}],link:function(a,b,c){a.$watch("data",function(b){if(b){if(a.chart)return a.d3Call(b,a.chart);nv.addGraph({generate:function(){i(a,c);var d=nv.models.multiBarChart().width(a.width).height(a.height).margin(a.margin).x(void 0===c.x?function(a){return a[0]}:a.x()).y(void 0===c.y?function(a){return a[1]}:a.y()).forceY(void 0===c.forcey?[0]:a.$eval(c.forcey)).showLegend(void 0===c.showlegend?!1:"true"===c.showlegend).showControls(void 0===c.showcontrols?!1:"true"===c.showcontrols).showXAxis(void 0===c.showxaxis?!1:"true"===c.showxaxis).showYAxis(void 0===c.showyaxis?!1:"true"===c.showyaxis).tooltips(void 0===c.tooltips?!1:"true"===c.tooltips).reduceXTicks(void 0===c.reducexticks?!1:"true"===c.reducexticks).staggerLabels(void 0===c.staggerlabels?!1:"true"===c.staggerlabels).noData(void 0===c.nodata?"No Data Available.":a.nodata).rotateLabels(void 0===c.rotatelabels?0:c.rotatelabels).color(void 0===c.color?nv.utils.defaultColor():a.color()).delay(void 0===c.delay?1200:c.delay).stacked(void 0===c.stacked?!1:"true"===c.stacked);return c.tooltipcontent&&d.tooltipContent(a.tooltipcontent()),a.d3Call(b,d),nv.utils.windowResize(d.update),a.chart=d,d},callback:void 0===c.callback?null:a.callback()})}},void 0===c.objectequality?!1:"true"===c.objectequality)}}}]).directive("nvd3DiscreteBarChart",[function(){return{restrict:"EA",scope:{data:"=",width:"@",height:"@",id:"@",tooltips:"@",showxaxis:"@",showyaxis:"@",tooltipcontent:"&",staggerlabels:"@",color:"&",margin:"&",nodata:"@",x:"&",y:"&",forcey:"@",showvalues:"@",valueformat:"&",callback:"&",xaxisorient:"&",xaxisticks:"&",xaxistickvalues:"&xaxistickvalues",xaxisticksubdivide:"&",xaxisticksize:"&",xaxistickpadding:"&",xaxistickformat:"&",xaxislabel:"@",xaxisscale:"&",xaxisdomain:"&",xaxisrange:"&",xaxisrangeband:"&",xaxisrangebands:"&",xaxisshowmaxmin:"@",xaxishighlightzero:"@",xaxisrotatelabels:"@",xaxisrotateylabel:"@",xaxisstaggerlabels:"@",xaxisaxislabeldistance:"@",yaxisorient:"&",yaxisticks:"&",yaxistickvalues:"&yaxistickvalues",yaxisticksubdivide:"&",yaxisticksize:"&",yaxistickpadding:"&",yaxistickformat:"&",yaxislabel:"@",yaxisscale:"&",yaxisdomain:"&",yaxisrange:"&",yaxisrangeband:"&",yaxisrangebands:"&",yaxisshowmaxmin:"@",yaxishighlightzero:"@",yaxisrotatelabels:"@",yaxisrotateylabel:"@",yaxisstaggerlabels:"@",yaxislabeldistance:"@",legendmargin:"&",legendwidth:"@",legendheight:"@",legendkey:"@",legendcolor:"&",legendalign:"@",legendrightalign:"@",legendupdatestate:"@",legendradiobuttonmode:"@",objectequality:"@",transitionduration:"@"},controller:["$scope","$element","$attrs",function(a,b,c){a.d3Call=function(d,e){j(a,c,b,e,d)}}],link:function(a,b,c){a.$watch("data",function(b){if(b){if(a.chart)return a.d3Call(b,a.chart);nv.addGraph({generate:function(){i(a,c);var d=nv.models.discreteBarChart().width(a.width).height(a.height).margin(a.margin).x(void 0===c.x?function(a){return a[0]}:a.x()).y(void 0===c.y?function(a){return a[1]}:a.y()).forceY(void 0===c.forcey?[0]:a.$eval(c.forcey)).showValues(void 0===c.showvalues?!1:"true"===c.showvalues).tooltips(void 0===c.tooltips?!1:"true"===c.tooltips).showXAxis(void 0===c.showxaxis?!1:"true"===c.showxaxis).showYAxis(void 0===c.showyaxis?!1:"true"===c.showyaxis).noData(void 0===c.nodata?"No Data Available.":a.nodata).staggerLabels(void 0===c.staggerlabels?!1:"true"===c.staggerlabels).color(void 0===c.color?nv.utils.defaultColor():a.color());return c.tooltipcontent&&d.tooltipContent(a.tooltipcontent()),c.valueformat&&d.valueFormat(a.valueformat()),a.d3Call(b,d),nv.utils.windowResize(d.update),a.chart=d,d},callback:void 0===c.callback?null:a.callback()})}},void 0===c.objectequality?!1:"true"===c.objectequality)}}}]).directive("nvd3HistoricalBarChart",[function(){return{restrict:"EA",scope:{data:"=",width:"@",height:"@",id:"@",tooltips:"@",tooltipcontent:"&",color:"&",margin:"&",nodata:"@",x:"&",y:"&",forcey:"@",isarea:"@",interactive:"@",clipedge:"@",clipvoronoi:"@",interpolate:"@",highlightPoint:"@",clearHighlights:"@",callback:"&",useinteractiveguideline:"@",xaxisorient:"&",xaxisticks:"&",xaxistickvalues:"&xaxistickvalues",xaxisticksubdivide:"&",xaxisticksize:"&",xaxistickpadding:"&",xaxistickformat:"&",xaxislabel:"@",xaxisscale:"&",xaxisdomain:"&",xaxisrange:"&",xaxisrangeband:"&",xaxisrangebands:"&",xaxisshowmaxmin:"@",xaxishighlightzero:"@",xaxisrotatelabels:"@",xaxisrotateylabel:"@",xaxisstaggerlabels:"@",xaxisaxislabeldistance:"@",yaxisorient:"&",yaxisticks:"&",yaxistickvalues:"&yaxistickvalues",yaxisticksubdivide:"&",yaxisticksize:"&",yaxistickpadding:"&",yaxistickformat:"&",yaxislabel:"@",yaxisscale:"&",yaxisdomain:"&",yaxisrange:"&",yaxisrangeband:"&",yaxisrangebands:"&",yaxisshowmaxmin:"@",yaxishighlightzero:"@",yaxisrotatelabels:"@",yaxisrotateylabel:"@",yaxisstaggerlabels:"@",yaxislabeldistance:"@",legendmargin:"&",legendwidth:"@",legendheight:"@",legendkey:"@",legendcolor:"&",legendalign:"@",legendrightalign:"@",legendupdatestate:"@",legendradiobuttonmode:"@",objectequality:"@",transitionduration:"@"},controller:["$scope","$element","$attrs",function(a,b,c){a.d3Call=function(d,e){j(a,c,b,e,d)}}],link:function(a,b,c){a.$watch("data",function(b){if(b){if(a.chart)return a.d3Call(b,a.chart);nv.addGraph({generate:function(){i(a,c);var d=nv.models.historicalBarChart().width(a.width).height(a.height).margin(a.margin).x(void 0===c.x?function(a){return a[0]}:a.x()).y(void 0===c.y?function(a){return a[1]}:a.y()).forceY(void 0===c.forcey?[0]:a.$eval(c.forcey)).tooltips(void 0===c.tooltips?!1:"true"===c.tooltips).noData(void 0===c.nodata?"No Data Available.":a.nodata).interactive(void 0===c.interactive?!1:"true"===c.interactive).color(void 0===c.color?nv.utils.defaultColor():a.color());return d.useInteractiveGuideline&&d.useInteractiveGuideline(void 0===c.useinteractiveguideline?!1:"true"===c.useinteractiveguideline),c.tooltipcontent&&d.tooltipContent(a.tooltipcontent()),c.valueformat&&d.valueFormat(a.valueformat()),a.d3Call(b,d),nv.utils.windowResize(d.update),a.chart=d,d},callback:void 0===c.callback?null:a.callback()})}},void 0===c.objectequality?!1:"true"===c.objectequality)}}}]).directive("nvd3MultiBarHorizontalChart",[function(){return{restrict:"EA",scope:{data:"=",width:"@",height:"@",id:"@",showlegend:"@",tooltips:"@",tooltipcontent:"&",color:"&",showcontrols:"@",margin:"&",nodata:"@",x:"&",y:"&",forcey:"@",stacked:"@",showvalues:"@",valueformat:"&",callback:"&",xaxisorient:"&",xaxisticks:"&",xaxistickvalues:"&xaxistickvalues",xaxisticksubdivide:"&",xaxisticksize:"&",xaxistickpadding:"&",xaxistickformat:"&",xaxislabel:"@",xaxisscale:"&",xaxisdomain:"&",xaxisrange:"&",xaxisrangeband:"&",xaxisrangebands:"&",xaxisshowmaxmin:"@",xaxishighlightzero:"@",xaxisrotatelabels:"@",xaxisrotateylabel:"@",xaxisstaggerlabels:"@",xaxisaxislabeldistance:"@",yaxisorient:"&",yaxisticks:"&",yaxistickvalues:"&yaxistickvalues",yaxisticksubdivide:"&",yaxisticksize:"&",yaxistickpadding:"&",yaxistickformat:"&",yaxislabel:"@",yaxisscale:"&",yaxisdomain:"&",yaxisrange:"&",yaxisrangeband:"&",yaxisrangebands:"&",yaxisshowmaxmin:"@",yaxishighlightzero:"@",yaxisrotatelabels:"@",yaxisrotateylabel:"@",yaxisstaggerlabels:"@",yaxislabeldistance:"@",legendmargin:"&",legendwidth:"@",legendheight:"@",legendkey:"@",legendcolor:"&",legendalign:"@",legendrightalign:"@",legendupdatestate:"@",legendradiobuttonmode:"@",objectequality:"@",transitionduration:"@"},controller:["$scope","$element","$attrs",function(a,b,c){a.d3Call=function(d,e){j(a,c,b,e,d)}}],link:function(a,b,c){a.$watch("data",function(b){if(b){if(a.chart)return a.d3Call(b,a.chart);nv.addGraph({generate:function(){i(a,c);var d=nv.models.multiBarHorizontalChart().width(a.width).height(a.height).margin(a.margin).x(void 0===c.x?function(a){return a[0]}:a.x()).y(void 0===c.y?function(a){return a[1]}:a.y()).showXAxis(void 0===c.showxaxis?!1:"true"===c.showxaxis).showYAxis(void 0===c.showyaxis?!1:"true"===c.showyaxis).forceY(void 0===c.forcey?[0]:a.$eval(c.forcey)).tooltips(void 0===c.tooltips?!1:"true"===c.tooltips).noData(void 0===c.nodata?"No Data Available.":a.nodata).color(void 0===c.color?nv.utils.defaultColor():a.color()).showLegend(void 0===c.showlegend?!1:"true"===c.showlegend).showControls(void 0===c.showcontrols?!1:"true"===c.showcontrols).showValues(void 0===c.showvalues?!1:"true"===c.showvalues).stacked(void 0===c.stacked?!1:"true"===c.stacked);return c.tooltipcontent&&d.tooltipContent(a.tooltipcontent()),c.valueformat&&d.valueFormat(a.valueformat()),a.d3Call(b,d),nv.utils.windowResize(d.update),a.chart=d,d},callback:void 0===c.callback?null:a.callback()})}},void 0===c.objectequality?!1:"true"===c.objectequality)}}}]).directive("nvd3PieChart",[function(){return{restrict:"EA",scope:{data:"=",width:"@",height:"@",id:"@",showlabels:"@",showlegend:"@",donutLabelsOutside:"@",pieLabelsOutside:"@",labelType:"@",nodata:"@",margin:"&",x:"&",y:"&",color:"&",donut:"@",donutRatio:"@",labelthreshold:"@",description:"&",tooltips:"@",tooltipcontent:"&",valueFormat:"&",callback:"&",legendmargin:"&",legendwidth:"@",legendheight:"@",legendkey:"@",legendcolor:"&",legendalign:"@",legendrightalign:"@",legendupdatestate:"@",legendradiobuttonmode:"@",objectequality:"@",transitionduration:"@"},controller:["$scope","$element","$attrs",function(a,b,c){a.d3Call=function(d,e){j(a,c,b,e,d)}}],link:function(a,b,c){a.$watch("data",function(b){if(b){if(a.chart)return a.d3Call(b,a.chart);nv.addGraph({generate:function(){i(a,c);var d=nv.models.pieChart().x(void 0===c.x?function(a){return a[0]}:a.x()).y(void 0===c.y?function(a){return a[1]}:a.y()).width(a.width).height(a.height).margin(a.margin).tooltips(void 0===c.tooltips?!1:"true"===c.tooltips).noData(void 0===c.nodata?"No Data Available.":a.nodata).showLabels(void 0===c.showlabels?!1:"true"===c.showlabels).labelThreshold(void 0===c.labelthreshold?.02:c.labelthreshold).labelType(void 0===c.labeltype?"key":c.labeltype).pieLabelsOutside(void 0===c.pielabelsoutside?!0:"true"===c.pielabelsoutside).valueFormat(void 0===c.valueformat?d3.format(",.2f"):c.valueformat).showLegend(void 0===c.showlegend?!1:"true"===c.showlegend).description(void 0===c.description?function(a){return a.description}:a.description()).color(void 0===c.color?nv.utils.defaultColor():a.color()).donutLabelsOutside(void 0===c.donutlabelsoutside?!1:"true"===c.donutlabelsoutside).donut(void 0===c.donut?!1:"true"===c.donut).donutRatio(void 0===c.donutratio?.5:c.donutratio);return c.tooltipcontent&&d.tooltipContent(a.tooltipcontent()),a.d3Call(b,d),nv.utils.windowResize(d.update),a.chart=d,d},callback:void 0===c.callback?null:a.callback()})}},void 0===c.objectequality?!1:"true"===c.objectequality)}}}]).directive("nvd3ScatterChart",[function(){return{restrict:"EA",scope:{data:"=",width:"@",height:"@",id:"@",showlegend:"@",tooltips:"@",showcontrols:"@",showDistX:"@",showDistY:"@",rightAlignYAxis:"@",fisheye:"@",xPadding:"@",yPadding:"@",tooltipContent:"&",tooltipXContent:"&",tooltipYContent:"&",color:"&",margin:"&",nodata:"@",transitionDuration:"@",shape:"&",onlyCircles:"@",interactive:"@",x:"&",y:"&",size:"&",forceX:"@",forceY:"@",forceSize:"@",xrange:"&",xdomain:"&",xscale:"&",yrange:"&",ydomain:"&",yscale:"&",sizerange:"&",sizedomain:"&",zscale:"&",callback:"&",xaxisorient:"&",xaxisticks:"&",xaxistickvalues:"&xaxistickvalues",xaxisticksubdivide:"&",xaxisticksize:"&",xaxistickpadding:"&",xaxistickformat:"&",xaxislabel:"@",xaxisscale:"&",xaxisdomain:"&",xaxisrange:"&",xaxisrangeband:"&",xaxisrangebands:"&",xaxisshowmaxmin:"@",xaxishighlightzero:"@",xaxisrotatelabels:"@",xaxisrotateylabel:"@",xaxisstaggerlabels:"@",xaxisaxislabeldistance:"@",yaxisorient:"&",yaxisticks:"&",yaxistickvalues:"&yaxistickvalues",yaxisticksubdivide:"&",yaxisticksize:"&",yaxistickpadding:"&",yaxistickformat:"&",yaxislabel:"@",yaxisscale:"&",yaxisdomain:"&",yaxisrange:"&",yaxisrangeband:"&",yaxisrangebands:"&",yaxisshowmaxmin:"@",yaxishighlightzero:"@",yaxisrotatelabels:"@",yaxisrotateylabel:"@",yaxisstaggerlabels:"@",yaxislabeldistance:"@",legendmargin:"&",legendwidth:"@",legendheight:"@",legendkey:"@",legendcolor:"&",legendalign:"@",legendrightalign:"@",legendupdatestate:"@",legendradiobuttonmode:"@",objectequality:"@",transitionduration:"@"},controller:["$scope","$element","$attrs",function(a,b,c){a.d3Call=function(d,e){j(a,c,b,e,d)}}],link:function(a,b,c){a.$watch("data",function(b){if(b){if(a.chart)return a.d3Call(b,a.chart);nv.addGraph({generate:function(){i(a,c);var d=nv.models.scatterChart().width(a.width).height(a.height).margin(a.margin).x(void 0===c.x?function(a){return a.x}:a.x()).y(void 0===c.y?function(a){return a.y}:a.y()).size(void 0===c.size?function(a){return void 0===a.size?1:a.size}:a.size()).forceX(void 0===c.forcex?[]:a.$eval(c.forcex)).forceY(void 0===c.forcey?[]:a.$eval(c.forcey)).forceSize(void 0===c.forcesize?[]:a.$eval(c.forcesize)).interactive(void 0===c.interactive?!1:"true"===c.interactive).tooltips(void 0===c.tooltips?!1:"true"===c.tooltips).tooltipContent(void 0===c.tooltipContent?null:a.tooltipContent()).tooltipXContent(void 0===c.tooltipxcontent?function(a,b){return"<strong>"+b+"</strong>"}:a.tooltipXContent()).tooltipYContent(void 0===c.tooltipycontent?function(a,b,c){return"<strong>"+c+"</strong>"}:a.tooltipYContent()).showControls(void 0===c.showcontrols?!1:"true"===c.showcontrols).showLegend(void 0===c.showlegend?!1:"true"===c.showlegend).showDistX(void 0===c.showdistx?!1:"true"===c.showdistx).showDistY(void 0===c.showdisty?!1:"true"===c.showdisty).xPadding(void 0===c.xpadding?0:+c.xpadding).yPadding(void 0===c.ypadding?0:+c.ypadding).fisheye(void 0===c.fisheye?0:+c.fisheye).noData(void 0===c.nodata?"No Data Available.":a.nodata).color(void 0===c.color?nv.utils.defaultColor():a.color()).transitionDuration(void 0===c.transitionduration?250:+c.transitionduration);return c.shape&&(d.scatter.onlyCircles(!1),d.scatter.shape(void 0===c.shape?function(a){return a.shape||"circle"}:a.shape())),c.xdomain&&(Array.isArray(a.$eval(c.xdomain))?d.xDomain(a.$eval(c.xdomain)):"function"==typeof a.xdomain()&&d.xDomain(a.xdomain())),c.ydomain&&(Array.isArray(a.$eval(c.ydomain))?d.yDomain(a.$eval(c.ydomain)):"function"==typeof a.ydomain()&&d.yDomain(a.ydomain())),c.xscale&&(d.xDomain(a.xdomain()),d.xRange(a.xrange()),d.xScale(a.xscale())),c.yscale&&(d.yDomain(a.ydomain()),d.yRange(a.yrange()),d.yScale(a.yscale())),c.zscale&&(d.sizeDomain(a.sizedomain()),d.sizeRange(a.sizerange()),d.zScale(a.zscale())),a.d3Call(b,d),nv.utils.windowResize(d.update),a.chart=d,d},callback:void 0===c.callback?null:a.callback()})}},void 0===c.objectequality?!1:"true"===c.objectequality)}}}]).directive("nvd3ScatterPlusLineChart",[function(){return{restrict:"EA",scope:{data:"=",width:"@",height:"@",id:"@",callback:"&"},controller:["$scope","$element","$attrs",function(a,b,c){a.d3Call=function(d,e){j(a,c,b,e,d)}}],link:function(a,b,c){a.$watch("data",function(b){if(b){if(a.chart)return a.d3Call(b,a.chart);nv.addGraph({generate:function(){i(a,c);var d=nv.models.scatterPlusLineChart().width(a.width).height(a.height).margin(a.margin).x(void 0===c.x?function(a){return a.x}:a.x()).y(void 0===c.y?function(a){return a.y}:a.y()).size(void 0===c.size?function(a){return void 0===a.size?1:a.size}:a.size()).interactive(void 0===c.interactive?!1:"true"===c.interactive).tooltips(void 0===c.tooltips?!1:"true"===c.tooltips).tooltipContent(void 0===c.tooltipContent?null:a.tooltipContent()).tooltipXContent(void 0===c.tooltipxcontent?function(a,b){return"<strong>"+b+"</strong>"}:a.tooltipXContent()).tooltipYContent(void 0===c.tooltipycontent?function(a,b,c){return"<strong>"+c+"</strong>"}:a.tooltipYContent()).showControls(void 0===c.showcontrols?!1:"true"===c.showcontrols).showLegend(void 0===c.showlegend?!1:"true"===c.showlegend).showDistX(void 0===c.showdistx?!1:"true"===c.showdistx).showDistY(void 0===c.showdisty?!1:"true"===c.showdisty).xPadding(void 0===c.xpadding?0:+c.xpadding).yPadding(void 0===c.ypadding?0:+c.ypadding).fisheye(void 0===c.fisheye?0:+c.fisheye).noData(void 0===c.nodata?"No Data Available.":a.nodata).color(void 0===c.color?nv.utils.defaultColor():a.color()).transitionDuration(void 0===c.transitionduration?250:+c.transitionduration);return c.shape&&(d.scatter.onlyCircles(!1),d.scatter.shape(void 0===c.shape?function(a){return a.shape||"circle"}:a.shape())),a.d3Call(b,d),nv.utils.windowResize(d.update),a.chart=d,d},callback:void 0===c.callback?null:a.callback()})}})}}}]).directive("nvd3LinePlusBarChart",[function(){return{restrict:"EA",scope:{data:"=",width:"@",height:"@",id:"@",showlegend:"@",tooltips:"@",showxaxis:"@",showyaxis:"@",forceX:"@",forceY:"@",forceY2:"@",rightalignyaxis:"@",defaultstate:"@",nodata:"@",margin:"&",tooltipcontent:"&",color:"&",x:"&",y:"&",clipvoronoi:"@",interpolate:"@",callback:"&",xaxisorient:"&",xaxisticks:"&",xaxistickvalues:"&xaxistickvalues",xaxisticksubdivide:"&",xaxisticksize:"&",xaxistickpadding:"&",xaxistickformat:"&",xaxislabel:"@",xaxisscale:"&",xaxisdomain:"&",xaxisrange:"&",xaxisrangeband:"&",xaxisrangebands:"&",xaxisshowmaxmin:"@",xaxishighlightzero:"@",xaxisrotatelabels:"@",xaxisrotateylabel:"@",xaxisstaggerlabels:"@",xaxisaxislabeldistance:"@",y1axisorient:"&",y1axisticks:"&",y1axistickvalues:"&y1axistickvalues",y1axisticksubdivide:"&",y1axisticksize:"&",y1axistickpadding:"&",y1axistickformat:"&",y1axislabel:"@",y1axisscale:"&",y1axisdomain:"&",y1axisrange:"&",y1axisrangeband:"&",y1axisrangebands:"&",y1axisshowmaxmin:"@",y1axishighlightzero:"@",y1axisrotatelabels:"@",y1axisrotateylabel:"@",y1axisstaggerlabels:"@",y1axisaxislabeldistance:"@",y2axisorient:"&",y2axisticks:"&",y2axistickvalues:"&y2axistickvalues",y2axisticksubdivide:"&",y2axisticksize:"&",y2axistickpadding:"&",y2axistickformat:"&",y2axislabel:"@",y2axisscale:"&",y2axisdomain:"&",y2axisrange:"&",y2axisrangeband:"&",y2axisrangebands:"&",y2axisshowmaxmin:"@",y2axishighlightzero:"@",y2axisrotatelabels:"@",y2axisrotateylabel:"@",y2axisstaggerlabels:"@",y2axisaxislabeldistance:"@",legendmargin:"&",legendwidth:"@",legendheight:"@",legendkey:"@",legendcolor:"&",legendalign:"@",legendrightalign:"@",legendupdatestate:"@",legendradiobuttonmode:"@",objectequality:"@",transitionduration:"@"},controller:["$scope","$element","$attrs",function(a,b,c){a.d3Call=function(d,e){j(a,c,b,e,d)}}],link:function(a,b,c){a.$watch("data",function(b){if(b){if(a.chart)return a.d3Call(b,a.chart);nv.addGraph({generate:function(){i(a,c);var d=nv.models.linePlusBarChart().width(a.width).height(a.height).margin(a.margin).x(void 0===c.x?function(a){return a[0]}:a.x()).y(void 0===c.y?function(a){return a[1]}:a.y()).showLegend(void 0===c.showlegend?!1:"true"===c.showlegend).tooltips(void 0===c.tooltips?!1:"true"===c.tooltips).noData(void 0===c.nodata?"No Data Available.":a.nodata).interpolate(void 0===c.interpolate?"linear":c.interpolate).color(void 0===c.color?nv.utils.defaultColor():a.color());return c.forcex&&(d.lines.forceX(a.$eval(c.forcex)),d.bars.forceX(a.$eval(c.forcex))),c.forcey&&(d.lines.forceY(a.$eval(c.forcey)),d.bars.forceY(a.$eval(c.forcey))),c.tooltipcontent&&d.tooltipContent(a.tooltipcontent()),a.d3Call(b,d),nv.utils.windowResize(d.update),a.chart=d,d},callback:void 0===c.callback?null:a.callback()})}},void 0===c.objectequality?!1:"true"===c.objectequality)}}}]).directive("nvd3LineWithFocusChart",[function(){return{restrict:"EA",scope:{data:"=",width:"@",height:"@",height2:"@",id:"@",showlegend:"@",tooltips:"@",showxaxis:"@",showyaxis:"@",rightalignyaxis:"@",defaultstate:"@",nodata:"@",margin:"&",margin2:"&",tooltipcontent:"&",color:"&",x:"&",y:"&",forceX:"@",forceY:"@",clipedge:"@",clipvoronoi:"@",interpolate:"@",isArea:"@",size:"&",defined:"&",interactive:"@",callback:"&",xaxisorient:"&",xaxisticks:"&",xaxistickvalues:"&xaxistickvalues",xaxisticksubdivide:"&",xaxisticksize:"&",xaxistickpadding:"&",xaxistickformat:"&",xaxislabel:"@",xaxisscale:"&",xaxisdomain:"&",xaxisrange:"&",xaxisrangeband:"&",xaxisrangebands:"&",xaxisshowmaxmin:"@",xaxishighlightzero:"@",xaxisrotatelabels:"@",xaxisrotateylabel:"@",xaxisstaggerlabels:"@",xaxisaxislabeldistance:"@",x2axisorient:"&",x2axisticks:"&",x2axistickvalues:"&xaxistickvalues",x2axisticksubdivide:"&",x2axisticksize:"&",x2axistickpadding:"&",x2axistickformat:"&",x2axislabel:"@",x2axisscale:"&",x2axisdomain:"&",x2axisrange:"&",x2axisrangeband:"&",x2axisrangebands:"&",x2axisshowmaxmin:"@",x2axishighlightzero:"@",x2axisrotatelables:"@",x2axisrotateylabel:"@",x2axisstaggerlabels:"@",yaxisorient:"&",yaxisticks:"&",yaxistickvalues:"&yaxistickvalues",yaxisticksubdivide:"&",yaxisticksize:"&",yaxistickpadding:"&",yaxistickformat:"&",yaxislabel:"@",yaxisscale:"&",yaxisdomain:"&",yaxisrange:"&",yaxisrangeband:"&",yaxisrangebands:"&",yaxisshowmaxmin:"@",yaxishighlightzero:"@",yaxisrotatelabels:"@",yaxisrotateylabel:"@",yaxisstaggerlabels:"@",yaxislabeldistance:"@",y2axisorient:"&",y2axisticks:"&",y2axistickvalues:"&",y2axisticksubdivide:"&",y2axisticksize:"&",y2axistickpadding:"&",y2axistickformat:"&",y2axislabel:"@",y2axisscale:"&",y2axisdomain:"&",y2axisrange:"&",y2axisrangeband:"&",y2axisrangebands:"&",y2axisshowmaxmin:"@",y2axishighlightzero:"@",y2axisrotatelabels:"@",y2axisrotateylabel:"@",y2axisstaggerlabels:"@",legendmargin:"&",legendwidth:"@",legendheight:"@",legendkey:"@",legendcolor:"&",legendalign:"@",legendrightalign:"@",legendupdatestate:"@",legendradiobuttonmode:"@",objectequality:"@",transitionduration:"@"},controller:["$scope","$element","$attrs",function(a,b,c){a.d3Call=function(d,e){j(a,c,b,e,d)}}],link:function(a,b,c){a.$watch("data",function(b){if(b){if(a.chart)return a.d3Call(b,a.chart);nv.addGraph({generate:function(){if(i(a,c),c.margin2){var d=a.$eval(c.margin2);"object"!=typeof d&&(d={left:d,top:d,bottom:d,right:d}),a.margin2=d}else a.margin2={top:0,right:30,bottom:20,left:60};var e=nv.models.lineWithFocusChart().width(a.width).height(a.height).height2(void 0===c.height2?100:+c.height2).margin(a.margin).margin2(a.margin2).x(void 0===c.x?function(a){return a[0]}:a.x()).y(void 0===c.y?function(a){return a[1]}:a.y()).forceX(void 0===c.forcex?[]:a.$eval(c.forcex)).forceY(void 0===c.forcey?[]:a.$eval(c.forcey)).showLegend(void 0===c.showlegend?!1:"true"===c.showlegend).tooltips(void 0===c.tooltips?!1:"true"===c.tooltips).noData(void 0===c.nodata?"No Data Available.":a.nodata).color(void 0===c.color?nv.utils.defaultColor():a.color()).isArea(void 0===c.isarea?function(a){return a.area}:function(){return"true"===c.isarea}).size(void 0===c.size?function(a){return void 0===a.size?1:a.size}:a.size()).interactive(void 0===c.interactive?!1:"true"===c.interactive).interpolate(void 0===c.interpolate?"linear":c.interpolate);return c.defined&&e.defined(a.defined()),c.tooltipcontent&&e.tooltipContent(a.tooltipcontent()),a.d3Call(b,e),nv.utils.windowResize(e.update),a.chart=e,e},callback:void 0===c.callback?null:a.callback()})}},void 0===c.objectequality?!1:"true"===c.objectequality)}}}]).directive("nvd3BulletChart",[function(){return{restrict:"EA",scope:{data:"=",width:"@",height:"@",id:"@",margin:"&",tooltips:"@",tooltipcontent:"&",orient:"@",ranges:"&",markers:"&",measures:"&",tickformat:"&",nodata:"@",callback:"&",objectequality:"@",transitionduration:"@"},controller:["$scope","$element","$attrs",function(a,b,c){a.d3Call=function(d,e){j(a,c,b,e,d)}}],link:function(a,b,c){a.$watch("data",function(b){if(b){if(a.chart)return a.d3Call(b,a.chart);nv.addGraph({generate:function(){i(a,c);var d=nv.models.bulletChart().width(a.width).height(a.height).margin(a.margin).orient(void 0===c.orient?"left":c.orient).tickFormat(void 0===c.tickformat?null:a.tickformat()).tooltips(void 0===c.tooltips?!1:"true"===c.tooltips).noData(void 0===c.nodata?"No Data Available.":a.nodata);return c.tooltipcontent&&d.tooltipContent(a.tooltipcontent()),a.d3Call(b,d),nv.utils.windowResize(d.update),a.chart=d,d},callback:void 0===c.callback?null:a.callback()})}},void 0===c.objectequality?!1:"true"===c.objectequality)}}}]).directive("nvd3SparklineChart",[function(){return{restrict:"EA",scope:{data:"=",width:"@",height:"@",id:"@",margin:"&",x:"&",y:"&",color:"&",xscale:"&",yscale:"&",showvalue:"@",alignvalue:"@",rightalignvalue:"@",nodata:"@",callback:"&",xtickformat:"&",ytickformat:"&",objectequality:"@",transitionduration:"@"},controller:["$scope","$element","$attrs",function(a,b,c){a.d3Call=function(d,e){j(a,c,b,e,d)}}],link:function(a,b,c){a.$watch("data",function(b){if(b){if(a.chart)return a.d3Call(b,a.chart);nv.addGraph({generate:function(){i(a,c);var d=nv.models.sparklinePlus().width(a.width).height(a.height).margin(a.margin).x(void 0===c.x?function(a){return a.x}:a.x()).y(void 0===c.y?function(a){return a.y}:a.y()).xTickFormat(void 0===c.xtickformat?d3.format(",r"):a.xtickformat()).yTickFormat(void 0===c.ytickformat?d3.format(",.2f"):a.ytickformat()).color(void 0===c.color?nv.utils.getColor(["#000"]):a.color()).showValue(void 0===c.showvalue?!0:"true"===c.showvalue).alignValue(void 0===c.alignvalue?!0:"true"===c.alignvalue).rightAlignValue(void 0===c.rightalignvalue?!1:"true"===c.rightalignvalue).noData(void 0===c.nodata?"No Data Available.":a.nodata);return c.xScale&&d.xScale(a.xScale()),c.yScale&&d.yScale(a.yScale()),a.d3Call(b,d),nv.utils.windowResize(d.update),a.chart=d,d},callback:void 0===c.callback?null:a.callback()})}},void 0===c.objectequality?!1:"true"===c.objectequality)}}}]).directive("nvd3SparklineWithBandlinesChart",[function(){return{restrict:"EA",scope:{data:"=",width:"@",height:"@",id:"@",margin:"&",x:"&",y:"&",color:"&",xscale:"&",yscale:"&",showvalue:"@",alignvalue:"@",rightalignvalue:"@",nodata:"@",callback:"&",xtickformat:"&",ytickformat:"&",objectequality:"@",transitionduration:"@"},controller:["$scope","$element","$attrs",function(a,b,c){a.d3Call=function(d,e){var f,g,h,i,j;c.id?(d3.select("#"+c.id+" svg")||d3.select("#"+c.id).append("svg"),g=d3.select("#"+c.id+" svg").attr("height",a.height).attr("width",a.width).datum(d),h=d3.select("svg#"+c.id+" g.nvd3.nv-wrap.nv-sparkline"),i=[a.bandlineProperties.min,a.bandlineProperties.twentyFithPercentile,a.bandlineProperties.median,a.bandlineProperties.seventyFithPercentile,a.bandlineProperties.max],j=h.selectAll(".nv-bandline").data([i]),j.enter().append("g").attr("class","nv-bandline"),g.transition().duration(void 0===c.transitionduration?250:+c.transitionduration).call(e)):(f="chartid"+Math.floor(1000000001*Math.random()),angular.element(b).attr("data-chartid",f),g=d3.select("[data-iem-chartid="+f+"] svg").attr("height",a.height).attr("width",a.width).datum(d),h=d3.select("[data-iem-chartid="+f+"] svg g.nvd3.nv-wrap.nv-sparkline"),i=[a.bandlineProperties.min,a.bandlineProperties.twentyFithPercentile,a.bandlineProperties.median,a.bandlineProperties.seventyFithPercentile,a.bandlineProperties.max],
j=h.selectAll(".nv-bandline").data([i]),j.enter().append("g").attr("class","nv-bandline"),g.transition().duration(void 0===c.transitionduration?250:+c.transitionduration).call(e))}}],link:function(a,b,e){a.$watch("data",function(b){if(b){if(a.chart)return a.d3Call(b,a.chart);nv.addGraph({generate:function(){a.bandlineProperties={};var g;i(a,e);var h=nv.models.sparklinePlus().width(a.width).height(a.height).margin(a.margin).x(void 0===e.x?function(a){return a.x}:a.x()).y(void 0===e.y?function(a){return a.y}:a.y()).xTickFormat(void 0===e.xtickformat?d3.format(",r"):a.xtickformat()).yTickFormat(void 0===e.ytickformat?d3.format(",.2f"):a.ytickformat()).color(void 0===e.color?nv.utils.getColor(["#000"]):a.color()).showValue(void 0===e.showvalue?!0:"true"===e.showvalue).alignValue(void 0===e.alignvalue?!0:"true"===e.alignvalue).rightAlignValue(void 0===e.rightalignvalue?!1:"true"===e.rightalignvalue).noData(void 0===e.nodata?"No Data Available.":a.nodata);return a.bandlineProperties.min=d3.min(b,function(a){return a[1]}),a.bandlineProperties.max=d3.max(b,function(a){return a[1]}),g=b.map(function(a){return a[1]}).sort(function(a,b){return a[0]<b[0]?-1:a[0]===b[0]?0:1}),a.bandlineProperties.twentyFithPercentile=d3.quantile(g,.25),a.bandlineProperties.median=d3.median(g),a.bandlineProperties.seventyFithPercentile=d3.quantile(g,.75),e.xScale&&h.xScale(a.xScale()),e.yScale&&h.yScale(a.yScale()),d(h,a,e),f(h,a,e),c(h,a),a.d3Call(b,h),nv.utils.windowResize(h.update),a.chart=h,h},callback:void 0===e.callback?null:a.callback()})}},void 0===e.objectequality?!1:"true"===e.objectequality)}}}])}(),!function(){function a(a,b){return b>a?-1:a>b?1:a>=b?0:NaN}function b(a){return null===a?NaN:+a}function c(a){return!isNaN(a)}function d(a){return{left:function(b,c,d,e){for(arguments.length<3&&(d=0),arguments.length<4&&(e=b.length);e>d;){var f=d+e>>>1;a(b[f],c)<0?d=f+1:e=f}return d},right:function(b,c,d,e){for(arguments.length<3&&(d=0),arguments.length<4&&(e=b.length);e>d;){var f=d+e>>>1;a(b[f],c)>0?e=f:d=f+1}return d}}}function e(a){return a.length}function f(a){for(var b=1;a*b%1;)b*=10;return b}function g(a,b){for(var c in b)Object.defineProperty(a.prototype,c,{value:b[c],enumerable:!1})}function h(){this._=Object.create(null)}function i(a){return(a+="")===jg||a[0]===kg?kg+a:a}function j(a){return(a+="")[0]===kg?a.slice(1):a}function k(a){return i(a)in this._}function l(a){return(a=i(a))in this._&&delete this._[a]}function m(){var a=[];for(var b in this._)a.push(j(b));return a}function n(){var a=0;for(var b in this._)++a;return a}function o(){for(var a in this._)return!1;return!0}function p(){this._=Object.create(null)}function q(a,b,c){return function(){var d=c.apply(b,arguments);return d===b?a:d}}function r(a,b){if(b in a)return b;b=b.charAt(0).toUpperCase()+b.slice(1);for(var c=0,d=lg.length;d>c;++c){var e=lg[c]+b;if(e in a)return e}}function s(){}function t(){}function u(a){function b(){for(var b,d=c,e=-1,f=d.length;++e<f;)(b=d[e].on)&&b.apply(this,arguments);return a}var c=[],d=new h;return b.on=function(b,e){var f,g=d.get(b);return arguments.length<2?g&&g.on:(g&&(g.on=null,c=c.slice(0,f=c.indexOf(g)).concat(c.slice(f+1)),d.remove(b)),e&&c.push(d.set(b,{on:e})),a)},b}function v(){Wf.event.preventDefault()}function w(){for(var a,b=Wf.event;a=b.sourceEvent;)b=a;return b}function x(a){for(var b=new t,c=0,d=arguments.length;++c<d;)b[arguments[c]]=u(b);return b.of=function(c,d){return function(e){try{var f=e.sourceEvent=Wf.event;e.target=a,Wf.event=e,b[e.type].apply(c,d)}finally{Wf.event=f}}},b}function y(a){return ng(a,sg),a}function z(a){return"function"==typeof a?a:function(){return og(a,this)}}function A(a){return"function"==typeof a?a:function(){return pg(a,this)}}function B(a,b){function c(){this.removeAttribute(a)}function d(){this.removeAttributeNS(a.space,a.local)}function e(){this.setAttribute(a,b)}function f(){this.setAttributeNS(a.space,a.local,b)}function g(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}function h(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}return a=Wf.ns.qualify(a),null==b?a.local?d:c:"function"==typeof b?a.local?h:g:a.local?f:e}function C(a){return a.trim().replace(/\s+/g," ")}function D(a){return new RegExp("(?:^|\\s+)"+Wf.requote(a)+"(?:\\s+|$)","g")}function E(a){return(a+"").trim().split(/^|\s+/)}function F(a,b){function c(){for(var c=-1;++c<e;)a[c](this,b)}function d(){for(var c=-1,d=b.apply(this,arguments);++c<e;)a[c](this,d)}a=E(a).map(G);var e=a.length;return"function"==typeof b?d:c}function G(a){var b=D(a);return function(c,d){if(e=c.classList)return d?e.add(a):e.remove(a);var e=c.getAttribute("class")||"";d?(b.lastIndex=0,b.test(e)||c.setAttribute("class",C(e+" "+a))):c.setAttribute("class",C(e.replace(b," ")))}}function H(a,b,c){function d(){this.style.removeProperty(a)}function e(){this.style.setProperty(a,b,c)}function f(){var d=b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}return null==b?d:"function"==typeof b?f:e}function I(a,b){function c(){delete this[a]}function d(){this[a]=b}function e(){var c=b.apply(this,arguments);null==c?delete this[a]:this[a]=c}return null==b?c:"function"==typeof b?e:d}function J(a){return"function"==typeof a?a:(a=Wf.ns.qualify(a)).local?function(){return this.ownerDocument.createElementNS(a.space,a.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,a)}}function K(a){return{__data__:a}}function L(a){return function(){return rg(this,a)}}function M(b){return arguments.length||(b=a),function(a,c){return a&&c?b(a.__data__,c.__data__):!a-!c}}function N(a,b){for(var c=0,d=a.length;d>c;c++)for(var e,f=a[c],g=0,h=f.length;h>g;g++)(e=f[g])&&b(e,g,c);return a}function O(a){return ng(a,ug),a}function P(a){var b,c;return function(d,e,f){var g,h=a[f].update,i=h.length;for(f!=c&&(c=f,b=0),e>=b&&(b=e+1);!(g=h[b])&&++b<i;);return g}}function Q(){var a=this.__transition__;a&&++a.active}function R(a,b,c){function d(){var b=this[g];b&&(this.removeEventListener(a,b,b.$),delete this[g])}function e(){var e=i(b,Yf(arguments));d.call(this),this.addEventListener(a,this[g]=e,e.$=c),e._=b}function f(){var b,c=new RegExp("^__on([^.]+)"+Wf.requote(a)+"$");for(var d in this)if(b=d.match(c)){var e=this[d];this.removeEventListener(b[1],e,e.$),delete this[d]}}var g="__on"+a,h=a.indexOf("."),i=S;h>0&&(a=a.slice(0,h));var j=wg.get(a);return j&&(a=j,i=T),h?b?e:d:b?s:f}function S(a,b){return function(c){var d=Wf.event;Wf.event=c,b[0]=this.__data__;try{a.apply(this,b)}finally{Wf.event=d}}}function T(a,b){var c=S(a,b);return function(a){var b=this,d=a.relatedTarget;d&&(d===b||8&d.compareDocumentPosition(b))||c.call(b,a)}}function U(){var a=".dragsuppress-"+ ++yg,b="click"+a,c=Wf.select(_f).on("touchmove"+a,v).on("dragstart"+a,v).on("selectstart"+a,v);if(xg){var d=$f.style,e=d[xg];d[xg]="none"}return function(f){function g(){c.on(b,null)}c.on(a,null),xg&&(d[xg]=e),f&&(c.on(b,function(){v(),g()},!0),setTimeout(g,0))}}function V(a,b){b.changedTouches&&(b=b.changedTouches[0]);var c=a.ownerSVGElement||a;if(c.createSVGPoint){var d=c.createSVGPoint();if(0>zg&&(_f.scrollX||_f.scrollY)){c=Wf.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var e=c[0][0].getScreenCTM();zg=!(e.f||e.e),c.remove()}return zg?(d.x=b.pageX,d.y=b.pageY):(d.x=b.clientX,d.y=b.clientY),d=d.matrixTransform(a.getScreenCTM().inverse()),[d.x,d.y]}var f=a.getBoundingClientRect();return[b.clientX-f.left-a.clientLeft,b.clientY-f.top-a.clientTop]}function W(){return Wf.event.changedTouches[0].identifier}function X(){return Wf.event.target}function Y(){return _f}function Z(a){return a>0?1:0>a?-1:0}function $(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(b[1]-a[1])*(c[0]-a[0])}function _(a){return a>1?0:-1>a?Ag:Math.acos(a)}function aa(a){return a>1?Cg:-1>a?-Cg:Math.asin(a)}function ba(a){return((a=Math.exp(a))-1/a)/2}function ca(a){return((a=Math.exp(a))+1/a)/2}function da(a){return((a=Math.exp(2*a))-1)/(a+1)}function ea(a){return(a=Math.sin(a/2))*a}function fa(){}function ga(a,b,c){return this instanceof ga?(this.h=+a,this.s=+b,void(this.l=+c)):arguments.length<2?a instanceof ga?new ga(a.h,a.s,a.l):ua(""+a,va,ga):new ga(a,b,c)}function ha(a,b,c){function d(a){return a>360?a-=360:0>a&&(a+=360),60>a?f+(g-f)*a/60:180>a?g:240>a?f+(g-f)*(240-a)/60:f}function e(a){return Math.round(255*d(a))}var f,g;return a=isNaN(a)?0:(a%=360)<0?a+360:a,b=isNaN(b)?0:0>b?0:b>1?1:b,c=0>c?0:c>1?1:c,g=.5>=c?c*(1+b):c+b-c*b,f=2*c-g,new qa(e(a+120),e(a),e(a-120))}function ia(a,b,c){return this instanceof ia?(this.h=+a,this.c=+b,void(this.l=+c)):arguments.length<2?a instanceof ia?new ia(a.h,a.c,a.l):a instanceof ka?ma(a.l,a.a,a.b):ma((a=wa((a=Wf.rgb(a)).r,a.g,a.b)).l,a.a,a.b):new ia(a,b,c)}function ja(a,b,c){return isNaN(a)&&(a=0),isNaN(b)&&(b=0),new ka(c,Math.cos(a*=Fg)*b,Math.sin(a)*b)}function ka(a,b,c){return this instanceof ka?(this.l=+a,this.a=+b,void(this.b=+c)):arguments.length<2?a instanceof ka?new ka(a.l,a.a,a.b):a instanceof ia?ja(a.h,a.c,a.l):wa((a=qa(a)).r,a.g,a.b):new ka(a,b,c)}function la(a,b,c){var d=(a+16)/116,e=d+b/500,f=d-c/200;return e=na(e)*Qg,d=na(d)*Rg,f=na(f)*Sg,new qa(pa(3.2404542*e-1.5371385*d-.4985314*f),pa(-.969266*e+1.8760108*d+.041556*f),pa(.0556434*e-.2040259*d+1.0572252*f))}function ma(a,b,c){return a>0?new ia(Math.atan2(c,b)*Gg,Math.sqrt(b*b+c*c),a):new ia(NaN,NaN,a)}function na(a){return a>.206893034?a*a*a:(a-4/29)/7.787037}function oa(a){return a>.008856?Math.pow(a,1/3):7.787037*a+4/29}function pa(a){return Math.round(255*(.00304>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055))}function qa(a,b,c){return this instanceof qa?(this.r=~~a,this.g=~~b,void(this.b=~~c)):arguments.length<2?a instanceof qa?new qa(a.r,a.g,a.b):ua(""+a,qa,ha):new qa(a,b,c)}function ra(a){return new qa(a>>16,a>>8&255,255&a)}function sa(a){return ra(a)+""}function ta(a){return 16>a?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function ua(a,b,c){var d,e,f,g=0,h=0,i=0;if(d=/([a-z]+)\((.*)\)/i.exec(a))switch(e=d[2].split(","),d[1]){case"hsl":return c(parseFloat(e[0]),parseFloat(e[1])/100,parseFloat(e[2])/100);case"rgb":return b(ya(e[0]),ya(e[1]),ya(e[2]))}return(f=Vg.get(a))?b(f.r,f.g,f.b):(null==a||"#"!==a.charAt(0)||isNaN(f=parseInt(a.slice(1),16))||(4===a.length?(g=(3840&f)>>4,g=g>>4|g,h=240&f,h=h>>4|h,i=15&f,i=i<<4|i):7===a.length&&(g=(16711680&f)>>16,h=(65280&f)>>8,i=255&f)),b(g,h,i))}function va(a,b,c){var d,e,f=Math.min(a/=255,b/=255,c/=255),g=Math.max(a,b,c),h=g-f,i=(g+f)/2;return h?(e=.5>i?h/(g+f):h/(2-g-f),d=a==g?(b-c)/h+(c>b?6:0):b==g?(c-a)/h+2:(a-b)/h+4,d*=60):(d=NaN,e=i>0&&1>i?0:d),new ga(d,e,i)}function wa(a,b,c){a=xa(a),b=xa(b),c=xa(c);var d=oa((.4124564*a+.3575761*b+.1804375*c)/Qg),e=oa((.2126729*a+.7151522*b+.072175*c)/Rg),f=oa((.0193339*a+.119192*b+.9503041*c)/Sg);return ka(116*e-16,500*(d-e),200*(e-f))}function xa(a){return(a/=255)<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function ya(a){var b=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*b):b}function za(a){return"function"==typeof a?a:function(){return a}}function Aa(a){return a}function Ba(a){return function(b,c,d){return 2===arguments.length&&"function"==typeof c&&(d=c,c=null),Ca(b,c,a,d)}}function Ca(a,b,c,d){function e(){var a,b=i.status;if(!b&&Ea(i)||b>=200&&300>b||304===b){try{a=c.call(f,i)}catch(d){return void g.error.call(f,d)}g.load.call(f,a)}else g.error.call(f,i)}var f={},g=Wf.dispatch("beforesend","progress","load","error"),h={},i=new XMLHttpRequest,j=null;return!_f.XDomainRequest||"withCredentials"in i||!/^(http(s)?:)?\/\//.test(a)||(i=new XDomainRequest),"onload"in i?i.onload=i.onerror=e:i.onreadystatechange=function(){i.readyState>3&&e()},i.onprogress=function(a){var b=Wf.event;Wf.event=a;try{g.progress.call(f,i)}finally{Wf.event=b}},f.header=function(a,b){return a=(a+"").toLowerCase(),arguments.length<2?h[a]:(null==b?delete h[a]:h[a]=b+"",f)},f.mimeType=function(a){return arguments.length?(b=null==a?null:a+"",f):b},f.responseType=function(a){return arguments.length?(j=a,f):j},f.response=function(a){return c=a,f},["get","post"].forEach(function(a){f[a]=function(){return f.send.apply(f,[a].concat(Yf(arguments)))}}),f.send=function(c,d,e){if(2===arguments.length&&"function"==typeof d&&(e=d,d=null),i.open(c,a,!0),null==b||"accept"in h||(h.accept=b+",*/*"),i.setRequestHeader)for(var k in h)i.setRequestHeader(k,h[k]);return null!=b&&i.overrideMimeType&&i.overrideMimeType(b),null!=j&&(i.responseType=j),null!=e&&f.on("error",e).on("load",function(a){e(null,a)}),g.beforesend.call(f,i),i.send(null==d?null:d),f},f.abort=function(){return i.abort(),f},Wf.rebind(f,g,"on"),null==d?f:f.get(Da(d))}function Da(a){return 1===a.length?function(b,c){a(null==b?c:null)}:a}function Ea(a){var b=a.responseType;return b&&"text"!==b?a.response:a.responseText}function Fa(){var a=Ga(),b=Ha()-a;b>24?(isFinite(b)&&(clearTimeout(Zg),Zg=setTimeout(Fa,b)),Yg=0):(Yg=1,_g(Fa))}function Ga(){var a=Date.now();for($g=Wg;$g;)a>=$g.t&&($g.f=$g.c(a-$g.t)),$g=$g.n;return a}function Ha(){for(var a,b=Wg,c=1/0;b;)b.f?b=a?a.n=b.n:Wg=b.n:(b.t<c&&(c=b.t),b=(a=b).n);return Xg=a,c}function Ia(a,b){return b-(a?Math.ceil(Math.log(a)/Math.LN10):1)}function Ja(a,b){var c=Math.pow(10,3*ig(8-b));return{scale:b>8?function(a){return a/c}:function(a){return a*c},symbol:a}}function Ka(a){var b=a.decimal,c=a.thousands,d=a.grouping,e=a.currency,f=d&&c?function(a,b){for(var e=a.length,f=[],g=0,h=d[0],i=0;e>0&&h>0&&(i+h+1>b&&(h=Math.max(1,b-i)),f.push(a.substring(e-=h,e+h)),!((i+=h+1)>b));)h=d[g=(g+1)%d.length];return f.reverse().join(c)}:Aa;return function(a){var c=bh.exec(a),d=c[1]||" ",g=c[2]||">",h=c[3]||"-",i=c[4]||"",j=c[5],k=+c[6],l=c[7],m=c[8],n=c[9],o=1,p="",q="",r=!1,s=!0;switch(m&&(m=+m.substring(1)),(j||"0"===d&&"="===g)&&(j=d="0",g="="),n){case"n":l=!0,n="g";break;case"%":o=100,q="%",n="f";break;case"p":o=100,q="%",n="r";break;case"b":case"o":case"x":case"X":"#"===i&&(p="0"+n.toLowerCase());case"c":s=!1;case"d":r=!0,m=0;break;case"s":o=-1,n="r"}"$"===i&&(p=e[0],q=e[1]),"r"!=n||m||(n="g"),null!=m&&("g"==n?m=Math.max(1,Math.min(21,m)):"e"!=n&&"f"!=n||(m=Math.max(0,Math.min(20,m)))),n=ch.get(n)||La;var t=j&&l;return function(a){var c=q;if(r&&a%1)return"";var e=0>a||0===a&&0>1/a?(a=-a,"-"):"-"===h?"":h;if(0>o){var i=Wf.formatPrefix(a,m);a=i.scale(a),c=i.symbol+q}else a*=o;a=n(a,m);var u,v,w=a.lastIndexOf(".");if(0>w){var x=s?a.lastIndexOf("e"):-1;0>x?(u=a,v=""):(u=a.substring(0,x),v=a.substring(x))}else u=a.substring(0,w),v=b+a.substring(w+1);!j&&l&&(u=f(u,1/0));var y=p.length+u.length+v.length+(t?0:e.length),z=k>y?new Array(y=k-y+1).join(d):"";return t&&(u=f(z+u,z.length?k-v.length:1/0)),e+=p,a=u+v,("<"===g?e+a+z:">"===g?z+e+a:"^"===g?z.substring(0,y>>=1)+e+a+z.substring(y):e+(t?a:z+a))+c}}}function La(a){return a+""}function Ma(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Na(a,b,c){function d(b){var c=a(b),d=f(c,1);return d-b>b-c?c:d}function e(c){return b(c=a(new eh(c-1)),1),c}function f(a,c){return b(a=new eh(+a),c),a}function g(a,d,f){var g=e(a),h=[];if(f>1)for(;d>g;)c(g)%f||h.push(new Date(+g)),b(g,1);else for(;d>g;)h.push(new Date(+g)),b(g,1);return h}function h(a,b,c){try{eh=Ma;var d=new Ma;return d._=a,g(d,b,c)}finally{eh=Date}}a.floor=a,a.round=d,a.ceil=e,a.offset=f,a.range=g;var i=a.utc=Oa(a);return i.floor=i,i.round=Oa(d),i.ceil=Oa(e),i.offset=Oa(f),i.range=h,a}function Oa(a){return function(b,c){try{eh=Ma;var d=new Ma;return d._=b,a(d,c)._}finally{eh=Date}}}function Pa(a){function b(a){function b(b){for(var c,e,f,g=[],h=-1,i=0;++h<d;)37===a.charCodeAt(h)&&(g.push(a.slice(i,h)),null!=(e=gh[c=a.charAt(++h)])&&(c=a.charAt(++h)),(f=C[c])&&(c=f(b,null==e?"e"===c?" ":"0":e)),g.push(c),i=h+1);return g.push(a.slice(i,h)),g.join("")}var d=a.length;return b.parse=function(b){var d={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},e=c(d,a,b,0);if(e!=b.length)return null;"p"in d&&(d.H=d.H%12+12*d.p);var f=null!=d.Z&&eh!==Ma,g=new(f?Ma:eh);return"j"in d?g.setFullYear(d.y,0,d.j):"w"in d&&("W"in d||"U"in d)?(g.setFullYear(d.y,0,1),g.setFullYear(d.y,0,"W"in d?(d.w+6)%7+7*d.W-(g.getDay()+5)%7:d.w+7*d.U-(g.getDay()+6)%7)):g.setFullYear(d.y,d.m,d.d),g.setHours(d.H+(d.Z/100|0),d.M+d.Z%100,d.S,d.L),f?g._:g},b.toString=function(){return a},b}function c(a,b,c,d){for(var e,f,g,h=0,i=b.length,j=c.length;i>h;){if(d>=j)return-1;if(e=b.charCodeAt(h++),37===e){if(g=b.charAt(h++),f=D[g in gh?b.charAt(h++):g],!f||(d=f(a,c,d))<0)return-1}else if(e!=c.charCodeAt(d++))return-1}return d}function d(a,b,c){w.lastIndex=0;var d=w.exec(b.slice(c));return d?(a.w=x.get(d[0].toLowerCase()),c+d[0].length):-1}function e(a,b,c){u.lastIndex=0;var d=u.exec(b.slice(c));return d?(a.w=v.get(d[0].toLowerCase()),c+d[0].length):-1}function f(a,b,c){A.lastIndex=0;var d=A.exec(b.slice(c));return d?(a.m=B.get(d[0].toLowerCase()),c+d[0].length):-1}function g(a,b,c){y.lastIndex=0;var d=y.exec(b.slice(c));return d?(a.m=z.get(d[0].toLowerCase()),c+d[0].length):-1}function h(a,b,d){return c(a,C.c.toString(),b,d)}function i(a,b,d){return c(a,C.x.toString(),b,d)}function j(a,b,d){return c(a,C.X.toString(),b,d)}function k(a,b,c){var d=t.get(b.slice(c,c+=2).toLowerCase());return null==d?-1:(a.p=d,c)}var l=a.dateTime,m=a.date,n=a.time,o=a.periods,p=a.days,q=a.shortDays,r=a.months,s=a.shortMonths;b.utc=function(a){function c(a){try{eh=Ma;var b=new eh;return b._=a,d(b)}finally{eh=Date}}var d=b(a);return c.parse=function(a){try{eh=Ma;var b=d.parse(a);return b&&b._}finally{eh=Date}},c.toString=d.toString,c},b.multi=b.utc.multi=hb;var t=Wf.map(),u=Ra(p),v=Sa(p),w=Ra(q),x=Sa(q),y=Ra(r),z=Sa(r),A=Ra(s),B=Sa(s);o.forEach(function(a,b){t.set(a.toLowerCase(),b)});var C={a:function(a){return q[a.getDay()]},A:function(a){return p[a.getDay()]},b:function(a){return s[a.getMonth()]},B:function(a){return r[a.getMonth()]},c:b(l),d:function(a,b){return Qa(a.getDate(),b,2)},e:function(a,b){return Qa(a.getDate(),b,2)},H:function(a,b){return Qa(a.getHours(),b,2)},I:function(a,b){return Qa(a.getHours()%12||12,b,2)},j:function(a,b){return Qa(1+dh.dayOfYear(a),b,3)},L:function(a,b){return Qa(a.getMilliseconds(),b,3)},m:function(a,b){return Qa(a.getMonth()+1,b,2)},M:function(a,b){return Qa(a.getMinutes(),b,2)},p:function(a){return o[+(a.getHours()>=12)]},S:function(a,b){return Qa(a.getSeconds(),b,2)},U:function(a,b){return Qa(dh.sundayOfYear(a),b,2)},w:function(a){return a.getDay()},W:function(a,b){return Qa(dh.mondayOfYear(a),b,2)},x:b(m),X:b(n),y:function(a,b){return Qa(a.getFullYear()%100,b,2)},Y:function(a,b){return Qa(a.getFullYear()%1e4,b,4)},Z:fb,"%":function(){return"%"}},D={a:d,A:e,b:f,B:g,c:h,d:_a,e:_a,H:bb,I:bb,j:ab,L:eb,m:$a,M:cb,p:k,S:db,U:Ua,w:Ta,W:Va,x:i,X:j,y:Xa,Y:Wa,Z:Ya,"%":gb};return b}function Qa(a,b,c){var d=0>a?"-":"",e=(d?-a:a)+"",f=e.length;return d+(c>f?new Array(c-f+1).join(b)+e:e)}function Ra(a){return new RegExp("^(?:"+a.map(Wf.requote).join("|")+")","i")}function Sa(a){for(var b=new h,c=-1,d=a.length;++c<d;)b.set(a[c].toLowerCase(),c);return b}function Ta(a,b,c){hh.lastIndex=0;var d=hh.exec(b.slice(c,c+1));return d?(a.w=+d[0],c+d[0].length):-1}function Ua(a,b,c){hh.lastIndex=0;var d=hh.exec(b.slice(c));return d?(a.U=+d[0],c+d[0].length):-1}function Va(a,b,c){hh.lastIndex=0;var d=hh.exec(b.slice(c));return d?(a.W=+d[0],c+d[0].length):-1}function Wa(a,b,c){hh.lastIndex=0;var d=hh.exec(b.slice(c,c+4));return d?(a.y=+d[0],c+d[0].length):-1}function Xa(a,b,c){hh.lastIndex=0;var d=hh.exec(b.slice(c,c+2));return d?(a.y=Za(+d[0]),c+d[0].length):-1}function Ya(a,b,c){return/^[+-]\d{4}$/.test(b=b.slice(c,c+5))?(a.Z=-b,c+5):-1}function Za(a){return a+(a>68?1900:2e3)}function $a(a,b,c){hh.lastIndex=0;var d=hh.exec(b.slice(c,c+2));return d?(a.m=d[0]-1,c+d[0].length):-1}function _a(a,b,c){hh.lastIndex=0;var d=hh.exec(b.slice(c,c+2));return d?(a.d=+d[0],c+d[0].length):-1}function ab(a,b,c){hh.lastIndex=0;var d=hh.exec(b.slice(c,c+3));return d?(a.j=+d[0],c+d[0].length):-1}function bb(a,b,c){hh.lastIndex=0;var d=hh.exec(b.slice(c,c+2));return d?(a.H=+d[0],c+d[0].length):-1}function cb(a,b,c){hh.lastIndex=0;var d=hh.exec(b.slice(c,c+2));return d?(a.M=+d[0],c+d[0].length):-1}function db(a,b,c){hh.lastIndex=0;var d=hh.exec(b.slice(c,c+2));return d?(a.S=+d[0],c+d[0].length):-1}function eb(a,b,c){hh.lastIndex=0;var d=hh.exec(b.slice(c,c+3));return d?(a.L=+d[0],c+d[0].length):-1}function fb(a){var b=a.getTimezoneOffset(),c=b>0?"-":"+",d=ig(b)/60|0,e=ig(b)%60;return c+Qa(d,"0",2)+Qa(e,"0",2)}function gb(a,b,c){ih.lastIndex=0;var d=ih.exec(b.slice(c,c+1));return d?c+d[0].length:-1}function hb(a){for(var b=a.length,c=-1;++c<b;)a[c][0]=this(a[c][0]);return function(b){for(var c=0,d=a[c];!d[1](b);)d=a[++c];return d[0](b)}}function ib(){}function jb(a,b,c){var d=c.s=a+b,e=d-a,f=d-e;c.t=a-f+(b-e)}function kb(a,b){a&&mh.hasOwnProperty(a.type)&&mh[a.type](a,b)}function lb(a,b,c){var d,e=-1,f=a.length-c;for(b.lineStart();++e<f;)d=a[e],b.point(d[0],d[1],d[2]);b.lineEnd()}function mb(a,b){var c=-1,d=a.length;for(b.polygonStart();++c<d;)lb(a[c],b,1);b.polygonEnd()}function nb(){function a(a,b){a*=Fg,b=b*Fg/2+Ag/4;var c=a-d,g=c>=0?1:-1,h=g*c,i=Math.cos(b),j=Math.sin(b),k=f*j,l=e*i+k*Math.cos(h),m=k*g*Math.sin(h);oh.add(Math.atan2(m,l)),d=a,e=i,f=j}var b,c,d,e,f;ph.point=function(g,h){ph.point=a,d=(b=g)*Fg,e=Math.cos(h=(c=h)*Fg/2+Ag/4),f=Math.sin(h)},ph.lineEnd=function(){a(b,c)}}function ob(a){var b=a[0],c=a[1],d=Math.cos(c);return[d*Math.cos(b),d*Math.sin(b),Math.sin(c)]}function pb(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function qb(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function rb(a,b){a[0]+=b[0],a[1]+=b[1],a[2]+=b[2]}function sb(a,b){return[a[0]*b,a[1]*b,a[2]*b]}function tb(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=b,a[1]/=b,a[2]/=b}function ub(a){return[Math.atan2(a[1],a[0]),aa(a[2])]}function vb(a,b){return ig(a[0]-b[0])<Dg&&ig(a[1]-b[1])<Dg}function wb(a,b){a*=Fg;var c=Math.cos(b*=Fg);xb(c*Math.cos(a),c*Math.sin(a),Math.sin(b))}function xb(a,b,c){++qh,sh+=(a-sh)/qh,th+=(b-th)/qh,uh+=(c-uh)/qh}function yb(){function a(a,e){a*=Fg;var f=Math.cos(e*=Fg),g=f*Math.cos(a),h=f*Math.sin(a),i=Math.sin(e),j=Math.atan2(Math.sqrt((j=c*i-d*h)*j+(j=d*g-b*i)*j+(j=b*h-c*g)*j),b*g+c*h+d*i);rh+=j,vh+=j*(b+(b=g)),wh+=j*(c+(c=h)),xh+=j*(d+(d=i)),xb(b,c,d)}var b,c,d;Bh.point=function(e,f){e*=Fg;var g=Math.cos(f*=Fg);b=g*Math.cos(e),c=g*Math.sin(e),d=Math.sin(f),Bh.point=a,xb(b,c,d)}}function zb(){Bh.point=wb}function Ab(){function a(a,b){a*=Fg;var c=Math.cos(b*=Fg),g=c*Math.cos(a),h=c*Math.sin(a),i=Math.sin(b),j=e*i-f*h,k=f*g-d*i,l=d*h-e*g,m=Math.sqrt(j*j+k*k+l*l),n=d*g+e*h+f*i,o=m&&-_(n)/m,p=Math.atan2(m,n);yh+=o*j,zh+=o*k,Ah+=o*l,rh+=p,vh+=p*(d+(d=g)),wh+=p*(e+(e=h)),xh+=p*(f+(f=i)),xb(d,e,f)}var b,c,d,e,f;Bh.point=function(g,h){b=g,c=h,Bh.point=a,g*=Fg;var i=Math.cos(h*=Fg);d=i*Math.cos(g),e=i*Math.sin(g),f=Math.sin(h),xb(d,e,f)},Bh.lineEnd=function(){a(b,c),Bh.lineEnd=zb,Bh.point=wb}}function Bb(){return!0}function Cb(a,b,c,d,e){var f=[],g=[];if(a.forEach(function(a){if(!((b=a.length-1)<=0)){var b,c=a[0],d=a[b];if(vb(c,d)){e.lineStart();for(var h=0;b>h;++h)e.point((c=a[h])[0],c[1]);return void e.lineEnd()}var i=new Eb(c,a,null,!0),j=new Eb(c,null,i,!1);i.o=j,f.push(i),g.push(j),i=new Eb(d,a,null,!1),j=new Eb(d,null,i,!0),i.o=j,f.push(i),g.push(j)}}),g.sort(b),Db(f),Db(g),f.length){for(var h=0,i=c,j=g.length;j>h;++h)g[h].e=i=!i;for(var k,l,m=f[0];;){for(var n=m,o=!0;n.v;)if((n=n.n)===m)return;k=n.z,e.lineStart();do{if(n.v=n.o.v=!0,n.e){if(o)for(var h=0,j=k.length;j>h;++h)e.point((l=k[h])[0],l[1]);else d(n.x,n.n.x,1,e);n=n.n}else{if(o){k=n.p.z;for(var h=k.length-1;h>=0;--h)e.point((l=k[h])[0],l[1])}else d(n.x,n.p.x,-1,e);n=n.p}n=n.o,k=n.z,o=!o}while(!n.v);e.lineEnd()}}}function Db(a){if(b=a.length){for(var b,c,d=0,e=a[0];++d<b;)e.n=c=a[d],c.p=e,e=c;e.n=c=a[0],c.p=e}}function Eb(a,b,c,d){this.x=a,this.z=b,this.o=c,this.e=d,this.v=!1,this.n=this.p=null}function Fb(a,b,c,d){return function(e,f){function g(b,c){var d=e(b,c);a(b=d[0],c=d[1])&&f.point(b,c)}function h(a,b){var c=e(a,b);q.point(c[0],c[1])}function i(){s.point=h,q.lineStart()}function j(){s.point=g,q.lineEnd()}function k(a,b){p.push([a,b]);var c=e(a,b);u.point(c[0],c[1])}function l(){u.lineStart(),p=[]}function m(){k(p[0][0],p[0][1]),u.lineEnd();var a,b=u.clean(),c=t.buffer(),d=c.length;if(p.pop(),o.push(p),p=null,d)if(1&b){a=c[0];var e,d=a.length-1,g=-1;if(d>0){for(v||(f.polygonStart(),v=!0),f.lineStart();++g<d;)f.point((e=a[g])[0],e[1]);f.lineEnd()}}else d>1&&2&b&&c.push(c.pop().concat(c.shift())),n.push(c.filter(Gb))}var n,o,p,q=b(f),r=e.invert(d[0],d[1]),s={point:g,lineStart:i,lineEnd:j,polygonStart:function(){s.point=k,s.lineStart=l,s.lineEnd=m,n=[],o=[]},polygonEnd:function(){s.point=g,s.lineStart=i,s.lineEnd=j,n=Wf.merge(n);var a=Mb(r,o);n.length?(v||(f.polygonStart(),v=!0),Cb(n,Ib,a,c,f)):a&&(v||(f.polygonStart(),v=!0),f.lineStart(),c(null,null,1,f),f.lineEnd()),v&&(f.polygonEnd(),v=!1),n=o=null},sphere:function(){f.polygonStart(),f.lineStart(),c(null,null,1,f),f.lineEnd(),f.polygonEnd()}},t=Hb(),u=b(t),v=!1;return s}}function Gb(a){return a.length>1}function Hb(){var a,b=[];return{lineStart:function(){b.push(a=[])},point:function(b,c){a.push([b,c])},lineEnd:s,buffer:function(){var c=b;return b=[],a=null,c},rejoin:function(){b.length>1&&b.push(b.pop().concat(b.shift()))}}}function Ib(a,b){return((a=a.x)[0]<0?a[1]-Cg-Dg:Cg-a[1])-((b=b.x)[0]<0?b[1]-Cg-Dg:Cg-b[1])}function Jb(a){var b,c=NaN,d=NaN,e=NaN;return{lineStart:function(){a.lineStart(),b=1},point:function(f,g){var h=f>0?Ag:-Ag,i=ig(f-c);ig(i-Ag)<Dg?(a.point(c,d=(d+g)/2>0?Cg:-Cg),a.point(e,d),a.lineEnd(),a.lineStart(),a.point(h,d),a.point(f,d),b=0):e!==h&&i>=Ag&&(ig(c-e)<Dg&&(c-=e*Dg),ig(f-h)<Dg&&(f-=h*Dg),d=Kb(c,d,f,g),a.point(e,d),a.lineEnd(),a.lineStart(),a.point(h,d),b=0),a.point(c=f,d=g),e=h},lineEnd:function(){a.lineEnd(),c=d=NaN},clean:function(){return 2-b}}}function Kb(a,b,c,d){var e,f,g=Math.sin(a-c);return ig(g)>Dg?Math.atan((Math.sin(b)*(f=Math.cos(d))*Math.sin(c)-Math.sin(d)*(e=Math.cos(b))*Math.sin(a))/(e*f*g)):(b+d)/2}function Lb(a,b,c,d){var e;if(null==a)e=c*Cg,d.point(-Ag,e),d.point(0,e),d.point(Ag,e),d.point(Ag,0),d.point(Ag,-e),d.point(0,-e),d.point(-Ag,-e),d.point(-Ag,0),d.point(-Ag,e);else if(ig(a[0]-b[0])>Dg){var f=a[0]<b[0]?Ag:-Ag;e=c*f/2,d.point(-f,e),d.point(0,e),d.point(f,e)}else d.point(b[0],b[1])}function Mb(a,b){var c=a[0],d=a[1],e=[Math.sin(c),-Math.cos(c),0],f=0,g=0;oh.reset();for(var h=0,i=b.length;i>h;++h){var j=b[h],k=j.length;if(k)for(var l=j[0],m=l[0],n=l[1]/2+Ag/4,o=Math.sin(n),p=Math.cos(n),q=1;;){q===k&&(q=0),a=j[q];var r=a[0],s=a[1]/2+Ag/4,t=Math.sin(s),u=Math.cos(s),v=r-m,w=v>=0?1:-1,x=w*v,y=x>Ag,z=o*t;if(oh.add(Math.atan2(z*w*Math.sin(x),p*u+z*Math.cos(x))),f+=y?v+w*Bg:v,y^m>=c^r>=c){var A=qb(ob(l),ob(a));tb(A);var B=qb(e,A);tb(B);var C=(y^v>=0?-1:1)*aa(B[2]);(d>C||d===C&&(A[0]||A[1]))&&(g+=y^v>=0?1:-1)}if(!q++)break;m=r,o=t,p=u,l=a}}return(-Dg>f||Dg>f&&0>oh)^1&g}function Nb(a){function b(a,b){return Math.cos(a)*Math.cos(b)>f}function c(a){var c,f,i,j,k;return{lineStart:function(){j=i=!1,k=1},point:function(l,m){var n,o=[l,m],p=b(l,m),q=g?p?0:e(l,m):p?e(l+(0>l?Ag:-Ag),m):0;if(!c&&(j=i=p)&&a.lineStart(),p!==i&&(n=d(c,o),(vb(c,n)||vb(o,n))&&(o[0]+=Dg,o[1]+=Dg,p=b(o[0],o[1]))),p!==i)k=0,p?(a.lineStart(),n=d(o,c),a.point(n[0],n[1])):(n=d(c,o),a.point(n[0],n[1]),a.lineEnd()),c=n;else if(h&&c&&g^p){var r;q&f||!(r=d(o,c,!0))||(k=0,g?(a.lineStart(),a.point(r[0][0],r[0][1]),a.point(r[1][0],r[1][1]),a.lineEnd()):(a.point(r[1][0],r[1][1]),a.lineEnd(),a.lineStart(),a.point(r[0][0],r[0][1])))}!p||c&&vb(c,o)||a.point(o[0],o[1]),c=o,i=p,f=q},lineEnd:function(){i&&a.lineEnd(),c=null},clean:function(){return k|(j&&i)<<1}}}function d(a,b,c){var d=ob(a),e=ob(b),g=[1,0,0],h=qb(d,e),i=pb(h,h),j=h[0],k=i-j*j;if(!k)return!c&&a;var l=f*i/k,m=-f*j/k,n=qb(g,h),o=sb(g,l),p=sb(h,m);rb(o,p);var q=n,r=pb(o,q),s=pb(q,q),t=r*r-s*(pb(o,o)-1);if(!(0>t)){var u=Math.sqrt(t),v=sb(q,(-r-u)/s);if(rb(v,o),v=ub(v),!c)return v;var w,x=a[0],y=b[0],z=a[1],A=b[1];x>y&&(w=x,x=y,y=w);var B=y-x,C=ig(B-Ag)<Dg,D=C||Dg>B;if(!C&&z>A&&(w=z,z=A,A=w),D?C?z+A>0^v[1]<(ig(v[0]-x)<Dg?z:A):z<=v[1]&&v[1]<=A:B>Ag^(x<=v[0]&&v[0]<=y)){var E=sb(q,(-r+u)/s);return rb(E,o),[v,ub(E)]}}}function e(b,c){var d=g?a:Ag-a,e=0;return-d>b?e|=1:b>d&&(e|=2),-d>c?e|=4:c>d&&(e|=8),e}var f=Math.cos(a),g=f>0,h=ig(f)>Dg,i=nc(a,6*Fg);return Fb(b,c,i,g?[0,-a]:[-Ag,a-Ag])}function Ob(a,b,c,d){return function(e){var f,g=e.a,h=e.b,i=g.x,j=g.y,k=h.x,l=h.y,m=0,n=1,o=k-i,p=l-j;if(f=a-i,o||!(f>0)){if(f/=o,0>o){if(m>f)return;n>f&&(n=f)}else if(o>0){if(f>n)return;f>m&&(m=f)}if(f=c-i,o||!(0>f)){if(f/=o,0>o){if(f>n)return;f>m&&(m=f)}else if(o>0){if(m>f)return;n>f&&(n=f)}if(f=b-j,p||!(f>0)){if(f/=p,0>p){if(m>f)return;n>f&&(n=f)}else if(p>0){if(f>n)return;f>m&&(m=f)}if(f=d-j,p||!(0>f)){if(f/=p,0>p){if(f>n)return;f>m&&(m=f)}else if(p>0){if(m>f)return;n>f&&(n=f)}return m>0&&(e.a={x:i+m*o,y:j+m*p}),1>n&&(e.b={x:i+n*o,y:j+n*p}),e}}}}}}function Pb(a,b,c,d){function e(d,e){return ig(d[0]-a)<Dg?e>0?0:3:ig(d[0]-c)<Dg?e>0?2:1:ig(d[1]-b)<Dg?e>0?1:0:e>0?3:2}function f(a,b){return g(a.x,b.x)}function g(a,b){var c=e(a,1),d=e(b,1);return c!==d?c-d:0===c?b[1]-a[1]:1===c?a[0]-b[0]:2===c?a[1]-b[1]:b[0]-a[0]}return function(h){function i(a){for(var b=0,c=q.length,d=a[1],e=0;c>e;++e)for(var f,g=1,h=q[e],i=h.length,j=h[0];i>g;++g)f=h[g],j[1]<=d?f[1]>d&&$(j,f,a)>0&&++b:f[1]<=d&&$(j,f,a)<0&&--b,j=f;return 0!==b}function j(f,h,i,j){var k=0,l=0;if(null==f||(k=e(f,i))!==(l=e(h,i))||g(f,h)<0^i>0){do j.point(0===k||3===k?a:c,k>1?d:b);while((k=(k+i+4)%4)!==l)}else j.point(h[0],h[1])}function k(e,f){return e>=a&&c>=e&&f>=b&&d>=f}function l(a,b){k(a,b)&&h.point(a,b)}function m(){D.point=o,q&&q.push(r=[]),y=!0,x=!1,v=w=NaN}function n(){p&&(o(s,t),u&&x&&B.rejoin(),p.push(B.buffer())),D.point=l,x&&h.lineEnd()}function o(a,b){a=Math.max(-Dh,Math.min(Dh,a)),b=Math.max(-Dh,Math.min(Dh,b));var c=k(a,b);if(q&&r.push([a,b]),y)s=a,t=b,u=c,y=!1,c&&(h.lineStart(),h.point(a,b));else if(c&&x)h.point(a,b);else{var d={a:{x:v,y:w},b:{x:a,y:b}};C(d)?(x||(h.lineStart(),h.point(d.a.x,d.a.y)),h.point(d.b.x,d.b.y),c||h.lineEnd(),z=!1):c&&(h.lineStart(),h.point(a,b),z=!1)}v=a,w=b,x=c}var p,q,r,s,t,u,v,w,x,y,z,A=h,B=Hb(),C=Ob(a,b,c,d),D={point:l,lineStart:m,lineEnd:n,polygonStart:function(){h=B,p=[],q=[],z=!0},polygonEnd:function(){h=A,p=Wf.merge(p);var b=i([a,d]),c=z&&b,e=p.length;(c||e)&&(h.polygonStart(),c&&(h.lineStart(),j(null,null,1,h),h.lineEnd()),e&&Cb(p,f,b,j,h),h.polygonEnd()),p=q=r=null}};return D}}function Qb(a,b){function c(c,d){return c=a(c,d),b(c[0],c[1])}return a.invert&&b.invert&&(c.invert=function(c,d){return c=b.invert(c,d),c&&a.invert(c[0],c[1])}),c}function Rb(a){var b=0,c=Ag/3,d=fc(a),e=d(b,c);return e.parallels=function(a){return arguments.length?d(b=a[0]*Ag/180,c=a[1]*Ag/180):[b/Ag*180,c/Ag*180]},e}function Sb(a,b){function c(a,b){var c=Math.sqrt(f-2*e*Math.sin(b))/e;return[c*Math.sin(a*=e),g-c*Math.cos(a)]}var d=Math.sin(a),e=(d+Math.sin(b))/2,f=1+d*(2*e-d),g=Math.sqrt(f)/e;return c.invert=function(a,b){var c=g-b;return[Math.atan2(a,c)/e,aa((f-(a*a+c*c)*e*e)/(2*e))]},c}function Tb(){function a(a,b){Fh+=e*a-d*b,d=a,e=b}var b,c,d,e;Kh.point=function(f,g){Kh.point=a,b=d=f,c=e=g},Kh.lineEnd=function(){a(b,c)}}function Ub(a,b){Gh>a&&(Gh=a),a>Ih&&(Ih=a),Hh>b&&(Hh=b),b>Jh&&(Jh=b)}function Vb(){function a(a,b){g.push("M",a,",",b,f)}function b(a,b){g.push("M",a,",",b),h.point=c}function c(a,b){g.push("L",a,",",b)}function d(){h.point=a}function e(){g.push("Z")}var f=Wb(4.5),g=[],h={point:a,lineStart:function(){h.point=b},lineEnd:d,polygonStart:function(){h.lineEnd=e},polygonEnd:function(){h.lineEnd=d,h.point=a},pointRadius:function(a){return f=Wb(a),h},result:function(){if(g.length){var a=g.join("");return g=[],a}}};return h}function Wb(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function Xb(a,b){sh+=a,th+=b,++uh}function Yb(){function a(a,d){var e=a-b,f=d-c,g=Math.sqrt(e*e+f*f);vh+=g*(b+a)/2,
wh+=g*(c+d)/2,xh+=g,Xb(b=a,c=d)}var b,c;Mh.point=function(d,e){Mh.point=a,Xb(b=d,c=e)}}function Zb(){Mh.point=Xb}function $b(){function a(a,b){var c=a-d,f=b-e,g=Math.sqrt(c*c+f*f);vh+=g*(d+a)/2,wh+=g*(e+b)/2,xh+=g,g=e*a-d*b,yh+=g*(d+a),zh+=g*(e+b),Ah+=3*g,Xb(d=a,e=b)}var b,c,d,e;Mh.point=function(f,g){Mh.point=a,Xb(b=d=f,c=e=g)},Mh.lineEnd=function(){a(b,c)}}function _b(a){function b(b,c){a.moveTo(b,c),a.arc(b,c,g,0,Bg)}function c(b,c){a.moveTo(b,c),h.point=d}function d(b,c){a.lineTo(b,c)}function e(){h.point=b}function f(){a.closePath()}var g=4.5,h={point:b,lineStart:function(){h.point=c},lineEnd:e,polygonStart:function(){h.lineEnd=f},polygonEnd:function(){h.lineEnd=e,h.point=b},pointRadius:function(a){return g=a,h},result:s};return h}function ac(a){function b(a){return(h?d:c)(a)}function c(b){return dc(b,function(c,d){c=a(c,d),b.point(c[0],c[1])})}function d(b){function c(c,d){c=a(c,d),b.point(c[0],c[1])}function d(){t=NaN,y.point=f,b.lineStart()}function f(c,d){var f=ob([c,d]),g=a(c,d);e(t,u,s,v,w,x,t=g[0],u=g[1],s=c,v=f[0],w=f[1],x=f[2],h,b),b.point(t,u)}function g(){y.point=c,b.lineEnd()}function i(){d(),y.point=j,y.lineEnd=k}function j(a,b){f(l=a,m=b),n=t,o=u,p=v,q=w,r=x,y.point=f}function k(){e(t,u,s,v,w,x,n,o,l,p,q,r,h,b),y.lineEnd=g,g()}var l,m,n,o,p,q,r,s,t,u,v,w,x,y={point:c,lineStart:d,lineEnd:g,polygonStart:function(){b.polygonStart(),y.lineStart=i},polygonEnd:function(){b.polygonEnd(),y.lineStart=d}};return y}function e(b,c,d,h,i,j,k,l,m,n,o,p,q,r){var s=k-b,t=l-c,u=s*s+t*t;if(u>4*f&&q--){var v=h+n,w=i+o,x=j+p,y=Math.sqrt(v*v+w*w+x*x),z=Math.asin(x/=y),A=ig(ig(x)-1)<Dg||ig(d-m)<Dg?(d+m)/2:Math.atan2(w,v),B=a(A,z),C=B[0],D=B[1],E=C-b,F=D-c,G=t*E-s*F;(G*G/u>f||ig((s*E+t*F)/u-.5)>.3||g>h*n+i*o+j*p)&&(e(b,c,d,h,i,j,C,D,A,v/=y,w/=y,x,q,r),r.point(C,D),e(C,D,A,v,w,x,k,l,m,n,o,p,q,r))}}var f=.5,g=Math.cos(30*Fg),h=16;return b.precision=function(a){return arguments.length?(h=(f=a*a)>0&&16,b):Math.sqrt(f)},b}function bc(a){var b=ac(function(b,c){return a([b*Gg,c*Gg])});return function(a){return gc(b(a))}}function cc(a){this.stream=a}function dc(a,b){return{point:b,sphere:function(){a.sphere()},lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}}}function ec(a){return fc(function(){return a})()}function fc(a){function b(a){return a=h(a[0]*Fg,a[1]*Fg),[a[0]*m+i,j-a[1]*m]}function c(a){return a=h.invert((a[0]-i)/m,(j-a[1])/m),a&&[a[0]*Gg,a[1]*Gg]}function d(){h=Qb(g=jc(r,s,t),f);var a=f(p,q);return i=n-a[0]*m,j=o+a[1]*m,e()}function e(){return k&&(k.valid=!1,k=null),b}var f,g,h,i,j,k,l=ac(function(a,b){return a=f(a,b),[a[0]*m+i,j-a[1]*m]}),m=150,n=480,o=250,p=0,q=0,r=0,s=0,t=0,u=Ch,v=Aa,w=null,x=null;return b.stream=function(a){return k&&(k.valid=!1),k=gc(u(g,l(v(a)))),k.valid=!0,k},b.clipAngle=function(a){return arguments.length?(u=null==a?(w=a,Ch):Nb((w=+a)*Fg),e()):w},b.clipExtent=function(a){return arguments.length?(x=a,v=a?Pb(a[0][0],a[0][1],a[1][0],a[1][1]):Aa,e()):x},b.scale=function(a){return arguments.length?(m=+a,d()):m},b.translate=function(a){return arguments.length?(n=+a[0],o=+a[1],d()):[n,o]},b.center=function(a){return arguments.length?(p=a[0]%360*Fg,q=a[1]%360*Fg,d()):[p*Gg,q*Gg]},b.rotate=function(a){return arguments.length?(r=a[0]%360*Fg,s=a[1]%360*Fg,t=a.length>2?a[2]%360*Fg:0,d()):[r*Gg,s*Gg,t*Gg]},Wf.rebind(b,l,"precision"),function(){return f=a.apply(this,arguments),b.invert=f.invert&&c,d()}}function gc(a){return dc(a,function(b,c){a.point(b*Fg,c*Fg)})}function hc(a,b){return[a,b]}function ic(a,b){return[a>Ag?a-Bg:-Ag>a?a+Bg:a,b]}function jc(a,b,c){return a?b||c?Qb(lc(a),mc(b,c)):lc(a):b||c?mc(b,c):ic}function kc(a){return function(b,c){return b+=a,[b>Ag?b-Bg:-Ag>b?b+Bg:b,c]}}function lc(a){var b=kc(a);return b.invert=kc(-a),b}function mc(a,b){function c(a,b){var c=Math.cos(b),h=Math.cos(a)*c,i=Math.sin(a)*c,j=Math.sin(b),k=j*d+h*e;return[Math.atan2(i*f-k*g,h*d-j*e),aa(k*f+i*g)]}var d=Math.cos(a),e=Math.sin(a),f=Math.cos(b),g=Math.sin(b);return c.invert=function(a,b){var c=Math.cos(b),h=Math.cos(a)*c,i=Math.sin(a)*c,j=Math.sin(b),k=j*f-i*g;return[Math.atan2(i*f+j*g,h*d+k*e),aa(k*d-h*e)]},c}function nc(a,b){var c=Math.cos(a),d=Math.sin(a);return function(e,f,g,h){var i=g*b;null!=e?(e=oc(c,e),f=oc(c,f),(g>0?f>e:e>f)&&(e+=g*Bg)):(e=a+g*Bg,f=a-.5*i);for(var j,k=e;g>0?k>f:f>k;k-=i)h.point((j=ub([c,-d*Math.cos(k),-d*Math.sin(k)]))[0],j[1])}}function oc(a,b){var c=ob(b);c[0]-=a,tb(c);var d=_(-c[1]);return((-c[2]<0?-d:d)+2*Math.PI-Dg)%(2*Math.PI)}function pc(a,b,c){var d=Wf.range(a,b-Dg,c).concat(b);return function(a){return d.map(function(b){return[a,b]})}}function qc(a,b,c){var d=Wf.range(a,b-Dg,c).concat(b);return function(a){return d.map(function(b){return[b,a]})}}function rc(a){return a.source}function sc(a){return a.target}function tc(a,b,c,d){var e=Math.cos(b),f=Math.sin(b),g=Math.cos(d),h=Math.sin(d),i=e*Math.cos(a),j=e*Math.sin(a),k=g*Math.cos(c),l=g*Math.sin(c),m=2*Math.asin(Math.sqrt(ea(d-b)+e*g*ea(c-a))),n=1/Math.sin(m),o=m?function(a){var b=Math.sin(a*=m)*n,c=Math.sin(m-a)*n,d=c*i+b*k,e=c*j+b*l,g=c*f+b*h;return[Math.atan2(e,d)*Gg,Math.atan2(g,Math.sqrt(d*d+e*e))*Gg]}:function(){return[a*Gg,b*Gg]};return o.distance=m,o}function uc(){function a(a,e){var f=Math.sin(e*=Fg),g=Math.cos(e),h=ig((a*=Fg)-b),i=Math.cos(h);Nh+=Math.atan2(Math.sqrt((h=g*Math.sin(h))*h+(h=d*f-c*g*i)*h),c*f+d*g*i),b=a,c=f,d=g}var b,c,d;Oh.point=function(e,f){b=e*Fg,c=Math.sin(f*=Fg),d=Math.cos(f),Oh.point=a},Oh.lineEnd=function(){Oh.point=Oh.lineEnd=s}}function vc(a,b){function c(b,c){var d=Math.cos(b),e=Math.cos(c),f=a(d*e);return[f*e*Math.sin(b),f*Math.sin(c)]}return c.invert=function(a,c){var d=Math.sqrt(a*a+c*c),e=b(d),f=Math.sin(e),g=Math.cos(e);return[Math.atan2(a*f,d*g),Math.asin(d&&c*f/d)]},c}function wc(a,b){function c(a,b){g>0?-Cg+Dg>b&&(b=-Cg+Dg):b>Cg-Dg&&(b=Cg-Dg);var c=g/Math.pow(e(b),f);return[c*Math.sin(f*a),g-c*Math.cos(f*a)]}var d=Math.cos(a),e=function(a){return Math.tan(Ag/4+a/2)},f=a===b?Math.sin(a):Math.log(d/Math.cos(b))/Math.log(e(b)/e(a)),g=d*Math.pow(e(a),f)/f;return f?(c.invert=function(a,b){var c=g-b,d=Z(f)*Math.sqrt(a*a+c*c);return[Math.atan2(a,c)/f,2*Math.atan(Math.pow(g/d,1/f))-Cg]},c):yc}function xc(a,b){function c(a,b){var c=f-b;return[c*Math.sin(e*a),f-c*Math.cos(e*a)]}var d=Math.cos(a),e=a===b?Math.sin(a):(d-Math.cos(b))/(b-a),f=d/e+a;return ig(e)<Dg?hc:(c.invert=function(a,b){var c=f-b;return[Math.atan2(a,c)/e,f-Z(e)*Math.sqrt(a*a+c*c)]},c)}function yc(a,b){return[a,Math.log(Math.tan(Ag/4+b/2))]}function zc(a){var b,c=ec(a),d=c.scale,e=c.translate,f=c.clipExtent;return c.scale=function(){var a=d.apply(c,arguments);return a===c?b?c.clipExtent(null):c:a},c.translate=function(){var a=e.apply(c,arguments);return a===c?b?c.clipExtent(null):c:a},c.clipExtent=function(a){var g=f.apply(c,arguments);if(g===c){if(b=null==a){var h=Ag*d(),i=e();f([[i[0]-h,i[1]-h],[i[0]+h,i[1]+h]])}}else b&&(g=null);return g},c.clipExtent(null)}function Ac(a,b){return[Math.log(Math.tan(Ag/4+b/2)),-a]}function Bc(a){return a[0]}function Cc(a){return a[1]}function Dc(a){for(var b=a.length,c=[0,1],d=2,e=2;b>e;e++){for(;d>1&&$(a[c[d-2]],a[c[d-1]],a[e])<=0;)--d;c[d++]=e}return c.slice(0,d)}function Ec(a,b){return a[0]-b[0]||a[1]-b[1]}function Fc(a,b,c){return(c[0]-b[0])*(a[1]-b[1])<(c[1]-b[1])*(a[0]-b[0])}function Gc(a,b,c,d){var e=a[0],f=c[0],g=b[0]-e,h=d[0]-f,i=a[1],j=c[1],k=b[1]-i,l=d[1]-j,m=(h*(i-j)-l*(e-f))/(l*g-h*k);return[e+m*g,i+m*k]}function Hc(a){var b=a[0],c=a[a.length-1];return!(b[0]-c[0]||b[1]-c[1])}function Ic(){bd(this),this.edge=this.site=this.circle=null}function Jc(a){var b=$h.pop()||new Ic;return b.site=a,b}function Kc(a){Uc(a),Xh.remove(a),$h.push(a),bd(a)}function Lc(a){var b=a.circle,c=b.x,d=b.cy,e={x:c,y:d},f=a.P,g=a.N,h=[a];Kc(a);for(var i=f;i.circle&&ig(c-i.circle.x)<Dg&&ig(d-i.circle.cy)<Dg;)f=i.P,h.unshift(i),Kc(i),i=f;h.unshift(i),Uc(i);for(var j=g;j.circle&&ig(c-j.circle.x)<Dg&&ig(d-j.circle.cy)<Dg;)g=j.N,h.push(j),Kc(j),j=g;h.push(j),Uc(j);var k,l=h.length;for(k=1;l>k;++k)j=h[k],i=h[k-1],$c(j.edge,i.site,j.site,e);i=h[0],j=h[l-1],j.edge=Yc(i.site,j.site,null,e),Tc(i),Tc(j)}function Mc(a){for(var b,c,d,e,f=a.x,g=a.y,h=Xh._;h;)if(d=Nc(h,g)-f,d>Dg)h=h.L;else{if(e=f-Oc(h,g),!(e>Dg)){d>-Dg?(b=h.P,c=h):e>-Dg?(b=h,c=h.N):b=c=h;break}if(!h.R){b=h;break}h=h.R}var i=Jc(a);if(Xh.insert(b,i),b||c){if(b===c)return Uc(b),c=Jc(b.site),Xh.insert(i,c),i.edge=c.edge=Yc(b.site,i.site),Tc(b),void Tc(c);if(!c)return void(i.edge=Yc(b.site,i.site));Uc(b),Uc(c);var j=b.site,k=j.x,l=j.y,m=a.x-k,n=a.y-l,o=c.site,p=o.x-k,q=o.y-l,r=2*(m*q-n*p),s=m*m+n*n,t=p*p+q*q,u={x:(q*s-n*t)/r+k,y:(m*t-p*s)/r+l};$c(c.edge,j,o,u),i.edge=Yc(j,a,null,u),c.edge=Yc(a,o,null,u),Tc(b),Tc(c)}}function Nc(a,b){var c=a.site,d=c.x,e=c.y,f=e-b;if(!f)return d;var g=a.P;if(!g)return-(1/0);c=g.site;var h=c.x,i=c.y,j=i-b;if(!j)return h;var k=h-d,l=1/f-1/j,m=k/j;return l?(-m+Math.sqrt(m*m-2*l*(k*k/(-2*j)-i+j/2+e-f/2)))/l+d:(d+h)/2}function Oc(a,b){var c=a.N;if(c)return Nc(c,b);var d=a.site;return d.y===b?d.x:1/0}function Pc(a){this.site=a,this.edges=[]}function Qc(a){for(var b,c,d,e,f,g,h,i,j,k,l=a[0][0],m=a[1][0],n=a[0][1],o=a[1][1],p=Wh,q=p.length;q--;)if(f=p[q],f&&f.prepare())for(h=f.edges,i=h.length,g=0;i>g;)k=h[g].end(),d=k.x,e=k.y,j=h[++g%i].start(),b=j.x,c=j.y,(ig(d-b)>Dg||ig(e-c)>Dg)&&(h.splice(g,0,new _c(Zc(f.site,k,ig(d-l)<Dg&&o-e>Dg?{x:l,y:ig(b-l)<Dg?c:o}:ig(e-o)<Dg&&m-d>Dg?{x:ig(c-o)<Dg?b:m,y:o}:ig(d-m)<Dg&&e-n>Dg?{x:m,y:ig(b-m)<Dg?c:n}:ig(e-n)<Dg&&d-l>Dg?{x:ig(c-n)<Dg?b:l,y:n}:null),f.site,null)),++i)}function Rc(a,b){return b.angle-a.angle}function Sc(){bd(this),this.x=this.y=this.arc=this.site=this.cy=null}function Tc(a){var b=a.P,c=a.N;if(b&&c){var d=b.site,e=a.site,f=c.site;if(d!==f){var g=e.x,h=e.y,i=d.x-g,j=d.y-h,k=f.x-g,l=f.y-h,m=2*(i*l-j*k);if(!(m>=-Eg)){var n=i*i+j*j,o=k*k+l*l,p=(l*n-j*o)/m,q=(i*o-k*n)/m,l=q+h,r=_h.pop()||new Sc;r.arc=a,r.site=e,r.x=p+g,r.y=l+Math.sqrt(p*p+q*q),r.cy=l,a.circle=r;for(var s=null,t=Zh._;t;)if(r.y<t.y||r.y===t.y&&r.x<=t.x){if(!t.L){s=t.P;break}t=t.L}else{if(!t.R){s=t;break}t=t.R}Zh.insert(s,r),s||(Yh=r)}}}}function Uc(a){var b=a.circle;b&&(b.P||(Yh=b.N),Zh.remove(b),_h.push(b),bd(b),a.circle=null)}function Vc(a){for(var b,c=Vh,d=Ob(a[0][0],a[0][1],a[1][0],a[1][1]),e=c.length;e--;)b=c[e],(!Wc(b,a)||!d(b)||ig(b.a.x-b.b.x)<Dg&&ig(b.a.y-b.b.y)<Dg)&&(b.a=b.b=null,c.splice(e,1))}function Wc(a,b){var c=a.b;if(c)return!0;var d,e,f=a.a,g=b[0][0],h=b[1][0],i=b[0][1],j=b[1][1],k=a.l,l=a.r,m=k.x,n=k.y,o=l.x,p=l.y,q=(m+o)/2,r=(n+p)/2;if(p===n){if(g>q||q>=h)return;if(m>o){if(f){if(f.y>=j)return}else f={x:q,y:i};c={x:q,y:j}}else{if(f){if(f.y<i)return}else f={x:q,y:j};c={x:q,y:i}}}else if(d=(m-o)/(p-n),e=r-d*q,-1>d||d>1)if(m>o){if(f){if(f.y>=j)return}else f={x:(i-e)/d,y:i};c={x:(j-e)/d,y:j}}else{if(f){if(f.y<i)return}else f={x:(j-e)/d,y:j};c={x:(i-e)/d,y:i}}else if(p>n){if(f){if(f.x>=h)return}else f={x:g,y:d*g+e};c={x:h,y:d*h+e}}else{if(f){if(f.x<g)return}else f={x:h,y:d*h+e};c={x:g,y:d*g+e}}return a.a=f,a.b=c,!0}function Xc(a,b){this.l=a,this.r=b,this.a=this.b=null}function Yc(a,b,c,d){var e=new Xc(a,b);return Vh.push(e),c&&$c(e,a,b,c),d&&$c(e,b,a,d),Wh[a.i].edges.push(new _c(e,a,b)),Wh[b.i].edges.push(new _c(e,b,a)),e}function Zc(a,b,c){var d=new Xc(a,null);return d.a=b,d.b=c,Vh.push(d),d}function $c(a,b,c,d){a.a||a.b?a.l===c?a.b=d:a.a=d:(a.a=d,a.l=b,a.r=c)}function _c(a,b,c){var d=a.a,e=a.b;this.edge=a,this.site=b,this.angle=c?Math.atan2(c.y-b.y,c.x-b.x):a.l===b?Math.atan2(e.x-d.x,d.y-e.y):Math.atan2(d.x-e.x,e.y-d.y)}function ad(){this._=null}function bd(a){a.U=a.C=a.L=a.R=a.P=a.N=null}function cd(a,b){var c=b,d=b.R,e=c.U;e?e.L===c?e.L=d:e.R=d:a._=d,d.U=e,c.U=d,c.R=d.L,c.R&&(c.R.U=c),d.L=c}function dd(a,b){var c=b,d=b.L,e=c.U;e?e.L===c?e.L=d:e.R=d:a._=d,d.U=e,c.U=d,c.L=d.R,c.L&&(c.L.U=c),d.R=c}function ed(a){for(;a.L;)a=a.L;return a}function fd(a,b){var c,d,e,f=a.sort(gd).pop();for(Vh=[],Wh=new Array(a.length),Xh=new ad,Zh=new ad;;)if(e=Yh,f&&(!e||f.y<e.y||f.y===e.y&&f.x<e.x))f.x===c&&f.y===d||(Wh[f.i]=new Pc(f),Mc(f),c=f.x,d=f.y),f=a.pop();else{if(!e)break;Lc(e.arc)}b&&(Vc(b),Qc(b));var g={cells:Wh,edges:Vh};return Xh=Zh=Vh=Wh=null,g}function gd(a,b){return b.y-a.y||b.x-a.x}function hd(a,b,c){return(a.x-c.x)*(b.y-a.y)-(a.x-b.x)*(c.y-a.y)}function id(a){return a.x}function jd(a){return a.y}function kd(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function ld(a,b,c,d,e,f){if(!a(b,c,d,e,f)){var g=.5*(c+e),h=.5*(d+f),i=b.nodes;i[0]&&ld(a,i[0],c,d,g,h),i[1]&&ld(a,i[1],g,d,e,h),i[2]&&ld(a,i[2],c,h,g,f),i[3]&&ld(a,i[3],g,h,e,f)}}function md(a,b){a=Wf.rgb(a),b=Wf.rgb(b);var c=a.r,d=a.g,e=a.b,f=b.r-c,g=b.g-d,h=b.b-e;return function(a){return"#"+ta(Math.round(c+f*a))+ta(Math.round(d+g*a))+ta(Math.round(e+h*a))}}function nd(a,b){var c,d={},e={};for(c in a)c in b?d[c]=qd(a[c],b[c]):e[c]=a[c];for(c in b)c in a||(e[c]=b[c]);return function(a){for(c in d)e[c]=d[c](a);return e}}function od(a,b){return a=+a,b=+b,function(c){return a*(1-c)+b*c}}function pd(a,b){var c,d,e,f=bi.lastIndex=ci.lastIndex=0,g=-1,h=[],i=[];for(a+="",b+="";(c=bi.exec(a))&&(d=ci.exec(b));)(e=d.index)>f&&(e=b.slice(f,e),h[g]?h[g]+=e:h[++g]=e),(c=c[0])===(d=d[0])?h[g]?h[g]+=d:h[++g]=d:(h[++g]=null,i.push({i:g,x:od(c,d)})),f=ci.lastIndex;return f<b.length&&(e=b.slice(f),h[g]?h[g]+=e:h[++g]=e),h.length<2?i[0]?(b=i[0].x,function(a){return b(a)+""}):function(){return b}:(b=i.length,function(a){for(var c,d=0;b>d;++d)h[(c=i[d]).i]=c.x(a);return h.join("")})}function qd(a,b){for(var c,d=Wf.interpolators.length;--d>=0&&!(c=Wf.interpolators[d](a,b)););return c}function rd(a,b){var c,d=[],e=[],f=a.length,g=b.length,h=Math.min(a.length,b.length);for(c=0;h>c;++c)d.push(qd(a[c],b[c]));for(;f>c;++c)e[c]=a[c];for(;g>c;++c)e[c]=b[c];return function(a){for(c=0;h>c;++c)e[c]=d[c](a);return e}}function sd(a){return function(b){return 0>=b?0:b>=1?1:a(b)}}function td(a){return function(b){return 1-a(1-b)}}function ud(a){return function(b){return.5*(.5>b?a(2*b):2-a(2-2*b))}}function vd(a){return a*a}function wd(a){return a*a*a}function xd(a){if(0>=a)return 0;if(a>=1)return 1;var b=a*a,c=b*a;return 4*(.5>a?c:3*(a-b)+c-.75)}function yd(a){return function(b){return Math.pow(b,a)}}function zd(a){return 1-Math.cos(a*Cg)}function Ad(a){return Math.pow(2,10*(a-1))}function Bd(a){return 1-Math.sqrt(1-a*a)}function Cd(a,b){var c;return arguments.length<2&&(b=.45),arguments.length?c=b/Bg*Math.asin(1/a):(a=1,c=b/4),function(d){return 1+a*Math.pow(2,-10*d)*Math.sin((d-c)*Bg/b)}}function Dd(a){return a||(a=1.70158),function(b){return b*b*((a+1)*b-a)}}function Ed(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}function Fd(a,b){a=Wf.hcl(a),b=Wf.hcl(b);var c=a.h,d=a.c,e=a.l,f=b.h-c,g=b.c-d,h=b.l-e;return isNaN(g)&&(g=0,d=isNaN(d)?b.c:d),isNaN(f)?(f=0,c=isNaN(c)?b.h:c):f>180?f-=360:-180>f&&(f+=360),function(a){return ja(c+f*a,d+g*a,e+h*a)+""}}function Gd(a,b){a=Wf.hsl(a),b=Wf.hsl(b);var c=a.h,d=a.s,e=a.l,f=b.h-c,g=b.s-d,h=b.l-e;return isNaN(g)&&(g=0,d=isNaN(d)?b.s:d),isNaN(f)?(f=0,c=isNaN(c)?b.h:c):f>180?f-=360:-180>f&&(f+=360),function(a){return ha(c+f*a,d+g*a,e+h*a)+""}}function Hd(a,b){a=Wf.lab(a),b=Wf.lab(b);var c=a.l,d=a.a,e=a.b,f=b.l-c,g=b.a-d,h=b.b-e;return function(a){return la(c+f*a,d+g*a,e+h*a)+""}}function Id(a,b){return b-=a,function(c){return Math.round(a+b*c)}}function Jd(a){var b=[a.a,a.b],c=[a.c,a.d],d=Ld(b),e=Kd(b,c),f=Ld(Md(c,b,-e))||0;b[0]*c[1]<c[0]*b[1]&&(b[0]*=-1,b[1]*=-1,d*=-1,e*=-1),this.rotate=(d?Math.atan2(b[1],b[0]):Math.atan2(-c[0],c[1]))*Gg,this.translate=[a.e,a.f],this.scale=[d,f],this.skew=f?Math.atan2(e,f)*Gg:0}function Kd(a,b){return a[0]*b[0]+a[1]*b[1]}function Ld(a){var b=Math.sqrt(Kd(a,a));return b&&(a[0]/=b,a[1]/=b),b}function Md(a,b,c){return a[0]+=c*b[0],a[1]+=c*b[1],a}function Nd(a,b){var c,d=[],e=[],f=Wf.transform(a),g=Wf.transform(b),h=f.translate,i=g.translate,j=f.rotate,k=g.rotate,l=f.skew,m=g.skew,n=f.scale,o=g.scale;return h[0]!=i[0]||h[1]!=i[1]?(d.push("translate(",null,",",null,")"),e.push({i:1,x:od(h[0],i[0])},{i:3,x:od(h[1],i[1])})):i[0]||i[1]?d.push("translate("+i+")"):d.push(""),j!=k?(j-k>180?k+=360:k-j>180&&(j+=360),e.push({i:d.push(d.pop()+"rotate(",null,")")-2,x:od(j,k)})):k&&d.push(d.pop()+"rotate("+k+")"),l!=m?e.push({i:d.push(d.pop()+"skewX(",null,")")-2,x:od(l,m)}):m&&d.push(d.pop()+"skewX("+m+")"),n[0]!=o[0]||n[1]!=o[1]?(c=d.push(d.pop()+"scale(",null,",",null,")"),e.push({i:c-4,x:od(n[0],o[0])},{i:c-2,x:od(n[1],o[1])})):1==o[0]&&1==o[1]||d.push(d.pop()+"scale("+o+")"),c=e.length,function(a){for(var b,f=-1;++f<c;)d[(b=e[f]).i]=b.x(a);return d.join("")}}function Od(a,b){return b=(b-=a=+a)||1/b,function(c){return(c-a)/b}}function Pd(a,b){return b=(b-=a=+a)||1/b,function(c){return Math.max(0,Math.min(1,(c-a)/b))}}function Qd(a){for(var b=a.source,c=a.target,d=Sd(b,c),e=[b];b!==d;)b=b.parent,e.push(b);for(var f=e.length;c!==d;)e.splice(f,0,c),c=c.parent;return e}function Rd(a){for(var b=[],c=a.parent;null!=c;)b.push(a),a=c,c=c.parent;return b.push(a),b}function Sd(a,b){if(a===b)return a;for(var c=Rd(a),d=Rd(b),e=c.pop(),f=d.pop(),g=null;e===f;)g=e,e=c.pop(),f=d.pop();return g}function Td(a){a.fixed|=2}function Ud(a){a.fixed&=-7}function Vd(a){a.fixed|=4,a.px=a.x,a.py=a.y}function Wd(a){a.fixed&=-5}function Xd(a,b,c){var d=0,e=0;if(a.charge=0,!a.leaf)for(var f,g=a.nodes,h=g.length,i=-1;++i<h;)f=g[i],null!=f&&(Xd(f,b,c),a.charge+=f.charge,d+=f.charge*f.cx,e+=f.charge*f.cy);if(a.point){a.leaf||(a.point.x+=Math.random()-.5,a.point.y+=Math.random()-.5);var j=b*c[a.point.index];a.charge+=a.pointCharge=j,d+=j*a.point.x,e+=j*a.point.y}a.cx=d/a.charge,a.cy=e/a.charge}function Yd(a,b){return Wf.rebind(a,b,"sort","children","value"),a.nodes=a,a.links=ce,a}function Zd(a,b){for(var c=[a];null!=(a=c.pop());)if(b(a),(e=a.children)&&(d=e.length))for(var d,e;--d>=0;)c.push(e[d])}function $d(a,b){for(var c=[a],d=[];null!=(a=c.pop());)if(d.push(a),(f=a.children)&&(e=f.length))for(var e,f,g=-1;++g<e;)c.push(f[g]);for(;null!=(a=d.pop());)b(a)}function _d(a){return a.children}function ae(a){return a.value}function be(a,b){return b.value-a.value}function ce(a){return Wf.merge(a.map(function(a){return(a.children||[]).map(function(b){return{source:a,target:b}})}))}function de(a){return a.x}function ee(a){return a.y}function fe(a,b,c){a.y0=b,a.y=c}function ge(a){return Wf.range(a.length)}function he(a){for(var b=-1,c=a[0].length,d=[];++b<c;)d[b]=0;return d}function ie(a){for(var b,c=1,d=0,e=a[0][1],f=a.length;f>c;++c)(b=a[c][1])>e&&(d=c,e=b);return d}function je(a){return a.reduce(ke,0)}function ke(a,b){return a+b[1]}function le(a,b){return me(a,Math.ceil(Math.log(b.length)/Math.LN2+1))}function me(a,b){for(var c=-1,d=+a[0],e=(a[1]-d)/b,f=[];++c<=b;)f[c]=e*c+d;return f}function ne(a){return[Wf.min(a),Wf.max(a)]}function oe(a,b){return a.value-b.value}function pe(a,b){var c=a._pack_next;a._pack_next=b,b._pack_prev=a,b._pack_next=c,c._pack_prev=b}function qe(a,b){a._pack_next=b,b._pack_prev=a}function re(a,b){var c=b.x-a.x,d=b.y-a.y,e=a.r+b.r;return.999*e*e>c*c+d*d}function se(a){function b(a){k=Math.min(a.x-a.r,k),l=Math.max(a.x+a.r,l),m=Math.min(a.y-a.r,m),n=Math.max(a.y+a.r,n)}if((c=a.children)&&(j=c.length)){var c,d,e,f,g,h,i,j,k=1/0,l=-(1/0),m=1/0,n=-(1/0);if(c.forEach(te),d=c[0],d.x=-d.r,d.y=0,b(d),j>1&&(e=c[1],e.x=e.r,e.y=0,b(e),j>2))for(f=c[2],we(d,e,f),b(f),pe(d,f),d._pack_prev=f,pe(f,e),e=d._pack_next,g=3;j>g;g++){we(d,e,f=c[g]);var o=0,p=1,q=1;for(h=e._pack_next;h!==e;h=h._pack_next,p++)if(re(h,f)){o=1;break}if(1==o)for(i=d._pack_prev;i!==h._pack_prev&&!re(i,f);i=i._pack_prev,q++);o?(q>p||p==q&&e.r<d.r?qe(d,e=h):qe(d=i,e),g--):(pe(d,f),e=f,b(f))}var r=(k+l)/2,s=(m+n)/2,t=0;for(g=0;j>g;g++)f=c[g],f.x-=r,f.y-=s,t=Math.max(t,f.r+Math.sqrt(f.x*f.x+f.y*f.y));a.r=t,c.forEach(ue)}}function te(a){a._pack_next=a._pack_prev=a}function ue(a){delete a._pack_next,delete a._pack_prev}function ve(a,b,c,d){var e=a.children;if(a.x=b+=d*a.x,a.y=c+=d*a.y,a.r*=d,e)for(var f=-1,g=e.length;++f<g;)ve(e[f],b,c,d)}function we(a,b,c){var d=a.r+c.r,e=b.x-a.x,f=b.y-a.y;if(d&&(e||f)){var g=b.r+c.r,h=e*e+f*f;g*=g,d*=d;var i=.5+(d-g)/(2*h),j=Math.sqrt(Math.max(0,2*g*(d+h)-(d-=h)*d-g*g))/(2*h);c.x=a.x+i*e+j*f,c.y=a.y+i*f-j*e}else c.x=a.x+d,c.y=a.y}function xe(a,b){return a.parent==b.parent?1:2}function ye(a){var b=a.children;return b.length?b[0]:a.t}function ze(a){var b,c=a.children;return(b=c.length)?c[b-1]:a.t}function Ae(a,b,c){var d=c/(b.i-a.i);b.c-=d,b.s+=c,a.c+=d,b.z+=c,b.m+=c}function Be(a){for(var b,c=0,d=0,e=a.children,f=e.length;--f>=0;)b=e[f],b.z+=c,b.m+=c,c+=b.s+(d+=b.c)}function Ce(a,b,c){return a.a.parent===b.parent?a.a:c}function De(a){return 1+Wf.max(a,function(a){return a.y})}function Ee(a){return a.reduce(function(a,b){return a+b.x},0)/a.length}function Fe(a){var b=a.children;return b&&b.length?Fe(b[0]):a}function Ge(a){var b,c=a.children;return c&&(b=c.length)?Ge(c[b-1]):a}function He(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function Ie(a,b){var c=a.x+b[3],d=a.y+b[0],e=a.dx-b[1]-b[3],f=a.dy-b[0]-b[2];return 0>e&&(c+=e/2,e=0),0>f&&(d+=f/2,f=0),{x:c,y:d,dx:e,dy:f}}function Je(a){var b=a[0],c=a[a.length-1];return c>b?[b,c]:[c,b]}function Ke(a){return a.rangeExtent?a.rangeExtent():Je(a.range())}function Le(a,b,c,d){var e=c(a[0],a[1]),f=d(b[0],b[1]);return function(a){return f(e(a))}}function Me(a,b){var c,d=0,e=a.length-1,f=a[d],g=a[e];return f>g&&(c=d,d=e,e=c,c=f,f=g,g=c),a[d]=b.floor(f),a[e]=b.ceil(g),a}function Ne(a){return a?{floor:function(b){return Math.floor(b/a)*a},ceil:function(b){return Math.ceil(b/a)*a}}:ni}function Oe(a,b,c,d){var e=[],f=[],g=0,h=Math.min(a.length,b.length)-1;for(a[h]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());++g<=h;)e.push(c(a[g-1],a[g])),f.push(d(b[g-1],b[g]));return function(b){var c=Wf.bisect(a,b,1,h)-1;return f[c](e[c](b))}}function Pe(a,b,c,d){function e(){var e=Math.min(a.length,b.length)>2?Oe:Le,i=d?Pd:Od;return g=e(a,b,i,c),h=e(b,a,i,qd),f}function f(a){return g(a)}var g,h;return f.invert=function(a){return h(a)},f.domain=function(b){return arguments.length?(a=b.map(Number),e()):a},f.range=function(a){return arguments.length?(b=a,e()):b},f.rangeRound=function(a){return f.range(a).interpolate(Id)},f.clamp=function(a){return arguments.length?(d=a,e()):d},f.interpolate=function(a){return arguments.length?(c=a,e()):c},f.ticks=function(b){return Te(a,b)},f.tickFormat=function(b,c){return Ue(a,b,c)},f.nice=function(b){return Re(a,b),e()},f.copy=function(){return Pe(a,b,c,d)},e()}function Qe(a,b){return Wf.rebind(a,b,"range","rangeRound","interpolate","clamp")}function Re(a,b){return Me(a,Ne(Se(a,b)[2]))}function Se(a,b){null==b&&(b=10);var c=Je(a),d=c[1]-c[0],e=Math.pow(10,Math.floor(Math.log(d/b)/Math.LN10)),f=b/d*e;return.15>=f?e*=10:.35>=f?e*=5:.75>=f&&(e*=2),c[0]=Math.ceil(c[0]/e)*e,c[1]=Math.floor(c[1]/e)*e+.5*e,c[2]=e,c}function Te(a,b){return Wf.range.apply(Wf,Se(a,b))}function Ue(a,b,c){var d=Se(a,b);if(c){var e=bh.exec(c);if(e.shift(),"s"===e[8]){var f=Wf.formatPrefix(Math.max(ig(d[0]),ig(d[1])));return e[7]||(e[7]="."+Ve(f.scale(d[2]))),e[8]="f",c=Wf.format(e.join("")),function(a){return c(f.scale(a))+f.symbol}}e[7]||(e[7]="."+We(e[8],d)),c=e.join("")}else c=",."+Ve(d[2])+"f";return Wf.format(c)}function Ve(a){return-Math.floor(Math.log(a)/Math.LN10+.01)}function We(a,b){var c=Ve(b[2]);return a in oi?Math.abs(c-Ve(Math.max(ig(b[0]),ig(b[1]))))+ +("e"!==a):c-2*("%"===a)}function Xe(a,b,c,d){function e(a){return(c?Math.log(0>a?0:a):-Math.log(a>0?0:-a))/Math.log(b)}function f(a){return c?Math.pow(b,a):-Math.pow(b,-a)}function g(b){return a(e(b))}return g.invert=function(b){return f(a.invert(b))},g.domain=function(b){return arguments.length?(c=b[0]>=0,a.domain((d=b.map(Number)).map(e)),g):d},g.base=function(c){return arguments.length?(b=+c,a.domain(d.map(e)),g):b},g.nice=function(){var b=Me(d.map(e),c?Math:qi);return a.domain(b),d=b.map(f),g},g.ticks=function(){var a=Je(d),g=[],h=a[0],i=a[1],j=Math.floor(e(h)),k=Math.ceil(e(i)),l=b%1?2:b;if(isFinite(k-j)){if(c){for(;k>j;j++)for(var m=1;l>m;m++)g.push(f(j)*m);g.push(f(j))}else for(g.push(f(j));j++<k;)for(var m=l-1;m>0;m--)g.push(f(j)*m);for(j=0;g[j]<h;j++);for(k=g.length;g[k-1]>i;k--);g=g.slice(j,k)}return g},g.tickFormat=function(a,b){if(!arguments.length)return pi;arguments.length<2?b=pi:"function"!=typeof b&&(b=Wf.format(b));var d,h=Math.max(.1,a/g.ticks().length),i=c?(d=1e-12,Math.ceil):(d=-1e-12,Math.floor);return function(a){return a/f(i(e(a)+d))<=h?b(a):""}},g.copy=function(){return Xe(a.copy(),b,c,d)},Qe(g,a)}function Ye(a,b,c){function d(b){return a(e(b))}var e=Ze(b),f=Ze(1/b);return d.invert=function(b){return f(a.invert(b))},d.domain=function(b){return arguments.length?(a.domain((c=b.map(Number)).map(e)),d):c},d.ticks=function(a){return Te(c,a)},d.tickFormat=function(a,b){return Ue(c,a,b)},d.nice=function(a){return d.domain(Re(c,a))},d.exponent=function(g){return arguments.length?(e=Ze(b=g),f=Ze(1/b),a.domain(c.map(e)),d):b},d.copy=function(){return Ye(a.copy(),b,c)},Qe(d,a)}function Ze(a){return function(b){return 0>b?-Math.pow(-b,a):Math.pow(b,a)}}function $e(a,b){function c(c){return f[((e.get(c)||("range"===b.t?e.set(c,a.push(c)):NaN))-1)%f.length]}function d(b,c){return Wf.range(a.length).map(function(a){return b+c*a})}var e,f,g;return c.domain=function(d){if(!arguments.length)return a;a=[],e=new h;for(var f,g=-1,i=d.length;++g<i;)e.has(f=d[g])||e.set(f,a.push(f));return c[b.t].apply(c,b.a)},c.range=function(a){return arguments.length?(f=a,g=0,b={t:"range",a:arguments},c):f},c.rangePoints=function(e,h){arguments.length<2&&(h=0);var i=e[0],j=e[1],k=(j-i)/(Math.max(1,a.length-1)+h);return f=d(a.length<2?(i+j)/2:i+k*h/2,k),g=0,b={t:"rangePoints",a:arguments},c},c.rangeBands=function(e,h,i){arguments.length<2&&(h=0),arguments.length<3&&(i=h);var j=e[1]<e[0],k=e[j-0],l=e[1-j],m=(l-k)/(a.length-h+2*i);return f=d(k+m*i,m),j&&f.reverse(),g=m*(1-h),b={t:"rangeBands",a:arguments},c},c.rangeRoundBands=function(e,h,i){arguments.length<2&&(h=0),arguments.length<3&&(i=h);var j=e[1]<e[0],k=e[j-0],l=e[1-j],m=Math.floor((l-k)/(a.length-h+2*i)),n=l-k-(a.length-h)*m;return f=d(k+Math.round(n/2),m),j&&f.reverse(),g=Math.round(m*(1-h)),b={t:"rangeRoundBands",a:arguments},c},c.rangeBand=function(){return g},c.rangeExtent=function(){return Je(b.a[0])},c.copy=function(){return $e(a,b)},c.domain(a)}function _e(d,e){function f(){var a=0,b=e.length;for(h=[];++a<b;)h[a-1]=Wf.quantile(d,a/b);return g}function g(a){return isNaN(a=+a)?void 0:e[Wf.bisect(h,a)]}var h;return g.domain=function(e){return arguments.length?(d=e.map(b).filter(c).sort(a),f()):d},g.range=function(a){return arguments.length?(e=a,f()):e},g.quantiles=function(){return h},g.invertExtent=function(a){return a=e.indexOf(a),0>a?[NaN,NaN]:[a>0?h[a-1]:d[0],a<h.length?h[a]:d[d.length-1]]},g.copy=function(){return _e(d,e)},f()}function af(a,b,c){function d(b){return c[Math.max(0,Math.min(g,Math.floor(f*(b-a))))]}function e(){return f=c.length/(b-a),g=c.length-1,d}var f,g;return d.domain=function(c){return arguments.length?(a=+c[0],b=+c[c.length-1],e()):[a,b]},d.range=function(a){return arguments.length?(c=a,e()):c},d.invertExtent=function(b){return b=c.indexOf(b),b=0>b?NaN:b/f+a,[b,b+1/f]},d.copy=function(){return af(a,b,c)},e()}function bf(a,b){function c(c){return c>=c?b[Wf.bisect(a,c)]:void 0}return c.domain=function(b){return arguments.length?(a=b,c):a},c.range=function(a){return arguments.length?(b=a,c):b},c.invertExtent=function(c){return c=b.indexOf(c),[a[c-1],a[c]]},c.copy=function(){return bf(a,b)},c}function cf(a){function b(a){return+a}return b.invert=b,b.domain=b.range=function(c){return arguments.length?(a=c.map(b),b):a},b.ticks=function(b){return Te(a,b)},b.tickFormat=function(b,c){return Ue(a,b,c)},b.copy=function(){return cf(a)},b}function df(a){return a.innerRadius}function ef(a){return a.outerRadius}function ff(a){return a.startAngle}function gf(a){return a.endAngle}function hf(a){function b(b){function g(){j.push("M",f(a(k),h))}for(var i,j=[],k=[],l=-1,m=b.length,n=za(c),o=za(d);++l<m;)e.call(this,i=b[l],l)?k.push([+n.call(this,i,l),+o.call(this,i,l)]):k.length&&(g(),k=[]);return k.length&&g(),j.length?j.join(""):null}var c=Bc,d=Cc,e=Bb,f=jf,g=f.key,h=.7;return b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?(d=a,b):d},b.defined=function(a){return arguments.length?(e=a,b):e},b.interpolate=function(a){return arguments.length?(g="function"==typeof a?f=a:(f=xi.get(a)||jf).key,b):g},b.tension=function(a){return arguments.length?(h=a,b):h},b}function jf(a){return a.join("L")}function kf(a){return jf(a)+"Z"}function lf(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d[0]+(d=a[b])[0])/2,"V",d[1]);return c>1&&e.push("H",d[0]),e.join("")}function mf(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("V",(d=a[b])[1],"H",d[0]);return e.join("")}function nf(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d=a[b])[0],"V",d[1]);return e.join("")}function of(a,b){return a.length<4?jf(a):a[1]+rf(a.slice(1,a.length-1),sf(a,b))}function pf(a,b){return a.length<3?jf(a):a[0]+rf((a.push(a[0]),a),sf([a[a.length-2]].concat(a,[a[1]]),b))}function qf(a,b){return a.length<3?jf(a):a[0]+rf(a,sf(a,b))}function rf(a,b){if(b.length<1||a.length!=b.length&&a.length!=b.length+2)return jf(a);var c=a.length!=b.length,d="",e=a[0],f=a[1],g=b[0],h=g,i=1;if(c&&(d+="Q"+(f[0]-2*g[0]/3)+","+(f[1]-2*g[1]/3)+","+f[0]+","+f[1],e=a[1],i=2),b.length>1){h=b[1],f=a[i],i++,d+="C"+(e[0]+g[0])+","+(e[1]+g[1])+","+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1];for(var j=2;j<b.length;j++,i++)f=a[i],h=b[j],d+="S"+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1]}if(c){var k=a[i];d+="Q"+(f[0]+2*h[0]/3)+","+(f[1]+2*h[1]/3)+","+k[0]+","+k[1]}return d}function sf(a,b){for(var c,d=[],e=(1-b)/2,f=a[0],g=a[1],h=1,i=a.length;++h<i;)c=f,f=g,g=a[h],d.push([e*(g[0]-c[0]),e*(g[1]-c[1])]);return d}function tf(a){if(a.length<3)return jf(a);var b=1,c=a.length,d=a[0],e=d[0],f=d[1],g=[e,e,e,(d=a[1])[0]],h=[f,f,f,d[1]],i=[e,",",f,"L",xf(Ai,g),",",xf(Ai,h)];for(a.push(a[c-1]);++b<=c;)d=a[b],g.shift(),g.push(d[0]),h.shift(),h.push(d[1]),yf(i,g,h);return a.pop(),i.push("L",d),i.join("")}function uf(a){if(a.length<4)return jf(a);for(var b,c=[],d=-1,e=a.length,f=[0],g=[0];++d<3;)b=a[d],f.push(b[0]),g.push(b[1]);for(c.push(xf(Ai,f)+","+xf(Ai,g)),--d;++d<e;)b=a[d],f.shift(),f.push(b[0]),g.shift(),g.push(b[1]),yf(c,f,g);return c.join("")}function vf(a){for(var b,c,d=-1,e=a.length,f=e+4,g=[],h=[];++d<4;)c=a[d%e],g.push(c[0]),h.push(c[1]);for(b=[xf(Ai,g),",",xf(Ai,h)],--d;++d<f;)c=a[d%e],g.shift(),g.push(c[0]),h.shift(),h.push(c[1]),yf(b,g,h);return b.join("")}function wf(a,b){var c=a.length-1;if(c)for(var d,e,f=a[0][0],g=a[0][1],h=a[c][0]-f,i=a[c][1]-g,j=-1;++j<=c;)d=a[j],e=j/c,d[0]=b*d[0]+(1-b)*(f+e*h),d[1]=b*d[1]+(1-b)*(g+e*i);return tf(a)}function xf(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function yf(a,b,c){a.push("C",xf(yi,b),",",xf(yi,c),",",xf(zi,b),",",xf(zi,c),",",xf(Ai,b),",",xf(Ai,c))}function zf(a,b){return(b[1]-a[1])/(b[0]-a[0])}function Af(a){for(var b=0,c=a.length-1,d=[],e=a[0],f=a[1],g=d[0]=zf(e,f);++b<c;)d[b]=(g+(g=zf(e=f,f=a[b+1])))/2;return d[b]=g,d}function Bf(a){for(var b,c,d,e,f=[],g=Af(a),h=-1,i=a.length-1;++h<i;)b=zf(a[h],a[h+1]),ig(b)<Dg?g[h]=g[h+1]=0:(c=g[h]/b,d=g[h+1]/b,e=c*c+d*d,e>9&&(e=3*b/Math.sqrt(e),g[h]=e*c,g[h+1]=e*d));for(h=-1;++h<=i;)e=(a[Math.min(i,h+1)][0]-a[Math.max(0,h-1)][0])/(6*(1+g[h]*g[h])),f.push([e||0,g[h]*e||0]);return f}function Cf(a){return a.length<3?jf(a):a[0]+rf(a,Bf(a))}function Df(a){for(var b,c,d,e=-1,f=a.length;++e<f;)b=a[e],c=b[0],d=b[1]+vi,b[0]=c*Math.cos(d),b[1]=c*Math.sin(d);return a}function Ef(a){function b(b){function i(){p.push("M",h(a(r),l),k,j(a(q.reverse()),l),"Z")}for(var m,n,o,p=[],q=[],r=[],s=-1,t=b.length,u=za(c),v=za(e),w=c===d?function(){return n}:za(d),x=e===f?function(){return o}:za(f);++s<t;)g.call(this,m=b[s],s)?(q.push([n=+u.call(this,m,s),o=+v.call(this,m,s)]),r.push([+w.call(this,m,s),+x.call(this,m,s)])):q.length&&(i(),
q=[],r=[]);return q.length&&i(),p.length?p.join(""):null}var c=Bc,d=Bc,e=0,f=Cc,g=Bb,h=jf,i=h.key,j=h,k="L",l=.7;return b.x=function(a){return arguments.length?(c=d=a,b):d},b.x0=function(a){return arguments.length?(c=a,b):c},b.x1=function(a){return arguments.length?(d=a,b):d},b.y=function(a){return arguments.length?(e=f=a,b):f},b.y0=function(a){return arguments.length?(e=a,b):e},b.y1=function(a){return arguments.length?(f=a,b):f},b.defined=function(a){return arguments.length?(g=a,b):g},b.interpolate=function(a){return arguments.length?(i="function"==typeof a?h=a:(h=xi.get(a)||jf).key,j=h.reverse||h,k=h.closed?"M":"L",b):i},b.tension=function(a){return arguments.length?(l=a,b):l},b}function Ff(a){return a.radius}function Gf(a){return[a.x,a.y]}function Hf(a){return function(){var b=a.apply(this,arguments),c=b[0],d=b[1]+vi;return[c*Math.cos(d),c*Math.sin(d)]}}function If(){return 64}function Jf(){return"circle"}function Kf(a){var b=Math.sqrt(a/Ag);return"M0,"+b+"A"+b+","+b+" 0 1,1 0,"+-b+"A"+b+","+b+" 0 1,1 0,"+b+"Z"}function Lf(a,b){return ng(a,Gi),a.id=b,a}function Mf(a,b,c,d){var e=a.id;return N(a,"function"==typeof c?function(a,f,g){a.__transition__[e].tween.set(b,d(c.call(a,a.__data__,f,g)))}:(c=d(c),function(a){a.__transition__[e].tween.set(b,c)}))}function Nf(a){return null==a&&(a=""),function(){this.textContent=a}}function Of(a,b,c,d){var e=a.__transition__||(a.__transition__={active:0,count:0}),f=e[c];if(!f){var g=d.time;f=e[c]={tween:new h,time:g,ease:d.ease,delay:d.delay,duration:d.duration},++e.count,Wf.timer(function(d){function h(d){return e.active>c?j():(e.active=c,f.event&&f.event.start.call(a,k,b),f.tween.forEach(function(c,d){(d=d.call(a,k,b))&&p.push(d)}),void Wf.timer(function(){return o.c=i(d||1)?Bb:i,1},0,g))}function i(d){if(e.active!==c)return j();for(var g=d/n,h=l(g),i=p.length;i>0;)p[--i].call(a,h);return g>=1?(f.event&&f.event.end.call(a,k,b),j()):void 0}function j(){return--e.count?delete e[c]:delete a.__transition__,1}var k=a.__data__,l=f.ease,m=f.delay,n=f.duration,o=$g,p=[];return o.t=m+g,d>=m?h(d-m):void(o.c=h)},0,g)}}function Pf(a,b,c){a.attr("transform",function(a){var d=b(a);return"translate("+(isFinite(d)?d:c(a))+",0)"})}function Qf(a,b,c){a.attr("transform",function(a){var d=b(a);return"translate(0,"+(isFinite(d)?d:c(a))+")"})}function Rf(a){return a.toISOString()}function Sf(a,b,c){function d(b){return a(b)}function e(a,c){var d=a[1]-a[0],e=d/c,f=Wf.bisect(Pi,e);return f==Pi.length?[b.year,Se(a.map(function(a){return a/31536e6}),c)[2]]:f?b[e/Pi[f-1]<Pi[f]/e?f-1:f]:[Si,Se(a,c)[2]]}return d.invert=function(b){return Tf(a.invert(b))},d.domain=function(b){return arguments.length?(a.domain(b),d):a.domain().map(Tf)},d.nice=function(a,b){function c(c){return!isNaN(c)&&!a.range(c,Tf(+c+1),b).length}var f=d.domain(),g=Je(f),h=null==a?e(g,10):"number"==typeof a&&e(g,a);return h&&(a=h[0],b=h[1]),d.domain(Me(f,b>1?{floor:function(b){for(;c(b=a.floor(b));)b=Tf(b-1);return b},ceil:function(b){for(;c(b=a.ceil(b));)b=Tf(+b+1);return b}}:a))},d.ticks=function(a,b){var c=Je(d.domain()),f=null==a?e(c,10):"number"==typeof a?e(c,a):!a.range&&[{range:a},b];return f&&(a=f[0],b=f[1]),a.range(c[0],Tf(+c[1]+1),1>b?1:b)},d.tickFormat=function(){return c},d.copy=function(){return Sf(a.copy(),b,c)},Qe(d,a)}function Tf(a){return new Date(a)}function Uf(a){return JSON.parse(a.responseText)}function Vf(a){var b=Zf.createRange();return b.selectNode(Zf.body),b.createContextualFragment(a.responseText)}var Wf={version:"3.4.13"};Date.now||(Date.now=function(){return+new Date});var Xf=[].slice,Yf=function(a){return Xf.call(a)},Zf=document,$f=Zf.documentElement,_f=window;try{Yf($f.childNodes)[0].nodeType}catch(ag){Yf=function(a){for(var b=a.length,c=new Array(b);b--;)c[b]=a[b];return c}}try{Zf.createElement("div").style.setProperty("opacity",0,"")}catch(bg){var cg=_f.Element.prototype,dg=cg.setAttribute,eg=cg.setAttributeNS,fg=_f.CSSStyleDeclaration.prototype,gg=fg.setProperty;cg.setAttribute=function(a,b){dg.call(this,a,b+"")},cg.setAttributeNS=function(a,b,c){eg.call(this,a,b,c+"")},fg.setProperty=function(a,b,c){gg.call(this,a,b+"",c)}}Wf.ascending=a,Wf.descending=function(a,b){return a>b?-1:b>a?1:b>=a?0:NaN},Wf.min=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f&&!(null!=(c=a[e])&&c>=c);)c=void 0;for(;++e<f;)null!=(d=a[e])&&c>d&&(c=d)}else{for(;++e<f&&!(null!=(c=b.call(a,a[e],e))&&c>=c);)c=void 0;for(;++e<f;)null!=(d=b.call(a,a[e],e))&&c>d&&(c=d)}return c},Wf.max=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f&&!(null!=(c=a[e])&&c>=c);)c=void 0;for(;++e<f;)null!=(d=a[e])&&d>c&&(c=d)}else{for(;++e<f&&!(null!=(c=b.call(a,a[e],e))&&c>=c);)c=void 0;for(;++e<f;)null!=(d=b.call(a,a[e],e))&&d>c&&(c=d)}return c},Wf.extent=function(a,b){var c,d,e,f=-1,g=a.length;if(1===arguments.length){for(;++f<g&&!(null!=(c=e=a[f])&&c>=c);)c=e=void 0;for(;++f<g;)null!=(d=a[f])&&(c>d&&(c=d),d>e&&(e=d))}else{for(;++f<g&&!(null!=(c=e=b.call(a,a[f],f))&&c>=c);)c=void 0;for(;++f<g;)null!=(d=b.call(a,a[f],f))&&(c>d&&(c=d),d>e&&(e=d))}return[c,e]},Wf.sum=function(a,b){var d,e=0,f=a.length,g=-1;if(1===arguments.length)for(;++g<f;)c(d=+a[g])&&(e+=d);else for(;++g<f;)c(d=+b.call(a,a[g],g))&&(e+=d);return e},Wf.mean=function(a,d){var e,f=0,g=a.length,h=-1,i=g;if(1===arguments.length)for(;++h<g;)c(e=b(a[h]))?f+=e:--i;else for(;++h<g;)c(e=b(d.call(a,a[h],h)))?f+=e:--i;return i?f/i:void 0},Wf.quantile=function(a,b){var c=(a.length-1)*b+1,d=Math.floor(c),e=+a[d-1],f=c-d;return f?e+f*(a[d]-e):e},Wf.median=function(d,e){var f,g=[],h=d.length,i=-1;if(1===arguments.length)for(;++i<h;)c(f=b(d[i]))&&g.push(f);else for(;++i<h;)c(f=b(e.call(d,d[i],i)))&&g.push(f);return g.length?Wf.quantile(g.sort(a),.5):void 0};var hg=d(a);Wf.bisectLeft=hg.left,Wf.bisect=Wf.bisectRight=hg.right,Wf.bisector=function(b){return d(1===b.length?function(c,d){return a(b(c),d)}:b)},Wf.shuffle=function(a){for(var b,c,d=a.length;d;)c=Math.random()*d--|0,b=a[d],a[d]=a[c],a[c]=b;return a},Wf.permute=function(a,b){for(var c=b.length,d=new Array(c);c--;)d[c]=a[b[c]];return d},Wf.pairs=function(a){for(var b,c=0,d=a.length-1,e=a[0],f=new Array(0>d?0:d);d>c;)f[c]=[b=e,e=a[++c]];return f},Wf.zip=function(){if(!(d=arguments.length))return[];for(var a=-1,b=Wf.min(arguments,e),c=new Array(b);++a<b;)for(var d,f=-1,g=c[a]=new Array(d);++f<d;)g[f]=arguments[f][a];return c},Wf.transpose=function(a){return Wf.zip.apply(Wf,a)},Wf.keys=function(a){var b=[];for(var c in a)b.push(c);return b},Wf.values=function(a){var b=[];for(var c in a)b.push(a[c]);return b},Wf.entries=function(a){var b=[];for(var c in a)b.push({key:c,value:a[c]});return b},Wf.merge=function(a){for(var b,c,d,e=a.length,f=-1,g=0;++f<e;)g+=a[f].length;for(c=new Array(g);--e>=0;)for(d=a[e],b=d.length;--b>=0;)c[--g]=d[b];return c};var ig=Math.abs;Wf.range=function(a,b,c){if(arguments.length<3&&(c=1,arguments.length<2&&(b=a,a=0)),(b-a)/c===1/0)throw new Error("infinite range");var d,e=[],g=f(ig(c)),h=-1;if(a*=g,b*=g,c*=g,0>c)for(;(d=a+c*++h)>b;)e.push(d/g);else for(;(d=a+c*++h)<b;)e.push(d/g);return e},Wf.map=function(a){var b=new h;if(a instanceof h)a.forEach(function(a,c){b.set(a,c)});else for(var c in a)b.set(c,a[c]);return b};var jg="__proto__",kg="\x00";g(h,{has:k,get:function(a){return this._[i(a)]},set:function(a,b){return this._[i(a)]=b},remove:l,keys:m,values:function(){var a=[];for(var b in this._)a.push(this._[b]);return a},entries:function(){var a=[];for(var b in this._)a.push({key:j(b),value:this._[b]});return a},size:n,empty:o,forEach:function(a){for(var b in this._)a.call(this,j(b),this._[b])}}),Wf.nest=function(){function a(b,g,i){if(i>=f.length)return d?d.call(e,g):c?g.sort(c):g;for(var j,k,l,m,n=-1,o=g.length,p=f[i++],q=new h;++n<o;)(m=q.get(j=p(k=g[n])))?m.push(k):q.set(j,[k]);return b?(k=b(),l=function(c,d){k.set(c,a(b,d,i))}):(k={},l=function(c,d){k[c]=a(b,d,i)}),q.forEach(l),k}function b(a,c){if(c>=f.length)return a;var d=[],e=g[c++];return a.forEach(function(a,e){d.push({key:a,values:b(e,c)})}),e?d.sort(function(a,b){return e(a.key,b.key)}):d}var c,d,e={},f=[],g=[];return e.map=function(b,c){return a(c,b,0)},e.entries=function(c){return b(a(Wf.map,c,0),0)},e.key=function(a){return f.push(a),e},e.sortKeys=function(a){return g[f.length-1]=a,e},e.sortValues=function(a){return c=a,e},e.rollup=function(a){return d=a,e},e},Wf.set=function(a){var b=new p;if(a)for(var c=0,d=a.length;d>c;++c)b.add(a[c]);return b},g(p,{has:k,add:function(a){return this._[i(a+="")]=!0,a},remove:l,values:m,size:n,empty:o,forEach:function(a){for(var b in this._)a.call(this,j(b))}}),Wf.behavior={},Wf.rebind=function(a,b){for(var c,d=1,e=arguments.length;++d<e;)a[c=arguments[d]]=q(a,b,b[c]);return a};var lg=["webkit","ms","moz","Moz","o","O"];Wf.dispatch=function(){for(var a=new t,b=-1,c=arguments.length;++b<c;)a[arguments[b]]=u(a);return a},t.prototype.on=function(a,b){var c=a.indexOf("."),d="";if(c>=0&&(d=a.slice(c+1),a=a.slice(0,c)),a)return arguments.length<2?this[a].on(d):this[a].on(d,b);if(2===arguments.length){if(null==b)for(a in this)this.hasOwnProperty(a)&&this[a].on(d,null);return this}},Wf.event=null,Wf.requote=function(a){return a.replace(mg,"\\$&")};var mg=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,ng={}.__proto__?function(a,b){a.__proto__=b}:function(a,b){for(var c in b)a[c]=b[c]},og=function(a,b){return b.querySelector(a)},pg=function(a,b){return b.querySelectorAll(a)},qg=$f.matches||$f[r($f,"matchesSelector")],rg=function(a,b){return qg.call(a,b)};"function"==typeof Sizzle&&(og=function(a,b){return Sizzle(a,b)[0]||null},pg=Sizzle,rg=Sizzle.matchesSelector),Wf.selection=function(){return vg};var sg=Wf.selection.prototype=[];sg.select=function(a){var b,c,d,e,f=[];a=z(a);for(var g=-1,h=this.length;++g<h;){f.push(b=[]),b.parentNode=(d=this[g]).parentNode;for(var i=-1,j=d.length;++i<j;)(e=d[i])?(b.push(c=a.call(e,e.__data__,i,g)),c&&"__data__"in e&&(c.__data__=e.__data__)):b.push(null)}return y(f)},sg.selectAll=function(a){var b,c,d=[];a=A(a);for(var e=-1,f=this.length;++e<f;)for(var g=this[e],h=-1,i=g.length;++h<i;)(c=g[h])&&(d.push(b=Yf(a.call(c,c.__data__,h,e))),b.parentNode=c);return y(d)};var tg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};Wf.ns={prefix:tg,qualify:function(a){var b=a.indexOf(":"),c=a;return b>=0&&(c=a.slice(0,b),a=a.slice(b+1)),tg.hasOwnProperty(c)?{space:tg[c],local:a}:a}},sg.attr=function(a,b){if(arguments.length<2){if("string"==typeof a){var c=this.node();return a=Wf.ns.qualify(a),a.local?c.getAttributeNS(a.space,a.local):c.getAttribute(a)}for(b in a)this.each(B(b,a[b]));return this}return this.each(B(a,b))},sg.classed=function(a,b){if(arguments.length<2){if("string"==typeof a){var c=this.node(),d=(a=E(a)).length,e=-1;if(b=c.classList){for(;++e<d;)if(!b.contains(a[e]))return!1}else for(b=c.getAttribute("class");++e<d;)if(!D(a[e]).test(b))return!1;return!0}for(b in a)this.each(F(b,a[b]));return this}return this.each(F(a,b))},sg.style=function(a,b,c){var d=arguments.length;if(3>d){if("string"!=typeof a){2>d&&(b="");for(c in a)this.each(H(c,a[c],b));return this}if(2>d)return _f.getComputedStyle(this.node(),null).getPropertyValue(a);c=""}return this.each(H(a,b,c))},sg.property=function(a,b){if(arguments.length<2){if("string"==typeof a)return this.node()[a];for(b in a)this.each(I(b,a[b]));return this}return this.each(I(a,b))},sg.text=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent},sg.html=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}:null==a?function(){this.innerHTML=""}:function(){this.innerHTML=a}):this.node().innerHTML},sg.append=function(a){return a=J(a),this.select(function(){return this.appendChild(a.apply(this,arguments))})},sg.insert=function(a,b){return a=J(a),b=z(b),this.select(function(){return this.insertBefore(a.apply(this,arguments),b.apply(this,arguments)||null)})},sg.remove=function(){return this.each(function(){var a=this.parentNode;a&&a.removeChild(this)})},sg.data=function(a,b){function c(a,c){var d,e,f,g=a.length,l=c.length,m=Math.min(g,l),n=new Array(l),o=new Array(l),p=new Array(g);if(b){var q,r=new h,s=new Array(g);for(d=-1;++d<g;)r.has(q=b.call(e=a[d],e.__data__,d))?p[d]=e:r.set(q,e),s[d]=q;for(d=-1;++d<l;)(e=r.get(q=b.call(c,f=c[d],d)))?e!==!0&&(n[d]=e,e.__data__=f):o[d]=K(f),r.set(q,!0);for(d=-1;++d<g;)r.get(s[d])!==!0&&(p[d]=a[d])}else{for(d=-1;++d<m;)e=a[d],f=c[d],e?(e.__data__=f,n[d]=e):o[d]=K(f);for(;l>d;++d)o[d]=K(c[d]);for(;g>d;++d)p[d]=a[d]}o.update=n,o.parentNode=n.parentNode=p.parentNode=a.parentNode,i.push(o),j.push(n),k.push(p)}var d,e,f=-1,g=this.length;if(!arguments.length){for(a=new Array(g=(d=this[0]).length);++f<g;)(e=d[f])&&(a[f]=e.__data__);return a}var i=O([]),j=y([]),k=y([]);if("function"==typeof a)for(;++f<g;)c(d=this[f],a.call(d,d.parentNode.__data__,f));else for(;++f<g;)c(d=this[f],a);return j.enter=function(){return i},j.exit=function(){return k},j},sg.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")},sg.filter=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=L(a));for(var f=0,g=this.length;g>f;f++){e.push(b=[]),b.parentNode=(c=this[f]).parentNode;for(var h=0,i=c.length;i>h;h++)(d=c[h])&&a.call(d,d.__data__,h,f)&&b.push(d)}return y(e)},sg.order=function(){for(var a=-1,b=this.length;++a<b;)for(var c,d=this[a],e=d.length-1,f=d[e];--e>=0;)(c=d[e])&&(f&&f!==c.nextSibling&&f.parentNode.insertBefore(c,f),f=c);return this},sg.sort=function(a){a=M.apply(this,arguments);for(var b=-1,c=this.length;++b<c;)this[b].sort(a);return this.order()},sg.each=function(a){return N(this,function(b,c,d){a.call(b,b.__data__,c,d)})},sg.call=function(a){var b=Yf(arguments);return a.apply(b[0]=this,b),this},sg.empty=function(){return!this.node()},sg.node=function(){for(var a=0,b=this.length;b>a;a++)for(var c=this[a],d=0,e=c.length;e>d;d++){var f=c[d];if(f)return f}return null},sg.size=function(){var a=0;return N(this,function(){++a}),a};var ug=[];Wf.selection.enter=O,Wf.selection.enter.prototype=ug,ug.append=sg.append,ug.empty=sg.empty,ug.node=sg.node,ug.call=sg.call,ug.size=sg.size,ug.select=function(a){for(var b,c,d,e,f,g=[],h=-1,i=this.length;++h<i;){d=(e=this[h]).update,g.push(b=[]),b.parentNode=e.parentNode;for(var j=-1,k=e.length;++j<k;)(f=e[j])?(b.push(d[j]=c=a.call(e.parentNode,f.__data__,j,h)),c.__data__=f.__data__):b.push(null)}return y(g)},ug.insert=function(a,b){return arguments.length<2&&(b=P(this)),sg.insert.call(this,a,b)},sg.transition=function(){for(var a,b,c=Ci||++Hi,d=[],e=Di||{time:Date.now(),ease:xd,delay:0,duration:250},f=-1,g=this.length;++f<g;){d.push(a=[]);for(var h=this[f],i=-1,j=h.length;++i<j;)(b=h[i])&&Of(b,i,c,e),a.push(b)}return Lf(d,c)},sg.interrupt=function(){return this.each(Q)},Wf.select=function(a){var b=["string"==typeof a?og(a,Zf):a];return b.parentNode=$f,y([b])},Wf.selectAll=function(a){var b=Yf("string"==typeof a?pg(a,Zf):a);return b.parentNode=$f,y([b])};var vg=Wf.select($f);sg.on=function(a,b,c){var d=arguments.length;if(3>d){if("string"!=typeof a){2>d&&(b=!1);for(c in a)this.each(R(c,a[c],b));return this}if(2>d)return(d=this.node()["__on"+a])&&d._;c=!1}return this.each(R(a,b,c))};var wg=Wf.map({mouseenter:"mouseover",mouseleave:"mouseout"});wg.forEach(function(a){"on"+a in Zf&&wg.remove(a)});var xg="onselectstart"in Zf?null:r($f.style,"userSelect"),yg=0;Wf.mouse=function(a){return V(a,w())};var zg=/WebKit/.test(_f.navigator.userAgent)?-1:0;Wf.touch=function(a,b,c){if(arguments.length<3&&(c=b,b=w().changedTouches),b)for(var d,e=0,f=b.length;f>e;++e)if((d=b[e]).identifier===c)return V(a,d)},Wf.behavior.drag=function(){function a(){this.on("mousedown.drag",e).on("touchstart.drag",f)}function b(a,b,e,f,g){return function(){function h(){var a,c,d=b(m,p);d&&(a=d[0]-t[0],c=d[1]-t[1],o|=a|c,t=d,n({type:"drag",x:d[0]+j[0],y:d[1]+j[1],dx:a,dy:c}))}function i(){b(m,p)&&(r.on(f+q,null).on(g+q,null),s(o&&Wf.event.target===l),n({type:"dragend"}))}var j,k=this,l=Wf.event.target,m=k.parentNode,n=c.of(k,arguments),o=0,p=a(),q=".drag"+(null==p?"":"-"+p),r=Wf.select(e()).on(f+q,h).on(g+q,i),s=U(),t=b(m,p);d?(j=d.apply(k,arguments),j=[j.x-t[0],j.y-t[1]]):j=[0,0],n({type:"dragstart"})}}var c=x(a,"drag","dragstart","dragend"),d=null,e=b(s,Wf.mouse,Y,"mousemove","mouseup"),f=b(W,Wf.touch,X,"touchmove","touchend");return a.origin=function(b){return arguments.length?(d=b,a):d},Wf.rebind(a,c,"on")},Wf.touches=function(a,b){return arguments.length<2&&(b=w().touches),b?Yf(b).map(function(b){var c=V(a,b);return c.identifier=b.identifier,c}):[]};var Ag=Math.PI,Bg=2*Ag,Cg=Ag/2,Dg=1e-6,Eg=Dg*Dg,Fg=Ag/180,Gg=180/Ag,Hg=Math.SQRT2,Ig=2,Jg=4;Wf.interpolateZoom=function(a,b){function c(a){var b=a*s;if(r){var c=ca(p),g=f/(Ig*m)*(c*da(Hg*b+p)-ba(p));return[d+g*j,e+g*k,f*c/ca(Hg*b+p)]}return[d+a*j,e+a*k,f*Math.exp(Hg*b)]}var d=a[0],e=a[1],f=a[2],g=b[0],h=b[1],i=b[2],j=g-d,k=h-e,l=j*j+k*k,m=Math.sqrt(l),n=(i*i-f*f+Jg*l)/(2*f*Ig*m),o=(i*i-f*f-Jg*l)/(2*i*Ig*m),p=Math.log(Math.sqrt(n*n+1)-n),q=Math.log(Math.sqrt(o*o+1)-o),r=q-p,s=(r||Math.log(i/f))/Hg;return c.duration=1e3*s,c},Wf.behavior.zoom=function(){function a(a){a.on(B,j).on(Mg+".zoom",l).on("dblclick.zoom",m).on(E,k)}function b(a){return[(a[0]-y.x)/y.k,(a[1]-y.y)/y.k]}function c(a){return[a[0]*y.k+y.x,a[1]*y.k+y.y]}function d(a){y.k=Math.max(A[0],Math.min(A[1],a))}function e(a,b){b=c(b),y.x+=a[0]-b[0],y.y+=a[1]-b[1]}function f(){t&&t.domain(s.range().map(function(a){return(a-y.x)/y.k}).map(s.invert)),w&&w.domain(u.range().map(function(a){return(a-y.y)/y.k}).map(u.invert))}function g(a){a({type:"zoomstart"})}function h(a){f(),a({type:"zoom",scale:y.k,translate:[y.x,y.y]})}function i(a){a({type:"zoomend"})}function j(){function a(){k=1,e(Wf.mouse(d),m),h(j)}function c(){l.on(C,null).on(D,null),n(k&&Wf.event.target===f),i(j)}var d=this,f=Wf.event.target,j=F.of(d,arguments),k=0,l=Wf.select(_f).on(C,a).on(D,c),m=b(Wf.mouse(d)),n=U();Q.call(d),g(j)}function k(){function a(){var a=Wf.touches(n);return m=y.k,a.forEach(function(a){a.identifier in p&&(p[a.identifier]=b(a))}),a}function c(){var b=Wf.event.target;Wf.select(b).on(t,f).on(u,l),w.push(b);for(var c=Wf.event.changedTouches,g=0,i=c.length;i>g;++g)p[c[g].identifier]=null;var j=a(),k=Date.now();if(1===j.length){if(500>k-r){var m=j[0],n=p[m.identifier];d(2*y.k),e(m,n),v(),h(o)}r=k}else if(j.length>1){var m=j[0],s=j[1],x=m[0]-s[0],z=m[1]-s[1];q=x*x+z*z}}function f(){for(var a,b,c,f,g=Wf.touches(n),i=0,j=g.length;j>i;++i,f=null)if(c=g[i],f=p[c.identifier]){if(b)break;a=c,b=f}if(f){var k=(k=c[0]-a[0])*k+(k=c[1]-a[1])*k,l=q&&Math.sqrt(k/q);a=[(a[0]+c[0])/2,(a[1]+c[1])/2],b=[(b[0]+f[0])/2,(b[1]+f[1])/2],d(l*m)}r=null,e(a,b),h(o)}function l(){if(Wf.event.touches.length){for(var b=Wf.event.changedTouches,c=0,d=b.length;d>c;++c)delete p[b[c].identifier];for(var e in p)return void a()}Wf.selectAll(w).on(s,null),x.on(B,j).on(E,k),z(),i(o)}var m,n=this,o=F.of(n,arguments),p={},q=0,s=".zoom-"+Wf.event.changedTouches[0].identifier,t="touchmove"+s,u="touchend"+s,w=[],x=Wf.select(n),z=U();Q.call(n),c(),g(o),x.on(B,null).on(E,c)}function l(){var a=F.of(this,arguments);q?clearTimeout(q):(n=b(o=p||Wf.mouse(this)),Q.call(this),g(a)),q=setTimeout(function(){q=null,i(a)},50),v(),d(Math.pow(2,.002*Kg())*y.k),e(o,n),h(a)}function m(){var a=F.of(this,arguments),c=Wf.mouse(this),f=b(c),j=Math.log(y.k)/Math.LN2;g(a),d(Math.pow(2,Wf.event.shiftKey?Math.ceil(j)-1:Math.floor(j)+1)),e(c,f),h(a),i(a)}var n,o,p,q,r,s,t,u,w,y={x:0,y:0,k:1},z=[960,500],A=Lg,B="mousedown.zoom",C="mousemove.zoom",D="mouseup.zoom",E="touchstart.zoom",F=x(a,"zoomstart","zoom","zoomend");return a.event=function(a){a.each(function(){var a=F.of(this,arguments),b=y;Ci?Wf.select(this).transition().each("start.zoom",function(){y=this.__chart__||{x:0,y:0,k:1},g(a)}).tween("zoom:zoom",function(){var c=z[0],d=z[1],e=c/2,f=d/2,g=Wf.interpolateZoom([(e-y.x)/y.k,(f-y.y)/y.k,c/y.k],[(e-b.x)/b.k,(f-b.y)/b.k,c/b.k]);return function(b){var d=g(b),i=c/d[2];this.__chart__=y={x:e-d[0]*i,y:f-d[1]*i,k:i},h(a)}}).each("end.zoom",function(){i(a)}):(this.__chart__=y,g(a),h(a),i(a))})},a.translate=function(b){return arguments.length?(y={x:+b[0],y:+b[1],k:y.k},f(),a):[y.x,y.y]},a.scale=function(b){return arguments.length?(y={x:y.x,y:y.y,k:+b},f(),a):y.k},a.scaleExtent=function(b){return arguments.length?(A=null==b?Lg:[+b[0],+b[1]],a):A},a.center=function(b){return arguments.length?(p=b&&[+b[0],+b[1]],a):p},a.size=function(b){return arguments.length?(z=b&&[+b[0],+b[1]],a):z},a.x=function(b){return arguments.length?(t=b,s=b.copy(),y={x:0,y:0,k:1},a):t},a.y=function(b){return arguments.length?(w=b,u=b.copy(),y={x:0,y:0,k:1},a):w},Wf.rebind(a,F,"on")};var Kg,Lg=[0,1/0],Mg="onwheel"in Zf?(Kg=function(){return-Wf.event.deltaY*(Wf.event.deltaMode?120:1)},"wheel"):"onmousewheel"in Zf?(Kg=function(){return Wf.event.wheelDelta},"mousewheel"):(Kg=function(){return-Wf.event.detail},"MozMousePixelScroll");Wf.color=fa,fa.prototype.toString=function(){return this.rgb()+""},Wf.hsl=ga;var Ng=ga.prototype=new fa;Ng.brighter=function(a){return a=Math.pow(.7,arguments.length?a:1),new ga(this.h,this.s,this.l/a)},Ng.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),new ga(this.h,this.s,a*this.l)},Ng.rgb=function(){return ha(this.h,this.s,this.l)},Wf.hcl=ia;var Og=ia.prototype=new fa;Og.brighter=function(a){return new ia(this.h,this.c,Math.min(100,this.l+Pg*(arguments.length?a:1)))},Og.darker=function(a){return new ia(this.h,this.c,Math.max(0,this.l-Pg*(arguments.length?a:1)))},Og.rgb=function(){return ja(this.h,this.c,this.l).rgb()},Wf.lab=ka;var Pg=18,Qg=.95047,Rg=1,Sg=1.08883,Tg=ka.prototype=new fa;Tg.brighter=function(a){return new ka(Math.min(100,this.l+Pg*(arguments.length?a:1)),this.a,this.b)},Tg.darker=function(a){return new ka(Math.max(0,this.l-Pg*(arguments.length?a:1)),this.a,this.b)},Tg.rgb=function(){return la(this.l,this.a,this.b)},Wf.rgb=qa;var Ug=qa.prototype=new fa;Ug.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);var b=this.r,c=this.g,d=this.b,e=30;return b||c||d?(b&&e>b&&(b=e),c&&e>c&&(c=e),d&&e>d&&(d=e),new qa(Math.min(255,b/a),Math.min(255,c/a),Math.min(255,d/a))):new qa(e,e,e)},Ug.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),new qa(a*this.r,a*this.g,a*this.b)},Ug.hsl=function(){return va(this.r,this.g,this.b)},Ug.toString=function(){return"#"+ta(this.r)+ta(this.g)+ta(this.b)};var Vg=Wf.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Vg.forEach(function(a,b){Vg.set(a,ra(b))}),Wf.functor=za,Wf.xhr=Ba(Aa),Wf.dsv=function(a,b){function c(a,c,f){arguments.length<3&&(f=c,c=null);var g=Ca(a,b,null==c?d:e(c),f);return g.row=function(a){return arguments.length?g.response(null==(c=a)?d:e(a)):c},g}function d(a){return c.parse(a.responseText)}function e(a){return function(b){return c.parse(b.responseText,a)}}function f(b){return b.map(g).join(a)}function g(a){return h.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var h=new RegExp('["'+a+"\n]"),i=a.charCodeAt(0);return c.parse=function(a,b){var d;return c.parseRows(a,function(a,c){if(d)return d(a,c-1);var e=new Function("d","return {"+a.map(function(a,b){return JSON.stringify(a)+": d["+b+"]"}).join(",")+"}");d=b?function(a,c){return b(e(a),c)}:e})},c.parseRows=function(a,b){function c(){if(k>=j)return g;if(e)return e=!1,f;var b=k;if(34===a.charCodeAt(b)){for(var c=b;c++<j;)if(34===a.charCodeAt(c)){if(34!==a.charCodeAt(c+1))break;++c}k=c+2;var d=a.charCodeAt(c+1);return 13===d?(e=!0,10===a.charCodeAt(c+2)&&++k):10===d&&(e=!0),a.slice(b+1,c).replace(/""/g,'"')}for(;j>k;){var d=a.charCodeAt(k++),h=1;if(10===d)e=!0;else if(13===d)e=!0,10===a.charCodeAt(k)&&(++k,++h);else if(d!==i)continue;return a.slice(b,k-h)}return a.slice(b)}for(var d,e,f={},g={},h=[],j=a.length,k=0,l=0;(d=c())!==g;){for(var m=[];d!==f&&d!==g;)m.push(d),d=c();b&&null==(m=b(m,l++))||h.push(m)}return h},c.format=function(b){if(Array.isArray(b[0]))return c.formatRows(b);var d=new p,e=[];return b.forEach(function(a){for(var b in a)d.has(b)||e.push(d.add(b))}),[e.map(g).join(a)].concat(b.map(function(b){return e.map(function(a){return g(b[a])}).join(a)})).join("\n")},c.formatRows=function(a){return a.map(f).join("\n")},c},Wf.csv=Wf.dsv(",","text/csv"),Wf.tsv=Wf.dsv("	","text/tab-separated-values");var Wg,Xg,Yg,Zg,$g,_g=_f[r(_f,"requestAnimationFrame")]||function(a){setTimeout(a,17)};Wf.timer=function(a,b,c){var d=arguments.length;2>d&&(b=0),3>d&&(c=Date.now());var e=c+b,f={c:a,t:e,f:!1,n:null};Xg?Xg.n=f:Wg=f,Xg=f,Yg||(Zg=clearTimeout(Zg),Yg=1,_g(Fa))},Wf.timer.flush=function(){Ga(),Ha()},Wf.round=function(a,b){return b?Math.round(a*(b=Math.pow(10,b)))/b:Math.round(a)};var ah=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(Ja);Wf.formatPrefix=function(a,b){var c=0;return a&&(0>a&&(a*=-1),b&&(a=Wf.round(a,Ia(a,b))),c=1+Math.floor(1e-12+Math.log(a)/Math.LN10),c=Math.max(-24,Math.min(24,3*Math.floor((c-1)/3)))),ah[8+c/3]};var bh=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,ch=Wf.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,b){return a.toPrecision(b)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},r:function(a,b){return(a=Wf.round(a,Ia(a,b))).toFixed(Math.max(0,Math.min(20,Ia(a*(1+1e-15),b))))}}),dh=Wf.time={},eh=Date;Ma.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){fh.setUTCDate.apply(this._,arguments)},setDay:function(){fh.setUTCDay.apply(this._,arguments)},setFullYear:function(){fh.setUTCFullYear.apply(this._,arguments)},setHours:function(){fh.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){fh.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){fh.setUTCMinutes.apply(this._,arguments)},setMonth:function(){fh.setUTCMonth.apply(this._,arguments)},setSeconds:function(){fh.setUTCSeconds.apply(this._,arguments)},setTime:function(){fh.setTime.apply(this._,arguments)}};var fh=Date.prototype;dh.year=Na(function(a){return a=dh.day(a),a.setMonth(0,1),a},function(a,b){a.setFullYear(a.getFullYear()+b)},function(a){return a.getFullYear()}),dh.years=dh.year.range,dh.years.utc=dh.year.utc.range,dh.day=Na(function(a){var b=new eh(2e3,0);return b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),b},function(a,b){a.setDate(a.getDate()+b)},function(a){return a.getDate()-1}),dh.days=dh.day.range,dh.days.utc=dh.day.utc.range,dh.dayOfYear=function(a){var b=dh.year(a);return Math.floor((a-b-6e4*(a.getTimezoneOffset()-b.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(a,b){b=7-b;var c=dh[a]=Na(function(a){return(a=dh.day(a)).setDate(a.getDate()-(a.getDay()+b)%7),a},function(a,b){a.setDate(a.getDate()+7*Math.floor(b))},function(a){var c=dh.year(a).getDay();return Math.floor((dh.dayOfYear(a)+(c+b)%7)/7)-(c!==b)});dh[a+"s"]=c.range,dh[a+"s"].utc=c.utc.range,dh[a+"OfYear"]=function(a){var c=dh.year(a).getDay();return Math.floor((dh.dayOfYear(a)+(c+b)%7)/7)}}),dh.week=dh.sunday,dh.weeks=dh.sunday.range,dh.weeks.utc=dh.sunday.utc.range,dh.weekOfYear=dh.sundayOfYear;var gh={"-":"",_:" ",0:"0"},hh=/^\s*\d+/,ih=/^%/;Wf.locale=function(a){return{numberFormat:Ka(a),timeFormat:Pa(a)}};var jh=Wf.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Wf.format=jh.numberFormat,Wf.geo={},ib.prototype={s:0,t:0,add:function(a){jb(a,this.t,kh),jb(kh.s,this.s,this),this.s?this.t+=kh.t:this.s=kh.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var kh=new ib;Wf.geo.stream=function(a,b){a&&lh.hasOwnProperty(a.type)?lh[a.type](a,b):kb(a,b)};var lh={Feature:function(a,b){kb(a.geometry,b)},FeatureCollection:function(a,b){for(var c=a.features,d=-1,e=c.length;++d<e;)kb(c[d].geometry,b)}},mh={Sphere:function(a,b){b.sphere()},Point:function(a,b){a=a.coordinates,b.point(a[0],a[1],a[2])},MultiPoint:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)a=c[d],b.point(a[0],a[1],a[2])},LineString:function(a,b){lb(a.coordinates,b,0)},MultiLineString:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)lb(c[d],b,0)},Polygon:function(a,b){mb(a.coordinates,b);
},MultiPolygon:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)mb(c[d],b)},GeometryCollection:function(a,b){for(var c=a.geometries,d=-1,e=c.length;++d<e;)kb(c[d],b)}};Wf.geo.area=function(a){return nh=0,Wf.geo.stream(a,ph),nh};var nh,oh=new ib,ph={sphere:function(){nh+=4*Ag},point:s,lineStart:s,lineEnd:s,polygonStart:function(){oh.reset(),ph.lineStart=nb},polygonEnd:function(){var a=2*oh;nh+=0>a?4*Ag+a:a,ph.lineStart=ph.lineEnd=ph.point=s}};Wf.geo.bounds=function(){function a(a,b){t.push(u=[k=a,m=a]),l>b&&(l=b),b>n&&(n=b)}function b(b,c){var d=ob([b*Fg,c*Fg]);if(r){var e=qb(r,d),f=[e[1],-e[0],0],g=qb(f,e);tb(g),g=ub(g);var i=b-o,j=i>0?1:-1,p=g[0]*Gg*j,q=ig(i)>180;if(q^(p>j*o&&j*b>p)){var s=g[1]*Gg;s>n&&(n=s)}else if(p=(p+360)%360-180,q^(p>j*o&&j*b>p)){var s=-g[1]*Gg;l>s&&(l=s)}else l>c&&(l=c),c>n&&(n=c);q?o>b?h(k,b)>h(k,m)&&(m=b):h(b,m)>h(k,m)&&(k=b):m>=k?(k>b&&(k=b),b>m&&(m=b)):b>o?h(k,b)>h(k,m)&&(m=b):h(b,m)>h(k,m)&&(k=b)}else a(b,c);r=d,o=b}function c(){v.point=b}function d(){u[0]=k,u[1]=m,v.point=a,r=null}function e(a,c){if(r){var d=a-o;s+=ig(d)>180?d+(d>0?360:-360):d}else p=a,q=c;ph.point(a,c),b(a,c)}function f(){ph.lineStart()}function g(){e(p,q),ph.lineEnd(),ig(s)>Dg&&(k=-(m=180)),u[0]=k,u[1]=m,r=null}function h(a,b){return(b-=a)<0?b+360:b}function i(a,b){return a[0]-b[0]}function j(a,b){return b[0]<=b[1]?b[0]<=a&&a<=b[1]:a<b[0]||b[1]<a}var k,l,m,n,o,p,q,r,s,t,u,v={point:a,lineStart:c,lineEnd:d,polygonStart:function(){v.point=e,v.lineStart=f,v.lineEnd=g,s=0,ph.polygonStart()},polygonEnd:function(){ph.polygonEnd(),v.point=a,v.lineStart=c,v.lineEnd=d,0>oh?(k=-(m=180),l=-(n=90)):s>Dg?n=90:-Dg>s&&(l=-90),u[0]=k,u[1]=m}};return function(a){n=m=-(k=l=1/0),t=[],Wf.geo.stream(a,v);var b=t.length;if(b){t.sort(i);for(var c,d=1,e=t[0],f=[e];b>d;++d)c=t[d],j(c[0],e)||j(c[1],e)?(h(e[0],c[1])>h(e[0],e[1])&&(e[1]=c[1]),h(c[0],e[1])>h(e[0],e[1])&&(e[0]=c[0])):f.push(e=c);for(var g,c,o=-(1/0),b=f.length-1,d=0,e=f[b];b>=d;e=c,++d)c=f[d],(g=h(e[1],c[0]))>o&&(o=g,k=c[0],m=e[1])}return t=u=null,k===1/0||l===1/0?[[NaN,NaN],[NaN,NaN]]:[[k,l],[m,n]]}}(),Wf.geo.centroid=function(a){qh=rh=sh=th=uh=vh=wh=xh=yh=zh=Ah=0,Wf.geo.stream(a,Bh);var b=yh,c=zh,d=Ah,e=b*b+c*c+d*d;return Eg>e&&(b=vh,c=wh,d=xh,Dg>rh&&(b=sh,c=th,d=uh),e=b*b+c*c+d*d,Eg>e)?[NaN,NaN]:[Math.atan2(c,b)*Gg,aa(d/Math.sqrt(e))*Gg]};var qh,rh,sh,th,uh,vh,wh,xh,yh,zh,Ah,Bh={sphere:s,point:wb,lineStart:yb,lineEnd:zb,polygonStart:function(){Bh.lineStart=Ab},polygonEnd:function(){Bh.lineStart=yb}},Ch=Fb(Bb,Jb,Lb,[-Ag,-Ag/2]),Dh=1e9;Wf.geo.clipExtent=function(){var a,b,c,d,e,f,g={stream:function(a){return e&&(e.valid=!1),e=f(a),e.valid=!0,e},extent:function(h){return arguments.length?(f=Pb(a=+h[0][0],b=+h[0][1],c=+h[1][0],d=+h[1][1]),e&&(e.valid=!1,e=null),g):[[a,b],[c,d]]}};return g.extent([[0,0],[960,500]])},(Wf.geo.conicEqualArea=function(){return Rb(Sb)}).raw=Sb,Wf.geo.albers=function(){return Wf.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},Wf.geo.albersUsa=function(){function a(a){var f=a[0],g=a[1];return b=null,c(f,g),b||(d(f,g),b)||e(f,g),b}var b,c,d,e,f=Wf.geo.albers(),g=Wf.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),h=Wf.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),i={point:function(a,c){b=[a,c]}};return a.invert=function(a){var b=f.scale(),c=f.translate(),d=(a[0]-c[0])/b,e=(a[1]-c[1])/b;return(e>=.12&&.234>e&&d>=-.425&&-.214>d?g:e>=.166&&.234>e&&d>=-.214&&-.115>d?h:f).invert(a)},a.stream=function(a){var b=f.stream(a),c=g.stream(a),d=h.stream(a);return{point:function(a,e){b.point(a,e),c.point(a,e),d.point(a,e)},sphere:function(){b.sphere(),c.sphere(),d.sphere()},lineStart:function(){b.lineStart(),c.lineStart(),d.lineStart()},lineEnd:function(){b.lineEnd(),c.lineEnd(),d.lineEnd()},polygonStart:function(){b.polygonStart(),c.polygonStart(),d.polygonStart()},polygonEnd:function(){b.polygonEnd(),c.polygonEnd(),d.polygonEnd()}}},a.precision=function(b){return arguments.length?(f.precision(b),g.precision(b),h.precision(b),a):f.precision()},a.scale=function(b){return arguments.length?(f.scale(b),g.scale(.35*b),h.scale(b),a.translate(f.translate())):f.scale()},a.translate=function(b){if(!arguments.length)return f.translate();var j=f.scale(),k=+b[0],l=+b[1];return c=f.translate(b).clipExtent([[k-.455*j,l-.238*j],[k+.455*j,l+.238*j]]).stream(i).point,d=g.translate([k-.307*j,l+.201*j]).clipExtent([[k-.425*j+Dg,l+.12*j+Dg],[k-.214*j-Dg,l+.234*j-Dg]]).stream(i).point,e=h.translate([k-.205*j,l+.212*j]).clipExtent([[k-.214*j+Dg,l+.166*j+Dg],[k-.115*j-Dg,l+.234*j-Dg]]).stream(i).point,a},a.scale(1070)};var Eh,Fh,Gh,Hh,Ih,Jh,Kh={point:s,lineStart:s,lineEnd:s,polygonStart:function(){Fh=0,Kh.lineStart=Tb},polygonEnd:function(){Kh.lineStart=Kh.lineEnd=Kh.point=s,Eh+=ig(Fh/2)}},Lh={point:Ub,lineStart:s,lineEnd:s,polygonStart:s,polygonEnd:s},Mh={point:Xb,lineStart:Yb,lineEnd:Zb,polygonStart:function(){Mh.lineStart=$b},polygonEnd:function(){Mh.point=Xb,Mh.lineStart=Yb,Mh.lineEnd=Zb}};Wf.geo.path=function(){function a(a){return a&&("function"==typeof h&&f.pointRadius(+h.apply(this,arguments)),g&&g.valid||(g=e(f)),Wf.geo.stream(a,g)),f.result()}function b(){return g=null,a}var c,d,e,f,g,h=4.5;return a.area=function(a){return Eh=0,Wf.geo.stream(a,e(Kh)),Eh},a.centroid=function(a){return sh=th=uh=vh=wh=xh=yh=zh=Ah=0,Wf.geo.stream(a,e(Mh)),Ah?[yh/Ah,zh/Ah]:xh?[vh/xh,wh/xh]:uh?[sh/uh,th/uh]:[NaN,NaN]},a.bounds=function(a){return Ih=Jh=-(Gh=Hh=1/0),Wf.geo.stream(a,e(Lh)),[[Gh,Hh],[Ih,Jh]]},a.projection=function(a){return arguments.length?(e=(c=a)?a.stream||bc(a):Aa,b()):c},a.context=function(a){return arguments.length?(f=null==(d=a)?new Vb:new _b(a),"function"!=typeof h&&f.pointRadius(h),b()):d},a.pointRadius=function(b){return arguments.length?(h="function"==typeof b?b:(f.pointRadius(+b),+b),a):h},a.projection(Wf.geo.albersUsa()).context(null)},Wf.geo.transform=function(a){return{stream:function(b){var c=new cc(b);for(var d in a)c[d]=a[d];return c}}},cc.prototype={point:function(a,b){this.stream.point(a,b)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},Wf.geo.projection=ec,Wf.geo.projectionMutator=fc,(Wf.geo.equirectangular=function(){return ec(hc)}).raw=hc.invert=hc,Wf.geo.rotation=function(a){function b(b){return b=a(b[0]*Fg,b[1]*Fg),b[0]*=Gg,b[1]*=Gg,b}return a=jc(a[0]%360*Fg,a[1]*Fg,a.length>2?a[2]*Fg:0),b.invert=function(b){return b=a.invert(b[0]*Fg,b[1]*Fg),b[0]*=Gg,b[1]*=Gg,b},b},ic.invert=hc,Wf.geo.circle=function(){function a(){var a="function"==typeof d?d.apply(this,arguments):d,b=jc(-a[0]*Fg,-a[1]*Fg,0).invert,e=[];return c(null,null,1,{point:function(a,c){e.push(a=b(a,c)),a[0]*=Gg,a[1]*=Gg}}),{type:"Polygon",coordinates:[e]}}var b,c,d=[0,0],e=6;return a.origin=function(b){return arguments.length?(d=b,a):d},a.angle=function(d){return arguments.length?(c=nc((b=+d)*Fg,e*Fg),a):b},a.precision=function(d){return arguments.length?(c=nc(b*Fg,(e=+d)*Fg),a):e},a.angle(90)},Wf.geo.distance=function(a,b){var c,d=(b[0]-a[0])*Fg,e=a[1]*Fg,f=b[1]*Fg,g=Math.sin(d),h=Math.cos(d),i=Math.sin(e),j=Math.cos(e),k=Math.sin(f),l=Math.cos(f);return Math.atan2(Math.sqrt((c=l*g)*c+(c=j*k-i*l*h)*c),i*k+j*l*h)},Wf.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:b()}}function b(){return Wf.range(Math.ceil(f/q)*q,e,q).map(m).concat(Wf.range(Math.ceil(j/r)*r,i,r).map(n)).concat(Wf.range(Math.ceil(d/o)*o,c,o).filter(function(a){return ig(a%q)>Dg}).map(k)).concat(Wf.range(Math.ceil(h/p)*p,g,p).filter(function(a){return ig(a%r)>Dg}).map(l))}var c,d,e,f,g,h,i,j,k,l,m,n,o=10,p=o,q=90,r=360,s=2.5;return a.lines=function(){return b().map(function(a){return{type:"LineString",coordinates:a}})},a.outline=function(){return{type:"Polygon",coordinates:[m(f).concat(n(i).slice(1),m(e).reverse().slice(1),n(j).reverse().slice(1))]}},a.extent=function(b){return arguments.length?a.majorExtent(b).minorExtent(b):a.minorExtent()},a.majorExtent=function(b){return arguments.length?(f=+b[0][0],e=+b[1][0],j=+b[0][1],i=+b[1][1],f>e&&(b=f,f=e,e=b),j>i&&(b=j,j=i,i=b),a.precision(s)):[[f,j],[e,i]]},a.minorExtent=function(b){return arguments.length?(d=+b[0][0],c=+b[1][0],h=+b[0][1],g=+b[1][1],d>c&&(b=d,d=c,c=b),h>g&&(b=h,h=g,g=b),a.precision(s)):[[d,h],[c,g]]},a.step=function(b){return arguments.length?a.majorStep(b).minorStep(b):a.minorStep()},a.majorStep=function(b){return arguments.length?(q=+b[0],r=+b[1],a):[q,r]},a.minorStep=function(b){return arguments.length?(o=+b[0],p=+b[1],a):[o,p]},a.precision=function(b){return arguments.length?(s=+b,k=pc(h,g,90),l=qc(d,c,s),m=pc(j,i,90),n=qc(f,e,s),a):s},a.majorExtent([[-180,-90+Dg],[180,90-Dg]]).minorExtent([[-180,-80-Dg],[180,80+Dg]])},Wf.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[b||d.apply(this,arguments),c||e.apply(this,arguments)]}}var b,c,d=rc,e=sc;return a.distance=function(){return Wf.geo.distance(b||d.apply(this,arguments),c||e.apply(this,arguments))},a.source=function(c){return arguments.length?(d=c,b="function"==typeof c?null:c,a):d},a.target=function(b){return arguments.length?(e=b,c="function"==typeof b?null:b,a):e},a.precision=function(){return arguments.length?a:0},a},Wf.geo.interpolate=function(a,b){return tc(a[0]*Fg,a[1]*Fg,b[0]*Fg,b[1]*Fg)},Wf.geo.length=function(a){return Nh=0,Wf.geo.stream(a,Oh),Nh};var Nh,Oh={sphere:s,point:s,lineStart:uc,lineEnd:s,polygonStart:s,polygonEnd:s},Ph=vc(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(Wf.geo.azimuthalEqualArea=function(){return ec(Ph)}).raw=Ph;var Qh=vc(function(a){var b=Math.acos(a);return b&&b/Math.sin(b)},Aa);(Wf.geo.azimuthalEquidistant=function(){return ec(Qh)}).raw=Qh,(Wf.geo.conicConformal=function(){return Rb(wc)}).raw=wc,(Wf.geo.conicEquidistant=function(){return Rb(xc)}).raw=xc;var Rh=vc(function(a){return 1/a},Math.atan);(Wf.geo.gnomonic=function(){return ec(Rh)}).raw=Rh,yc.invert=function(a,b){return[a,2*Math.atan(Math.exp(b))-Cg]},(Wf.geo.mercator=function(){return zc(yc)}).raw=yc;var Sh=vc(function(){return 1},Math.asin);(Wf.geo.orthographic=function(){return ec(Sh)}).raw=Sh;var Th=vc(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(Wf.geo.stereographic=function(){return ec(Th)}).raw=Th,Ac.invert=function(a,b){return[-b,2*Math.atan(Math.exp(a))-Cg]},(Wf.geo.transverseMercator=function(){var a=zc(Ac),b=a.center,c=a.rotate;return a.center=function(a){return a?b([-a[1],a[0]]):(a=b(),[a[1],-a[0]])},a.rotate=function(a){return a?c([a[0],a[1],a.length>2?a[2]+90:90]):(a=c(),[a[0],a[1],a[2]-90])},c([0,0,90])}).raw=Ac,Wf.geom={},Wf.geom.hull=function(a){function b(a){if(a.length<3)return[];var b,e=za(c),f=za(d),g=a.length,h=[],i=[];for(b=0;g>b;b++)h.push([+e.call(this,a[b],b),+f.call(this,a[b],b),b]);for(h.sort(Ec),b=0;g>b;b++)i.push([h[b][0],-h[b][1]]);var j=Dc(h),k=Dc(i),l=k[0]===j[0],m=k[k.length-1]===j[j.length-1],n=[];for(b=j.length-1;b>=0;--b)n.push(a[h[j[b]][2]]);for(b=+l;b<k.length-m;++b)n.push(a[h[k[b]][2]]);return n}var c=Bc,d=Cc;return arguments.length?b(a):(b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?(d=a,b):d},b)},Wf.geom.polygon=function(a){return ng(a,Uh),a};var Uh=Wf.geom.polygon.prototype=[];Uh.area=function(){for(var a,b=-1,c=this.length,d=this[c-1],e=0;++b<c;)a=d,d=this[b],e+=a[1]*d[0]-a[0]*d[1];return.5*e},Uh.centroid=function(a){var b,c,d=-1,e=this.length,f=0,g=0,h=this[e-1];for(arguments.length||(a=-1/(6*this.area()));++d<e;)b=h,h=this[d],c=b[0]*h[1]-h[0]*b[1],f+=(b[0]+h[0])*c,g+=(b[1]+h[1])*c;return[f*a,g*a]},Uh.clip=function(a){for(var b,c,d,e,f,g,h=Hc(a),i=-1,j=this.length-Hc(this),k=this[j-1];++i<j;){for(b=a.slice(),a.length=0,e=this[i],f=b[(d=b.length-h)-1],c=-1;++c<d;)g=b[c],Fc(g,k,e)?(Fc(f,k,e)||a.push(Gc(f,g,k,e)),a.push(g)):Fc(f,k,e)&&a.push(Gc(f,g,k,e)),f=g;h&&a.push(a[0]),k=e}return a};var Vh,Wh,Xh,Yh,Zh,$h=[],_h=[];Pc.prototype.prepare=function(){for(var a,b=this.edges,c=b.length;c--;)a=b[c].edge,a.b&&a.a||b.splice(c,1);return b.sort(Rc),b.length},_c.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},ad.prototype={insert:function(a,b){var c,d,e;if(a){if(b.P=a,b.N=a.N,a.N&&(a.N.P=b),a.N=b,a.R){for(a=a.R;a.L;)a=a.L;a.L=b}else a.R=b;c=a}else this._?(a=ed(this._),b.P=null,b.N=a,a.P=a.L=b,c=a):(b.P=b.N=null,this._=b,c=null);for(b.L=b.R=null,b.U=c,b.C=!0,a=b;c&&c.C;)d=c.U,c===d.L?(e=d.R,e&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.R&&(cd(this,c),a=c,c=a.U),c.C=!1,d.C=!0,dd(this,d))):(e=d.L,e&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.L&&(dd(this,c),a=c,c=a.U),c.C=!1,d.C=!0,cd(this,d))),c=a.U;this._.C=!1},remove:function(a){a.N&&(a.N.P=a.P),a.P&&(a.P.N=a.N),a.N=a.P=null;var b,c,d,e=a.U,f=a.L,g=a.R;if(c=f?g?ed(g):f:g,e?e.L===a?e.L=c:e.R=c:this._=c,f&&g?(d=c.C,c.C=a.C,c.L=f,f.U=c,c!==g?(e=c.U,c.U=a.U,a=c.R,e.L=a,c.R=g,g.U=c):(c.U=e,e=c,a=c.R)):(d=a.C,a=c),a&&(a.U=e),!d){if(a&&a.C)return void(a.C=!1);do{if(a===this._)break;if(a===e.L){if(b=e.R,b.C&&(b.C=!1,e.C=!0,cd(this,e),b=e.R),b.L&&b.L.C||b.R&&b.R.C){b.R&&b.R.C||(b.L.C=!1,b.C=!0,dd(this,b),b=e.R),b.C=e.C,e.C=b.R.C=!1,cd(this,e),a=this._;break}}else if(b=e.L,b.C&&(b.C=!1,e.C=!0,dd(this,e),b=e.L),b.L&&b.L.C||b.R&&b.R.C){b.L&&b.L.C||(b.R.C=!1,b.C=!0,cd(this,b),b=e.L),b.C=e.C,e.C=b.L.C=!1,dd(this,e),a=this._;break}b.C=!0,a=e,e=e.U}while(!a.C);a&&(a.C=!1)}}},Wf.geom.voronoi=function(a){function b(a){var b=new Array(a.length),d=h[0][0],e=h[0][1],f=h[1][0],g=h[1][1];return fd(c(a),h).cells.forEach(function(c,h){var i=c.edges,j=c.site,k=b[h]=i.length?i.map(function(a){var b=a.start();return[b.x,b.y]}):j.x>=d&&j.x<=f&&j.y>=e&&j.y<=g?[[d,g],[f,g],[f,e],[d,e]]:[];k.point=a[h]}),b}function c(a){return a.map(function(a,b){return{x:Math.round(f(a,b)/Dg)*Dg,y:Math.round(g(a,b)/Dg)*Dg,i:b}})}var d=Bc,e=Cc,f=d,g=e,h=ai;return a?b(a):(b.links=function(a){return fd(c(a)).edges.filter(function(a){return a.l&&a.r}).map(function(b){return{source:a[b.l.i],target:a[b.r.i]}})},b.triangles=function(a){var b=[];return fd(c(a)).cells.forEach(function(c,d){for(var e,f,g=c.site,h=c.edges.sort(Rc),i=-1,j=h.length,k=h[j-1].edge,l=k.l===g?k.r:k.l;++i<j;)e=k,f=l,k=h[i].edge,l=k.l===g?k.r:k.l,d<f.i&&d<l.i&&hd(g,f,l)<0&&b.push([a[d],a[f.i],a[l.i]])}),b},b.x=function(a){return arguments.length?(f=za(d=a),b):d},b.y=function(a){return arguments.length?(g=za(e=a),b):e},b.clipExtent=function(a){return arguments.length?(h=null==a?ai:a,b):h===ai?null:h},b.size=function(a){return arguments.length?b.clipExtent(a&&[[0,0],a]):h===ai?null:h&&h[1]},b)};var ai=[[-1e6,-1e6],[1e6,1e6]];Wf.geom.delaunay=function(a){return Wf.geom.voronoi().triangles(a)},Wf.geom.quadtree=function(a,b,c,d,e){function f(a){function f(a,b,c,d,e,f,g,h){if(!isNaN(c)&&!isNaN(d))if(a.leaf){var i=a.x,k=a.y;if(null!=i)if(ig(i-c)+ig(k-d)<.01)j(a,b,c,d,e,f,g,h);else{var l=a.point;a.x=a.y=a.point=null,j(a,l,i,k,e,f,g,h),j(a,b,c,d,e,f,g,h)}else a.x=c,a.y=d,a.point=b}else j(a,b,c,d,e,f,g,h)}function j(a,b,c,d,e,g,h,i){var j=.5*(e+h),k=.5*(g+i),l=c>=j,m=d>=k,n=(m<<1)+l;a.leaf=!1,a=a.nodes[n]||(a.nodes[n]=kd()),l?e=j:h=j,m?g=k:i=k,f(a,b,c,d,e,g,h,i)}var k,l,m,n,o,p,q,r,s,t=za(h),u=za(i);if(null!=b)p=b,q=c,r=d,s=e;else if(r=s=-(p=q=1/0),l=[],m=[],o=a.length,g)for(n=0;o>n;++n)k=a[n],k.x<p&&(p=k.x),k.y<q&&(q=k.y),k.x>r&&(r=k.x),k.y>s&&(s=k.y),l.push(k.x),m.push(k.y);else for(n=0;o>n;++n){var v=+t(k=a[n],n),w=+u(k,n);p>v&&(p=v),q>w&&(q=w),v>r&&(r=v),w>s&&(s=w),l.push(v),m.push(w)}var x=r-p,y=s-q;x>y?s=q+x:r=p+y;var z=kd();if(z.add=function(a){f(z,a,+t(a,++n),+u(a,n),p,q,r,s)},z.visit=function(a){ld(a,z,p,q,r,s)},n=-1,null==b){for(;++n<o;)f(z,a[n],l[n],m[n],p,q,r,s);--n}else a.forEach(z.add);return l=m=a=k=null,z}var g,h=Bc,i=Cc;return(g=arguments.length)?(h=id,i=jd,3===g&&(e=c,d=b,c=b=0),f(a)):(f.x=function(a){return arguments.length?(h=a,f):h},f.y=function(a){return arguments.length?(i=a,f):i},f.extent=function(a){return arguments.length?(null==a?b=c=d=e=null:(b=+a[0][0],c=+a[0][1],d=+a[1][0],e=+a[1][1]),f):null==b?null:[[b,c],[d,e]]},f.size=function(a){return arguments.length?(null==a?b=c=d=e=null:(b=c=0,d=+a[0],e=+a[1]),f):null==b?null:[d-b,e-c]},f)},Wf.interpolateRgb=md,Wf.interpolateObject=nd,Wf.interpolateNumber=od,Wf.interpolateString=pd;var bi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ci=new RegExp(bi.source,"g");Wf.interpolate=qd,Wf.interpolators=[function(a,b){var c=typeof b;return("string"===c?Vg.has(b)||/^(#|rgb\(|hsl\()/.test(b)?md:pd:b instanceof fa?md:Array.isArray(b)?rd:"object"===c&&isNaN(b)?nd:od)(a,b)}],Wf.interpolateArray=rd;var di=function(){return Aa},ei=Wf.map({linear:di,poly:yd,quad:function(){return vd},cubic:function(){return wd},sin:function(){return zd},exp:function(){return Ad},circle:function(){return Bd},elastic:Cd,back:Dd,bounce:function(){return Ed}}),fi=Wf.map({"in":Aa,out:td,"in-out":ud,"out-in":function(a){return ud(td(a))}});Wf.ease=function(a){var b=a.indexOf("-"),c=b>=0?a.slice(0,b):a,d=b>=0?a.slice(b+1):"in";return c=ei.get(c)||di,d=fi.get(d)||Aa,sd(d(c.apply(null,Xf.call(arguments,1))))},Wf.interpolateHcl=Fd,Wf.interpolateHsl=Gd,Wf.interpolateLab=Hd,Wf.interpolateRound=Id,Wf.transform=function(a){var b=Zf.createElementNS(Wf.ns.prefix.svg,"g");return(Wf.transform=function(a){if(null!=a){b.setAttribute("transform",a);var c=b.transform.baseVal.consolidate()}return new Jd(c?c.matrix:gi)})(a)},Jd.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var gi={a:1,b:0,c:0,d:1,e:0,f:0};Wf.interpolateTransform=Nd,Wf.layout={},Wf.layout.bundle=function(){return function(a){for(var b=[],c=-1,d=a.length;++c<d;)b.push(Qd(a[c]));return b}},Wf.layout.chord=function(){function a(){var a,j,l,m,n,o={},p=[],q=Wf.range(f),r=[];for(c=[],d=[],a=0,m=-1;++m<f;){for(j=0,n=-1;++n<f;)j+=e[m][n];p.push(j),r.push(Wf.range(f)),a+=j}for(g&&q.sort(function(a,b){return g(p[a],p[b])}),h&&r.forEach(function(a,b){a.sort(function(a,c){return h(e[b][a],e[b][c])})}),a=(Bg-k*f)/a,j=0,m=-1;++m<f;){for(l=j,n=-1;++n<f;){var s=q[m],t=r[s][n],u=e[s][t],v=j,w=j+=u*a;o[s+"-"+t]={index:s,subindex:t,startAngle:v,endAngle:w,value:u}}d[s]={index:s,startAngle:l,endAngle:j,value:(j-l)/a},j+=k}for(m=-1;++m<f;)for(n=m-1;++n<f;){var x=o[m+"-"+n],y=o[n+"-"+m];(x.value||y.value)&&c.push(x.value<y.value?{source:y,target:x}:{source:x,target:y})}i&&b()}function b(){c.sort(function(a,b){return i((a.source.value+a.target.value)/2,(b.source.value+b.target.value)/2)})}var c,d,e,f,g,h,i,j={},k=0;return j.matrix=function(a){return arguments.length?(f=(e=a)&&e.length,c=d=null,j):e},j.padding=function(a){return arguments.length?(k=a,c=d=null,j):k},j.sortGroups=function(a){return arguments.length?(g=a,c=d=null,j):g},j.sortSubgroups=function(a){return arguments.length?(h=a,c=null,j):h},j.sortChords=function(a){return arguments.length?(i=a,c&&b(),j):i},j.chords=function(){return c||a(),c},j.groups=function(){return d||a(),d},j},Wf.layout.force=function(){function a(a){return function(b,c,d,e){if(b.point!==a){var f=b.cx-a.x,g=b.cy-a.y,h=e-c,i=f*f+g*g;if(i>h*h/q){if(o>i){var j=b.charge/i;a.px-=f*j,a.py-=g*j}return!0}if(b.point&&i&&o>i){var j=b.pointCharge/i;a.px-=f*j,a.py-=g*j}}return!b.charge}}function b(a){a.px=Wf.event.x,a.py=Wf.event.y,h.resume()}var c,d,e,f,g,h={},i=Wf.dispatch("start","tick","end"),j=[1,1],k=.9,l=hi,m=ii,n=-30,o=ji,p=.1,q=.64,r=[],s=[];return h.tick=function(){if((d*=.99)<.005)return i.end({type:"end",alpha:d=0}),!0;var b,c,h,l,m,o,q,t,u,v=r.length,w=s.length;for(c=0;w>c;++c)h=s[c],l=h.source,m=h.target,t=m.x-l.x,u=m.y-l.y,(o=t*t+u*u)&&(o=d*f[c]*((o=Math.sqrt(o))-e[c])/o,t*=o,u*=o,m.x-=t*(q=l.weight/(m.weight+l.weight)),m.y-=u*q,l.x+=t*(q=1-q),l.y+=u*q);if((q=d*p)&&(t=j[0]/2,u=j[1]/2,c=-1,q))for(;++c<v;)h=r[c],h.x+=(t-h.x)*q,h.y+=(u-h.y)*q;if(n)for(Xd(b=Wf.geom.quadtree(r),d,g),c=-1;++c<v;)(h=r[c]).fixed||b.visit(a(h));for(c=-1;++c<v;)h=r[c],h.fixed?(h.x=h.px,h.y=h.py):(h.x-=(h.px-(h.px=h.x))*k,h.y-=(h.py-(h.py=h.y))*k);i.tick({type:"tick",alpha:d})},h.nodes=function(a){return arguments.length?(r=a,h):r},h.links=function(a){return arguments.length?(s=a,h):s},h.size=function(a){return arguments.length?(j=a,h):j},h.linkDistance=function(a){return arguments.length?(l="function"==typeof a?a:+a,h):l},h.distance=h.linkDistance,h.linkStrength=function(a){return arguments.length?(m="function"==typeof a?a:+a,h):m},h.friction=function(a){return arguments.length?(k=+a,h):k},h.charge=function(a){return arguments.length?(n="function"==typeof a?a:+a,h):n},h.chargeDistance=function(a){return arguments.length?(o=a*a,h):Math.sqrt(o)},h.gravity=function(a){return arguments.length?(p=+a,h):p},h.theta=function(a){return arguments.length?(q=a*a,h):Math.sqrt(q)},h.alpha=function(a){return arguments.length?(a=+a,d?d=a>0?a:0:a>0&&(i.start({type:"start",alpha:d=a}),Wf.timer(h.tick)),h):d},h.start=function(){function a(a,d){if(!c){for(c=new Array(i),h=0;i>h;++h)c[h]=[];for(h=0;j>h;++h){var e=s[h];c[e.source.index].push(e.target),c[e.target.index].push(e.source)}}for(var f,g=c[b],h=-1,j=g.length;++h<j;)if(!isNaN(f=g[h][a]))return f;return Math.random()*d}var b,c,d,i=r.length,k=s.length,o=j[0],p=j[1];for(b=0;i>b;++b)(d=r[b]).index=b,d.weight=0;for(b=0;k>b;++b)d=s[b],"number"==typeof d.source&&(d.source=r[d.source]),"number"==typeof d.target&&(d.target=r[d.target]),++d.source.weight,++d.target.weight;for(b=0;i>b;++b)d=r[b],isNaN(d.x)&&(d.x=a("x",o)),isNaN(d.y)&&(d.y=a("y",p)),isNaN(d.px)&&(d.px=d.x),isNaN(d.py)&&(d.py=d.y);if(e=[],"function"==typeof l)for(b=0;k>b;++b)e[b]=+l.call(this,s[b],b);else for(b=0;k>b;++b)e[b]=l;if(f=[],"function"==typeof m)for(b=0;k>b;++b)f[b]=+m.call(this,s[b],b);else for(b=0;k>b;++b)f[b]=m;if(g=[],"function"==typeof n)for(b=0;i>b;++b)g[b]=+n.call(this,r[b],b);else for(b=0;i>b;++b)g[b]=n;return h.resume()},h.resume=function(){return h.alpha(.1)},h.stop=function(){return h.alpha(0)},h.drag=function(){return c||(c=Wf.behavior.drag().origin(Aa).on("dragstart.force",Td).on("drag.force",b).on("dragend.force",Ud)),arguments.length?void this.on("mouseover.force",Vd).on("mouseout.force",Wd).call(c):c},Wf.rebind(h,i,"on")};var hi=20,ii=1,ji=1/0;Wf.layout.hierarchy=function(){function a(e){var f,g=[e],h=[];for(e.depth=0;null!=(f=g.pop());)if(h.push(f),(j=c.call(a,f,f.depth))&&(i=j.length)){for(var i,j,k;--i>=0;)g.push(k=j[i]),k.parent=f,k.depth=f.depth+1;d&&(f.value=0),f.children=j}else d&&(f.value=+d.call(a,f,f.depth)||0),delete f.children;return $d(e,function(a){var c,e;b&&(c=a.children)&&c.sort(b),d&&(e=a.parent)&&(e.value+=a.value)}),h}var b=be,c=_d,d=ae;return a.sort=function(c){return arguments.length?(b=c,a):b},a.children=function(b){return arguments.length?(c=b,a):c},a.value=function(b){return arguments.length?(d=b,a):d},a.revalue=function(b){return d&&(Zd(b,function(a){a.children&&(a.value=0)}),$d(b,function(b){var c;b.children||(b.value=+d.call(a,b,b.depth)||0),(c=b.parent)&&(c.value+=b.value)})),b},a},Wf.layout.partition=function(){function a(b,c,d,e){var f=b.children;if(b.x=c,b.y=b.depth*e,b.dx=d,b.dy=e,f&&(g=f.length)){var g,h,i,j=-1;for(d=b.value?d/b.value:0;++j<g;)a(h=f[j],c,i=h.value*d,e),c+=i}}function b(a){var c=a.children,d=0;if(c&&(e=c.length))for(var e,f=-1;++f<e;)d=Math.max(d,b(c[f]));return 1+d}function c(c,f){var g=d.call(this,c,f);return a(g[0],0,e[0],e[1]/b(g[0])),g}var d=Wf.layout.hierarchy(),e=[1,1];return c.size=function(a){return arguments.length?(e=a,c):e},Yd(c,d)},Wf.layout.pie=function(){function a(f){var g=f.map(function(c,d){return+b.call(a,c,d)}),h=+("function"==typeof d?d.apply(this,arguments):d),i=(("function"==typeof e?e.apply(this,arguments):e)-h)/Wf.sum(g),j=Wf.range(f.length);null!=c&&j.sort(c===ki?function(a,b){return g[b]-g[a]}:function(a,b){return c(f[a],f[b])});var k=[];return j.forEach(function(a){var b;k[a]={data:f[a],value:b=g[a],startAngle:h,endAngle:h+=b*i}}),k}var b=Number,c=ki,d=0,e=Bg;return a.value=function(c){return arguments.length?(b=c,a):b},a.sort=function(b){return arguments.length?(c=b,a):c},a.startAngle=function(b){return arguments.length?(d=b,a):d},a.endAngle=function(b){return arguments.length?(e=b,a):e},a};var ki={};Wf.layout.stack=function(){function a(h,i){if(!(m=h.length))return h;var j=h.map(function(c,d){return b.call(a,c,d)}),k=j.map(function(b){return b.map(function(b,c){return[f.call(a,b,c),g.call(a,b,c)]})}),l=c.call(a,k,i);j=Wf.permute(j,l),k=Wf.permute(k,l);var m,n,o,p,q=d.call(a,k,i),r=j[0].length;for(o=0;r>o;++o)for(e.call(a,j[0][o],p=q[o],k[0][o][1]),n=1;m>n;++n)e.call(a,j[n][o],p+=k[n-1][o][1],k[n][o][1]);return h}var b=Aa,c=ge,d=he,e=fe,f=de,g=ee;return a.values=function(c){return arguments.length?(b=c,a):b},a.order=function(b){return arguments.length?(c="function"==typeof b?b:li.get(b)||ge,a):c},a.offset=function(b){return arguments.length?(d="function"==typeof b?b:mi.get(b)||he,a):d},a.x=function(b){return arguments.length?(f=b,a):f},a.y=function(b){return arguments.length?(g=b,a):g},a.out=function(b){return arguments.length?(e=b,a):e},a};var li=Wf.map({"inside-out":function(a){var b,c,d=a.length,e=a.map(ie),f=a.map(je),g=Wf.range(d).sort(function(a,b){return e[a]-e[b]}),h=0,i=0,j=[],k=[];for(b=0;d>b;++b)c=g[b],i>h?(h+=f[c],j.push(c)):(i+=f[c],k.push(c));return k.reverse().concat(j)},reverse:function(a){return Wf.range(a.length).reverse()},"default":ge}),mi=Wf.map({silhouette:function(a){var b,c,d,e=a.length,f=a[0].length,g=[],h=0,i=[];for(c=0;f>c;++c){for(b=0,d=0;e>b;b++)d+=a[b][c][1];d>h&&(h=d),g.push(d)}for(c=0;f>c;++c)i[c]=(h-g[c])/2;return i},wiggle:function(a){var b,c,d,e,f,g,h,i,j,k=a.length,l=a[0],m=l.length,n=[];for(n[0]=i=j=0,c=1;m>c;++c){for(b=0,e=0;k>b;++b)e+=a[b][c][1];for(b=0,f=0,h=l[c][0]-l[c-1][0];k>b;++b){for(d=0,g=(a[b][c][1]-a[b][c-1][1])/(2*h);b>d;++d)g+=(a[d][c][1]-a[d][c-1][1])/h;f+=g*a[b][c][1]}n[c]=i-=e?f/e*h:0,j>i&&(j=i)}for(c=0;m>c;++c)n[c]-=j;return n},expand:function(a){var b,c,d,e=a.length,f=a[0].length,g=1/e,h=[];for(c=0;f>c;++c){for(b=0,d=0;e>b;b++)d+=a[b][c][1];if(d)for(b=0;e>b;b++)a[b][c][1]/=d;else for(b=0;e>b;b++)a[b][c][1]=g}for(c=0;f>c;++c)h[c]=0;return h},zero:he});Wf.layout.histogram=function(){function a(a,f){for(var g,h,i=[],j=a.map(c,this),k=d.call(this,j,f),l=e.call(this,k,j,f),f=-1,m=j.length,n=l.length-1,o=b?1:1/m;++f<n;)g=i[f]=[],g.dx=l[f+1]-(g.x=l[f]),g.y=0;if(n>0)for(f=-1;++f<m;)h=j[f],h>=k[0]&&h<=k[1]&&(g=i[Wf.bisect(l,h,1,n)-1],g.y+=o,g.push(a[f]));return i}var b=!0,c=Number,d=ne,e=le;return a.value=function(b){return arguments.length?(c=b,a):c},a.range=function(b){return arguments.length?(d=za(b),a):d},a.bins=function(b){return arguments.length?(e="number"==typeof b?function(a){return me(a,b)}:za(b),a):e},a.frequency=function(c){return arguments.length?(b=!!c,a):b},a},Wf.layout.pack=function(){function a(a,f){var g=c.call(this,a,f),h=g[0],i=e[0],j=e[1],k=null==b?Math.sqrt:"function"==typeof b?b:function(){return b};if(h.x=h.y=0,$d(h,function(a){a.r=+k(a.value)}),$d(h,se),d){var l=d*(b?1:Math.max(2*h.r/i,2*h.r/j))/2;$d(h,function(a){a.r+=l}),$d(h,se),$d(h,function(a){a.r-=l})}return ve(h,i/2,j/2,b?1:1/Math.max(2*h.r/i,2*h.r/j)),g}var b,c=Wf.layout.hierarchy().sort(oe),d=0,e=[1,1];return a.size=function(b){return arguments.length?(e=b,a):e},a.radius=function(c){return arguments.length?(b=null==c||"function"==typeof c?c:+c,a):b},a.padding=function(b){return arguments.length?(d=+b,a):d},Yd(a,c)},Wf.layout.tree=function(){function a(a,e){var k=g.call(this,a,e),l=k[0],m=b(l);if($d(m,c),m.parent.m=-m.z,Zd(m,d),j)Zd(l,f);else{var n=l,o=l,p=l;Zd(l,function(a){a.x<n.x&&(n=a),a.x>o.x&&(o=a),a.depth>p.depth&&(p=a)});var q=h(n,o)/2-n.x,r=i[0]/(o.x+h(o,n)/2+q),s=i[1]/(p.depth||1);Zd(l,function(a){a.x=(a.x+q)*r,a.y=a.depth*s})}return k}function b(a){for(var b,c={A:null,children:[a]},d=[c];null!=(b=d.pop());)for(var e,f=b.children,g=0,h=f.length;h>g;++g)d.push((f[g]=e={_:f[g],parent:b,children:(e=f[g].children)&&e.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:g}).a=e);return c.children[0]}function c(a){var b=a.children,c=a.parent.children,d=a.i?c[a.i-1]:null;if(b.length){Be(a);var f=(b[0].z+b[b.length-1].z)/2;d?(a.z=d.z+h(a._,d._),a.m=a.z-f):a.z=f}else d&&(a.z=d.z+h(a._,d._));a.parent.A=e(a,d,a.parent.A||c[0])}function d(a){a._.x=a.z+a.parent.m,a.m+=a.parent.m}function e(a,b,c){if(b){for(var d,e=a,f=a,g=b,i=e.parent.children[0],j=e.m,k=f.m,l=g.m,m=i.m;g=ze(g),e=ye(e),g&&e;)i=ye(i),f=ze(f),f.a=a,d=g.z+l-e.z-j+h(g._,e._),d>0&&(Ae(Ce(g,a,c),a,d),j+=d,k+=d),l+=g.m,j+=e.m,m+=i.m,k+=f.m;g&&!ze(f)&&(f.t=g,f.m+=l-k),e&&!ye(i)&&(i.t=e,i.m+=j-m,c=a)}return c}function f(a){a.x*=i[0],a.y=a.depth*i[1]}var g=Wf.layout.hierarchy().sort(null).value(null),h=xe,i=[1,1],j=null;return a.separation=function(b){return arguments.length?(h=b,a):h},a.size=function(b){return arguments.length?(j=null==(i=b)?f:null,a):j?null:i},a.nodeSize=function(b){return arguments.length?(j=null==(i=b)?null:f,a):j?i:null},Yd(a,g)},Wf.layout.cluster=function(){function a(a,f){var g,h=b.call(this,a,f),i=h[0],j=0;$d(i,function(a){var b=a.children;b&&b.length?(a.x=Ee(b),a.y=De(b)):(a.x=g?j+=c(a,g):0,a.y=0,g=a)});var k=Fe(i),l=Ge(i),m=k.x-c(k,l)/2,n=l.x+c(l,k)/2;return $d(i,e?function(a){a.x=(a.x-i.x)*d[0],a.y=(i.y-a.y)*d[1]}:function(a){a.x=(a.x-m)/(n-m)*d[0],a.y=(1-(i.y?a.y/i.y:1))*d[1]}),h}var b=Wf.layout.hierarchy().sort(null).value(null),c=xe,d=[1,1],e=!1;return a.separation=function(b){return arguments.length?(c=b,a):c},a.size=function(b){return arguments.length?(e=null==(d=b),a):e?null:d},a.nodeSize=function(b){return arguments.length?(e=null!=(d=b),a):e?d:null},Yd(a,b)},Wf.layout.treemap=function(){function a(a,b){for(var c,d,e=-1,f=a.length;++e<f;)d=(c=a[e]).value*(0>b?0:b),c.area=isNaN(d)||0>=d?0:d}function b(c){var f=c.children;if(f&&f.length){var g,h,i,j=l(c),k=[],m=f.slice(),o=1/0,p="slice"===n?j.dx:"dice"===n?j.dy:"slice-dice"===n?1&c.depth?j.dy:j.dx:Math.min(j.dx,j.dy);for(a(m,j.dx*j.dy/c.value),k.area=0;(i=m.length)>0;)k.push(g=m[i-1]),k.area+=g.area,"squarify"!==n||(h=d(k,p))<=o?(m.pop(),o=h):(k.area-=k.pop().area,e(k,p,j,!1),p=Math.min(j.dx,j.dy),k.length=k.area=0,o=1/0);k.length&&(e(k,p,j,!0),k.length=k.area=0),f.forEach(b)}}function c(b){var d=b.children;if(d&&d.length){var f,g=l(b),h=d.slice(),i=[];for(a(h,g.dx*g.dy/b.value),i.area=0;f=h.pop();)i.push(f),i.area+=f.area,null!=f.z&&(e(i,f.z?g.dx:g.dy,g,!h.length),i.length=i.area=0);d.forEach(c)}}function d(a,b){for(var c,d=a.area,e=0,f=1/0,g=-1,h=a.length;++g<h;)(c=a[g].area)&&(f>c&&(f=c),c>e&&(e=c));return d*=d,b*=b,d?Math.max(b*e*o/d,d/(b*f*o)):1/0}function e(a,b,c,d){var e,f=-1,g=a.length,h=c.x,j=c.y,k=b?i(a.area/b):0;if(b==c.dx){for((d||k>c.dy)&&(k=c.dy);++f<g;)e=a[f],e.x=h,e.y=j,e.dy=k,h+=e.dx=Math.min(c.x+c.dx-h,k?i(e.area/k):0);e.z=!0,e.dx+=c.x+c.dx-h,c.y+=k,c.dy-=k}else{for((d||k>c.dx)&&(k=c.dx);++f<g;)e=a[f],e.x=h,e.y=j,e.dx=k,j+=e.dy=Math.min(c.y+c.dy-j,k?i(e.area/k):0);e.z=!1,e.dy+=c.y+c.dy-j,c.x+=k,c.dx-=k}}function f(d){var e=g||h(d),f=e[0];return f.x=0,f.y=0,f.dx=j[0],f.dy=j[1],g&&h.revalue(f),a([f],f.dx*f.dy/f.value),(g?c:b)(f),m&&(g=e),e}var g,h=Wf.layout.hierarchy(),i=Math.round,j=[1,1],k=null,l=He,m=!1,n="squarify",o=.5*(1+Math.sqrt(5));return f.size=function(a){return arguments.length?(j=a,f):j},f.padding=function(a){function b(b){var c=a.call(f,b,b.depth);return null==c?He(b):Ie(b,"number"==typeof c?[c,c,c,c]:c)}function c(b){return Ie(b,a)}if(!arguments.length)return k;var d;return l=null==(k=a)?He:"function"==(d=typeof a)?b:"number"===d?(a=[a,a,a,a],c):c,f},f.round=function(a){return arguments.length?(i=a?Math.round:Number,f):i!=Number},f.sticky=function(a){return arguments.length?(m=a,g=null,f):m},f.ratio=function(a){return arguments.length?(o=a,f):o},f.mode=function(a){return arguments.length?(n=a+"",f):n},Yd(f,h)},Wf.random={normal:function(a,b){var c=arguments.length;return 2>c&&(b=1),1>c&&(a=0),function(){var c,d,e;do c=2*Math.random()-1,d=2*Math.random()-1,e=c*c+d*d;while(!e||e>1);return a+b*c*Math.sqrt(-2*Math.log(e)/e)}},logNormal:function(){
var a=Wf.random.normal.apply(Wf,arguments);return function(){return Math.exp(a())}},bates:function(a){var b=Wf.random.irwinHall(a);return function(){return b()/a}},irwinHall:function(a){return function(){for(var b=0,c=0;a>c;c++)b+=Math.random();return b}}},Wf.scale={};var ni={floor:Aa,ceil:Aa};Wf.scale.linear=function(){return Pe([0,1],[0,1],qd,!1)};var oi={s:1,g:1,p:1,r:1,e:1};Wf.scale.log=function(){return Xe(Wf.scale.linear().domain([0,1]),10,!0,[1,10])};var pi=Wf.format(".0e"),qi={floor:function(a){return-Math.ceil(-a)},ceil:function(a){return-Math.floor(-a)}};Wf.scale.pow=function(){return Ye(Wf.scale.linear(),1,[0,1])},Wf.scale.sqrt=function(){return Wf.scale.pow().exponent(.5)},Wf.scale.ordinal=function(){return $e([],{t:"range",a:[[]]})},Wf.scale.category10=function(){return Wf.scale.ordinal().range(ri)},Wf.scale.category20=function(){return Wf.scale.ordinal().range(si)},Wf.scale.category20b=function(){return Wf.scale.ordinal().range(ti)},Wf.scale.category20c=function(){return Wf.scale.ordinal().range(ui)};var ri=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(sa),si=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(sa),ti=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(sa),ui=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(sa);Wf.scale.quantile=function(){return _e([],[])},Wf.scale.quantize=function(){return af(0,1,[0,1])},Wf.scale.threshold=function(){return bf([.5],[0,1])},Wf.scale.identity=function(){return cf([0,1])},Wf.svg={},Wf.svg.arc=function(){function a(){var a=b.apply(this,arguments),f=c.apply(this,arguments),g=d.apply(this,arguments)+vi,h=e.apply(this,arguments)+vi,i=(g>h&&(i=g,g=h,h=i),h-g),j=Ag>i?"0":"1",k=Math.cos(g),l=Math.sin(g),m=Math.cos(h),n=Math.sin(h);return i>=wi?a?"M0,"+f+"A"+f+","+f+" 0 1,1 0,"+-f+"A"+f+","+f+" 0 1,1 0,"+f+"M0,"+a+"A"+a+","+a+" 0 1,0 0,"+-a+"A"+a+","+a+" 0 1,0 0,"+a+"Z":"M0,"+f+"A"+f+","+f+" 0 1,1 0,"+-f+"A"+f+","+f+" 0 1,1 0,"+f+"Z":a?"M"+f*k+","+f*l+"A"+f+","+f+" 0 "+j+",1 "+f*m+","+f*n+"L"+a*m+","+a*n+"A"+a+","+a+" 0 "+j+",0 "+a*k+","+a*l+"Z":"M"+f*k+","+f*l+"A"+f+","+f+" 0 "+j+",1 "+f*m+","+f*n+"L0,0Z"}var b=df,c=ef,d=ff,e=gf;return a.innerRadius=function(c){return arguments.length?(b=za(c),a):b},a.outerRadius=function(b){return arguments.length?(c=za(b),a):c},a.startAngle=function(b){return arguments.length?(d=za(b),a):d},a.endAngle=function(b){return arguments.length?(e=za(b),a):e},a.centroid=function(){var a=(b.apply(this,arguments)+c.apply(this,arguments))/2,f=(d.apply(this,arguments)+e.apply(this,arguments))/2+vi;return[Math.cos(f)*a,Math.sin(f)*a]},a};var vi=-Cg,wi=Bg-Dg;Wf.svg.line=function(){return hf(Aa)};var xi=Wf.map({linear:jf,"linear-closed":kf,step:lf,"step-before":mf,"step-after":nf,basis:tf,"basis-open":uf,"basis-closed":vf,bundle:wf,cardinal:qf,"cardinal-open":of,"cardinal-closed":pf,monotone:Cf});xi.forEach(function(a,b){b.key=a,b.closed=/-closed$/.test(a)});var yi=[0,2/3,1/3,0],zi=[0,1/3,2/3,0],Ai=[0,1/6,2/3,1/6];Wf.svg.line.radial=function(){var a=hf(Df);return a.radius=a.x,delete a.x,a.angle=a.y,delete a.y,a},mf.reverse=nf,nf.reverse=mf,Wf.svg.area=function(){return Ef(Aa)},Wf.svg.area.radial=function(){var a=Ef(Df);return a.radius=a.x,delete a.x,a.innerRadius=a.x0,delete a.x0,a.outerRadius=a.x1,delete a.x1,a.angle=a.y,delete a.y,a.startAngle=a.y0,delete a.y0,a.endAngle=a.y1,delete a.y1,a},Wf.svg.chord=function(){function a(a,h){var i=b(this,f,a,h),j=b(this,g,a,h);return"M"+i.p0+d(i.r,i.p1,i.a1-i.a0)+(c(i,j)?e(i.r,i.p1,i.r,i.p0):e(i.r,i.p1,j.r,j.p0)+d(j.r,j.p1,j.a1-j.a0)+e(j.r,j.p1,i.r,i.p0))+"Z"}function b(a,b,c,d){var e=b.call(a,c,d),f=h.call(a,e,d),g=i.call(a,e,d)+vi,k=j.call(a,e,d)+vi;return{r:f,a0:g,a1:k,p0:[f*Math.cos(g),f*Math.sin(g)],p1:[f*Math.cos(k),f*Math.sin(k)]}}function c(a,b){return a.a0==b.a0&&a.a1==b.a1}function d(a,b,c){return"A"+a+","+a+" 0 "+ +(c>Ag)+",1 "+b}function e(a,b,c,d){return"Q 0,0 "+d}var f=rc,g=sc,h=Ff,i=ff,j=gf;return a.radius=function(b){return arguments.length?(h=za(b),a):h},a.source=function(b){return arguments.length?(f=za(b),a):f},a.target=function(b){return arguments.length?(g=za(b),a):g},a.startAngle=function(b){return arguments.length?(i=za(b),a):i},a.endAngle=function(b){return arguments.length?(j=za(b),a):j},a},Wf.svg.diagonal=function(){function a(a,e){var f=b.call(this,a,e),g=c.call(this,a,e),h=(f.y+g.y)/2,i=[f,{x:f.x,y:h},{x:g.x,y:h},g];return i=i.map(d),"M"+i[0]+"C"+i[1]+" "+i[2]+" "+i[3]}var b=rc,c=sc,d=Gf;return a.source=function(c){return arguments.length?(b=za(c),a):b},a.target=function(b){return arguments.length?(c=za(b),a):c},a.projection=function(b){return arguments.length?(d=b,a):d},a},Wf.svg.diagonal.radial=function(){var a=Wf.svg.diagonal(),b=Gf,c=a.projection;return a.projection=function(a){return arguments.length?c(Hf(b=a)):b},a},Wf.svg.symbol=function(){function a(a,d){return(Bi.get(b.call(this,a,d))||Kf)(c.call(this,a,d))}var b=Jf,c=If;return a.type=function(c){return arguments.length?(b=za(c),a):b},a.size=function(b){return arguments.length?(c=za(b),a):c},a};var Bi=Wf.map({circle:Kf,cross:function(a){var b=Math.sqrt(a/5)/2;return"M"+-3*b+","+-b+"H"+-b+"V"+-3*b+"H"+b+"V"+-b+"H"+3*b+"V"+b+"H"+b+"V"+3*b+"H"+-b+"V"+b+"H"+-3*b+"Z"},diamond:function(a){var b=Math.sqrt(a/(2*Fi)),c=b*Fi;return"M0,"+-b+"L"+c+",0 0,"+b+" "+-c+",0Z"},square:function(a){var b=Math.sqrt(a)/2;return"M"+-b+","+-b+"L"+b+","+-b+" "+b+","+b+" "+-b+","+b+"Z"},"triangle-down":function(a){var b=Math.sqrt(a/Ei),c=b*Ei/2;return"M0,"+c+"L"+b+","+-c+" "+-b+","+-c+"Z"},"triangle-up":function(a){var b=Math.sqrt(a/Ei),c=b*Ei/2;return"M0,"+-c+"L"+b+","+c+" "+-b+","+c+"Z"}});Wf.svg.symbolTypes=Bi.keys();var Ci,Di,Ei=Math.sqrt(3),Fi=Math.tan(30*Fg),Gi=[],Hi=0;Gi.call=sg.call,Gi.empty=sg.empty,Gi.node=sg.node,Gi.size=sg.size,Wf.transition=function(a){return arguments.length?Ci?a.transition():a:vg.transition()},Wf.transition.prototype=Gi,Gi.select=function(a){var b,c,d,e=this.id,f=[];a=z(a);for(var g=-1,h=this.length;++g<h;){f.push(b=[]);for(var i=this[g],j=-1,k=i.length;++j<k;)(d=i[j])&&(c=a.call(d,d.__data__,j,g))?("__data__"in d&&(c.__data__=d.__data__),Of(c,j,e,d.__transition__[e]),b.push(c)):b.push(null)}return Lf(f,e)},Gi.selectAll=function(a){var b,c,d,e,f,g=this.id,h=[];a=A(a);for(var i=-1,j=this.length;++i<j;)for(var k=this[i],l=-1,m=k.length;++l<m;)if(d=k[l]){f=d.__transition__[g],c=a.call(d,d.__data__,l,i),h.push(b=[]);for(var n=-1,o=c.length;++n<o;)(e=c[n])&&Of(e,n,g,f),b.push(e)}return Lf(h,g)},Gi.filter=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=L(a));for(var f=0,g=this.length;g>f;f++){e.push(b=[]);for(var c=this[f],h=0,i=c.length;i>h;h++)(d=c[h])&&a.call(d,d.__data__,h,f)&&b.push(d)}return Lf(e,this.id)},Gi.tween=function(a,b){var c=this.id;return arguments.length<2?this.node().__transition__[c].tween.get(a):N(this,null==b?function(b){b.__transition__[c].tween.remove(a)}:function(d){d.__transition__[c].tween.set(a,b)})},Gi.attr=function(a,b){function c(){this.removeAttribute(h)}function d(){this.removeAttributeNS(h.space,h.local)}function e(a){return null==a?c:(a+="",function(){var b,c=this.getAttribute(h);return c!==a&&(b=g(c,a),function(a){this.setAttribute(h,b(a))})})}function f(a){return null==a?d:(a+="",function(){var b,c=this.getAttributeNS(h.space,h.local);return c!==a&&(b=g(c,a),function(a){this.setAttributeNS(h.space,h.local,b(a))})})}if(arguments.length<2){for(b in a)this.attr(b,a[b]);return this}var g="transform"==a?Nd:qd,h=Wf.ns.qualify(a);return Mf(this,"attr."+a,b,h.local?f:e)},Gi.attrTween=function(a,b){function c(a,c){var d=b.call(this,a,c,this.getAttribute(e));return d&&function(a){this.setAttribute(e,d(a))}}function d(a,c){var d=b.call(this,a,c,this.getAttributeNS(e.space,e.local));return d&&function(a){this.setAttributeNS(e.space,e.local,d(a))}}var e=Wf.ns.qualify(a);return this.tween("attr."+a,e.local?d:c)},Gi.style=function(a,b,c){function d(){this.style.removeProperty(a)}function e(b){return null==b?d:(b+="",function(){var d,e=_f.getComputedStyle(this,null).getPropertyValue(a);return e!==b&&(d=qd(e,b),function(b){this.style.setProperty(a,d(b),c)})})}var f=arguments.length;if(3>f){if("string"!=typeof a){2>f&&(b="");for(c in a)this.style(c,a[c],b);return this}c=""}return Mf(this,"style."+a,b,e)},Gi.styleTween=function(a,b,c){function d(d,e){var f=b.call(this,d,e,_f.getComputedStyle(this,null).getPropertyValue(a));return f&&function(b){this.style.setProperty(a,f(b),c)}}return arguments.length<3&&(c=""),this.tween("style."+a,d)},Gi.text=function(a){return Mf(this,"text",a,Nf)},Gi.remove=function(){return this.each("end.transition",function(){var a;this.__transition__.count<2&&(a=this.parentNode)&&a.removeChild(this)})},Gi.ease=function(a){var b=this.id;return arguments.length<1?this.node().__transition__[b].ease:("function"!=typeof a&&(a=Wf.ease.apply(Wf,arguments)),N(this,function(c){c.__transition__[b].ease=a}))},Gi.delay=function(a){var b=this.id;return arguments.length<1?this.node().__transition__[b].delay:N(this,"function"==typeof a?function(c,d,e){c.__transition__[b].delay=+a.call(c,c.__data__,d,e)}:(a=+a,function(c){c.__transition__[b].delay=a}))},Gi.duration=function(a){var b=this.id;return arguments.length<1?this.node().__transition__[b].duration:N(this,"function"==typeof a?function(c,d,e){c.__transition__[b].duration=Math.max(1,a.call(c,c.__data__,d,e))}:(a=Math.max(1,a),function(c){c.__transition__[b].duration=a}))},Gi.each=function(a,b){var c=this.id;if(arguments.length<2){var d=Di,e=Ci;Ci=c,N(this,function(b,d,e){Di=b.__transition__[c],a.call(b,b.__data__,d,e)}),Di=d,Ci=e}else N(this,function(d){var e=d.__transition__[c];(e.event||(e.event=Wf.dispatch("start","end"))).on(a,b)});return this},Gi.transition=function(){for(var a,b,c,d,e=this.id,f=++Hi,g=[],h=0,i=this.length;i>h;h++){g.push(a=[]);for(var b=this[h],j=0,k=b.length;k>j;j++)(c=b[j])&&(d=Object.create(c.__transition__[e]),d.delay+=d.duration,Of(c,j,f,d)),a.push(c)}return Lf(g,f)},Wf.svg.axis=function(){function a(a){a.each(function(){var a,j=Wf.select(this),k=this.__chart__||c,l=this.__chart__=c.copy(),m=null==i?l.ticks?l.ticks.apply(l,h):l.domain():i,n=null==b?l.tickFormat?l.tickFormat.apply(l,h):Aa:b,o=j.selectAll(".tick").data(m,l),p=o.enter().insert("g",".domain").attr("class","tick").style("opacity",Dg),q=Wf.transition(o.exit()).style("opacity",Dg).remove(),r=Wf.transition(o.order()).style("opacity",1),s=Math.max(e,0)+g,t=Ke(l),u=j.selectAll(".domain").data([0]),v=(u.enter().append("path").attr("class","domain"),Wf.transition(u));p.append("line"),p.append("text");var w,x,y,z,A=p.select("line"),B=r.select("line"),C=o.select("text").text(n),D=p.select("text"),E=r.select("text"),F="top"===d||"left"===d?-1:1;if("bottom"===d||"top"===d?(a=Pf,w="x",y="y",x="x2",z="y2",C.attr("dy",0>F?"0em":".71em").style("text-anchor","middle"),v.attr("d","M"+t[0]+","+F*f+"V0H"+t[1]+"V"+F*f)):(a=Qf,w="y",y="x",x="y2",z="x2",C.attr("dy",".32em").style("text-anchor",0>F?"end":"start"),v.attr("d","M"+F*f+","+t[0]+"H0V"+t[1]+"H"+F*f)),A.attr(z,F*e),D.attr(y,F*s),B.attr(x,0).attr(z,F*e),E.attr(w,0).attr(y,F*s),l.rangeBand){var G=l,H=G.rangeBand()/2;k=l=function(a){return G(a)+H}}else k.rangeBand?k=l:q.call(a,l,k);p.call(a,k,l),r.call(a,l,l)})}var b,c=Wf.scale.linear(),d=Ii,e=6,f=6,g=3,h=[10],i=null;return a.scale=function(b){return arguments.length?(c=b,a):c},a.orient=function(b){return arguments.length?(d=b in Ji?b+"":Ii,a):d},a.ticks=function(){return arguments.length?(h=arguments,a):h},a.tickValues=function(b){return arguments.length?(i=b,a):i},a.tickFormat=function(c){return arguments.length?(b=c,a):b},a.tickSize=function(b){var c=arguments.length;return c?(e=+b,f=+arguments[c-1],a):e},a.innerTickSize=function(b){return arguments.length?(e=+b,a):e},a.outerTickSize=function(b){return arguments.length?(f=+b,a):f},a.tickPadding=function(b){return arguments.length?(g=+b,a):g},a.tickSubdivide=function(){return arguments.length&&a},a};var Ii="bottom",Ji={top:1,right:1,bottom:1,left:1};Wf.svg.brush=function(){function a(f){f.each(function(){var f=Wf.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",e).on("touchstart.brush",e),g=f.selectAll(".background").data([0]);g.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),f.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var h=f.selectAll(".resize").data(o,Aa);h.exit().remove(),h.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return Ki[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),h.style("display",a.empty()?"none":null);var k,l=Wf.transition(f),m=Wf.transition(g);i&&(k=Ke(i),m.attr("x",k[0]).attr("width",k[1]-k[0]),c(l)),j&&(k=Ke(j),m.attr("y",k[0]).attr("height",k[1]-k[0]),d(l)),b(l)})}function b(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+k[+/e$/.test(a)]+","+l[+/^s/.test(a)]+")"})}function c(a){a.select(".extent").attr("x",k[0]),a.selectAll(".extent,.n>rect,.s>rect").attr("width",k[1]-k[0])}function d(a){a.select(".extent").attr("y",l[0]),a.selectAll(".extent,.e>rect,.w>rect").attr("height",l[1]-l[0])}function e(){function e(){32==Wf.event.keyCode&&(C||(s=null,E[0]-=k[1],E[1]-=l[1],C=2),v())}function o(){32==Wf.event.keyCode&&2==C&&(E[0]+=k[1],E[1]+=l[1],C=0,v())}function p(){var a=Wf.mouse(u),e=!1;t&&(a[0]+=t[0],a[1]+=t[1]),C||(Wf.event.altKey?(s||(s=[(k[0]+k[1])/2,(l[0]+l[1])/2]),E[0]=k[+(a[0]<s[0])],E[1]=l[+(a[1]<s[1])]):s=null),A&&q(a,i,0)&&(c(y),e=!0),B&&q(a,j,1)&&(d(y),e=!0),e&&(b(y),x({type:"brush",mode:C?"move":"resize"}))}function q(a,b,c){var d,e,h=Ke(b),i=h[0],j=h[1],o=E[c],p=c?l:k,q=p[1]-p[0];return C&&(i-=o,j-=q+o),d=(c?n:m)?Math.max(i,Math.min(j,a[c])):a[c],C?e=(d+=o)+q:(s&&(o=Math.max(i,Math.min(j,2*s[c]-d))),d>o?(e=d,d=o):e=o),p[0]!=d||p[1]!=e?(c?g=null:f=null,p[0]=d,p[1]=e,!0):void 0}function r(){p(),y.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null),Wf.select("body").style("cursor",null),F.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),D(),x({type:"brushend"})}var s,t,u=this,w=Wf.select(Wf.event.target),x=h.of(u,arguments),y=Wf.select(u),z=w.datum(),A=!/^(n|s)$/.test(z)&&i,B=!/^(e|w)$/.test(z)&&j,C=w.classed("extent"),D=U(),E=Wf.mouse(u),F=Wf.select(_f).on("keydown.brush",e).on("keyup.brush",o);if(Wf.event.changedTouches?F.on("touchmove.brush",p).on("touchend.brush",r):F.on("mousemove.brush",p).on("mouseup.brush",r),y.interrupt().selectAll("*").interrupt(),C)E[0]=k[0]-E[0],E[1]=l[0]-E[1];else if(z){var G=+/w$/.test(z),H=+/^n/.test(z);t=[k[1-G]-E[0],l[1-H]-E[1]],E[0]=k[G],E[1]=l[H]}else Wf.event.altKey&&(s=E.slice());y.style("pointer-events","none").selectAll(".resize").style("display",null),Wf.select("body").style("cursor",w.style("cursor")),x({type:"brushstart"}),p()}var f,g,h=x(a,"brushstart","brush","brushend"),i=null,j=null,k=[0,0],l=[0,0],m=!0,n=!0,o=Li[0];return a.event=function(a){a.each(function(){var a=h.of(this,arguments),b={x:k,y:l,i:f,j:g},c=this.__chart__||b;this.__chart__=b,Ci?Wf.select(this).transition().each("start.brush",function(){f=c.i,g=c.j,k=c.x,l=c.y,a({type:"brushstart"})}).tween("brush:brush",function(){var c=rd(k,b.x),d=rd(l,b.y);return f=g=null,function(e){k=b.x=c(e),l=b.y=d(e),a({type:"brush",mode:"resize"})}}).each("end.brush",function(){f=b.i,g=b.j,a({type:"brush",mode:"resize"}),a({type:"brushend"})}):(a({type:"brushstart"}),a({type:"brush",mode:"resize"}),a({type:"brushend"}))})},a.x=function(b){return arguments.length?(i=b,o=Li[!i<<1|!j],a):i},a.y=function(b){return arguments.length?(j=b,o=Li[!i<<1|!j],a):j},a.clamp=function(b){return arguments.length?(i&&j?(m=!!b[0],n=!!b[1]):i?m=!!b:j&&(n=!!b),a):i&&j?[m,n]:i?m:j?n:null},a.extent=function(b){var c,d,e,h,m;return arguments.length?(i&&(c=b[0],d=b[1],j&&(c=c[0],d=d[0]),f=[c,d],i.invert&&(c=i(c),d=i(d)),c>d&&(m=c,c=d,d=m),c==k[0]&&d==k[1]||(k=[c,d])),j&&(e=b[0],h=b[1],i&&(e=e[1],h=h[1]),g=[e,h],j.invert&&(e=j(e),h=j(h)),e>h&&(m=e,e=h,h=m),e==l[0]&&h==l[1]||(l=[e,h])),a):(i&&(f?(c=f[0],d=f[1]):(c=k[0],d=k[1],i.invert&&(c=i.invert(c),d=i.invert(d)),c>d&&(m=c,c=d,d=m))),j&&(g?(e=g[0],h=g[1]):(e=l[0],h=l[1],j.invert&&(e=j.invert(e),h=j.invert(h)),e>h&&(m=e,e=h,h=m))),i&&j?[[c,e],[d,h]]:i?[c,d]:j&&[e,h])},a.clear=function(){return a.empty()||(k=[0,0],l=[0,0],f=g=null),a},a.empty=function(){return!!i&&k[0]==k[1]||!!j&&l[0]==l[1]},Wf.rebind(a,h,"on")};var Ki={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Li=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Mi=dh.format=jh.timeFormat,Ni=Mi.utc,Oi=Ni("%Y-%m-%dT%H:%M:%S.%LZ");Mi.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Rf:Oi,Rf.parse=function(a){var b=new Date(a);return isNaN(b)?null:b},Rf.toString=Oi.toString,dh.second=Na(function(a){return new eh(1e3*Math.floor(a/1e3))},function(a,b){a.setTime(a.getTime()+1e3*Math.floor(b))},function(a){return a.getSeconds()}),dh.seconds=dh.second.range,dh.seconds.utc=dh.second.utc.range,dh.minute=Na(function(a){return new eh(6e4*Math.floor(a/6e4))},function(a,b){a.setTime(a.getTime()+6e4*Math.floor(b))},function(a){return a.getMinutes()}),dh.minutes=dh.minute.range,dh.minutes.utc=dh.minute.utc.range,dh.hour=Na(function(a){var b=a.getTimezoneOffset()/60;return new eh(36e5*(Math.floor(a/36e5-b)+b))},function(a,b){a.setTime(a.getTime()+36e5*Math.floor(b))},function(a){return a.getHours()}),dh.hours=dh.hour.range,dh.hours.utc=dh.hour.utc.range,dh.month=Na(function(a){return a=dh.day(a),a.setDate(1),a},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()}),dh.months=dh.month.range,dh.months.utc=dh.month.utc.range;var Pi=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Qi=[[dh.second,1],[dh.second,5],[dh.second,15],[dh.second,30],[dh.minute,1],[dh.minute,5],[dh.minute,15],[dh.minute,30],[dh.hour,1],[dh.hour,3],[dh.hour,6],[dh.hour,12],[dh.day,1],[dh.day,2],[dh.week,1],[dh.month,1],[dh.month,3],[dh.year,1]],Ri=Mi.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%a %d",function(a){return a.getDay()&&1!=a.getDate()}],["%b %d",function(a){return 1!=a.getDate()}],["%B",function(a){return a.getMonth()}],["%Y",Bb]]),Si={range:function(a,b,c){return Wf.range(Math.ceil(a/c)*c,+b,c).map(Tf)},floor:Aa,ceil:Aa};Qi.year=dh.year,dh.scale=function(){return Sf(Wf.scale.linear(),Qi,Ri)};var Ti=Qi.map(function(a){return[a[0].utc,a[1]]}),Ui=Ni.multi([[".%L",function(a){return a.getUTCMilliseconds()}],[":%S",function(a){return a.getUTCSeconds()}],["%I:%M",function(a){return a.getUTCMinutes()}],["%I %p",function(a){return a.getUTCHours()}],["%a %d",function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],["%b %d",function(a){return 1!=a.getUTCDate()}],["%B",function(a){return a.getUTCMonth()}],["%Y",Bb]]);Ti.year=dh.year.utc,dh.scale.utc=function(){return Sf(Wf.scale.linear(),Ti,Ui)},Wf.text=Ba(function(a){return a.responseText}),Wf.json=function(a,b){return Ca(a,"application/json",Uf,b)},Wf.html=function(a,b){return Ca(a,"text/html",Vf,b)},Wf.xml=Ba(function(a){return a.responseXML}),"function"==typeof define&&define.amd?define(Wf):"object"==typeof module&&module.exports&&(module.exports=Wf),this.d3=Wf}(),function(){function a(a,b){return new Date(b,a+1,0).getDate()}function b(a,b,c){return function(d,e,f){var g=a(d),h=[];if(d>g&&b(g),f>1)for(;e>g;){var i=new Date(+g);c(i)%f===0&&h.push(i),b(g)}else for(;e>g;)h.push(new Date(+g)),b(g);return h}}var c=window.nv||{};c.version="1.1.15b",c.dev=!0,window.nv=c,c.tooltip=c.tooltip||{},c.utils=c.utils||{},c.models=c.models||{},c.charts={},c.graphs=[],c.logs={},c.dispatch=d3.dispatch("render_start","render_end"),c.dev&&(c.dispatch.on("render_start",function(a){c.logs.startTime=+new Date}),c.dispatch.on("render_end",function(a){c.logs.endTime=+new Date,c.logs.totalTime=c.logs.endTime-c.logs.startTime,c.log("total",c.logs.totalTime)})),c.log=function(){if(c.dev&&console.log&&console.log.apply)console.log.apply(console,arguments);else if(c.dev&&"function"==typeof console.log&&Function.prototype.bind){var a=Function.prototype.bind.call(console.log,console);a.apply(console,arguments)}return arguments[arguments.length-1]},c.render=function(a){a=a||1,c.render.active=!0,c.dispatch.render_start(),setTimeout(function(){for(var b,d,e=0;a>e&&(d=c.render.queue[e]);e++)b=d.generate(),typeof d.callback==typeof Function&&d.callback(b),c.graphs.push(b);c.render.queue.splice(0,e),c.render.queue.length?setTimeout(arguments.callee,0):(c.dispatch.render_end(),c.render.active=!1)},0)},c.render.active=!1,c.render.queue=[],c.addGraph=function(a){typeof arguments[0]==typeof Function&&(a={generate:arguments[0],callback:arguments[1]}),c.render.queue.push(a),c.render.active||c.render()},c.identity=function(a){return a},c.strip=function(a){return a.replace(/(\s|&)/g,"")},d3.time.monthEnd=function(a){return new Date(a.getFullYear(),a.getMonth(),0)},d3.time.monthEnds=b(d3.time.monthEnd,function(b){b.setUTCDate(b.getUTCDate()+1),b.setDate(a(b.getMonth()+1,b.getFullYear()))},function(a){return a.getMonth()}),c.interactiveGuideline=function(){"use strict";function a(l){l.each(function(l){function m(){var c=d3.mouse(this),d=c[0],e=c[1],i=!0,j=!1;if(k&&(d=d3.event.offsetX,e=d3.event.offsetY,"svg"!==d3.event.target.tagName&&(i=!1),d3.event.target.className.baseVal.match("nv-legend")&&(j=!0)),i&&(d-=f.left,e-=f.top),0>d||0>e||d>o||e>p||d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement||j){if(k&&d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement&&d3.event.relatedTarget.className.match(b.nvPointerEventsClass))return;return h.elementMouseout({mouseX:d,mouseY:e}),void a.renderGuideLine(null)}var l=g.invert(d);h.elementMousemove({mouseX:d,mouseY:e,pointXValue:l}),"dblclick"===d3.event.type&&h.elementDblclick({mouseX:d,mouseY:e,pointXValue:l})}var n=d3.select(this),o=d||960,p=e||400,q=n.selectAll("g.nv-wrap.nv-interactiveLineLayer").data([l]),r=q.enter().append("g").attr("class"," nv-wrap nv-interactiveLineLayer");r.append("g").attr("class","nv-interactiveGuideLine"),j&&(j.on("mousemove",m,!0).on("mouseout",m,!0).on("dblclick",m),a.renderGuideLine=function(a){if(i){var b=q.select(".nv-interactiveGuideLine").selectAll("line").data(null!=a?[c.utils.NaNtoZero(a)]:[],String);b.enter().append("line").attr("class","nv-guideline").attr("x1",function(a){return a}).attr("x2",function(a){return a}).attr("y1",p).attr("y2",0),b.exit().remove()}})})}var b=c.models.tooltip(),d=null,e=null,f={left:0,top:0},g=d3.scale.linear(),h=(d3.scale.linear(),d3.dispatch("elementMousemove","elementMouseout","elementDblclick")),i=!0,j=null,k=-1!==navigator.userAgent.indexOf("MSIE");return a.dispatch=h,a.tooltip=b,a.margin=function(b){return arguments.length?(f.top="undefined"!=typeof b.top?b.top:f.top,f.left="undefined"!=typeof b.left?b.left:f.left,a):f},a.width=function(b){return arguments.length?(d=b,a):d},a.height=function(b){return arguments.length?(e=b,a):e},a.xScale=function(b){return arguments.length?(g=b,a):g},a.showGuideLine=function(b){return arguments.length?(i=b,a):i},a.svgContainer=function(b){return arguments.length?(j=b,a):j},a},c.interactiveBisect=function(a,b,c){"use strict";if(!a instanceof Array)return null;"function"!=typeof c&&(c=function(a,b){return a.x});var d=d3.bisector(c).left,e=d3.max([0,d(a,b)-1]),f=c(a[e],e);if("undefined"==typeof f&&(f=e),f===b)return e;var g=d3.min([e+1,a.length-1]),h=c(a[g],g);return"undefined"==typeof h&&(h=g),Math.abs(h-b)>=Math.abs(f-b)?e:g},c.nearestValueIndex=function(a,b,c){"use strict";var d=1/0,e=null;return a.forEach(function(a,f){var g=Math.abs(b-a);d>=g&&c>g&&(d=g,e=f)}),e},function(){"use strict";window.nv.tooltip={},window.nv.models.tooltip=function(){function a(){if(l){var a=d3.select(l);"svg"!==a.node().tagName&&(a=a.select("svg"));var b=a.node()?a.attr("viewBox"):null;if(b){b=b.split(" ");var c=parseInt(a.style("width"))/b[2];n.left=n.left*c,n.top=n.top*c}}}function b(a){var b;b=l?d3.select(l):d3.select("body");var c=b.select(".nvtooltip");return null===c.node()&&(c=b.append("div").attr("class","nvtooltip "+(k?k:"xy-tooltip")).attr("id",p)),c.node().innerHTML=a,c.style("top",0).style("left",0).style("opacity",0),c.selectAll("div, table, td, tr").classed(q,!0),c.classed(q,!0),c.node()}function d(){if(o&&u(f)){a();var e=n.left,k=null!=j?j:n.top,p=b(t(f));if(m=p,l){var q=l.getElementsByTagName("svg")[0],r=(q?q.getBoundingClientRect():l.getBoundingClientRect(),{left:0,top:0});if(q){var s=q.getBoundingClientRect(),v=l.getBoundingClientRect(),w=s.top;if(0>w){var x=l.getBoundingClientRect();w=Math.abs(w)>x.height?0:w}r.top=Math.abs(w-v.top),r.left=Math.abs(s.left-v.left)}e+=l.offsetLeft+r.left-2*l.scrollLeft,k+=l.offsetTop+r.top-2*l.scrollTop}return i&&i>0&&(k=Math.floor(k/i)*i),c.tooltip.calcTooltipPosition([e,k],g,h,p),d}}var e=null,f=null,g="w",h=50,i=25,j=null,k=null,l=null,m=null,n={left:null,top:null},o=!0,p="nvtooltip-"+Math.floor(1e5*Math.random()),q="nv-pointer-events-none",r=function(a,b){return a},s=function(a){return a},t=function(a){if(null!=e)return e;if(null==a)return"";var b=d3.select(document.createElement("table")),c=b.selectAll("thead").data([a]).enter().append("thead");c.append("tr").append("td").attr("colspan",3).append("strong").classed("x-value",!0).html(s(a.value));var d=b.selectAll("tbody").data([a]).enter().append("tbody"),f=d.selectAll("tr").data(function(a){return a.series}).enter().append("tr").classed("highlight",function(a){return a.highlight});f.append("td").classed("legend-color-guide",!0).append("div").style("background-color",function(a){return a.color}),f.append("td").classed("key",!0).html(function(a){return a.key}),f.append("td").classed("value",!0).html(function(a,b){return r(a.value,b)}),f.selectAll("td").each(function(a){if(a.highlight){var b=d3.scale.linear().domain([0,1]).range(["#fff",a.color]),c=.6;d3.select(this).style("border-bottom-color",b(c)).style("border-top-color",b(c))}});var g=b.node().outerHTML;return void 0!==a.footer&&(g+="<div class='footer'>"+a.footer+"</div>"),g},u=function(a){return!!(a&&a.series&&a.series.length>0)};return d.nvPointerEventsClass=q,d.content=function(a){return arguments.length?(e=a,d):e},d.tooltipElem=function(){return m},d.contentGenerator=function(a){return arguments.length?("function"==typeof a&&(t=a),d):t},d.data=function(a){return arguments.length?(f=a,d):f},d.gravity=function(a){return arguments.length?(g=a,d):g},d.distance=function(a){return arguments.length?(h=a,d):h},d.snapDistance=function(a){return arguments.length?(i=a,d):i},d.classes=function(a){return arguments.length?(k=a,d):k},d.chartContainer=function(a){return arguments.length?(l=a,d):l},d.position=function(a){return arguments.length?(n.left="undefined"!=typeof a.left?a.left:n.left,n.top="undefined"!=typeof a.top?a.top:n.top,d):n},d.fixedTop=function(a){return arguments.length?(j=a,d):j},d.enabled=function(a){return arguments.length?(o=a,d):o},d.valueFormatter=function(a){return arguments.length?("function"==typeof a&&(r=a),d):r},d.headerFormatter=function(a){return arguments.length?("function"==typeof a&&(s=a),d):s},d.id=function(){return p},d},c.tooltip.show=function(a,b,d,e,f,g){var h=document.createElement("div");h.className="nvtooltip "+(g?g:"xy-tooltip");var i=f;f&&!f.tagName.match(/g|svg/i)||(i=document.getElementsByTagName("body")[0]),h.style.left=0,h.style.top=0,h.style.opacity=0,h.innerHTML=b,i.appendChild(h),f&&(a[0]=a[0]-f.scrollLeft,a[1]=a[1]-f.scrollTop),c.tooltip.calcTooltipPosition(a,d,e,h)},c.tooltip.findFirstNonSVGParent=function(a){for(;null!==a.tagName.match(/^g|svg$/i);)a=a.parentNode;return a},c.tooltip.findTotalOffsetTop=function(a,b){var c=b;do isNaN(a.offsetTop)||(c+=a.offsetTop);while(a=a.offsetParent);return c},c.tooltip.findTotalOffsetLeft=function(a,b){var c=b;do isNaN(a.offsetLeft)||(c+=a.offsetLeft);while(a=a.offsetParent);return c},c.tooltip.calcTooltipPosition=function(a,b,d,e){var f,g,h=parseInt(e.offsetHeight),i=parseInt(e.offsetWidth),j=c.utils.windowSize().width,k=c.utils.windowSize().height,l=window.pageYOffset,m=window.pageXOffset;k=window.innerWidth>=document.body.scrollWidth?k:k-16,j=window.innerHeight>=document.body.scrollHeight?j:j-16,b=b||"s",d=d||20;var n=function(a){return c.tooltip.findTotalOffsetTop(a,g)},o=function(a){return c.tooltip.findTotalOffsetLeft(a,f)};switch(b){case"e":f=a[0]-i-d,g=a[1]-h/2;var p=o(e),q=n(e);m>p&&(f=a[0]+d>m?a[0]+d:m-p+f),l>q&&(g=l-q+g),q+h>l+k&&(g=l+k-q+g-h);break;case"w":f=a[0]+d,g=a[1]-h/2;var p=o(e),q=n(e);p+i>j&&(f=a[0]-i-d),l>q&&(g=l+5),q+h>l+k&&(g=l+k-q+g-h);break;case"n":f=a[0]-i/2-5,g=a[1]+d;var p=o(e),q=n(e);m>p&&(f=m+5),p+i>j&&(f=f-i/2+5),q+h>l+k&&(g=l+k-q+g-h);break;case"s":f=a[0]-i/2,g=a[1]-h-d;var p=o(e),q=n(e);m>p&&(f=m+5),p+i>j&&(f=f-i/2+5),l>q&&(g=l);break;case"none":f=a[0],g=a[1]-d;var p=o(e),q=n(e)}return e.style.left=f+"px",e.style.top=g+"px",e.style.opacity=1,e.style.position="absolute",e},c.tooltip.cleanup=function(){for(var a=document.getElementsByClassName("nvtooltip"),b=[];a.length;)b.push(a[0]),a[0].style.transitionDelay="0 !important",a[0].style.opacity=0,a[0].className="nvtooltip-pending-removal";setTimeout(function(){for(;b.length;){var a=b.pop();a.parentNode.removeChild(a)}},500)}}(),c.utils.windowSize=function(){var a={width:640,height:480};return document.body&&document.body.offsetWidth&&(a.width=document.body.offsetWidth,a.height=document.body.offsetHeight),"CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth&&(a.width=document.documentElement.offsetWidth,a.height=document.documentElement.offsetHeight),window.innerWidth&&window.innerHeight&&(a.width=window.innerWidth,a.height=window.innerHeight),a},c.utils.windowResize=function(a){if(void 0!==a){var b=window.onresize;window.onresize=function(c){"function"==typeof b&&b(c),a(c)}}},c.utils.getColor=function(a){return arguments.length?"[object Array]"===Object.prototype.toString.call(a)?function(b,c){return b.color||a[c%a.length]}:a:c.utils.defaultColor()},c.utils.defaultColor=function(){var a=d3.scale.category20().range();return function(b,c){return b.color||a[c%a.length]}},c.utils.customTheme=function(a,b,c){b=b||function(a){return a.key},c=c||d3.scale.category20().range();var d=c.length;return function(e,f){var g=b(e);return d||(d=c.length),"undefined"!=typeof a[g]?"function"==typeof a[g]?a[g]():a[g]:c[--d]}},c.utils.pjax=function(a,b){function d(d){d3.html(d,function(d){var e=d3.select(b).node();e.parentNode.replaceChild(d3.select(d).select(b).node(),e),c.utils.pjax(a,b)})}d3.selectAll(a).on("click",function(){history.pushState(this.href,this.textContent,this.href),d(this.href),d3.event.preventDefault()}),d3.select(window).on("popstate",function(){d3.event.state&&d(d3.event.state)})},c.utils.calcApproxTextWidth=function(a){if("function"==typeof a.style&&"function"==typeof a.text){var b=parseInt(a.style("font-size").replace("px","")),c=a.text().length;return c*b*.5}return 0},c.utils.NaNtoZero=function(a){return"number"!=typeof a||isNaN(a)||null===a||a===1/0?0:a},c.utils.optionsFunc=function(a){return a&&d3.map(a).forEach(function(a,b){"function"==typeof this[a]&&this[a](b)}.bind(this)),this},c.models.axis=function(){"use strict";
function a(c){return c.each(function(a){var c=d3.select(this),f=c.selectAll("g.nv-wrap.nv-axis").data([a]),r=f.enter().append("g").attr("class","nvd3 nv-wrap nv-axis"),s=(r.append("g"),f.select("g"));null!==o?b.ticks(o):"top"!=b.orient()&&"bottom"!=b.orient()||b.ticks(Math.abs(g.range()[1]-g.range()[0])/100),s.transition().call(b),q=q||b.scale();var t=b.tickFormat();null==t&&(t=q.tickFormat());var u=s.selectAll("text.nv-axislabel").data([h||null]);switch(u.exit().remove(),b.orient()){case"top":u.enter().append("text").attr("class","nv-axislabel");var v=2==g.range().length?g.range()[1]:g.range()[g.range().length-1]+(g.range()[1]-g.range()[0]);if(u.attr("text-anchor","middle").attr("y",0).attr("x",v/2),i){var w=f.selectAll("g.nv-axisMaxMin").data(g.domain());w.enter().append("g").attr("class","nv-axisMaxMin").append("text"),w.exit().remove(),w.attr("transform",function(a,b){return"translate("+g(a)+",0)"}).select("text").attr("dy","-0.5em").attr("y",-b.tickPadding()).attr("text-anchor","middle").text(function(a,b){var c=t(a);return(""+c).match("NaN")?"":c}),w.transition().attr("transform",function(a,b){return"translate("+g.range()[b]+",0)"})}break;case"bottom":var x=36,y=30,z=s.selectAll("g").select("text");if(k%360){z.each(function(a,b){var c=this.getBBox().width;c>y&&(y=c)});var A=Math.abs(Math.sin(k*Math.PI/180)),x=(A?A*y:y)+30;z.attr("transform",function(a,b,c){return"rotate("+k+" 0,0)"}).style("text-anchor",k%360>0?"start":"end")}u.enter().append("text").attr("class","nv-axislabel");var v=2==g.range().length?g.range()[1]:g.range()[g.range().length-1]+(g.range()[1]-g.range()[0]);if(u.attr("text-anchor","middle").attr("y",x).attr("x",v/2),i){var w=f.selectAll("g.nv-axisMaxMin").data([g.domain()[0],g.domain()[g.domain().length-1]]);w.enter().append("g").attr("class","nv-axisMaxMin").append("text"),w.exit().remove(),w.attr("transform",function(a,b){return"translate("+(g(a)+(n?g.rangeBand()/2:0))+",0)"}).select("text").attr("dy",".71em").attr("y",b.tickPadding()).attr("transform",function(a,b,c){return"rotate("+k+" 0,0)"}).style("text-anchor",k?k%360>0?"start":"end":"middle").text(function(a,b){var c=t(a);return(""+c).match("NaN")?"":c}),w.transition().attr("transform",function(a,b){return"translate("+(g(a)+(n?g.rangeBand()/2:0))+",0)"})}m&&z.attr("transform",function(a,b){return"translate(0,"+(b%2==0?"0":"12")+")"});break;case"right":if(u.enter().append("text").attr("class","nv-axislabel"),u.style("text-anchor",l?"middle":"begin").attr("transform",l?"rotate(90)":"").attr("y",l?-Math.max(d.right,e)+12:-10).attr("x",l?g.range()[0]/2:b.tickPadding()),i){var w=f.selectAll("g.nv-axisMaxMin").data(g.domain());w.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),w.exit().remove(),w.attr("transform",function(a,b){return"translate(0,"+g(a)+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",b.tickPadding()).style("text-anchor","start").text(function(a,b){var c=t(a);return(""+c).match("NaN")?"":c}),w.transition().attr("transform",function(a,b){return"translate(0,"+g.range()[b]+")"}).select("text").style("opacity",1)}break;case"left":if(u.enter().append("text").attr("class","nv-axislabel"),u.style("text-anchor",l?"middle":"end").attr("transform",l?"rotate(-90)":"").attr("y",l?-Math.max(d.left,e)+p:-10).attr("x",l?-g.range()[0]/2:-b.tickPadding()),i){var w=f.selectAll("g.nv-axisMaxMin").data(g.domain());w.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),w.exit().remove(),w.attr("transform",function(a,b){return"translate(0,"+q(a)+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-b.tickPadding()).attr("text-anchor","end").text(function(a,b){var c=t(a);return(""+c).match("NaN")?"":c}),w.transition().attr("transform",function(a,b){return"translate(0,"+g.range()[b]+")"}).select("text").style("opacity",1)}}if(u.text(function(a){return a}),!i||"left"!==b.orient()&&"right"!==b.orient()||(s.selectAll("g").each(function(a,b){d3.select(this).select("text").attr("opacity",1),(g(a)<g.range()[1]+10||g(a)>g.range()[0]-10)&&((a>1e-10||-1e-10>a)&&d3.select(this).attr("opacity",0),d3.select(this).select("text").attr("opacity",0))}),g.domain()[0]==g.domain()[1]&&0==g.domain()[0]&&f.selectAll("g.nv-axisMaxMin").style("opacity",function(a,b){return b?0:1})),i&&("top"===b.orient()||"bottom"===b.orient())){var B=[];f.selectAll("g.nv-axisMaxMin").each(function(a,b){try{b?B.push(g(a)-this.getBBox().width-4):B.push(g(a)+this.getBBox().width+4)}catch(c){b?B.push(g(a)-4):B.push(g(a)+4)}}),s.selectAll("g").each(function(a,b){(g(a)<B[0]||g(a)>B[1])&&(a>1e-10||-1e-10>a?d3.select(this).remove():d3.select(this).select("text").remove())})}j&&s.selectAll(".tick").filter(function(a){return!parseFloat(Math.round(1e5*a.__data__)/1e6)&&void 0!==a.__data__}).classed("zero",!0),q=g.copy()}),a}var b=d3.svg.axis(),d={top:0,right:0,bottom:0,left:0},e=75,f=60,g=d3.scale.linear(),h=null,i=!0,j=!0,k=0,l=!0,m=!1,n=!1,o=null,p=12;b.scale(g).orient("bottom").tickFormat(function(a){return a});var q;return a.axis=b,d3.rebind(a,b,"orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat"),d3.rebind(a,g,"domain","range","rangeBand","rangeBands"),a.options=c.utils.optionsFunc.bind(a),a.margin=function(b){return arguments.length?(d.top="undefined"!=typeof b.top?b.top:d.top,d.right="undefined"!=typeof b.right?b.right:d.right,d.bottom="undefined"!=typeof b.bottom?b.bottom:d.bottom,d.left="undefined"!=typeof b.left?b.left:d.left,a):d},a.width=function(b){return arguments.length?(e=b,a):e},a.ticks=function(b){return arguments.length?(o=b,a):o},a.height=function(b){return arguments.length?(f=b,a):f},a.axisLabel=function(b){return arguments.length?(h=b,a):h},a.showMaxMin=function(b){return arguments.length?(i=b,a):i},a.highlightZero=function(b){return arguments.length?(j=b,a):j},a.scale=function(c){return arguments.length?(g=c,b.scale(g),n="function"==typeof g.rangeBands,d3.rebind(a,g,"domain","range","rangeBand","rangeBands"),a):g},a.rotateYLabel=function(b){return arguments.length?(l=b,a):l},a.rotateLabels=function(b){return arguments.length?(k=b,a):k},a.staggerLabels=function(b){return arguments.length?(m=b,a):m},a.axisLabelDistance=function(b){return arguments.length?(p=b,a):p},a},c.models.historicalBar=function(){"use strict";function a(v){return v.each(function(a){var v=h-g.left-g.right,w=i-g.top-g.bottom,x=d3.select(this);k.domain(b||d3.extent(a[0].values.map(m).concat(o))),q?k.range(e||[.5*v/a[0].values.length,v*(a[0].values.length-.5)/a[0].values.length]):k.range(e||[0,v]),l.domain(d||d3.extent(a[0].values.map(n).concat(p))).range(f||[w,0]),k.domain()[0]===k.domain()[1]&&(k.domain()[0]?k.domain([k.domain()[0]-.01*k.domain()[0],k.domain()[1]+.01*k.domain()[1]]):k.domain([-1,1])),l.domain()[0]===l.domain()[1]&&(l.domain()[0]?l.domain([l.domain()[0]+.01*l.domain()[0],l.domain()[1]-.01*l.domain()[1]]):l.domain([-1,1]));var y=x.selectAll("g.nv-wrap.nv-historicalBar-"+j).data([a[0].values]),z=y.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBar-"+j),A=z.append("defs"),B=z.append("g"),C=y.select("g");B.append("g").attr("class","nv-bars"),y.attr("transform","translate("+g.left+","+g.top+")"),x.on("click",function(a,b){t.chartClick({data:a,index:b,pos:d3.event,id:j})}),A.append("clipPath").attr("id","nv-chart-clip-path-"+j).append("rect"),y.select("#nv-chart-clip-path-"+j+" rect").attr("width",v).attr("height",w),C.attr("clip-path",r?"url(#nv-chart-clip-path-"+j+")":"");var D=y.select(".nv-bars").selectAll(".nv-bar").data(function(a){return a},function(a,b){return m(a,b)});D.exit().remove();D.enter().append("rect").attr("x",0).attr("y",function(a,b){return c.utils.NaNtoZero(l(Math.max(0,n(a,b))))}).attr("height",function(a,b){return c.utils.NaNtoZero(Math.abs(l(n(a,b))-l(0)))}).attr("transform",function(b,c){return"translate("+(k(m(b,c))-v/a[0].values.length*.45)+",0)"}).on("mouseover",function(b,c){u&&(d3.select(this).classed("hover",!0),t.elementMouseover({point:b,series:a[0],pos:[k(m(b,c)),l(n(b,c))],pointIndex:c,seriesIndex:0,e:d3.event}))}).on("mouseout",function(b,c){u&&(d3.select(this).classed("hover",!1),t.elementMouseout({point:b,series:a[0],pointIndex:c,seriesIndex:0,e:d3.event}))}).on("click",function(a,b){u&&(t.elementClick({value:n(a,b),data:a,index:b,pos:[k(m(a,b)),l(n(a,b))],e:d3.event,id:j}),d3.event.stopPropagation())}).on("dblclick",function(a,b){u&&(t.elementDblClick({value:n(a,b),data:a,index:b,pos:[k(m(a,b)),l(n(a,b))],e:d3.event,id:j}),d3.event.stopPropagation())});D.attr("fill",function(a,b){return s(a,b)}).attr("class",function(a,b,c){return(n(a,b)<0?"nv-bar negative":"nv-bar positive")+" nv-bar-"+c+"-"+b}).transition().attr("transform",function(b,c){return"translate("+(k(m(b,c))-v/a[0].values.length*.45)+",0)"}).attr("width",v/a[0].values.length*.9),D.transition().attr("y",function(a,b){var d=n(a,b)<0?l(0):l(0)-l(n(a,b))<1?l(0)-1:l(n(a,b));return c.utils.NaNtoZero(d)}).attr("height",function(a,b){return c.utils.NaNtoZero(Math.max(Math.abs(l(n(a,b))-l(0)),1))})}),a}var b,d,e,f,g={top:0,right:0,bottom:0,left:0},h=960,i=500,j=Math.floor(1e4*Math.random()),k=d3.scale.linear(),l=d3.scale.linear(),m=function(a){return a.x},n=function(a){return a.y},o=[],p=[0],q=!1,r=!0,s=c.utils.defaultColor(),t=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),u=!0;return a.highlightPoint=function(a,b){d3.select(".nv-historicalBar-"+j).select(".nv-bars .nv-bar-0-"+a).classed("hover",b)},a.clearHighlights=function(){d3.select(".nv-historicalBar-"+j).select(".nv-bars .nv-bar.hover").classed("hover",!1)},a.dispatch=t,a.options=c.utils.optionsFunc.bind(a),a.x=function(b){return arguments.length?(m=b,a):m},a.y=function(b){return arguments.length?(n=b,a):n},a.margin=function(b){return arguments.length?(g.top="undefined"!=typeof b.top?b.top:g.top,g.right="undefined"!=typeof b.right?b.right:g.right,g.bottom="undefined"!=typeof b.bottom?b.bottom:g.bottom,g.left="undefined"!=typeof b.left?b.left:g.left,a):g},a.width=function(b){return arguments.length?(h=b,a):h},a.height=function(b){return arguments.length?(i=b,a):i},a.xScale=function(b){return arguments.length?(k=b,a):k},a.yScale=function(b){return arguments.length?(l=b,a):l},a.xDomain=function(c){return arguments.length?(b=c,a):b},a.yDomain=function(b){return arguments.length?(d=b,a):d},a.xRange=function(b){return arguments.length?(e=b,a):e},a.yRange=function(b){return arguments.length?(f=b,a):f},a.forceX=function(b){return arguments.length?(o=b,a):o},a.forceY=function(b){return arguments.length?(p=b,a):p},a.padData=function(b){return arguments.length?(q=b,a):q},a.clipEdge=function(b){return arguments.length?(r=b,a):r},a.color=function(b){return arguments.length?(s=c.utils.getColor(b),a):s},a.id=function(b){return arguments.length?(j=b,a):j},a.interactive=function(b){return arguments.length?(u=!1,a):u},a},c.models.bullet=function(){"use strict";function a(c){return c.each(function(a,c){var d=m-b.left-b.right,o=n-b.top-b.bottom,r=d3.select(this),s=f.call(this,a,c).slice().sort(d3.descending),t=g.call(this,a,c).slice().sort(d3.descending),u=h.call(this,a,c).slice().sort(d3.descending),v=i.call(this,a,c).slice(),w=j.call(this,a,c).slice(),x=k.call(this,a,c).slice(),y=d3.scale.linear().domain(d3.extent(d3.merge([l,s]))).range(e?[d,0]:[0,d]);this.__chart__||d3.scale.linear().domain([0,1/0]).range(y.range());this.__chart__=y;var z=d3.min(s),A=d3.max(s),B=s[1],C=r.selectAll("g.nv-wrap.nv-bullet").data([a]),D=C.enter().append("g").attr("class","nvd3 nv-wrap nv-bullet"),E=D.append("g"),F=C.select("g");E.append("rect").attr("class","nv-range nv-rangeMax"),E.append("rect").attr("class","nv-range nv-rangeAvg"),E.append("rect").attr("class","nv-range nv-rangeMin"),E.append("rect").attr("class","nv-measure"),E.append("path").attr("class","nv-markerTriangle"),C.attr("transform","translate("+b.left+","+b.top+")");var G=function(a){return Math.abs(y(a)-y(0))},H=function(a){return y(0>a?a:0)};F.select("rect.nv-rangeMax").attr("height",o).attr("width",G(A>0?A:z)).attr("x",H(A>0?A:z)).datum(A>0?A:z),F.select("rect.nv-rangeAvg").attr("height",o).attr("width",G(B)).attr("x",H(B)).datum(B),F.select("rect.nv-rangeMin").attr("height",o).attr("width",G(A)).attr("x",H(A)).attr("width",G(A>0?z:A)).attr("x",H(A>0?z:A)).datum(A>0?z:A),F.select("rect.nv-measure").style("fill",p).attr("height",o/3).attr("y",o/3).attr("width",0>u?y(0)-y(u[0]):y(u[0])-y(0)).attr("x",H(u)).on("mouseover",function(){q.elementMouseover({value:u[0],label:x[0]||"Current",pos:[y(u[0]),o/2]})}).on("mouseout",function(){q.elementMouseout({value:u[0],label:x[0]||"Current"})});var I=o/6;t[0]?F.selectAll("path.nv-markerTriangle").attr("transform",function(a){return"translate("+y(t[0])+","+o/2+")"}).attr("d","M0,"+I+"L"+I+","+-I+" "+-I+","+-I+"Z").on("mouseover",function(){q.elementMouseover({value:t[0],label:w[0]||"Previous",pos:[y(t[0]),o/2]})}).on("mouseout",function(){q.elementMouseout({value:t[0],label:w[0]||"Previous"})}):F.selectAll("path.nv-markerTriangle").remove(),C.selectAll(".nv-range").on("mouseover",function(a,b){var c=v[b]||(b?1==b?"Mean":"Minimum":"Maximum");q.elementMouseover({value:a,label:c,pos:[y(a),o/2]})}).on("mouseout",function(a,b){var c=v[b]||(b?1==b?"Mean":"Minimum":"Maximum");q.elementMouseout({value:a,label:c})})}),a}var b={top:0,right:0,bottom:0,left:0},d="left",e=!1,f=function(a){return a.ranges},g=function(a){return a.markers},h=function(a){return a.measures},i=function(a){return a.rangeLabels?a.rangeLabels:[]},j=function(a){return a.markerLabels?a.markerLabels:[]},k=function(a){return a.measureLabels?a.measureLabels:[]},l=[0],m=380,n=30,o=null,p=c.utils.getColor(["#1f77b4"]),q=d3.dispatch("elementMouseover","elementMouseout");return a.dispatch=q,a.options=c.utils.optionsFunc.bind(a),a.orient=function(b){return arguments.length?(d=b,e="right"==d||"bottom"==d,a):d},a.ranges=function(b){return arguments.length?(f=b,a):f},a.markers=function(b){return arguments.length?(g=b,a):g},a.measures=function(b){return arguments.length?(h=b,a):h},a.forceX=function(b){return arguments.length?(l=b,a):l},a.width=function(b){return arguments.length?(m=b,a):m},a.height=function(b){return arguments.length?(n=b,a):n},a.margin=function(c){return arguments.length?(b.top="undefined"!=typeof c.top?c.top:b.top,b.right="undefined"!=typeof c.right?c.right:b.right,b.bottom="undefined"!=typeof c.bottom?c.bottom:b.bottom,b.left="undefined"!=typeof c.left?c.left:b.left,a):b},a.tickFormat=function(b){return arguments.length?(o=b,a):o},a.color=function(b){return arguments.length?(p=c.utils.getColor(b),a):p},a},c.models.bulletChart=function(){"use strict";function a(c){return c.each(function(d,n){var r=d3.select(this),s=(j||parseInt(r.style("width"))||960)-f.left-f.right,t=k-f.top-f.bottom,u=this;if(a.update=function(){a(c)},a.container=this,!d||!g.call(this,d,n)){var v=r.selectAll(".nv-noData").data([o]);return v.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),v.attr("x",f.left+s/2).attr("y",18+f.top+t/2).text(function(a){return a}),a}r.selectAll(".nv-noData").remove();var w=g.call(this,d,n).slice().sort(d3.descending),x=h.call(this,d,n).slice().sort(d3.descending),y=i.call(this,d,n).slice().sort(d3.descending),z=r.selectAll("g.nv-wrap.nv-bulletChart").data([d]),A=z.enter().append("g").attr("class","nvd3 nv-wrap nv-bulletChart"),B=A.append("g"),C=z.select("g");B.append("g").attr("class","nv-bulletWrap"),B.append("g").attr("class","nv-titles"),z.attr("transform","translate("+f.left+","+f.top+")");var D=d3.scale.linear().domain([0,Math.max(w[0],x[0],y[0])]).range(e?[s,0]:[0,s]),E=this.__chart__||d3.scale.linear().domain([0,1/0]).range(D.range());this.__chart__=D;var F=B.select(".nv-titles").append("g").attr("text-anchor","end").attr("transform","translate(-6,"+(k-f.top-f.bottom)/2+")");F.append("text").attr("class","nv-title").text(function(a){return a.title}),F.append("text").attr("class","nv-subtitle").attr("dy","1em").text(function(a){return a.subtitle}),b.width(s).height(t);var G=C.select(".nv-bulletWrap");d3.transition(G).call(b);var H=l||D.tickFormat(s/100),I=C.selectAll("g.nv-tick").data(D.ticks(s/50),function(a){return this.textContent||H(a)}),J=I.enter().append("g").attr("class","nv-tick").attr("transform",function(a){return"translate("+E(a)+",0)"}).style("opacity",1e-6);J.append("line").attr("y1",t).attr("y2",7*t/6),J.append("text").attr("text-anchor","middle").attr("dy","1em").attr("y",7*t/6).text(H);var K=d3.transition(I).attr("transform",function(a){return"translate("+D(a)+",0)"}).style("opacity",1);K.select("line").attr("y1",t).attr("y2",7*t/6),K.select("text").attr("y",7*t/6),d3.transition(I.exit()).attr("transform",function(a){return"translate("+D(a)+",0)"}).style("opacity",1e-6).remove(),p.on("tooltipShow",function(a){a.key=d.title,m&&q(a,u.parentNode)})}),d3.timer.flush(),a}var b=c.models.bullet(),d="left",e=!1,f={top:5,right:40,bottom:20,left:120},g=function(a){return a.ranges},h=function(a){return a.markers},i=function(a){return a.measures},j=null,k=55,l=null,m=!0,n=function(a,b,c,d,e){return"<h3>"+b+"</h3><p>"+c+"</p>"},o="No Data Available.",p=d3.dispatch("tooltipShow","tooltipHide"),q=function(b,d){var e=b.pos[0]+(d.offsetLeft||0)+f.left,g=b.pos[1]+(d.offsetTop||0)+f.top,h=n(b.key,b.label,b.value,b,a);c.tooltip.show([e,g],h,b.value<0?"e":"w",null,d)};return b.dispatch.on("elementMouseover.tooltip",function(a){p.tooltipShow(a)}),b.dispatch.on("elementMouseout.tooltip",function(a){p.tooltipHide(a)}),p.on("tooltipHide",function(){m&&c.tooltip.cleanup()}),a.dispatch=p,a.bullet=b,d3.rebind(a,b,"color"),a.options=c.utils.optionsFunc.bind(a),a.orient=function(b){return arguments.length?(d=b,e="right"==d||"bottom"==d,a):d},a.ranges=function(b){return arguments.length?(g=b,a):g},a.markers=function(b){return arguments.length?(h=b,a):h},a.measures=function(b){return arguments.length?(i=b,a):i},a.width=function(b){return arguments.length?(j=b,a):j},a.height=function(b){return arguments.length?(k=b,a):k},a.margin=function(b){return arguments.length?(f.top="undefined"!=typeof b.top?b.top:f.top,f.right="undefined"!=typeof b.right?b.right:f.right,f.bottom="undefined"!=typeof b.bottom?b.bottom:f.bottom,f.left="undefined"!=typeof b.left?b.left:f.left,a):f},a.tickFormat=function(b){return arguments.length?(l=b,a):l},a.tooltips=function(b){return arguments.length?(m=b,a):m},a.tooltipContent=function(b){return arguments.length?(n=b,a):n},a.noData=function(b){return arguments.length?(o=b,a):o},a},c.models.cumulativeLineChart=function(){"use strict";function a(x){return x.each(function(x){function F(b,c){d3.select(a.container).style("cursor","ew-resize")}function J(a,b){H.x=d3.event.x,H.i=Math.round(G.invert(H.x)),L()}function K(b,c){d3.select(a.container).style("cursor","auto"),z.index=H.i,D.stateChange(z)}function L(){da.data([H]);var b=a.transitionDuration();a.transitionDuration(0),a.update(),a.transitionDuration(b)}var M=d3.select(this).classed("nv-chart-"+y,!0),N=this,O=(n||parseInt(M.style("width"))||960)-l.left-l.right,P=(o||parseInt(M.style("height"))||400)-l.top-l.bottom;if(a.update=function(){M.transition().duration(E).call(a)},a.container=this,z.disabled=x.map(function(a){return!!a.disabled}),!A){var Q;A={};for(Q in z)z[Q]instanceof Array?A[Q]=z[Q].slice(0):A[Q]=z[Q]}var R=d3.behavior.drag().on("dragstart",F).on("drag",J).on("dragend",K);if(!(x&&x.length&&x.filter(function(a){return a.values.length}).length)){var S=M.selectAll(".nv-noData").data([B]);return S.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),S.attr("x",l.left+O/2).attr("y",l.top+P/2).text(function(a){return a}),a}if(M.selectAll(".nv-noData").remove(),d=f.xScale(),e=f.yScale(),w)f.yDomain(null);else{var T=x.filter(function(a){return!a.disabled}).map(function(a,b){var c=d3.extent(a.values,f.y());return c[0]<-.95&&(c[0]=-.95),[(c[0]-c[1])/(1+c[1]),(c[1]-c[0])/(1+c[0])]}),U=[d3.min(T,function(a){return a[0]}),d3.max(T,function(a){return a[1]})];f.yDomain(U)}G.domain([0,x[0].values.length-1]).range([0,O]).clamp(!0);var x=b(H.i,x),V=v?"none":"all",W=M.selectAll("g.nv-wrap.nv-cumulativeLine").data([x]),X=W.enter().append("g").attr("class","nvd3 nv-wrap nv-cumulativeLine").append("g"),Y=W.select("g");if(X.append("g").attr("class","nv-interactive"),X.append("g").attr("class","nv-x nv-axis").style("pointer-events","none"),X.append("g").attr("class","nv-y nv-axis"),X.append("g").attr("class","nv-background"),X.append("g").attr("class","nv-linesWrap").style("pointer-events",V),X.append("g").attr("class","nv-avgLinesWrap").style("pointer-events","none"),X.append("g").attr("class","nv-legendWrap"),X.append("g").attr("class","nv-controlsWrap"),p&&(i.width(O),Y.select(".nv-legendWrap").datum(x).call(i),l.top!=i.height()&&(l.top=i.height(),P=(o||parseInt(M.style("height"))||400)-l.top-l.bottom),Y.select(".nv-legendWrap").attr("transform","translate(0,"+-l.top+")")),u){var Z=[{key:"Re-scale y-axis",disabled:!w}];j.width(140).color(["#444","#444","#444"]).rightAlign(!1).margin({top:5,right:0,bottom:5,left:20}),Y.select(".nv-controlsWrap").datum(Z).attr("transform","translate(0,"+-l.top+")").call(j)}W.attr("transform","translate("+l.left+","+l.top+")"),s&&Y.select(".nv-y.nv-axis").attr("transform","translate("+O+",0)");var $=x.filter(function(a){return a.tempDisabled});W.select(".tempDisabled").remove(),$.length&&W.append("text").attr("class","tempDisabled").attr("x",O/2).attr("y","-.71em").style("text-anchor","end").text($.map(function(a){return a.key}).join(", ")+" values cannot be calculated for this time period."),v&&(k.width(O).height(P).margin({left:l.left,top:l.top}).svgContainer(M).xScale(d),W.select(".nv-interactive").call(k)),X.select(".nv-background").append("rect"),Y.select(".nv-background rect").attr("width",O).attr("height",P),f.y(function(a){return a.display.y}).width(O).height(P).color(x.map(function(a,b){return a.color||m(a,b)}).filter(function(a,b){return!x[b].disabled&&!x[b].tempDisabled}));var _=Y.select(".nv-linesWrap").datum(x.filter(function(a){return!a.disabled&&!a.tempDisabled}));_.call(f),x.forEach(function(a,b){a.seriesIndex=b});var aa=x.filter(function(a){return!a.disabled&&!!C(a)}),ba=Y.select(".nv-avgLinesWrap").selectAll("line").data(aa,function(a){return a.key}),ca=function(a){var b=e(C(a));return 0>b?0:b>P?P:b};ba.enter().append("line").style("stroke-width",2).style("stroke-dasharray","10,10").style("stroke",function(a,b){return f.color()(a,a.seriesIndex)}).attr("x1",0).attr("x2",O).attr("y1",ca).attr("y2",ca),ba.style("stroke-opacity",function(a){var b=e(C(a));return 0>b||b>P?0:1}).attr("x1",0).attr("x2",O).attr("y1",ca).attr("y2",ca),ba.exit().remove();var da=_.selectAll(".nv-indexLine").data([H]);da.enter().append("rect").attr("class","nv-indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",.5).style("pointer-events","all").call(R),da.attr("transform",function(a){return"translate("+G(a.i)+",0)"}).attr("height",P),q&&(g.scale(d).ticks(Math.min(x[0].values.length,O/70)).tickSize(-P,0),Y.select(".nv-x.nv-axis").attr("transform","translate(0,"+e.range()[0]+")"),d3.transition(Y.select(".nv-x.nv-axis")).call(g)),r&&(h.scale(e).ticks(P/36).tickSize(-O,0),d3.transition(Y.select(".nv-y.nv-axis")).call(h)),Y.select(".nv-background rect").on("click",function(){H.x=d3.mouse(this)[0],H.i=Math.round(G.invert(H.x)),z.index=H.i,D.stateChange(z),L()}),f.dispatch.on("elementClick",function(a){H.i=a.pointIndex,H.x=G(H.i),z.index=H.i,D.stateChange(z),L()}),j.dispatch.on("legendClick",function(b,c){b.disabled=!b.disabled,w=!b.disabled,z.rescaleY=w,D.stateChange(z),a.update()}),i.dispatch.on("stateChange",function(b){z.disabled=b.disabled,D.stateChange(z),a.update()}),k.dispatch.on("elementMousemove",function(b){f.clearHighlights();var d,e,i,j=[];if(x.filter(function(a,b){return a.seriesIndex=b,!a.disabled}).forEach(function(g,h){e=c.interactiveBisect(g.values,b.pointXValue,a.x()),f.highlightPoint(h,e,!0);var k=g.values[e];"undefined"!=typeof k&&("undefined"==typeof d&&(d=k),"undefined"==typeof i&&(i=a.xScale()(a.x()(k,e))),j.push({key:g.key,value:a.y()(k,e),color:m(g,g.seriesIndex)}))}),j.length>2){var n=a.yScale().invert(b.mouseY),o=Math.abs(a.yScale().domain()[0]-a.yScale().domain()[1]),p=.03*o,q=c.nearestValueIndex(j.map(function(a){return a.value}),n,p);null!==q&&(j[q].highlight=!0)}var r=g.tickFormat()(a.x()(d,e),e);k.tooltip.position({left:i+l.left,top:b.mouseY+l.top}).chartContainer(N.parentNode).enabled(t).valueFormatter(function(a,b){return h.tickFormat()(a)}).data({value:r,series:j})(),k.renderGuideLine(i)}),k.dispatch.on("elementMouseout",function(a){D.tooltipHide(),f.clearHighlights()}),D.on("tooltipShow",function(a){t&&I(a,N.parentNode)}),D.on("changeState",function(b){"undefined"!=typeof b.disabled&&(x.forEach(function(a,c){a.disabled=b.disabled[c]}),z.disabled=b.disabled),"undefined"!=typeof b.index&&(H.i=b.index,H.x=G(H.i),z.index=b.index,da.data([H])),"undefined"!=typeof b.rescaleY&&(w=b.rescaleY),a.update()})}),a}function b(a,b){return b.map(function(b,c){if(!b.values)return b;var d=f.y()(b.values[a],a);return-.95>d&&!F?(b.tempDisabled=!0,b):(b.tempDisabled=!1,b.values=b.values.map(function(a,b){return a.display={y:(f.y()(a,b)-d)/(1+d)},a}),b)})}var d,e,f=c.models.line(),g=c.models.axis(),h=c.models.axis(),i=c.models.legend(),j=c.models.legend(),k=c.interactiveGuideline(),l={top:30,right:30,bottom:50,left:60},m=c.utils.defaultColor(),n=null,o=null,p=!0,q=!0,r=!0,s=!1,t=!0,u=!0,v=!1,w=!0,x=function(a,b,c,d,e){return"<h3>"+a+"</h3><p>"+c+" at "+b+"</p>"},y=f.id(),z={index:0,rescaleY:w},A=null,B="No Data Available.",C=function(a){return a.average},D=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),E=250,F=!1;g.orient("bottom").tickPadding(7),h.orient(s?"right":"left"),j.updateState(!1);var G=d3.scale.linear(),H={i:0,x:0},I=function(b,d){var e=b.pos[0]+(d.offsetLeft||0),i=b.pos[1]+(d.offsetTop||0),j=g.tickFormat()(f.x()(b.point,b.pointIndex)),k=h.tickFormat()(f.y()(b.point,b.pointIndex)),l=x(b.series.key,j,k,b,a);c.tooltip.show([e,i],l,null,null,d)};return f.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+l.left,a.pos[1]+l.top],D.tooltipShow(a)}),f.dispatch.on("elementMouseout.tooltip",function(a){D.tooltipHide(a)}),D.on("tooltipHide",function(){t&&c.tooltip.cleanup()}),a.dispatch=D,a.lines=f,a.legend=i,a.xAxis=g,a.yAxis=h,a.interactiveLayer=k,d3.rebind(a,f,"defined","isArea","x","y","xScale","yScale","size","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","useVoronoi","id"),a.options=c.utils.optionsFunc.bind(a),a.margin=function(b){return arguments.length?(l.top="undefined"!=typeof b.top?b.top:l.top,l.right="undefined"!=typeof b.right?b.right:l.right,l.bottom="undefined"!=typeof b.bottom?b.bottom:l.bottom,l.left="undefined"!=typeof b.left?b.left:l.left,a):l},a.width=function(b){return arguments.length?(n=b,a):n},a.height=function(b){return arguments.length?(o=b,a):o},a.color=function(b){return arguments.length?(m=c.utils.getColor(b),i.color(m),a):m},a.rescaleY=function(b){return arguments.length?(w=b,a):w},a.showControls=function(b){return arguments.length?(u=b,a):u},a.useInteractiveGuideline=function(b){return arguments.length?(v=b,b===!0&&(a.interactive(!1),a.useVoronoi(!1)),a):v},a.showLegend=function(b){return arguments.length?(p=b,a):p},a.showXAxis=function(b){return arguments.length?(q=b,a):q},a.showYAxis=function(b){return arguments.length?(r=b,a):r},a.rightAlignYAxis=function(b){return arguments.length?(s=b,h.orient(b?"right":"left"),a):s},a.tooltips=function(b){return arguments.length?(t=b,a):t},a.tooltipContent=function(b){return arguments.length?(x=b,a):x},a.state=function(b){return arguments.length?(z=b,a):z},a.defaultState=function(b){return arguments.length?(A=b,a):A},a.noData=function(b){return arguments.length?(B=b,a):B},a.average=function(b){return arguments.length?(C=b,a):C},a.transitionDuration=function(b){return arguments.length?(E=b,a):E},a.noErrorCheck=function(b){return arguments.length?(F=b,a):F},a},c.models.discreteBar=function(){"use strict";function a(c){return c.each(function(a){var c=j-i.left-i.right,l=k-i.top-i.bottom,w=d3.select(this);a.forEach(function(a,b){a.values.forEach(function(a){a.series=b})});var x=b&&d?[]:a.map(function(a){return a.values.map(function(a,b){return{x:o(a,b),y:p(a,b),y0:a.y0}})});m.domain(b||d3.merge(x).map(function(a){return a.x})).rangeBands(e||[0,c],.1),n.domain(d||d3.extent(d3.merge(x).map(function(a){return a.y}).concat(q))),s?n.range(f||[l-(n.domain()[0]<0?12:0),n.domain()[1]>0?12:0]):n.range(f||[l,0]),g=g||m,h=h||n.copy().range([n(0),n(0)]);var y=w.selectAll("g.nv-wrap.nv-discretebar").data([a]),z=y.enter().append("g").attr("class","nvd3 nv-wrap nv-discretebar"),A=z.append("g");y.select("g");A.append("g").attr("class","nv-groups"),y.attr("transform","translate("+i.left+","+i.top+")");var B=y.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});B.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),B.exit().transition().style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),B.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover}),B.transition().style("stroke-opacity",1).style("fill-opacity",.75);var C=B.selectAll("g.nv-bar").data(function(a){return a.values});C.exit().remove();var D=C.enter().append("g").attr("transform",function(a,b,c){return"translate("+(m(o(a,b))+.05*m.rangeBand())+", "+n(0)+")"}).on("mouseover",function(b,c){d3.select(this).classed("hover",!0),u.elementMouseover({value:p(b,c),point:b,series:a[b.series],pos:[m(o(b,c))+m.rangeBand()*(b.series+.5)/a.length,n(p(b,c))],pointIndex:c,seriesIndex:b.series,e:d3.event})}).on("mouseout",function(b,c){d3.select(this).classed("hover",!1),u.elementMouseout({value:p(b,c),point:b,series:a[b.series],pointIndex:c,seriesIndex:b.series,e:d3.event})}).on("click",function(b,c){u.elementClick({value:p(b,c),point:b,series:a[b.series],pos:[m(o(b,c))+m.rangeBand()*(b.series+.5)/a.length,n(p(b,c))],pointIndex:c,seriesIndex:b.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(b,c){u.elementDblClick({value:p(b,c),point:b,series:a[b.series],pos:[m(o(b,c))+m.rangeBand()*(b.series+.5)/a.length,n(p(b,c))],pointIndex:c,seriesIndex:b.series,e:d3.event}),d3.event.stopPropagation()});D.append("rect").attr("height",0).attr("width",.9*m.rangeBand()/a.length),s?(D.append("text").attr("text-anchor","middle"),C.select("text").text(function(a,b){return t(p(a,b))}).transition().attr("x",.9*m.rangeBand()/2).attr("y",function(a,b){return p(a,b)<0?n(p(a,b))-n(0)+12:-4})):C.selectAll("text").remove(),C.attr("class",function(a,b){return p(a,b)<0?"nv-bar negative":"nv-bar positive"}).style("fill",function(a,b){return a.color||r(a,b)}).style("stroke",function(a,b){return a.color||r(a,b)}).select("rect").attr("class",v).transition().attr("width",.9*m.rangeBand()/a.length),C.transition().attr("transform",function(a,b){var c=m(o(a,b))+.05*m.rangeBand(),d=p(a,b)<0?n(0):n(0)-n(p(a,b))<1?n(0)-1:n(p(a,b));return"translate("+c+", "+d+")"}).select("rect").attr("height",function(a,b){return Math.max(Math.abs(n(p(a,b))-n(d&&d[0]||0))||1)}),g=m.copy(),h=n.copy()}),a}var b,d,e,f,g,h,i={top:0,right:0,bottom:0,left:0},j=960,k=500,l=Math.floor(1e4*Math.random()),m=d3.scale.ordinal(),n=d3.scale.linear(),o=function(a){return a.x},p=function(a){return a.y},q=[0],r=c.utils.defaultColor(),s=!1,t=d3.format(",.2f"),u=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),v="discreteBar";return a.dispatch=u,a.options=c.utils.optionsFunc.bind(a),a.x=function(b){return arguments.length?(o=b,a):o},a.y=function(b){return arguments.length?(p=b,a):p},a.margin=function(b){return arguments.length?(i.top="undefined"!=typeof b.top?b.top:i.top,i.right="undefined"!=typeof b.right?b.right:i.right,i.bottom="undefined"!=typeof b.bottom?b.bottom:i.bottom,i.left="undefined"!=typeof b.left?b.left:i.left,
a):i},a.width=function(b){return arguments.length?(j=b,a):j},a.height=function(b){return arguments.length?(k=b,a):k},a.xScale=function(b){return arguments.length?(m=b,a):m},a.yScale=function(b){return arguments.length?(n=b,a):n},a.xDomain=function(c){return arguments.length?(b=c,a):b},a.yDomain=function(b){return arguments.length?(d=b,a):d},a.xRange=function(b){return arguments.length?(e=b,a):e},a.yRange=function(b){return arguments.length?(f=b,a):f},a.forceY=function(b){return arguments.length?(q=b,a):q},a.color=function(b){return arguments.length?(r=c.utils.getColor(b),a):r},a.id=function(b){return arguments.length?(l=b,a):l},a.showValues=function(b){return arguments.length?(s=b,a):s},a.valueFormat=function(b){return arguments.length?(t=b,a):t},a.rectClass=function(b){return arguments.length?(v=b,a):v},a},c.models.discreteBarChart=function(){"use strict";function a(c){return c.each(function(c){var k=d3.select(this),q=this,v=(i||parseInt(k.style("width"))||960)-h.left-h.right,w=(j||parseInt(k.style("height"))||400)-h.top-h.bottom;if(a.update=function(){s.beforeUpdate(),k.transition().duration(t).call(a)},a.container=this,!(c&&c.length&&c.filter(function(a){return a.values.length}).length)){var x=k.selectAll(".nv-noData").data([r]);return x.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),x.attr("x",h.left+v/2).attr("y",h.top+w/2).text(function(a){return a}),a}k.selectAll(".nv-noData").remove(),b=e.xScale(),d=e.yScale().clamp(!0);var y=k.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([c]),z=y.enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g"),A=z.append("defs"),B=y.select("g");z.append("g").attr("class","nv-x nv-axis"),z.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),z.append("g").attr("class","nv-barsWrap"),B.attr("transform","translate("+h.left+","+h.top+")"),n&&B.select(".nv-y.nv-axis").attr("transform","translate("+v+",0)"),e.width(v).height(w);var C=B.select(".nv-barsWrap").datum(c.filter(function(a){return!a.disabled}));if(C.transition().call(e),A.append("clipPath").attr("id","nv-x-label-clip-"+e.id()).append("rect"),B.select("#nv-x-label-clip-"+e.id()+" rect").attr("width",b.rangeBand()*(o?2:1)).attr("height",16).attr("x",-b.rangeBand()/(o?1:2)),l){f.scale(b).ticks(v/100).tickSize(-w,0),B.select(".nv-x.nv-axis").attr("transform","translate(0,"+(d.range()[0]+(e.showValues()&&d.domain()[0]<0?16:0))+")"),B.select(".nv-x.nv-axis").transition().call(f);var D=B.select(".nv-x.nv-axis").selectAll("g");o&&D.selectAll("text").attr("transform",function(a,b,c){return"translate(0,"+(c%2==0?"5":"17")+")"})}m&&(g.scale(d).ticks(w/36).tickSize(-v,0),B.select(".nv-y.nv-axis").transition().call(g)),B.select(".nv-zeroLine line").attr("x1",0).attr("x2",v).attr("y1",d(0)).attr("y2",d(0)),s.on("tooltipShow",function(a){p&&u(a,q.parentNode)})}),a}var b,d,e=c.models.discreteBar(),f=c.models.axis(),g=c.models.axis(),h={top:15,right:10,bottom:50,left:60},i=null,j=null,k=c.utils.getColor(),l=!0,m=!0,n=!1,o=!1,p=!0,q=function(a,b,c,d,e){return"<h3>"+b+"</h3><p>"+c+"</p>"},r="No Data Available.",s=d3.dispatch("tooltipShow","tooltipHide","beforeUpdate"),t=250;f.orient("bottom").highlightZero(!1).showMaxMin(!1).tickFormat(function(a){return a}),g.orient(n?"right":"left").tickFormat(d3.format(",.1f"));var u=function(b,d){var h=b.pos[0]+(d.offsetLeft||0),i=b.pos[1]+(d.offsetTop||0),j=f.tickFormat()(e.x()(b.point,b.pointIndex)),k=g.tickFormat()(e.y()(b.point,b.pointIndex)),l=q(b.series.key,j,k,b,a);c.tooltip.show([h,i],l,b.value<0?"n":"s",null,d)};return e.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+h.left,a.pos[1]+h.top],s.tooltipShow(a)}),e.dispatch.on("elementMouseout.tooltip",function(a){s.tooltipHide(a)}),s.on("tooltipHide",function(){p&&c.tooltip.cleanup()}),a.dispatch=s,a.discretebar=e,a.xAxis=f,a.yAxis=g,d3.rebind(a,e,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","id","showValues","valueFormat"),a.options=c.utils.optionsFunc.bind(a),a.margin=function(b){return arguments.length?(h.top="undefined"!=typeof b.top?b.top:h.top,h.right="undefined"!=typeof b.right?b.right:h.right,h.bottom="undefined"!=typeof b.bottom?b.bottom:h.bottom,h.left="undefined"!=typeof b.left?b.left:h.left,a):h},a.width=function(b){return arguments.length?(i=b,a):i},a.height=function(b){return arguments.length?(j=b,a):j},a.color=function(b){return arguments.length?(k=c.utils.getColor(b),e.color(k),a):k},a.showXAxis=function(b){return arguments.length?(l=b,a):l},a.showYAxis=function(b){return arguments.length?(m=b,a):m},a.rightAlignYAxis=function(b){return arguments.length?(n=b,g.orient(b?"right":"left"),a):n},a.staggerLabels=function(b){return arguments.length?(o=b,a):o},a.tooltips=function(b){return arguments.length?(p=b,a):p},a.tooltipContent=function(b){return arguments.length?(q=b,a):q},a.noData=function(b){return arguments.length?(r=b,a):r},a.transitionDuration=function(b){return arguments.length?(t=b,a):t},a},c.models.distribution=function(){"use strict";function a(c){return c.each(function(a){var c=(e-("x"===g?d.left+d.right:d.top+d.bottom),"x"==g?"y":"x"),k=d3.select(this);b=b||j;var l=k.selectAll("g.nv-distribution").data([a]),m=l.enter().append("g").attr("class","nvd3 nv-distribution"),n=(m.append("g"),l.select("g"));l.attr("transform","translate("+d.left+","+d.top+")");var o=n.selectAll("g.nv-dist").data(function(a){return a},function(a){return a.key});o.enter().append("g"),o.attr("class",function(a,b){return"nv-dist nv-series-"+b}).style("stroke",function(a,b){return i(a,b)});var p=o.selectAll("line.nv-dist"+g).data(function(a){return a.values});p.enter().append("line").attr(g+"1",function(a,c){return b(h(a,c))}).attr(g+"2",function(a,c){return b(h(a,c))}),o.exit().selectAll("line.nv-dist"+g).transition().attr(g+"1",function(a,b){return j(h(a,b))}).attr(g+"2",function(a,b){return j(h(a,b))}).style("stroke-opacity",0).remove(),p.attr("class",function(a,b){return"nv-dist"+g+" nv-dist"+g+"-"+b}).attr(c+"1",0).attr(c+"2",f),p.transition().attr(g+"1",function(a,b){return j(h(a,b))}).attr(g+"2",function(a,b){return j(h(a,b))}),b=j.copy()}),a}var b,d={top:0,right:0,bottom:0,left:0},e=400,f=8,g="x",h=function(a){return a[g]},i=c.utils.defaultColor(),j=d3.scale.linear();return a.options=c.utils.optionsFunc.bind(a),a.margin=function(b){return arguments.length?(d.top="undefined"!=typeof b.top?b.top:d.top,d.right="undefined"!=typeof b.right?b.right:d.right,d.bottom="undefined"!=typeof b.bottom?b.bottom:d.bottom,d.left="undefined"!=typeof b.left?b.left:d.left,a):d},a.width=function(b){return arguments.length?(e=b,a):e},a.axis=function(b){return arguments.length?(g=b,a):g},a.size=function(b){return arguments.length?(f=b,a):f},a.getData=function(b){return arguments.length?(h=d3.functor(b),a):h},a.scale=function(b){return arguments.length?(j=b,a):j},a.color=function(b){return arguments.length?(i=c.utils.getColor(b),a):i},a},c.models.historicalBarChart=function(){"use strict";function a(c){return c.each(function(r){var y=d3.select(this),z=this,A=(k||parseInt(y.style("width"))||960)-i.left-i.right,B=(l||parseInt(y.style("height"))||400)-i.top-i.bottom;if(a.update=function(){y.transition().duration(w).call(a)},a.container=this,s.disabled=r.map(function(a){return!!a.disabled}),!t){var C;t={};for(C in s)s[C]instanceof Array?t[C]=s[C].slice(0):t[C]=s[C]}if(!(r&&r.length&&r.filter(function(a){return a.values.length}).length)){var D=y.selectAll(".nv-noData").data([u]);return D.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),D.attr("x",i.left+A/2).attr("y",i.top+B/2).text(function(a){return a}),a}y.selectAll(".nv-noData").remove(),b=e.xScale(),d=e.yScale();var E=y.selectAll("g.nv-wrap.nv-historicalBarChart").data([r]),F=E.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBarChart").append("g"),G=E.select("g");F.append("g").attr("class","nv-x nv-axis"),F.append("g").attr("class","nv-y nv-axis"),F.append("g").attr("class","nv-barsWrap"),F.append("g").attr("class","nv-legendWrap"),m&&(h.width(A),G.select(".nv-legendWrap").datum(r).call(h),i.top!=h.height()&&(i.top=h.height(),B=(l||parseInt(y.style("height"))||400)-i.top-i.bottom),E.select(".nv-legendWrap").attr("transform","translate(0,"+-i.top+")")),E.attr("transform","translate("+i.left+","+i.top+")"),p&&G.select(".nv-y.nv-axis").attr("transform","translate("+A+",0)"),e.width(A).height(B).color(r.map(function(a,b){return a.color||j(a,b)}).filter(function(a,b){return!r[b].disabled}));var H=G.select(".nv-barsWrap").datum(r.filter(function(a){return!a.disabled}));H.transition().call(e),n&&(f.scale(b).tickSize(-B,0),G.select(".nv-x.nv-axis").attr("transform","translate(0,"+d.range()[0]+")"),G.select(".nv-x.nv-axis").transition().call(f)),o&&(g.scale(d).ticks(B/36).tickSize(-A,0),G.select(".nv-y.nv-axis").transition().call(g)),h.dispatch.on("legendClick",function(b,d){b.disabled=!b.disabled,r.filter(function(a){return!a.disabled}).length||r.map(function(a){return a.disabled=!1,E.selectAll(".nv-series").classed("disabled",!1),a}),s.disabled=r.map(function(a){return!!a.disabled}),v.stateChange(s),c.transition().call(a)}),h.dispatch.on("legendDblclick",function(b){r.forEach(function(a){a.disabled=!0}),b.disabled=!1,s.disabled=r.map(function(a){return!!a.disabled}),v.stateChange(s),a.update()}),v.on("tooltipShow",function(a){q&&x(a,z.parentNode)}),v.on("changeState",function(b){"undefined"!=typeof b.disabled&&(r.forEach(function(a,c){a.disabled=b.disabled[c]}),s.disabled=b.disabled),a.update()})}),a}var b,d,e=c.models.historicalBar(),f=c.models.axis(),g=c.models.axis(),h=c.models.legend(),i={top:30,right:90,bottom:50,left:90},j=c.utils.defaultColor(),k=null,l=null,m=!1,n=!0,o=!0,p=!1,q=!0,r=function(a,b,c,d,e){return"<h3>"+a+"</h3><p>"+c+" at "+b+"</p>"},s={},t=null,u="No Data Available.",v=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),w=250;f.orient("bottom").tickPadding(7),g.orient(p?"right":"left");var x=function(b,d){if(d){var h=d3.select(d).select("svg"),i=h.node()?h.attr("viewBox"):null;if(i){i=i.split(" ");var j=parseInt(h.style("width"))/i[2];b.pos[0]=b.pos[0]*j,b.pos[1]=b.pos[1]*j}}var k=b.pos[0]+(d.offsetLeft||0),l=b.pos[1]+(d.offsetTop||0),m=f.tickFormat()(e.x()(b.point,b.pointIndex)),n=g.tickFormat()(e.y()(b.point,b.pointIndex)),o=r(b.series.key,m,n,b,a);c.tooltip.show([k,l],o,null,null,d)};return e.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+i.left,a.pos[1]+i.top],v.tooltipShow(a)}),e.dispatch.on("elementMouseout.tooltip",function(a){v.tooltipHide(a)}),v.on("tooltipHide",function(){q&&c.tooltip.cleanup()}),a.dispatch=v,a.bars=e,a.legend=h,a.xAxis=f,a.yAxis=g,d3.rebind(a,e,"defined","isArea","x","y","size","xScale","yScale","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","id","interpolate","highlightPoint","clearHighlights","interactive"),a.options=c.utils.optionsFunc.bind(a),a.margin=function(b){return arguments.length?(i.top="undefined"!=typeof b.top?b.top:i.top,i.right="undefined"!=typeof b.right?b.right:i.right,i.bottom="undefined"!=typeof b.bottom?b.bottom:i.bottom,i.left="undefined"!=typeof b.left?b.left:i.left,a):i},a.width=function(b){return arguments.length?(k=b,a):k},a.height=function(b){return arguments.length?(l=b,a):l},a.color=function(b){return arguments.length?(j=c.utils.getColor(b),h.color(j),a):j},a.showLegend=function(b){return arguments.length?(m=b,a):m},a.showXAxis=function(b){return arguments.length?(n=b,a):n},a.showYAxis=function(b){return arguments.length?(o=b,a):o},a.rightAlignYAxis=function(b){return arguments.length?(p=b,g.orient(b?"right":"left"),a):p},a.tooltips=function(b){return arguments.length?(q=b,a):q},a.tooltipContent=function(b){return arguments.length?(r=b,a):r},a.state=function(b){return arguments.length?(s=b,a):s},a.defaultState=function(b){return arguments.length?(t=b,a):t},a.noData=function(b){return arguments.length?(u=b,a):u},a.transitionDuration=function(b){return arguments.length?(w=b,a):w},a},c.models.indentedTree=function(){"use strict";function a(b){return b.each(function(b){function c(b,d,e){return d3.event.stopPropagation(),d3.event.shiftKey&&!e?(d3.event.shiftKey=!1,b.values&&b.values.forEach(function(a){(a.values||a._values)&&c(a,0,!0)}),!0):g(b)?(b.values?(b._values=b.values,b.values=null):(b.values=b._values,b._values=null),void a.update()):!0}function d(a){return a._values&&a._values.length?n:a.values&&a.values.length?o:""}function f(a){return a._values&&a._values.length}function g(a){var b=a.values||a._values;return b&&b.length}var s=1,t=d3.select(this),u=d3.layout.tree().children(function(a){return a.values}).size([e,k]);a.update=function(){t.transition().duration(600).call(a)},b[0]||(b[0]={key:j});var v=u.nodes(b[0]),w=d3.select(this).selectAll("div").data([[v]]),x=w.enter().append("div").attr("class","nvd3 nv-wrap nv-indentedtree"),y=x.append("table"),z=w.select("table").attr("width","100%").attr("class",m);if(h){var A=y.append("thead"),B=A.append("tr");l.forEach(function(a){B.append("th").attr("width",a.width?a.width:"10%").style("text-align","numeric"==a.type?"right":"left").append("span").text(a.label)})}var C=z.selectAll("tbody").data(function(a){return a});C.enter().append("tbody"),s=d3.max(v,function(a){return a.depth}),u.size([e,s*k]);var D=C.selectAll("tr").data(function(a){return a.filter(function(a){return i&&!a.children?i(a):!0})},function(a,b){return a.id||a.id||++r});D.exit().remove(),D.select("img.nv-treeicon").attr("src",d).classed("folded",f);var E=D.enter().append("tr");l.forEach(function(a,b){var e=E.append("td").style("padding-left",function(a){return(b?0:a.depth*k+12+(d(a)?0:16))+"px"},"important").style("text-align","numeric"==a.type?"right":"left");0==b&&e.append("img").classed("nv-treeicon",!0).classed("nv-folded",f).attr("src",d).style("width","14px").style("height","14px").style("padding","0 1px").style("display",function(a){return d(a)?"inline-block":"none"}).on("click",c),e.each(function(c){!b&&q(c)?d3.select(this).append("a").attr("href",q).attr("class",d3.functor(a.classes)).append("span"):d3.select(this).append("span"),d3.select(this).select("span").attr("class",d3.functor(a.classes)).text(function(b){return a.format?a.format(b):b[a.key]||"-"})}),a.showCount&&(e.append("span").attr("class","nv-childrenCount"),D.selectAll("span.nv-childrenCount").text(function(a){return a.values&&a.values.length||a._values&&a._values.length?"("+(a.values&&a.values.filter(function(a){return i?i(a):!0}).length||a._values&&a._values.filter(function(a){return i?i(a):!0}).length||0)+")":""}))}),D.order().on("click",function(a){p.elementClick({row:this,data:a,pos:[a.x,a.y]})}).on("dblclick",function(a){p.elementDblclick({row:this,data:a,pos:[a.x,a.y]})}).on("mouseover",function(a){p.elementMouseover({row:this,data:a,pos:[a.x,a.y]})}).on("mouseout",function(a){p.elementMouseout({row:this,data:a,pos:[a.x,a.y]})})}),a}var b={top:0,right:0,bottom:0,left:0},d=960,e=500,f=c.utils.defaultColor(),g=Math.floor(1e4*Math.random()),h=!0,i=!1,j="No Data Available.",k=20,l=[{key:"key",label:"Name",type:"text"}],m=null,n="images/grey-plus.png",o="images/grey-minus.png",p=d3.dispatch("elementClick","elementDblclick","elementMouseover","elementMouseout"),q=function(a){return a.url},r=0;return a.options=c.utils.optionsFunc.bind(a),a.margin=function(c){return arguments.length?(b.top="undefined"!=typeof c.top?c.top:b.top,b.right="undefined"!=typeof c.right?c.right:b.right,b.bottom="undefined"!=typeof c.bottom?c.bottom:b.bottom,b.left="undefined"!=typeof c.left?c.left:b.left,a):b},a.width=function(b){return arguments.length?(d=b,a):d},a.height=function(b){return arguments.length?(e=b,a):e},a.color=function(b){return arguments.length?(f=c.utils.getColor(b),scatter.color(f),a):f},a.id=function(b){return arguments.length?(g=b,a):g},a.header=function(b){return arguments.length?(h=b,a):h},a.noData=function(b){return arguments.length?(j=b,a):j},a.filterZero=function(b){return arguments.length?(i=b,a):i},a.columns=function(b){return arguments.length?(l=b,a):l},a.tableClass=function(b){return arguments.length?(m=b,a):m},a.iconOpen=function(b){return arguments.length?(n=b,a):n},a.iconClose=function(b){return arguments.length?(o=b,a):o},a.getUrl=function(b){return arguments.length?(q=b,a):q},a},c.models.legend=function(){"use strict";function a(m){return m.each(function(a){var m=d-b.left-b.right,n=d3.select(this),o=n.selectAll("g.nv-legend").data([a]),p=(o.enter().append("g").attr("class","nvd3 nv-legend").append("g"),o.select("g"));o.attr("transform","translate("+b.left+","+b.top+")");var q=p.selectAll(".nv-series").data(function(a){return a}),r=q.enter().append("g").attr("class","nv-series").on("mouseover",function(a,b){l.legendMouseover(a,b)}).on("mouseout",function(a,b){l.legendMouseout(a,b)}).on("click",function(b,c){l.legendClick(b,c),j&&(k?(a.forEach(function(a){a.disabled=!0}),b.disabled=!1):(b.disabled=!b.disabled,a.every(function(a){return a.disabled})&&a.forEach(function(a){a.disabled=!1})),l.stateChange({disabled:a.map(function(a){return!!a.disabled})}))}).on("dblclick",function(b,c){l.legendDblclick(b,c),j&&(a.forEach(function(a){a.disabled=!0}),b.disabled=!1,l.stateChange({disabled:a.map(function(a){return!!a.disabled})}))});if(r.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5),r.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8"),q.classed("disabled",function(a){return a.disabled}),q.exit().remove(),q.select("circle").style("fill",function(a,b){return a.color||g(a,b)}).style("stroke",function(a,b){return a.color||g(a,b)}),q.select("text").text(f),h){var s=[];q.each(function(a,b){var d,e=d3.select(this).select("text");try{if(d=e.getComputedTextLength(),0>=d)throw Error()}catch(f){d=c.utils.calcApproxTextWidth(e)}s.push(d+28)});for(var t=0,u=0,v=[];m>u&&t<s.length;)v[t]=s[t],u+=s[t++];for(0===t&&(t=1);u>m&&t>1;){v=[],t--;for(var w=0;w<s.length;w++)s[w]>(v[w%t]||0)&&(v[w%t]=s[w]);u=v.reduce(function(a,b,c,d){return a+b})}for(var x=[],y=0,z=0;t>y;y++)x[y]=z,z+=v[y];q.attr("transform",function(a,b){return"translate("+x[b%t]+","+(5+20*Math.floor(b/t))+")"}),i?p.attr("transform","translate("+(d-b.right-u)+","+b.top+")"):p.attr("transform","translate(0,"+b.top+")"),e=b.top+b.bottom+20*Math.ceil(s.length/t)}else{var A,B=5,C=5,D=0;q.attr("transform",function(a,c){var e=d3.select(this).select("text").node().getComputedTextLength()+28;return A=C,d<b.left+b.right+A+e&&(C=A=5,B+=20),C+=e,C>D&&(D=C),"translate("+A+","+B+")"}),p.attr("transform","translate("+(d-b.right-D)+","+b.top+")"),e=b.top+b.bottom+B+15}}),a}var b={top:5,right:0,bottom:5,left:0},d=400,e=20,f=function(a){return a.key},g=c.utils.defaultColor(),h=!0,i=!0,j=!0,k=!1,l=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange");return a.dispatch=l,a.options=c.utils.optionsFunc.bind(a),a.margin=function(c){return arguments.length?(b.top="undefined"!=typeof c.top?c.top:b.top,b.right="undefined"!=typeof c.right?c.right:b.right,b.bottom="undefined"!=typeof c.bottom?c.bottom:b.bottom,b.left="undefined"!=typeof c.left?c.left:b.left,a):b},a.width=function(b){return arguments.length?(d=b,a):d},a.height=function(b){return arguments.length?(e=b,a):e},a.key=function(b){return arguments.length?(f=b,a):f},a.color=function(b){return arguments.length?(g=c.utils.getColor(b),a):g},a.align=function(b){return arguments.length?(h=b,a):h},a.rightAlign=function(b){return arguments.length?(i=b,a):i},a.updateState=function(b){return arguments.length?(j=b,a):j},a.radioButtonMode=function(b){return arguments.length?(k=b,a):k},a},c.models.line=function(){"use strict";function a(r){return r.each(function(a){var r=g-f.left-f.right,s=h-f.top-f.bottom,t=d3.select(this);b=e.xScale(),d=e.yScale(),p=p||b,q=q||d;var u=t.selectAll("g.nv-wrap.nv-line").data([a]),v=u.enter().append("g").attr("class","nvd3 nv-wrap nv-line"),w=v.append("defs"),x=v.append("g"),y=u.select("g");x.append("g").attr("class","nv-groups"),x.append("g").attr("class","nv-scatterWrap"),u.attr("transform","translate("+f.left+","+f.top+")"),e.width(r).height(s);var z=u.select(".nv-scatterWrap");z.transition().call(e),w.append("clipPath").attr("id","nv-edge-clip-"+e.id()).append("rect"),u.select("#nv-edge-clip-"+e.id()+" rect").attr("width",r).attr("height",s>0?s:0),y.attr("clip-path",n?"url(#nv-edge-clip-"+e.id()+")":""),z.attr("clip-path",n?"url(#nv-edge-clip-"+e.id()+")":"");var A=u.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});A.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),A.exit().remove(),A.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover}).style("fill",function(a,b){return i(a,b)}).style("stroke",function(a,b){return i(a,b)}),A.transition().style("stroke-opacity",1).style("fill-opacity",.5);var B=A.selectAll("path.nv-area").data(function(a){return m(a)?[a]:[]});B.enter().append("path").attr("class","nv-area").attr("d",function(a){return d3.svg.area().interpolate(o).defined(l).x(function(a,b){return c.utils.NaNtoZero(p(j(a,b)))}).y0(function(a,b){return c.utils.NaNtoZero(q(k(a,b)))}).y1(function(a,b){return q(d.domain()[0]<=0?d.domain()[1]>=0?0:d.domain()[1]:d.domain()[0])}).apply(this,[a.values])}),A.exit().selectAll("path.nv-area").remove(),B.transition().attr("d",function(a){return d3.svg.area().interpolate(o).defined(l).x(function(a,d){return c.utils.NaNtoZero(b(j(a,d)))}).y0(function(a,b){return c.utils.NaNtoZero(d(k(a,b)))}).y1(function(a,b){return d(d.domain()[0]<=0?d.domain()[1]>=0?0:d.domain()[1]:d.domain()[0])}).apply(this,[a.values])});var C=A.selectAll("path.nv-line").data(function(a){return[a.values]});C.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(o).defined(l).x(function(a,b){return c.utils.NaNtoZero(p(j(a,b)))}).y(function(a,b){return c.utils.NaNtoZero(q(k(a,b)))})),C.transition().attr("d",d3.svg.line().interpolate(o).defined(l).x(function(a,d){return c.utils.NaNtoZero(b(j(a,d)))}).y(function(a,b){return c.utils.NaNtoZero(d(k(a,b)))})),p=b.copy(),q=d.copy()}),a}var b,d,e=c.models.scatter(),f={top:0,right:0,bottom:0,left:0},g=960,h=500,i=c.utils.defaultColor(),j=function(a){return a.x},k=function(a){return a.y},l=function(a,b){return!isNaN(k(a,b))&&null!==k(a,b)},m=function(a){return a.area},n=!1,o="linear";e.size(16).sizeDomain([16,256]);var p,q;return a.dispatch=e.dispatch,a.scatter=e,d3.rebind(a,e,"id","interactive","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","forceX","forceY","forceSize","clipVoronoi","useVoronoi","clipRadius","padData","highlightPoint","clearHighlights"),a.options=c.utils.optionsFunc.bind(a),a.margin=function(b){return arguments.length?(f.top="undefined"!=typeof b.top?b.top:f.top,f.right="undefined"!=typeof b.right?b.right:f.right,f.bottom="undefined"!=typeof b.bottom?b.bottom:f.bottom,f.left="undefined"!=typeof b.left?b.left:f.left,a):f},a.width=function(b){return arguments.length?(g=b,a):g},a.height=function(b){return arguments.length?(h=b,a):h},a.x=function(b){return arguments.length?(j=b,e.x(b),a):j},a.y=function(b){return arguments.length?(k=b,e.y(b),a):k},a.clipEdge=function(b){return arguments.length?(n=b,a):n},a.color=function(b){return arguments.length?(i=c.utils.getColor(b),e.color(i),a):i},a.interpolate=function(b){return arguments.length?(o=b,a):o},a.defined=function(b){return arguments.length?(l=b,a):l},a.isArea=function(b){return arguments.length?(m=d3.functor(b),a):m},a},c.models.lineChart=function(){"use strict";function a(t){return t.each(function(t){var A=d3.select(this),B=this,C=(l||parseInt(A.style("width"))||960)-j.left-j.right,D=(m||parseInt(A.style("height"))||400)-j.top-j.bottom;if(a.update=function(){A.transition().duration(y).call(a)},a.container=this,u.disabled=t.map(function(a){return!!a.disabled}),!v){var E;v={};for(E in u)u[E]instanceof Array?v[E]=u[E].slice(0):v[E]=u[E]}if(!(t&&t.length&&t.filter(function(a){return a.values.length}).length)){var F=A.selectAll(".nv-noData").data([w]);return F.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),F.attr("x",j.left+C/2).attr("y",j.top+D/2).text(function(a){return a}),a}A.selectAll(".nv-noData").remove(),b=e.xScale(),d=e.yScale();var G=A.selectAll("g.nv-wrap.nv-lineChart").data([t]),H=G.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g"),I=G.select("g");H.append("rect").style("opacity",0),H.append("g").attr("class","nv-x nv-axis"),H.append("g").attr("class","nv-y nv-axis"),H.append("g").attr("class","nv-linesWrap"),H.append("g").attr("class","nv-legendWrap"),H.append("g").attr("class","nv-interactive"),I.select("rect").attr("width",C).attr("height",D>0?D:0),n&&(h.width(C),I.select(".nv-legendWrap").datum(t).call(h),j.top!=h.height()&&(j.top=h.height(),D=(m||parseInt(A.style("height"))||400)-j.top-j.bottom),G.select(".nv-legendWrap").attr("transform","translate(0,"+-j.top+")")),G.attr("transform","translate("+j.left+","+j.top+")"),q&&I.select(".nv-y.nv-axis").attr("transform","translate("+C+",0)"),r&&(i.width(C).height(D).margin({left:j.left,top:j.top}).svgContainer(A).xScale(b),G.select(".nv-interactive").call(i)),e.width(C).height(D).color(t.map(function(a,b){return a.color||k(a,b)}).filter(function(a,b){return!t[b].disabled}));var J=I.select(".nv-linesWrap").datum(t.filter(function(a){return!a.disabled}));J.transition().call(e),o&&(f.scale(b).ticks(C/100).tickSize(-D,0),I.select(".nv-x.nv-axis").attr("transform","translate(0,"+d.range()[0]+")"),I.select(".nv-x.nv-axis").transition().call(f)),p&&(g.scale(d).ticks(D/36).tickSize(-C,0),I.select(".nv-y.nv-axis").transition().call(g)),h.dispatch.on("stateChange",function(b){u=b,x.stateChange(u),a.update()}),i.dispatch.on("elementMousemove",function(b){e.clearHighlights();var d,h,l,m=[];if(t.filter(function(a,b){return a.seriesIndex=b,!a.disabled}).forEach(function(f,g){h=c.interactiveBisect(f.values,b.pointXValue,a.x()),e.highlightPoint(g,h,!0);var i=f.values[h];"undefined"!=typeof i&&("undefined"==typeof d&&(d=i),"undefined"==typeof l&&(l=a.xScale()(a.x()(i,h))),m.push({key:f.key,value:a.y()(i,h),color:k(f,f.seriesIndex)}))}),m.length>2){var n=a.yScale().invert(b.mouseY),o=Math.abs(a.yScale().domain()[0]-a.yScale().domain()[1]),p=.03*o,q=c.nearestValueIndex(m.map(function(a){return a.value}),n,p);null!==q&&(m[q].highlight=!0)}var r=f.tickFormat()(a.x()(d,h));i.tooltip.position({left:l+j.left,top:b.mouseY+j.top}).chartContainer(B.parentNode).enabled(s).valueFormatter(function(a,b){return g.tickFormat()(a)}).data({value:r,series:m})(),i.renderGuideLine(l)}),i.dispatch.on("elementMouseout",function(a){x.tooltipHide(),e.clearHighlights()}),x.on("tooltipShow",function(a){s&&z(a,B.parentNode)}),x.on("changeState",function(b){"undefined"!=typeof b.disabled&&t.length===b.disabled.length&&(t.forEach(function(a,c){a.disabled=b.disabled[c]}),u.disabled=b.disabled),a.update()})}),a}var b,d,e=c.models.line(),f=c.models.axis(),g=c.models.axis(),h=c.models.legend(),i=c.interactiveGuideline(),j={top:30,right:20,bottom:50,left:60},k=c.utils.defaultColor(),l=null,m=null,n=!0,o=!0,p=!0,q=!1,r=!1,s=!0,t=function(a,b,c,d,e){return"<h3>"+a+"</h3><p>"+c+" at "+b+"</p>"},u={},v=null,w="No Data Available.",x=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),y=250;f.orient("bottom").tickPadding(7),g.orient(q?"right":"left");var z=function(b,d){var h=b.pos[0]+(d.offsetLeft||0),i=b.pos[1]+(d.offsetTop||0),j=f.tickFormat()(e.x()(b.point,b.pointIndex)),k=g.tickFormat()(e.y()(b.point,b.pointIndex)),l=t(b.series.key,j,k,b,a);c.tooltip.show([h,i],l,null,null,d)};return e.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+j.left,a.pos[1]+j.top],x.tooltipShow(a)}),e.dispatch.on("elementMouseout.tooltip",function(a){x.tooltipHide(a)}),x.on("tooltipHide",function(){s&&c.tooltip.cleanup()}),a.dispatch=x,a.lines=e,a.legend=h,a.xAxis=f,a.yAxis=g,a.interactiveLayer=i,d3.rebind(a,e,"defined","isArea","x","y","size","xScale","yScale","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","useVoronoi","id","interpolate"),a.options=c.utils.optionsFunc.bind(a),a.margin=function(b){return arguments.length?(j.top="undefined"!=typeof b.top?b.top:j.top,j.right="undefined"!=typeof b.right?b.right:j.right,j.bottom="undefined"!=typeof b.bottom?b.bottom:j.bottom,j.left="undefined"!=typeof b.left?b.left:j.left,a):j},a.width=function(b){return arguments.length?(l=b,a):l},a.height=function(b){return arguments.length?(m=b,a):m},a.color=function(b){return arguments.length?(k=c.utils.getColor(b),h.color(k),a):k},a.showLegend=function(b){return arguments.length?(n=b,a):n},a.showXAxis=function(b){return arguments.length?(o=b,a):o},a.showYAxis=function(b){return arguments.length?(p=b,a):p},a.rightAlignYAxis=function(b){return arguments.length?(q=b,g.orient(b?"right":"left"),a):q},a.useInteractiveGuideline=function(b){return arguments.length?(r=b,b===!0&&(a.interactive(!1),a.useVoronoi(!1)),a):r},a.tooltips=function(b){return arguments.length?(s=b,a):s},a.tooltipContent=function(b){return arguments.length?(t=b,a):t},a.state=function(b){return arguments.length?(u=b,a):u},a.defaultState=function(b){return arguments.length?(v=b,a):v},a.noData=function(b){return arguments.length?(w=b,a):w},a.transitionDuration=function(b){return arguments.length?(y=b,a):y},a},c.models.linePlusBarChart=function(){"use strict";function a(c){return c.each(function(c){var o=d3.select(this),p=this,t=(m||parseInt(o.style("width"))||960)-l.left-l.right,z=(n||parseInt(o.style("height"))||400)-l.top-l.bottom;if(a.update=function(){o.transition().call(a)},u.disabled=c.map(function(a){return!!a.disabled}),!v){var A;v={};for(A in u)u[A]instanceof Array?v[A]=u[A].slice(0):v[A]=u[A]}if(!(c&&c.length&&c.filter(function(a){return a.values.length}).length)){var B=o.selectAll(".nv-noData").data([w]);return B.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),B.attr("x",l.left+t/2).attr("y",l.top+z/2).text(function(a){return a}),a}o.selectAll(".nv-noData").remove();var C=c.filter(function(a){return!a.disabled&&a.bar}),D=c.filter(function(a){return!a.bar});b=D.filter(function(a){return!a.disabled}).length&&D.filter(function(a){return!a.disabled})[0].values.length?f.xScale():g.xScale(),d=g.yScale(),e=f.yScale();var E=d3.select(this).selectAll("g.nv-wrap.nv-linePlusBar").data([c]),F=E.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),G=E.select("g");F.append("g").attr("class","nv-x nv-axis"),F.append("g").attr("class","nv-y1 nv-axis"),F.append("g").attr("class","nv-y2 nv-axis"),F.append("g").attr("class","nv-barsWrap"),F.append("g").attr("class","nv-linesWrap"),F.append("g").attr("class","nv-legendWrap"),r&&(k.width(t/2),G.select(".nv-legendWrap").datum(c.map(function(a){return a.originalKey=void 0===a.originalKey?a.key:a.originalKey,a.key=a.originalKey+(a.bar?" (left axis)":" (right axis)"),a})).call(k),l.top!=k.height()&&(l.top=k.height(),z=(n||parseInt(o.style("height"))||400)-l.top-l.bottom),G.select(".nv-legendWrap").attr("transform","translate("+t/2+","+-l.top+")")),E.attr("transform","translate("+l.left+","+l.top+")"),f.width(t).height(z).color(c.map(function(a,b){return a.color||q(a,b)}).filter(function(a,b){return!c[b].disabled&&!c[b].bar})),g.width(t).height(z).color(c.map(function(a,b){return a.color||q(a,b)}).filter(function(a,b){return!c[b].disabled&&c[b].bar}));var H=G.select(".nv-barsWrap").datum(C.length?C:[{values:[]}]),I=G.select(".nv-linesWrap").datum(D[0]&&!D[0].disabled?D:[{values:[]}]);d3.transition(H).call(g),d3.transition(I).call(f),h.scale(b).ticks(t/100).tickSize(-z,0),G.select(".nv-x.nv-axis").attr("transform","translate(0,"+d.range()[0]+")"),d3.transition(G.select(".nv-x.nv-axis")).call(h),
i.scale(d).ticks(z/36).tickSize(-t,0),d3.transition(G.select(".nv-y1.nv-axis")).style("opacity",C.length?1:0).call(i),j.scale(e).ticks(z/36).tickSize(C.length?0:-t,0),G.select(".nv-y2.nv-axis").style("opacity",D.length?1:0).attr("transform","translate("+t+",0)"),d3.transition(G.select(".nv-y2.nv-axis")).call(j),k.dispatch.on("stateChange",function(b){u=b,x.stateChange(u),a.update()}),x.on("tooltipShow",function(a){s&&y(a,p.parentNode)}),x.on("changeState",function(b){"undefined"!=typeof b.disabled&&(c.forEach(function(a,c){a.disabled=b.disabled[c]}),u.disabled=b.disabled),a.update()})}),a}var b,d,e,f=c.models.line(),g=c.models.historicalBar(),h=c.models.axis(),i=c.models.axis(),j=c.models.axis(),k=c.models.legend(),l={top:30,right:60,bottom:50,left:60},m=null,n=null,o=function(a){return a.x},p=function(a){return a.y},q=c.utils.defaultColor(),r=!0,s=!0,t=function(a,b,c,d,e){return"<h3>"+a+"</h3><p>"+c+" at "+b+"</p>"},u={},v=null,w="No Data Available.",x=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState");g.padData(!0),f.clipEdge(!1).padData(!0),h.orient("bottom").tickPadding(7).highlightZero(!1),i.orient("left"),j.orient("right");var y=function(b,d){var e=b.pos[0]+(d.offsetLeft||0),g=b.pos[1]+(d.offsetTop||0),k=h.tickFormat()(f.x()(b.point,b.pointIndex)),l=(b.series.bar?i:j).tickFormat()(f.y()(b.point,b.pointIndex)),m=t(b.series.key,k,l,b,a);c.tooltip.show([e,g],m,b.value<0?"n":"s",null,d)};return f.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+l.left,a.pos[1]+l.top],x.tooltipShow(a)}),f.dispatch.on("elementMouseout.tooltip",function(a){x.tooltipHide(a)}),g.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+l.left,a.pos[1]+l.top],x.tooltipShow(a)}),g.dispatch.on("elementMouseout.tooltip",function(a){x.tooltipHide(a)}),x.on("tooltipHide",function(){s&&c.tooltip.cleanup()}),a.dispatch=x,a.legend=k,a.lines=f,a.bars=g,a.xAxis=h,a.y1Axis=i,a.y2Axis=j,d3.rebind(a,f,"defined","size","clipVoronoi","interpolate"),a.options=c.utils.optionsFunc.bind(a),a.x=function(b){return arguments.length?(o=b,f.x(b),g.x(b),a):o},a.y=function(b){return arguments.length?(p=b,f.y(b),g.y(b),a):p},a.margin=function(b){return arguments.length?(l.top="undefined"!=typeof b.top?b.top:l.top,l.right="undefined"!=typeof b.right?b.right:l.right,l.bottom="undefined"!=typeof b.bottom?b.bottom:l.bottom,l.left="undefined"!=typeof b.left?b.left:l.left,a):l},a.width=function(b){return arguments.length?(m=b,a):m},a.height=function(b){return arguments.length?(n=b,a):n},a.color=function(b){return arguments.length?(q=c.utils.getColor(b),k.color(q),a):q},a.showLegend=function(b){return arguments.length?(r=b,a):r},a.tooltips=function(b){return arguments.length?(s=b,a):s},a.tooltipContent=function(b){return arguments.length?(t=b,a):t},a.state=function(b){return arguments.length?(u=b,a):u},a.defaultState=function(b){return arguments.length?(v=b,a):v},a.noData=function(b){return arguments.length?(w=b,a):w},a},c.models.lineWithFocusChart=function(){"use strict";function a(c){return c.each(function(c){function x(a){var b=+("e"==a),c=b?1:-1,d=I/3;return"M"+.5*c+","+d+"A6,6 0 0 "+b+" "+6.5*c+","+(d+6)+"V"+(2*d-6)+"A6,6 0 0 "+b+" "+.5*c+","+2*d+"ZM"+2.5*c+","+(d+8)+"V"+(2*d-8)+"M"+4.5*c+","+(d+8)+"V"+(2*d-8)}function C(){n.empty()||n.extent(v),Q.data([n.empty()?e.domain():v]).each(function(a,c){var d=e(a[0])-b.range()[0],f=b.range()[1]-e(a[1]);d3.select(this).select(".left").attr("width",0>d?0:d),d3.select(this).select(".right").attr("x",e(a[1])).attr("width",0>f?0:f)})}function D(){v=n.empty()?null:n.extent();var a=n.empty()?e.domain():n.extent();if(!(Math.abs(a[0]-a[1])<=1)){z.brush({extent:a,brush:n}),C();var b=M.select(".nv-focus .nv-linesWrap").datum(c.filter(function(a){return!a.disabled}).map(function(b,c){return{key:b.key,values:b.values.filter(function(b,c){return g.x()(b,c)>=a[0]&&g.x()(b,c)<=a[1]})}}));b.transition().duration(A).call(g),M.select(".nv-focus .nv-x.nv-axis").transition().duration(A).call(i),M.select(".nv-focus .nv-y.nv-axis").transition().duration(A).call(j)}}var E=d3.select(this),F=this,G=(r||parseInt(E.style("width"))||960)-o.left-o.right,H=(s||parseInt(E.style("height"))||400)-o.top-o.bottom-t,I=t-p.top-p.bottom;if(a.update=function(){E.transition().duration(A).call(a)},a.container=this,!(c&&c.length&&c.filter(function(a){return a.values.length}).length)){var J=E.selectAll(".nv-noData").data([y]);return J.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),J.attr("x",o.left+G/2).attr("y",o.top+H/2).text(function(a){return a}),a}E.selectAll(".nv-noData").remove(),b=g.xScale(),d=g.yScale(),e=h.xScale(),f=h.yScale();var K=E.selectAll("g.nv-wrap.nv-lineWithFocusChart").data([c]),L=K.enter().append("g").attr("class","nvd3 nv-wrap nv-lineWithFocusChart").append("g"),M=K.select("g");L.append("g").attr("class","nv-legendWrap");var N=L.append("g").attr("class","nv-focus");N.append("g").attr("class","nv-x nv-axis"),N.append("g").attr("class","nv-y nv-axis"),N.append("g").attr("class","nv-linesWrap");var O=L.append("g").attr("class","nv-context");O.append("g").attr("class","nv-x nv-axis"),O.append("g").attr("class","nv-y nv-axis"),O.append("g").attr("class","nv-linesWrap"),O.append("g").attr("class","nv-brushBackground"),O.append("g").attr("class","nv-x nv-brush"),u&&(m.width(G),M.select(".nv-legendWrap").datum(c).call(m),o.top!=m.height()&&(o.top=m.height(),H=(s||parseInt(E.style("height"))||400)-o.top-o.bottom-t),M.select(".nv-legendWrap").attr("transform","translate(0,"+-o.top+")")),K.attr("transform","translate("+o.left+","+o.top+")"),g.width(G).height(H).color(c.map(function(a,b){return a.color||q(a,b)}).filter(function(a,b){return!c[b].disabled})),h.defined(g.defined()).width(G).height(I).color(c.map(function(a,b){return a.color||q(a,b)}).filter(function(a,b){return!c[b].disabled})),M.select(".nv-context").attr("transform","translate(0,"+(H+o.bottom+p.top)+")");var P=M.select(".nv-context .nv-linesWrap").datum(c.filter(function(a){return!a.disabled}));d3.transition(P).call(h),i.scale(b).ticks(G/100).tickSize(-H,0),j.scale(d).ticks(H/36).tickSize(-G,0),M.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+H+")"),n.x(e).on("brush",function(){var b=a.transitionDuration();a.transitionDuration(0),D(),a.transitionDuration(b)}),v&&n.extent(v);var Q=M.select(".nv-brushBackground").selectAll("g").data([v||n.extent()]),R=Q.enter().append("g");R.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",I),R.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",I);var S=M.select(".nv-x.nv-brush").call(n);S.selectAll("rect").attr("height",I),S.selectAll(".resize").append("path").attr("d",x),D(),k.scale(e).ticks(G/100).tickSize(-I,0),M.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+f.range()[0]+")"),d3.transition(M.select(".nv-context .nv-x.nv-axis")).call(k),l.scale(f).ticks(I/36).tickSize(-G,0),d3.transition(M.select(".nv-context .nv-y.nv-axis")).call(l),M.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+f.range()[0]+")"),m.dispatch.on("stateChange",function(b){a.update()}),z.on("tooltipShow",function(a){w&&B(a,F.parentNode)})}),a}var b,d,e,f,g=c.models.line(),h=c.models.line(),i=c.models.axis(),j=c.models.axis(),k=c.models.axis(),l=c.models.axis(),m=c.models.legend(),n=d3.svg.brush(),o={top:30,right:30,bottom:30,left:60},p={top:0,right:30,bottom:20,left:60},q=c.utils.defaultColor(),r=null,s=null,t=100,u=!0,v=null,w=!0,x=function(a,b,c,d,e){return"<h3>"+a+"</h3><p>"+c+" at "+b+"</p>"},y="No Data Available.",z=d3.dispatch("tooltipShow","tooltipHide","brush"),A=250;g.clipEdge(!0),h.interactive(!1),i.orient("bottom").tickPadding(5),j.orient("left"),k.orient("bottom").tickPadding(5),l.orient("left");var B=function(b,d){var e=b.pos[0]+(d.offsetLeft||0),f=b.pos[1]+(d.offsetTop||0),h=i.tickFormat()(g.x()(b.point,b.pointIndex)),k=j.tickFormat()(g.y()(b.point,b.pointIndex)),l=x(b.series.key,h,k,b,a);c.tooltip.show([e,f],l,null,null,d)};return g.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+o.left,a.pos[1]+o.top],z.tooltipShow(a)}),g.dispatch.on("elementMouseout.tooltip",function(a){z.tooltipHide(a)}),z.on("tooltipHide",function(){w&&c.tooltip.cleanup()}),a.dispatch=z,a.legend=m,a.lines=g,a.lines2=h,a.xAxis=i,a.yAxis=j,a.x2Axis=k,a.y2Axis=l,d3.rebind(a,g,"defined","isArea","size","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","id"),a.options=c.utils.optionsFunc.bind(a),a.x=function(b){return arguments.length?(g.x(b),h.x(b),a):g.x},a.y=function(b){return arguments.length?(g.y(b),h.y(b),a):g.y},a.margin=function(b){return arguments.length?(o.top="undefined"!=typeof b.top?b.top:o.top,o.right="undefined"!=typeof b.right?b.right:o.right,o.bottom="undefined"!=typeof b.bottom?b.bottom:o.bottom,o.left="undefined"!=typeof b.left?b.left:o.left,a):o},a.margin2=function(b){return arguments.length?(p=b,a):p},a.width=function(b){return arguments.length?(r=b,a):r},a.height=function(b){return arguments.length?(s=b,a):s},a.height2=function(b){return arguments.length?(t=b,a):t},a.color=function(b){return arguments.length?(q=c.utils.getColor(b),m.color(q),a):q},a.showLegend=function(b){return arguments.length?(u=b,a):u},a.tooltips=function(b){return arguments.length?(w=b,a):w},a.tooltipContent=function(b){return arguments.length?(x=b,a):x},a.interpolate=function(b){return arguments.length?(g.interpolate(b),h.interpolate(b),a):g.interpolate()},a.noData=function(b){return arguments.length?(y=b,a):y},a.xTickFormat=function(b){return arguments.length?(i.tickFormat(b),k.tickFormat(b),a):i.tickFormat()},a.yTickFormat=function(b){return arguments.length?(j.tickFormat(b),l.tickFormat(b),a):j.tickFormat()},a.brushExtent=function(b){return arguments.length?(v=b,a):v},a.transitionDuration=function(b){return arguments.length?(A=b,a):A},a},c.models.linePlusBarWithFocusChart=function(){"use strict";function a(c){return c.each(function(c){function G(a){var b=+("e"==a),c=b?1:-1,d=R/3;return"M"+.5*c+","+d+"A6,6 0 0 "+b+" "+6.5*c+","+(d+6)+"V"+(2*d-6)+"A6,6 0 0 "+b+" "+.5*c+","+2*d+"ZM"+2.5*c+","+(d+8)+"V"+(2*d-8)+"M"+4.5*c+","+(d+8)+"V"+(2*d-8)}function L(){u.empty()||u.extent(E),ca.data([u.empty()?e.domain():E]).each(function(a,b){var c=e(a[0])-e.range()[0],d=e.range()[1]-e(a[1]);d3.select(this).select(".left").attr("width",0>c?0:c),d3.select(this).select(".right").attr("x",e(a[1])).attr("width",0>d?0:d)})}function M(){E=u.empty()?null:u.extent(),b=u.empty()?e.domain():u.extent(),I.brush({extent:b,brush:u}),L(),l.width(P).height(Q).color(c.map(function(a,b){return a.color||C(a,b)}).filter(function(a,b){return!c[b].disabled&&c[b].bar})),j.width(P).height(Q).color(c.map(function(a,b){return a.color||C(a,b)}).filter(function(a,b){return!c[b].disabled&&!c[b].bar}));var a=Z.select(".nv-focus .nv-barsWrap").datum(T.length?T.map(function(a,c){return{key:a.key,values:a.values.filter(function(a,c){return l.x()(a,c)>=b[0]&&l.x()(a,c)<=b[1]})}}):[{values:[]}]),h=Z.select(".nv-focus .nv-linesWrap").datum(U[0].disabled?[{values:[]}]:U.map(function(a,c){return{key:a.key,values:a.values.filter(function(a,c){return j.x()(a,c)>=b[0]&&j.x()(a,c)<=b[1]})}}));d=T.length?l.xScale():j.xScale(),n.scale(d).ticks(P/100).tickSize(-Q,0),n.domain([Math.ceil(b[0]),Math.floor(b[1])]),Z.select(".nv-x.nv-axis").transition().duration(J).call(n),a.transition().duration(J).call(l),h.transition().duration(J).call(j),Z.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+f.range()[0]+")"),p.scale(f).ticks(Q/36).tickSize(-P,0),Z.select(".nv-focus .nv-y1.nv-axis").style("opacity",T.length?1:0),q.scale(g).ticks(Q/36).tickSize(T.length?0:-P,0),Z.select(".nv-focus .nv-y2.nv-axis").style("opacity",U.length?1:0).attr("transform","translate("+d.range()[1]+",0)"),Z.select(".nv-focus .nv-y1.nv-axis").transition().duration(J).call(p),Z.select(".nv-focus .nv-y2.nv-axis").transition().duration(J).call(q)}var N=d3.select(this),O=this,P=(x||parseInt(N.style("width"))||960)-v.left-v.right,Q=(y||parseInt(N.style("height"))||400)-v.top-v.bottom-z,R=z-w.top-w.bottom;if(a.update=function(){N.transition().duration(J).call(a)},a.container=this,!(c&&c.length&&c.filter(function(a){return a.values.length}).length)){var S=N.selectAll(".nv-noData").data([H]);return S.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),S.attr("x",v.left+P/2).attr("y",v.top+Q/2).text(function(a){return a}),a}N.selectAll(".nv-noData").remove();var T=c.filter(function(a){return!a.disabled&&a.bar}),U=c.filter(function(a){return!a.bar});d=l.xScale(),e=o.scale(),f=l.yScale(),g=j.yScale(),h=m.yScale(),i=k.yScale();var V=c.filter(function(a){return!a.disabled&&a.bar}).map(function(a){return a.values.map(function(a,b){return{x:A(a,b),y:B(a,b)}})}),W=c.filter(function(a){return!a.disabled&&!a.bar}).map(function(a){return a.values.map(function(a,b){return{x:A(a,b),y:B(a,b)}})});d.range([0,P]),e.domain(d3.extent(d3.merge(V.concat(W)),function(a){return a.x})).range([0,P]);var X=N.selectAll("g.nv-wrap.nv-linePlusBar").data([c]),Y=X.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),Z=X.select("g");Y.append("g").attr("class","nv-legendWrap");var $=Y.append("g").attr("class","nv-focus");$.append("g").attr("class","nv-x nv-axis"),$.append("g").attr("class","nv-y1 nv-axis"),$.append("g").attr("class","nv-y2 nv-axis"),$.append("g").attr("class","nv-barsWrap"),$.append("g").attr("class","nv-linesWrap");var _=Y.append("g").attr("class","nv-context");_.append("g").attr("class","nv-x nv-axis"),_.append("g").attr("class","nv-y1 nv-axis"),_.append("g").attr("class","nv-y2 nv-axis"),_.append("g").attr("class","nv-barsWrap"),_.append("g").attr("class","nv-linesWrap"),_.append("g").attr("class","nv-brushBackground"),_.append("g").attr("class","nv-x nv-brush"),D&&(t.width(P/2),Z.select(".nv-legendWrap").datum(c.map(function(a){return a.originalKey=void 0===a.originalKey?a.key:a.originalKey,a.key=a.originalKey+(a.bar?" (left axis)":" (right axis)"),a})).call(t),v.top!=t.height()&&(v.top=t.height(),Q=(y||parseInt(N.style("height"))||400)-v.top-v.bottom-z),Z.select(".nv-legendWrap").attr("transform","translate("+P/2+","+-v.top+")")),X.attr("transform","translate("+v.left+","+v.top+")"),m.width(P).height(R).color(c.map(function(a,b){return a.color||C(a,b)}).filter(function(a,b){return!c[b].disabled&&c[b].bar})),k.width(P).height(R).color(c.map(function(a,b){return a.color||C(a,b)}).filter(function(a,b){return!c[b].disabled&&!c[b].bar}));var aa=Z.select(".nv-context .nv-barsWrap").datum(T.length?T:[{values:[]}]),ba=Z.select(".nv-context .nv-linesWrap").datum(U[0].disabled?[{values:[]}]:U);Z.select(".nv-context").attr("transform","translate(0,"+(Q+v.bottom+w.top)+")"),aa.transition().call(m),ba.transition().call(k),u.x(e).on("brush",M),E&&u.extent(E);var ca=Z.select(".nv-brushBackground").selectAll("g").data([E||u.extent()]),da=ca.enter().append("g");da.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",R),da.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",R);var ea=Z.select(".nv-x.nv-brush").call(u);ea.selectAll("rect").attr("height",R),ea.selectAll(".resize").append("path").attr("d",G),o.ticks(P/100).tickSize(-R,0),Z.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+h.range()[0]+")"),Z.select(".nv-context .nv-x.nv-axis").transition().call(o),r.scale(h).ticks(R/36).tickSize(-P,0),Z.select(".nv-context .nv-y1.nv-axis").style("opacity",T.length?1:0).attr("transform","translate(0,"+e.range()[0]+")"),Z.select(".nv-context .nv-y1.nv-axis").transition().call(r),s.scale(i).ticks(R/36).tickSize(T.length?0:-P,0),Z.select(".nv-context .nv-y2.nv-axis").style("opacity",U.length?1:0).attr("transform","translate("+e.range()[1]+",0)"),Z.select(".nv-context .nv-y2.nv-axis").transition().call(s),t.dispatch.on("stateChange",function(b){a.update()}),I.on("tooltipShow",function(a){F&&K(a,O.parentNode)}),M()}),a}var b,d,e,f,g,h,i,j=c.models.line(),k=c.models.line(),l=c.models.historicalBar(),m=c.models.historicalBar(),n=c.models.axis(),o=c.models.axis(),p=c.models.axis(),q=c.models.axis(),r=c.models.axis(),s=c.models.axis(),t=c.models.legend(),u=d3.svg.brush(),v={top:30,right:30,bottom:30,left:60},w={top:0,right:30,bottom:20,left:60},x=null,y=null,z=100,A=function(a){return a.x},B=function(a){return a.y},C=c.utils.defaultColor(),D=!0,E=null,F=!0,G=function(a,b,c,d,e){return"<h3>"+a+"</h3><p>"+c+" at "+b+"</p>"},H="No Data Available.",I=d3.dispatch("tooltipShow","tooltipHide","brush"),J=0;j.clipEdge(!0),k.interactive(!1),n.orient("bottom").tickPadding(5),p.orient("left"),q.orient("right"),o.orient("bottom").tickPadding(5),r.orient("left"),s.orient("right");var K=function(d,e){b&&(d.pointIndex+=Math.ceil(b[0]));var f=d.pos[0]+(e.offsetLeft||0),g=d.pos[1]+(e.offsetTop||0),h=n.tickFormat()(j.x()(d.point,d.pointIndex)),i=(d.series.bar?p:q).tickFormat()(j.y()(d.point,d.pointIndex)),k=G(d.series.key,h,i,d,a);c.tooltip.show([f,g],k,d.value<0?"n":"s",null,e)};return j.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+v.left,a.pos[1]+v.top],I.tooltipShow(a)}),j.dispatch.on("elementMouseout.tooltip",function(a){I.tooltipHide(a)}),l.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+v.left,a.pos[1]+v.top],I.tooltipShow(a)}),l.dispatch.on("elementMouseout.tooltip",function(a){I.tooltipHide(a)}),I.on("tooltipHide",function(){F&&c.tooltip.cleanup()}),a.dispatch=I,a.legend=t,a.lines=j,a.lines2=k,a.bars=l,a.bars2=m,a.xAxis=n,a.x2Axis=o,a.y1Axis=p,a.y2Axis=q,a.y3Axis=r,a.y4Axis=s,d3.rebind(a,j,"defined","size","clipVoronoi","interpolate"),a.options=c.utils.optionsFunc.bind(a),a.x=function(b){return arguments.length?(A=b,j.x(b),l.x(b),a):A},a.y=function(b){return arguments.length?(B=b,j.y(b),l.y(b),a):B},a.margin=function(b){return arguments.length?(v.top="undefined"!=typeof b.top?b.top:v.top,v.right="undefined"!=typeof b.right?b.right:v.right,v.bottom="undefined"!=typeof b.bottom?b.bottom:v.bottom,v.left="undefined"!=typeof b.left?b.left:v.left,a):v},a.width=function(b){return arguments.length?(x=b,a):x},a.height=function(b){return arguments.length?(y=b,a):y},a.color=function(b){return arguments.length?(C=c.utils.getColor(b),t.color(C),a):C},a.showLegend=function(b){return arguments.length?(D=b,a):D},a.tooltips=function(b){return arguments.length?(F=b,a):F},a.tooltipContent=function(b){return arguments.length?(G=b,a):G},a.noData=function(b){return arguments.length?(H=b,a):H},a.brushExtent=function(b){return arguments.length?(E=b,a):E},a},c.models.multiBar=function(){"use strict";function a(c){return c.each(function(a){var c=k-j.left-j.right,B=l-j.top-j.bottom,C=d3.select(this);w&&a.length&&(w=[{values:a[0].values.map(function(a){return{x:a.x,y:0,series:a.series,size:.01}})}]),t&&(a=d3.layout.stack().offset(u).values(function(a){return a.values}).y(q)(!a.length&&w?w:a)),a.forEach(function(a,b){a.values.forEach(function(a){a.series=b})}),t&&a[0].values.map(function(b,c){var d=0,e=0;a.map(function(a){var b=a.values[c];b.size=Math.abs(b.y),b.y<0?(b.y1=e,e-=b.size):(b.y1=b.size+d,d+=b.size)})});var D=d&&e?[]:a.map(function(a){return a.values.map(function(a,b){return{x:p(a,b),y:q(a,b),y0:a.y0,y1:a.y1}})});m.domain(d||d3.merge(D).map(function(a){return a.x})).rangeBands(f||[0,c],z),n.domain(e||d3.extent(d3.merge(D).map(function(a){return t?a.y>0?a.y1:a.y1+a.y:a.y}).concat(r))).range(g||[B,0]),m.domain()[0]===m.domain()[1]&&(m.domain()[0]?m.domain([m.domain()[0]-.01*m.domain()[0],m.domain()[1]+.01*m.domain()[1]]):m.domain([-1,1])),n.domain()[0]===n.domain()[1]&&(n.domain()[0]?n.domain([n.domain()[0]+.01*n.domain()[0],n.domain()[1]-.01*n.domain()[1]]):n.domain([-1,1])),h=h||m,i=i||n;var E=C.selectAll("g.nv-wrap.nv-multibar").data([a]),F=E.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar"),G=F.append("defs"),H=F.append("g"),I=E.select("g");H.append("g").attr("class","nv-groups"),E.attr("transform","translate("+j.left+","+j.top+")"),G.append("clipPath").attr("id","nv-edge-clip-"+o).append("rect"),E.select("#nv-edge-clip-"+o+" rect").attr("width",c).attr("height",B),I.attr("clip-path",s?"url(#nv-edge-clip-"+o+")":"");var J=E.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a,b){return b});J.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),J.exit().transition().selectAll("rect.nv-bar").delay(function(b,c){return c*y/a[0].values.length}).attr("y",function(a){return i(t?a.y0:0)}).attr("height",0).remove(),J.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover}).style("fill",function(a,b){return v(a,b)}).style("stroke",function(a,b){return v(a,b)}),J.transition().style("stroke-opacity",1).style("fill-opacity",.75);var K=J.selectAll("rect.nv-bar").data(function(b){return w&&!a.length?w.values:b.values});K.exit().remove();K.enter().append("rect").attr("class",function(a,b){return q(a,b)<0?"nv-bar negative":"nv-bar positive"}).attr("x",function(b,c,d){return t?0:d*m.rangeBand()/a.length}).attr("y",function(a){return i(t?a.y0:0)}).attr("height",0).attr("width",m.rangeBand()/(t?1:a.length)).attr("transform",function(a,b){return"translate("+m(p(a,b))+",0)"});K.style("fill",function(a,b,c){return v(a,c,b)}).style("stroke",function(a,b,c){return v(a,c,b)}).on("mouseover",function(b,c){d3.select(this).classed("hover",!0),A.elementMouseover({value:q(b,c),point:b,series:a[b.series],pos:[m(p(b,c))+m.rangeBand()*(t?a.length/2:b.series+.5)/a.length,n(q(b,c)+(t?b.y0:0))],pointIndex:c,seriesIndex:b.series,e:d3.event})}).on("mouseout",function(b,c){d3.select(this).classed("hover",!1),A.elementMouseout({value:q(b,c),point:b,series:a[b.series],pointIndex:c,seriesIndex:b.series,e:d3.event})}).on("click",function(b,c){A.elementClick({value:q(b,c),point:b,series:a[b.series],pos:[m(p(b,c))+m.rangeBand()*(t?a.length/2:b.series+.5)/a.length,n(q(b,c)+(t?b.y0:0))],pointIndex:c,seriesIndex:b.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(b,c){A.elementDblClick({value:q(b,c),point:b,series:a[b.series],pos:[m(p(b,c))+m.rangeBand()*(t?a.length/2:b.series+.5)/a.length,n(q(b,c)+(t?b.y0:0))],pointIndex:c,seriesIndex:b.series,e:d3.event}),d3.event.stopPropagation()}),K.attr("class",function(a,b){return q(a,b)<0?"nv-bar negative":"nv-bar positive"}).transition().attr("transform",function(a,b){return"translate("+m(p(a,b))+",0)"}),x&&(b||(b=a.map(function(){return!0})),K.style("fill",function(a,c,d){return d3.rgb(x(a,c)).darker(b.map(function(a,b){return b}).filter(function(a,c){return!b[c]})[d]).toString()}).style("stroke",function(a,c,d){return d3.rgb(x(a,c)).darker(b.map(function(a,b){return b}).filter(function(a,c){return!b[c]})[d]).toString()})),t?K.transition().delay(function(b,c){return c*y/a[0].values.length}).attr("y",function(a,b){return n(t?a.y1:0)}).attr("height",function(a,b){return Math.max(Math.abs(n(a.y+(t?a.y0:0))-n(t?a.y0:0)),1)}).attr("x",function(b,c){return t?0:b.series*m.rangeBand()/a.length}).attr("width",m.rangeBand()/(t?1:a.length)):K.transition().delay(function(b,c){return c*y/a[0].values.length}).attr("x",function(b,c){return b.series*m.rangeBand()/a.length}).attr("width",m.rangeBand()/a.length).attr("y",function(a,b){return q(a,b)<0?n(0):n(0)-n(q(a,b))<1?n(0)-1:n(q(a,b))||0}).attr("height",function(a,b){return Math.max(Math.abs(n(q(a,b))-n(0)),1)||0}),h=m.copy(),i=n.copy()}),a}var b,d,e,f,g,h,i,j={top:0,right:0,bottom:0,left:0},k=960,l=500,m=d3.scale.ordinal(),n=d3.scale.linear(),o=Math.floor(1e4*Math.random()),p=function(a){return a.x},q=function(a){return a.y},r=[0],s=!0,t=!1,u="zero",v=c.utils.defaultColor(),w=!1,x=null,y=1200,z=.1,A=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return a.dispatch=A,a.options=c.utils.optionsFunc.bind(a),a.x=function(b){return arguments.length?(p=b,a):p},a.y=function(b){return arguments.length?(q=b,a):q},a.margin=function(b){return arguments.length?(j.top="undefined"!=typeof b.top?b.top:j.top,j.right="undefined"!=typeof b.right?b.right:j.right,j.bottom="undefined"!=typeof b.bottom?b.bottom:j.bottom,j.left="undefined"!=typeof b.left?b.left:j.left,a):j},a.width=function(b){return arguments.length?(k=b,a):k},a.height=function(b){return arguments.length?(l=b,a):l},a.xScale=function(b){return arguments.length?(m=b,a):m},a.yScale=function(b){return arguments.length?(n=b,a):n},a.xDomain=function(b){return arguments.length?(d=b,a):d},a.yDomain=function(b){return arguments.length?(e=b,a):e},a.xRange=function(b){return arguments.length?(f=b,a):f},a.yRange=function(b){return arguments.length?(g=b,a):g},a.forceY=function(b){return arguments.length?(r=b,a):r},a.stacked=function(b){return arguments.length?(t=b,a):t},a.stackOffset=function(b){return arguments.length?(u=b,a):u},a.clipEdge=function(b){return arguments.length?(s=b,a):s},a.color=function(b){return arguments.length?(v=c.utils.getColor(b),a):v},a.barColor=function(b){return arguments.length?(x=c.utils.getColor(b),a):x},a.disabled=function(c){return arguments.length?(b=c,a):b},a.id=function(b){return arguments.length?(o=b,a):o},a.hideable=function(b){return arguments.length?(w=b,a):w},a.delay=function(b){return arguments.length?(y=b,a):y},a.groupSpacing=function(b){return arguments.length?(z=b,a):z},a},c.models.multiBarChart=function(){"use strict";function a(c){return c.each(function(c){var w=d3.select(this),E=this,F=(k||parseInt(w.style("width"))||960)-j.left-j.right,G=(l||parseInt(w.style("height"))||400)-j.top-j.bottom;if(a.update=function(){w.transition().duration(C).call(a)},a.container=this,x.disabled=c.map(function(a){return!!a.disabled}),!y){var H;y={};for(H in x)x[H]instanceof Array?y[H]=x[H].slice(0):y[H]=x[H]}if(!(c&&c.length&&c.filter(function(a){return a.values.length}).length)){var I=w.selectAll(".nv-noData").data([z]);return I.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),I.attr("x",j.left+F/2).attr("y",j.top+G/2).text(function(a){return a}),a}w.selectAll(".nv-noData").remove(),b=e.xScale(),d=e.yScale();var J=w.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([c]),K=J.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g"),L=J.select("g");if(K.append("g").attr("class","nv-x nv-axis"),K.append("g").attr("class","nv-y nv-axis"),K.append("g").attr("class","nv-barsWrap"),K.append("g").attr("class","nv-legendWrap"),K.append("g").attr("class","nv-controlsWrap"),o&&(h.width(F-B()),e.barColor()&&c.forEach(function(a,b){a.color=d3.rgb("#ccc").darker(1.5*b).toString()}),L.select(".nv-legendWrap").datum(c).call(h),j.top!=h.height()&&(j.top=h.height(),G=(l||parseInt(w.style("height"))||400)-j.top-j.bottom),L.select(".nv-legendWrap").attr("transform","translate("+B()+","+-j.top+")")),n){var M=[{key:"Grouped",disabled:e.stacked()},{key:"Stacked",disabled:!e.stacked()}];i.width(B()).color(["#444","#444","#444"]),L.select(".nv-controlsWrap").datum(M).attr("transform","translate(0,"+-j.top+")").call(i)}J.attr("transform","translate("+j.left+","+j.top+")"),r&&L.select(".nv-y.nv-axis").attr("transform","translate("+F+",0)"),e.disabled(c.map(function(a){return a.disabled})).width(F).height(G).color(c.map(function(a,b){return a.color||m(a,b)}).filter(function(a,b){return!c[b].disabled}));var N=L.select(".nv-barsWrap").datum(c.filter(function(a){return!a.disabled}));if(N.transition().call(e),p){f.scale(b).ticks(F/100).tickSize(-G,0),L.select(".nv-x.nv-axis").attr("transform","translate(0,"+d.range()[0]+")"),L.select(".nv-x.nv-axis").transition().call(f);var O=L.select(".nv-x.nv-axis > g").selectAll("g");if(O.selectAll("line, text").style("opacity",1),t){var P=function(a,b){return"translate("+a+","+b+")"},Q=5,R=17;O.selectAll("text").attr("transform",function(a,b,c){return P(0,c%2==0?Q:R)});var S=d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;L.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",function(a,b){return P(0,0===b||S%2!==0?R:Q)})}s&&O.filter(function(a,b){return b%Math.ceil(c[0].values.length/(F/100))!==0}).selectAll("text, line").style("opacity",0),u&&O.selectAll(".tick text").attr("transform","rotate("+u+" 0,0)").style("text-anchor",u>0?"start":"end"),L.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1)}q&&(g.scale(d).ticks(G/36).tickSize(-F,0),L.select(".nv-y.nv-axis").transition().call(g)),h.dispatch.on("stateChange",function(b){x=b,A.stateChange(x),a.update()}),i.dispatch.on("legendClick",function(b,c){if(b.disabled){switch(M=M.map(function(a){return a.disabled=!0,a}),b.disabled=!1,b.key){case"Grouped":e.stacked(!1);break;case"Stacked":e.stacked(!0)}x.stacked=e.stacked(),A.stateChange(x),a.update()}}),A.on("tooltipShow",function(a){v&&D(a,E.parentNode)}),A.on("changeState",function(b){"undefined"!=typeof b.disabled&&(c.forEach(function(a,c){a.disabled=b.disabled[c]}),x.disabled=b.disabled),"undefined"!=typeof b.stacked&&(e.stacked(b.stacked),x.stacked=b.stacked),a.update()})}),a}var b,d,e=c.models.multiBar(),f=c.models.axis(),g=c.models.axis(),h=c.models.legend(),i=c.models.legend(),j={top:30,right:20,bottom:50,left:60},k=null,l=null,m=c.utils.defaultColor(),n=!0,o=!0,p=!0,q=!0,r=!1,s=!0,t=!1,u=0,v=!0,w=function(a,b,c,d,e){return"<h3>"+a+"</h3><p>"+c+" on "+b+"</p>"},x={stacked:!1},y=null,z="No Data Available.",A=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),B=function(){return n?180:0},C=250;e.stacked(!1),f.orient("bottom").tickPadding(7).highlightZero(!0).showMaxMin(!1).tickFormat(function(a){return a}),g.orient(r?"right":"left").tickFormat(d3.format(",.1f")),i.updateState(!1);var D=function(b,d){var h=b.pos[0]+(d.offsetLeft||0),i=b.pos[1]+(d.offsetTop||0),j=f.tickFormat()(e.x()(b.point,b.pointIndex)),k=g.tickFormat()(e.y()(b.point,b.pointIndex)),l=w(b.series.key,j,k,b,a);c.tooltip.show([h,i],l,b.value<0?"n":"s",null,d)};return e.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+j.left,a.pos[1]+j.top],A.tooltipShow(a)}),e.dispatch.on("elementMouseout.tooltip",function(a){A.tooltipHide(a)}),A.on("tooltipHide",function(){v&&c.tooltip.cleanup()}),a.dispatch=A,a.multibar=e,a.legend=h,a.xAxis=f,a.yAxis=g,d3.rebind(a,e,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","clipEdge","id","stacked","stackOffset","delay","barColor","groupSpacing"),a.options=c.utils.optionsFunc.bind(a),a.margin=function(b){return arguments.length?(j.top="undefined"!=typeof b.top?b.top:j.top,j.right="undefined"!=typeof b.right?b.right:j.right,j.bottom="undefined"!=typeof b.bottom?b.bottom:j.bottom,j.left="undefined"!=typeof b.left?b.left:j.left,a):j},a.width=function(b){return arguments.length?(k=b,a):k},a.height=function(b){return arguments.length?(l=b,a):l},a.color=function(b){return arguments.length?(m=c.utils.getColor(b),h.color(m),a):m},a.showControls=function(b){return arguments.length?(n=b,a):n},a.showLegend=function(b){return arguments.length?(o=b,a):o},a.showXAxis=function(b){return arguments.length?(p=b,a):p},a.showYAxis=function(b){return arguments.length?(q=b,a):q},a.rightAlignYAxis=function(b){return arguments.length?(r=b,g.orient(b?"right":"left"),a):r},a.reduceXTicks=function(b){return arguments.length?(s=b,a):s},a.rotateLabels=function(b){return arguments.length?(u=b,a):u},a.staggerLabels=function(b){return arguments.length?(t=b,a):t},a.tooltip=function(b){return arguments.length?(w=b,a):w},a.tooltips=function(b){return arguments.length?(v=b,a):v},a.tooltipContent=function(b){return arguments.length?(w=b,a):w},a.state=function(b){return arguments.length?(x=b,a):x},a.defaultState=function(b){return arguments.length?(y=b,a):y},a.noData=function(b){return arguments.length?(z=b,a):z},a.transitionDuration=function(b){return arguments.length?(C=b,a):C},a},c.models.multiBarHorizontal=function(){"use strict";function a(c){return c.each(function(a){var c=k-j.left-j.right,m=l-j.top-j.bottom;d3.select(this);u&&(a=d3.layout.stack().offset("zero").values(function(a){
return a.values}).y(q)(a)),a.forEach(function(a,b){a.values.forEach(function(a){a.series=b})}),u&&a[0].values.map(function(b,c){var d=0,e=0;a.map(function(a){var b=a.values[c];b.size=Math.abs(b.y),b.y<0?(b.y1=e-b.size,e-=b.size):(b.y1=d,d+=b.size)})});var z=d&&e?[]:a.map(function(a){return a.values.map(function(a,b){return{x:p(a,b),y:q(a,b),y0:a.y0,y1:a.y1}})});n.domain(d||d3.merge(z).map(function(a){return a.x})).rangeBands(f||[0,m],.1),o.domain(e||d3.extent(d3.merge(z).map(function(a){return u?a.y>0?a.y1+a.y:a.y1:a.y}).concat(r))),v&&!u?o.range(g||[o.domain()[0]<0?x:0,c-(o.domain()[1]>0?x:0)]):o.range(g||[0,c]),h=h||n,i=i||d3.scale.linear().domain(o.domain()).range([o(0),o(0)]);var B=d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([a]),C=B.enter().append("g").attr("class","nvd3 nv-wrap nv-multibarHorizontal"),D=(C.append("defs"),C.append("g"));B.select("g");D.append("g").attr("class","nv-groups"),B.attr("transform","translate("+j.left+","+j.top+")");var E=B.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a,b){return b});E.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),E.exit().transition().style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),E.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover}).style("fill",function(a,b){return s(a,b)}).style("stroke",function(a,b){return s(a,b)}),E.transition().style("stroke-opacity",1).style("fill-opacity",.75);var F=E.selectAll("g.nv-bar").data(function(a){return a.values});F.exit().remove();var G=F.enter().append("g").attr("transform",function(b,c,d){return"translate("+i(u?b.y0:0)+","+(u?0:d*n.rangeBand()/a.length+n(p(b,c)))+")"});G.append("rect").attr("width",0).attr("height",n.rangeBand()/(u?1:a.length)),F.on("mouseover",function(b,c){d3.select(this).classed("hover",!0),A.elementMouseover({value:q(b,c),point:b,series:a[b.series],pos:[o(q(b,c)+(u?b.y0:0)),n(p(b,c))+n.rangeBand()*(u?a.length/2:b.series+.5)/a.length],pointIndex:c,seriesIndex:b.series,e:d3.event})}).on("mouseout",function(b,c){d3.select(this).classed("hover",!1),A.elementMouseout({value:q(b,c),point:b,series:a[b.series],pointIndex:c,seriesIndex:b.series,e:d3.event})}).on("click",function(b,c){A.elementClick({value:q(b,c),point:b,series:a[b.series],pos:[n(p(b,c))+n.rangeBand()*(u?a.length/2:b.series+.5)/a.length,o(q(b,c)+(u?b.y0:0))],pointIndex:c,seriesIndex:b.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(b,c){A.elementDblClick({value:q(b,c),point:b,series:a[b.series],pos:[n(p(b,c))+n.rangeBand()*(u?a.length/2:b.series+.5)/a.length,o(q(b,c)+(u?b.y0:0))],pointIndex:c,seriesIndex:b.series,e:d3.event}),d3.event.stopPropagation()}),G.append("text"),v&&!u?(F.select("text").attr("text-anchor",function(a,b){return q(a,b)<0?"end":"start"}).attr("y",n.rangeBand()/(2*a.length)).attr("dy",".32em").text(function(a,b){return y(q(a,b))}),F.transition().select("text").attr("x",function(a,b){return q(a,b)<0?-4:o(q(a,b))-o(0)+4})):F.selectAll("text").text(""),w&&!u?(G.append("text").classed("nv-bar-label",!0),F.select("text.nv-bar-label").attr("text-anchor",function(a,b){return q(a,b)<0?"start":"end"}).attr("y",n.rangeBand()/(2*a.length)).attr("dy",".32em").text(function(a,b){return p(a,b)}),F.transition().select("text.nv-bar-label").attr("x",function(a,b){return q(a,b)<0?o(0)-o(q(a,b))+4:-4})):F.selectAll("text.nv-bar-label").text(""),F.attr("class",function(a,b){return q(a,b)<0?"nv-bar negative":"nv-bar positive"}),t&&(b||(b=a.map(function(){return!0})),F.style("fill",function(a,c,d){return d3.rgb(t(a,c)).darker(b.map(function(a,b){return b}).filter(function(a,c){return!b[c]})[d]).toString()}).style("stroke",function(a,c,d){return d3.rgb(t(a,c)).darker(b.map(function(a,b){return b}).filter(function(a,c){return!b[c]})[d]).toString()})),u?F.transition().attr("transform",function(a,b){return"translate("+o(a.y1)+","+n(p(a,b))+")"}).select("rect").attr("width",function(a,b){return Math.abs(o(q(a,b)+a.y0)-o(a.y0))}).attr("height",n.rangeBand()):F.transition().attr("transform",function(b,c){return"translate("+o(q(b,c)<0?q(b,c):0)+","+(b.series*n.rangeBand()/a.length+n(p(b,c)))+")"}).select("rect").attr("height",n.rangeBand()/a.length).attr("width",function(a,b){return Math.max(Math.abs(o(q(a,b))-o(0)),1)}),h=n.copy(),i=o.copy()}),a}var b,d,e,f,g,h,i,j={top:0,right:0,bottom:0,left:0},k=960,l=500,m=Math.floor(1e4*Math.random()),n=d3.scale.ordinal(),o=d3.scale.linear(),p=function(a){return a.x},q=function(a){return a.y},r=[0],s=c.utils.defaultColor(),t=null,u=!1,v=!1,w=!1,x=60,y=d3.format(",.2f"),z=1200,A=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return a.dispatch=A,a.options=c.utils.optionsFunc.bind(a),a.x=function(b){return arguments.length?(p=b,a):p},a.y=function(b){return arguments.length?(q=b,a):q},a.margin=function(b){return arguments.length?(j.top="undefined"!=typeof b.top?b.top:j.top,j.right="undefined"!=typeof b.right?b.right:j.right,j.bottom="undefined"!=typeof b.bottom?b.bottom:j.bottom,j.left="undefined"!=typeof b.left?b.left:j.left,a):j},a.width=function(b){return arguments.length?(k=b,a):k},a.height=function(b){return arguments.length?(l=b,a):l},a.xScale=function(b){return arguments.length?(n=b,a):n},a.yScale=function(b){return arguments.length?(o=b,a):o},a.xDomain=function(b){return arguments.length?(d=b,a):d},a.yDomain=function(b){return arguments.length?(e=b,a):e},a.xRange=function(b){return arguments.length?(f=b,a):f},a.yRange=function(b){return arguments.length?(g=b,a):g},a.forceY=function(b){return arguments.length?(r=b,a):r},a.stacked=function(b){return arguments.length?(u=b,a):u},a.color=function(b){return arguments.length?(s=c.utils.getColor(b),a):s},a.barColor=function(b){return arguments.length?(t=c.utils.getColor(b),a):t},a.disabled=function(c){return arguments.length?(b=c,a):b},a.id=function(b){return arguments.length?(m=b,a):m},a.delay=function(b){return arguments.length?(z=b,a):z},a.showValues=function(b){return arguments.length?(v=b,a):v},a.showBarLabels=function(b){return arguments.length?(w=b,a):w},a.valueFormat=function(b){return arguments.length?(y=b,a):y},a.valuePadding=function(b){return arguments.length?(x=b,a):x},a},c.models.multiBarHorizontalChart=function(){"use strict";function a(c){return c.each(function(c){var r=d3.select(this),t=this,B=(k||parseInt(r.style("width"))||960)-j.left-j.right,C=(l||parseInt(r.style("height"))||400)-j.top-j.bottom;if(a.update=function(){r.transition().duration(z).call(a)},a.container=this,u.disabled=c.map(function(a){return!!a.disabled}),!v){var D;v={};for(D in u)u[D]instanceof Array?v[D]=u[D].slice(0):v[D]=u[D]}if(!(c&&c.length&&c.filter(function(a){return a.values.length}).length)){var E=r.selectAll(".nv-noData").data([w]);return E.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),E.attr("x",j.left+B/2).attr("y",j.top+C/2).text(function(a){return a}),a}r.selectAll(".nv-noData").remove(),b=e.xScale(),d=e.yScale();var F=r.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([c]),G=F.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarHorizontalChart").append("g"),H=F.select("g");if(G.append("g").attr("class","nv-x nv-axis"),G.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),G.append("g").attr("class","nv-barsWrap"),G.append("g").attr("class","nv-legendWrap"),G.append("g").attr("class","nv-controlsWrap"),o&&(h.width(B-y()),e.barColor()&&c.forEach(function(a,b){a.color=d3.rgb("#ccc").darker(1.5*b).toString()}),H.select(".nv-legendWrap").datum(c).call(h),j.top!=h.height()&&(j.top=h.height(),C=(l||parseInt(r.style("height"))||400)-j.top-j.bottom),H.select(".nv-legendWrap").attr("transform","translate("+y()+","+-j.top+")")),n){var I=[{key:"Grouped",disabled:e.stacked()},{key:"Stacked",disabled:!e.stacked()}];i.width(y()).color(["#444","#444","#444"]),H.select(".nv-controlsWrap").datum(I).attr("transform","translate(0,"+-j.top+")").call(i)}F.attr("transform","translate("+j.left+","+j.top+")"),e.disabled(c.map(function(a){return a.disabled})).width(B).height(C).color(c.map(function(a,b){return a.color||m(a,b)}).filter(function(a,b){return!c[b].disabled}));var J=H.select(".nv-barsWrap").datum(c.filter(function(a){return!a.disabled}));if(J.transition().call(e),p){f.scale(b).ticks(C/24).tickSize(-B,0),H.select(".nv-x.nv-axis").transition().call(f);var K=H.select(".nv-x.nv-axis").selectAll("g");K.selectAll("line, text")}q&&(g.scale(d).ticks(B/100).tickSize(-C,0),H.select(".nv-y.nv-axis").attr("transform","translate(0,"+C+")"),H.select(".nv-y.nv-axis").transition().call(g)),H.select(".nv-zeroLine line").attr("x1",d(0)).attr("x2",d(0)).attr("y1",0).attr("y2",-C),h.dispatch.on("stateChange",function(b){u=b,x.stateChange(u),a.update()}),i.dispatch.on("legendClick",function(b,c){if(b.disabled){switch(I=I.map(function(a){return a.disabled=!0,a}),b.disabled=!1,b.key){case"Grouped":e.stacked(!1);break;case"Stacked":e.stacked(!0)}u.stacked=e.stacked(),x.stateChange(u),a.update()}}),x.on("tooltipShow",function(a){s&&A(a,t.parentNode)}),x.on("changeState",function(b){"undefined"!=typeof b.disabled&&(c.forEach(function(a,c){a.disabled=b.disabled[c]}),u.disabled=b.disabled),"undefined"!=typeof b.stacked&&(e.stacked(b.stacked),u.stacked=b.stacked),a.update()})}),a}var b,d,e=c.models.multiBarHorizontal(),f=c.models.axis(),g=c.models.axis(),h=c.models.legend().height(30),i=c.models.legend().height(30),j={top:30,right:20,bottom:50,left:60},k=null,l=null,m=c.utils.defaultColor(),n=!0,o=!0,p=!0,q=!0,r=!1,s=!0,t=function(a,b,c,d,e){return"<h3>"+a+" - "+b+"</h3><p>"+c+"</p>"},u={stacked:r},v=null,w="No Data Available.",x=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),y=function(){return n?180:0},z=250;e.stacked(r),f.orient("left").tickPadding(5).highlightZero(!1).showMaxMin(!1).tickFormat(function(a){return a}),g.orient("bottom").tickFormat(d3.format(",.1f")),i.updateState(!1);var A=function(b,d){var h=b.pos[0]+(d.offsetLeft||0),i=b.pos[1]+(d.offsetTop||0),j=f.tickFormat()(e.x()(b.point,b.pointIndex)),k=g.tickFormat()(e.y()(b.point,b.pointIndex)),l=t(b.series.key,j,k,b,a);c.tooltip.show([h,i],l,b.value<0?"e":"w",null,d)};return e.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+j.left,a.pos[1]+j.top],x.tooltipShow(a)}),e.dispatch.on("elementMouseout.tooltip",function(a){x.tooltipHide(a)}),x.on("tooltipHide",function(){s&&c.tooltip.cleanup()}),a.dispatch=x,a.multibar=e,a.legend=h,a.xAxis=f,a.yAxis=g,d3.rebind(a,e,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","clipEdge","id","delay","showValues","showBarLabels","valueFormat","stacked","barColor"),a.options=c.utils.optionsFunc.bind(a),a.margin=function(b){return arguments.length?(j.top="undefined"!=typeof b.top?b.top:j.top,j.right="undefined"!=typeof b.right?b.right:j.right,j.bottom="undefined"!=typeof b.bottom?b.bottom:j.bottom,j.left="undefined"!=typeof b.left?b.left:j.left,a):j},a.width=function(b){return arguments.length?(k=b,a):k},a.height=function(b){return arguments.length?(l=b,a):l},a.color=function(b){return arguments.length?(m=c.utils.getColor(b),h.color(m),a):m},a.showControls=function(b){return arguments.length?(n=b,a):n},a.showLegend=function(b){return arguments.length?(o=b,a):o},a.showXAxis=function(b){return arguments.length?(p=b,a):p},a.showYAxis=function(b){return arguments.length?(q=b,a):q},a.tooltip=function(b){return arguments.length?(t=b,a):t},a.tooltips=function(b){return arguments.length?(s=b,a):s},a.tooltipContent=function(b){return arguments.length?(t=b,a):t},a.state=function(b){return arguments.length?(u=b,a):u},a.defaultState=function(b){return arguments.length?(v=b,a):v},a.noData=function(b){return arguments.length?(w=b,a):w},a.transitionDuration=function(b){return arguments.length?(z=b,a):z},a},c.models.multiChart=function(){"use strict";function a(c){return c.each(function(c){var l=d3.select(this),A=this;a.update=function(){l.transition().call(a)},a.container=this;var B=(h||parseInt(l.style("width"))||960)-f.left-f.right,C=(i||parseInt(l.style("height"))||400)-f.top-f.bottom,D=c.filter(function(a){return!a.disabled&&"line"==a.type&&1==a.yAxis}),E=c.filter(function(a){return!a.disabled&&"line"==a.type&&2==a.yAxis}),F=c.filter(function(a){return!a.disabled&&"bar"==a.type&&1==a.yAxis}),G=c.filter(function(a){return!a.disabled&&"bar"==a.type&&2==a.yAxis}),H=c.filter(function(a){return!a.disabled&&"area"==a.type&&1==a.yAxis}),I=c.filter(function(a){return!a.disabled&&"area"==a.type&&2==a.yAxis}),J=c.filter(function(a){return!a.disabled&&1==a.yAxis}).map(function(a){return a.values.map(function(a,b){return{x:a.x,y:a.y}})}),K=c.filter(function(a){return!a.disabled&&2==a.yAxis}).map(function(a){return a.values.map(function(a,b){return{x:a.x,y:a.y}})});b.domain(d3.extent(d3.merge(J.concat(K)),function(a){return a.x})).range([0,B]);var L=l.selectAll("g.wrap.multiChart").data([c]),M=L.enter().append("g").attr("class","wrap nvd3 multiChart").append("g");M.append("g").attr("class","x axis"),M.append("g").attr("class","y1 axis"),M.append("g").attr("class","y2 axis"),M.append("g").attr("class","lines1Wrap"),M.append("g").attr("class","lines2Wrap"),M.append("g").attr("class","bars1Wrap"),M.append("g").attr("class","bars2Wrap"),M.append("g").attr("class","stack1Wrap"),M.append("g").attr("class","stack2Wrap"),M.append("g").attr("class","legendWrap");var N=L.select("g");j&&(x.width(B/2),N.select(".legendWrap").datum(c.map(function(a){return a.originalKey=void 0===a.originalKey?a.key:a.originalKey,a.key=a.originalKey+(1==a.yAxis?"":" (right axis)"),a})).call(x),f.top!=x.height()&&(f.top=x.height(),C=(i||parseInt(l.style("height"))||400)-f.top-f.bottom),N.select(".legendWrap").attr("transform","translate("+B/2+","+-f.top+")")),o.width(B).height(C).interpolate("monotone").color(c.map(function(a,b){return a.color||g[b%g.length]}).filter(function(a,b){return!c[b].disabled&&1==c[b].yAxis&&"line"==c[b].type})),p.width(B).height(C).interpolate("monotone").color(c.map(function(a,b){return a.color||g[b%g.length]}).filter(function(a,b){return!c[b].disabled&&2==c[b].yAxis&&"line"==c[b].type})),q.width(B).height(C).color(c.map(function(a,b){return a.color||g[b%g.length]}).filter(function(a,b){return!c[b].disabled&&1==c[b].yAxis&&"bar"==c[b].type})),r.width(B).height(C).color(c.map(function(a,b){return a.color||g[b%g.length]}).filter(function(a,b){return!c[b].disabled&&2==c[b].yAxis&&"bar"==c[b].type})),s.width(B).height(C).color(c.map(function(a,b){return a.color||g[b%g.length]}).filter(function(a,b){return!c[b].disabled&&1==c[b].yAxis&&"area"==c[b].type})),t.width(B).height(C).color(c.map(function(a,b){return a.color||g[b%g.length]}).filter(function(a,b){return!c[b].disabled&&2==c[b].yAxis&&"area"==c[b].type})),N.attr("transform","translate("+f.left+","+f.top+")");var O=N.select(".lines1Wrap").datum(D),P=N.select(".bars1Wrap").datum(F),Q=N.select(".stack1Wrap").datum(H),R=N.select(".lines2Wrap").datum(E),S=N.select(".bars2Wrap").datum(G),T=N.select(".stack2Wrap").datum(I),U=H.length?H.map(function(a){return a.values}).reduce(function(a,b){return a.map(function(a,c){return{x:a.x,y:a.y+b[c].y}})}).concat([{x:0,y:0}]):[],V=I.length?I.map(function(a){return a.values}).reduce(function(a,b){return a.map(function(a,c){return{x:a.x,y:a.y+b[c].y}})}).concat([{x:0,y:0}]):[];m.domain(d||d3.extent(d3.merge(J).concat(U),function(a){return a.y})).range([0,C]),n.domain(e||d3.extent(d3.merge(K).concat(V),function(a){return a.y})).range([0,C]),o.yDomain(m.domain()),q.yDomain(m.domain()),s.yDomain(m.domain()),p.yDomain(n.domain()),r.yDomain(n.domain()),t.yDomain(n.domain()),H.length&&d3.transition(Q).call(s),I.length&&d3.transition(T).call(t),F.length&&d3.transition(P).call(q),G.length&&d3.transition(S).call(r),D.length&&d3.transition(O).call(o),E.length&&d3.transition(R).call(p),u.ticks(B/100).tickSize(-C,0),N.select(".x.axis").attr("transform","translate(0,"+C+")"),d3.transition(N.select(".x.axis")).call(u),v.ticks(C/36).tickSize(-B,0),d3.transition(N.select(".y1.axis")).call(v),w.ticks(C/36).tickSize(-B,0),d3.transition(N.select(".y2.axis")).call(w),N.select(".y2.axis").style("opacity",K.length?1:0).attr("transform","translate("+b.range()[1]+",0)"),x.dispatch.on("stateChange",function(b){a.update()}),y.on("tooltipShow",function(a){k&&z(a,A.parentNode)})}),a}var b,d,e,f={top:30,right:20,bottom:50,left:60},g=d3.scale.category20().range(),h=null,i=null,j=!0,k=!0,l=function(a,b,c,d,e){return"<h3>"+a+"</h3><p>"+c+" at "+b+"</p>"},b=d3.scale.linear(),m=d3.scale.linear(),n=d3.scale.linear(),o=c.models.line().yScale(m),p=c.models.line().yScale(n),q=c.models.multiBar().stacked(!1).yScale(m),r=c.models.multiBar().stacked(!1).yScale(n),s=c.models.stackedArea().yScale(m),t=c.models.stackedArea().yScale(n),u=c.models.axis().scale(b).orient("bottom").tickPadding(5),v=c.models.axis().scale(m).orient("left"),w=c.models.axis().scale(n).orient("right"),x=c.models.legend().height(30),y=d3.dispatch("tooltipShow","tooltipHide"),z=function(b,d){var e=b.pos[0]+(d.offsetLeft||0),f=b.pos[1]+(d.offsetTop||0),g=u.tickFormat()(o.x()(b.point,b.pointIndex)),h=(2==b.series.yAxis?w:v).tickFormat()(o.y()(b.point,b.pointIndex)),i=l(b.series.key,g,h,b,a);c.tooltip.show([e,f],i,void 0,void 0,d.offsetParent)};return o.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+f.left,a.pos[1]+f.top],y.tooltipShow(a)}),o.dispatch.on("elementMouseout.tooltip",function(a){y.tooltipHide(a)}),p.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+f.left,a.pos[1]+f.top],y.tooltipShow(a)}),p.dispatch.on("elementMouseout.tooltip",function(a){y.tooltipHide(a)}),q.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+f.left,a.pos[1]+f.top],y.tooltipShow(a)}),q.dispatch.on("elementMouseout.tooltip",function(a){y.tooltipHide(a)}),r.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+f.left,a.pos[1]+f.top],y.tooltipShow(a)}),r.dispatch.on("elementMouseout.tooltip",function(a){y.tooltipHide(a)}),s.dispatch.on("tooltipShow",function(a){return Math.round(100*s.y()(a.point))?(a.pos=[a.pos[0]+f.left,a.pos[1]+f.top],void y.tooltipShow(a)):(setTimeout(function(){d3.selectAll(".point.hover").classed("hover",!1)},0),!1)}),s.dispatch.on("tooltipHide",function(a){y.tooltipHide(a)}),t.dispatch.on("tooltipShow",function(a){return Math.round(100*t.y()(a.point))?(a.pos=[a.pos[0]+f.left,a.pos[1]+f.top],void y.tooltipShow(a)):(setTimeout(function(){d3.selectAll(".point.hover").classed("hover",!1)},0),!1)}),t.dispatch.on("tooltipHide",function(a){y.tooltipHide(a)}),o.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+f.left,a.pos[1]+f.top],y.tooltipShow(a)}),o.dispatch.on("elementMouseout.tooltip",function(a){y.tooltipHide(a)}),p.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+f.left,a.pos[1]+f.top],y.tooltipShow(a)}),p.dispatch.on("elementMouseout.tooltip",function(a){y.tooltipHide(a)}),y.on("tooltipHide",function(){k&&c.tooltip.cleanup()}),a.dispatch=y,a.lines1=o,a.lines2=p,a.bars1=q,a.bars2=r,a.stack1=s,a.stack2=t,a.xAxis=u,a.yAxis1=v,a.yAxis2=w,a.options=c.utils.optionsFunc.bind(a),a.x=function(b){return arguments.length?(getX=b,o.x(b),q.x(b),a):getX},a.y=function(b){return arguments.length?(getY=b,o.y(b),q.y(b),a):getY},a.yDomain1=function(b){return arguments.length?(d=b,a):d},a.yDomain2=function(b){return arguments.length?(e=b,a):e},a.margin=function(b){return arguments.length?(f=b,a):f},a.width=function(b){return arguments.length?(h=b,a):h},a.height=function(b){return arguments.length?(i=b,a):i},a.color=function(b){return arguments.length?(g=b,x.color(b),a):g},a.showLegend=function(b){return arguments.length?(j=b,a):j},a.tooltips=function(b){return arguments.length?(k=b,a):k},a.tooltipContent=function(b){return arguments.length?(l=b,a):l},a},c.models.ohlcBar=function(){"use strict";function a(c){return c.each(function(a){var c=h-g.left-g.right,w=i-g.top-g.bottom,y=d3.select(this);k.domain(b||d3.extent(a[0].values.map(m).concat(s))),u?k.range(e||[.5*c/a[0].values.length,c*(a[0].values.length-.5)/a[0].values.length]):k.range(e||[0,c]),l.domain(d||[d3.min(a[0].values.map(r).concat(t)),d3.max(a[0].values.map(q).concat(t))]).range(f||[w,0]),k.domain()[0]===k.domain()[1]&&(k.domain()[0]?k.domain([k.domain()[0]-.01*k.domain()[0],k.domain()[1]+.01*k.domain()[1]]):k.domain([-1,1])),l.domain()[0]===l.domain()[1]&&(l.domain()[0]?l.domain([l.domain()[0]+.01*l.domain()[0],l.domain()[1]-.01*l.domain()[1]]):l.domain([-1,1]));var z=d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([a[0].values]),A=z.enter().append("g").attr("class","nvd3 nv-wrap nv-ohlcBar"),B=A.append("defs"),C=A.append("g"),D=z.select("g");C.append("g").attr("class","nv-ticks"),z.attr("transform","translate("+g.left+","+g.top+")"),y.on("click",function(a,b){x.chartClick({data:a,index:b,pos:d3.event,id:j})}),B.append("clipPath").attr("id","nv-chart-clip-path-"+j).append("rect"),z.select("#nv-chart-clip-path-"+j+" rect").attr("width",c).attr("height",w),D.attr("clip-path",v?"url(#nv-chart-clip-path-"+j+")":"");var E=z.select(".nv-ticks").selectAll(".nv-tick").data(function(a){return a});E.exit().remove();E.enter().append("path").attr("class",function(a,b,c){return(o(a,b)>p(a,b)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+c+"-"+b}).attr("d",function(b,d){var e=c/a[0].values.length*.9;return"m0,0l0,"+(l(o(b,d))-l(q(b,d)))+"l"+-e/2+",0l"+e/2+",0l0,"+(l(r(b,d))-l(o(b,d)))+"l0,"+(l(p(b,d))-l(r(b,d)))+"l"+e/2+",0l"+-e/2+",0z"}).attr("transform",function(a,b){return"translate("+k(m(a,b))+","+l(q(a,b))+")"}).on("mouseover",function(b,c){d3.select(this).classed("hover",!0),x.elementMouseover({point:b,series:a[0],pos:[k(m(b,c)),l(n(b,c))],pointIndex:c,seriesIndex:0,e:d3.event})}).on("mouseout",function(b,c){d3.select(this).classed("hover",!1),x.elementMouseout({point:b,series:a[0],pointIndex:c,seriesIndex:0,e:d3.event})}).on("click",function(a,b){x.elementClick({value:n(a,b),data:a,index:b,pos:[k(m(a,b)),l(n(a,b))],e:d3.event,id:j}),d3.event.stopPropagation()}).on("dblclick",function(a,b){x.elementDblClick({value:n(a,b),data:a,index:b,pos:[k(m(a,b)),l(n(a,b))],e:d3.event,id:j}),d3.event.stopPropagation()});E.attr("class",function(a,b,c){return(o(a,b)>p(a,b)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+c+"-"+b}),d3.transition(E).attr("transform",function(a,b){return"translate("+k(m(a,b))+","+l(q(a,b))+")"}).attr("d",function(b,d){var e=c/a[0].values.length*.9;return"m0,0l0,"+(l(o(b,d))-l(q(b,d)))+"l"+-e/2+",0l"+e/2+",0l0,"+(l(r(b,d))-l(o(b,d)))+"l0,"+(l(p(b,d))-l(r(b,d)))+"l"+e/2+",0l"+-e/2+",0z"})}),a}var b,d,e,f,g={top:0,right:0,bottom:0,left:0},h=960,i=500,j=Math.floor(1e4*Math.random()),k=d3.scale.linear(),l=d3.scale.linear(),m=function(a){return a.x},n=function(a){return a.y},o=function(a){return a.open},p=function(a){return a.close},q=function(a){return a.high},r=function(a){return a.low},s=[],t=[],u=!1,v=!0,w=c.utils.defaultColor(),x=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return a.dispatch=x,a.options=c.utils.optionsFunc.bind(a),a.x=function(b){return arguments.length?(m=b,a):m},a.y=function(b){return arguments.length?(n=b,a):n},a.open=function(b){return arguments.length?(o=b,a):o},a.close=function(b){return arguments.length?(p=b,a):p},a.high=function(b){return arguments.length?(q=b,a):q},a.low=function(b){return arguments.length?(r=b,a):r},a.margin=function(b){return arguments.length?(g.top="undefined"!=typeof b.top?b.top:g.top,g.right="undefined"!=typeof b.right?b.right:g.right,g.bottom="undefined"!=typeof b.bottom?b.bottom:g.bottom,g.left="undefined"!=typeof b.left?b.left:g.left,a):g},a.width=function(b){return arguments.length?(h=b,a):h},a.height=function(b){return arguments.length?(i=b,a):i},a.xScale=function(b){return arguments.length?(k=b,a):k},a.yScale=function(b){return arguments.length?(l=b,a):l},a.xDomain=function(c){return arguments.length?(b=c,a):b},a.yDomain=function(b){return arguments.length?(d=b,a):d},a.xRange=function(b){return arguments.length?(e=b,a):e},a.yRange=function(b){return arguments.length?(f=b,a):f},a.forceX=function(b){return arguments.length?(s=b,a):s},a.forceY=function(b){return arguments.length?(t=b,a):t},a.padData=function(b){return arguments.length?(u=b,a):u},a.clipEdge=function(b){return arguments.length?(v=b,a):v},a.color=function(b){return arguments.length?(w=c.utils.getColor(b),a):w},a.id=function(b){return arguments.length?(j=b,a):j},a},c.models.pie=function(){"use strict";function a(c){return c.each(function(a){function c(a){a.endAngle=isNaN(a.endAngle)?0:a.endAngle,a.startAngle=isNaN(a.startAngle)?0:a.startAngle,r||(a.innerRadius=0);var b=d3.interpolate(this._current,a);return this._current=b(0),function(a){return E(b(a))}}var i=e-b.left-b.right,l=f-b.top-b.bottom,x=Math.min(i,l)/2,y=x-x/5,z=d3.select(this),A=z.selectAll(".nv-wrap.nv-pie").data(a),B=A.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+j),C=B.append("g"),D=A.select("g");C.append("g").attr("class","nv-pie"),C.append("g").attr("class","nv-pieLabels"),A.attr("transform","translate("+b.left+","+b.top+")"),D.select(".nv-pie").attr("transform","translate("+i/2+","+l/2+")"),D.select(".nv-pieLabels").attr("transform","translate("+i/2+","+l/2+")"),z.on("click",function(a,b){w.chartClick({data:a,index:b,pos:d3.event,id:j})});var E=d3.svg.arc().outerRadius(y);t&&E.startAngle(t),u&&E.endAngle(u),r&&E.innerRadius(x*v);var F=d3.layout.pie().sort(null).value(function(a){return a.disabled?0:h(a)}),G=A.select(".nv-pie").selectAll(".nv-slice").data(F),H=A.select(".nv-pieLabels").selectAll(".nv-label").data(F);G.exit().remove(),H.exit().remove();var I=G.enter().append("g").attr("class","nv-slice").on("mouseover",function(a,b){d3.select(this).classed("hover",!0),w.elementMouseover({label:g(a.data),value:h(a.data),point:a.data,pointIndex:b,pos:[d3.event.pageX,d3.event.pageY],id:j})}).on("mouseout",function(a,b){d3.select(this).classed("hover",!1),w.elementMouseout({label:g(a.data),value:h(a.data),point:a.data,index:b,id:j})}).on("click",function(a,b){w.elementClick({label:g(a.data),value:h(a.data),point:a.data,index:b,pos:d3.event,id:j}),d3.event.stopPropagation()}).on("dblclick",function(a,b){w.elementDblClick({label:g(a.data),value:h(a.data),point:a.data,index:b,pos:d3.event,id:j}),d3.event.stopPropagation()});G.attr("fill",function(a,b){return k(a,b)}).attr("stroke",function(a,b){return k(a,b)});I.append("path").each(function(a){this._current=a});if(G.select("path").transition().attr("d",E).attrTween("d",c),m){var J=d3.svg.arc().innerRadius(0);n&&(J=E),o&&(J=d3.svg.arc().outerRadius(E.outerRadius())),H.enter().append("g").classed("nv-label",!0).each(function(a,b){var c=d3.select(this);c.attr("transform",function(a){if(s){a.outerRadius=y+10,a.innerRadius=y+15;var b=(a.startAngle+a.endAngle)/2*(180/Math.PI);return(a.startAngle+a.endAngle)/2<Math.PI?b-=90:b+=90,"translate("+J.centroid(a)+") rotate("+b+")"}return a.outerRadius=x+10,a.innerRadius=x+15,"translate("+J.centroid(a)+")"}),c.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3),c.append("text").style("text-anchor",s?(a.startAngle+a.endAngle)/2<Math.PI?"start":"end":"middle").style("fill","#000")});var K={},L=14,M=140,N=function(a){return Math.floor(a[0]/M)*M+","+Math.floor(a[1]/L)*L};H.transition().attr("transform",function(a){if(s){a.outerRadius=y+10,a.innerRadius=y+15;var b=(a.startAngle+a.endAngle)/2*(180/Math.PI);return(a.startAngle+a.endAngle)/2<Math.PI?b-=90:b+=90,"translate("+J.centroid(a)+") rotate("+b+")"}a.outerRadius=x+10,a.innerRadius=x+15;var c=J.centroid(a),d=N(c);return K[d]&&(c[1]-=L),K[N(c)]=!0,"translate("+c+")"}),H.select(".nv-label text").style("text-anchor",s?(d.startAngle+d.endAngle)/2<Math.PI?"start":"end":"middle").text(function(a,b){var c=(a.endAngle-a.startAngle)/(2*Math.PI),d={key:g(a.data),value:h(a.data),percent:d3.format("%")(c)};return a.value&&c>q?d[p]:""})}}),a}var b={top:0,right:0,bottom:0,left:0},e=500,f=500,g=function(a){return a.x},h=function(a){return a.y},i=function(a){return a.description},j=Math.floor(1e4*Math.random()),k=c.utils.defaultColor(),l=d3.format(",.2f"),m=!0,n=!0,o=!1,p="key",q=.02,r=!1,s=!1,t=!1,u=!1,v=.5,w=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return a.dispatch=w,a.options=c.utils.optionsFunc.bind(a),a.margin=function(c){return arguments.length?(b.top="undefined"!=typeof c.top?c.top:b.top,b.right="undefined"!=typeof c.right?c.right:b.right,b.bottom="undefined"!=typeof c.bottom?c.bottom:b.bottom,b.left="undefined"!=typeof c.left?c.left:b.left,a):b},a.width=function(b){return arguments.length?(e=b,a):e},a.height=function(b){return arguments.length?(f=b,a):f},a.values=function(b){return c.log("pie.values() is no longer supported."),a},a.x=function(b){return arguments.length?(g=b,a):g},a.y=function(b){return arguments.length?(h=d3.functor(b),a):h},a.description=function(b){return arguments.length?(i=b,a):i},a.showLabels=function(b){return arguments.length?(m=b,a):m},a.labelSunbeamLayout=function(b){return arguments.length?(s=b,a):s},a.donutLabelsOutside=function(b){return arguments.length?(o=b,a):o},a.pieLabelsOutside=function(b){return arguments.length?(n=b,a):n},a.labelType=function(b){return arguments.length?(p=b,p=p||"key",a):p},a.donut=function(b){return arguments.length?(r=b,a):r},a.donutRatio=function(b){return arguments.length?(v=b,a):v},a.startAngle=function(b){return arguments.length?(t=b,a):t},a.endAngle=function(b){return arguments.length?(u=b,a):u},a.id=function(b){return arguments.length?(j=b,a):j},a.color=function(b){return arguments.length?(k=c.utils.getColor(b),a):k},a.valueFormat=function(b){return arguments.length?(l=b,a):l},a.labelThreshold=function(b){return arguments.length?(q=b,a):q},a},c.models.pieChart=function(){"use strict";function a(c){return c.each(function(c){var i=d3.select(this),j=(f||parseInt(i.style("width"))||960)-e.left-e.right,k=(g||parseInt(i.style("height"))||400)-e.top-e.bottom;if(a.update=function(){i.transition().call(a)},a.container=this,l.disabled=c.map(function(a){return!!a.disabled}),!m){var p;m={};for(p in l)l[p]instanceof Array?m[p]=l[p].slice(0):m[p]=l[p]}if(!c||!c.length){var q=i.selectAll(".nv-noData").data([n]);return q.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),q.attr("x",e.left+j/2).attr("y",e.top+k/2).text(function(a){return a}),a}i.selectAll(".nv-noData").remove();var r=i.selectAll("g.nv-wrap.nv-pieChart").data([c]),s=r.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),t=r.select("g");s.append("g").attr("class","nv-pieWrap"),s.append("g").attr("class","nv-legendWrap"),h&&(d.width(j).key(b.x()),r.select(".nv-legendWrap").datum(c).call(d),e.top!=d.height()&&(e.top=d.height(),k=(g||parseInt(i.style("height"))||400)-e.top-e.bottom),r.select(".nv-legendWrap").attr("transform","translate(0,"+-e.top+")")),r.attr("transform","translate("+e.left+","+e.top+")"),b.width(j).height(k);var u=t.select(".nv-pieWrap").datum([c]);d3.transition(u).call(b),d.dispatch.on("stateChange",function(b){l=b,o.stateChange(l),a.update()}),b.dispatch.on("elementMouseout.tooltip",function(a){o.tooltipHide(a)}),o.on("changeState",function(b){"undefined"!=typeof b.disabled&&(c.forEach(function(a,c){a.disabled=b.disabled[c]}),l.disabled=b.disabled),a.update()})}),a}var b=c.models.pie(),d=c.models.legend(),e={top:30,right:20,bottom:20,left:20},f=null,g=null,h=!0,i=c.utils.defaultColor(),j=!0,k=function(a,b,c,d){return"<h3>"+a+"</h3><p>"+b+"</p>"},l={},m=null,n="No Data Available.",o=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),p=function(d,e){var f=b.description()(d.point)||b.x()(d.point),g=d.pos[0]+(e&&e.offsetLeft||0),h=d.pos[1]+(e&&e.offsetTop||0),i=b.valueFormat()(b.y()(d.point)),j=k(f,i,d,a);c.tooltip.show([g,h],j,d.value<0?"n":"s",null,e)};return b.dispatch.on("elementMouseover.tooltip",function(a){
a.pos=[a.pos[0]+e.left,a.pos[1]+e.top],o.tooltipShow(a)}),o.on("tooltipShow",function(a){j&&p(a)}),o.on("tooltipHide",function(){j&&c.tooltip.cleanup()}),a.legend=d,a.dispatch=o,a.pie=b,d3.rebind(a,b,"valueFormat","values","x","y","description","id","showLabels","donutLabelsOutside","pieLabelsOutside","labelType","donut","donutRatio","labelThreshold"),a.options=c.utils.optionsFunc.bind(a),a.margin=function(b){return arguments.length?(e.top="undefined"!=typeof b.top?b.top:e.top,e.right="undefined"!=typeof b.right?b.right:e.right,e.bottom="undefined"!=typeof b.bottom?b.bottom:e.bottom,e.left="undefined"!=typeof b.left?b.left:e.left,a):e},a.width=function(b){return arguments.length?(f=b,a):f},a.height=function(b){return arguments.length?(g=b,a):g},a.color=function(e){return arguments.length?(i=c.utils.getColor(e),d.color(i),b.color(i),a):i},a.showLegend=function(b){return arguments.length?(h=b,a):h},a.tooltips=function(b){return arguments.length?(j=b,a):j},a.tooltipContent=function(b){return arguments.length?(k=b,a):k},a.state=function(b){return arguments.length?(l=b,a):l},a.defaultState=function(b){return arguments.length?(m=b,a):m},a.noData=function(b){return arguments.length?(n=b,a):n},a},c.models.scatter=function(){"use strict";function a(O){return O.each(function(a){function O(){if(!w)return!1;var b=d3.merge(a.map(function(a,b){return a.values.map(function(a,c){var d=o(a,c),e=p(a,c);return[l(d)+1e-7*Math.random(),m(e)+1e-7*Math.random(),b,c,a]}).filter(function(a,b){return y(a[4],b)})}));if(M===!0){if(C){var c=T.select("defs").selectAll(".nv-point-clips").data([k]).enter();c.append("clipPath").attr("class","nv-point-clips").attr("id","nv-points-clip-"+k);var d=T.select("#nv-points-clip-"+k).selectAll("circle").data(b);d.enter().append("circle").attr("r",D),d.exit().remove(),d.attr("cx",function(a){return a[0]}).attr("cy",function(a){return a[1]}),T.select(".nv-point-paths").attr("clip-path","url(#nv-points-clip-"+k+")")}b.length&&(b.push([l.range()[0]-20,m.range()[0]-20,null,null]),b.push([l.range()[1]+20,m.range()[1]+20,null,null]),b.push([l.range()[0]-20,m.range()[0]+20,null,null]),b.push([l.range()[1]+20,m.range()[1]-20,null,null]));var e=d3.geom.polygon([[-10,-10],[-10,i+10],[h+10,i+10],[h+10,-10]]),f=d3.geom.voronoi(b).map(function(a,c){return{data:e.clip(a),series:b[c][2],point:b[c][3]}}),j=T.select(".nv-point-paths").selectAll("path").data(f);j.enter().append("path").attr("class",function(a,b){return"nv-path-"+b}),j.exit().remove(),j.attr("d",function(a){return 0===a.data.length?"M 0 0":"M"+a.data.join("L")+"Z"});var n=function(b,c){if(N)return 0;var d=a[b.series];if("undefined"!=typeof d){var e=d.values[b.point];c({point:e,series:d,pos:[l(o(e,b.point))+g.left,m(p(e,b.point))+g.top],seriesIndex:b.series,pointIndex:b.point})}};j.on("click",function(a){n(a,L.elementClick)}).on("mouseover",function(a){n(a,L.elementMouseover)}).on("mouseout",function(a,b){n(a,L.elementMouseout)})}else T.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",function(b,c){if(N||!a[b.series])return 0;var d=a[b.series],e=d.values[c];L.elementClick({point:e,series:d,pos:[l(o(e,c))+g.left,m(p(e,c))+g.top],seriesIndex:b.series,pointIndex:c})}).on("mouseover",function(b,c){if(N||!a[b.series])return 0;var d=a[b.series],e=d.values[c];L.elementMouseover({point:e,series:d,pos:[l(o(e,c))+g.left,m(p(e,c))+g.top],seriesIndex:b.series,pointIndex:c})}).on("mouseout",function(b,c){if(N||!a[b.series])return 0;var d=a[b.series],e=d.values[c];L.elementMouseout({point:e,series:d,seriesIndex:b.series,pointIndex:c})});N=!1}var P=h-g.left-g.right,Q=i-g.top-g.bottom,R=d3.select(this);a.forEach(function(a,b){a.values.forEach(function(a){a.series=b})});var S=E&&F&&I?[]:d3.merge(a.map(function(a){return a.values.map(function(a,b){return{x:o(a,b),y:p(a,b),size:q(a,b)}})}));l.domain(E||d3.extent(S.map(function(a){return a.x}).concat(t))),z&&a[0]?l.range(G||[(P*A+P)/(2*a[0].values.length),P-P*(1+A)/(2*a[0].values.length)]):l.range(G||[0,P]),m.domain(F||d3.extent(S.map(function(a){return a.y}).concat(u))).range(H||[Q,0]),n.domain(I||d3.extent(S.map(function(a){return a.size}).concat(v))).range(J||[16,256]),l.domain()[0]!==l.domain()[1]&&m.domain()[0]!==m.domain()[1]||(K=!0),l.domain()[0]===l.domain()[1]&&(l.domain()[0]?l.domain([l.domain()[0]-.01*l.domain()[0],l.domain()[1]+.01*l.domain()[1]]):l.domain([-1,1])),m.domain()[0]===m.domain()[1]&&(m.domain()[0]?m.domain([m.domain()[0]-.01*m.domain()[0],m.domain()[1]+.01*m.domain()[1]]):m.domain([-1,1])),isNaN(l.domain()[0])&&l.domain([-1,1]),isNaN(m.domain()[0])&&m.domain([-1,1]),b=b||l,d=d||m,e=e||n;var T=R.selectAll("g.nv-wrap.nv-scatter").data([a]),U=T.enter().append("g").attr("class","nvd3 nv-wrap nv-scatter nv-chart-"+k+(K?" nv-single-point":"")),V=U.append("defs"),W=U.append("g"),X=T.select("g");W.append("g").attr("class","nv-groups"),W.append("g").attr("class","nv-point-paths"),T.attr("transform","translate("+g.left+","+g.top+")"),V.append("clipPath").attr("id","nv-edge-clip-"+k).append("rect"),T.select("#nv-edge-clip-"+k+" rect").attr("width",P).attr("height",Q>0?Q:0),X.attr("clip-path",B?"url(#nv-edge-clip-"+k+")":""),N=!0;var Y=T.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});if(Y.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),Y.exit().remove(),Y.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover}),Y.transition().style("fill",function(a,b){return j(a,b)}).style("stroke",function(a,b){return j(a,b)}).style("stroke-opacity",1).style("fill-opacity",.5),s){var Z=Y.selectAll("circle.nv-point").data(function(a){return a.values},x);Z.enter().append("circle").style("fill",function(a,b){return a.color}).style("stroke",function(a,b){return a.color}).attr("cx",function(a,d){return c.utils.NaNtoZero(b(o(a,d)))}).attr("cy",function(a,b){return c.utils.NaNtoZero(d(p(a,b)))}).attr("r",function(a,b){return Math.sqrt(n(q(a,b))/Math.PI)}),Z.exit().remove(),Y.exit().selectAll("path.nv-point").transition().attr("cx",function(a,b){return c.utils.NaNtoZero(l(o(a,b)))}).attr("cy",function(a,b){return c.utils.NaNtoZero(m(p(a,b)))}).remove(),Z.each(function(a,b){d3.select(this).classed("nv-point",!0).classed("nv-point-"+b,!0).classed("hover",!1)}),Z.transition().attr("cx",function(a,b){return c.utils.NaNtoZero(l(o(a,b)))}).attr("cy",function(a,b){return c.utils.NaNtoZero(m(p(a,b)))}).attr("r",function(a,b){return Math.sqrt(n(q(a,b))/Math.PI)})}else{var Z=Y.selectAll("path.nv-point").data(function(a){return a.values});Z.enter().append("path").style("fill",function(a,b){return a.color}).style("stroke",function(a,b){return a.color}).attr("transform",function(a,c){return"translate("+b(o(a,c))+","+d(p(a,c))+")"}).attr("d",d3.svg.symbol().type(r).size(function(a,b){return n(q(a,b))})),Z.exit().remove(),Y.exit().selectAll("path.nv-point").transition().attr("transform",function(a,b){return"translate("+l(o(a,b))+","+m(p(a,b))+")"}).remove(),Z.each(function(a,b){d3.select(this).classed("nv-point",!0).classed("nv-point-"+b,!0).classed("hover",!1)}),Z.transition().attr("transform",function(a,b){return"translate("+l(o(a,b))+","+m(p(a,b))+")"}).attr("d",d3.svg.symbol().type(r).size(function(a,b){return n(q(a,b))}))}clearTimeout(f),f=setTimeout(O,300),b=l.copy(),d=m.copy(),e=n.copy()}),a}var b,d,e,f,g={top:0,right:0,bottom:0,left:0},h=960,i=500,j=c.utils.defaultColor(),k=Math.floor(1e5*Math.random()),l=d3.scale.linear(),m=d3.scale.linear(),n=d3.scale.linear(),o=function(a){return a.x},p=function(a){return a.y},q=function(a){return a.size||1},r=function(a){return a.shape||"circle"},s=!0,t=[],u=[],v=[],w=!0,x=null,y=function(a){return!a.notActive},z=!1,A=.1,B=!1,C=!0,D=function(){return 25},E=null,F=null,G=null,H=null,I=null,J=null,K=!1,L=d3.dispatch("elementClick","elementMouseover","elementMouseout"),M=!0,N=!1;return a.clearHighlights=function(){d3.selectAll(".nv-chart-"+k+" .nv-point.hover").classed("hover",!1)},a.highlightPoint=function(a,b,c){d3.select(".nv-chart-"+k+" .nv-series-"+a+" .nv-point-"+b).classed("hover",c)},L.on("elementMouseover.point",function(b){w&&a.highlightPoint(b.seriesIndex,b.pointIndex,!0)}),L.on("elementMouseout.point",function(b){w&&a.highlightPoint(b.seriesIndex,b.pointIndex,!1)}),a.dispatch=L,a.options=c.utils.optionsFunc.bind(a),a.x=function(b){return arguments.length?(o=d3.functor(b),a):o},a.y=function(b){return arguments.length?(p=d3.functor(b),a):p},a.size=function(b){return arguments.length?(q=d3.functor(b),a):q},a.margin=function(b){return arguments.length?(g.top="undefined"!=typeof b.top?b.top:g.top,g.right="undefined"!=typeof b.right?b.right:g.right,g.bottom="undefined"!=typeof b.bottom?b.bottom:g.bottom,g.left="undefined"!=typeof b.left?b.left:g.left,a):g},a.width=function(b){return arguments.length?(h=b,a):h},a.height=function(b){return arguments.length?(i=b,a):i},a.xScale=function(b){return arguments.length?(l=b,a):l},a.yScale=function(b){return arguments.length?(m=b,a):m},a.zScale=function(b){return arguments.length?(n=b,a):n},a.xDomain=function(b){return arguments.length?(E=b,a):E},a.yDomain=function(b){return arguments.length?(F=b,a):F},a.sizeDomain=function(b){return arguments.length?(I=b,a):I},a.xRange=function(b){return arguments.length?(G=b,a):G},a.yRange=function(b){return arguments.length?(H=b,a):H},a.sizeRange=function(b){return arguments.length?(J=b,a):J},a.forceX=function(b){return arguments.length?(t=b,a):t},a.forceY=function(b){return arguments.length?(u=b,a):u},a.forceSize=function(b){return arguments.length?(v=b,a):v},a.interactive=function(b){return arguments.length?(w=b,a):w},a.pointKey=function(b){return arguments.length?(x=b,a):x},a.pointActive=function(b){return arguments.length?(y=b,a):y},a.padData=function(b){return arguments.length?(z=b,a):z},a.padDataOuter=function(b){return arguments.length?(A=b,a):A},a.clipEdge=function(b){return arguments.length?(B=b,a):B},a.clipVoronoi=function(b){return arguments.length?(C=b,a):C},a.useVoronoi=function(b){return arguments.length?(M=b,M===!1&&(C=!1),a):M},a.clipRadius=function(b){return arguments.length?(D=b,a):D},a.color=function(b){return arguments.length?(j=c.utils.getColor(b),a):j},a.shape=function(b){return arguments.length?(r=b,a):r},a.onlyCircles=function(b){return arguments.length?(s=b,a):s},a.id=function(b){return arguments.length?(k=b,a):k},a.singlePoint=function(b){return arguments.length?(K=b,a):K},a},c.models.scatterChart=function(){"use strict";function a(c){return c.each(function(c){function B(){if(z)return U.select(".nv-point-paths").style("pointer-events","all"),!1;U.select(".nv-point-paths").style("pointer-events","none");var a=d3.mouse(this);n.distortion(y).focus(a[0]),o.distortion(y).focus(a[1]),U.select(".nv-scatterWrap").call(b),u&&U.select(".nv-x.nv-axis").call(d),v&&U.select(".nv-y.nv-axis").call(e),U.select(".nv-distributionX").datum(c.filter(function(a){return!a.disabled})).call(h),U.select(".nv-distributionY").datum(c.filter(function(a){return!a.disabled})).call(i)}var C=d3.select(this),D=this,N=(k||parseInt(C.style("width"))||960)-j.left-j.right,O=(l||parseInt(C.style("height"))||400)-j.top-j.bottom;if(a.update=function(){C.transition().duration(I).call(a)},a.container=this,E.disabled=c.map(function(a){return!!a.disabled}),!F){var P;F={};for(P in E)E[P]instanceof Array?F[P]=E[P].slice(0):F[P]=E[P]}if(!(c&&c.length&&c.filter(function(a){return a.values.length}).length)){var Q=C.selectAll(".nv-noData").data([H]);return Q.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),Q.attr("x",j.left+N/2).attr("y",j.top+O/2).text(function(a){return a}),a}C.selectAll(".nv-noData").remove(),J=J||n,K=K||o;var R=C.selectAll("g.nv-wrap.nv-scatterChart").data([c]),S=R.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+b.id()),T=S.append("g"),U=R.select("g");if(T.append("rect").attr("class","nvd3 nv-background"),T.append("g").attr("class","nv-x nv-axis"),T.append("g").attr("class","nv-y nv-axis"),T.append("g").attr("class","nv-scatterWrap"),T.append("g").attr("class","nv-distWrap"),T.append("g").attr("class","nv-legendWrap"),T.append("g").attr("class","nv-controlsWrap"),t){var V=x?N/2:N;f.width(V),R.select(".nv-legendWrap").datum(c).call(f),j.top!=f.height()&&(j.top=f.height(),O=(l||parseInt(C.style("height"))||400)-j.top-j.bottom),R.select(".nv-legendWrap").attr("transform","translate("+(N-V)+","+-j.top+")")}if(x&&(g.width(180).color(["#444"]),U.select(".nv-controlsWrap").datum(M).attr("transform","translate(0,"+-j.top+")").call(g)),R.attr("transform","translate("+j.left+","+j.top+")"),w&&U.select(".nv-y.nv-axis").attr("transform","translate("+N+",0)"),b.width(N).height(O).color(c.map(function(a,b){return a.color||m(a,b)}).filter(function(a,b){return!c[b].disabled})),0!==p&&b.xDomain(null),0!==q&&b.yDomain(null),R.select(".nv-scatterWrap").datum(c.filter(function(a){return!a.disabled})).call(b),0!==p){var W=n.domain()[1]-n.domain()[0];b.xDomain([n.domain()[0]-p*W,n.domain()[1]+p*W])}if(0!==q){var X=o.domain()[1]-o.domain()[0];b.yDomain([o.domain()[0]-q*X,o.domain()[1]+q*X])}0===q&&0===p||R.select(".nv-scatterWrap").datum(c.filter(function(a){return!a.disabled})).call(b),u&&(d.scale(n).ticks(d.ticks()&&d.ticks().length?d.ticks():N/100).tickSize(-O,0),U.select(".nv-x.nv-axis").attr("transform","translate(0,"+o.range()[0]+")").call(d)),v&&(e.scale(o).ticks(e.ticks()&&e.ticks().length?e.ticks():O/36).tickSize(-N,0),U.select(".nv-y.nv-axis").call(e)),r&&(h.getData(b.x()).scale(n).width(N).color(c.map(function(a,b){return a.color||m(a,b)}).filter(function(a,b){return!c[b].disabled})),T.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),U.select(".nv-distributionX").attr("transform","translate(0,"+o.range()[0]+")").datum(c.filter(function(a){return!a.disabled})).call(h)),s&&(i.getData(b.y()).scale(o).width(O).color(c.map(function(a,b){return a.color||m(a,b)}).filter(function(a,b){return!c[b].disabled})),T.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),U.select(".nv-distributionY").attr("transform","translate("+(w?N:-i.size())+",0)").datum(c.filter(function(a){return!a.disabled})).call(i)),d3.fisheye&&(U.select(".nv-background").attr("width",N).attr("height",O),U.select(".nv-background").on("mousemove",B),U.select(".nv-background").on("click",function(){z=!z}),b.dispatch.on("elementClick.freezeFisheye",function(){z=!z})),g.dispatch.on("legendClick",function(c,f){c.disabled=!c.disabled,y=c.disabled?0:2.5,U.select(".nv-background").style("pointer-events",c.disabled?"none":"all"),U.select(".nv-point-paths").style("pointer-events",c.disabled?"all":"none"),c.disabled?(n.distortion(y).focus(0),o.distortion(y).focus(0),U.select(".nv-scatterWrap").call(b),U.select(".nv-x.nv-axis").call(d),U.select(".nv-y.nv-axis").call(e)):z=!1,a.update()}),f.dispatch.on("stateChange",function(b){E.disabled=b.disabled,G.stateChange(E),a.update()}),b.dispatch.on("elementMouseover.tooltip",function(a){d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",function(b,c){return a.pos[1]-O}),d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",a.pos[0]+h.size()),a.pos=[a.pos[0]+j.left,a.pos[1]+j.top],G.tooltipShow(a)}),G.on("tooltipShow",function(a){A&&L(a,D.parentNode)}),G.on("changeState",function(b){"undefined"!=typeof b.disabled&&(c.forEach(function(a,c){a.disabled=b.disabled[c]}),E.disabled=b.disabled),a.update()}),J=n.copy(),K=o.copy()}),a}var b=c.models.scatter(),d=c.models.axis(),e=c.models.axis(),f=c.models.legend(),g=c.models.legend(),h=c.models.distribution(),i=c.models.distribution(),j={top:30,right:20,bottom:50,left:75},k=null,l=null,m=c.utils.defaultColor(),n=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):b.xScale(),o=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):b.yScale(),p=0,q=0,r=!1,s=!1,t=!0,u=!0,v=!0,w=!1,x=!!d3.fisheye,y=0,z=!1,A=!0,B=function(a,b,c){return"<strong>"+b+"</strong>"},C=function(a,b,c){return"<strong>"+c+"</strong>"},D=null,E={},F=null,G=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),H="No Data Available.",I=250;b.xScale(n).yScale(o),d.orient("bottom").tickPadding(10),e.orient(w?"right":"left").tickPadding(10),h.axis("x"),i.axis("y"),g.updateState(!1);var J,K,L=function(f,g){var h=f.pos[0]+(g.offsetLeft||0),i=f.pos[1]+(g.offsetTop||0),k=f.pos[0]+(g.offsetLeft||0),l=o.range()[0]+j.top+(g.offsetTop||0),m=n.range()[0]+j.left+(g.offsetLeft||0),p=f.pos[1]+(g.offsetTop||0),q=d.tickFormat()(b.x()(f.point,f.pointIndex)),r=e.tickFormat()(b.y()(f.point,f.pointIndex));null!=B&&c.tooltip.show([k,l],B(f.series.key,q,r,f,a),"n",1,g,"x-nvtooltip"),null!=C&&c.tooltip.show([m,p],C(f.series.key,q,r,f,a),"e",1,g,"y-nvtooltip"),null!=D&&c.tooltip.show([h,i],D(f.series.key,q,r,f,a),f.value<0?"n":"s",null,g)},M=[{key:"Magnify",disabled:!0}];return b.dispatch.on("elementMouseout.tooltip",function(a){G.tooltipHide(a),d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",0),d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",i.size())}),G.on("tooltipHide",function(){A&&c.tooltip.cleanup()}),a.dispatch=G,a.scatter=b,a.legend=f,a.controls=g,a.xAxis=d,a.yAxis=e,a.distX=h,a.distY=i,d3.rebind(a,b,"id","interactive","pointActive","x","y","shape","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","sizeRange","forceX","forceY","forceSize","clipVoronoi","clipRadius","useVoronoi"),a.options=c.utils.optionsFunc.bind(a),a.margin=function(b){return arguments.length?(j.top="undefined"!=typeof b.top?b.top:j.top,j.right="undefined"!=typeof b.right?b.right:j.right,j.bottom="undefined"!=typeof b.bottom?b.bottom:j.bottom,j.left="undefined"!=typeof b.left?b.left:j.left,a):j},a.width=function(b){return arguments.length?(k=b,a):k},a.height=function(b){return arguments.length?(l=b,a):l},a.color=function(b){return arguments.length?(m=c.utils.getColor(b),f.color(m),h.color(m),i.color(m),a):m},a.showDistX=function(b){return arguments.length?(r=b,a):r},a.showDistY=function(b){return arguments.length?(s=b,a):s},a.showControls=function(b){return arguments.length?(x=b,a):x},a.showLegend=function(b){return arguments.length?(t=b,a):t},a.showXAxis=function(b){return arguments.length?(u=b,a):u},a.showYAxis=function(b){return arguments.length?(v=b,a):v},a.rightAlignYAxis=function(b){return arguments.length?(w=b,e.orient(b?"right":"left"),a):w},a.fisheye=function(b){return arguments.length?(y=b,a):y},a.xPadding=function(b){return arguments.length?(p=b,a):p},a.yPadding=function(b){return arguments.length?(q=b,a):q},a.tooltips=function(b){return arguments.length?(A=b,a):A},a.tooltipContent=function(b){return arguments.length?(D=b,a):D},a.tooltipXContent=function(b){return arguments.length?(B=b,a):B},a.tooltipYContent=function(b){return arguments.length?(C=b,a):C},a.state=function(b){return arguments.length?(E=b,a):E},a.defaultState=function(b){return arguments.length?(F=b,a):F},a.noData=function(b){return arguments.length?(H=b,a):H},a.transitionDuration=function(b){return arguments.length?(I=b,a):I},a},c.models.scatterPlusLineChart=function(){"use strict";function a(c){return c.each(function(c){function z(){if(x)return S.select(".nv-point-paths").style("pointer-events","all"),!1;S.select(".nv-point-paths").style("pointer-events","none");var a=d3.mouse(this);n.distortion(w).focus(a[0]),o.distortion(w).focus(a[1]),S.select(".nv-scatterWrap").datum(c.filter(function(a){return!a.disabled})).call(b),s&&S.select(".nv-x.nv-axis").call(d),t&&S.select(".nv-y.nv-axis").call(e),S.select(".nv-distributionX").datum(c.filter(function(a){return!a.disabled})).call(h),S.select(".nv-distributionY").datum(c.filter(function(a){return!a.disabled})).call(i)}var A=d3.select(this),B=this,L=(k||parseInt(A.style("width"))||960)-j.left-j.right,M=(l||parseInt(A.style("height"))||400)-j.top-j.bottom;if(a.update=function(){A.transition().duration(G).call(a)},a.container=this,C.disabled=c.map(function(a){return!!a.disabled}),!D){var N;D={};for(N in C)C[N]instanceof Array?D[N]=C[N].slice(0):D[N]=C[N]}if(!(c&&c.length&&c.filter(function(a){return a.values.length}).length)){var O=A.selectAll(".nv-noData").data([F]);return O.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),O.attr("x",j.left+L/2).attr("y",j.top+M/2).text(function(a){return a}),a}A.selectAll(".nv-noData").remove(),n=b.xScale(),o=b.yScale(),H=H||n,I=I||o;var P=A.selectAll("g.nv-wrap.nv-scatterChart").data([c]),Q=P.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+b.id()),R=Q.append("g"),S=P.select("g");R.append("rect").attr("class","nvd3 nv-background").style("pointer-events","none"),R.append("g").attr("class","nv-x nv-axis"),R.append("g").attr("class","nv-y nv-axis"),R.append("g").attr("class","nv-scatterWrap"),R.append("g").attr("class","nv-regressionLinesWrap"),R.append("g").attr("class","nv-distWrap"),R.append("g").attr("class","nv-legendWrap"),R.append("g").attr("class","nv-controlsWrap"),P.attr("transform","translate("+j.left+","+j.top+")"),u&&S.select(".nv-y.nv-axis").attr("transform","translate("+L+",0)"),r&&(f.width(L/2),P.select(".nv-legendWrap").datum(c).call(f),j.top!=f.height()&&(j.top=f.height(),M=(l||parseInt(A.style("height"))||400)-j.top-j.bottom),P.select(".nv-legendWrap").attr("transform","translate("+L/2+","+-j.top+")")),v&&(g.width(180).color(["#444"]),S.select(".nv-controlsWrap").datum(K).attr("transform","translate(0,"+-j.top+")").call(g)),b.width(L).height(M).color(c.map(function(a,b){return a.color||m(a,b)}).filter(function(a,b){return!c[b].disabled})),P.select(".nv-scatterWrap").datum(c.filter(function(a){return!a.disabled})).call(b),P.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+b.id()+")");var T=P.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data(function(a){return a});T.enter().append("g").attr("class","nv-regLines");var U=T.selectAll(".nv-regLine").data(function(a){return[a]});U.enter().append("line").attr("class","nv-regLine").style("stroke-opacity",0);U.transition().attr("x1",n.range()[0]).attr("x2",n.range()[1]).attr("y1",function(a,b){return o(n.domain()[0]*a.slope+a.intercept)}).attr("y2",function(a,b){return o(n.domain()[1]*a.slope+a.intercept)}).style("stroke",function(a,b,c){return m(a,c)}).style("stroke-opacity",function(a,b){return a.disabled||"undefined"==typeof a.slope||"undefined"==typeof a.intercept?0:1}),s&&(d.scale(n).ticks(d.ticks()?d.ticks():L/100).tickSize(-M,0),S.select(".nv-x.nv-axis").attr("transform","translate(0,"+o.range()[0]+")").call(d)),t&&(e.scale(o).ticks(e.ticks()?e.ticks():M/36).tickSize(-L,0),S.select(".nv-y.nv-axis").call(e)),p&&(h.getData(b.x()).scale(n).width(L).color(c.map(function(a,b){return a.color||m(a,b)}).filter(function(a,b){return!c[b].disabled})),R.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),S.select(".nv-distributionX").attr("transform","translate(0,"+o.range()[0]+")").datum(c.filter(function(a){return!a.disabled})).call(h)),q&&(i.getData(b.y()).scale(o).width(M).color(c.map(function(a,b){return a.color||m(a,b)}).filter(function(a,b){return!c[b].disabled})),R.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),S.select(".nv-distributionY").attr("transform","translate("+(u?L:-i.size())+",0)").datum(c.filter(function(a){return!a.disabled})).call(i)),d3.fisheye&&(S.select(".nv-background").attr("width",L).attr("height",M),S.select(".nv-background").on("mousemove",z),S.select(".nv-background").on("click",function(){x=!x}),b.dispatch.on("elementClick.freezeFisheye",function(){x=!x})),g.dispatch.on("legendClick",function(c,f){c.disabled=!c.disabled,w=c.disabled?0:2.5,S.select(".nv-background").style("pointer-events",c.disabled?"none":"all"),S.select(".nv-point-paths").style("pointer-events",c.disabled?"all":"none"),c.disabled?(n.distortion(w).focus(0),o.distortion(w).focus(0),S.select(".nv-scatterWrap").call(b),S.select(".nv-x.nv-axis").call(d),S.select(".nv-y.nv-axis").call(e)):x=!1,a.update()}),f.dispatch.on("stateChange",function(b){C=b,E.stateChange(C),a.update()}),b.dispatch.on("elementMouseover.tooltip",function(a){d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",a.pos[1]-M),d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",a.pos[0]+h.size()),a.pos=[a.pos[0]+j.left,a.pos[1]+j.top],E.tooltipShow(a)}),E.on("tooltipShow",function(a){y&&J(a,B.parentNode)}),E.on("changeState",function(b){"undefined"!=typeof b.disabled&&(c.forEach(function(a,c){a.disabled=b.disabled[c]}),C.disabled=b.disabled),a.update()}),H=n.copy(),I=o.copy()}),a}var b=c.models.scatter(),d=c.models.axis(),e=c.models.axis(),f=c.models.legend(),g=c.models.legend(),h=c.models.distribution(),i=c.models.distribution(),j={top:30,right:20,bottom:50,left:75},k=null,l=null,m=c.utils.defaultColor(),n=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):b.xScale(),o=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):b.yScale(),p=!1,q=!1,r=!0,s=!0,t=!0,u=!1,v=!!d3.fisheye,w=0,x=!1,y=!0,z=function(a,b,c){return"<strong>"+b+"</strong>"},A=function(a,b,c){return"<strong>"+c+"</strong>"},B=function(a,b,c,d){return"<h3>"+a+"</h3><p>"+d+"</p>"},C={},D=null,E=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),F="No Data Available.",G=250;b.xScale(n).yScale(o),d.orient("bottom").tickPadding(10),e.orient(u?"right":"left").tickPadding(10),h.axis("x"),i.axis("y"),g.updateState(!1);var H,I,J=function(f,g){var h=f.pos[0]+(g.offsetLeft||0),i=f.pos[1]+(g.offsetTop||0),k=f.pos[0]+(g.offsetLeft||0),l=o.range()[0]+j.top+(g.offsetTop||0),m=n.range()[0]+j.left+(g.offsetLeft||0),p=f.pos[1]+(g.offsetTop||0),q=d.tickFormat()(b.x()(f.point,f.pointIndex)),r=e.tickFormat()(b.y()(f.point,f.pointIndex));null!=z&&c.tooltip.show([k,l],z(f.series.key,q,r,f,a),"n",1,g,"x-nvtooltip"),null!=A&&c.tooltip.show([m,p],A(f.series.key,q,r,f,a),"e",1,g,"y-nvtooltip"),null!=B&&c.tooltip.show([h,i],B(f.series.key,q,r,f.point.tooltip,f,a),f.value<0?"n":"s",null,g)},K=[{key:"Magnify",disabled:!0}];return b.dispatch.on("elementMouseout.tooltip",function(a){E.tooltipHide(a),d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",0),d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",i.size())}),E.on("tooltipHide",function(){y&&c.tooltip.cleanup()}),a.dispatch=E,a.scatter=b,a.legend=f,a.controls=g,a.xAxis=d,a.yAxis=e,a.distX=h,a.distY=i,d3.rebind(a,b,"id","interactive","pointActive","x","y","shape","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","sizeRange","forceX","forceY","forceSize","clipVoronoi","clipRadius","useVoronoi"),a.options=c.utils.optionsFunc.bind(a),a.margin=function(b){return arguments.length?(j.top="undefined"!=typeof b.top?b.top:j.top,j.right="undefined"!=typeof b.right?b.right:j.right,j.bottom="undefined"!=typeof b.bottom?b.bottom:j.bottom,j.left="undefined"!=typeof b.left?b.left:j.left,a):j},a.width=function(b){return arguments.length?(k=b,a):k},a.height=function(b){return arguments.length?(l=b,a):l},a.color=function(b){return arguments.length?(m=c.utils.getColor(b),f.color(m),h.color(m),i.color(m),a):m},a.showDistX=function(b){return arguments.length?(p=b,a):p},a.showDistY=function(b){return arguments.length?(q=b,a):q},a.showControls=function(b){return arguments.length?(v=b,a):v},a.showLegend=function(b){return arguments.length?(r=b,a):r},a.showXAxis=function(b){return arguments.length?(s=b,a):s},a.showYAxis=function(b){return arguments.length?(t=b,a):t},a.rightAlignYAxis=function(b){return arguments.length?(u=b,e.orient(b?"right":"left"),a):u},a.fisheye=function(b){return arguments.length?(w=b,a):w},a.tooltips=function(b){return arguments.length?(y=b,a):y},a.tooltipContent=function(b){return arguments.length?(B=b,a):B},a.tooltipXContent=function(b){return arguments.length?(z=b,a):z},a.tooltipYContent=function(b){return arguments.length?(A=b,a):A},a.state=function(b){return arguments.length?(C=b,a):C},a.defaultState=function(b){return arguments.length?(D=b,a):D},a.noData=function(b){return arguments.length?(F=b,a):F},a.transitionDuration=function(b){return arguments.length?(G=b,a):G},a},c.models.sparkline=function(){"use strict";function a(c){return c.each(function(a){var c=h-g.left-g.right,j=i-g.top-g.bottom,p=d3.select(this);k.domain(b||d3.extent(a,m)).range(e||[0,c]),l.domain(d||d3.extent(a,n)).range(f||[j,0]);var q=p.selectAll("g.nv-wrap.nv-sparkline").data([a]),r=q.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline");r.append("g"),q.select("g");q.attr("transform","translate("+g.left+","+g.top+")");var s=q.selectAll("path").data(function(a){return[a]});s.enter().append("path"),s.exit().remove(),s.style("stroke",function(a,b){return a.color||o(a,b)}).attr("d",d3.svg.line().x(function(a,b){return k(m(a,b))}).y(function(a,b){return l(n(a,b))}));var t=q.selectAll("circle.nv-point").data(function(a){function b(b){if(-1!=b){var c=a[b];return c.pointIndex=b,c}return null}var c=a.map(function(a,b){return n(a,b)}),d=b(c.lastIndexOf(l.domain()[1])),e=b(c.indexOf(l.domain()[0])),f=b(c.length-1);return[e,d,f].filter(function(a){return null!=a})});t.enter().append("circle"),t.exit().remove(),t.attr("cx",function(a,b){return k(m(a,a.pointIndex))}).attr("cy",function(a,b){return l(n(a,a.pointIndex))}).attr("r",2).attr("class",function(a,b){return m(a,a.pointIndex)==k.domain()[1]?"nv-point nv-currentValue":n(a,a.pointIndex)==l.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"})}),a}var b,d,e,f,g={top:2,right:0,bottom:2,left:0},h=400,i=32,j=!0,k=d3.scale.linear(),l=d3.scale.linear(),m=function(a){return a.x},n=function(a){return a.y},o=c.utils.getColor(["#000"]);return a.options=c.utils.optionsFunc.bind(a),a.margin=function(b){return arguments.length?(g.top="undefined"!=typeof b.top?b.top:g.top,g.right="undefined"!=typeof b.right?b.right:g.right,g.bottom="undefined"!=typeof b.bottom?b.bottom:g.bottom,g.left="undefined"!=typeof b.left?b.left:g.left,a):g},a.width=function(b){return arguments.length?(h=b,a):h},a.height=function(b){return arguments.length?(i=b,a):i},a.x=function(b){return arguments.length?(m=d3.functor(b),a):m},a.y=function(b){return arguments.length?(n=d3.functor(b),a):n},a.xScale=function(b){return arguments.length?(k=b,a):k},a.yScale=function(b){return arguments.length?(l=b,a):l},a.xDomain=function(c){return arguments.length?(b=c,a):b},a.yDomain=function(b){return arguments.length?(d=b,a):d},a.xRange=function(b){return arguments.length?(e=b,a):e},a.yRange=function(b){return arguments.length?(f=b,a):f},a.animate=function(b){return arguments.length?(j=b,a):j},a.color=function(b){return arguments.length?(o=c.utils.getColor(b),a):o},a},c.models.sparklinePlus=function(){"use strict";function a(c){return c.each(function(m){function q(){if(!j){var a=A.selectAll(".nv-hoverValue").data(i),c=a.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);a.exit().transition().duration(250).style("stroke-opacity",0).style("fill-opacity",0).remove(),a.attr("transform",function(a){return"translate("+b(e.x()(m[a],a))+",0)"}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1),i.length&&(c.append("line").attr("x1",0).attr("y1",-f.top).attr("x2",0).attr("y2",u),c.append("text").attr("class","nv-xValue").attr("x",-6).attr("y",-f.top).attr("text-anchor","end").attr("dy",".9em"),A.select(".nv-hoverValue .nv-xValue").text(k(e.x()(m[i[0]],i[0]))),c.append("text").attr("class","nv-yValue").attr("x",6).attr("y",-f.top).attr("text-anchor","start").attr("dy",".9em"),A.select(".nv-hoverValue .nv-yValue").text(l(e.y()(m[i[0]],i[0]))))}}function r(){function a(a,b){for(var c=Math.abs(e.x()(a[0],0)-b),d=0,f=0;f<a.length;f++)Math.abs(e.x()(a[f],f)-b)<c&&(c=Math.abs(e.x()(a[f],f)-b),
d=f);return d}if(!j){var c=d3.mouse(this)[0]-f.left;i=[a(m,Math.round(b.invert(c)))],q()}}var s=d3.select(this),t=(g||parseInt(s.style("width"))||960)-f.left-f.right,u=(h||parseInt(s.style("height"))||400)-f.top-f.bottom;if(a.update=function(){a(c)},a.container=this,!m||!m.length){var v=s.selectAll(".nv-noData").data([p]);return v.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),v.attr("x",f.left+t/2).attr("y",f.top+u/2).text(function(a){return a}),a}s.selectAll(".nv-noData").remove();var w=e.y()(m[m.length-1],m.length-1);b=e.xScale(),d=e.yScale();var x=s.selectAll("g.nv-wrap.nv-sparklineplus").data([m]),y=x.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus"),z=y.append("g"),A=x.select("g");z.append("g").attr("class","nv-sparklineWrap"),z.append("g").attr("class","nv-valueWrap"),z.append("g").attr("class","nv-hoverArea"),x.attr("transform","translate("+f.left+","+f.top+")");var B=A.select(".nv-sparklineWrap");e.width(t).height(u),B.call(e);var C=A.select(".nv-valueWrap"),D=C.selectAll(".nv-currentValue").data([w]);D.enter().append("text").attr("class","nv-currentValue").attr("dx",o?-8:8).attr("dy",".9em").style("text-anchor",o?"end":"start"),D.attr("x",t+(o?f.right:0)).attr("y",n?function(a){return d(a)}:0).style("fill",e.color()(m[m.length-1],m.length-1)).text(l(w)),z.select(".nv-hoverArea").append("rect").on("mousemove",r).on("click",function(){j=!j}).on("mouseout",function(){i=[],q()}),A.select(".nv-hoverArea rect").attr("transform",function(a){return"translate("+-f.left+","+-f.top+")"}).attr("width",t+f.left+f.right).attr("height",u+f.top)}),a}var b,d,e=c.models.sparkline(),f={top:15,right:100,bottom:10,left:50},g=null,h=null,i=[],j=!1,k=d3.format(",r"),l=d3.format(",.2f"),m=!0,n=!0,o=!1,p="No Data Available.";return a.sparkline=e,d3.rebind(a,e,"x","y","xScale","yScale","color"),a.options=c.utils.optionsFunc.bind(a),a.margin=function(b){return arguments.length?(f.top="undefined"!=typeof b.top?b.top:f.top,f.right="undefined"!=typeof b.right?b.right:f.right,f.bottom="undefined"!=typeof b.bottom?b.bottom:f.bottom,f.left="undefined"!=typeof b.left?b.left:f.left,a):f},a.width=function(b){return arguments.length?(g=b,a):g},a.height=function(b){return arguments.length?(h=b,a):h},a.xTickFormat=function(b){return arguments.length?(k=b,a):k},a.yTickFormat=function(b){return arguments.length?(l=b,a):l},a.showValue=function(b){return arguments.length?(m=b,a):m},a.alignValue=function(b){return arguments.length?(n=b,a):n},a.rightAlignValue=function(b){return arguments.length?(o=b,a):o},a.noData=function(b){return arguments.length?(p=b,a):p},a},c.models.stackedArea=function(){"use strict";function a(c){return c.each(function(c){var l=f-e.left-e.right,s=g-e.top-e.bottom,t=d3.select(this);b=q.xScale(),d=q.yScale();var u=c;c.forEach(function(a,b){a.seriesIndex=b,a.values=a.values.map(function(a,c){return a.index=c,a.seriesIndex=b,a})});var v=c.filter(function(a){return!a.disabled});c=d3.layout.stack().order(n).offset(m).values(function(a){return a.values}).x(j).y(k).out(function(a,b,c){var d=0===k(a)?0:c;a.display={y:d,y0:b}})(v);var w=t.selectAll("g.nv-wrap.nv-stackedarea").data([c]),x=w.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea"),y=x.append("defs"),z=x.append("g"),A=w.select("g");z.append("g").attr("class","nv-areaWrap"),z.append("g").attr("class","nv-scatterWrap"),w.attr("transform","translate("+e.left+","+e.top+")"),q.width(l).height(s).x(j).y(function(a){return a.display.y+a.display.y0}).forceY([0]).color(c.map(function(a,b){return a.color||h(a,a.seriesIndex)}));var B=A.select(".nv-scatterWrap").datum(c);B.call(q),y.append("clipPath").attr("id","nv-edge-clip-"+i).append("rect"),w.select("#nv-edge-clip-"+i+" rect").attr("width",l).attr("height",s),A.attr("clip-path",p?"url(#nv-edge-clip-"+i+")":"");var C=d3.svg.area().x(function(a,c){return b(j(a,c))}).y0(function(a){return d(a.display.y0)}).y1(function(a){return d(a.display.y+a.display.y0)}).interpolate(o),D=d3.svg.area().x(function(a,c){return b(j(a,c))}).y0(function(a){return d(a.display.y0)}).y1(function(a){return d(a.display.y0)}),E=A.select(".nv-areaWrap").selectAll("path.nv-area").data(function(a){return a});E.enter().append("path").attr("class",function(a,b){return"nv-area nv-area-"+b}).attr("d",function(a,b){return D(a.values,a.seriesIndex)}).on("mouseover",function(a,b){d3.select(this).classed("hover",!0),r.areaMouseover({point:a,series:a.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:a.seriesIndex})}).on("mouseout",function(a,b){d3.select(this).classed("hover",!1),r.areaMouseout({point:a,series:a.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:a.seriesIndex})}).on("click",function(a,b){d3.select(this).classed("hover",!1),r.areaClick({point:a,series:a.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:a.seriesIndex})}),E.exit().remove(),E.style("fill",function(a,b){return a.color||h(a,a.seriesIndex)}).style("stroke",function(a,b){return a.color||h(a,a.seriesIndex)}),E.transition().attr("d",function(a,b){return C(a.values,b)}),q.dispatch.on("elementMouseover.area",function(a){A.select(".nv-chart-"+i+" .nv-area-"+a.seriesIndex).classed("hover",!0)}),q.dispatch.on("elementMouseout.area",function(a){A.select(".nv-chart-"+i+" .nv-area-"+a.seriesIndex).classed("hover",!1)}),a.d3_stackedOffset_stackPercent=function(a){var b,c,d,e=a.length,f=a[0].length,g=1/e,h=[];for(c=0;f>c;++c){for(b=0,d=0;b<u.length;b++)d+=k(u[b].values[c]);if(d)for(b=0;e>b;b++)a[b][c][1]/=d;else for(b=0;e>b;b++)a[b][c][1]=g}for(c=0;f>c;++c)h[c]=0;return h}}),a}var b,d,e={top:0,right:0,bottom:0,left:0},f=960,g=500,h=c.utils.defaultColor(),i=Math.floor(1e5*Math.random()),j=function(a){return a.x},k=function(a){return a.y},l="stack",m="zero",n="default",o="linear",p=!1,q=c.models.scatter(),r=d3.dispatch("tooltipShow","tooltipHide","areaClick","areaMouseover","areaMouseout");return q.size(2.2).sizeDomain([2.2,2.2]),q.dispatch.on("elementClick.area",function(a){r.areaClick(a)}),q.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+e.left,a.pos[1]+e.top],r.tooltipShow(a)}),q.dispatch.on("elementMouseout.tooltip",function(a){r.tooltipHide(a)}),a.dispatch=r,a.scatter=q,d3.rebind(a,q,"interactive","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","forceX","forceY","forceSize","clipVoronoi","useVoronoi","clipRadius","highlightPoint","clearHighlights"),a.options=c.utils.optionsFunc.bind(a),a.x=function(b){return arguments.length?(j=d3.functor(b),a):j},a.y=function(b){return arguments.length?(k=d3.functor(b),a):k},a.margin=function(b){return arguments.length?(e.top="undefined"!=typeof b.top?b.top:e.top,e.right="undefined"!=typeof b.right?b.right:e.right,e.bottom="undefined"!=typeof b.bottom?b.bottom:e.bottom,e.left="undefined"!=typeof b.left?b.left:e.left,a):e},a.width=function(b){return arguments.length?(f=b,a):f},a.height=function(b){return arguments.length?(g=b,a):g},a.clipEdge=function(b){return arguments.length?(p=b,a):p},a.color=function(b){return arguments.length?(h=c.utils.getColor(b),a):h},a.offset=function(b){return arguments.length?(m=b,a):m},a.order=function(b){return arguments.length?(n=b,a):n},a.style=function(b){if(!arguments.length)return l;switch(l=b){case"stack":a.offset("zero"),a.order("default");break;case"stream":a.offset("wiggle"),a.order("inside-out");break;case"stream-center":a.offset("silhouette"),a.order("inside-out");break;case"expand":a.offset("expand"),a.order("default");break;case"stack_percent":a.offset(a.d3_stackedOffset_stackPercent),a.order("default")}return a},a.interpolate=function(b){return arguments.length?(o=b,a):o},a},c.models.stackedAreaChart=function(){"use strict";function a(v){return v.each(function(v){var G=d3.select(this),H=this,I=(l||parseInt(G.style("width"))||960)-k.left-k.right,J=(m||parseInt(G.style("height"))||400)-k.top-k.bottom;if(a.update=function(){G.transition().duration(E).call(a)},a.container=this,x.disabled=v.map(function(a){return!!a.disabled}),!y){var K;y={};for(K in x)x[K]instanceof Array?y[K]=x[K].slice(0):y[K]=x[K]}if(!(v&&v.length&&v.filter(function(a){return a.values.length}).length)){var L=G.selectAll(".nv-noData").data([z]);return L.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),L.attr("x",k.left+I/2).attr("y",k.top+J/2).text(function(a){return a}),a}G.selectAll(".nv-noData").remove(),b=e.xScale(),d=e.yScale();var M=G.selectAll("g.nv-wrap.nv-stackedAreaChart").data([v]),N=M.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g"),O=M.select("g");if(N.append("rect").style("opacity",0),N.append("g").attr("class","nv-x nv-axis"),N.append("g").attr("class","nv-y nv-axis"),N.append("g").attr("class","nv-stackedWrap"),N.append("g").attr("class","nv-legendWrap"),N.append("g").attr("class","nv-controlsWrap"),N.append("g").attr("class","nv-interactive"),O.select("rect").attr("width",I).attr("height",J),p){var P=o?I-B:I;h.width(P),O.select(".nv-legendWrap").datum(v).call(h),k.top!=h.height()&&(k.top=h.height(),J=(m||parseInt(G.style("height"))||400)-k.top-k.bottom),O.select(".nv-legendWrap").attr("transform","translate("+(I-P)+","+-k.top+")")}if(o){var Q=[{key:D.stacked||"Stacked",metaKey:"Stacked",disabled:"stack"!=e.style(),style:"stack"},{key:D.stream||"Stream",metaKey:"Stream",disabled:"stream"!=e.style(),style:"stream"},{key:D.expanded||"Expanded",metaKey:"Expanded",disabled:"expand"!=e.style(),style:"expand"},{key:D.stack_percent||"Stack %",metaKey:"Stack_Percent",disabled:"stack_percent"!=e.style(),style:"stack_percent"}];B=C.length/3*260,Q=Q.filter(function(a){return-1!==C.indexOf(a.metaKey)}),i.width(B).color(["#444","#444","#444"]),O.select(".nv-controlsWrap").datum(Q).call(i),k.top!=Math.max(i.height(),h.height())&&(k.top=Math.max(i.height(),h.height()),J=(m||parseInt(G.style("height"))||400)-k.top-k.bottom),O.select(".nv-controlsWrap").attr("transform","translate(0,"+-k.top+")")}M.attr("transform","translate("+k.left+","+k.top+")"),s&&O.select(".nv-y.nv-axis").attr("transform","translate("+I+",0)"),t&&(j.width(I).height(J).margin({left:k.left,top:k.top}).svgContainer(G).xScale(b),M.select(".nv-interactive").call(j)),e.width(I).height(J);var R=O.select(".nv-stackedWrap").datum(v);R.transition().call(e),q&&(f.scale(b).ticks(I/100).tickSize(-J,0),O.select(".nv-x.nv-axis").attr("transform","translate(0,"+J+")"),O.select(".nv-x.nv-axis").transition().duration(0).call(f)),r&&(g.scale(d).ticks("wiggle"==e.offset()?0:J/36).tickSize(-I,0).setTickFormat("expand"==e.style()||"stack_percent"==e.style()?d3.format("%"):w),O.select(".nv-y.nv-axis").transition().duration(0).call(g)),e.dispatch.on("areaClick.toggle",function(b){1===v.filter(function(a){return!a.disabled}).length?v.forEach(function(a){a.disabled=!1}):v.forEach(function(a,c){a.disabled=c!=b.seriesIndex}),x.disabled=v.map(function(a){return!!a.disabled}),A.stateChange(x),a.update()}),h.dispatch.on("stateChange",function(b){x.disabled=b.disabled,A.stateChange(x),a.update()}),i.dispatch.on("legendClick",function(b,c){b.disabled&&(Q=Q.map(function(a){return a.disabled=!0,a}),b.disabled=!1,e.style(b.style),x.style=e.style(),A.stateChange(x),a.update())}),j.dispatch.on("elementMousemove",function(b){e.clearHighlights();var d,h,i,l=[];if(v.filter(function(a,b){return a.seriesIndex=b,!a.disabled}).forEach(function(f,g){h=c.interactiveBisect(f.values,b.pointXValue,a.x()),e.highlightPoint(g,h,!0);var j=f.values[h];if("undefined"!=typeof j){"undefined"==typeof d&&(d=j),"undefined"==typeof i&&(i=a.xScale()(a.x()(j,h)));var k="expand"==e.style()?j.display.y:a.y()(j,h);l.push({key:f.key,value:k,color:n(f,f.seriesIndex),stackedValue:j.display})}}),l.reverse(),l.length>2){var m=a.yScale().invert(b.mouseY),o=null;l.forEach(function(a,b){m=Math.abs(m);var c=Math.abs(a.stackedValue.y0),d=Math.abs(a.stackedValue.y);return m>=c&&d+c>=m?void(o=b):void 0}),null!=o&&(l[o].highlight=!0)}var p=f.tickFormat()(a.x()(d,h)),q="expand"==e.style()?function(a,b){return d3.format(".1%")(a)}:function(a,b){return g.tickFormat()(a)};j.tooltip.position({left:i+k.left,top:b.mouseY+k.top}).chartContainer(H.parentNode).enabled(u).valueFormatter(q).data({value:p,series:l})(),j.renderGuideLine(i)}),j.dispatch.on("elementMouseout",function(a){A.tooltipHide(),e.clearHighlights()}),A.on("tooltipShow",function(a){u&&F(a,H.parentNode)}),A.on("changeState",function(b){"undefined"!=typeof b.disabled&&v.length===b.disabled.length&&(v.forEach(function(a,c){a.disabled=b.disabled[c]}),x.disabled=b.disabled),"undefined"!=typeof b.style&&e.style(b.style),a.update()})}),a}var b,d,e=c.models.stackedArea(),f=c.models.axis(),g=c.models.axis(),h=c.models.legend(),i=c.models.legend(),j=c.interactiveGuideline(),k={top:30,right:25,bottom:50,left:60},l=null,m=null,n=c.utils.defaultColor(),o=!0,p=!0,q=!0,r=!0,s=!1,t=!1,u=!0,v=function(a,b,c,d,e){return"<h3>"+a+"</h3><p>"+c+" on "+b+"</p>"},w=d3.format(",.2f"),x={style:e.style()},y=null,z="No Data Available.",A=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),B=250,C=["Stacked","Stream","Expanded"],D={},E=250;f.orient("bottom").tickPadding(7),g.orient(s?"right":"left"),i.updateState(!1);var F=function(b,d){var h=b.pos[0]+(d.offsetLeft||0),i=b.pos[1]+(d.offsetTop||0),j=f.tickFormat()(e.x()(b.point,b.pointIndex)),k=g.tickFormat()(e.y()(b.point,b.pointIndex)),l=v(b.series.key,j,k,b,a);c.tooltip.show([h,i],l,b.value<0?"n":"s",null,d)};return e.dispatch.on("tooltipShow",function(a){a.pos=[a.pos[0]+k.left,a.pos[1]+k.top],A.tooltipShow(a)}),e.dispatch.on("tooltipHide",function(a){A.tooltipHide(a)}),A.on("tooltipHide",function(){u&&c.tooltip.cleanup()}),a.dispatch=A,a.stacked=e,a.legend=h,a.controls=i,a.xAxis=f,a.yAxis=g,a.interactiveLayer=j,d3.rebind(a,e,"x","y","size","xScale","yScale","xDomain","yDomain","xRange","yRange","sizeDomain","interactive","useVoronoi","offset","order","style","clipEdge","forceX","forceY","forceSize","interpolate"),a.options=c.utils.optionsFunc.bind(a),a.margin=function(b){return arguments.length?(k.top="undefined"!=typeof b.top?b.top:k.top,k.right="undefined"!=typeof b.right?b.right:k.right,k.bottom="undefined"!=typeof b.bottom?b.bottom:k.bottom,k.left="undefined"!=typeof b.left?b.left:k.left,a):k},a.width=function(b){return arguments.length?(l=b,a):l},a.height=function(b){return arguments.length?(m=b,a):m},a.color=function(b){return arguments.length?(n=c.utils.getColor(b),h.color(n),e.color(n),a):n},a.showControls=function(b){return arguments.length?(o=b,a):o},a.showLegend=function(b){return arguments.length?(p=b,a):p},a.showXAxis=function(b){return arguments.length?(q=b,a):q},a.showYAxis=function(b){return arguments.length?(r=b,a):r},a.rightAlignYAxis=function(b){return arguments.length?(s=b,g.orient(b?"right":"left"),a):s},a.useInteractiveGuideline=function(b){return arguments.length?(t=b,b===!0&&(a.interactive(!1),a.useVoronoi(!1)),a):t},a.tooltip=function(b){return arguments.length?(v=b,a):v},a.tooltips=function(b){return arguments.length?(u=b,a):u},a.tooltipContent=function(b){return arguments.length?(v=b,a):v},a.state=function(b){return arguments.length?(x=b,a):x},a.defaultState=function(b){return arguments.length?(y=b,a):y},a.noData=function(b){return arguments.length?(z=b,a):z},a.transitionDuration=function(b){return arguments.length?(E=b,a):E},a.controlsData=function(b){return arguments.length?(C=b,a):C},a.controlLabels=function(b){return arguments.length?"object"!=typeof b?D:(D=b,a):D},g.setTickFormat=g.tickFormat,g.tickFormat=function(a){return arguments.length?(w=a,g):w},a}}(),function(a,b){"use strict";function c(a,b,c){if(!a)throw pa("areq","Argument '{0}' is {1}",b||"?",c||"required");return a}function d(a,b){return a||b?a?b?(Q(a)&&(a=a.join(" ")),Q(b)&&(b=b.join(" ")),a+" "+b):a:b:""}function e(a){var b={};return a&&(a.to||a.from)&&(b.to=a.to,b.from=a.from),b}function f(a,b,c){var d="";return a=Q(a)?a:a&&R(a)&&a.length?a.split(/\s+/):[],P(a,function(a,e){a&&a.length>0&&(d+=e>0?" ":"",d+=c?b+a:a+b)}),d}function g(a,b){var c=a.indexOf(b);b>=0&&a.splice(c,1)}function h(a){if(a instanceof O)switch(a.length){case 0:return[];case 1:if(a[0].nodeType===X)return a;break;default:return O(i(a))}return a.nodeType===X?O(a):void 0}function i(a){if(!a[0])return a;for(var b=0;b<a.length;b++){var c=a[b];if(c.nodeType==X)return c}}function j(a,b,c){P(b,function(b){a.addClass(b,c)})}function k(a,b,c){P(b,function(b){a.removeClass(b,c)})}function l(a){return function(b,c){c.addClass&&(j(a,b,c.addClass),c.addClass=null),c.removeClass&&(k(a,b,c.removeClass),c.removeClass=null)}}function m(a){if(a=a||{},!a.$$prepared){var b=a.domOperation||L;a.domOperation=function(){a.$$domOperationFired=!0,b(),b=L},a.$$prepared=!0}return a}function n(a,b){o(a,b),p(a,b)}function o(a,b){b.from&&(a.css(b.from),b.from=null)}function p(a,b){b.to&&(a.css(b.to),b.to=null)}function q(a,b,c){var d=b.options||{},e=c.options||{},f=(d.addClass||"")+" "+(e.addClass||""),g=(d.removeClass||"")+" "+(e.removeClass||""),h=r(a.attr("class"),f,g);e.preparationClasses&&(d.preparationClasses=y(e.preparationClasses,d.preparationClasses),delete e.preparationClasses);var i=d.domOperation!==L?d.domOperation:null;return N(d,e),i&&(d.domOperation=i),h.addClass?d.addClass=h.addClass:d.addClass=null,h.removeClass?d.removeClass=h.removeClass:d.removeClass=null,b.addClass=d.addClass,b.removeClass=d.removeClass,d}function r(a,b,c){function d(a){R(a)&&(a=a.split(" "));var b={};return P(a,function(a){a.length&&(b[a]=!0)}),b}var e=1,f=-1,g={};a=d(a),b=d(b),P(b,function(a,b){g[b]=e}),c=d(c),P(c,function(a,b){g[b]=g[b]===e?null:f});var h={addClass:"",removeClass:""};return P(g,function(b,c){var d,g;b===e?(d="addClass",g=!a[c]):b===f&&(d="removeClass",g=a[c]),g&&(h[d].length&&(h[d]+=" "),h[d]+=c)}),h}function s(a){return a instanceof b.element?a[0]:a}function t(a,b,c){var d="";b&&(d=f(b,$,!0)),c.addClass&&(d=y(d,f(c.addClass,Y))),c.removeClass&&(d=y(d,f(c.removeClass,Z))),d.length&&(c.preparationClasses=d,a.addClass(d))}function u(a,b){b.preparationClasses&&(a.removeClass(b.preparationClasses),b.preparationClasses=null),b.activeClasses&&(a.removeClass(b.activeClasses),b.activeClasses=null)}function v(a,b){var c=b?"-"+b+"s":"";return x(a,[na,c]),[na,c]}function w(a,b){var c=b?"paused":"",d=J+ja;return x(a,[d,c]),[d,c]}function x(a,b){var c=b[0],d=b[1];a.style[c]=d}function y(a,b){return a?b?a+" "+b:a:b}function z(a){return[ma,a+"s"]}function A(a,b){var c=b?la:na;return[c,a+"s"]}function B(a,b,c){var d=Object.create(null),e=a.getComputedStyle(b)||{};return P(c,function(a,b){var c=e[a];if(c){var f=c.charAt(0);("-"===f||"+"===f||f>=0)&&(c=C(c)),0===c&&(c=null),d[b]=c}}),d}function C(a){var b=0,c=a.split(/\s*,\s*/);return P(c,function(a){"s"==a.charAt(a.length-1)&&(a=a.substring(0,a.length-1)),a=parseFloat(a)||0,b=b?Math.max(a,b):a}),b}function D(a){return 0===a||null!=a}function E(a,b){var c=H,d=a+"s";return b?c+=ea:d+=" linear all",[c,d]}function F(){var a=Object.create(null);return{flush:function(){a=Object.create(null)},count:function(b){var c=a[b];return c?c.total:0},get:function(b){var c=a[b];return c&&c.value},put:function(b,c){a[b]?a[b].total++:a[b]={total:1,value:c}}}}function G(a,b,c){P(c,function(c){a[c]=U(a[c])?a[c]:b.style.getPropertyValue(c)})}var H,I,J,K,L=b.noop,M=b.copy,N=b.extend,O=b.element,P=b.forEach,Q=b.isArray,R=b.isString,S=b.isObject,T=b.isUndefined,U=b.isDefined,V=b.isFunction,W=b.isElement,X=1,Y="-add",Z="-remove",$="ng-",_="-active",aa="-prepare",ba="ng-animate",ca="$$ngAnimateChildren",da="";T(a.ontransitionend)&&U(a.onwebkittransitionend)?(da="-webkit-",H="WebkitTransition",I="webkitTransitionEnd transitionend"):(H="transition",I="transitionend"),T(a.onanimationend)&&U(a.onwebkitanimationend)?(da="-webkit-",J="WebkitAnimation",K="webkitAnimationEnd animationend"):(J="animation",K="animationend");var ea="Duration",fa="Property",ga="Delay",ha="TimingFunction",ia="IterationCount",ja="PlayState",ka=9999,la=J+ga,ma=J+ea,na=H+ga,oa=H+ea,pa=b.$$minErr("ng"),qa=["$$rAF",function(a){function b(a){d=d.concat(a),c()}function c(){if(d.length){for(var b=d.shift(),f=0;f<b.length;f++)b[f]();e||a(function(){e||c()})}}var d,e;return d=b.queue=[],b.waitUntilQuiet=function(b){e&&e(),e=a(function(){e=null,b(),c()})},b}],ra=["$interpolate",function(a){return{link:function(c,d,e){function f(a){a="on"===a||"true"===a,d.data(ca,a)}var g=e.ngAnimateChildren;b.isString(g)&&0===g.length?d.data(ca,!0):(f(a(g)(c)),e.$observe("ngAnimateChildren",f))}}}],sa="$$animateCss",ta=1e3,ua=3,va=1.5,wa={transitionDuration:oa,transitionDelay:na,transitionProperty:H+fa,animationDuration:ma,animationDelay:la,animationIterationCount:J+ia},xa={transitionDuration:oa,transitionDelay:na,animationDuration:ma,animationDelay:la},ya=["$animateProvider",function(a){var b=F(),c=F();this.$get=["$window","$$jqLite","$$AnimateRunner","$timeout","$$forceReflow","$sniffer","$$rAFScheduler","$$animateQueue",function(a,d,h,i,j,k,q,r){function t(a,b){var c="$$ngAnimateParentKey",d=a.parentNode,e=d[c]||(d[c]=++O);return e+"-"+a.getAttribute("class")+"-"+b}function u(c,d,e,f){var g=b.get(e);return g||(g=B(a,c,f),"infinite"===g.animationIterationCount&&(g.animationIterationCount=1)),b.put(e,g),g}function y(e,g,h,i){var j;if(b.count(h)>0&&(j=c.get(h),!j)){var k=f(g,"-stagger");d.addClass(e,k),j=B(a,e,i),j.animationDuration=Math.max(j.animationDuration,0),j.transitionDuration=Math.max(j.transitionDuration,0),d.removeClass(e,k),c.put(h,j)}return j||{}}function C(a){R.push(a),q.waitUntilQuiet(function(){b.flush(),c.flush();for(var a=j(),d=0;d<R.length;d++)R[d](a);R.length=0})}function F(a,b,c){var d=u(a,b,c,wa),e=d.animationDelay,f=d.transitionDelay;return d.maxDelay=e&&f?Math.max(e,f):e||f,d.maxDuration=Math.max(d.animationDuration*d.animationIterationCount,d.transitionDuration),d}var N=l(d),O=0,R=[];return function(a,c){function j(){q()}function l(){q(!0)}function q(b){if(!(V||X&&W)){V=!0,W=!1,S.$$skipPreparationClasses||d.removeClass(a,wa),d.removeClass(a,za),w(U,!1),v(U,!1),P(ja,function(a){U.style[a[0]]=""}),N(a,S),n(a,S),Object.keys(T).length&&P(T,function(a,b){a?U.style.setProperty(b,a):U.style.removeProperty(b)}),S.onDone&&S.onDone(),na&&na.length&&a.off(na.join(" "),O);var c=a.data(sa);c&&(i.cancel(c[0].timer),a.removeData(sa)),aa&&aa.complete(!b)}}function u(a){Na.blockTransition&&v(U,a),Na.blockKeyframeAnimation&&w(U,!!a)}function B(){return aa=new h({end:j,cancel:l}),C(L),q(),{$$willAnimate:!1,start:function(){return aa},end:j}}function O(a){a.stopPropagation();var b=a.originalEvent||a,c=b.$manualTimeStamp||Date.now(),d=parseFloat(b.elapsedTime.toFixed(ua));Math.max(c-ia,0)>=da&&d>=ea&&(X=!0,q())}function R(){function b(){if(!V){if(u(!1),P(ja,function(a){var b=a[0],c=a[1];U.style[b]=c}),N(a,S),d.addClass(a,za),Na.recalculateTimingStyles){if(ya=U.className+" "+wa,Ca=t(U,ya),La=F(U,ya,Ca),Ma=La.maxDelay,ca=Math.max(Ma,0),ea=La.maxDuration,0===ea)return void q();Na.hasTransitions=La.transitionDuration>0,Na.hasAnimations=La.animationDuration>0}if(Na.applyAnimationDelay&&(Ma="boolean"!=typeof S.delay&&D(S.delay)?parseFloat(S.delay):Ma,ca=Math.max(Ma,0),La.animationDelay=Ma,Oa=A(Ma,!0),ja.push(Oa),U.style[Oa[0]]=Oa[1]),da=ca*ta,ga=ea*ta,S.easing){var b,e=S.easing;Na.hasTransitions&&(b=H+ha,ja.push([b,e]),U.style[b]=e),Na.hasAnimations&&(b=J+ha,ja.push([b,e]),U.style[b]=e)}La.transitionDuration&&na.push(I),La.animationDuration&&na.push(K),ia=Date.now();var f=da+va*ga,g=ia+f,h=a.data(sa)||[],j=!0;if(h.length){var k=h[0];j=g>k.expectedEndTime,j?i.cancel(k.timer):h.push(q)}if(j){var l=i(c,f,!1);h[0]={timer:l,expectedEndTime:g},h.push(q),a.data(sa,h)}na.length&&a.on(na.join(" "),O),S.to&&(S.cleanupStyles&&G(T,U,Object.keys(S.to)),p(a,S))}}function c(){var b=a.data(sa);if(b){for(var c=1;c<b.length;c++)b[c]();a.removeData(sa)}}if(!V){if(!U.parentNode)return void q();var e=function(a){if(X)W&&a&&(W=!1,q());else if(W=!a,La.animationDuration){var b=w(U,W);W?ja.push(b):g(ja,b)}},f=Ja>0&&(La.transitionDuration&&0===Da.transitionDuration||La.animationDuration&&0===Da.animationDuration)&&Math.max(Da.animationDelay,Da.transitionDelay);f?i(b,Math.floor(f*Ja*ta),!1):b(),ba.resume=function(){e(!0)},ba.pause=function(){e(!1)}}}var S=c||{};S.$$prepared||(S=m(M(S)));var T={},U=s(a);if(!U||!U.parentNode||!r.enabled())return B();var V,W,X,aa,ba,ca,da,ea,ga,ia,ja=[],la=a.attr("class"),ma=e(S),na=[];if(0===S.duration||!k.animations&&!k.transitions)return B();var oa=S.event&&Q(S.event)?S.event.join(" "):S.event,pa=oa&&S.structural,qa="",ra="";pa?qa=f(oa,$,!0):oa&&(qa=oa),S.addClass&&(ra+=f(S.addClass,Y)),S.removeClass&&(ra.length&&(ra+=" "),ra+=f(S.removeClass,Z)),S.applyClassesEarly&&ra.length&&N(a,S);var wa=[qa,ra].join(" ").trim(),ya=la+" "+wa,za=f(wa,_),Aa=ma.to&&Object.keys(ma.to).length>0,Ba=(S.keyframeStyle||"").length>0;if(!Ba&&!Aa&&!wa)return B();var Ca,Da;if(S.stagger>0){var Ea=parseFloat(S.stagger);Da={transitionDelay:Ea,animationDelay:Ea,transitionDuration:0,animationDuration:0}}else Ca=t(U,ya),Da=y(U,wa,Ca,xa);S.$$skipPreparationClasses||d.addClass(a,wa);var Fa;if(S.transitionStyle){var Ga=[H,S.transitionStyle];x(U,Ga),ja.push(Ga)}if(S.duration>=0){Fa=U.style[H].length>0;var Ha=E(S.duration,Fa);x(U,Ha),ja.push(Ha)}if(S.keyframeStyle){var Ia=[J,S.keyframeStyle];x(U,Ia),ja.push(Ia)}var Ja=Da?S.staggerIndex>=0?S.staggerIndex:b.count(Ca):0,Ka=0===Ja;Ka&&!S.skipBlocking&&v(U,ka);var La=F(U,ya,Ca),Ma=La.maxDelay;ca=Math.max(Ma,0),ea=La.maxDuration;var Na={};if(Na.hasTransitions=La.transitionDuration>0,Na.hasAnimations=La.animationDuration>0,Na.hasTransitionAll=Na.hasTransitions&&"all"==La.transitionProperty,Na.applyTransitionDuration=Aa&&(Na.hasTransitions&&!Na.hasTransitionAll||Na.hasAnimations&&!Na.hasTransitions),Na.applyAnimationDuration=S.duration&&Na.hasAnimations,Na.applyTransitionDelay=D(S.delay)&&(Na.applyTransitionDuration||Na.hasTransitions),Na.applyAnimationDelay=D(S.delay)&&Na.hasAnimations,Na.recalculateTimingStyles=ra.length>0,(Na.applyTransitionDuration||Na.applyAnimationDuration)&&(ea=S.duration?parseFloat(S.duration):ea,Na.applyTransitionDuration&&(Na.hasTransitions=!0,La.transitionDuration=ea,Fa=U.style[H+fa].length>0,ja.push(E(ea,Fa))),Na.applyAnimationDuration&&(Na.hasAnimations=!0,La.animationDuration=ea,ja.push(z(ea)))),0===ea&&!Na.recalculateTimingStyles)return B();if(null!=S.delay){var Oa;"boolean"!=typeof S.delay&&(Oa=parseFloat(S.delay),ca=Math.max(Oa,0)),Na.applyTransitionDelay&&ja.push(A(Oa)),Na.applyAnimationDelay&&ja.push(A(Oa,!0))}return null==S.duration&&La.transitionDuration>0&&(Na.recalculateTimingStyles=Na.recalculateTimingStyles||Ka),da=ca*ta,ga=ea*ta,S.skipBlocking||(Na.blockTransition=La.transitionDuration>0,Na.blockKeyframeAnimation=La.animationDuration>0&&Da.animationDelay>0&&0===Da.animationDuration),S.from&&(S.cleanupStyles&&G(T,U,Object.keys(S.from)),o(a,S)),Na.blockTransition||Na.blockKeyframeAnimation?u(ea):S.skipBlocking||v(U,!1),{$$willAnimate:!0,end:j,start:function(){return V?void 0:(ba={end:j,cancel:l,resume:null,pause:null},aa=new h(ba),C(R),aa)}}}}]}],za=["$$animationProvider",function(a){function b(a){return a.parentNode&&11===a.parentNode.nodeType}a.drivers.push("$$animateCssDriver");var c="ng-animate-shim",d="ng-anchor",e="ng-anchor-out",f="ng-anchor-in";this.$get=["$animateCss","$rootScope","$$AnimateRunner","$rootElement","$sniffer","$$jqLite","$document",function(a,g,h,i,j,k,m){function n(a){return a.replace(/\bng-\S+\b/g,"")}function o(a,b){return R(a)&&(a=a.split(" ")),R(b)&&(b=b.split(" ")),a.filter(function(a){return-1===b.indexOf(a)}).join(" ")}function p(b,g,i){function j(a){var b={},c=s(a).getBoundingClientRect();return P(["width","height","top","left"],function(a){var d=c[a];switch(a){case"top":d+=t.scrollTop;break;case"left":d+=t.scrollLeft}b[a]=Math.floor(d)+"px"}),b}function k(){var b=a(q,{addClass:e,delay:!0,from:j(g)});return b.$$willAnimate?b:null}function l(a){return a.attr("class")||""}function m(){var b=n(l(i)),c=o(b,r),d=o(r,b),g=a(q,{to:j(i),addClass:f+" "+c,removeClass:e+" "+d,delay:!0});return g.$$willAnimate?g:null}function p(){q.remove(),g.removeClass(c),i.removeClass(c)}var q=O(s(g).cloneNode(!0)),r=n(l(q));g.addClass(c),i.addClass(c),q.addClass(d),v.append(q);var u,w=k();if(!w&&(u=m(),!u))return p();var x=w||u;return{start:function(){function a(){c&&c.end()}var b,c=x.start();return c.done(function(){return c=null,!u&&(u=m())?(c=u.start(),c.done(function(){c=null,p(),b.complete()}),c):(p(),void b.complete())}),b=new h({end:a,cancel:a})}}}function q(a,b,c,d){var e=r(a,L),f=r(b,L),g=[];return P(d,function(a){var b=a.out,d=a["in"],e=p(c,b,d);e&&g.push(e)}),e||f||0!==g.length?{start:function(){function a(){P(b,function(a){a.end()})}var b=[];e&&b.push(e.start()),f&&b.push(f.start()),P(g,function(a){b.push(a.start())});var c=new h({end:a,cancel:a});return h.all(b,function(a){c.complete(a)}),c}}:void 0}function r(b){var c=b.element,d=b.options||{};b.structural&&(d.event=b.event,d.structural=!0,d.applyClassesEarly=!0,"leave"===b.event&&(d.onDone=d.domOperation)),d.preparationClasses&&(d.event=y(d.event,d.preparationClasses));var e=a(c,d);return e.$$willAnimate?e:null}if(!j.animations&&!j.transitions)return L;var t=m[0].body,u=s(i),v=O(b(u)||t.contains(u)?u:t);l(k);return function(a){return a.from&&a.to?q(a.from,a.to,a.classes,a.anchors):r(a)}}]}],Aa=["$animateProvider",function(a){this.$get=["$injector","$$AnimateRunner","$$jqLite",function(b,c,d){function e(c){c=Q(c)?c:c.split(" ");for(var d=[],e={},f=0;f<c.length;f++){var g=c[f],h=a.$$registeredAnimations[g];h&&!e[g]&&(d.push(b.get(h)),e[g]=!0)}return d}var f=l(d);return function(a,b,d,g){function h(){g.domOperation(),f(a,g)}function i(){o=!0,h(),n(a,g)}function j(a,b,d,e,f){var g;switch(d){case"animate":g=[b,e.from,e.to,f];break;case"setClass":g=[b,r,s,f];break;case"addClass":g=[b,r,f];break;case"removeClass":g=[b,s,f];break;default:g=[b,f]}g.push(e);var h=a.apply(a,g);if(h)if(V(h.start)&&(h=h.start()),h instanceof c)h.done(f);else if(V(h))return h;return L}function k(a,b,d,e,f){var g=[];return P(e,function(e){var h=e[f];h&&g.push(function(){var e,f,g=!1,i=function(a){g||(g=!0,(f||L)(a),e.complete(!a))};return e=new c({end:function(){i()},cancel:function(){i(!0)}}),f=j(h,a,b,d,function(a){var b=a===!1;i(b)}),e})}),g}function l(a,b,d,e,f){var g=k(a,b,d,e,f);if(0===g.length){var h,i;"beforeSetClass"===f?(h=k(a,"removeClass",d,e,"beforeRemoveClass"),i=k(a,"addClass",d,e,"beforeAddClass")):"setClass"===f&&(h=k(a,"removeClass",d,e,"removeClass"),i=k(a,"addClass",d,e,"addClass")),h&&(g=g.concat(h)),i&&(g=g.concat(i))}if(0!==g.length)return function(a){var b=[];return g.length&&P(g,function(a){b.push(a())}),b.length?c.all(b,a):a(),function(a){P(b,function(b){a?b.cancel():b.end()})}}}var o=!1;3===arguments.length&&S(d)&&(g=d,d=null),g=m(g),d||(d=a.attr("class")||"",g.addClass&&(d+=" "+g.addClass),g.removeClass&&(d+=" "+g.removeClass));var p,q,r=g.addClass,s=g.removeClass,t=e(d);if(t.length){var u,v;"leave"==b?(v="leave",u="afterLeave"):(v="before"+b.charAt(0).toUpperCase()+b.substr(1),u=b),"enter"!==b&&"move"!==b&&(p=l(a,b,g,t,v)),q=l(a,b,g,t,u)}if(p||q){var w;return{$$willAnimate:!0,end:function(){return w?w.end():(i(),w=new c,w.complete(!0)),w},start:function(){function a(a){i(a),w.complete(a)}function b(b){o||((d||L)(b),a(b))}if(w)return w;w=new c;var d,e=[];return p&&e.push(function(a){d=p(a)}),e.length?e.push(function(a){h(),a(!0)}):h(),q&&e.push(function(a){d=q(a)}),w.setHost({end:function(){b()},cancel:function(){b(!0)}}),c.chain(e,a),w}}}}}]}],Ba=["$$animationProvider",function(a){a.drivers.push("$$animateJsDriver"),this.$get=["$$animateJs","$$AnimateRunner",function(a,b){function c(b){var c=b.element,d=b.event,e=b.options,f=b.classes;return a(c,d,f,e)}return function(a){if(a.from&&a.to){var d=c(a.from),e=c(a.to);if(!d&&!e)return;return{start:function(){function a(){return function(){P(f,function(a){a.end()})}}function c(a){g.complete(a)}var f=[];d&&f.push(d.start()),e&&f.push(e.start()),b.all(f,c);var g=new b({end:a(),cancel:a()});return g}}}return c(a)}}]}],Ca="data-ng-animate",Da="$ngAnimatePin",Ea=["$animateProvider",function(d){
function e(a){if(!a)return null;var b=a.split(p),c=Object.create(null);return P(b,function(a){c[a]=!0}),c}function f(a,b){if(a&&b){var c=e(b);return a.split(p).some(function(a){return c[a]})}}function g(a,b,c,d){return r[a].some(function(a){return a(b,c,d)})}function j(a,b){var c=(a.addClass||"").length>0,d=(a.removeClass||"").length>0;return b?c&&d:c||d}var k=1,o=2,p=" ",r=this.rules={skip:[],cancel:[],join:[]};r.join.push(function(a,b,c){return!b.structural&&j(b)}),r.skip.push(function(a,b,c){return!b.structural&&!j(b)}),r.skip.push(function(a,b,c){return"leave"==c.event&&b.structural}),r.skip.push(function(a,b,c){return c.structural&&c.state===o&&!b.structural}),r.cancel.push(function(a,b,c){return c.structural&&b.structural}),r.cancel.push(function(a,b,c){return c.state===o&&b.structural}),r.cancel.push(function(a,b,c){if(c.structural)return!1;var d=b.addClass,e=b.removeClass,g=c.addClass,h=c.removeClass;return T(d)&&T(e)||T(g)&&T(h)?!1:f(d,h)||f(e,g)}),this.$get=["$$rAF","$rootScope","$rootElement","$document","$$HashMap","$$animation","$$AnimateRunner","$templateRequest","$$jqLite","$$forceReflow",function(e,f,p,r,v,w,x,y,z,A){function B(){var a=!1;return function(b){a?b():f.$$postDigest(function(){a=!0,b()})}}function C(a,b){return q(a,b,{})}function D(a,b,c){var d=s(b),e=s(a),f=[],g=_[c];return g&&P(g,function(a){ea.call(a.node,d)?f.push(a.callback):"leave"===c&&ea.call(a.node,e)&&f.push(a.callback)}),f}function E(a,b,c){var d=i(b);return a.filter(function(a){var b=a.node===d&&(!c||a.callback===c);return!b})}function F(a,b){"close"!==a||b[0].parentNode||fa.off(b)}function G(a,b,c){function d(b,c,d,f){z(function(){var b=D(p,a,c);b.length?e(function(){P(b,function(b){b(a,d,f)}),F(d,a)}):F(d,a)}),b.progress(c,d,f)}function i(b){u(a,v),da(a,v),n(a,v),v.domOperation(),y.complete(!b)}var l,p,v=M(c);a=h(a),a&&(l=s(a),p=a.parent()),v=m(v);var y=new x,z=B();if(Q(v.addClass)&&(v.addClass=v.addClass.join(" ")),v.addClass&&!R(v.addClass)&&(v.addClass=null),Q(v.removeClass)&&(v.removeClass=v.removeClass.join(" ")),v.removeClass&&!R(v.removeClass)&&(v.removeClass=null),v.from&&!S(v.from)&&(v.from=null),v.to&&!S(v.to)&&(v.to=null),!l)return i(),y;var A=[l.className,v.addClass,v.removeClass].join(" ");if(!ba(A))return i(),y;var E=["enter","move","leave"].indexOf(b)>=0,G=r[0].hidden,J=!Z||G||Y.get(l),N=!J&&V.get(l)||{},O=!!N.state;if(J||O&&N.state==k||(J=!K(a,p,b)),J)return G&&d(y,b,"start"),i(),G&&d(y,b,"close"),y;E&&H(a);var T={structural:E,element:a,event:b,addClass:v.addClass,removeClass:v.removeClass,close:i,options:v,runner:y};if(O){var U=g("skip",a,T,N);if(U)return N.state===o?(i(),y):(q(a,N,T),N.runner);var W=g("cancel",a,T,N);if(W)if(N.state===o)N.runner.end();else{if(!N.structural)return q(a,N,T),N.runner;N.close()}else{var X=g("join",a,T,N);if(X){if(N.state!==o)return t(a,E?b:null,v),b=T.event=N.event,v=q(a,N,T),N.runner;C(a,T)}}}else C(a,T);var $=T.structural;if($||($="animate"===T.event&&Object.keys(T.options.to||{}).length>0||j(T)),!$)return i(),I(a),y;var _=(N.counter||0)+1;return T.counter=_,L(a,k,T),f.$$postDigest(function(){var c=V.get(l),e=!c;c=c||{};var f=a.parent()||[],g=f.length>0&&("animate"===c.event||c.structural||j(c));if(e||c.counter!==_||!g)return e&&(da(a,v),n(a,v)),(e||E&&c.event!==b)&&(v.domOperation(),y.end()),void(g||I(a));b=!c.structural&&j(c,!0)?"setClass":c.event,L(a,o);var h=w(a,b,c.options);y.setHost(h),d(y,b,"start",{}),h.done(function(c){i(!c);var e=V.get(l);e&&e.counter===_&&I(s(a)),d(y,b,"close",{})})}),y}function H(a){var b=s(a),c=b.querySelectorAll("["+Ca+"]");P(c,function(a){var b=parseInt(a.getAttribute(Ca)),c=V.get(a);if(c)switch(b){case o:c.runner.end();case k:V.remove(a)}})}function I(a){var b=s(a);b.removeAttribute(Ca),V.remove(b)}function J(a,b){return s(a)===s(b)}function K(a,b,c){var d,e=O(r[0].body),f=J(a,e)||"HTML"===a[0].nodeName,g=J(a,p),h=!1,i=Y.get(s(a)),j=O.data(a[0],Da);for(j&&(b=j),b=s(b);b&&(g||(g=J(b,p)),b.nodeType===X);){var k=V.get(b)||{};if(!h){var l=Y.get(b);if(l===!0&&i!==!1){i=!0;break}l===!1&&(i=!1),h=k.structural}if(T(d)||d===!0){var m=O.data(b,ca);U(m)&&(d=m)}if(h&&d===!1)break;if(f||(f=J(b,e)),f&&g)break;b=g||!(j=O.data(b,Da))?b.parentNode:s(j)}var n=(!h||d)&&i!==!0;return n&&g&&f}function L(a,b,c){c=c||{},c.state=b;var d=s(a);d.setAttribute(Ca,b);var e=V.get(d),f=e?N(e,c):c;V.put(d,f)}var V=new v,Y=new v,Z=null,$=f.$watch(function(){return 0===y.totalPendingRequests},function(a){a&&($(),f.$$postDigest(function(){f.$$postDigest(function(){null===Z&&(Z=!0)})}))}),_={},aa=d.classNameFilter(),ba=aa?function(a){return aa.test(a)}:function(){return!0},da=l(z),ea=a.Node.prototype.contains||function(a){return this===a||!!(16&this.compareDocumentPosition(a))},fa={on:function(a,b,c){var d=i(b);_[a]=_[a]||[],_[a].push({node:d,callback:c}),O(b).on("$destroy",function(){var e=V.get(d);e||fa.off(a,b,c)})},off:function(a,c,d){if(1!==arguments.length||b.isString(arguments[0])){var e=_[a];e&&(_[a]=1===arguments.length?null:E(e,c,d))}else{c=arguments[0];for(var f in _)_[f]=E(_[f],c)}},pin:function(a,b){c(W(a),"element","not an element"),c(W(b),"parentElement","not an element"),a.data(Da,b)},push:function(a,b,c,d){return c=c||{},c.domOperation=d,G(a,b,c)},enabled:function(a,b){var c=arguments.length;if(0===c)b=!!Z;else{var d=W(a);if(d){var e=s(a),f=Y.get(e);1===c?b=!f:Y.put(e,!b)}else b=Z=!!a}return b}};return fa}]}],Fa=["$animateProvider",function(a){function b(a,b){a.data(h,b)}function c(a){a.removeData(h)}function e(a){return a.data(h)}var f="ng-animate-ref",g=this.drivers=[],h="$$animationRunner";this.$get=["$$jqLite","$rootScope","$injector","$$AnimateRunner","$$HashMap","$$rAFScheduler",function(a,h,i,j,k,o){function p(a){function b(a){if(a.processed)return a;a.processed=!0;var c=a.domNode,d=c.parentNode;f.put(c,a);for(var g;d;){if(g=f.get(d)){g.processed||(g=b(g));break}d=d.parentNode}return(g||e).children.push(a),a}function c(a){var b,c=[],d=[];for(b=0;b<a.children.length;b++)d.push(a.children[b]);var e=d.length,f=0,g=[];for(b=0;b<d.length;b++){var h=d[b];0>=e&&(e=f,f=0,c.push(g),g=[]),g.push(h.fn),h.children.forEach(function(a){f++,d.push(a)}),e--}return g.length&&c.push(g),c}var d,e={children:[]},f=new k;for(d=0;d<a.length;d++){var g=a[d];f.put(g.domNode,a[d]={domNode:g.domNode,fn:g.fn,children:[]})}for(d=0;d<a.length;d++)b(a[d]);return c(e)}var q=[],r=l(a);return function(k,l,t){function u(a){var b="["+f+"]",c=a.hasAttribute(f)?[a]:a.querySelectorAll(b),d=[];return P(c,function(a){var b=a.getAttribute(f);b&&b.length&&d.push(a)}),d}function v(a){var b=[],c={};P(a,function(a,d){var e=a.element,g=s(e),h=a.event,i=["enter","move"].indexOf(h)>=0,j=a.structural?u(g):[];if(j.length){var k=i?"to":"from";P(j,function(a){var b=a.getAttribute(f);c[b]=c[b]||{},c[b][k]={animationID:d,element:O(a)}})}else b.push(a)});var d={},e={};return P(c,function(c,f){var g=c.from,h=c.to;if(!g||!h){var i=g?g.animationID:h.animationID,j=i.toString();return void(d[j]||(d[j]=!0,b.push(a[i])))}var k=a[g.animationID],l=a[h.animationID],m=g.animationID.toString();if(!e[m]){var n=e[m]={structural:!0,beforeStart:function(){k.beforeStart(),l.beforeStart()},close:function(){k.close(),l.close()},classes:w(k.classes,l.classes),from:k,to:l,anchors:[]};n.classes.length?b.push(n):(b.push(k),b.push(l))}e[m].anchors.push({out:g.element,"in":h.element})}),b}function w(a,b){a=a.split(" "),b=b.split(" ");for(var c=[],d=0;d<a.length;d++){var e=a[d];if("ng-"!==e.substring(0,3))for(var f=0;f<b.length;f++)if(e===b[f]){c.push(e);break}}return c.join(" ")}function x(a){for(var b=g.length-1;b>=0;b--){var c=g[b];if(i.has(c)){var d=i.get(c),e=d(a);if(e)return e}}}function y(){k.addClass(ba),F&&a.addClass(k,F),G&&(a.removeClass(k,G),G=null)}function z(a,b){function c(a){e(a).setHost(b)}a.from&&a.to?(c(a.from.element),c(a.to.element)):c(a.element)}function A(){var a=e(k);!a||"leave"===l&&t.$$domOperationFired||a.end()}function B(b){k.off("$destroy",A),c(k),r(k,t),n(k,t),t.domOperation(),F&&a.removeClass(k,F),k.removeClass(ba),D.complete(!b)}t=m(t);var C=["enter","move","leave"].indexOf(l)>=0,D=new j({end:function(){B()},cancel:function(){B(!0)}});if(!g.length)return B(),D;b(k,D);var E=d(k.attr("class"),d(t.addClass,t.removeClass)),F=t.tempClasses;F&&(E+=" "+F,t.tempClasses=null);var G;return C&&(G="ng-"+l+aa,a.addClass(k,G)),q.push({element:k,classes:E,event:l,structural:C,options:t,beforeStart:y,close:B}),k.on("$destroy",A),q.length>1?D:(h.$$postDigest(function(){var a=[];P(q,function(b){e(b.element)?a.push(b):b.close()}),q.length=0;var b=v(a),c=[];P(b,function(a){c.push({domNode:s(a.from?a.from.element:a.element),fn:function(){a.beforeStart();var b,c=a.close,d=a.anchors?a.from.element||a.to.element:a.element;if(e(d)){var f=x(a);f&&(b=f.start)}if(b){var g=b();g.done(function(a){c(!a)}),z(a,g)}else c()}})}),o(p(c))}),D)}}]}],Ga=["$animate","$rootScope",function(a,b){return{restrict:"A",transclude:"element",terminal:!0,priority:600,link:function(b,c,d,e,f){var g,h;b.$watchCollection(d.ngAnimateSwap||d["for"],function(d){g&&a.leave(g),h&&(h.$destroy(),h=null),(d||0===d)&&(h=b.$new(),f(h,function(b){g=b,a.enter(b,null,c)}))})}}}];b.module("ngAnimate",[]).directive("ngAnimateSwap",Ga).directive("ngAnimateChildren",ra).factory("$$rAFScheduler",qa).provider("$$animateQueue",Ea).provider("$$animation",Fa).provider("$animateCss",ya).provider("$$animateCssDriver",za).provider("$$animateJs",Aa).provider("$$animateJsDriver",Ba)}(window,window.angular),function(a,b){"use strict";angular.module("toaster",[]).constant("toasterConfig",{limit:0,"tap-to-dismiss":!0,"close-button":!1,"close-html":'<button class="toast-close-button" type="button">&times;</button>',"newest-on-top":!0,"time-out":5e3,"icon-classes":{error:"toast-error",info:"toast-info",wait:"toast-wait",success:"toast-success",warning:"toast-warning"},"body-output-type":"","body-template":"toasterBodyTmpl.html","icon-class":"toast-info","position-class":"toast-top-right","title-class":"toast-title","message-class":"toast-message","prevent-duplicates":!1,"mouseover-timer-stop":!0}).service("toaster",["$rootScope","toasterConfig",function(a,b){function c(a){return function(b,c,d,e,f,g,h,i,j){return angular.isString(b)?this.pop(a,b,c,d,e,f,g,h,i,j):this.pop(angular.extend(b,{type:a}))}}var d=function(){var a={};return a.newGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)})},a}();this.pop=function(b,c,e,f,g,h,i,j,k,l){if(angular.isObject(b)){var m=b;this.toast={type:m.type,title:m.title,body:m.body,timeout:m.timeout,bodyOutputType:m.bodyOutputType,clickHandler:m.clickHandler,showCloseButton:m.showCloseButton,closeHtml:m.closeHtml,toastId:m.toastId,onShowCallback:m.onShowCallback,onHideCallback:m.onHideCallback,directiveData:m.directiveData},i=m.toasterId}else this.toast={type:b,title:c,body:e,timeout:f,bodyOutputType:g,clickHandler:h,showCloseButton:j,toastId:k,onHideCallback:l};return this.toast.toastId&&this.toast.toastId.length||(this.toast.toastId=d.newGuid()),a.$emit("toaster-newToast",i,this.toast.toastId),{toasterId:i,toastId:this.toast.toastId}},this.clear=function(b,c){angular.isObject(b)?a.$emit("toaster-clearToasts",b.toasterId,b.toastId):a.$emit("toaster-clearToasts",b,c)};for(var e in b["icon-classes"])this[e]=c(e)}]).factory("toasterEventRegistry",["$rootScope",function(a){var b,c=null,d=null,e=[],f=[];return b={setup:function(){c||(c=a.$on("toaster-newToast",function(a,b,c){for(var d=0,f=e.length;f>d;d++)e[d](a,b,c)})),d||(d=a.$on("toaster-clearToasts",function(a,b,c){for(var d=0,e=f.length;e>d;d++)f[d](a,b,c)}))},subscribeToNewToastEvent:function(a){e.push(a)},subscribeToClearToastsEvent:function(a){f.push(a)},unsubscribeToNewToastEvent:function(a){var b=e.indexOf(a);b>=0&&e.splice(b,1),0===e.length&&(c(),c=null)},unsubscribeToClearToastsEvent:function(a){var b=f.indexOf(a);b>=0&&f.splice(b,1),0===f.length&&(d(),d=null)}},{setup:b.setup,subscribeToNewToastEvent:b.subscribeToNewToastEvent,subscribeToClearToastsEvent:b.subscribeToClearToastsEvent,unsubscribeToNewToastEvent:b.unsubscribeToNewToastEvent,unsubscribeToClearToastsEvent:b.unsubscribeToClearToastsEvent}}]).directive("directiveTemplate",["$compile","$injector",function(a,b){return{restrict:"A",scope:{directiveName:"@directiveName",directiveData:"@directiveData"},replace:!0,link:function(c,d,e){c.$watch("directiveName",function(f){if(angular.isUndefined(f)||f.length<=0)throw new Error("A valid directive name must be provided via the toast body argument when using bodyOutputType: directive");var g;try{g=b.get(e.$normalize(f)+"Directive")}catch(h){throw new Error(f+" could not be found. The name should appear as it exists in the markup, not camelCased as it would appear in the directive declaration, e.g. directive-name not directiveName.")}var i=g[0];if(i.scope!==!0&&i.scope)throw new Error("Cannot use a directive with an isolated scope. The scope must be either true or falsy (e.g. false/null/undefined). Occurred for directive "+f+".");if(i.restrict.indexOf("A")<0)throw new Error('Directives must be usable as attributes. Add "A" to the restrict option (or remove the option entirely). Occurred for directive '+f+".");c.directiveData&&(c.directiveData=angular.fromJson(c.directiveData));var j=a("<div "+f+"></div>")(c);d.append(j)})}}}]).directive("toasterContainer",["$parse","$rootScope","$interval","$sce","toasterConfig","toaster","toasterEventRegistry",function(a,b,c,d,e,f,g){return{replace:!0,restrict:"EA",scope:!0,link:function(b,h,i){function j(a,d){a.timeoutPromise=c(function(){b.removeToast(a.toastId)},d,1)}function k(c,e){if(c.type=o["icon-classes"][c.type],c.type||(c.type=o["icon-class"]),o["prevent-duplicates"]===!0&&b.toasters.length){if(b.toasters[b.toasters.length-1].body===c.body)return;var f,g,h=!1;for(f=0,g=b.toasters.length;g>f;f++)if(b.toasters[f].toastId===e){h=!0;break}if(h)return}var i=o["close-button"];if("boolean"==typeof c.showCloseButton);else if("boolean"==typeof i)c.showCloseButton=i;else if("object"==typeof i){var j=i[c.type];"undefined"!=typeof j&&null!==j&&(c.showCloseButton=j)}else c.showCloseButton=!1;switch(c.showCloseButton&&(c.closeHtml=d.trustAsHtml(c.closeHtml||b.config.closeHtml)),c.bodyOutputType=c.bodyOutputType||o["body-output-type"],c.bodyOutputType){case"trustedHtml":c.html=d.trustAsHtml(c.body);break;case"template":c.bodyTemplate=c.body||o["body-template"];break;case"templateWithData":var k=a(c.body||o["body-template"]),l=k(b);c.bodyTemplate=l.template,c.data=l.data;break;case"directive":c.html=c.body}b.configureTimer(c),o["newest-on-top"]===!0?(b.toasters.unshift(c),o.limit>0&&b.toasters.length>o.limit&&b.toasters.pop()):(b.toasters.push(c),o.limit>0&&b.toasters.length>o.limit&&b.toasters.shift()),angular.isFunction(c.onShowCallback)&&c.onShowCallback()}function l(a){var d=b.toasters[a];d.timeoutPromise&&c.cancel(d.timeoutPromise),b.toasters.splice(a,1),angular.isFunction(d.onHideCallback)&&d.onHideCallback()}function m(a){for(var c=b.toasters.length-1;c>=0;c--)n(a)?l(c):b.toasters[c].toastId==a&&l(c)}function n(a){return angular.isUndefined(a)||null===a}var o;o=angular.extend({},e,b.$eval(i.toasterOptions)),b.config={toasterId:o["toaster-id"],position:o["position-class"],title:o["title-class"],message:o["message-class"],tap:o["tap-to-dismiss"],closeButton:o["close-button"],closeHtml:o["close-html"],animation:o["animation-class"],mouseoverTimer:o["mouseover-timer-stop"]},b.$on("$destroy",function(){g.unsubscribeToNewToastEvent(b._onNewToast),g.unsubscribeToClearToastsEvent(b._onClearToasts)}),b.configureTimer=function(a){var b=angular.isNumber(a.timeout)?a.timeout:o["time-out"];"object"==typeof b&&(b=b[a.type]),b>0&&j(a,b)},b.removeToast=function(a){var c,d;for(c=0,d=b.toasters.length;d>c;c++)if(b.toasters[c].toastId===a){l(c);break}},b.toasters=[],b._onNewToast=function(a,c,d){(n(b.config.toasterId)&&n(c)||!n(b.config.toasterId)&&!n(c)&&b.config.toasterId==c)&&k(f.toast,d)},b._onClearToasts=function(a,c,d){("*"==c||n(b.config.toasterId)&&n(c)||!n(b.config.toasterId)&&!n(c)&&b.config.toasterId==c)&&m(d)},g.setup(),g.subscribeToNewToastEvent(b._onNewToast),g.subscribeToClearToastsEvent(b._onClearToasts)},controller:["$scope","$element","$attrs",function(a,b,d){a.stopTimer=function(b){a.config.mouseoverTimer===!0&&b.timeoutPromise&&(c.cancel(b.timeoutPromise),b.timeoutPromise=null)},a.restartTimer=function(b){a.config.mouseoverTimer===!0?b.timeoutPromise||a.configureTimer(b):null===b.timeoutPromise&&a.removeToast(b.toastId)},a.click=function(b,c){if(a.config.tap===!0||b.showCloseButton===!0&&c===!0){var d=!0;b.clickHandler&&(angular.isFunction(b.clickHandler)?d=b.clickHandler(b,c):angular.isFunction(a.$parent.$eval(b.clickHandler))?d=a.$parent.$eval(b.clickHandler)(b,c):console.log("TOAST-NOTE: Your click handler is not inside a parent scope of toaster-container.")),d&&a.removeToast(b.toastId)}}}],template:'<div id="toast-container" ng-class="[config.position, config.animation]"><div ng-repeat="toaster in toasters" class="toast" ng-class="toaster.type" ng-click="click(toaster)" ng-mouseover="stopTimer(toaster)" ng-mouseout="restartTimer(toaster)"><div ng-if="toaster.showCloseButton" ng-click="click(toaster, true)" ng-bind-html="toaster.closeHtml"></div><div ng-class="config.title">{{toaster.title}}</div><div ng-class="config.message" ng-switch on="toaster.bodyOutputType"><div ng-switch-when="trustedHtml" ng-bind-html="toaster.html"></div><div ng-switch-when="template"><div ng-include="toaster.bodyTemplate"></div></div><div ng-switch-when="templateWithData"><div ng-include="toaster.bodyTemplate"></div></div><div ng-switch-when="directive"><div directive-template directive-name="{{toaster.html}}" directive-data="{{toaster.directiveData}}"></div></div><div ng-switch-default >{{toaster.body}}</div></div></div></div>'}}])}(window,document),function(a,b,c){"use strict";b.module("ui.sortable",[]).value("uiSortableConfig",{items:"> [ng-repeat],> [data-ng-repeat],> [x-ng-repeat]"}).directive("uiSortable",["uiSortableConfig","$timeout","$log",function(a,d,e){return{require:"?ngModel",scope:{ngModel:"=",uiSortable:"="},link:function(f,g,h,i){function j(a,b){var c=a&&"function"==typeof a,d=b&&"function"==typeof b;return c&&d?function(){a.apply(this,arguments),b.apply(this,arguments)}:d?b:a}function k(a){var b=a.data("ui-sortable");return b&&"object"==typeof b&&"ui-sortable"===b.widgetFullName?b:null}function l(b,c){return B[b]?("stop"===b&&(c=j(c,function(){f.$apply()}),c=j(c,t)),c=j(B[b],c)):C[b]&&(c=C[b](c)),c||("items"===b?c=a.items:"ui-model-items"===b&&(c=a.items)),c}function m(a,d,e){function f(a,b){b in z||(z[b]=null)}b.forEach(B,f);var g=null;if(d){var h;b.forEach(d,function(d,e){if(!(a&&e in a)){if(e in A)return void("ui-floating"===e?z[e]="auto":z[e]=l(e,c));h||(h=b.element.ui.sortable().options);var f=h[e];f=l(e,f),g||(g={}),g[e]=f,z[e]=f}})}return b.forEach(a,function(a,b){return b in A?("ui-floating"!==b||a!==!1&&a!==!0||!e||(e.floating=a),void(z[b]=l(b,a))):(a=l(b,a),g||(g={}),g[b]=a,void(z[b]=a))}),g}function n(a){var c=a.sortable("option","placeholder");if(c&&c.element&&"function"==typeof c.element){var d=c.element();return d=b.element(d)}return null}function o(a,b){var c=z["ui-model-items"].replace(/[^,]*>/g,""),d=a.find('[class="'+b.attr("class")+'"]:not('+c+")");return d}function p(a,b){var c=a.sortable("option","helper");return"clone"===c||"function"==typeof c&&b.item.sortable.isCustomHelperUsed()}function q(a,b,c){var d=null;return p(a,b)&&"parent"===a.sortable("option","appendTo")&&(d=c.last()),d}function r(a){return/left|right/.test(a.css("float"))||/inline|table-cell/.test(a.css("display"))}function s(a,b){for(var c=null,d=0;d<a.length;d++){var e=a[d];if(e.element[0]===b[0]){c=e.scope;break}}return c}function t(a,b){b.item.sortable._destroy()}function u(a){return a.item.parent().find(z["ui-model-items"]).index(a.item)}function v(){f.$watchCollection("ngModel",function(){d(function(){k(g)&&g.sortable("refresh")},0,!1)}),B.start=function(a,d){if("auto"===z["ui-floating"]){var e=d.item.siblings(),f=k(b.element(a.target));f.floating=r(e)}var g=u(d);d.item.sortable={model:i.$modelValue[g],index:g,source:d.item.parent(),sourceModel:i.$modelValue,cancel:function(){d.item.sortable._isCanceled=!0},isCanceled:function(){return d.item.sortable._isCanceled},isCustomHelperUsed:function(){return!!d.item.sortable._isCustomHelperUsed},_isCanceled:!1,_isCustomHelperUsed:d.item.sortable._isCustomHelperUsed,_destroy:function(){b.forEach(d.item.sortable,function(a,b){d.item.sortable[b]=c})}}},B.activate=function(a,b){y=g.contents();var c=n(g);if(c&&c.length){var d=o(g,c);y=y.not(d)}var e=b.item.sortable._connectedSortables||[];e.push({element:g,scope:f}),b.item.sortable._connectedSortables=e},B.update=function(a,b){if(!b.item.sortable.received){b.item.sortable.dropindex=u(b);var c=b.item.parent();b.item.sortable.droptarget=c;var d=s(b.item.sortable._connectedSortables,c);b.item.sortable.droptargetModel=d.ngModel,g.sortable("cancel")}var e=!b.item.sortable.received&&q(g,b,y);e&&e.length&&(y=y.not(e)),y.appendTo(g),b.item.sortable.received&&(y=null),b.item.sortable.received&&!b.item.sortable.isCanceled()&&f.$apply(function(){i.$modelValue.splice(b.item.sortable.dropindex,0,b.item.sortable.moved)})},B.stop=function(a,c){if(!c.item.sortable.received&&"dropindex"in c.item.sortable&&!c.item.sortable.isCanceled())f.$apply(function(){i.$modelValue.splice(c.item.sortable.dropindex,0,i.$modelValue.splice(c.item.sortable.index,1)[0])});else if((!("dropindex"in c.item.sortable)||c.item.sortable.isCanceled())&&!b.equals(g.contents(),y)){var d=q(g,c,y);d&&d.length&&(y=y.not(d)),y.appendTo(g)}y=null},B.receive=function(a,b){b.item.sortable.received=!0},B.remove=function(a,b){"dropindex"in b.item.sortable||(g.sortable("cancel"),b.item.sortable.cancel()),b.item.sortable.isCanceled()||f.$apply(function(){b.item.sortable.moved=i.$modelValue.splice(b.item.sortable.index,1)[0]})},C.helper=function(a){return a&&"function"==typeof a?function(b,c){var d=a.apply(this,arguments);return c.sortable._isCustomHelperUsed=c!==d,d}:a},f.$watchCollection("uiSortable",function(a,b){var c=k(g);if(c){var d=m(a,b,c);d&&g.sortable("option",d)}},!0),m(z)}function w(){i?v():e.info("ui.sortable: ngModel not provided!",g),g.sortable(z)}function x(){return f.uiSortable&&f.uiSortable.disabled?!1:(w(),x.cancelWatcher(),x.cancelWatcher=b.noop,!0)}var y,z={},A={"ui-floating":c,"ui-model-items":a.items},B={receive:null,remove:null,start:null,stop:null,update:null},C={helper:null};return b.extend(z,A,a,f.uiSortable),b.element.fn&&b.element.fn.jquery?(x.cancelWatcher=b.noop,void(x()||(x.cancelWatcher=f.$watch("uiSortable.disabled",x)))):void e.error("ui.sortable: jQuery should be included before AngularJS!")}}}])}(window,window.angular),angular.module("ui.ace",[]).constant("uiAceConfig",{}).directive("uiAce",["uiAceConfig",function(a){if(angular.isUndefined(window.ace))throw new Error("ui-ace need ace to work... (o rly?)");var b=function(a,b,c){if(angular.isDefined(c.workerPath)){var d=window.ace.require("ace/config");d.set("workerPath",c.workerPath)}angular.isDefined(c.require)&&c.require.forEach(function(a){window.ace.require(a)}),angular.isDefined(c.showGutter)&&a.renderer.setShowGutter(c.showGutter),angular.isDefined(c.useWrapMode)&&b.setUseWrapMode(c.useWrapMode),angular.isDefined(c.showInvisibles)&&a.renderer.setShowInvisibles(c.showInvisibles),angular.isDefined(c.showIndentGuides)&&a.renderer.setDisplayIndentGuides(c.showIndentGuides),angular.isDefined(c.useSoftTabs)&&b.setUseSoftTabs(c.useSoftTabs),angular.isDefined(c.showPrintMargin)&&a.setShowPrintMargin(c.showPrintMargin),angular.isDefined(c.disableSearch)&&c.disableSearch&&a.commands.addCommands([{name:"unfind",bindKey:{win:"Ctrl-F",mac:"Command-F"},exec:function(){return!1},readOnly:!0}]),angular.isString(c.theme)&&a.setTheme("ace/theme/"+c.theme),angular.isString(c.mode)&&b.setMode("ace/mode/"+c.mode),angular.isDefined(c.firstLineNumber)&&(angular.isNumber(c.firstLineNumber)?b.setOption("firstLineNumber",c.firstLineNumber):angular.isFunction(c.firstLineNumber)&&b.setOption("firstLineNumber",c.firstLineNumber()));var e,f;if(angular.isDefined(c.advanced))for(e in c.advanced)f={name:e,value:c.advanced[e]},a.setOption(f.name,f.value);if(angular.isDefined(c.rendererOptions))for(e in c.rendererOptions)f={name:e,value:c.rendererOptions[e]},a.renderer.setOption(f.name,f.value);angular.forEach(c.callbacks,function(b){angular.isFunction(b)&&b(a)})};return{restrict:"EA",require:"?ngModel",link:function(c,d,e,f){var g,h,i=a.ace||{},j=angular.extend({},i,c.$eval(e.uiAce)),k=window.ace.edit(d[0]),l=k.getSession(),m=function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1);angular.isDefined(a)&&c.$evalAsync(function(){if(!angular.isFunction(a))throw new Error("ui-ace use a function as callback.");a(b)})},n={onChange:function(a){return function(b){var d=l.getValue();!f||d===f.$viewValue||c.$$phase||c.$root.$$phase||c.$evalAsync(function(){f.$setViewValue(d)}),m(a,b,k)}},onBlur:function(a){return function(){m(a,k)}}};e.$observe("readonly",function(a){k.setReadOnly(!!a||""===a)}),f&&(f.$formatters.push(function(a){if(angular.isUndefined(a)||null===a)return"";if(angular.isObject(a)||angular.isArray(a))throw new Error("ui-ace cannot use an object or an array as a model");return a}),f.$render=function(){l.setValue(f.$viewValue)});var o=function(a,d){a!==d&&(j=angular.extend({},i,c.$eval(e.uiAce)),j.callbacks=[j.onLoad],j.onLoad!==i.onLoad&&j.callbacks.unshift(i.onLoad),l.removeListener("change",g),g=n.onChange(j.onChange),l.on("change",g),k.removeListener("blur",h),h=n.onBlur(j.onBlur),k.on("blur",h),b(k,l,j))};c.$watch(e.uiAce,o,!0),o(i),d.on("$destroy",function(){k.session.$stopWorker(),k.destroy()}),c.$watch(function(){return[d[0].offsetWidth,d[0].offsetHeight]},function(){k.resize(),k.renderer.updateFull()},!0)}}}]),!window.XMLHttpRequest||window.FileAPI&&FileAPI.shouldLoad||(window.XMLHttpRequest.prototype.setRequestHeader=function(a){return function(b,c){if("__setXHR_"===b){var d=c(this);d instanceof Function&&d(this)}else a.apply(this,arguments)}}(window.XMLHttpRequest.prototype.setRequestHeader));var ngFileUpload=angular.module("ngFileUpload",[]);ngFileUpload.version="12.0.4",ngFileUpload.service("UploadBase",["$http","$q","$timeout",function(a,b,c){function d(d){function e(a){j.notify&&j.notify(a),k.progressFunc&&c(function(){k.progressFunc(a)})}function h(a){return null!=d._start&&g?{loaded:a.loaded+d._start,total:d._file&&d._file.size||a.total,type:a.type,config:d,lengthComputable:!0,target:a.target}:a}function i(){a(d).then(function(a){g&&d._chunkSize&&!d._finished&&d._file?(e({loaded:d._end,total:d._file&&d._file.size,config:d,type:"progress"}),f.upload(d,!0)):(d._finished&&delete d._finished,j.resolve(a))},function(a){j.reject(a)},function(a){j.notify(a)})}d.method=d.method||"POST",d.headers=d.headers||{};var j=d._deferred=d._deferred||b.defer(),k=j.promise;return d.disableProgress||(d.headers.__setXHR_=function(){return function(a){a&&a.upload&&a.upload.addEventListener&&(d.__XHR=a,d.xhrFn&&d.xhrFn(a),a.upload.addEventListener("progress",function(a){a.config=d,e(h(a))},!1),a.upload.addEventListener("load",function(a){a.lengthComputable&&(a.config=d,e(h(a)))},!1))}}),g?d._chunkSize&&d._end&&!d._finished?(d._start=d._end,d._end+=d._chunkSize,i()):d.resumeSizeUrl?a.get(d.resumeSizeUrl).then(function(a){d.resumeSizeResponseReader?d._start=d.resumeSizeResponseReader(a.data):d._start=parseInt((null==a.data.size?a.data:a.data.size).toString()),d._chunkSize&&(d._end=d._start+d._chunkSize),i()},function(a){throw a}):d.resumeSize?d.resumeSize().then(function(a){d._start=a,i()},function(a){throw a}):(d._chunkSize&&(d._start=0,d._end=d._start+d._chunkSize),i()):i(),k.success=function(a){return k.then(function(b){a(b.data,b.status,b.headers,d)}),k},k.error=function(a){return k.then(null,function(b){a(b.data,b.status,b.headers,d)}),k},k.progress=function(a){return k.progressFunc=a,k.then(null,null,function(b){a(b)}),k},k.abort=k.pause=function(){return d.__XHR&&c(function(){d.__XHR.abort()}),k},k.xhr=function(a){return d.xhrFn=function(b){return function(){b&&b.apply(k,arguments),a.apply(k,arguments)}}(d.xhrFn),k},f.promisesCount++,k["finally"](function(){f.promisesCount--}),k}function e(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}var f=this;f.promisesCount=0,this.isResumeSupported=function(){return window.Blob&&window.Blob.prototype.slice};var g=this.isResumeSupported();this.isUploadInProgress=function(){return f.promisesCount>0},this.rename=function(a,b){return a.ngfName=b,a},this.jsonBlob=function(a){null==a||angular.isString(a)||(a=JSON.stringify(a));var b=new window.Blob([a],{type:"application/json"});return b._ngfBlob=!0,b},this.json=function(a){return angular.toJson(a)},this.isFile=function(a){return null!=a&&(a instanceof window.Blob||a.flashId&&a.name&&a.size)},this.upload=function(a,b){function c(b,c){if(b._ngfBlob)return b;if(a._file=a._file||b,null!=a._start&&g){a._end&&a._end>=b.size&&(a._finished=!0,a._end=b.size);var d=b.slice(a._start,a._end||b.size);return d.name=b.name,d.ngfName=b.ngfName,a._chunkSize&&(c.append("_chunkSize",a._chunkSize),c.append("_currentChunkSize",a._end-a._start),c.append("_chunkNumber",Math.floor(a._start/a._chunkSize)),c.append("_totalSize",a._file.size)),d}return b}function h(b,d,e){if(void 0!==d)if(angular.isDate(d)&&(d=d.toISOString()),angular.isString(d))b.append(e,d);else if(f.isFile(d)){var g=c(d,b),i=e.split(",");i[1]&&(g.ngfName=i[1].replace(/^\s+|\s+$/g,""),e=i[0]),a._fileKey=a._fileKey||e,b.append(e,g,g.ngfName||g.name)}else if(angular.isObject(d)){if(d.$$ngfCircularDetection)throw"ngFileUpload: Circular reference in config.data. Make sure specified data for Upload.upload() has no circular reference: "+e;d.$$ngfCircularDetection=!0;try{for(var j in d)if(d.hasOwnProperty(j)&&"$$ngfCircularDetection"!==j){var k=null==a.objectKey?"[i]":a.objectKey;d.length&&parseInt(j)>-1&&(k=null==a.arrayKey?k:a.arrayKey),h(b,d[j],e+k.replace(/[ik]/g,j))}}finally{delete d.$$ngfCircularDetection}}else b.append(e,d)}function i(){a._chunkSize=f.translateScalars(a.resumeChunkSize),a._chunkSize=a._chunkSize?parseInt(a._chunkSize.toString()):null,a.headers=a.headers||{},a.headers["Content-Type"]=void 0,a.transformRequest=a.transformRequest?angular.isArray(a.transformRequest)?a.transformRequest:[a.transformRequest]:[],a.transformRequest.push(function(b){var c,d=new window.FormData;b=b||a.fields||{},a.file&&(b.file=a.file);for(c in b)if(b.hasOwnProperty(c)){var e=b[c];a.formDataAppender?a.formDataAppender(d,c,e):h(d,e,c)}return d})}return b||(a=e(a)),a._isDigested||(a._isDigested=!0,i()),d(a)},this.http=function(b){return b=e(b),b.transformRequest=b.transformRequest||function(b){return window.ArrayBuffer&&b instanceof window.ArrayBuffer||b instanceof window.Blob?b:a.defaults.transformRequest[0].apply(this,arguments)},b._chunkSize=f.translateScalars(b.resumeChunkSize),b._chunkSize=b._chunkSize?parseInt(b._chunkSize.toString()):null,d(b)},this.translateScalars=function(a){if(angular.isString(a)){if(a.search(/kb/i)===a.length-2)return parseFloat(1024*a.substring(0,a.length-2));if(a.search(/mb/i)===a.length-2)return parseFloat(1048576*a.substring(0,a.length-2));if(a.search(/gb/i)===a.length-2)return parseFloat(1073741824*a.substring(0,a.length-2));if(a.search(/b/i)===a.length-1)return parseFloat(a.substring(0,a.length-1));if(a.search(/s/i)===a.length-1)return parseFloat(a.substring(0,a.length-1));if(a.search(/m/i)===a.length-1)return parseFloat(60*a.substring(0,a.length-1));if(a.search(/h/i)===a.length-1)return parseFloat(3600*a.substring(0,a.length-1))}return a},this.urlToBlob=function(c){var d=b.defer();return a({url:c,method:"get",responseType:"arraybuffer"}).then(function(a){var b=new Uint8Array(a.data),c=a.headers("content-type")||"image/WebP",e=new window.Blob([b],{type:c});d.resolve(e)},function(a){d.reject(a)}),d.promise},this.setDefaults=function(a){this.defaults=a||{}},this.defaults={},
this.version=ngFileUpload.version}]),ngFileUpload.service("Upload",["$parse","$timeout","$compile","$q","UploadExif",function(a,b,c,d,e){function f(a,b,c){var e=[i.emptyPromise()];return angular.forEach(a,function(d,f){0===d.type.indexOf("image/jpeg")&&i.attrGetter("ngfFixOrientation",b,c,{$file:d})&&e.push(i.happyPromise(i.applyExifRotation(d),d).then(function(b){a.splice(f,1,b)}))}),d.all(e)}function g(a,b,c){var e=i.attrGetter("ngfResize",b,c);if(!e||!i.isResizeSupported()||!a.length)return i.emptyPromise();if(!(e instanceof Function))return h(e,a,b,c);var f=d.defer();e(a).then(function(d){h(d,a,b,c).then(function(a){f.resolve(a)},function(a){f.reject(a)})},function(a){f.reject(a)})}function h(a,b,c,e){function f(d,f){if(0===d.type.indexOf("image")){if(a.pattern&&!i.validatePattern(d,a.pattern))return;var h=i.resize(d,a.width,a.height,a.quality,a.type,a.ratio,a.centerCrop,function(a,b){return i.attrGetter("ngfResizeIf",c,e,{$width:a,$height:b,$file:d})},a.restoreExif!==!1);g.push(h),h.then(function(a){b.splice(f,1,a)},function(a){d.$error="resize",d.$errorParam=(a?(a.message?a.message:a)+": ":"")+(d&&d.name)})}}for(var g=[i.emptyPromise()],h=0;h<b.length;h++)f(b[h],h);return d.all(g)}var i=e;return i.getAttrWithDefaults=function(a,b){if(null!=a[b])return a[b];var c=i.defaults[b];return null==c?c:angular.isString(c)?c:JSON.stringify(c)},i.attrGetter=function(b,c,d,e){var f=this.getAttrWithDefaults(c,b);if(!d)return f;try{return e?a(f)(d,e):a(f)(d)}catch(g){if(b.search(/min|max|pattern/i))return f;throw g}},i.shouldUpdateOn=function(a,b,c){var d=i.attrGetter("ngModelOptions",b,c);return d&&d.updateOn?d.updateOn.split(" ").indexOf(a)>-1:!0},i.emptyPromise=function(){var a=d.defer(),c=arguments;return b(function(){a.resolve.apply(a,c)}),a.promise},i.rejectPromise=function(){var a=d.defer(),c=arguments;return b(function(){a.reject.apply(a,c)}),a.promise},i.happyPromise=function(a,c){var e=d.defer();return a.then(function(a){e.resolve(a)},function(a){b(function(){throw a}),e.resolve(c)}),e.promise},i.updateModel=function(c,d,e,h,j,k,l){function m(f,g,j,l,m){d.$$ngfPrevValidFiles=f,d.$$ngfPrevInvalidFiles=g;var n=f&&f.length?f[0]:null,o=g&&g.length?g[0]:null;c&&(i.applyModelValidation(c,f),c.$setViewValue(m?n:f)),h&&a(h)(e,{$files:f,$file:n,$newFiles:j,$duplicateFiles:l,$invalidFiles:g,$invalidFile:o,$event:k});var p=i.attrGetter("ngfModelInvalid",d);p&&b(function(){a(p).assign(e,m?o:g)}),b(function(){})}function n(){function a(a,b){return a.name===b.name&&(a.$ngfOrigSize||a.size)===(b.$ngfOrigSize||b.size)&&a.type===b.type}function b(b){var c;for(c=0;c<s.length;c++)if(a(b,s[c]))return!0;for(c=0;c<t.length;c++)if(a(b,t[c]))return!0;return!1}if(j){r=[],u=[];for(var c=0;c<j.length;c++)b(j[c])?u.push(j[c]):r.push(j[c])}}function o(a){return angular.isArray(a)?a:[a]}function p(){w=[],v=[],angular.forEach(r,function(a){a.$error?v.push(a):w.push(a)})}function q(){function a(){b(function(){m(x?s.concat(w):w,x?t.concat(v):v,j,u,y)},A&&A.debounce?A.debounce.change||A.debounce:0)}g(z?r:w,d,e).then(function(){z?i.validate(r,s.length,c,d,e).then(function(){p(),a()}):a()},function(a){throw"Could not resize files "+a})}var r,s,t,u=[],v=[],w=[];s=d.$$ngfPrevValidFiles||[],t=d.$$ngfPrevInvalidFiles||[],c&&c.$modelValue&&(s=o(c.$modelValue));var x=i.attrGetter("ngfKeep",d,e);r=(j||[]).slice(0),"distinct"!==x&&i.attrGetter("ngfKeepDistinct",d,e)!==!0||n(d,e);var y=!x&&!i.attrGetter("ngfMultiple",d,e)&&!i.attrGetter("multiple",d);if(!x||r.length){i.attrGetter("ngfBeforeModelChange",d,e,{$files:j,$file:j&&j.length?j[0]:null,$newFiles:r,$duplicateFiles:u,$event:k});var z=i.attrGetter("ngfValidateAfterResize",d,e),A=i.attrGetter("ngModelOptions",d,e);i.validate(r,s.length,c,d,e).then(function(){l?m(r,[],j,u,y):(A&&A.allowInvalid||z?w=r:p(),i.attrGetter("ngfFixOrientation",d,e)&&i.isExifSupported()?f(w,d,e).then(function(){q()}):q())})}},i}]),ngFileUpload.directive("ngfSelect",["$parse","$timeout","$compile","Upload",function(a,b,c,d){function e(a){var b=a.match(/Android[^\d]*(\d+)\.(\d+)/);if(b&&b.length>2){var c=d.defaults.androidFixMinorVersion||4;return parseInt(b[1])<4||parseInt(b[1])===c&&parseInt(b[2])<c}return-1===a.indexOf("Chrome")&&/.*Windows.*Safari.*/.test(a)}function f(a,b,c,d,f,h,i,j){function k(){return"input"===b[0].tagName.toLowerCase()&&c.type&&"file"===c.type.toLowerCase()}function l(){return t("ngfChange")||t("ngfSelect")}function m(b){if(j.shouldUpdateOn("change",c,a)){for(var e=b.__files_||b.target&&b.target.files,f=[],g=0;g<e.length;g++)f.push(e[g]);j.updateModel(d,c,a,l(),f.length?f:null,b)}}function n(a){if(b!==a)for(var c=0;c<b[0].attributes.length;c++){var d=b[0].attributes[c];"type"!==d.name&&"class"!==d.name&&"style"!==d.name&&(null!=d.value&&""!==d.value||("required"===d.name&&(d.value="required"),"multiple"===d.name&&(d.value="multiple")),a.attr(d.name,"id"===d.name?"ngf-"+d.value:d.value))}}function o(){if(k())return b;var a=angular.element('<input type="file">');n(a);var c=angular.element("<label>upload</label>");return c.css("visibility","hidden").css("position","absolute").css("overflow","hidden").css("width","0px").css("height","0px").css("border","none").css("margin","0px").css("padding","0px").attr("tabindex","-1"),g.push({el:b,ref:c}),document.body.appendChild(c.append(a)[0]),a}function p(c){if(b.attr("disabled"))return!1;if(!t("ngfSelectDisabled",a)){var d=q(c);if(null!=d)return d;r(c);try{k()||document.body.contains(w[0])||(g.push({el:b,ref:w.parent()}),document.body.appendChild(w.parent()[0]),w.bind("change",m))}catch(f){}return e(navigator.userAgent)?setTimeout(function(){w[0].click()},0):w[0].click(),!1}}function q(a){var b=a.changedTouches||a.originalEvent&&a.originalEvent.changedTouches;if("touchstart"===a.type)return v=b?b[0].clientY:0,!0;if(a.stopPropagation(),a.preventDefault(),"touchend"===a.type){var c=b?b[0].clientY:0;if(Math.abs(c-v)>20)return!1}}function r(b){j.shouldUpdateOn("click",c,a)&&w.val()&&(w.val(null),j.updateModel(d,c,a,l(),null,b,!0))}function s(a){if(w&&!w.attr("__ngf_ie10_Fix_")){if(!w[0].parentNode)return void(w=null);a.preventDefault(),a.stopPropagation(),w.unbind("click");var b=w.clone();return w.replaceWith(b),w=b,w.attr("__ngf_ie10_Fix_","true"),w.bind("change",m),w.bind("click",s),w[0].click(),!1}w.removeAttr("__ngf_ie10_Fix_")}var t=function(a,b){return j.attrGetter(a,c,b)};j.registerModelChangeValidator(d,c,a);var u=[];u.push(a.$watch(t("ngfMultiple"),function(){w.attr("multiple",t("ngfMultiple",a))})),u.push(a.$watch(t("ngfCapture"),function(){w.attr("capture",t("ngfCapture",a))})),u.push(a.$watch(t("ngfAccept"),function(){w.attr("accept",t("ngfAccept",a))})),c.$observe("accept",function(){w.attr("accept",t("accept"))}),u.push(function(){c.$$observers&&delete c.$$observers.accept});var v=0,w=b;k()||(w=o()),w.bind("change",m),k()?b.bind("click",r):b.bind("click touchstart touchend",p),-1!==navigator.appVersion.indexOf("MSIE 10")&&w.bind("click",s),d&&d.$formatters.push(function(a){return null!=a&&0!==a.length||w.val()&&w.val(null),a}),a.$on("$destroy",function(){k()||w.parent().remove(),angular.forEach(u,function(a){a()})}),h(function(){for(var a=0;a<g.length;a++){var b=g[a];document.body.contains(b.el[0])||(g.splice(a,1),b.ref.remove())}}),window.FileAPI&&window.FileAPI.ngfFixIE&&window.FileAPI.ngfFixIE(b,w,m)}var g=[];return{restrict:"AEC",require:"?ngModel",link:function(e,g,h,i){f(e,g,h,i,a,b,c,d)}}}]),function(){function a(a){return"img"===a.tagName.toLowerCase()?"image":"audio"===a.tagName.toLowerCase()?"audio":"video"===a.tagName.toLowerCase()?"video":/./}function b(b,c,d,e,f,g,h,i){function j(a){var g=b.attrGetter("ngfNoObjectUrl",f,d);b.dataUrl(a,g)["finally"](function(){c(function(){var b=(g?a.$ngfDataUrl:a.$ngfBlobUrl)||a.$ngfDataUrl;i?e.css("background-image","url('"+(b||"")+"')"):e.attr("src",b),b?e.removeClass("ng-hide"):e.addClass("ng-hide")})})}c(function(){var c=d.$watch(f[g],function(c){var d=h;if("ngfThumbnail"===g&&(d||(d={width:e[0].clientWidth,height:e[0].clientHeight}),0===d.width&&window.getComputedStyle)){var f=getComputedStyle(e[0]);d={width:parseInt(f.width.slice(0,-2)),height:parseInt(f.height.slice(0,-2))}}return angular.isString(c)?(e.removeClass("ng-hide"),i?e.css("background-image","url('"+c+"')"):e.attr("src",c)):void(!c||!c.type||0!==c.type.search(a(e[0]))||i&&0!==c.type.indexOf("image")?e.addClass("ng-hide"):d&&b.isResizeSupported()?b.resize(c,d.width,d.height,d.quality).then(function(a){j(a)},function(a){throw a}):j(c))});d.$on("$destroy",function(){c()})})}ngFileUpload.service("UploadDataUrl",["UploadBase","$timeout","$q",function(a,b,c){var d=a;return d.base64DataUrl=function(a){if(angular.isArray(a)){var b=c.defer(),e=0;return angular.forEach(a,function(c){d.dataUrl(c,!0)["finally"](function(){if(e++,e===a.length){var c=[];angular.forEach(a,function(a){c.push(a.$ngfDataUrl)}),b.resolve(c,a)}})}),b.promise}return d.dataUrl(a,!0)},d.dataUrl=function(a,e){if(!a)return d.emptyPromise(a,a);if(e&&null!=a.$ngfDataUrl||!e&&null!=a.$ngfBlobUrl)return d.emptyPromise(e?a.$ngfDataUrl:a.$ngfBlobUrl,a);var f=e?a.$$ngfDataUrlPromise:a.$$ngfBlobUrlPromise;if(f)return f;var g=c.defer();return b(function(){if(window.FileReader&&a&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 8")||a.size<2e4)&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 9")||a.size<4e6)){var c=window.URL||window.webkitURL;if(c&&c.createObjectURL&&!e){var f;try{f=c.createObjectURL(a)}catch(h){return void b(function(){a.$ngfBlobUrl="",g.reject()})}b(function(){if(a.$ngfBlobUrl=f,f){g.resolve(f,a),d.blobUrls=d.blobUrls||[],d.blobUrlsTotalSize=d.blobUrlsTotalSize||0,d.blobUrls.push({url:f,size:a.size}),d.blobUrlsTotalSize+=a.size||0;for(var b=d.defaults.blobUrlsMaxMemory||268435456,e=d.defaults.blobUrlsMaxQueueSize||200;(d.blobUrlsTotalSize>b||d.blobUrls.length>e)&&d.blobUrls.length>1;){var h=d.blobUrls.splice(0,1)[0];c.revokeObjectURL(h.url),d.blobUrlsTotalSize-=h.size}}})}else{var i=new FileReader;i.onload=function(c){b(function(){a.$ngfDataUrl=c.target.result,g.resolve(c.target.result,a),b(function(){delete a.$ngfDataUrl},1e3)})},i.onerror=function(){b(function(){a.$ngfDataUrl="",g.reject()})},i.readAsDataURL(a)}}else b(function(){a[e?"$ngfDataUrl":"$ngfBlobUrl"]="",g.reject()})}),f=e?a.$$ngfDataUrlPromise=g.promise:a.$$ngfBlobUrlPromise=g.promise,f["finally"](function(){delete a[e?"$$ngfDataUrlPromise":"$$ngfBlobUrlPromise"]}),f},d}]),ngFileUpload.directive("ngfSrc",["Upload","$timeout",function(a,c){return{restrict:"AE",link:function(d,e,f){b(a,c,d,e,f,"ngfSrc",a.attrGetter("ngfResize",f,d),!1)}}}]),ngFileUpload.directive("ngfBackground",["Upload","$timeout",function(a,c){return{restrict:"AE",link:function(d,e,f){b(a,c,d,e,f,"ngfBackground",a.attrGetter("ngfResize",f,d),!0)}}}]),ngFileUpload.directive("ngfThumbnail",["Upload","$timeout",function(a,c){return{restrict:"AE",link:function(d,e,f){var g=a.attrGetter("ngfSize",f,d);b(a,c,d,e,f,"ngfThumbnail",g,a.attrGetter("ngfAsBackground",f,d))}}}]),ngFileUpload.config(["$compileProvider",function(a){a.imgSrcSanitizationWhitelist&&a.imgSrcSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|local|file|data|blob):/),a.aHrefSanitizationWhitelist&&a.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|local|file|data|blob):/)}]),ngFileUpload.filter("ngfDataUrl",["UploadDataUrl","$sce",function(a,b){return function(c,d,e){if(angular.isString(c))return b.trustAsResourceUrl(c);var f=c&&((d?c.$ngfDataUrl:c.$ngfBlobUrl)||c.$ngfDataUrl);return c&&!f?(!c.$ngfDataUrlFilterInProgress&&angular.isObject(c)&&(c.$ngfDataUrlFilterInProgress=!0,a.dataUrl(c,d)),""):(c&&delete c.$ngfDataUrlFilterInProgress,(c&&f?e?b.trustAsResourceUrl(f):f:c)||"")}}])}(),ngFileUpload.service("UploadValidate",["UploadDataUrl","$q","$timeout",function(a,b,c){function d(a){var b="",c=[];if(a.length>2&&"/"===a[0]&&"/"===a[a.length-1])b=a.substring(1,a.length-1);else{var e=a.split(",");if(e.length>1)for(var f=0;f<e.length;f++){var g=d(e[f]);g.regexp?(b+="("+g.regexp+")",f<e.length-1&&(b+="|")):c=c.concat(g.excludes)}else 0===a.indexOf("!")?c.push("^((?!"+d(a.substring(1)).regexp+").)*$"):(0===a.indexOf(".")&&(a="*"+a),b="^"+a.replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"),"\\$&")+"$",b=b.replace(/\\\*/g,".*").replace(/\\\?/g,"."))}return{regexp:b,excludes:c}}function e(a,b){null==b||a.$dirty||(a.$setDirty?a.$setDirty():a.$dirty=!0)}var f=a;return f.validatePattern=function(a,b){if(!b)return!0;var c=d(b),e=!0;if(c.regexp&&c.regexp.length){var f=new RegExp(c.regexp,"i");e=null!=a.type&&f.test(a.type)||null!=a.name&&f.test(a.name)}for(var g=c.excludes.length;g--;){var h=new RegExp(c.excludes[g],"i");e=e&&(null==a.type||h.test(a.type))&&(null==a.name||h.test(a.name))}return e},f.ratioToFloat=function(a){var b=a.toString(),c=b.search(/[x:]/i);return b=c>-1?parseFloat(b.substring(0,c))/parseFloat(b.substring(c+1)):parseFloat(b)},f.registerModelChangeValidator=function(a,b,c){a&&a.$formatters.push(function(d){a.$dirty&&(d&&!angular.isArray(d)&&(d=[d]),f.validate(d,0,a,b,c).then(function(){f.applyModelValidation(a,d)}))})},f.applyModelValidation=function(a,b){e(a,b),angular.forEach(a.$ngfValidations,function(b){a.$setValidity(b.name,b.valid)})},f.getValidationAttr=function(a,b,c,d,e){var g="ngf"+c[0].toUpperCase()+c.substr(1),h=f.attrGetter(g,a,b,{$file:e});if(null==h&&(h=f.attrGetter("ngfValidate",a,b,{$file:e}))){var i=(d||c).split(".");h=h[i[0]],i.length>1&&(h=h&&h[i[1]])}return h},f.validate=function(a,c,d,e,g){function h(b,c,h){if(a){for(var i=a.length,j=null;i--;){var k=a[i];if(k){var l=f.getValidationAttr(e,g,b,c,k);null!=l&&(h(k,l,i)||(k.$error=b,(k.$errorMessages=k.$errorMessages||{})[b]=!0,k.$errorParam=l,a.splice(i,1),j=!1))}}null!==j&&d.$ngfValidations.push({name:b,valid:j})}}function i(c,h,i,k,l){function m(a,b,d){null!=d?k(b,d).then(function(e){l(e,d)?a.resolve():(b.$error=c,(b.$errorMessages=b.$errorMessages||{})[c]=!0,b.$errorParam=d,a.reject())},function(){j("ngfValidateForce",{$file:b})?(b.$error=c,(b.$errorMessages=b.$errorMessages||{})[c]=!0,b.$errorParam=d,a.reject()):a.resolve()}):a.resolve()}var n=[f.emptyPromise()];return a?(a=void 0===a.length?[a]:a,angular.forEach(a,function(a){var d=b.defer();return n.push(d.promise),!i||null!=a.type&&0===a.type.search(i)?void("dimensions"===c&&null!=f.attrGetter("ngfDimensions",e)?f.imageDimensions(a).then(function(b){m(d,a,j("ngfDimensions",{$file:a,$width:b.width,$height:b.height}))},function(){d.reject()}):"duration"===c&&null!=f.attrGetter("ngfDuration",e)?f.mediaDuration(a).then(function(b){m(d,a,j("ngfDuration",{$file:a,$duration:b}))},function(){d.reject()}):m(d,a,f.getValidationAttr(e,g,c,h,a))):void d.resolve()}),b.all(n).then(function(){d.$ngfValidations.push({name:c,valid:!0})},function(){d.$ngfValidations.push({name:c,valid:!1})})):void 0}d=d||{},d.$ngfValidations=d.$ngfValidations||[],angular.forEach(d.$ngfValidations,function(a){a.valid=!0});var j=function(a,b){return f.attrGetter(a,e,g,b)};if(null==a||0===a.length)return f.emptyPromise(d);a=void 0===a.length?[a]:a.slice(0),h("maxFiles",null,function(a,b,d){return b>c+d}),h("pattern",null,f.validatePattern),h("minSize","size.min",function(a,b){return a.size+.1>=f.translateScalars(b)}),h("maxSize","size.max",function(a,b){return a.size-.1<=f.translateScalars(b)});var k=0;if(h("maxTotalSize",null,function(b,c){return k+=b.size,k>f.translateScalars(c)?(a.splice(0,a.length),!1):!0}),h("validateFn",null,function(a,b){return b===!0||null===b||""===b}),!a.length)return f.emptyPromise(d,d.$ngfValidations);var l=b.defer(),m=[];return m.push(f.happyPromise(i("maxHeight","height.max",/image/,this.imageDimensions,function(a,b){return a.height<=b}))),m.push(f.happyPromise(i("minHeight","height.min",/image/,this.imageDimensions,function(a,b){return a.height>=b}))),m.push(f.happyPromise(i("maxWidth","width.max",/image/,this.imageDimensions,function(a,b){return a.width<=b}))),m.push(f.happyPromise(i("minWidth","width.min",/image/,this.imageDimensions,function(a,b){return a.width>=b}))),m.push(f.happyPromise(i("dimensions",null,/image/,function(a,b){return f.emptyPromise(b)},function(a){return a}))),m.push(f.happyPromise(i("ratio",null,/image/,this.imageDimensions,function(a,b){for(var c=b.toString().split(","),d=!1,e=0;e<c.length;e++)Math.abs(a.width/a.height-f.ratioToFloat(c[e]))<1e-4&&(d=!0);return d}))),m.push(f.happyPromise(i("maxRatio","ratio.max",/image/,this.imageDimensions,function(a,b){return a.width/a.height-f.ratioToFloat(b)<1e-4}))),m.push(f.happyPromise(i("minRatio","ratio.min",/image/,this.imageDimensions,function(a,b){return a.width/a.height-f.ratioToFloat(b)>-1e-4}))),m.push(f.happyPromise(i("maxDuration","duration.max",/audio|video/,this.mediaDuration,function(a,b){return a<=f.translateScalars(b)}))),m.push(f.happyPromise(i("minDuration","duration.min",/audio|video/,this.mediaDuration,function(a,b){return a>=f.translateScalars(b)}))),m.push(f.happyPromise(i("duration",null,/audio|video/,function(a,b){return f.emptyPromise(b)},function(a){return a}))),m.push(f.happyPromise(i("validateAsyncFn",null,null,function(a,b){return b},function(a){return a===!0||null===a||""===a}))),b.all(m).then(function(){l.resolve(d,d.$ngfValidations)})},f.imageDimensions=function(a){if(a.$ngfWidth&&a.$ngfHeight){var d=b.defer();return c(function(){d.resolve({width:a.$ngfWidth,height:a.$ngfHeight})}),d.promise}if(a.$ngfDimensionPromise)return a.$ngfDimensionPromise;var e=b.defer();return c(function(){return 0!==a.type.indexOf("image")?void e.reject("not image"):void f.dataUrl(a).then(function(b){function d(){var b=h[0].clientWidth,c=h[0].clientHeight;h.remove(),a.$ngfWidth=b,a.$ngfHeight=c,e.resolve({width:b,height:c})}function f(){h.remove(),e.reject("load error")}function g(){c(function(){h[0].parentNode&&(h[0].clientWidth?d():i>10?f():g())},1e3)}var h=angular.element("<img>").attr("src",b).css("visibility","hidden").css("position","fixed").css("max-width","none !important").css("max-height","none !important");h.on("load",d),h.on("error",f);var i=0;g(),angular.element(document.getElementsByTagName("body")[0]).append(h)},function(){e.reject("load error")})}),a.$ngfDimensionPromise=e.promise,a.$ngfDimensionPromise["finally"](function(){delete a.$ngfDimensionPromise}),a.$ngfDimensionPromise},f.mediaDuration=function(a){if(a.$ngfDuration){var d=b.defer();return c(function(){d.resolve(a.$ngfDuration)}),d.promise}if(a.$ngfDurationPromise)return a.$ngfDurationPromise;var e=b.defer();return c(function(){return 0!==a.type.indexOf("audio")&&0!==a.type.indexOf("video")?void e.reject("not media"):void f.dataUrl(a).then(function(b){function d(){var b=h[0].duration;a.$ngfDuration=b,h.remove(),e.resolve(b)}function f(){h.remove(),e.reject("load error")}function g(){c(function(){h[0].parentNode&&(h[0].duration?d():i>10?f():g())},1e3)}var h=angular.element(0===a.type.indexOf("audio")?"<audio>":"<video>").attr("src",b).css("visibility","none").css("position","fixed");h.on("loadedmetadata",d),h.on("error",f);var i=0;g(),angular.element(document.body).append(h)},function(){e.reject("load error")})}),a.$ngfDurationPromise=e.promise,a.$ngfDurationPromise["finally"](function(){delete a.$ngfDurationPromise}),a.$ngfDurationPromise},f}]),ngFileUpload.service("UploadResize",["UploadValidate","$q",function(a,b){var c=a,d=function(a,b,c,d,e){var f=e?Math.max(c/a,d/b):Math.min(c/a,d/b);return{width:a*f,height:b*f,marginX:a*f-c,marginY:b*f-d}},e=function(a,e,f,g,h,i,j,k){var l=b.defer(),m=document.createElement("canvas"),n=document.createElement("img");return n.onload=function(){if(null!=k&&k(n.width,n.height)===!1)return void l.reject("resizeIf");try{if(i){var a=c.ratioToFloat(i),b=n.width/n.height;a>b?(e=n.width,f=e/a):(f=n.height,e=f*a)}e||(e=n.width),f||(f=n.height);var o=d(n.width,n.height,e,f,j);m.width=Math.min(o.width,e),m.height=Math.min(o.height,f);var p=m.getContext("2d");p.drawImage(n,Math.min(0,-o.marginX/2),Math.min(0,-o.marginY/2),o.width,o.height),l.resolve(m.toDataURL(h||"image/WebP",g||.934))}catch(q){l.reject(q)}},n.onerror=function(){l.reject()},n.src=a,l.promise};return c.dataUrltoBlob=function(a,b,c){for(var d=a.split(","),e=d[0].match(/:(.*?);/)[1],f=atob(d[1]),g=f.length,h=new Uint8Array(g);g--;)h[g]=f.charCodeAt(g);var i=new window.Blob([h],{type:e});return i.name=b,i.$ngfOrigSize=c,i},c.isResizeSupported=function(){var a=document.createElement("canvas");return window.atob&&a.getContext&&a.getContext("2d")&&window.Blob},c.isResizeSupported()&&Object.defineProperty(window.Blob.prototype,"name",{get:function(){return this.$ngfName},set:function(a){this.$ngfName=a},configurable:!0}),c.resize=function(a,d,f,g,h,i,j,k,l){if(0!==a.type.indexOf("image"))return c.emptyPromise(a);var m=b.defer();return c.dataUrl(a,!0).then(function(b){e(b,d,f,g,h||a.type,i,j,k).then(function(d){if("image/jpeg"===a.type&&l)try{d=c.restoreExif(b,d)}catch(e){setTimeout(function(){throw e},1)}try{var f=c.dataUrltoBlob(d,a.name,a.size);m.resolve(f)}catch(e){m.reject(e)}},function(b){"resizeIf"===b&&m.resolve(a),m.reject(b)})},function(a){m.reject(a)}),m.promise},c}]),function(){function a(a,c,d,e,f,g,h,i,j,k){function l(){return c.attr("disabled")||r("ngfDropDisabled",a)}function m(b,c){i.updateModel(e,d,a,r("ngfChange")||r("ngfDrop"),b,c)}function n(b,c){if(!i.shouldUpdateOn(b,d,a)||!c)return i.rejectPromise([]);var e=[];c.replace(/<(img src|img [^>]* src) *=\"([^\"]*)\"/gi,function(a,b,c){e.push(c)});var f=[],g=[];if(e.length){angular.forEach(e,function(a){f.push(i.urlToBlob(a).then(function(a){g.push(a)}))});var h=k.defer();return k.all(f).then(function(){h.resolve(g)},function(a){h.reject(a)}),h.promise}return i.emptyPromise()}function o(a,b,c,d){var e=r("ngfDragOverClass",a,{$event:c}),f="dragover";if(angular.isString(e))f=e;else if(e&&(e.delay&&(v=e.delay),e.accept||e.reject)){var g=c.dataTransfer.items;if(null!=g&&g.length)for(var h=e.pattern||r("ngfPattern",a,{$event:c}),j=g.length;j--;){if(!i.validatePattern(g[j],h)){f=e.reject;break}f=e.accept}else f=e.accept}d(f)}function p(b,c,e,f){function g(a,b){var c=k.defer();if(null!=a)if(a.isDirectory){var d=[i.emptyPromise()];if(m){var e={type:"directory"};e.name=e.path=(b||"")+a.name+a.name,n.push(e)}var f=a.createReader(),h=[],p=function(){f.readEntries(function(e){try{e.length?(h=h.concat(Array.prototype.slice.call(e||[],0)),p()):(angular.forEach(h.slice(0),function(c){n.length<=j&&l>=o&&d.push(g(c,(b?b:"")+a.name+"/"))}),k.all(d).then(function(){c.resolve()},function(a){c.reject(a)}))}catch(f){c.reject(f)}},function(a){c.reject(a)})};p()}else a.file(function(a){try{a.path=(b?b:"")+a.name,m&&(a=i.rename(a,a.path)),n.push(a),o+=a.size,c.resolve()}catch(d){c.reject(d)}},function(a){c.reject(a)});return c.promise}var j=i.getValidationAttr(d,a,"maxFiles")||Number.MAX_VALUE,l=i.getValidationAttr(d,a,"maxTotalSize")||Number.MAX_VALUE,m=r("ngfIncludeDir",a),n=[],o=0,p=[i.emptyPromise()];if(b&&b.length>0&&"file"!==h.protocol())for(var q=0;q<b.length;q++){if(b[q].webkitGetAsEntry&&b[q].webkitGetAsEntry()&&b[q].webkitGetAsEntry().isDirectory){var s=b[q].webkitGetAsEntry();if(s.isDirectory&&!e)continue;null!=s&&p.push(g(s))}else{var t=b[q].getAsFile();null!=t&&(n.push(t),o+=t.size)}if(n.length>j||o>l||!f&&n.length>0)break}else if(null!=c)for(var u=0;u<c.length;u++){var v=c.item(u);if((v.type||v.size>0)&&(n.push(v),o+=v.size),n.length>j||o>l||!f&&n.length>0)break}var w=k.defer();return k.all(p).then(function(){if(f||m||!n.length)w.resolve(n);else{for(var a=0;n[a]&&"directory"===n[a].type;)a++;w.resolve([n[a]])}},function(a){w.reject(a)}),w.promise}var q=b(),r=function(a,b,c){return i.attrGetter(a,d,b,c)};if(r("dropAvailable")&&g(function(){a[r("dropAvailable")]?a[r("dropAvailable")].value=q:a[r("dropAvailable")]=q}),!q)return void(r("ngfHideOnDropNotAvailable",a)===!0&&c.css("display","none"));null==r("ngfSelect")&&i.registerModelChangeValidator(e,d,a);var s,t=null,u=f(r("ngfStopPropagation")),v=1;c[0].addEventListener("dragover",function(b){if(!l()&&i.shouldUpdateOn("drop",d,a)){if(b.preventDefault(),u(a)&&b.stopPropagation(),navigator.userAgent.indexOf("Chrome")>-1){var e=b.dataTransfer.effectAllowed;b.dataTransfer.dropEffect="move"===e||"linkMove"===e?"move":"copy"}g.cancel(t),s||(s="C",o(a,d,b,function(d){s=d,c.addClass(s),r("ngfDrag",a,{$isDragging:!0,$class:s,$event:b})}))}},!1),c[0].addEventListener("dragenter",function(b){!l()&&i.shouldUpdateOn("drop",d,a)&&(b.preventDefault(),u(a)&&b.stopPropagation())},!1),c[0].addEventListener("dragleave",function(b){!l()&&i.shouldUpdateOn("drop",d,a)&&(b.preventDefault(),u(a)&&b.stopPropagation(),t=g(function(){s&&c.removeClass(s),s=null,r("ngfDrag",a,{$isDragging:!1,$event:b})},v||100))},!1),c[0].addEventListener("drop",function(b){if(!l()&&i.shouldUpdateOn("drop",d,a)){b.preventDefault(),u(a)&&b.stopPropagation(),s&&c.removeClass(s),s=null;var e,f=b.dataTransfer.items;try{e=b.dataTransfer&&b.dataTransfer.getData&&b.dataTransfer.getData("text/html")}catch(g){}p(f,b.dataTransfer.files,r("ngfAllowDir",a)!==!1,r("multiple")||r("ngfMultiple",a)).then(function(a){a.length?m(a,b):n("dropUrl",e).then(function(a){m(a,b)})})}},!1),c[0].addEventListener("paste",function(b){if(navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&r("ngfEnableFirefoxPaste",a)&&b.preventDefault(),!l()&&i.shouldUpdateOn("paste",d,a)){var c=[],e=b.clipboardData||b.originalEvent.clipboardData;if(e&&e.items)for(var f=0;f<e.items.length;f++)-1!==e.items[f].type.indexOf("image")&&c.push(e.items[f].getAsFile());c.length?m(c,b):n("pasteUrl",e).then(function(a){m(a,b)})}},!1),navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&r("ngfEnableFirefoxPaste",a)&&(c.attr("contenteditable",!0),c.on("keypress",function(a){a.metaKey||a.ctrlKey||a.preventDefault()}))}function b(){var a=document.createElement("div");return"draggable"in a&&"ondrop"in a&&!/Edge\/12./i.test(navigator.userAgent)}ngFileUpload.directive("ngfDrop",["$parse","$timeout","$location","Upload","$http","$q",function(b,c,d,e,f,g){return{restrict:"AEC",require:"?ngModel",link:function(h,i,j,k){a(h,i,j,k,b,c,d,e,f,g)}}}]),ngFileUpload.directive("ngfNoFileDrop",function(){return function(a,c){b()&&c.css("display","none")}}),ngFileUpload.directive("ngfDropAvailable",["$parse","$timeout","Upload",function(a,c,d){return function(e,f,g){if(b()){var h=a(d.attrGetter("ngfDropAvailable",g));c(function(){h(e),h.assign&&h.assign(e,!0)})}}}])}(),ngFileUpload.service("UploadExif",["UploadResize","$q",function(a,b){function c(a,b,c,d){switch(b){case 2:return a.transform(-1,0,0,1,c,0);case 3:return a.transform(-1,0,0,-1,c,d);case 4:return a.transform(1,0,0,-1,0,d);case 5:return a.transform(0,1,1,0,0,0);case 6:return a.transform(0,1,-1,0,d,0);case 7:return a.transform(0,-1,-1,0,d,c);case 8:return a.transform(0,-1,1,0,0,c)}}function d(a){for(var b="",c=new Uint8Array(a),d=c.byteLength,e=0;d>e;e++)b+=String.fromCharCode(c[e]);return window.btoa(b)}var e=a;return e.isExifSupported=function(){return window.FileReader&&(new FileReader).readAsArrayBuffer&&e.isResizeSupported()},e.readOrientation=function(a){var c=b.defer(),d=new FileReader,e=a.slice?a.slice(0,65536):a;return d.readAsArrayBuffer(e),d.onerror=function(a){return c.reject(a)},d.onload=function(a){var b={orientation:1},d=new DataView(this.result);if(65496!==d.getUint16(0,!1))return c.resolve(b);for(var e=d.byteLength,f=2;e>f;){var g=d.getUint16(f,!1);if(f+=2,65505===g){if(1165519206!==d.getUint32(f+=2,!1))return c.resolve(b);var h=18761===d.getUint16(f+=6,!1);f+=d.getUint32(f+4,h);var i=d.getUint16(f,h);f+=2;for(var j=0;i>j;j++)if(274===d.getUint16(f+12*j,h)){var k=d.getUint16(f+12*j+8,h);return k>=2&&8>=k&&(d.setUint16(f+12*j+8,1,h),b.fixedArrayBuffer=a.target.result),b.orientation=k,c.resolve(b)}}else{if(65280!==(65280&g))break;f+=d.getUint16(f,!1)}}return c.resolve(b)},c.promise},e.applyExifRotation=function(a){if(0!==a.type.indexOf("image/jpeg"))return e.emptyPromise(a);var f=b.defer();return e.readOrientation(a).then(function(b){return b.orientation<2||b.orientation>8?f.resolve(a):void e.dataUrl(a,!0).then(function(g){var h=document.createElement("canvas"),i=document.createElement("img");i.onload=function(){try{h.width=b.orientation>4?i.height:i.width,h.height=b.orientation>4?i.width:i.height;var g=h.getContext("2d");c(g,b.orientation,i.width,i.height),g.drawImage(i,0,0);var j=h.toDataURL(a.type||"image/WebP",.934);j=e.restoreExif(d(b.fixedArrayBuffer),j);var k=e.dataUrltoBlob(j,a.name);f.resolve(k)}catch(l){return f.reject(l)}},i.onerror=function(){f.reject()},i.src=g},function(a){f.reject(a)})},function(a){f.reject(a)}),f.promise},e.restoreExif=function(a,b){var c={};return c.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c.encode64=function(a){var b,c,d,e,f,g="",h="",i="",j=0;do b=a[j++],c=a[j++],h=a[j++],d=b>>2,e=(3&b)<<4|c>>4,f=(15&c)<<2|h>>6,i=63&h,isNaN(c)?f=i=64:isNaN(h)&&(i=64),g=g+this.KEY_STR.charAt(d)+this.KEY_STR.charAt(e)+this.KEY_STR.charAt(f)+this.KEY_STR.charAt(i),b=c=h="",d=e=f=i="";while(j<a.length);return g},c.restore=function(a,b){a.match("data:image/jpeg;base64,")&&(a=a.replace("data:image/jpeg;base64,",""));var c=this.decode64(a),d=this.slice2Segments(c),e=this.exifManipulation(b,d);return"data:image/jpeg;base64,"+this.encode64(e)},c.exifManipulation=function(a,b){var c=this.getExifArray(b),d=this.insertExif(a,c);return new Uint8Array(d)},c.getExifArray=function(a){for(var b,c=0;c<a.length;c++)if(b=a[c],255===b[0]&225===b[1])return b;return[]},c.insertExif=function(a,b){var c=a.replace("data:image/jpeg;base64,",""),d=this.decode64(c),e=d.indexOf(255,3),f=d.slice(0,e),g=d.slice(e),h=f;return h=h.concat(b),h=h.concat(g)},c.slice2Segments=function(a){for(var b=0,c=[];;){if(255===a[b]&218===a[b+1])break;if(255===a[b]&216===a[b+1])b+=2;else{var d=256*a[b+2]+a[b+3],e=b+d+2,f=a.slice(b,e);c.push(f),b=e}if(b>a.length)break}return c},c.decode64=function(a){var b,c,d,e,f,g="",h="",i=0,j=[],k=/[^A-Za-z0-9\+\/\=]/g;k.exec(a)&&console.log("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, NaNExpect errors in decoding."),a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");do d=this.KEY_STR.indexOf(a.charAt(i++)),e=this.KEY_STR.indexOf(a.charAt(i++)),f=this.KEY_STR.indexOf(a.charAt(i++)),h=this.KEY_STR.indexOf(a.charAt(i++)),b=d<<2|e>>4,c=(15&e)<<4|f>>2,g=(3&f)<<6|h,j.push(b),64!==f&&j.push(c),64!==h&&j.push(g),b=c=g="",d=e=f=h="";while(i<a.length);return j},c.restore(a,b)},e}]),angular.module("ngProgress.provider",["ngProgress.directive"]).provider("ngProgress",function(){"use strict";this.autoStyle=!0,this.count=0,this.height="2px",this.color="firebrick",this.$get=["$document","$window","$compile","$rootScope","$timeout",function(a,b,c,d,e){var f=this.count,g=this.height,h=this.color,i=d,j=a.find("body")[0],k=c("<ng-progress></ng-progress>")(i);j.appendChild(k[0]),i.count=f,void 0!==g&&k.eq(0).children().css("height",g),void 0!==h&&(k.eq(0).children().css("background-color",h),k.eq(0).children().css("color",h));var l,m=0;return{start:function(){this.show();var a=this;clearInterval(m),m=setInterval(function(){if(isNaN(f))clearInterval(m),f=0,a.hide();else{var b=100-f;f+=.15*Math.pow(1-Math.sqrt(b),2),a.updateCount(f)}},200)},updateCount:function(a){i.count=a,i.$$phase||i.$apply()},height:function(a){return void 0!==a&&(g=a,i.height=g,i.$$phase||i.$apply()),g},color:function(a){return void 0!==a&&(h=a,i.color=h,i.$$phase||i.$apply()),h},hide:function(){k.children().css("opacity","0");var a=this;a.animate(function(){k.children().css("width","0%"),a.animate(function(){a.show()},500)},500)},show:function(){var a=this;a.animate(function(){k.children().css("opacity","1")},100)},animate:function(a,b){l&&e.cancel(l),l=e(a,b)},status:function(){return f},stop:function(){clearInterval(m)},set:function(a){return this.show(),this.updateCount(a),f=a,clearInterval(m),f},css:function(a){return k.children().css(a)},reset:function(){return clearInterval(m),f=0,this.updateCount(f),0},complete:function(){f=100,this.updateCount(f);var a=this;return clearInterval(m),e(function(){a.hide(),e(function(){f=0,a.updateCount(f)},500)},1e3),
f},setParent:function(a){if(null===a||void 0===a)throw new Error("Provide a valid parent of type HTMLElement");null!==j&&void 0!==j&&j.removeChild(k[0]),j=a,j.appendChild(k[0])},getDomElement:function(){return k}}}],this.setColor=function(a){return void 0!==a&&(this.color=a),this.color},this.setHeight=function(a){return void 0!==a&&(this.height=a),this.height}}),angular.module("ngProgress.directive",[]).directive("ngProgress",["$window","$rootScope",function(a,b){var c={replace:!0,restrict:"E",link:function(a,c,d,e){b.$watch("count",function(b){void 0===b&&null===b||(a.counter=b,c.eq(0).children().css("width",b+"%"))}),b.$watch("color",function(b){void 0===b&&null===b||(a.color=b,c.eq(0).children().css("background-color",b),c.eq(0).children().css("color",b))}),b.$watch("height",function(b){void 0===b&&null===b||(a.height=b,c.eq(0).children().css("height",b))})},template:'<div id="ngProgress-container"><div id="ngProgress"></div></div>'};return c}]),angular.module("ngProgress",["ngProgress.directive","ngProgress.provider"]),function(a,b){"object"==typeof exports?module.exports=b():"function"==typeof define&&define.amd?define(b):a.Spinner=b()}(this,function(){"use strict";function a(a,b){var c,d=document.createElement(a||"div");for(c in b)d[c]=b[c];return d}function b(a){for(var b=1,c=arguments.length;c>b;b++)a.appendChild(arguments[b]);return a}function c(a,b,c,d){var e=["opacity",b,~~(100*a),c,d].join("-"),f=.01+c/d*100,g=Math.max(1-(1-a)/b*(100-f),a),h=j.substring(0,j.indexOf("Animation")).toLowerCase(),i=h&&"-"+h+"-"||"";return l[e]||(m.insertRule("@"+i+"keyframes "+e+"{0%{opacity:"+g+"}"+f+"%{opacity:"+a+"}"+(f+.01)+"%{opacity:1}"+(f+b)%100+"%{opacity:"+a+"}100%{opacity:"+g+"}}",m.cssRules.length),l[e]=1),e}function d(a,b){var c,d,e=a.style;for(b=b.charAt(0).toUpperCase()+b.slice(1),d=0;d<k.length;d++)if(c=k[d]+b,void 0!==e[c])return c;return void 0!==e[b]?b:void 0}function e(a,b){for(var c in b)a.style[d(a,c)||c]=b[c];return a}function f(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)void 0===a[d]&&(a[d]=c[d])}return a}function g(a,b){return"string"==typeof a?a:a[b%a.length]}function h(a){this.opts=f(a||{},h.defaults,n)}function i(){function c(b,c){return a("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',c)}m.addRule(".spin-vml","behavior:url(#default#VML)"),h.prototype.lines=function(a,d){function f(){return e(c("group",{coordsize:k+" "+k,coordorigin:-j+" "+-j}),{width:k,height:k})}function h(a,h,i){b(m,b(e(f(),{rotation:360/d.lines*a+"deg",left:~~h}),b(e(c("roundrect",{arcsize:d.corners}),{width:j,height:d.width,left:d.radius,top:-d.width>>1,filter:i}),c("fill",{color:g(d.color,a),opacity:d.opacity}),c("stroke",{opacity:0}))))}var i,j=d.length+d.width,k=2*j,l=2*-(d.width+d.length)+"px",m=e(f(),{position:"absolute",top:l,left:l});if(d.shadow)for(i=1;i<=d.lines;i++)h(i,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(i=1;i<=d.lines;i++)h(i);return b(a,m)},h.prototype.opacity=function(a,b,c,d){var e=a.firstChild;d=d.shadow&&d.lines||0,e&&b+d<e.childNodes.length&&(e=e.childNodes[b+d],e=e&&e.firstChild,e=e&&e.firstChild,e&&(e.opacity=c))}}var j,k=["webkit","Moz","ms","O"],l={},m=function(){var c=a("style",{type:"text/css"});return b(document.getElementsByTagName("head")[0],c),c.sheet||c.styleSheet}(),n={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",position:"absolute"};h.defaults={},f(h.prototype,{spin:function(b){this.stop();var c=this,d=c.opts,f=c.el=e(a(0,{className:d.className}),{position:d.position,width:0,zIndex:d.zIndex});if(e(f,{left:d.left,top:d.top}),b&&b.insertBefore(f,b.firstChild||null),f.setAttribute("role","progressbar"),c.lines(f,c.opts),!j){var g,h=0,i=(d.lines-1)*(1-d.direction)/2,k=d.fps,l=k/d.speed,m=(1-d.opacity)/(l*d.trail/100),n=l/d.lines;!function o(){h++;for(var a=0;a<d.lines;a++)g=Math.max(1-(h+(d.lines-a)*n)%l*m,d.opacity),c.opacity(f,a*d.direction+i,g,d);c.timeout=c.el&&setTimeout(o,~~(1e3/k))}()}return c},stop:function(){var a=this.el;return a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=void 0),this},lines:function(d,f){function h(b,c){return e(a(),{position:"absolute",width:f.length+f.width+"px",height:f.width+"px",background:b,boxShadow:c,transformOrigin:"left",transform:"rotate("+~~(360/f.lines*k+f.rotate)+"deg) translate("+f.radius+"px,0)",borderRadius:(f.corners*f.width>>1)+"px"})}for(var i,k=0,l=(f.lines-1)*(1-f.direction)/2;k<f.lines;k++)i=e(a(),{position:"absolute",top:1+~(f.width/2)+"px",transform:f.hwaccel?"translate3d(0,0,0)":"",opacity:f.opacity,animation:j&&c(f.opacity,f.trail,l+k*f.direction,f.lines)+" "+1/f.speed+"s linear infinite"}),f.shadow&&b(i,e(h("#000","0 0 4px #000"),{top:"2px"})),b(d,b(i,h(g(f.color,k),"0 0 1px rgba(0,0,0,.1)")));return d},opacity:function(a,b,c){b<a.childNodes.length&&(a.childNodes[b].style.opacity=c)}});var o=e(a("group"),{behavior:"url(#default#VML)"});return!d(o,"transform")&&o.adj?i():j=d(o,"animation"),h}),function(a,b){"object"==typeof exports?module.exports=b(require("spin.js")):"function"==typeof define&&define.amd?define(["spin"],b):a.Ladda=b(a.Spinner)}(this,function(a){"use strict";function b(a){if(void 0===a)return void console.warn("Ladda button target must be defined.");a.querySelector(".ladda-label")||(a.innerHTML='<span class="ladda-label">'+a.innerHTML+"</span>");var b,c=a.querySelector(".ladda-spinner");c||(c=document.createElement("span"),c.className="ladda-spinner"),a.appendChild(c);var d,e={start:function(){return b||(b=g(a)),a.setAttribute("disabled",""),a.setAttribute("data-loading",""),clearTimeout(d),b.spin(c),this.setProgress(0),this},startAfter:function(a){return clearTimeout(d),d=setTimeout(function(){e.start()},a),this},stop:function(){return a.removeAttribute("disabled"),a.removeAttribute("data-loading"),clearTimeout(d),b&&(d=setTimeout(function(){b.stop()},1e3)),this},toggle:function(){return this.isLoading()?this.stop():this.start(),this},setProgress:function(b){b=Math.max(Math.min(b,1),0);var c=a.querySelector(".ladda-progress");0===b&&c&&c.parentNode?c.parentNode.removeChild(c):(c||(c=document.createElement("div"),c.className="ladda-progress",a.appendChild(c)),c.style.width=(b||0)*a.offsetWidth+"px")},enable:function(){return this.stop(),this},disable:function(){return this.stop(),a.setAttribute("disabled",""),this},isLoading:function(){return a.hasAttribute("data-loading")},remove:function(){clearTimeout(d),a.removeAttribute("disabled",""),a.removeAttribute("data-loading",""),b&&(b.stop(),b=null);for(var c=0,f=i.length;f>c;c++)if(e===i[c]){i.splice(c,1);break}}};return i.push(e),e}function c(a,b){for(;a.parentNode&&a.tagName!==b;)a=a.parentNode;return b===a.tagName?a:void 0}function d(a){for(var b=["input","textarea","select"],c=[],d=0;b.length>d;d++)for(var e=a.getElementsByTagName(b[d]),f=0;e.length>f;f++)e[f].hasAttribute("required")&&c.push(e[f]);return c}function e(a,e){e=e||{};var f=[];"string"==typeof a?f=h(document.querySelectorAll(a)):"object"==typeof a&&"string"==typeof a.nodeName&&(f=[a]);for(var g=0,i=f.length;i>g;g++)(function(){var a=f[g];if("function"==typeof a.addEventListener){var h=b(a),i=-1;a.addEventListener("click",function(){var b=!0,f=c(a,"FORM");if(void 0!==f)for(var g=d(f),j=0;g.length>j;j++)""===g[j].value.replace(/^\s+|\s+$/g,"")&&(b=!1),"checkbox"!==g[j].type&&"radio"!==g[j].type||g[j].checked||(b=!1),"email"===g[j].type&&(b=/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/.test(g[j].value));b&&(h.startAfter(1),"number"==typeof e.timeout&&(clearTimeout(i),i=setTimeout(h.stop,e.timeout)),"function"==typeof e.callback&&e.callback.apply(null,[h]))},!1)}})()}function f(){for(var a=0,b=i.length;b>a;a++)i[a].stop()}function g(b){var c,d=b.offsetHeight;0===d&&(d=parseFloat(window.getComputedStyle(b).height)),d>32&&(d*=.8),b.hasAttribute("data-spinner-size")&&(d=parseInt(b.getAttribute("data-spinner-size"),10)),b.hasAttribute("data-spinner-color")&&(c=b.getAttribute("data-spinner-color"));var e=12,f=.2*d,g=.6*f,h=7>f?2:3;return new a({color:c||"#fff",lines:e,radius:f,length:g,width:h,zIndex:"auto",top:"auto",left:"auto",className:""})}function h(a){for(var b=[],c=0;a.length>c;c++)b.push(a[c]);return b}var i=[];return{bind:e,create:b,stopAll:f}}),!function(a,b){"use strict";if("function"==typeof define&&define.amd)define(["angular","ladda"],b);else{if("undefined"==typeof module||"object"!=typeof module.exports)return b(a.angular,a.Ladda);module.exports=b(window.angular||require("angular"),require("ladda"))}}(this,function(a,b){"use strict";var c="angular-ladda";return a.module(c,[]).provider("ladda",function(){var b={style:"zoom-in"};return{setOption:function(c){a.extend(b,c)},$get:function(){return b}}}).directive("ladda",["ladda",function(c){return{restrict:"A",priority:-1,link:function(d,e,f){if(e.addClass("ladda-button"),a.isUndefined(e.attr("data-style"))&&e.attr("data-style",c.style||"zoom-in"),a.isUndefined(e.attr("data-spinner-size"))&&c.spinnerSize&&e.attr("data-spinner-size",c.spinnerSize),a.isUndefined(e.attr("data-spinner-color"))&&c.spinnerColor&&e.attr("data-spinner-color",c.spinnerColor),!e[0].querySelector(".ladda-label")){var g=document.createElement("span");g.className="ladda-label",a.element(g).append(e.contents()),e.append(g)}var h=b.create(e[0]);d.$watch(f.ladda,function(b){return b||a.isNumber(b)?(h.isLoading()||h.start(),void(a.isNumber(b)&&h.setProgress(b))):(h.stop(),void(f.ngDisabled&&e.attr("disabled",d.$eval(f.ngDisabled))))}),d.$on("$destroy",function(){h.remove()})}}}]),c}),function(){angular.module("ajoslin.promise-tracker",[]).provider("promiseTracker",function(){this.$get=["$q","$timeout",function(a,b){function c(a){a&&b.cancel(a)}return function d(e){if(!(this instanceof d))return new d(e);e=e||{};var f,g,h=[],i=this,j=e.minDuration,k=e.activationDelay;i.active=function(){return g?!1:h.length>0},i.tracking=function(){return h.length>0},i.destroy=i.cancel=function(){f=c(f),g=c(g);for(var a=h.length-1;a>=0;a--)h[a].resolve();h.length=0},i.createPromise=function(){function d(){j&&(f=b(angular.noop,j))}function e(b){return function(b){(f||a.when()).then(function(){var a=h.indexOf(i);h.splice(a,1),0===h.length&&(g=c(g))})}}var i=a.defer();return h.push(i),1===h.length&&(k?g=b(function(){g=c(g),d()},k):d()),i.promise.then(e(!1),e(!0)),i},i.addPromise=function(b){if(b=b&&(b.$promise||b)||{},!b.then)throw new Error("promiseTracker#addPromise expects a promise object!");var c=i.createPromise();return b.then(function(a){return c.resolve(a),a},function(b){return c.reject(b),a.reject(b)}),c}}}]})}(),function(){angular.module("ajoslin.promise-tracker").config(["$httpProvider",function(a){a.interceptors.push(["$q","promiseTracker",function(a,b){return{request:function(b){return b.tracker&&(angular.isArray(b.tracker)||(b.tracker=[b.tracker]),b.$promiseTrackerDeferred=b.$promiseTrackerDeferred||[],angular.forEach(b.tracker,function(a){var c=a.createPromise();b.$promiseTrackerDeferred.push(c)})),a.when(b)},response:function(b){return b.config&&b.config.$promiseTrackerDeferred&&angular.forEach(b.config.$promiseTrackerDeferred,function(a){a.resolve(b)}),a.when(b)},responseError:function(b){return b.config&&b.config.$promiseTrackerDeferred&&angular.forEach(b.config.$promiseTrackerDeferred,function(a){a.reject(b)}),a.reject(b)}}}])}])}(),angular.module("jsonFormatter",["RecursionHelper"]).provider("JSONFormatterConfig",function(){var a=!1,b=100,c=5;return{get hoverPreviewEnabled(){return a},set hoverPreviewEnabled(b){a=!!b},get hoverPreviewArrayCount(){return b},set hoverPreviewArrayCount(a){b=parseInt(a,10)},get hoverPreviewFieldCount(){return c},set hoverPreviewFieldCount(a){c=parseInt(a,10)},$get:function(){return{hoverPreviewEnabled:a,hoverPreviewArrayCount:b,hoverPreviewFieldCount:c}}}}).directive("jsonFormatter",["RecursionHelper","JSONFormatterConfig",function(a,b){function c(a){return a.replace('"','"')}function d(a){if(void 0===a)return"";if(null===a)return"Object";if("object"==typeof a&&!a.constructor)return"Object";var b=/function (.{1,})\(/,c=b.exec(a.constructor.toString());return c&&c.length>1?c[1]:""}function e(a){return null===a?"null":typeof a}function f(a,b){var d=e(a);return"null"===d||"undefined"===d?d:("string"===d&&(b='"'+c(b)+'"'),"function"===d?a.toString().replace(/[\r\n]/g,"").replace(/\{.*\}/,"")+"{}":b)}function g(a){var b="";return angular.isObject(a)?(b=d(a),angular.isArray(a)&&(b+="["+a.length+"]")):b=f(a,a),b}function h(a){a.isArray=function(){return angular.isArray(a.json)},a.isObject=function(){return angular.isObject(a.json)},a.getKeys=function(){return a.isObject()?Object.keys(a.json).map(function(a){return""===a?'""':a}):void 0},a.type=e(a.json),a.hasKey="undefined"!=typeof a.key,a.getConstructorName=function(){return d(a.json)},"string"===a.type&&("Invalid Date"!==new Date(a.json).toString()&&(a.isDate=!0),0===a.json.indexOf("http")&&(a.isUrl=!0)),a.isEmptyObject=function(){return a.getKeys()&&!a.getKeys().length&&a.isOpen&&!a.isArray()},a.isOpen=!!a.open,a.toggleOpen=function(){a.isOpen=!a.isOpen},a.childrenOpen=function(){return a.open>1?a.open-1:0},a.openLink=function(b){b&&(window.location.href=a.json)},a.parseValue=function(b){return f(a.json,b)},a.showThumbnail=function(){return!!b.hoverPreviewEnabled&&a.isObject()&&!a.isOpen},a.getThumbnail=function(){if(a.isArray())return a.json.length>b.hoverPreviewArrayCount?"Array["+a.json.length+"]":"["+a.json.map(g).join(", ")+"]";var c=a.getKeys(),d=c.slice(0,b.hoverPreviewFieldCount),e=d.map(function(b){return b+":"+g(a.json[b])}),f=c.length>=5?"":"";return"{"+e.join(", ")+f+"}"}}return{templateUrl:"json-formatter.html",restrict:"E",replace:!0,scope:{json:"=",key:"=",open:"="},compile:function(b){return a.compile(b,h)}}}]),"object"==typeof module&&(module.exports="jsonFormatter"),angular.module("RecursionHelper",[]).factory("RecursionHelper",["$compile",function(a){return{compile:function(b,c){angular.isFunction(c)&&(c={post:c});var d,e=b.contents().remove();return{pre:c&&c.pre?c.pre:null,post:function(b,f){d||(d=a(e)),d(b,function(a){f.append(a)}),c&&c.post&&c.post.apply(null,arguments)}}}}}]),angular.module("jsonFormatter").run(["$templateCache",function(a){a.put("json-formatter.html",'<div ng-init="isOpen = open && open > 0" class="json-formatter-row"><a ng-click="toggleOpen()"><span class="toggler {{isOpen ? \'open\' : \'\'}}" ng-if="isObject()"></span> <span class="key" ng-if="hasKey"><span class="key-text">{{key}}</span><span class="colon">:</span></span> <span class="value"><span ng-if="isObject()"><span class="constructor-name">{{getConstructorName(json)}}</span> <span ng-if="isArray()"><span class="bracket">[</span><span class="number">{{json.length}}</span><span class="bracket">]</span></span></span> <span ng-if="!isObject()" ng-click="openLink(isUrl)" class="{{type}}" ng-class="{date: isDate, url: isUrl}">{{parseValue(json)}}</span></span> <span ng-if="showThumbnail()" class="thumbnail-text">{{getThumbnail()}}</span></a><div class="children" ng-if="getKeys().length && isOpen"><json-formatter ng-repeat="key in getKeys() track by $index" json="json[key]" key="key" open="childrenOpen()"></json-formatter></div><div class="children empty object" ng-if="isEmptyObject()"></div><div class="children empty array" ng-if="getKeys() && !getKeys().length && isOpen && isArray()"></div></div>')}]),!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.jsondiffpatch=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d=a("./environment"),e=a("./diffpatcher").DiffPatcher;c.DiffPatcher=e,c.create=function(a){return new e(a)},c.dateReviver=a("./date-reviver");var f;if(c.diff=function(){return f||(f=new e),f.diff.apply(f,arguments)},c.patch=function(){return f||(f=new e),f.patch.apply(f,arguments)},c.unpatch=function(){return f||(f=new e),f.unpatch.apply(f,arguments)},c.reverse=function(){return f||(f=new e),f.reverse.apply(f,arguments)},d.isBrowser)c.homepage="https://github.com/benjamine/jsondiffpatch",c.version="0.1.42";else{var g="../package.json",h=a(g);c.homepage=h.homepage,c.version=h.version;var i="./formatters",j=a(i);c.formatters=j,c.console=j.console}},{"./date-reviver":6,"./diffpatcher":7,"./environment":8}],2:[function(a,b,c){var d=a("../pipe").Pipe,e=function(){};e.prototype.setResult=function(a){return this.result=a,this.hasResult=!0,this},e.prototype.exit=function(){return this.exiting=!0,this},e.prototype.switchTo=function(a,b){return"string"==typeof a||a instanceof d?this.nextPipe=a:(this.next=a,b&&(this.nextPipe=b)),this},e.prototype.push=function(a,b){return a.parent=this,"undefined"!=typeof b&&(a.childName=b),a.root=this.root||this,a.options=a.options||this.options,this.children?(this.children[this.children.length-1].next=a,this.children.push(a)):(this.children=[a],this.nextAfterChildren=this.next||null,this.next=a),a.next=this,this},c.Context=e},{"../pipe":15}],3:[function(a,b,c){var d=a("./context").Context,e=a("../date-reviver"),f=function(a,b){this.left=a,this.right=b,this.pipe="diff"};f.prototype=new d,f.prototype.setResult=function(a){if(this.options.cloneDiffValues){var b="function"==typeof this.options.cloneDiffValues?this.options.cloneDiffValues:function(a){return JSON.parse(JSON.stringify(a),e)};"object"==typeof a[0]&&(a[0]=b(a[0])),"object"==typeof a[1]&&(a[1]=b(a[1]))}return d.prototype.setResult.apply(this,arguments)},c.DiffContext=f},{"../date-reviver":6,"./context":2}],4:[function(a,b,c){var d=a("./context").Context,e=function(a,b){this.left=a,this.delta=b,this.pipe="patch"};e.prototype=new d,c.PatchContext=e},{"./context":2}],5:[function(a,b,c){var d=a("./context").Context,e=function(a){this.delta=a,this.pipe="reverse"};e.prototype=new d,c.ReverseContext=e},{"./context":2}],6:[function(a,b,c){b.exports=function(a,b){var c;return"string"==typeof b&&(c=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d*))?(Z|([+\-])(\d{2}):(\d{2}))$/.exec(b))?new Date(Date.UTC(+c[1],+c[2]-1,+c[3],+c[4],+c[5],+c[6],+(c[7]||0))):b}},{}],7:[function(a,b,c){var d=a("./processor").Processor,e=a("./pipe").Pipe,f=a("./contexts/diff").DiffContext,g=a("./contexts/patch").PatchContext,h=a("./contexts/reverse").ReverseContext,i=a("./filters/trivial"),j=a("./filters/nested"),k=a("./filters/arrays"),l=a("./filters/dates"),m=a("./filters/texts"),n=function(a){this.processor=new d(a),this.processor.pipe(new e("diff").append(j.collectChildrenDiffFilter,i.diffFilter,l.diffFilter,m.diffFilter,j.objectsDiffFilter,k.diffFilter).shouldHaveResult()),this.processor.pipe(new e("patch").append(j.collectChildrenPatchFilter,k.collectChildrenPatchFilter,i.patchFilter,m.patchFilter,j.patchFilter,k.patchFilter).shouldHaveResult()),this.processor.pipe(new e("reverse").append(j.collectChildrenReverseFilter,k.collectChildrenReverseFilter,i.reverseFilter,m.reverseFilter,j.reverseFilter,k.reverseFilter).shouldHaveResult())};n.prototype.options=function(){return this.processor.options.apply(this.processor,arguments)},n.prototype.diff=function(a,b){return this.processor.process(new f(a,b))},n.prototype.patch=function(a,b){return this.processor.process(new g(a,b))},n.prototype.reverse=function(a){return this.processor.process(new h(a))},n.prototype.unpatch=function(a,b){return this.patch(a,this.reverse(b))},c.DiffPatcher=n},{"./contexts/diff":3,"./contexts/patch":4,"./contexts/reverse":5,"./filters/arrays":9,"./filters/dates":10,"./filters/nested":12,"./filters/texts":13,"./filters/trivial":14,"./pipe":15,"./processor":16}],8:[function(a,b,c){c.isBrowser="undefined"!=typeof window},{}],9:[function(a,b,c){function d(a,b,c,d){for(var e=0;c>e;e++)for(var f=a[e],g=0;d>g;g++){var h=b[g];if(f===h)return!0}}function e(a,b,c,d,e){var f=a[c],g=b[d];if(f===g)return!0;if("object"!=typeof f||"object"!=typeof g)return!1;var h=e.objectHash;if(!h)return e.matchByPosition&&c===d;var i,j;return"number"==typeof c?(e.hashCache1=e.hashCache1||[],i=e.hashCache1[c],"undefined"==typeof i&&(e.hashCache1[c]=i=h(f,c))):i=h(f),"undefined"==typeof i?!1:("number"==typeof d?(e.hashCache2=e.hashCache2||[],j=e.hashCache2[d],"undefined"==typeof j&&(e.hashCache2[d]=j=h(g,d))):j=h(g),"undefined"==typeof j?!1:i===j)}var f=a("../contexts/diff").DiffContext,g=a("../contexts/patch").PatchContext,h=a("../contexts/reverse").ReverseContext,i=a("./lcs"),j=3,k="function"==typeof Array.isArray?Array.isArray:function(a){return a instanceof Array},l="function"==typeof Array.prototype.indexOf?function(a,b){return a.indexOf(b)}:function(a,b){for(var c=a.length,d=0;c>d;d++)if(a[d]===b)return d;return-1},m=function(a){if(a.leftIsArray){var b,c,g,h,k={objectHash:a.options&&a.options.objectHash,matchByPosition:a.options&&a.options.matchByPosition},m=0,n=0,o=a.left,p=a.right,q=o.length,r=p.length;for(q>0&&r>0&&!k.objectHash&&"boolean"!=typeof k.matchByPosition&&(k.matchByPosition=!d(o,p,q,r));q>m&&r>m&&e(o,p,m,m,k);)b=m,h=new f(a.left[b],a.right[b]),a.push(h,b),m++;for(;q>n+m&&r>n+m&&e(o,p,q-1-n,r-1-n,k);)c=q-1-n,g=r-1-n,h=new f(a.left[c],a.right[g]),a.push(h,g),n++;var s;if(m+n===q){if(q===r)return void a.setResult(void 0).exit();for(s=s||{_t:"a"},b=m;r-n>b;b++)s[b]=[p[b]];return void a.setResult(s).exit()}if(m+n===r){for(s=s||{_t:"a"},b=m;q-n>b;b++)s["_"+b]=[o[b],0,0];return void a.setResult(s).exit()}delete k.hashCache1,delete k.hashCache2;var t=o.slice(m,q-n),u=p.slice(m,r-n),v=i.get(t,u,e,k),w=[];for(s=s||{_t:"a"},b=m;q-n>b;b++)l(v.indices1,b-m)<0&&(s["_"+b]=[o[b],0,0],w.push(b));var x=!0;a.options&&a.options.arrays&&a.options.arrays.detectMove===!1&&(x=!1);var y=!1;a.options&&a.options.arrays&&a.options.arrays.includeValueOnMove&&(y=!0);var z=w.length;for(b=m;r-n>b;b++){var A=l(v.indices2,b-m);if(0>A){var B=!1;if(x&&z>0)for(var C=0;z>C;C++)if(c=w[C],e(t,u,c-m,b-m,k)){s["_"+c].splice(1,2,b,j),y||(s["_"+c][0]=""),g=b,h=new f(a.left[c],a.right[g]),a.push(h,g),w.splice(C,1),B=!0;break}B||(s[b]=[p[b]])}else c=v.indices1[A]+m,g=v.indices2[A]+m,h=new f(a.left[c],a.right[g]),a.push(h,g)}a.setResult(s).exit()}};m.filterName="arrays";var n={numerically:function(a,b){return a-b},numericallyBy:function(a){return function(b,c){return b[a]-c[a]}}},o=function(a){if(a.nested&&"a"===a.delta._t){var b,c,d=a.delta,e=a.left,f=[],h=[],i=[];for(b in d)if("_t"!==b)if("_"===b[0]){if(0!==d[b][2]&&d[b][2]!==j)throw new Error("only removal or move can be applied at original array indices, invalid diff type: "+d[b][2]);f.push(parseInt(b.slice(1),10))}else 1===d[b].length?h.push({index:parseInt(b,10),value:d[b][0]}):i.push({index:parseInt(b,10),delta:d[b]});for(f=f.sort(n.numerically),b=f.length-1;b>=0;b--){c=f[b];var k=d["_"+c],l=e.splice(c,1)[0];k[2]===j&&h.push({index:k[1],value:l})}h=h.sort(n.numericallyBy("index"));var m=h.length;for(b=0;m>b;b++){var o=h[b];e.splice(o.index,0,o.value)}var p,q=i.length;if(q>0)for(b=0;q>b;b++){var r=i[b];p=new g(a.left[r.index],r.delta),a.push(p,r.index)}return a.children?void a.exit():void a.setResult(a.left).exit()}};o.filterName="arrays";var p=function(a){if(a&&a.children&&"a"===a.delta._t){for(var b,c=a.children.length,d=0;c>d;d++)b=a.children[d],a.left[b.childName]=b.result;a.setResult(a.left).exit()}};p.filterName="arraysCollectChildren";var q=function(a){if(!a.nested)return void(a.delta[2]===j&&(a.newName="_"+a.delta[1],a.setResult([a.delta[0],parseInt(a.childName.substr(1),10),j]).exit()));if("a"===a.delta._t){var b,c;for(b in a.delta)"_t"!==b&&(c=new h(a.delta[b]),a.push(c,b));a.exit()}};q.filterName="arrays";var r=function(a,b,c){if("string"==typeof b&&"_"===b[0])return parseInt(b.substr(1),10);if(k(c)&&0===c[2])return"_"+b;var d=+b;for(var e in a){var f=a[e];if(k(f))if(f[2]===j){var g=parseInt(e.substr(1),10),h=f[1];if(h===+b)return g;d>=g&&h>d?d++:g>=d&&d>h&&d--}else if(0===f[2]){var i=parseInt(e.substr(1),10);d>=i&&d++}else 1===f.length&&d>=e&&d--}return d},s=function(a){if(a&&a.children&&"a"===a.delta._t){for(var b,c=a.children.length,d={_t:"a"},e=0;c>e;e++){b=a.children[e];var f=b.newName;"undefined"==typeof f&&(f=r(a.delta,b.childName,b.result)),d[f]!==b.result&&(d[f]=b.result)}a.setResult(d).exit()}};s.filterName="arraysCollectChildren",c.diffFilter=m,c.patchFilter=o,c.collectChildrenPatchFilter=p,c.reverseFilter=q,c.collectChildrenReverseFilter=s},{"../contexts/diff":3,"../contexts/patch":4,"../contexts/reverse":5,"./lcs":11}],10:[function(a,b,c){var d=function(a){a.left instanceof Date?(a.right instanceof Date?a.left.getTime()!==a.right.getTime()?a.setResult([a.left,a.right]):a.setResult(void 0):a.setResult([a.left,a.right]),a.exit()):a.right instanceof Date&&a.setResult([a.left,a.right]).exit()};d.filterName="dates",c.diffFilter=d},{}],11:[function(a,b,c){var d=function(a,b,c,d){return a[c]===b[d]},e=function(a,b,c,d){var e,f,g=a.length,h=b.length,i=[g+1];for(e=0;g+1>e;e++)for(i[e]=[h+1],f=0;h+1>f;f++)i[e][f]=0;for(i.match=c,e=1;g+1>e;e++)for(f=1;h+1>f;f++)c(a,b,e-1,f-1,d)?i[e][f]=i[e-1][f-1]+1:i[e][f]=Math.max(i[e-1][f],i[e][f-1]);return i},f=function(a,b,c,d,e,g){if(0===d||0===e)return{sequence:[],indices1:[],indices2:[]};if(a.match(b,c,d-1,e-1,g)){var h=f(a,b,c,d-1,e-1,g);return h.sequence.push(b[d-1]),h.indices1.push(d-1),h.indices2.push(e-1),h}return a[d][e-1]>a[d-1][e]?f(a,b,c,d,e-1,g):f(a,b,c,d-1,e,g)},g=function(a,b,c,g){g=g||{};var h=e(a,b,c||d,g),i=f(h,a,b,a.length,b.length,g);return"string"==typeof a&&"string"==typeof b&&(i.sequence=i.sequence.join("")),i};c.get=g},{}],12:[function(a,b,c){var d=a("../contexts/diff").DiffContext,e=a("../contexts/patch").PatchContext,f=a("../contexts/reverse").ReverseContext,g=function(a){if(a&&a.children){for(var b,c=a.children.length,d=a.result,e=0;c>e;e++)b=a.children[e],"undefined"!=typeof b.result&&(d=d||{},d[b.childName]=b.result);d&&a.leftIsArray&&(d._t="a"),a.setResult(d).exit()}};g.filterName="collectChildren";var h=function(a){if(!a.leftIsArray&&"object"===a.leftType){var b,c,e=a.options.propertyFilter;for(b in a.left)Object.prototype.hasOwnProperty.call(a.left,b)&&(e&&!e(b,a)||(c=new d(a.left[b],a.right[b]),a.push(c,b)));for(b in a.right)Object.prototype.hasOwnProperty.call(a.right,b)&&(e&&!e(b,a)||"undefined"==typeof a.left[b]&&(c=new d(void 0,a.right[b]),a.push(c,b)));return a.children&&0!==a.children.length?void a.exit():void a.setResult(void 0).exit()}};h.filterName="objects";var i=function(a){if(a.nested&&!a.delta._t){var b,c;for(b in a.delta)c=new e(a.left[b],a.delta[b]),a.push(c,b);a.exit()}};i.filterName="objects";var j=function(a){if(a&&a.children&&!a.delta._t){for(var b,c=a.children.length,d=0;c>d;d++)b=a.children[d],Object.prototype.hasOwnProperty.call(a.left,b.childName)&&void 0===b.result?delete a.left[b.childName]:a.left[b.childName]!==b.result&&(a.left[b.childName]=b.result);a.setResult(a.left).exit()}};j.filterName="collectChildren";var k=function(a){if(a.nested&&!a.delta._t){var b,c;for(b in a.delta)c=new f(a.delta[b]),a.push(c,b);a.exit()}};k.filterName="objects";var l=function(a){if(a&&a.children&&!a.delta._t){for(var b,c=a.children.length,d={},e=0;c>e;e++)b=a.children[e],d[b.childName]!==b.result&&(d[b.childName]=b.result);a.setResult(d).exit()}};l.filterName="collectChildren",c.collectChildrenDiffFilter=g,c.objectsDiffFilter=h,c.patchFilter=i,c.collectChildrenPatchFilter=j,c.reverseFilter=k,c.collectChildrenReverseFilter=l},{"../contexts/diff":3,"../contexts/patch":4,"../contexts/reverse":5}],13:[function(a,b,c){var d=2,e=60,f=null,g=function(b){if(!f){var c;if("undefined"!=typeof diff_match_patch)c="function"==typeof diff_match_patch?new diff_match_patch:new diff_match_patch.diff_match_patch;else if("function"==typeof a)try{var d="diff_match_patch_uncompressed",e=a("../../public/external/"+d);c=new e.diff_match_patch}catch(g){c=null}if(!c){if(!b)return null;var h=new Error("text diff_match_patch library not found");throw h.diff_match_patch_not_found=!0,h}f={diff:function(a,b){return c.patch_toText(c.patch_make(a,b))},patch:function(a,b){for(var d=c.patch_apply(c.patch_fromText(b),a),e=0;e<d[1].length;e++)if(!d[1][e]){var f=new Error("text patch failed");f.textPatchFailed=!0}return d[0]}}}return f},h=function(a){if("string"===a.leftType){var b=a.options&&a.options.textDiff&&a.options.textDiff.minLength||e;if(a.left.length<b||a.right.length<b)return void a.setResult([a.left,a.right]).exit();var c=g();if(!c)return void a.setResult([a.left,a.right]).exit();var f=c.diff;a.setResult([f(a.left,a.right),0,d]).exit()}};h.filterName="texts";var i=function(a){if(!a.nested&&a.delta[2]===d){var b=g(!0).patch;a.setResult(b(a.left,a.delta[0])).exit()}};i.filterName="texts";var j=function(a){var b,c,d,e,f,g,h,i,j=null,k=/^@@ +\-(\d+),(\d+) +\+(\d+),(\d+) +@@$/;for(d=a.split("\n"),b=0,c=d.length;c>b;b++){e=d[b];var l=e.slice(0,1);"@"===l?(j=k.exec(e),g=b,h=null,i=null,d[g]="@@ -"+j[3]+","+j[4]+" +"+j[1]+","+j[2]+" @@"):"+"===l?(h=b,d[b]="-"+d[b].slice(1),"+"===d[b-1].slice(0,1)&&(f=d[b],d[b]=d[b-1],d[b-1]=f)):"-"===l&&(i=b,d[b]="+"+d[b].slice(1))}return d.join("\n")},k=function(a){a.nested||a.delta[2]===d&&a.setResult([j(a.delta[0]),0,d]).exit()};k.filterName="texts",c.diffFilter=h,c.patchFilter=i,c.reverseFilter=k},{}],14:[function(a,b,c){var d="function"==typeof Array.isArray?Array.isArray:function(a){return a instanceof Array},e=function(a){if(a.left===a.right)return void a.setResult(void 0).exit();if("undefined"==typeof a.left){if("function"==typeof a.right)throw new Error("functions are not supported");return void a.setResult([a.right]).exit()}if("undefined"==typeof a.right)return void a.setResult([a.left,0,0]).exit();if("function"==typeof a.left||"function"==typeof a.right)throw new Error("functions are not supported");return a.leftType=null===a.left?"null":typeof a.left,a.rightType=null===a.right?"null":typeof a.right,a.leftType!==a.rightType?void a.setResult([a.left,a.right]).exit():"boolean"===a.leftType||"number"===a.leftType?void a.setResult([a.left,a.right]).exit():("object"===a.leftType&&(a.leftIsArray=d(a.left)),"object"===a.rightType&&(a.rightIsArray=d(a.right)),a.leftIsArray!==a.rightIsArray?void a.setResult([a.left,a.right]).exit():void 0)};e.filterName="trivial";var f=function(a){return"undefined"==typeof a.delta?void a.setResult(a.left).exit():(a.nested=!d(a.delta),a.nested?void 0:1===a.delta.length?void a.setResult(a.delta[0]).exit():2===a.delta.length?void a.setResult(a.delta[1]).exit():3===a.delta.length&&0===a.delta[2]?void a.setResult(void 0).exit():void 0)};f.filterName="trivial";var g=function(a){return"undefined"==typeof a.delta?void a.setResult(a.delta).exit():(a.nested=!d(a.delta),a.nested?void 0:1===a.delta.length?void a.setResult([a.delta[0],0,0]).exit():2===a.delta.length?void a.setResult([a.delta[1],a.delta[0]]).exit():3===a.delta.length&&0===a.delta[2]?void a.setResult([a.delta[0]]).exit():void 0)};g.filterName="trivial",c.diffFilter=e,c.patchFilter=f,c.reverseFilter=g},{}],15:[function(a,b,c){var d=function(a){this.name=a,this.filters=[]};d.prototype.process=function(a){if(!this.processor)throw new Error("add this pipe to a processor before using it");for(var b=this.debug,c=this.filters.length,d=a,e=0;c>e;e++){var f=this.filters[e];if(b&&this.log("filter: "+f.filterName),f(d),"object"==typeof d&&d.exiting){d.exiting=!1;break}}!d.next&&this.resultCheck&&this.resultCheck(d)},d.prototype.log=function(a){console.log("[jsondiffpatch] "+this.name+" pipe, "+a)},d.prototype.append=function(){return this.filters.push.apply(this.filters,arguments),
this},d.prototype.prepend=function(){return this.filters.unshift.apply(this.filters,arguments),this},d.prototype.indexOf=function(a){if(!a)throw new Error("a filter name is required");for(var b=0;b<this.filters.length;b++){var c=this.filters[b];if(c.filterName===a)return b}throw new Error("filter not found: "+a)},d.prototype.list=function(){for(var a=[],b=0;b<this.filters.length;b++){var c=this.filters[b];a.push(c.filterName)}return a},d.prototype.after=function(a){var b=this.indexOf(a),c=Array.prototype.slice.call(arguments,1);if(!c.length)throw new Error("a filter is required");return c.unshift(b+1,0),Array.prototype.splice.apply(this.filters,c),this},d.prototype.before=function(a){var b=this.indexOf(a),c=Array.prototype.slice.call(arguments,1);if(!c.length)throw new Error("a filter is required");return c.unshift(b,0),Array.prototype.splice.apply(this.filters,c),this},d.prototype.clear=function(){return this.filters.length=0,this},d.prototype.shouldHaveResult=function(a){if(a===!1)return void(this.resultCheck=null);if(!this.resultCheck){var b=this;return this.resultCheck=function(a){if(!a.hasResult){console.log(a);var c=new Error(b.name+" failed");throw c.noResult=!0,c}},this}},c.Pipe=d},{}],16:[function(a,b,c){var d=function(a){this.selfOptions=a||{},this.pipes={}};d.prototype.options=function(a){return a&&(this.selfOptions=a),this.selfOptions},d.prototype.pipe=function(a,b){if("string"==typeof a){if("undefined"==typeof b)return this.pipes[a];this.pipes[a]=b}if(a&&a.name){if(b=a,b.processor===this)return b;this.pipes[b.name]=b}return b.processor=this,b},d.prototype.process=function(a,b){var c=a;c.options=this.options();for(var d,e,f=b||a.pipe||"default";f;)"undefined"!=typeof c.nextAfterChildren&&(c.next=c.nextAfterChildren,c.nextAfterChildren=null),"string"==typeof f&&(f=this.pipe(f)),f.process(c),e=c,d=f,f=null,c&&c.next&&(c=c.next,f=e.nextPipe||c.pipe||d);return c.hasResult?c.result:void 0},c.Processor=d},{}]},{},[1])(1)}),!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),(b.jsondiffpatch||(b.jsondiffpatch={})).formatters=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){b.exports=a("./formatters")},{"./formatters":6}],2:[function(a,b,c){c.isBrowser="undefined"!=typeof window},{}],3:[function(a,b,c){var d=a("./base"),e=d.BaseFormatter,f=function(){this.includeMoveDestinations=!1};f.prototype=new e,f.prototype.prepareContext=function(a){e.prototype.prepareContext.call(this,a),a.indent=function(a){this.indentLevel=(this.indentLevel||0)+("undefined"==typeof a?1:a),this.indentPad=new Array(this.indentLevel+1).join("&nbsp;&nbsp;")},a.row=function(b,c){a.out('<tr><td style="white-space: nowrap;"><pre class="jsondiffpatch-annotated-indent" style="display: inline-block">'),a.out(a.indentPad),a.out('</pre><pre style="display: inline-block">'),a.out(b),a.out('</pre></td><td class="jsondiffpatch-delta-note"><div>'),a.out(c),a.out("</div></td></tr>")}},f.prototype.typeFormattterErrorFormatter=function(a,b){a.row("",'<pre class="jsondiffpatch-error">'+b+"</pre>")},f.prototype.formatTextDiffString=function(a,b){var c=this.parseTextDiff(b);a.out('<ul class="jsondiffpatch-textdiff">');for(var d=0,e=c.length;e>d;d++){var f=c[d];a.out('<li><div class="jsondiffpatch-textdiff-location"><span class="jsondiffpatch-textdiff-line-number">'+f.location.line+'</span><span class="jsondiffpatch-textdiff-char">'+f.location.chr+'</span></div><div class="jsondiffpatch-textdiff-line">');for(var g=f.pieces,h=0,i=g.length;i>h;h++){var j=g[h];a.out('<span class="jsondiffpatch-textdiff-'+j.type+'">'+j.text+"</span>")}a.out("</div></li>")}a.out("</ul>")},f.prototype.rootBegin=function(a,b,c){a.out('<table class="jsondiffpatch-annotated-delta">'),"node"===b&&(a.row("{"),a.indent()),"array"===c&&a.row('"_t": "a",',"Array delta (member names indicate array indices)")},f.prototype.rootEnd=function(a,b){"node"===b&&(a.indent(-1),a.row("}")),a.out("</table>")},f.prototype.nodeBegin=function(a,b,c,d,e){a.row("&quot;"+b+"&quot;: {"),"node"===d&&a.indent(),"array"===e&&a.row('"_t": "a",',"Array delta (member names indicate array indices)")},f.prototype.nodeEnd=function(a,b,c,d,e,f){"node"===d&&a.indent(-1),a.row("}"+(f?"":","))},f.prototype.format_unchanged=function(){},f.prototype.format_movedestination=function(){},f.prototype.format_node=function(a,b,c){this.formatDeltaChildren(a,b,c)};var g=function(a){return'<pre style="display:inline-block">&quot;'+a+"&quot;</pre>"},h={added:function(a,b,c,d){var e=" <pre>([newValue])</pre>";return"undefined"==typeof d?"new value"+e:"number"==typeof d?"insert at index "+d+e:"add property "+g(d)+e},modified:function(a,b,c,d){var e=" <pre>([previousValue, newValue])</pre>";return"undefined"==typeof d?"modify value"+e:"number"==typeof d?"modify at index "+d+e:"modify property "+g(d)+e},deleted:function(a,b,c,d){var e=" <pre>([previousValue, 0, 0])</pre>";return"undefined"==typeof d?"delete value"+e:"number"==typeof d?"remove index "+d+e:"delete property "+g(d)+e},moved:function(a,b,c,d){return'move from <span title="(position to remove at original state)">index '+d+'</span> to <span title="(position to insert at final state)">index '+a[1]+"</span>"},textdiff:function(a,b,c,d){var e="undefined"==typeof d?"":"number"==typeof d?" at index "+d:" at property "+g(d);return"text diff"+e+', format is <a href="https://code.google.com/p/google-diff-match-patch/wiki/Unidiff">a variation of Unidiff</a>'}},i=function(a,b){var c=this.getDeltaType(b),d=h[c],e=d&&d.apply(d,Array.prototype.slice.call(arguments,1)),f=JSON.stringify(b,null,2);"textdiff"===c&&(f=f.split("\\n").join('\\n"+\n   "')),a.indent(),a.row(f,e),a.indent(-1)};f.prototype.format_added=i,f.prototype.format_modified=i,f.prototype.format_deleted=i,f.prototype.format_moved=i,f.prototype.format_textdiff=i,c.AnnotatedFormatter=f;var j;c.format=function(a,b){return j||(j=new f),j.format(a,b)}},{"./base":4}],4:[function(a,b,c){var d="function"==typeof Array.isArray?Array.isArray:function(a){return a instanceof Array},e="function"==typeof Object.keys?function(a){return Object.keys(a)}:function(a){var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b},f=function(a){return"_"===a.substr(0,1)?a.slice(1):a},g=function(a){return"_t"===a?-1:"_"===a.substr(0,1)?parseInt(a.slice(1),10):parseInt(a,10)+.1},h=function(a,b){return g(a)-g(b)},i=function(){};i.prototype.format=function(a,b){var c={};return this.prepareContext(c),this.recurse(c,a,b),this.finalize(c)},i.prototype.prepareContext=function(a){a.buffer=[],a.out=function(){this.buffer.push.apply(this.buffer,arguments)}},i.prototype.typeFormattterNotFound=function(a,b){throw new Error("cannot format delta type: "+b)},i.prototype.typeFormattterErrorFormatter=function(a,b){return b.toString()},i.prototype.finalize=function(a){return d(a.buffer)?a.buffer.join(""):void 0},i.prototype.recurse=function(a,b,c,d,e,f,g){var h=b&&f,i=h?f.value:c;if("undefined"!=typeof b||"undefined"!=typeof d){var j=this.getDeltaType(b,f),k="node"===j?"a"===b._t?"array":"object":"";"undefined"!=typeof d?this.nodeBegin(a,d,e,j,k,g):this.rootBegin(a,j,k);var l;try{l=this["format_"+j]||this.typeFormattterNotFound(a,j),l.call(this,a,b,i,d,e,f)}catch(m){this.typeFormattterErrorFormatter(a,m,b,i,d,e,f),"undefined"!=typeof console&&console.error&&console.error(m.stack)}"undefined"!=typeof d?this.nodeEnd(a,d,e,j,k,g):this.rootEnd(a,j,k)}},i.prototype.formatDeltaChildren=function(a,b,c){var d=this;this.forEachDeltaKey(b,c,function(e,f,g,h){d.recurse(a,b[e],c?c[f]:void 0,e,f,g,h)})},i.prototype.forEachDeltaKey=function(a,b,c){var g,i=e(a),j="a"===a._t,k={};if("undefined"!=typeof b)for(g in b)"undefined"!=typeof a[g]||j&&"undefined"!=typeof a["_"+g]||i.push(g);for(g in a){var l=a[g];d(l)&&3===l[2]&&(k[l[1].toString()]={key:g,value:b&&b[parseInt(g.substr(1))]},this.includeMoveDestinations!==!1&&"undefined"==typeof b&&"undefined"==typeof a[l[1]]&&i.push(l[1].toString()))}j?i.sort(h):i.sort();for(var m=0,n=i.length;n>m;m++){var o=i[m];if(!j||"_t"!==o){var p=j?"number"==typeof o?o:parseInt(f(o),10):o,q=m===n-1;c(o,p,k[p],q)}}},i.prototype.getDeltaType=function(a,b){if("undefined"==typeof a)return"undefined"!=typeof b?"movedestination":"unchanged";if(d(a)){if(1===a.length)return"added";if(2===a.length)return"modified";if(3===a.length&&0===a[2])return"deleted";if(3===a.length&&2===a[2])return"textdiff";if(3===a.length&&3===a[2])return"moved"}else if("object"==typeof a)return"node";return"unknown"},i.prototype.parseTextDiff=function(a){for(var b=[],c=a.split("\n@@ "),d=0,e=c.length;e>d;d++){var f=c[d],g={pieces:[]},h=/^(?:@@ )?[-+]?(\d+),(\d+)/.exec(f).slice(1);g.location={line:h[0],chr:h[1]};for(var i=f.split("\n").slice(1),j=0,k=i.length;k>j;j++){var l=i[j];if(l.length){var m={type:"context"};"+"===l.substr(0,1)?m.type="added":"-"===l.substr(0,1)&&(m.type="deleted"),m.text=l.slice(1),g.pieces.push(m)}}b.push(g)}return b},c.BaseFormatter=i},{}],5:[function(a,b,c){function d(a){for(var b=a,c=[[/&/g,"&amp;"],[/</g,"&lt;"],[/>/g,"&gt;"],[/'/g,"&apos;"],[/"/g,"&quot;"]],d=0;d<c.length;d++)b=b.replace(c[d][0],c[d][1]);return b}var e=a("./base"),f=e.BaseFormatter,g=function(){};g.prototype=new f,g.prototype.typeFormattterErrorFormatter=function(a,b){a.out('<pre class="jsondiffpatch-error">'+b+"</pre>")},g.prototype.formatValue=function(a,b){a.out("<pre>"+d(JSON.stringify(b,null,2))+"</pre>")},g.prototype.formatTextDiffString=function(a,b){var c=this.parseTextDiff(b);a.out('<ul class="jsondiffpatch-textdiff">');for(var e=0,f=c.length;f>e;e++){var g=c[e];a.out('<li><div class="jsondiffpatch-textdiff-location"><span class="jsondiffpatch-textdiff-line-number">'+g.location.line+'</span><span class="jsondiffpatch-textdiff-char">'+g.location.chr+'</span></div><div class="jsondiffpatch-textdiff-line">');for(var h=g.pieces,i=0,j=h.length;j>i;i++){var k=h[i];a.out('<span class="jsondiffpatch-textdiff-'+k.type+'">'+d(unescape(k.text))+"</span>")}a.out("</div></li>")}a.out("</ul>")};var h=function(a){a=a||document;var b=function(a){return a.textContent||a.innerText},c=function(a,b,c){for(var d=a.querySelectorAll(b),e=0,f=d.length;f>e;e++)c(d[e])},d=function(a,b){for(var c=0,d=a.children.length;d>c;c++)b(a.children[c],c)};c(a,".jsondiffpatch-arrow",function(a){var c=a.parentNode,e=a.children[0],f=e.children[1];e.style.display="none";var g,h=b(c.querySelector(".jsondiffpatch-moved-destination")),i=c.parentNode;if(d(i,function(a){a.getAttribute("data-key")===h&&(g=a)}),g)try{var j=g.offsetTop-c.offsetTop;e.setAttribute("height",Math.abs(j)+6),a.style.top=-8+(j>0?0:j)+"px";var k=j>0?"M30,0 Q-10,"+Math.round(j/2)+" 26,"+(j-4):"M30,"+-j+" Q-10,"+Math.round(-j/2)+" 26,4";f.setAttribute("d",k),e.style.display=""}catch(l){return}})};g.prototype.rootBegin=function(a,b,c){var d="jsondiffpatch-"+b+(c?" jsondiffpatch-child-node-type-"+c:"");a.out('<div class="jsondiffpatch-delta '+d+'">')},g.prototype.rootEnd=function(a){a.out("</div>"+(a.hasArrows?'<script type="text/javascript">setTimeout('+h.toString()+",10);</script>":""))},g.prototype.nodeBegin=function(a,b,c,d,e){var f="jsondiffpatch-"+d+(e?" jsondiffpatch-child-node-type-"+e:"");a.out('<li class="'+f+'" data-key="'+c+'"><div class="jsondiffpatch-property-name">'+c+"</div>")},g.prototype.nodeEnd=function(a){a.out("</li>")},g.prototype.format_unchanged=function(a,b,c){"undefined"!=typeof c&&(a.out('<div class="jsondiffpatch-value">'),this.formatValue(a,c),a.out("</div>"))},g.prototype.format_movedestination=function(a,b,c){"undefined"!=typeof c&&(a.out('<div class="jsondiffpatch-value">'),this.formatValue(a,c),a.out("</div>"))},g.prototype.format_node=function(a,b,c){var d="a"===b._t?"array":"object";a.out('<ul class="jsondiffpatch-node jsondiffpatch-node-type-'+d+'">'),this.formatDeltaChildren(a,b,c),a.out("</ul>")},g.prototype.format_added=function(a,b){a.out('<div class="jsondiffpatch-value">'),this.formatValue(a,b[0]),a.out("</div>")},g.prototype.format_modified=function(a,b){a.out('<div class="jsondiffpatch-value jsondiffpatch-left-value">'),this.formatValue(a,b[0]),a.out('</div><div class="jsondiffpatch-value jsondiffpatch-right-value">'),this.formatValue(a,b[1]),a.out("</div>")},g.prototype.format_deleted=function(a,b){a.out('<div class="jsondiffpatch-value">'),this.formatValue(a,b[0]),a.out("</div>")},g.prototype.format_moved=function(a,b){a.out('<div class="jsondiffpatch-value">'),this.formatValue(a,b[0]),a.out('</div><div class="jsondiffpatch-moved-destination">'+b[1]+"</div>"),a.out('<div class="jsondiffpatch-arrow" style="position: relative; left: -34px;">        <svg width="30" height="60" style="position: absolute; display: none;">        <defs>            <marker id="markerArrow" markerWidth="8" markerHeight="8" refx="2" refy="4"                   orient="auto" markerUnits="userSpaceOnUse">                <path d="M1,1 L1,7 L7,4 L1,1" style="fill: #339;" />            </marker>        </defs>        <path d="M30,0 Q-10,25 26,50" style="stroke: #88f; stroke-width: 2px; fill: none;        stroke-opacity: 0.5; marker-end: url(#markerArrow);"></path>        </svg>        </div>'),a.hasArrows=!0},g.prototype.format_textdiff=function(a,b){a.out('<div class="jsondiffpatch-value">'),this.formatTextDiffString(a,b[0]),a.out("</div>")};var i=function(a,b,c){var d=b||document.body,e="jsondiffpatch-unchanged-",f={showing:e+"showing",hiding:e+"hiding",visible:e+"visible",hidden:e+"hidden"},g=d.classList;if(g){if(!c)return g.remove(f.showing),g.remove(f.hiding),g.remove(f.visible),g.remove(f.hidden),void(a===!1&&g.add(f.hidden));a===!1?(g.remove(f.showing),g.add(f.visible),setTimeout(function(){g.add(f.hiding)},10)):(g.remove(f.hiding),g.add(f.showing),g.remove(f.hidden));var i=setInterval(function(){h(d)},100);setTimeout(function(){g.remove(f.showing),g.remove(f.hiding),a===!1?(g.add(f.hidden),g.remove(f.visible)):(g.add(f.visible),g.remove(f.hidden)),setTimeout(function(){g.remove(f.visible),clearInterval(i)},c+400)},c)}},j=function(a,b){return i(!1,a,b)};c.HtmlFormatter=g,c.showUnchanged=i,c.hideUnchanged=j;var k;c.format=function(a,b){return k||(k=new g),k.format(a,b)}},{"./base":4}],6:[function(a,b,c){var d=a("../environment");if(c.base=a("./base"),c.html=a("./html"),c.annotated=a("./annotated"),c.jsonpatch=a("./jsonpatch"),!d.isBrowser){var e="./console";c.console=a(e)}},{"../environment":2,"./annotated":3,"./base":4,"./html":5,"./jsonpatch":7}],7:[function(a,b,c){!function(){function b(){this.includeMoveDestinations=!1}function d(a){return a[a.length-1]}function e(a,b){return a.sort(b),a}function f(a){return e(a,function(a,b){var c=a.path.split("/"),e=b.path.split("/");return c.length!==e.length?c.length-e.length:m(d(c),d(e))})}function g(a,b){var c=[],d=[];return a.forEach(function(a){var e=b(a)?c:d;e.push(a)}),[c,d]}function h(a){var b=g(a,function(a){return"remove"===a.op}),c=b[0],d=b[1],e=f(c);return e.concat(d)}var i=a("./base"),j=i.BaseFormatter,k={added:"add",deleted:"remove",modified:"replace",moved:"moved",movedestination:"movedestination",unchanged:"unchanged",error:"error",textDiffLine:"textDiffLine"};b.prototype=new j,b.prototype.prepareContext=function(a){j.prototype.prepareContext.call(this,a),a.result=[],a.path=[],a.pushCurrentOp=function(a,b){var c={op:a,path:this.currentPath()};"undefined"!=typeof b&&(c.value=b),this.result.push(c)},a.currentPath=function(){return"/"+this.path.join("/")}},b.prototype.typeFormattterErrorFormatter=function(a,b){a.out("[ERROR]"+b)},b.prototype.rootBegin=function(){},b.prototype.rootEnd=function(){},b.prototype.nodeBegin=function(a,b,c){a.path.push(c)},b.prototype.nodeEnd=function(a){a.path.pop()},b.prototype.format_unchanged=function(a,b,c){"undefined"!=typeof c&&a.pushCurrentOp(k.unchanged,c)},b.prototype.format_movedestination=function(a,b,c){"undefined"!=typeof c&&a.pushCurrentOp(k.movedestination,c)},b.prototype.format_node=function(a,b,c){this.formatDeltaChildren(a,b,c)},b.prototype.format_added=function(a,b){a.pushCurrentOp(k.added,b[0])},b.prototype.format_modified=function(a,b){a.pushCurrentOp(k.modified,b[1])},b.prototype.format_deleted=function(a){a.pushCurrentOp(k.deleted)},b.prototype.format_moved=function(a,b){a.pushCurrentOp(k.moved,b[1])},b.prototype.format_textdiff=function(){throw"not implimented"},b.prototype.format=function(a,b){var c={};return this.prepareContext(c),this.recurse(c,a,b),c.result},c.JSONFormatter=b;var l,m=function(a,b){var c=parseInt(a,10),d=parseInt(b,10);return isNaN(c)||isNaN(d)?0:d-c},n=function(a,c){return l||(l=new b),h(l.format(a,c))};c.log=function(a,b){console.log(n(a,b))},c.format=n}()},{"./base":4}]},{},[1])(1)});var DIFF_DELETE=-1,DIFF_INSERT=1,DIFF_EQUAL=0;if(diff_match_patch.Diff,diff_match_patch.prototype.diff_main=function(a,b,c,d){"undefined"==typeof d&&(d=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var e=d;if(null==a||null==b)throw new Error("Null input. (diff_main)");if(a==b)return a?[[DIFF_EQUAL,a]]:[];"undefined"==typeof c&&(c=!0);var f=c,g=this.diff_commonPrefix(a,b),h=a.substring(0,g);a=a.substring(g),b=b.substring(g),g=this.diff_commonSuffix(a,b);var i=a.substring(a.length-g);a=a.substring(0,a.length-g),b=b.substring(0,b.length-g);var j=this.diff_compute_(a,b,f,e);return h&&j.unshift([DIFF_EQUAL,h]),i&&j.push([DIFF_EQUAL,i]),this.diff_cleanupMerge(j),j},diff_match_patch.prototype.diff_compute_=function(a,b,c,d){var e;if(!a)return[[DIFF_INSERT,b]];if(!b)return[[DIFF_DELETE,a]];var f=a.length>b.length?a:b,g=a.length>b.length?b:a,h=f.indexOf(g);if(-1!=h)return e=[[DIFF_INSERT,f.substring(0,h)],[DIFF_EQUAL,g],[DIFF_INSERT,f.substring(h+g.length)]],a.length>b.length&&(e[0][0]=e[2][0]=DIFF_DELETE),e;if(1==g.length)return[[DIFF_DELETE,a],[DIFF_INSERT,b]];f=g=null;var i=this.diff_halfMatch_(a,b);if(i){var j=i[0],k=i[1],l=i[2],m=i[3],n=i[4],o=this.diff_main(j,l,c,d),p=this.diff_main(k,m,c,d);return o.concat([[DIFF_EQUAL,n]],p)}return c&&a.length>100&&b.length>100?this.diff_lineMode_(a,b,d):this.diff_bisect_(a,b,d)},diff_match_patch.prototype.diff_lineMode_=function(a,b,c){var d=this.diff_linesToChars_(a,b);a=d[0],b=d[1];var e=d[2],f=this.diff_bisect_(a,b,c);this.diff_charsToLines_(f,e),this.diff_cleanupSemantic(f),f.push([DIFF_EQUAL,""]);for(var g=0,h=0,i=0,j="",k="";g<f.length;){switch(f[g][0]){case DIFF_INSERT:i++,k+=f[g][1];break;case DIFF_DELETE:h++,j+=f[g][1];break;case DIFF_EQUAL:if(h>=1&&i>=1){var d=this.diff_main(j,k,!1,c);f.splice(g-h-i,h+i),g=g-h-i;for(var l=d.length-1;l>=0;l--)f.splice(g,0,d[l]);g+=d.length}i=0,h=0,j="",k=""}g++}return f.pop(),f},diff_match_patch.prototype.diff_bisect_=function(a,b,c){for(var d=a.length,e=b.length,f=Math.ceil((d+e)/2),g=f,h=2*f,i=new Array(h),j=new Array(h),k=0;h>k;k++)i[k]=-1,j[k]=-1;i[g+1]=0,j[g+1]=0;for(var l=d-e,m=l%2!=0,n=0,o=0,p=0,q=0,r=0;f>r&&!((new Date).getTime()>c);r++){for(var s=-r+n;r-o>=s;s+=2){var t,u=g+s;t=s==-r||s!=r&&i[u-1]<i[u+1]?i[u+1]:i[u-1]+1;for(var v=t-s;d>t&&e>v&&a.charAt(t)==b.charAt(v);)t++,v++;if(i[u]=t,t>d)o+=2;else if(v>e)n+=2;else if(m){var w=g+l-s;if(w>=0&&h>w&&-1!=j[w]){var x=d-j[w];if(t>=x)return this.diff_bisectSplit_(a,b,t,v,c)}}}for(var y=-r+p;r-q>=y;y+=2){var x,w=g+y;x=y==-r||y!=r&&j[w-1]<j[w+1]?j[w+1]:j[w-1]+1;for(var z=x-y;d>x&&e>z&&a.charAt(d-x-1)==b.charAt(e-z-1);)x++,z++;if(j[w]=x,x>d)q+=2;else if(z>e)p+=2;else if(!m){var u=g+l-y;if(u>=0&&h>u&&-1!=i[u]){var t=i[u],v=g+t-u;if(x=d-x,t>=x)return this.diff_bisectSplit_(a,b,t,v,c)}}}}return[[DIFF_DELETE,a],[DIFF_INSERT,b]]},diff_match_patch.prototype.diff_bisectSplit_=function(a,b,c,d,e){var f=a.substring(0,c),g=b.substring(0,d),h=a.substring(c),i=b.substring(d),j=this.diff_main(f,g,!1,e),k=this.diff_main(h,i,!1,e);return j.concat(k)},diff_match_patch.prototype.diff_linesToChars_=function(a,b){function c(a){for(var b="",c=0,f=-1,g=d.length;f<a.length-1;){f=a.indexOf("\n",c),-1==f&&(f=a.length-1);var h=a.substring(c,f+1);c=f+1,(e.hasOwnProperty?e.hasOwnProperty(h):void 0!==e[h])?b+=String.fromCharCode(e[h]):(b+=String.fromCharCode(g),e[h]=g,d[g++]=h)}return b}var d=[],e={};d[0]="";var f=c(a),g=c(b);return[f,g,d]},diff_match_patch.prototype.diff_charsToLines_=function(a,b){for(var c=0;c<a.length;c++){for(var d=a[c][1],e=[],f=0;f<d.length;f++)e[f]=b[d.charCodeAt(f)];a[c][1]=e.join("")}},diff_match_patch.prototype.diff_commonPrefix=function(a,b){if(!a||!b||a.charAt(0)!=b.charAt(0))return 0;for(var c=0,d=Math.min(a.length,b.length),e=d,f=0;e>c;)a.substring(f,e)==b.substring(f,e)?(c=e,f=c):d=e,e=Math.floor((d-c)/2+c);return e},diff_match_patch.prototype.diff_commonSuffix=function(a,b){if(!a||!b||a.charAt(a.length-1)!=b.charAt(b.length-1))return 0;for(var c=0,d=Math.min(a.length,b.length),e=d,f=0;e>c;)a.substring(a.length-e,a.length-f)==b.substring(b.length-e,b.length-f)?(c=e,f=c):d=e,e=Math.floor((d-c)/2+c);return e},diff_match_patch.prototype.diff_commonOverlap_=function(a,b){var c=a.length,d=b.length;if(0==c||0==d)return 0;c>d?a=a.substring(c-d):d>c&&(b=b.substring(0,c));var e=Math.min(c,d);if(a==b)return e;for(var f=0,g=1;;){var h=a.substring(e-g),i=b.indexOf(h);if(-1==i)return f;g+=i,0!=i&&a.substring(e-g)!=b.substring(0,g)||(f=g,g++)}},diff_match_patch.prototype.diff_halfMatch_=function(a,b){function c(a,b,c){for(var d,e,f,h,i=a.substring(c,c+Math.floor(a.length/4)),j=-1,k="";-1!=(j=b.indexOf(i,j+1));){var l=g.diff_commonPrefix(a.substring(c),b.substring(j)),m=g.diff_commonSuffix(a.substring(0,c),b.substring(0,j));k.length<m+l&&(k=b.substring(j-m,j)+b.substring(j,j+l),d=a.substring(0,c-m),e=a.substring(c+l),f=b.substring(0,j-m),h=b.substring(j+l))}return 2*k.length>=a.length?[d,e,f,h,k]:null}if(this.Diff_Timeout<=0)return null;var d=a.length>b.length?a:b,e=a.length>b.length?b:a;if(d.length<4||2*e.length<d.length)return null;var f,g=this,h=c(d,e,Math.ceil(d.length/4)),i=c(d,e,Math.ceil(d.length/2));if(!h&&!i)return null;f=i?h&&h[4].length>i[4].length?h:i:h;var j,k,l,m;a.length>b.length?(j=f[0],k=f[1],l=f[2],m=f[3]):(l=f[0],m=f[1],j=f[2],k=f[3]);var n=f[4];return[j,k,l,m,n]},diff_match_patch.prototype.diff_cleanupSemantic=function(a){for(var b=!1,c=[],d=0,e=null,f=0,g=0,h=0,i=0,j=0;f<a.length;)a[f][0]==DIFF_EQUAL?(c[d++]=f,g=i,h=j,i=0,j=0,e=a[f][1]):(a[f][0]==DIFF_INSERT?i+=a[f][1].length:j+=a[f][1].length,null!==e&&e.length<=Math.max(g,h)&&e.length<=Math.max(i,j)&&(a.splice(c[d-1],0,[DIFF_DELETE,e]),a[c[d-1]+1][0]=DIFF_INSERT,d--,d--,f=d>0?c[d-1]:-1,g=0,h=0,i=0,j=0,e=null,b=!0)),f++;for(b&&this.diff_cleanupMerge(a),this.diff_cleanupSemanticLossless(a),f=1;f<a.length;){if(a[f-1][0]==DIFF_DELETE&&a[f][0]==DIFF_INSERT){var k=a[f-1][1],l=a[f][1],m=this.diff_commonOverlap_(k,l);(m>=k.length/2||m>=l.length/2)&&(a.splice(f,0,[DIFF_EQUAL,l.substring(0,m)]),a[f-1][1]=k.substring(0,k.length-m),a[f+1][1]=l.substring(m),f++),f++}f++}},diff_match_patch.prototype.diff_cleanupSemanticLossless=function(a){function b(a,b){if(!a||!b)return 5;var h=0;return(a.charAt(a.length-1).match(c)||b.charAt(0).match(c))&&(h++,(a.charAt(a.length-1).match(d)||b.charAt(0).match(d))&&(h++,(a.charAt(a.length-1).match(e)||b.charAt(0).match(e))&&(h++,(a.match(f)||b.match(g))&&h++))),h}for(var c=/[^a-zA-Z0-9]/,d=/\s/,e=/[\r\n]/,f=/\n\r?\n$/,g=/^\r?\n\r?\n/,h=1;h<a.length-1;){if(a[h-1][0]==DIFF_EQUAL&&a[h+1][0]==DIFF_EQUAL){var i=a[h-1][1],j=a[h][1],k=a[h+1][1],l=this.diff_commonSuffix(i,j);if(l){var m=j.substring(j.length-l);i=i.substring(0,i.length-l),j=m+j.substring(0,j.length-l),k=m+k}for(var n=i,o=j,p=k,q=b(i,j)+b(j,k);j.charAt(0)===k.charAt(0);){i+=j.charAt(0),j=j.substring(1)+k.charAt(0),k=k.substring(1);var r=b(i,j)+b(j,k);r>=q&&(q=r,n=i,o=j,p=k)}a[h-1][1]!=n&&(n?a[h-1][1]=n:(a.splice(h-1,1),h--),a[h][1]=o,p?a[h+1][1]=p:(a.splice(h+1,1),h--))}h++}},diff_match_patch.prototype.diff_cleanupEfficiency=function(a){for(var b=!1,c=[],d=0,e="",f=0,g=!1,h=!1,i=!1,j=!1;f<a.length;)a[f][0]==DIFF_EQUAL?(a[f][1].length<this.Diff_EditCost&&(i||j)?(c[d++]=f,g=i,h=j,e=a[f][1]):(d=0,e=""),i=j=!1):(a[f][0]==DIFF_DELETE?j=!0:i=!0,e&&(g&&h&&i&&j||e.length<this.Diff_EditCost/2&&g+h+i+j==3)&&(a.splice(c[d-1],0,[DIFF_DELETE,e]),a[c[d-1]+1][0]=DIFF_INSERT,d--,e="",g&&h?(i=j=!0,d=0):(d--,f=d>0?c[d-1]:-1,i=j=!1),b=!0)),f++;b&&this.diff_cleanupMerge(a)},diff_match_patch.prototype.diff_cleanupMerge=function(a){a.push([DIFF_EQUAL,""]);for(var b,c=0,d=0,e=0,f="",g="";c<a.length;)switch(a[c][0]){case DIFF_INSERT:e++,g+=a[c][1],c++;break;case DIFF_DELETE:d++,f+=a[c][1],c++;break;case DIFF_EQUAL:d+e>1?(0!==d&&0!==e&&(b=this.diff_commonPrefix(g,f),0!==b&&(c-d-e>0&&a[c-d-e-1][0]==DIFF_EQUAL?a[c-d-e-1][1]+=g.substring(0,b):(a.splice(0,0,[DIFF_EQUAL,g.substring(0,b)]),c++),g=g.substring(b),f=f.substring(b)),b=this.diff_commonSuffix(g,f),0!==b&&(a[c][1]=g.substring(g.length-b)+a[c][1],g=g.substring(0,g.length-b),f=f.substring(0,f.length-b))),0===d?a.splice(c-d-e,d+e,[DIFF_INSERT,g]):0===e?a.splice(c-d-e,d+e,[DIFF_DELETE,f]):a.splice(c-d-e,d+e,[DIFF_DELETE,f],[DIFF_INSERT,g]),c=c-d-e+(d?1:0)+(e?1:0)+1):0!==c&&a[c-1][0]==DIFF_EQUAL?(a[c-1][1]+=a[c][1],a.splice(c,1)):c++,e=0,d=0,f="",g=""}""===a[a.length-1][1]&&a.pop();var h=!1;for(c=1;c<a.length-1;)a[c-1][0]==DIFF_EQUAL&&a[c+1][0]==DIFF_EQUAL&&(a[c][1].substring(a[c][1].length-a[c-1][1].length)==a[c-1][1]?(a[c][1]=a[c-1][1]+a[c][1].substring(0,a[c][1].length-a[c-1][1].length),a[c+1][1]=a[c-1][1]+a[c+1][1],a.splice(c-1,1),h=!0):a[c][1].substring(0,a[c+1][1].length)==a[c+1][1]&&(a[c-1][1]+=a[c+1][1],a[c][1]=a[c][1].substring(a[c+1][1].length)+a[c+1][1],a.splice(c+1,1),h=!0)),c++;h&&this.diff_cleanupMerge(a)},diff_match_patch.prototype.diff_xIndex=function(a,b){var c,d=0,e=0,f=0,g=0;for(c=0;c<a.length&&(a[c][0]!==DIFF_INSERT&&(d+=a[c][1].length),a[c][0]!==DIFF_DELETE&&(e+=a[c][1].length),!(d>b));c++)f=d,g=e;return a.length!=c&&a[c][0]===DIFF_DELETE?g:g+(b-f)},diff_match_patch.prototype.diff_prettyHtml=function(a){for(var b=[],c=0,d=/&/g,e=/</g,f=/>/g,g=/\n/g,h=0;h<a.length;h++){var i=a[h][0],j=a[h][1],k=j.replace(d,"&amp;").replace(e,"&lt;").replace(f,"&gt;").replace(g,"&para;<br>");switch(i){case DIFF_INSERT:b[h]='<ins style="background:#e6ffe6;">'+k+"</ins>";break;case DIFF_DELETE:b[h]='<del style="background:#ffe6e6;">'+k+"</del>";break;case DIFF_EQUAL:b[h]="<span>"+k+"</span>"}i!==DIFF_DELETE&&(c+=j.length)}return b.join("")},diff_match_patch.prototype.diff_text1=function(a){for(var b=[],c=0;c<a.length;c++)a[c][0]!==DIFF_INSERT&&(b[c]=a[c][1]);return b.join("")},diff_match_patch.prototype.diff_text2=function(a){for(var b=[],c=0;c<a.length;c++)a[c][0]!==DIFF_DELETE&&(b[c]=a[c][1]);return b.join("")},diff_match_patch.prototype.diff_levenshtein=function(a){for(var b=0,c=0,d=0,e=0;e<a.length;e++){var f=a[e][0],g=a[e][1];switch(f){case DIFF_INSERT:c+=g.length;break;case DIFF_DELETE:d+=g.length;break;case DIFF_EQUAL:b+=Math.max(c,d),c=0,d=0}}return b+=Math.max(c,d)},diff_match_patch.prototype.diff_toDelta=function(a){for(var b=[],c=0;c<a.length;c++)switch(a[c][0]){case DIFF_INSERT:b[c]="+"+encodeURI(a[c][1]);break;case DIFF_DELETE:b[c]="-"+a[c][1].length;break;case DIFF_EQUAL:b[c]="="+a[c][1].length}return b.join("	").replace(/%20/g," ")},diff_match_patch.prototype.diff_fromDelta=function(a,b){for(var c=[],d=0,e=0,f=b.split(/\t/g),g=0;g<f.length;g++){var h=f[g].substring(1);switch(f[g].charAt(0)){case"+":try{c[d++]=[DIFF_INSERT,decodeURI(h)]}catch(i){throw new Error("Illegal escape in diff_fromDelta: "+h)}break;case"-":case"=":var j=parseInt(h,10);if(isNaN(j)||0>j)throw new Error("Invalid number in diff_fromDelta: "+h);var k=a.substring(e,e+=j);"="==f[g].charAt(0)?c[d++]=[DIFF_EQUAL,k]:c[d++]=[DIFF_DELETE,k];break;default:if(f[g])throw new Error("Invalid diff operation in diff_fromDelta: "+f[g])}}if(e!=a.length)throw new Error("Delta length ("+e+") does not equal source text length ("+a.length+").");return c},diff_match_patch.prototype.match_main=function(a,b,c){if(null==a||null==b||null==c)throw new Error("Null input. (match_main)");return c=Math.max(0,Math.min(c,a.length)),a==b?0:a.length?a.substring(c,c+b.length)==b?c:this.match_bitap_(a,b,c):-1},diff_match_patch.prototype.match_bitap_=function(a,b,c){function d(a,d){var e=a/b.length,g=Math.abs(c-d);return f.Match_Distance?e+g/f.Match_Distance:g?1:e}if(b.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var e=this.match_alphabet_(b),f=this,g=this.Match_Threshold,h=a.indexOf(b,c);-1!=h&&(g=Math.min(d(0,h),g),h=a.lastIndexOf(b,c+b.length),-1!=h&&(g=Math.min(d(0,h),g)));var i=1<<b.length-1;h=-1;for(var j,k,l,m=b.length+a.length,n=0;n<b.length;n++){for(j=0,k=m;k>j;)d(n,c+k)<=g?j=k:m=k,k=Math.floor((m-j)/2+j);m=k;var o=Math.max(1,c-k+1),p=Math.min(c+k,a.length)+b.length,q=Array(p+2);q[p+1]=(1<<n)-1;for(var r=p;r>=o;r--){var s=e[a.charAt(r-1)];if(0===n?q[r]=(q[r+1]<<1|1)&s:q[r]=(q[r+1]<<1|1)&s|((l[r+1]|l[r])<<1|1)|l[r+1],q[r]&i){var t=d(n,r-1);if(g>=t){if(g=t,h=r-1,!(h>c))break;o=Math.max(1,2*c-h)}}}if(d(n+1,c)>g)break;l=q}return h},diff_match_patch.prototype.match_alphabet_=function(a){for(var b={},c=0;c<a.length;c++)b[a.charAt(c)]=0;for(var c=0;c<a.length;c++)b[a.charAt(c)]|=1<<a.length-c-1;return b},diff_match_patch.prototype.patch_addContext_=function(a,b){if(0!=b.length){for(var c=b.substring(a.start2,a.start2+a.length1),d=0;b.indexOf(c)!=b.lastIndexOf(c)&&c.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)d+=this.Patch_Margin,c=b.substring(a.start2-d,a.start2+a.length1+d);d+=this.Patch_Margin;var e=b.substring(a.start2-d,a.start2);e&&a.diffs.unshift([DIFF_EQUAL,e]);var f=b.substring(a.start2+a.length1,a.start2+a.length1+d);f&&a.diffs.push([DIFF_EQUAL,f]),a.start1-=e.length,a.start2-=e.length,a.length1+=e.length+f.length,a.length2+=e.length+f.length}},diff_match_patch.prototype.patch_make=function(a,b,c){var d,e;if("string"==typeof a&&"string"==typeof b&&"undefined"==typeof c)d=a,e=this.diff_main(d,b,!0),e.length>2&&(this.diff_cleanupSemantic(e),this.diff_cleanupEfficiency(e));else if(a&&"object"==typeof a&&"undefined"==typeof b&&"undefined"==typeof c)e=a,d=this.diff_text1(e);else if("string"==typeof a&&b&&"object"==typeof b&&"undefined"==typeof c)d=a,e=b;else{if("string"!=typeof a||"string"!=typeof b||!c||"object"!=typeof c)throw new Error("Unknown call format to patch_make.");d=a,e=c}if(0===e.length)return[];for(var f=[],g=new diff_match_patch.patch_obj,h=0,i=0,j=0,k=d,l=d,m=0;m<e.length;m++){var n=e[m][0],o=e[m][1];switch(h||n===DIFF_EQUAL||(g.start1=i,g.start2=j),n){case DIFF_INSERT:g.diffs[h++]=e[m],g.length2+=o.length,l=l.substring(0,j)+o+l.substring(j);break;case DIFF_DELETE:g.length1+=o.length,g.diffs[h++]=e[m],l=l.substring(0,j)+l.substring(j+o.length);break;case DIFF_EQUAL:o.length<=2*this.Patch_Margin&&h&&e.length!=m+1?(g.diffs[h++]=e[m],g.length1+=o.length,g.length2+=o.length):o.length>=2*this.Patch_Margin&&h&&(this.patch_addContext_(g,k),f.push(g),g=new diff_match_patch.patch_obj,h=0,k=l,i=j)}n!==DIFF_INSERT&&(i+=o.length),n!==DIFF_DELETE&&(j+=o.length)}return h&&(this.patch_addContext_(g,k),f.push(g)),f},diff_match_patch.prototype.patch_deepCopy=function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c],e=new diff_match_patch.patch_obj;e.diffs=[];for(var f=0;f<d.diffs.length;f++)e.diffs[f]=d.diffs[f].slice();e.start1=d.start1,e.start2=d.start2,e.length1=d.length1,e.length2=d.length2,b[c]=e}return b},diff_match_patch.prototype.patch_apply=function(a,b){if(0==a.length)return[b,[]];a=this.patch_deepCopy(a);var c=this.patch_addPadding(a);b=c+b+c,this.patch_splitMax(a);for(var d=0,e=[],f=0;f<a.length;f++){var g,h=a[f].start2+d,i=this.diff_text1(a[f].diffs),j=-1;if(i.length>this.Match_MaxBits?(g=this.match_main(b,i.substring(0,this.Match_MaxBits),h),
-1!=g&&(j=this.match_main(b,i.substring(i.length-this.Match_MaxBits),h+i.length-this.Match_MaxBits),(-1==j||g>=j)&&(g=-1))):g=this.match_main(b,i,h),-1==g)e[f]=!1,d-=a[f].length2-a[f].length1;else{e[f]=!0,d=g-h;var k;if(k=-1==j?b.substring(g,g+i.length):b.substring(g,j+this.Match_MaxBits),i==k)b=b.substring(0,g)+this.diff_text2(a[f].diffs)+b.substring(g+i.length);else{var l=this.diff_main(i,k,!1);if(i.length>this.Match_MaxBits&&this.diff_levenshtein(l)/i.length>this.Patch_DeleteThreshold)e[f]=!1;else{this.diff_cleanupSemanticLossless(l);for(var m,n=0,o=0;o<a[f].diffs.length;o++){var p=a[f].diffs[o];p[0]!==DIFF_EQUAL&&(m=this.diff_xIndex(l,n)),p[0]===DIFF_INSERT?b=b.substring(0,g+m)+p[1]+b.substring(g+m):p[0]===DIFF_DELETE&&(b=b.substring(0,g+m)+b.substring(g+this.diff_xIndex(l,n+p[1].length))),p[0]!==DIFF_DELETE&&(n+=p[1].length)}}}}}return b=b.substring(c.length,b.length-c.length),[b,e]},diff_match_patch.prototype.patch_addPadding=function(a){for(var b=this.Patch_Margin,c="",d=1;b>=d;d++)c+=String.fromCharCode(d);for(var d=0;d<a.length;d++)a[d].start1+=b,a[d].start2+=b;var e=a[0],f=e.diffs;if(0==f.length||f[0][0]!=DIFF_EQUAL)f.unshift([DIFF_EQUAL,c]),e.start1-=b,e.start2-=b,e.length1+=b,e.length2+=b;else if(b>f[0][1].length){var g=b-f[0][1].length;f[0][1]=c.substring(f[0][1].length)+f[0][1],e.start1-=g,e.start2-=g,e.length1+=g,e.length2+=g}if(e=a[a.length-1],f=e.diffs,0==f.length||f[f.length-1][0]!=DIFF_EQUAL)f.push([DIFF_EQUAL,c]),e.length1+=b,e.length2+=b;else if(b>f[f.length-1][1].length){var g=b-f[f.length-1][1].length;f[f.length-1][1]+=c.substring(0,g),e.length1+=g,e.length2+=g}return c},diff_match_patch.prototype.patch_splitMax=function(a){for(var b=this.Match_MaxBits,c=0;c<a.length;c++)if(a[c].length1>b){var d=a[c];a.splice(c--,1);for(var e=d.start1,f=d.start2,g="";0!==d.diffs.length;){var h=new diff_match_patch.patch_obj,i=!0;for(h.start1=e-g.length,h.start2=f-g.length,""!==g&&(h.length1=h.length2=g.length,h.diffs.push([DIFF_EQUAL,g]));0!==d.diffs.length&&h.length1<b-this.Patch_Margin;){var j=d.diffs[0][0],k=d.diffs[0][1];j===DIFF_INSERT?(h.length2+=k.length,f+=k.length,h.diffs.push(d.diffs.shift()),i=!1):j===DIFF_DELETE&&1==h.diffs.length&&h.diffs[0][0]==DIFF_EQUAL&&k.length>2*b?(h.length1+=k.length,e+=k.length,i=!1,h.diffs.push([j,k]),d.diffs.shift()):(k=k.substring(0,b-h.length1-this.Patch_Margin),h.length1+=k.length,e+=k.length,j===DIFF_EQUAL?(h.length2+=k.length,f+=k.length):i=!1,h.diffs.push([j,k]),k==d.diffs[0][1]?d.diffs.shift():d.diffs[0][1]=d.diffs[0][1].substring(k.length))}g=this.diff_text2(h.diffs),g=g.substring(g.length-this.Patch_Margin);var l=this.diff_text1(d.diffs).substring(0,this.Patch_Margin);""!==l&&(h.length1+=l.length,h.length2+=l.length,0!==h.diffs.length&&h.diffs[h.diffs.length-1][0]===DIFF_EQUAL?h.diffs[h.diffs.length-1][1]+=l:h.diffs.push([DIFF_EQUAL,l])),i||a.splice(++c,0,h)}}},diff_match_patch.prototype.patch_toText=function(a){for(var b=[],c=0;c<a.length;c++)b[c]=a[c];return b.join("")},diff_match_patch.prototype.patch_fromText=function(a){var b=[];if(!a)return b;for(var c=a.split("\n"),d=0,e=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;d<c.length;){var f=c[d].match(e);if(!f)throw new Error("Invalid patch string: "+c[d]);var g=new diff_match_patch.patch_obj;for(b.push(g),g.start1=parseInt(f[1],10),""===f[2]?(g.start1--,g.length1=1):"0"==f[2]?g.length1=0:(g.start1--,g.length1=parseInt(f[2],10)),g.start2=parseInt(f[3],10),""===f[4]?(g.start2--,g.length2=1):"0"==f[4]?g.length2=0:(g.start2--,g.length2=parseInt(f[4],10)),d++;d<c.length;){var h=c[d].charAt(0);try{var i=decodeURI(c[d].substring(1))}catch(j){throw new Error("Illegal escape in patch_fromText: "+i)}if("-"==h)g.diffs.push([DIFF_DELETE,i]);else if("+"==h)g.diffs.push([DIFF_INSERT,i]);else if(" "==h)g.diffs.push([DIFF_EQUAL,i]);else{if("@"==h)break;if(""!==h)throw new Error('Invalid patch mode "'+h+'" in: '+i)}d++}}return b},diff_match_patch.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},diff_match_patch.patch_obj.prototype.toString=function(){var a,b;a=0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1,b=0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2;for(var c,d=["@@ -"+a+" +"+b+" @@\n"],e=0;e<this.diffs.length;e++){switch(this.diffs[e][0]){case DIFF_INSERT:c="+";break;case DIFF_DELETE:c="-";break;case DIFF_EQUAL:c=" "}d[e+1]=c+encodeURI(this.diffs[e][1])+"\n"}return d.join("").replace(/%20/g," ")},this.diff_match_patch=diff_match_patch,this.DIFF_DELETE=DIFF_DELETE,this.DIFF_INSERT=DIFF_INSERT,this.DIFF_EQUAL=DIFF_EQUAL,angular.module("templates",[]).run(["$templateCache",function(a){"use strict";a.put("app/core/utils/confirmation/confirmation.html",'<div class=modal-header><h3>Confirm your action</h3></div><div class=modal-body><span class=font-big data-ng-bind=confirmText></span></div><div class=modal-footer><button data-ng-click=continue() class="btn btn-success" data-ng-bind=okLabel></button> <button data-ng-click=close() class="btn btn-default" data-ng-bind=cancelLabel></button></div>'),a.put("app/core/utils/infoPopup/info.html",'<div class=modal-header><h3 data-ng-bind=title></h3></div><div class=modal-body><span class=font-big data-ng-bind-html=text></span></div><div class=modal-footer><button data-ng-click=ok() class="btn btn-success">OK</button></div>'),a.put("app/core/utils/textAngular/partials/imageCustomization.html",'<div class=modal-header><h3 class=modal-title>Image</h3></div><div class=modal-body><div class=form-horizontal><fieldset><div class=form-group><label class="col-md-2 control-label">Source</label><div class=col-md-10><filefield name=Image placeholder=Image on-selected=selected(file) data-ng-model=image.FileUrl></filefield></div></div><div class=form-group><label class="col-md-2 control-label">Alignment</label><div class=col-md-4><select class=form-control data-ng-model=image.Alignment data-ng-options="style.Value as style.Text for style in alignmentLookup"></select></div><label class="col-md-2 control-label">Title</label><div class=col-md-4><input class=form-control placeholder=Title data-ng-model=image.Title></div></div><div class=form-group><label class="col-md-2 control-label">Width</label><div class=col-md-3><input type=number class=form-control placeholder=Width data-ng-model=image.Width></div><div class="col-md-1 form-control-static"><span>px</span></div><label class="col-md-2 control-label">Height</label><div class=col-md-3><input type=number class=form-control placeholder=Height data-ng-model=image.Height></div><div class="col-md-1 form-control-static"><span>px</span></div></div><div class=form-group><label class="col-md-2 control-label">Keep Ratio</label><div class=col-md-3><div class=checkbox><label><input type=checkbox data-ng-model=image.KeepRatio><i class="glyphicon glyphicon-info-sign" uib-tooltip="If checked CSS styles \'max-width\' and \'max-height\' will be used to keep original image ratio"></i></label></div></div></div><div class=form-group><label class="col-md-2 control-label">Hyperlink</label><div class=col-md-10><input class=form-control placeholder=Hyperlink data-ng-model=image.Hyperlink><label class=checkbox-inline><input type=checkbox data-ng-model=image.NewWindow> Open in a New Window</label></div></div><span class=legend>Spacing</span><div class=form-group><label class="col-md-2 control-label">Top</label><div class=col-md-3><input type=number class=form-control placeholder=Top data-ng-model=image.Top></div><div class="col-md-1 form-control-static"><span>px</span></div><label class="col-md-2 control-label">Bottom</label><div class=col-md-3><input type=number class=form-control placeholder=Bottom data-ng-model=image.Bottom></div><div class="col-md-1 form-control-static"><span>px</span></div></div><div class=form-group><label class="col-md-2 control-label">Left</label><div class=col-md-3><input type=number class=form-control placeholder=Left data-ng-model=image.Left></div><div class="col-md-1 form-control-static"><span>px</span></div><label class="col-md-2 control-label">Right</label><div class=col-md-3><input type=number class=form-control placeholder=Right data-ng-model=image.Right></div><div class="col-md-1 form-control-static"><span>px</span></div></div><div class=form-group data-ng-if=image.Src><div class=col-md-12><div class="well custom-preview"><img alt={{image.Title}} class=custom-preview-image data-ng-src={{image.Src}} data-ng-style="{\'margin-left\': image.Left, \'margin-right\': image.Right, \'margin-top\': image.Top, \'margin-bottom\': image.Bottom, \'vertical-align\' : !(image.Alignment == \'left\' || image.Alignment == \'right\') ? image.Alignment : \'baseline\', \'float\' : (image.Alignment == \'left\' || image.Alignment == \'right\') ? image.Alignment : \'none\' }"> Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet</div></div></div></fieldset></div></div><div class=modal-footer><button class="btn btn-success" data-ng-click=ok()>Ok</button> <button class="btn btn-danger" data-ng-if=availableForRemoval data-ng-click=remove()>Delete</button> <button class="btn btn-default" data-ng-click=cancel()>Cancel</button></div>'),a.put("app/modules/affiliate/partials/affiliateDetail.html",'<div class="container-fluid affiliate-edit"><div class=left-pane-controls><div class="well container-fluid"><div><button data-ng-click=save() class="btn btn-success width-160px" unsaved-warning-clear>Save</button></div><div data-ng-if=affiliate.Id class="btn-group margin-top-10px"><button class="btn btn-info width-160px" data-ng-click=email()>Email</button></div><div data-ng-if="affiliate.Id && affiliate.PromoteByDrSearsLEANCoachAmbassador" class="btn-group margin-top-10px"><button class="btn btn-info width-160px" data-ng-click=emailDrSears()>Dr Sears Email</button></div><div class="btn-group margin-top-10px"><button cancel-button-default-state=index.oneCol.manageAffiliates cancel-button class="btn btn-default width-160px" unsaved-warning-clear>Cancel</button></div><div class=margin-top-10px><button class="btn btn-primary width-160px" ui-sref=index.oneCol.manageAffiliates>Manage All</button></div></div><div ng-controller=objectHistorySectionController onload="name = \'History\'" data-ng-include="\'app/modules/affiliate/partials/affiliateObjectHistorySection.html\'"></div></div><div class=right-pane-main><div class=container-fluid><div data-ng-if=affiliate.Id class=row><span class="legend top"><span class=item>Name: <strong>{{affiliate.Name}}</strong></span> <span class=item>Company: <strong>{{affiliate.Company}}</strong></span> <span class=item>Affiliate ID: <strong>{{affiliate.Id}}</strong></span> <span class=item>Status: <strong>{{getReferenceItem(ReferenceData.AffiliateStatuses, affiliate.StatusCode ).Text}}</strong></span></span></div><div class=row><uib-tabset><uib-tab heading="Affiliate Details" active=detailsTab.active><div class="container container-left"><div class="well row"><spinner-overlay data-loading=refreshTracker.active()><form class=form-horizontal name=forms.mainForm data-ng-submit=save() data-ng-class="{submitted: forms.submitted}" novalidate unsaved-warning-form><fieldset><div data-ng-if="affiliate.StatusCode == 2 && affiliate.Id" class=form-group><label for="" class="col-md-3 control-label"></label><div class=col-md-9><a target=_blank data-ng-href={{options.LoginAsAffiliateUrl}} class="btn btn-primary-orange width-160px">Log In As Affiliate</a></div></div><div class=form-group><label for="" class="col-md-3 control-label">Affiliate ID</label><div class="col-md-9 form-control-static" data-ng-if=affiliate.Id><span>{{affiliate.Id}}</span></div></div><div data-ng-if="affiliate.StatusCode == 5 && affiliate.Id" class=form-group><label for=active class="col-md-3 control-label">Active</label><div class=col-md-9><div class=checkbox><label><input type=checkbox id=active name=ActivatePending data-ng-model="affiliate.ActivatePending"></label></div></div></div><div data-ng-if="affiliate.StatusCode != 5 && affiliate.Id" class=form-group><label for=suspend class="col-md-3 control-label">Suspend</label><div class=col-md-9><div class=checkbox><label><input type=checkbox id=suspend name=StatusCode data-ng-click=toggleSuspended(); data-ng-checked="affiliate.StatusCode == 4"></label></div></div></div><div class=form-group data-ng-if="affiliate.StatusCode != 5 && affiliate.Id && affiliate.StatusCode == 4"><label for=reason class="col-md-3 control-label">Reason</label><div class=col-md-9><textarea type=text name=SuspendMessage class=form-control placeholder=Reason rows=10 data-ng-model=affiliate.SuspendMessage required data-ng-maxlength=250></textarea><div class=error-container ng-show="forms.submitted && forms.mainForm.SuspendMessage.$invalid"><small class=error ng-show=forms.mainForm.SuspendMessage.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Reason")}}</small> <small class=error ng-show=forms.mainForm.SuspendMessage.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["Reason", "1000"])}}</small> <small class=error ng-show=forms.mainForm.SuspendMessage.$error.server>{{serverMessages.GetMessage(\'SuspendMessage\')}}</small></div></div></div><div class=form-group><label for=type class="col-md-3 control-label">MyApp Balance</label><div class=col-md-3><div class=input-group><span class=input-group-addon>$</span> <input name=MyAppBalance class=form-control placeholder="MyApp Balance" money min=0 max=100000 data-ng-model=affiliate.MyAppBalance required></div><div class=error-container ng-show="forms.submitted && forms.mainForm.MyAppBalance.$invalid"><small class=error ng-show=forms.mainForm.MyAppBalance.$error.parse>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Balance")}}</small> <small class=error ng-show=forms.mainForm.MyAppBalance.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Balance")}}</small> <small class=error ng-show=forms.mainForm.MyAppBalance.$error.max>{{getValidationMessage("ValidationMessages.FieldMax","GeneralFieldNames.Balance",1000000)}}</small> <small class=error ng-show=forms.mainForm.MyAppBalance.$error.min>{{getValidationMessage("{0} must be over $0.00","GeneralFieldNames.Balance")}}</small> <small class=error ng-show=forms.mainForm.MyAppBalance.$error.server>{{serverMessages.GetMessage(\'MyAppBalance\')}}</small></div></div></div><span class=legend>Promoting Vital Choice</span><div class=form-group><label for=brickandmortar class="col-md-3 control-label">Brick and Mortar</label><div class=col-md-9><div class=checkbox><label><input type=checkbox id=brickandmortar name=BrickAndMortar data-ng-model="affiliate.BrickAndMortar"></label></div></div></div><div class=form-group><label for=promotebywebsite class="col-md-3 control-label">Website</label><div class=col-md-1><div class=checkbox><label><input type=checkbox id=promotebywebsite name=PromoteByWebsite data-ng-model="affiliate.PromoteByWebsite"></label></div></div><label data-ng-if=affiliate.PromoteByWebsite class="col-md-3 control-label">Website URL</label><div data-ng-if=affiliate.PromoteByWebsite class=col-md-5><input name=WebSite class=form-control placeholder="Website URL" data-ng-model=affiliate.WebSite required><div class=error-container ng-show="forms.submitted && forms.mainForm.WebSite.$invalid"><small class=error ng-show=forms.mainForm.WebSite.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","WebSite URL")}}</small> <small class=error ng-show=forms.mainForm.WebSite.$error.server>{{serverMessages.GetMessage(\'WebSite\')}}</small></div></div></div><div class=form-group><label for=promotebyemails class="col-md-3 control-label">Links on your emails</label><div class=col-md-1><div class=checkbox><label><input type=checkbox id=promotebyemails name=PromoteByEmails data-ng-model="affiliate.PromoteByEmails"></label></div></div><label data-ng-if=affiliate.PromoteByEmails class="col-md-3 control-label">Monthly emails sent</label><div data-ng-if=affiliate.PromoteByEmails class=col-md-5><select class=form-control name=MonthlyEmailsSent data-ng-model=affiliate.MonthlyEmailsSent ng-options="item.Key as item.Text for item in ReferenceData.AffiliateMonthlyEmailsSentOptions" required></select><div class=error-container ng-show="forms.submitted && forms.mainForm.MonthlyEmailsSent.$invalid"><small class=error ng-show=forms.mainForm.MonthlyEmailsSent.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Monthly emails sent")}}</small> <small class=error ng-show=forms.mainForm.MonthlyEmailsSent.$error.server>{{serverMessages.GetMessage(\'MonthlyEmailsSent\')}}</small></div></div></div><div class=form-group><label for=promotebyfacebook class="col-md-3 control-label">Facebook</label><div class=col-md-1><div class=checkbox><label><input type=checkbox id=promotebyfacebook name=PromoteByFacebook data-ng-model="affiliate.PromoteByFacebook"></label></div></div><label data-ng-if=affiliate.PromoteByFacebook class="col-md-3 control-label">Facebook page URL</label><div data-ng-if=affiliate.PromoteByFacebook class=col-md-5><input name=Facebook class=form-control placeholder="Facebook page URL" data-ng-model=affiliate.Facebook required><div class=error-container ng-show="forms.submitted && forms.mainForm.Facebook.$invalid"><small class=error ng-show=forms.mainForm.Facebook.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Facebook page URL")}}</small> <small class=error ng-show=forms.mainForm.Facebook.$error.server>{{serverMessages.GetMessage(\'Facebook\')}}</small></div></div></div><div class=form-group><label for=promotebytwitter class="col-md-3 control-label">Twitter</label><div class=col-md-1><div class=checkbox><label><input type=checkbox id=promotebytwitter name=PromoteByTwitter data-ng-model="affiliate.PromoteByTwitter"></label></div></div><label data-ng-if=affiliate.PromoteByTwitter class="col-md-3 control-label">Twitter page URL</label><div data-ng-if=affiliate.PromoteByTwitter class=col-md-5><input name=Twitter class=form-control placeholder="Twitter page URL" data-ng-model=affiliate.Twitter required><div class=error-container ng-show="forms.submitted && forms.mainForm.Twitter.$invalid"><small class=error ng-show=forms.mainForm.Twitter.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Twitter page URL")}}</small> <small class=error ng-show=forms.mainForm.Twitter.$error.server>{{serverMessages.GetMessage(\'Twitter\')}}</small></div></div></div><div class=form-group><label for=promotebyblog class="col-md-3 control-label">Blog</label><div class=col-md-1><div class=checkbox><label><input type=checkbox id=promotebyblog name=PromoteByBlog data-ng-model="affiliate.PromoteByBlog"></label></div></div><label data-ng-if=affiliate.PromoteByBlog class="col-md-3 control-label">Blog site URL</label><div data-ng-if=affiliate.PromoteByBlog class=col-md-5><input name=Blog class=form-control placeholder="Blog site URL" data-ng-model=affiliate.Blog required><div class=error-container ng-show="forms.submitted && forms.mainForm.Blog.$invalid"><small class=error ng-show=forms.mainForm.Blog.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Blog site URL")}}</small> <small class=error ng-show=forms.mainForm.Blog.$error.server>{{serverMessages.GetMessage(\'Blog\')}}</small></div></div></div><div class=form-group><label for=promotebyprofessionalpractice class="col-md-3 control-label">Professional practice</label><div class=col-md-1><div class=checkbox><label><input type=checkbox id=promotebyprofessionalpractice name=PromoteByProfessionalPractice data-ng-model="affiliate.PromoteByProfessionalPractice"></label></div></div><label data-ng-if=affiliate.PromoteByProfessionalPractice class="col-md-3 control-label">Practice</label><div data-ng-if=affiliate.PromoteByProfessionalPractice class=col-md-5><select class=form-control name=ProfessionalPractice data-ng-model=affiliate.ProfessionalPractice ng-options="item.Key as item.Text for item in ReferenceData.AffiliateProfessionalPractices" required></select><div class=error-container ng-show="forms.submitted && forms.mainForm.ProfessionalPractice.$invalid"><small class=error ng-show=forms.mainForm.ProfessionalPractice.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Professional practice")}}</small> <small class=error ng-show=forms.mainForm.ProfessionalPractice.$error.server>{{serverMessages.GetMessage(\'ProfessionalPractice\')}}</small></div></div></div><div class=form-group><label for=pbdLEAN class="col-md-3 control-label"></label><div class=col-md-9><div class=checkbox><label><input type=checkbox id=pbLEAN name=PromoteByDrSearsLEANCoachAmbassador data-ng-model="affiliate.PromoteByDrSearsLEANCoachAmbassador"> <strong>Dr. Sears LEAN Coach Ambassador* (*Must already be in the LEAN Program)</strong></label></div></div></div><div class=form-group><label for=pbLE class="col-md-3 control-label"></label><div class=col-md-9><div class=checkbox><label><input type=checkbox id=pbLE name=PromoteByLeanEmail data-ng-model="affiliate.PromoteByLeanEmail"> <strong>Lean Email</strong></label></div></div></div><span class=legend>Type Details</span><div class=form-group><label class="col-md-3 control-label">How did you hear about Vital Choice?</label><div class=col-md-9><input name=HearAbout class=form-control placeholder="How did you hear about Vital Choice?" data-ng-model=affiliate.HearAbout><div class=error-container ng-show="forms.submitted && forms.mainForm.HearAbout.$invalid"><small class=error ng-show=forms.mainForm.HearAbout.$error.server>{{serverMessages.GetMessage(\'HearAbout\')}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label">Reach</label><div class=col-md-9><input name=Reach class=form-control placeholder=Reach data-ng-model=affiliate.Reach><div class=error-container ng-show="forms.submitted && forms.mainForm.Reach.$invalid"><small class=error ng-show=forms.mainForm.Reach.$error.server>{{serverMessages.GetMessage(\'Reach\')}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label">Profession</label><div class=col-md-9><input name=Profession class=form-control placeholder=Profession data-ng-model=affiliate.Profession><div class=error-container ng-show="forms.submitted && forms.mainForm.Profession.$invalid"><small class=error ng-show=forms.mainForm.Profession.$error.server>{{serverMessages.GetMessage(\'Profession\')}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label">Tier</label><div class=col-md-9><select name=Tier class=form-control data-ng-model=affiliate.Tier data-ng-options="tier.Key as tier.Text for tier in affiliateTiers" required><option value="" selected hidden></select><div class=error-container ng-show="forms.submitted && forms.mainForm.Tier.$invalid"><small class=error ng-show=forms.mainForm.Tier.$error.server>{{serverMessages.GetMessage(\'Tier\')}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label">Notes</label><div class=col-md-9><textarea type=text name=Notes class=form-control placeholder=Notes rows=5 data-ng-model=affiliate.Notes></textarea><div class=error-container ng-show="forms.submitted && forms.mainForm.Notes.$invalid"><small class=error ng-show=forms.mainForm.Notes.$error.server>{{serverMessages.GetMessage(\'Notes\')}}</small></div></div></div><span class=legend>Details</span><div class=form-group><label class="col-md-3 control-label">Name</label><div class=col-md-9><input name=Name class=form-control placeholder=Name data-ng-model=affiliate.Name required><div class=error-container ng-show="forms.submitted && forms.mainForm.Name.$invalid"><small class=error ng-show=forms.mainForm.Name.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Name")}}</small> <small class=error ng-show=forms.mainForm.Name.$error.server>{{serverMessages.GetMessage(\'Name\')}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label">Checks payable to</label><div class=col-md-9><input name=ChecksPayableTo class=form-control placeholder="Checks payable to" data-ng-model=affiliate.ChecksPayableTo><div class=error-container ng-show="forms.submitted && forms.mainForm.ChecksPayableTo.$invalid"><small class=error ng-show=forms.mainForm.ChecksPayableTo.$error.server>{{serverMessages.GetMessage(\'ChecksPayableTo\')}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label">Tax ID / SSN</label><div class=col-md-9><input name=TaxID class=form-control placeholder="Tax ID / SSN" data-ng-model=affiliate.TaxID required><div class=error-container ng-show="forms.submitted && forms.mainForm.TaxID.$invalid"><small class=error ng-show=forms.mainForm.TaxID.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Tax ID / SSN")}}</small> <small class=error ng-show=forms.mainForm.TaxID.$error.server>{{serverMessages.GetMessage(\'TaxID\')}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label">Company</label><div class=col-md-9><input name=Company class=form-control placeholder=Company data-ng-model=affiliate.Company><div class=error-container ng-show="forms.submitted && forms.mainForm.Company.$invalid"><small class=error ng-show=forms.mainForm.Company.$error.server>{{serverMessages.GetMessage(\'Company\')}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label">Address 1</label><div class=col-md-9><input name=Address1 class=form-control placeholder="Address 1" data-ng-model=affiliate.Address1 required><div class=error-container ng-show="forms.submitted && forms.mainForm.Address1.$invalid"><small class=error ng-show=forms.mainForm.Address1.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Address 1")}}</small> <small class=error ng-show=forms.mainForm.Address1.$error.server>{{serverMessages.GetMessage(\'Address1\')}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label">Address 2</label><div class=col-md-9><input name=Address2 class=form-control placeholder="Address 2" data-ng-model=affiliate.Address2><div class=error-container ng-show="forms.submitted && forms.mainForm.Address2.$invalid"><small class=error ng-show=forms.mainForm.Address2.$error.server>{{serverMessages.GetMessage(\'Address2\')}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label">Country</label><div class=col-md-9><select name=IdCountry class=form-control data-ng-model=affiliate.IdCountry data-ng-options="country.Id as country.CountryName for country in countries" required><option value="">Select Country</option></select><div class=error-container ng-show="forms.submitted && forms.mainForm.IdCountry.$invalid"><small class=error ng-show=forms.mainForm.IdCountry.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Country")}}</small> <small class=error ng-show=forms.mainForm.IdCountry.$error.server>{{serverMessages.GetMessage(\'IdCountry\')}}</small></div></div></div><div class=form-group data-ng-if=affiliate.IdCountry><label class="col-md-3 control-label">State/Province</label><div class=col-md-9 data-ng-if="statesByCountryId(affiliate.IdCountry) && statesByCountryId(affiliate.IdCountry).length > 0"><select name=IdState class=form-control data-ng-model=affiliate.IdState data-ng-options="item.Id as item.StateName for item in statesByCountryId(affiliate.IdCountry)" required><option value="">Select State</option></select><div class=error-container ng-show="forms.submitted && forms.mainForm.IdState.$invalid"><small class=error ng-show=forms.mainForm.IdState.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","State")}}</small> <small class=error ng-show=forms.mainForm.IdState.$error.server>{{serverMessages.GetMessage(\'IdState\')}}</small></div></div><div class=col-md-9 data-ng-if="!(statesByCountryId(affiliate.IdCountry) && statesByCountryId(affiliate.IdCountry).length > 0)"><input name=County class=form-control data-ng-model=affiliate.County placeholder="State"><div class=error-container ng-show="forms.submitted && forms.mainForm.County.$invalid"><small class=error ng-show=forms.mainForm.County.$error.server>{{serverMessages.GetMessage(\'County\')}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label">City</label><div class=col-md-9><input name=City class=form-control placeholder=City data-ng-model=affiliate.City required><div class=error-container ng-show="forms.submitted && forms.mainForm.City.$invalid"><small class=error ng-show=forms.mainForm.City.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","City")}}</small> <small class=error ng-show=forms.mainForm.City.$error.server>{{serverMessages.GetMessage(\'City\')}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label">Zip</label><div class=col-md-9><input name=Zip class=form-control placeholder=Zip data-ng-model=affiliate.Zip required><div class=error-container ng-show="forms.submitted && forms.mainForm.Zip.$invalid"><small class=error ng-show=forms.mainForm.Zip.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Zip")}}</small> <small class=error ng-show=forms.mainForm.Zip.$error.server>{{serverMessages.GetMessage(\'Zip\')}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label">Phone</label><div class=col-md-9><input name=Phone class=form-control placeholder=Phone data-ng-model=affiliate.Phone data-mask="(999) 999-9999? x99999" required data-clean=true autocomplete=off><div class=error-container ng-show="forms.submitted && forms.mainForm.Phone.$invalid"><small class=error ng-show=forms.mainForm.Phone.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Phone")}}</small> <small class=error ng-show=forms.mainForm.Phone.$error.server>{{serverMessages.GetMessage(\'Phone\')}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label">Fax</label><div class=col-md-9><input name=Fax class=form-control placeholder=Fax data-ng-model=affiliate.Fax data-mask="(999) 999-9999? x99999" data-clean=true autocomplete=off><div class=error-container ng-show="forms.submitted && forms.mainForm.Fax.$invalid"><small class=error ng-show=forms.mainForm.Fax.$error.server>{{serverMessages.GetMessage(\'Fax\')}}</small></div></div></div><div class=form-group data-ng-if=affiliate.Id><label for=currentEmail class="col-md-3 control-label">Current Email</label><div class="col-md-9 form-control-static"><span data-ng-bind=affiliate.Email></span></div></div><div class=form-group><label for=enterEmail class="col-md-3 control-label">Enter Email</label><div class=col-md-9><input type=email name=Email class=form-control id=enterEmail data-ng-model=affiliate.newEmail placeholder="Enter Email" data-ng-required=!affiliate.Id data-ng-maxlength=100 autocomplete=off><div class=error-container ng-show="forms.submitted && forms.mainForm.Email.$invalid"><small class=error ng-show=forms.mainForm.Email.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Email")}}</small> <small class=error ng-show=forms.mainForm.Email.$error.email>{{getValidationMessage("ValidationMessages.EmailFormat","GeneralFieldNames.Email")}}</small> <small class=error ng-show=forms.mainForm.Email.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["GeneralFieldNames.Email", "100"])}}</small> <small class=error ng-show=forms.mainForm.Email.$error.server>{{serverMessages.GetMessage(\'Email\')}}</small></div></div></div><div class=form-group><label for=reEnterEmail class="col-md-3 control-label">Re-enter Email</label><div class=col-md-9><input type=email name=EmailConfirm class=form-control id=reEnterEmail data-ng-model=affiliate.emailUIConfirm placeholder="Re-enter Email" data-ng-required=!affiliate.Id data-ng-maxlength=100 autocomplete=off><div class=error-container ng-show="forms.submitted && forms.mainForm.EmailConfirm.$invalid"><small class=error ng-show=forms.mainForm.EmailConfirm.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Email Confirmation")}}</small> <small class=error ng-show=forms.mainForm.EmailConfirm.$error.email>{{getValidationMessage("ValidationMessages.EmailFormat","Email Confirmation")}}</small> <small class=error ng-show=forms.mainForm.EmailConfirm.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["Email Confirmation", "100"])}}</small> <small class=error ng-show=forms.mainForm.EmailConfirm.$error.server>{{serverMessages.GetMessage(\'EmailConfirm\')}}</small></div></div></div><div class=form-group data-ng-if=affiliate.Id><div class=col-md-3></div><div class=col-md-9><button class="btn btn-info" data-ng-if="affiliate.StatusCode == 2" ladda=resetTracker.active() data-ng-click=resetPassword();>Reset Password</button> <button class="btn btn-info" data-ng-if="affiliate.StatusCode == 1" ladda=resendTracker.active() data-ng-click=resend();>Resend Activation Email</button></div></div><span class=legend>Payment and Commissions</span><div class=form-group><label class="col-md-3 control-label">I would like payment as</label><div class=col-md-9><label class=radio-inline><input data-ng-model=affiliate.PaymentType value=1 type=radio>Cash</label><label class=radio-inline><input data-ng-model=affiliate.PaymentType value=2 type=radio>Credit</label></div></div><div class="form-group col-md-12">Credit Payments are issued at 110% of the cash commission earned.</div><div class=form-group><label for=type class="col-md-4 control-label">Commission: for first order</label><div class=col-md-3><div class=input-group><span class=input-group-addon>%</span> <input name=CommissionFirst class=form-control placeholder=Commission money min=0.01 max=100 data-ng-model=affiliate.CommissionFirst required></div><div class=error-container ng-show="forms.submitted && forms.mainForm.CommissionFirst.$invalid"><small class=error ng-show=forms.mainForm.CommissionFirst.$error.parse>{{getValidationMessage("ValidationMessages.FieldRequired","Commission: for first order")}}</small> <small class=error ng-show=forms.mainForm.CommissionFirst.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Commission: for first order")}}</small> <small class=error ng-show=forms.mainForm.CommissionFirst.$error.max>{{getValidationMessage("ValidationMessages.FieldMax","Commission: for first order",100)}}</small> <small class=error ng-show=forms.mainForm.CommissionFirst.$error.min>{{getValidationMessage("{0} must be over 0.00","Commission: for first order")}}</small> <small class=error ng-show=forms.mainForm.CommissionFirst.$error.server>{{serverMessages.GetMessage(\'CommissionFirst\')}}</small></div></div><label for=type class="col-md-2 control-label">all others</label><div class=col-md-3><div class=input-group><span class=input-group-addon>%</span> <input name=CommissionAll class=form-control placeholder=Commission money min=0.01 max=100 data-ng-model=affiliate.CommissionAll required></div><div class=error-container ng-show="forms.submitted && forms.mainForm.CommissionAll.$invalid"><small class=error ng-show=forms.mainForm.CommissionAll.$error.parse>{{getValidationMessage("ValidationMessages.FieldRequired","Commission: for all other orders")}}</small> <small class=error ng-show=forms.mainForm.CommissionAll.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Commission: for all other orders")}}</small> <small class=error ng-show=forms.mainForm.CommissionAll.$error.max>{{getValidationMessage("ValidationMessages.FieldMax","Commission: for all other orders",100)}}</small> <small class=error ng-show=forms.mainForm.CommissionAll.$error.min>{{getValidationMessage("{0} must be over 0.00","Commission: for all other orders")}}</small> <small class=error ng-show=forms.mainForm.CommissionAll.$error.server>{{serverMessages.GetMessage(\'CommissionAll\')}}</small></div></div></div></fieldset></form></spinner-overlay></div></div></uib-tab><uib-tab heading=Customers active=customersTab.active><div class=container-fluid><div class="well row"><div class="row form-group" data-ng-if="customersTotalItems>0"><div class="col-md-6 btn-line"><div class=margin-top-10px>Affiliate Customers Count: <strong>{{customersTotalItems}}</strong></div></div><div class="col-md-6 btn-line"><a target=_self class="btn btn-primary pull-right" data-ng-if=options.customersExportUrl data-ng-href={{options.customersExportUrl}}>Export</a></div></div><spinner-overlay data-loading=refreshCustomersTracker.active()><table id=data-grid-customers class="table table-striped"><thead><tr><th>Customer Id</th><th>Email</th><th>First Name</th><th>Last Name</th><th>First Order Placed</th></tr></thead><tbody><tr data-ng-repeat="item in customers"><td>{{::item.Id}}</td><td>{{::item.Email}}</td><td>{{::item.FirstName}}</td><td>{{::item.LastName}}</td><td>{{::item.FirstOrderPlaced | date:"MM/dd/yy"}}<br>{{::item.FirstOrderPlaced | date:"h:mm a"}}</td></tr></tbody></table></spinner-overlay><uib-pagination boundary-links=true total-items=customersTotalItems items-per-page=customerFilter.Paging.PageItemCount data-ng-model=customerFilter.Paging.PageIndex previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; data-ng-change="customersPageChanged();scrollTo(\'data-grid-customers\');"></uib-pagination></div></div></uib-tab><uib-tab heading=Orders active=ordersTab.active><div class=container-fluid><div class="well row orders"><div class="row form-group" data-ng-if=affiliate.Id><div class=col-md-3><p class=input-group><input name=test class=form-control placeholder=From uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=orderFilter.From is-open="fromOpened"> <span class=input-group-btn><button type=button class="btn btn-default" ng-disabled=false ng-click="stopPropagation($event); fromOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p></div><div class=col-md-3><p class=input-group><input name=test class=form-control placeholder=To uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=orderFilter.To is-open="toOpened"> <span class=input-group-btn><button type=button class="btn btn-default" ng-disabled=false ng-click="stopPropagation($event); toOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p></div><div class=col-md-6><button class="btn btn-info" data-ng-click=filterOrders(); type=button>Filter</button></div></div><spinner-overlay data-loading=refreshOrdersTracker.active()><table id=data-grid-orders class="table table-striped order-statuses"><thead><tr><th>Order #</th><th>Order Date</th><th>Customer Name</th><th>Cust #</th><th>Discounted Subtotal</th><th>Repeat</th><th class=status>Order Status</th><th>Commission</th></tr></thead><tbody><tr data-ng-repeat="item in orders"><td><a ui-sref="{{::item.IdObjectType==5 ? \'index.oneCol.orderReshipDetail({id: item.IdOrder })\' :  item.IdObjectType==6 ? \'index.oneCol.orderRefundDetail({id: item.IdOrder })\' : \'index.oneCol.orderDetail({id: item.IdOrder })\'}}">{{::item.IdOrder}}</a></td><td>{{::item.DateCreated | date:"MM/dd/yy"}}<br>{{::item.DateCreated | date:"h:mm a"}}</td><td>{{::item.CustomerName}}</td><td><a ui-sref=index.oneCol.customerDetail({id:item.IdCustomer})>{{::item.IdCustomer}}</a></td><td>{{::item.DiscountedProductsSubtotal | currency}}</td><td>{{::item.RepeatInCustomer}}</td><td><div data-ng-include="\'app/modules/order/partials/orderStatusSection.html\'"></div></td><td>{{::item.Commission | currency}}</td></tr></tbody></table></spinner-overlay><uib-pagination boundary-links=true total-items=ordersTotalItems items-per-page=orderFilter.Paging.PageItemCount data-ng-model=orderFilter.Paging.PageIndex previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; data-ng-change="ordersPageChanged();scrollTo(\'data-grid-orders\');"></uib-pagination></div></div></uib-tab><uib-tab heading="Payment History" active=paymentHistoryTab.active><div class="container container-left"><div class="well row"><spinner-overlay data-loading=refreshPaymentHistoryTracker.active()><table class="table table-striped"><thead><tr><th>Date</th><th>Amount</th></tr></thead><tbody><tr data-ng-repeat="item in paymentHistoryItems"><td>{{::item.DateCreated | date:"MM/dd/yy"}}<br>{{::item.DateCreated | date:"h:mm a"}}</td><td>{{::item.Amount | currency}}</td></tr></tbody></table></spinner-overlay></div></div></uib-tab></uib-tabset></div></div></div></div>'),
a.put("app/modules/affiliate/partials/affiliateObjectHistorySection.html",'<div data-ng-if="historyItemsCount>0" class="well container-fluid object-history"><div class=header><span class=legend>History</span></div><table class="table table-striped order-statuses"><thead><tr><th>Date</th><th>Status</th><th></th></tr></thead><tbody><tr data-ng-repeat="item in historyItems"><td class=date>{{::item.DateCreated | date:"MM/dd/yy"}}<br>{{::item.DateCreated | date:"h:mm a"}}<br>{{::item.EditedBy}}</td><td class=status><span data-ng-if="item.IdObjectStatus == 1" class="label label-warning font-default">{{getReferenceItem(ReferenceData.AffiliateStatuses, item.IdObjectStatus).Text}}</span> <span data-ng-if="item.IdObjectStatus == 2" class="label label-info font-default">{{getReferenceItem(ReferenceData.AffiliateStatuses, item.IdObjectStatus).Text}}</span> <span data-ng-if="item.IdObjectStatus == 3" class="label label-danger font-default">{{getReferenceItem(ReferenceData.AffiliateStatuses, item.IdObjectStatus).Text}}</span> <span data-ng-if="item.IdObjectStatus == 4" class="label label-danger font-default">{{getReferenceItem(ReferenceData.AffiliateStatuses, item.IdObjectStatus).Text}}</span> <span data-ng-if="item.IdObjectStatus == 5" class="label label-danger font-default">{{getReferenceItem(ReferenceData.AffiliateStatuses, item.IdObjectStatus).Text}}</span></td><td class=actions><button data-ng-if=!$first title=View class="btn btn-default btn-success btn-xs" data-ng-click=openHistoryReport(item.DataReferenceId);><i class="fa fa-search"></i></button></td></tr></tbody></table></div>'),a.put("app/modules/affiliate/partials/affiliateOrderImportReport.html",'<div class="container-fluid upload-affiliate-order-report"><div class=well><span class=legend>CJ Affiliate Order Status Upload</span><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.form.submitted}" novalidate><fieldset><div class="row form-group"><div class=col-md-12><button class="btn btn-primary" ngf-select ngf-change=upload($files) accept=.csv,>Upload file</button> <a target=_self class="btn btn-primary pull-right" data-ng-if=options.exportUrl data-ng-href={{options.exportUrl}}>Export</a></div></div></fieldset></form><spinner-overlay data-loading=refreshTracker.active()><div><table class="table table-striped order-statuses"><thead><tr><th>Order Id</th><th>Order Status</th></tr></thead><tbody><tr data-ng-repeat="item in report.Items"><td>{{::item.IdOrder}}</td><td data-ng-if="item.OrderStatus || item.POrderStatus || item.NPOrderStatus"><div data-ng-include="\'app/modules/order/partials/orderStatusSection.html\'"></div></td><td data-ng-if="!(item.OrderStatus || item.POrderStatus || item.NPOrderStatus)">{{::item.StatusMessage}}</td></tr></tbody></table></div></spinner-overlay></div></div>'),a.put("app/modules/affiliate/partials/affiliatePayCommissions.html",'<div class=modal-header><h3 class=modal-title>Payment Summary</h3></div><div class=modal-body><spinner-overlay data-loading=refreshTracker.active()><div class="row form-group"><div class=col-md-6><span>Affiliate <strong>{{options.Id}}</strong> has a commission balance of <strong>{{options.Amount | currency}}</strong></span><br><strong>Payment as:</strong><br><span data-ng-if="affiliate.PaymentType==1">Cash</span> <span data-ng-if="affiliate.PaymentType==2">Credit</span><br><br><strong>Payable to:</strong><br><span>{{affiliate.ChecksPayableTo}}</span><br></div><div class=col-md-6><strong>Address:</strong><br><span>{{affiliate.Name}}</span><br><span>{{affiliate.Company}}</span><br><span>{{affiliate.Phone.formatPhone()}}</span><br><span>{{affiliate.Address1}}</span><br><span>{{affiliate.Address2}}</span><br><span>{{affiliate.City}}, {{affiliate.StateCode ? affiliate.StateCode : affiliate.County}} {{affiliate.Zip}}</span><br><span>{{affiliate.CountryCode}}</span><br></div></div><uib-accordion><uib-accordion-group><uib-accordion-heading><span class=legend>Order Commissions</span></uib-accordion-heading><table class="table table-striped"><thead><tr><th>Date</th><th>Order Number</th><th>New Order</th><th>Product Total</th><th>Order Total</th><th>Shipping</th><th>Tax</th><th>Commission</th></tr></thead><tbody><tr data-ng-repeat="item in commissions"><td>{{::item.DateCreated | date:"MM/dd/yy"}}<br>{{::item.DateCreated | date:"h:mm a"}}<br>{{::item.EditedByAgentId}}</td><td>{{::item.IdOrder}}</td><td><span data-ng-if=item.NewCustomerOrder class="label label-success font-default">Yes</span></td><td>{{::item.ProductTotal | currency}}</td><td>{{::item.OrderTotal | currency}}</td><td>{{::item.Shipping | currency}}</td><td>{{::item.Tax | currency}}</td><td>{{::item.Commission | currency}}</td></tr></tbody></table></uib-accordion-group></uib-accordion></spinner-overlay></div><div class=modal-footer><button class="btn btn-success" ladda=refreshTracker.active() data-ng-click=pay()>Pay Affiliate</button> <button class="btn btn-default" data-ng-click=cancel()>Cancel</button></div>'),a.put("app/modules/affiliate/partials/affiliateSendEmail.html",'<div class=modal-header><h3 data-ng-if="data.Type==1" class=modal-title>Notify Affiliate</h3><h3 data-ng-if="data.Type==2" class=modal-title>Email Affiliate</h3></div><div class=modal-body><spinner-overlay data-loading=saveTracker.active()><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.form.submitted}" novalidate><fieldset><div class=form-group><label class="col-md-3 control-label">From</label><div class=col-md-9><input name=FromName class=form-control placeholder="From Name" data-ng-model=email.FromName><div class=error-container ng-show="forms.form.submitted && forms.form.FromName.$invalid"><small class=error ng-show=forms.form.FromName.$error.server>{{serverMessages.GetMessage(\'FromName\')}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label">From Email</label><div class=col-md-9><input type=email name=FromEmail class=form-control placeholder="From Email" data-ng-model=email.FromEmail required><div class=error-container ng-show="forms.form.submitted && forms.form.FromEmail.$invalid"><small class=error ng-show=forms.form.FromEmail.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Email")}}</small> <small class=error ng-show=forms.form.FromEmail.$error.pattern>{{getValidationMessage("ValidationMessages.EmailFormat","GeneralFieldNames.Email")}}</small> <small class=error ng-show=forms.form.FromEmail.$error.server>{{serverMessages.GetMessage(\'FromEmail\')}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label">Affiliate Name</label><div class=col-md-9><input name=ToName class=form-control placeholder="To Name" data-ng-model=email.ToName><div class=error-container ng-show="forms.form.submitted && forms.form.ToName.$invalid"><small class=error ng-show=forms.form.ToName.$error.server>{{serverMessages.GetMessage(\'ToName\')}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label">Affiliate Email</label><div class=col-md-9><input type=email name=ToEmail class=form-control placeholder="To Email" data-ng-model=email.ToEmail required><div class=error-container ng-show="forms.form.submitted && forms.form.ToEmail.$invalid"><small class=error ng-show=forms.form.ToEmail.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Email")}}</small> <small class=error ng-show=forms.form.ToEmail.$error.pattern>{{getValidationMessage("ValidationMessages.EmailFormat","GeneralFieldNames.Email")}}</small> <small class=error ng-show=forms.form.ToEmail.$error.server>{{serverMessages.GetMessage(\'ToEmail\')}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label">Subject</label><div class=col-md-9><input name=Subject class=form-control placeholder=Subject data-ng-model=email.Subject required><div class=error-container ng-show="forms.form.submitted && forms.form.FromName.$invalid"><small class=error ng-show=forms.form.ToEmail.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Subject")}}</small> <small class=error ng-show=forms.form.FromName.$error.server>{{serverMessages.GetMessage(\'Subject\')}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label">Message</label><div class=col-md-9><textarea type=text name=Message class=form-control placeholder=Message rows=10 data-ng-model=email.Message required></textarea><div class=error-container ng-show="forms.form.submitted && forms.form.Message.$invalid"><small class=error ng-show=forms.form.ToEmail.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Message")}}</small> <small class=error ng-show=forms.form.ToEmail.$error.server>{{serverMessages.GetMessage(\'Message\')}}</small></div></div></div></fieldset></form></spinner-overlay></div><div class=modal-footer><button class="btn btn-success" ladda=saveTracker.active() data-ng-click=save()>Send</button> <button class="btn btn-default" data-ng-click=cancel()>Cancel</button></div>'),a.put("app/modules/affiliate/partials/affiliatesList.html",'<div class="container-fluid affiliates-list"><div class=well><span class=legend>Manage Affiliates</span><div class="row form-group"><div class=col-md-3><input class=form-control placeholder=ID numbers-only data-ng-model=filter.Id></div><div class=col-md-3><input class=form-control placeholder=Name data-ng-model=filter.Name></div><div class=col-md-3><input class=form-control placeholder=Company data-ng-model=filter.Company></div><div class=col-md-3><select class=form-control placeholder=Tier data-ng-model=filter.Tier data-ng-options="item.Key as item.Text for item in affiliateTiers"></select></div></div><div class="row form-group"><div class=col-md-3><div class=checkbox><label><input type=checkbox name=WithAvailablePayCommision data-ng-model="filter.WithAvailablePayCommision"> Show only affiliates with available payments</label></div></div></div><div class="row form-group"><div class=col-md-4><button class="btn btn-info" data-ng-click=filterAffiliates(); type=button>Filter</button></div></div><hr><div class=form-group><button data-ng-click=open(); class="btn btn-primary">Add New Affiliate</button> <span class=pull-right>* commissions are up until last day of previous month</span></div><spinner-overlay data-loading=refreshTracker.active()><table id=data-grid class="table table-striped table-hover"><thead><tr><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Id\')"><span>ID</span> <span data-ng-if="filter.Sorting.Path == \'Id\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Name\')"><span>Name</span> <span data-ng-if="filter.Sorting.Path == \'Name\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Company\')"><span>Company</span> <span data-ng-if="filter.Sorting.Path == \'Company\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'WebSite\')"><span>Web Site</span> <span data-ng-if="filter.Sorting.Path == \'WebSite\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'CommissionAll\')"><span>Commission</span> <span data-ng-if="filter.Sorting.Path == \'CommissionAll\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'StatusCode\')"><span>Status</span> <span data-ng-if="filter.Sorting.Path == \'StatusCode\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Tier\')"><span>Tier</span> <span data-ng-if="filter.Sorting.Path == \'Tier\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'CustomersCount\')"><span>Customers</span> <span data-ng-if="filter.Sorting.Path == \'CustomersCount\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th>Commission Balance*</th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'PaymentType\')"><span>Payment as</span> <span data-ng-if="filter.Sorting.Path == \'PaymentType\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'DateEdited\')"><span>Last Updated</span> <span data-ng-if="filter.Sorting.Path == \'DateEdited\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=actions>Actions</th></tr></thead><tbody><tr data-ng-repeat="item in items"><td><a ui-sref=index.oneCol.affiliateDetail({id:item.Id})>{{::item.Id}}</a></td><td><a ui-sref=index.oneCol.affiliateDetail({id:item.Id})>{{::item.Name}}</a></td><td>{{::item.Company}}</td><td>{{::item.WebSite}}</td><td>{{::item.CommissionFirst | number:2}}% / {{::item.CommissionAll | number:2}}%</td><td><span data-ng-if="item.StatusCode == 1" class="label label-warning font-default">{{getReferenceItem(ReferenceData.AffiliateStatuses, item.StatusCode).Text}}</span> <span data-ng-if="item.StatusCode == 2" class="label label-info font-default">{{getReferenceItem(ReferenceData.AffiliateStatuses, item.StatusCode).Text}}</span> <span data-ng-if="item.StatusCode == 3" class="label label-danger font-default">{{getReferenceItem(ReferenceData.AffiliateStatuses, item.StatusCode).Text}}</span> <span data-ng-if="item.StatusCode == 4" class="label label-danger font-default">{{getReferenceItem(ReferenceData.AffiliateStatuses, item.StatusCode).Text}}</span> <span data-ng-if="item.StatusCode == 5" class="label label-danger font-default">{{getReferenceItem(ReferenceData.AffiliateStatuses, item.StatusCode).Text}}</span></td><td>{{::item.Tier}}</td><td>{{::item.CustomersCount}}</td><td><span class=margin-right-8px>{{::item.NotPaidCommissionsAmount | currency}}</span> <button data-ng-if="item.NotPaidCommissionsAmount && item.NotPaidCommissionsAmount>=50" title=Pay class="btn btn-default btn-primary btn-xs ma" data-ng-click=pay(item.Id);>Pay</button></td><td><span data-ng-if="item.PaymentType == 1" class="label label-info font-default">Cash</span> <span data-ng-if="item.PaymentType == 2" class="label label-warning font-default">Credit</span></td><td>{{::item.DateEdited | date:"MM/dd/yy"}}<br>{{::item.DateEdited | date:"h:mm a"}}<br>{{::item.EditedByAgentId}}</td><td><button title=Edit class="btn btn-default btn-success btn-xs" data-ng-click=open(item.Id);><i class="glyphicon glyphicon-edit"></i></button> <button title=Delete class="btn btn-default btn-danger btn-xs" ladda=deleteTracker.active() data-ng-click=delete(item.Id);><i class="glyphicon glyphicon-remove"></i></button></td></tr></tbody></table></spinner-overlay><uib-pagination boundary-links=true total-items=totalItems items-per-page=filter.Paging.PageItemCount data-ng-model=filter.Paging.PageIndex previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; data-ng-change="pageChanged();scrollTo(\'data-grid\');"></uib-pagination></div></div>'),a.put("app/modules/affiliate/partials/affiliatesSummaryReport.html",'<div class="container-fluid affiliates-summary"><div class=well><span class=legend>Affiliate Summary Information</span><spinner-overlay data-loading=refreshTracker.active()><div class=summary><div class=form-group><div class="info-label text-right">All Affiliates</div><strong class=ng-binding>{{summary.AllAffiliates}}</strong></div><div class=form-group><div class="info-label text-right">Engaged Affiliates</div><strong class=ng-binding>{{summary.EngagedAffiliates}}</strong></div><div class=form-group><div class="info-label text-right">% Engaged</div><strong class=ng-binding>{{summary.EngagedPercent}}%</strong></div><div class=form-group><div class="info-label text-right">Tagged Customer Accounts</div><strong class=ng-binding>{{summary.AffiliateCustomers}}</strong></div></div></spinner-overlay><hr><div class="form-group inline-form-group"><label for="" class=control-label>Monthly Affiliate Sales Last</label><select class=form-control data-ng-model=options.count data-ng-options="item as item for item in months"></select><label for="" class=control-label>Months.</label><label for=include class=control-label>Include current</label><label class=checkbox-inline><input type=checkbox id=include data-ng-model=options.include>&nbsp;</label><button class="btn btn-info" data-ng-click=refresh(); type=button>Refresh</button></div><hr><spinner-overlay data-loading=refreshItemsTracker.active()><table class="table table-striped"><thead><tr><th class=name></th><th class="month text-center" data-ng-repeat="item in items | orderBy:\'$index\':true">{{item.Month}}</th><th></th></tr></thead><tbody><tr><td class=text-right>New Transactions</td><td class=text-right data-ng-repeat="item in items | orderBy:\'$index\':true">{{item.NewTransactions}}</td><td></td></tr><tr><td class=text-right>Repeat Transactions</td><td class=text-right data-ng-repeat="item in items | orderBy:\'$index\':true">{{item.RepeatTransactions}}</td><td></td></tr><tr><td class=text-right>Total Transactions</td><td class=text-right data-ng-repeat="item in items | orderBy:\'$index\':true">{{item.TotalTransactions}}</td><td></td></tr><tr><td class=text-right>% New Transactions</td><td class=text-right data-ng-repeat="item in items | orderBy:\'$index\':true">{{item.NewTransactionsPercent}}%</td><td></td></tr><tr><td colspan={{items.length+2}}>&nbsp;</td></tr><tr><td class=text-right>New Sales</td><td class=text-right data-ng-repeat="item in items | orderBy:\'$index\':true">{{item.NewSales | currency}}</td><td></td></tr><tr><td class=text-right>Repeat Sales</td><td class=text-right data-ng-repeat="item in items | orderBy:\'$index\':true">{{item.RepeatSales | currency}}</td><td></td></tr><tr><td class=text-right>Total Sales</td><td class=text-right data-ng-repeat="item in items | orderBy:\'$index\':true">{{item.TotalSales | currency}}</td><td></td></tr><tr><td class=text-right>% New Sales</td><td class=text-right data-ng-repeat="item in items | orderBy:\'$index\':true">{{item.NewTransactionsPercent}}%</td><td></td></tr></tbody></table></spinner-overlay></div></div>'),a.put("app/modules/affiliate/partials/customersInAffiliatesReport.html",'<div class=container-fluid><div class=well><span class=legend>Affiliates Summary</span><spinner-overlay data-loading=refreshTracker.active()><table id=data-grid-customers class="table table-striped table-hover"><thead><tr><th>Affiliate Id</th><th>Affiliate Name</th><th># of customers</th></tr></thead><tbody><tr data-ng-repeat="item in items"><td>{{::item.Id}}</td><td>{{::item.Name}}</td><td><a ui-sref=index.oneCol.customersInAffiliatesListWithId({id:item.Id})>{{::item.Count}}</a></td></tr></tbody></table></spinner-overlay><uib-pagination boundary-links=true total-items=totalItems items-per-page=filter.Paging.PageItemCount data-ng-model=filter.Paging.PageIndex previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; data-ng-change="pageChanged();scrollTo(\'data-grid-customers\');"></uib-pagination></div></div>'),a.put("app/modules/authentication/partials/activation.html",'<div class="container container-left small-container"><div class=well><spinner-overlay data-loading=activationTracker.active()><form class=form-horizontal name=userForm data-ng-submit=activate(userForm) data-ng-class="{submitted: userForm.submitted}" novalidate><fieldset><legend>Activate Your Account</legend><div class=form-group><label for=agentId class="col-md-3 control-label">Agent ID</label><div class=col-md-9><input class=form-control id=agentId data-ng-model=user.AgentId placeholder="Agent Id" disabled></div></div><div class=form-group><label class="col-md-3 control-label">First Name</label><div class=col-md-9><input name=firstName class=form-control placeholder="First Name" data-ng-model=user.FirstName required data-ng-maxlength=100><div class=error-container ng-show="userForm.submitted && userForm.firstName.$invalid"><small class=error ng-show=userForm.firstName.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.FirstName")}}</small> <small class=error ng-show=userForm.firstName.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["GeneralFieldNames.FirstName", "100"])}}</small> <small class=error ng-show=userForm.firstName.$error.server>{{serverMessages.GetMessage(\'FirstName\')}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label">Last Name</label><div class=col-md-9><input name=lastName class=form-control placeholder="Last Name" data-ng-model=user.LastName required data-ng-maxlength=100><div class=error-container ng-show="userForm.submitted && userForm.lastName.$invalid"><small class=error ng-show=userForm.lastName.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.LastName")}}</small> <small class=error ng-show=userForm.lastName.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["GeneralFieldNames.LastName", "100"])}}</small> <small class=error ng-show=userForm.lastName.$error.server>{{serverMessages.GetMessage(\'LastName\')}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label">Email</label><div class="col-md-9 form-control-static"><span>{{user.Email}}</span></div></div><span class="help-block small color-red">*Must be at least 8 characters long, contain at least 1 numerical digit, 1 capital character, 1 lowercase character and 1 special character.<br>Example: Dontuse!@1</span><div class=form-group><label class="col-md-3 control-label">Password</label><div class=col-md-9><input type=password name=password class=form-control data-ng-model=user.Password placeholder=Password required><div class=error-container ng-show="userForm.submitted && userForm.password.$invalid"><small class=error ng-show=userForm.password.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Password")}}</small> <small class=error ng-show=userForm.password.$error.server>{{serverMessages.GetMessage(\'Password\')}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label">Confirm Password</label><div class=col-md-9><input type=password name=confirmPassword class=form-control data-ng-model=user.ConfirmPassword placeholder="Confirm Password" required><div class=error-container ng-show="userForm.submitted && userForm.confirmPassword.$invalid"><small class=error ng-show=userForm.confirmPassword.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.ConfirmPassword")}}</small> <small class=error ng-show=userForm.confirmPassword.$error.server>{{serverMessages.GetMessage(\'ConfirmPassword\')}}</small></div></div></div></fieldset><div class=margin-top-20px><button type=button data-ng-click=activate(userForm) ladda=activationTracker.active() class="btn btn-success">Activate</button></div></form></spinner-overlay></div></div>'),a.put("app/modules/authentication/partials/login.html",'<div class="container container-left small-container"><div class=well><form class=form-horizontal name=loginForm data-ng-submit=signIn(loginForm) data-ng-class="{submitted: loginForm.submitted}" novalidate><fieldset><legend>Login</legend><div class=form-group><label class="col-md-3 control-label">Email</label><div class=col-md-9><input type=email name=email class=form-control placeholder=Email data-ng-model=login.Email required data-ng-maxlength=100><div class=error-container ng-show="loginForm.submitted && loginForm.email.$invalid"><small class=error ng-show=loginForm.email.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Email")}}</small> <small class=error ng-show=loginForm.email.$error.email>{{getValidationMessage("ValidationMessages.EmailFormat","GeneralFieldNames.Email")}}</small> <small class=error ng-show=loginForm.email.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["GeneralFieldNames.Email", "100"])}}</small> <small class=error ng-show=loginForm.email.$error.server>{{serverMessages.GetMessage(\'Email\')}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label">Password</label><div class=col-md-9><input type=password name=password class=form-control data-ng-model=login.Password placeholder=Password required><div class=error-container ng-show="loginForm.submitted && loginForm.password.$invalid"><small class=error ng-show=loginForm.password.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Password")}}</small> <small class=error ng-show=loginForm.password.$error.server>{{serverMessages.GetMessage(\'Password\')}}</small></div></div></div></fieldset><div class=margin-top-20px><button type=button data-ng-click=signIn(loginForm) ladda=loginTracker.active() class="btn btn-success">Login</button></div></form></div></div>'),a.put("app/modules/authentication/partials/resetPassword.html",'<div class="container container-left small-container"><div class=well><spinner-overlay data-loading=resetTracker.active()><form class=form-horizontal name=resetForm data-ng-submit=resetPassword(resetForm) data-ng-class="{submitted: resetForm.submitted}" novalidate><fieldset><legend>Reset Your Password</legend><div class=form-group><label class="col-md-3 control-label">Email</label><div class=col-md-9><input type=email name=Email class=form-control placeholder=Email data-ng-model=reset.Email required data-ng-maxlength=100><div class=error-container ng-show="resetForm.submitted && resetForm.Email.$invalid"><small class=error ng-show=resetForm.Email.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Email")}}</small> <small class=error ng-show=resetForm.Email.$error.email>{{getValidationMessage("ValidationMessages.EmailFormat","GeneralFieldNames.Email")}}</small> <small class=error ng-show=resetForm.Email.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["GeneralFieldNames.Email", "100"])}}</small> <small class=error ng-show=resetForm.Email.$error.server>{{serverMessages.GetMessage(\'Email\')}}</small></div></div></div><span class="help-block small color-red">*Must be at least 8 characters long, contain at least 1 numerical digit, 1 capital character, 1 lowercase character and 1 special character.<br>Example: Dontuse!@1</span><div class=form-group><label class="col-md-3 control-label">Password</label><div class=col-md-9><input type=password name=Password class=form-control data-ng-model=reset.Password placeholder=Password required><div class=error-container ng-show="resetForm.submitted && resetForm.Password.$invalid"><small class=error ng-show=resetForm.Password.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Password")}}</small> <small class=error ng-show=resetForm.Password.$error.server>{{serverMessages.GetMessage(\'Password\')}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label">Confirm Password</label><div class=col-md-9><input type=password name=ConfirmPassword class=form-control data-ng-model=reset.ConfirmPassword placeholder="Confirm Password" required><div class=error-container ng-show="resetForm.submitted && resetForm.ConfirmPassword.$invalid"><small class=error ng-show=resetForm.ConfirmPassword.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.ConfirmPassword")}}</small> <small class=error ng-show=resetForm.ConfirmPassword.$error.server>{{serverMessages.GetMessage(\'ConfirmPassword\')}}</small></div></div></div></fieldset><div class=margin-top-20px><button type=button data-ng-click=resetPassword(resetForm) ladda=resetTracker.active() class="btn btn-success">Reset</button></div></form></spinner-overlay></div></div>'),a.put("app/modules/content/partials/articleBonusLinksPopup.html",'<div class=modal-header><h3 class=modal-title>Manage Bonus Links</h3></div><div class="modal-body article-bonus-links-popup"><spinner-overlay data-loading=refreshTracker.active()><form class=form-horizontal name=forms.form data-ng-class="{submitted: forms.submitted}" novalidate unsaved-warning-form><fieldset><div class=form-group><div class=col-md-12><button data-ng-click=addItem(); class="btn btn-info btn-right">Add New Item</button></div></div><div data-ng-repeat="item in items" class=variant-panel><div class=form-horizontal ng-form=i{{$index}} novalidate><fieldset><div class=form-group><label class="col-md-2 control-label">Url</label><div class="col-md-10 padding-0px"><div class=col-md-10><input name=Url class=form-control placeholder=Url data-ng-model=item.Url required data-ng-maxlength=250><div class=error-container ng-show="forms.submitted && forms.form.i{{$index}}.Url.$invalid"><small class=error ng-show=forms.form.i{{$index}}.Url.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Url")}}</small> <small class=error ng-show=forms.form.i{{$index}}.Url.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["GeneralFieldNames.Url", "250"])}}</small></div></div><div class=col-md-2><button class="btn btn-danger" data-ng-click=deleteItem($index)>Delete</button></div></div></div><div class=form-group><label class="col-md-2 control-label">Start Date</label><div class="col-md-10 padding-0px"><div class=col-md-10><p class=input-group><input class=form-control placeholder="Start Date" name=StartDate uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=item.StartDate is-open=fromOpened ng-required="true"> <span class=input-group-btn><button type=button class="btn btn-default" ng-disabled=false ng-click="stopPropagation($event); fromOpened=true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.submitted && forms.form.i{{$index}}.StartDate.$invalid"><small class=error ng-show=forms.form.i{{$index}}.StartDate.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Start Date")}}</small></div></div><div class=col-md-2></div></div></div><hr></fieldset></div></div></fieldset></form></spinner-overlay></div><div class=modal-footer><button class="btn btn-success" ladda=refreshTracker.active() data-ng-click=save()>Save</button> <button class="btn btn-default" data-ng-click=cancel()>Cancel</button></div>'),
a.put("app/modules/content/partials/articleCategoriesTreeView.html",'<div class=container-fluid><div class=left-pane-controls><div class="well container-fluid"><div><button class="btn btn-success width-160px" ladda=editTracker.active() data-ng-click=save()>Save</button></div><div class="btn-group margin-top-10px"><button class="btn btn-default width-160px" data-ng-click=cancel()>Cancel</button></div></div></div><div class=right-pane-main><div class=container-fluid><div class=row><div class="container container-left"><spinner-overlay data-loading=refreshTracker.active()><div class="well row categories"><span class=legend>Manage Article Categories</span> <a class="btn btn-success btn-xs" title=Add nodrag data-ng-click=add(rootCategory.Id)><i class="glyphicon glyphicon-plus"></i></a> <button data-ng-if=!categoriesExpanded data-ng-click=updateCategoriesCollapsed(true); class="btn btn-primary btn-xs expand-button">Expand All</button> <button data-ng-if=categoriesExpanded data-ng-click=updateCategoriesCollapsed(false); class="btn btn-primary btn-xs expand-button">Collapse All</button><div ui-tree class=ya-treeview><ol ui-tree-nodes data-ng-model=rootCategory.SubItems><li ng-repeat="item in rootCategory.SubItems" ui-tree-node data-ng-include="\'app/modules/content/partials/contentCategoriesReordering.html\'"></li></ol></div></div></spinner-overlay></div></div></div></div></div>'),a.put("app/modules/content/partials/articleCategoryDetail.html",'<div class=container-fluid><div class=left-pane-controls><div class="well container-fluid"><div><button class="btn btn-success width-160px" ladda=editTracker.active() data-ng-click=save()>Save</button></div><div class="btn-group margin-top-10px"><a target=_blank href={{previewUrl}} data-ng-if=previewUrl class="btn btn-info width-80px">Preview</a> <a data-ng-if=!previewUrl class="btn btn-info width-80px">Preview</a> <button cancel-button-default-state=index.oneCol.manageArticleCategories cancel-button class="btn btn-default width-80px">Cancel</button></div><div class=margin-top-10px><button ui-sref=index.oneCol.manageArticleCategories class="btn btn-primary width-160px">Manage All</button></div></div><div ng-controller=objectHistorySectionController onload="name = \'History\'" data-ng-include="\'app/modules/setting/partials/objectHistorySection.html\'"></div></div><div class=right-pane-main><div class=container-fluid><div class=row><uib-tabset><uib-tab heading=Details active=detailsTab.active><div class="container container-left"><div class="well row"><spinner-overlay data-loading=refreshTracker.active()><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.form.submitted}" novalidate><fieldset><span class=legend>Article Category Details</span><div class=form-group><label for=name class="col-md-3 control-label">Name</label><div class=col-md-9><input name=Name class=form-control placeholder=Name data-ng-model=articleCategory.Name required><div class=error-container ng-show="forms.form.submitted && forms.form.Name.$invalid"><small class=error ng-show=forms.form.Name.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Name")}}</small></div></div></div><div class=form-group><label for=url class="col-md-3 control-label">URL</label><div class=col-md-9><input name=Url class=form-control placeholder=URL data-ng-model=articleCategory.Url ng-pattern="/^[A-Za-z0-9]{1}[A-Za-z0-9-_]{3}[A-Za-z0-9-_]*$/" required><div class=error-container ng-show="forms.form.submitted && forms.form.Url.$invalid"><small class=error ng-show=forms.form.Url.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Url")}}</small> <small class=error ng-show=forms.form.Url.$error.pattern>{{getValidationMessage("ValidationMessages.FieldContentUrlInvalidFormat","GeneralFieldNames.Url")}}</small> <small class=error ng-show=forms.form.Url.$error.server>{{serverMessages.GetMessage(\'Url\')}}</small></div></div></div><span class=legend>SEO</span><div class=form-group><label for=meta_title class="col-md-3 control-label">Meta Title</label><div class=col-md-9><input class=form-control placeholder="Meta Title" data-ng-model=articleCategory.Title></div></div><div class=form-group><label for=meta_description class="col-md-3 control-label">Meta Description</label><div class=col-md-9><textarea type=text class=form-control placeholder="Meta Description" rows=10 data-ng-model=articleCategory.MetaDescription></textarea></div></div></fieldset></form></spinner-overlay></div></div></uib-tab><uib-tab heading=Template><div class="container container-left"><div class="well row"><spinner-overlay data-loading=refreshTracker.active()><form class=form-horizontal><fieldset><div data-ng-if=validatePermission(7) class=form-group><label for=masterTemplate class="col-md-3 control-label">Master Template</label><div class=col-md-9><select class=form-control name=MasterTemplate data-ng-model=articleCategory.MasterContentItemId ng-options="master.Id as master.Name for master in masters"></select></div></div><button class="btn btn-info width-200px margin-bottom-10px" data-ng-if="validatePermission(7) && articleCategory.MasterContentItemId!=0" data-ng-click=goToMaster(articleCategory.MasterContentItemId);>Manage Master Template</button> <span class=legend>Manage Template</span><div class=form-group><div class=col-md-12><div data-ng-model=articleCategory.Template ui-ace-ttl master-id=articleCategory.MasterContentItemId></div></div></div></fieldset></form></spinner-overlay></div></div></uib-tab></uib-tabset></div></div></div></div>'),a.put("app/modules/content/partials/articleDetail.html",'<div class=container-fluid><div class=left-pane-controls><div class="well container-fluid"><div><button class="btn btn-success width-160px" ladda=editTracker.active() data-ng-click=save()>Save</button></div><div class="btn-group margin-top-10px"><a target=_blank href={{previewUrl}} data-ng-if=previewUrl class="btn btn-info width-80px">Preview</a> <a data-ng-if=!previewUrl class="btn btn-info width-80px">Preview</a> <button cancel-button-default-state=index.oneCol.manageArticles cancel-button class="btn btn-default width-80px">Cancel</button></div><div class=margin-top-10px><button class="btn btn-primary width-160px" ui-sref=index.oneCol.manageArticles>Manage All</button></div></div><div ng-controller=objectHistorySectionController onload="name = \'History\'" data-ng-include="\'app/modules/setting/partials/objectHistorySection.html\'"></div></div><div class=right-pane-main><div class=container-fluid><div class=row><uib-tabset><uib-tab heading=Details active=detailsTab.active><div class="container container-left"><div class="well row"><spinner-overlay data-loading=refreshTracker.active()><form class=form-horizontal name=forms.articleForm data-ng-submit=save() data-ng-class="{submitted: forms.articleForm.submitted}" novalidate><fieldset><span class=legend>Article Details</span><div class=form-group><label for=date class="col-md-3 control-label">Date</label><div class=col-md-9><p class=input-group><input name=Date class=form-control uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=article.PublishedDate is-open=publishedDateOpened required> <span class=input-group-btn><button type=button class="btn btn-default" ng-disabled=false ng-click="stopPropagation($event); publishedDateOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.articleForm.submitted && forms.articleForm.Date.$invalid"><small class=error ng-show=forms.articleForm.Date.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Date")}}</small></div></div></div><div class=form-group><label for=title class="col-md-3 control-label">Title</label><div class=col-md-9><input name=Name class=form-control placeholder=Title data-ng-model=article.Name required><div class=error-container ng-show="forms.articleForm.submitted && forms.articleForm.Name.$invalid"><small class=error ng-show=forms.articleForm.Name.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Title")}}</small></div></div></div><div class=form-group><label for=subTitle class="col-md-3 control-label">Sub Title</label><div class=col-md-9><input name=SubTitle class=form-control placeholder="Sub Title" data-ng-model=article.SubTitle></div></div><div class=form-group><label for=author class="col-md-3 control-label">Author</label><div class=col-md-9><input name=Author class=form-control placeholder=Author data-ng-model=article.Author></div></div><div class=form-group><label for=url class="col-md-3 control-label">URL</label><div class=col-md-9><input name=Url class=form-control placeholder=URL data-ng-model=article.Url ng-pattern="/^[A-Za-z0-9]{1}[A-Za-z0-9-_]{3}[A-Za-z0-9-_]*$/" required><div class=error-container ng-show="forms.articleForm.submitted && forms.articleForm.Url.$invalid"><small class=error ng-show=forms.articleForm.Url.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Url")}}</small> <small class=error ng-show=forms.articleForm.Url.$error.pattern>{{getValidationMessage("ValidationMessages.FieldContentUrlInvalidFormat","GeneralFieldNames.Url")}}</small> <small class=error ng-show=forms.articleForm.Url.$error.server>{{serverMessages.GetMessage(\'Url\')}}</small></div></div></div><div class=form-group><label for=description class="col-md-3 control-label">Description</label><div class=col-md-9><div class=input-group data-ng-show=!descriptionExpanded><input name=Description class=form-control id=short placeholder=Description disabled data-ng-model=article.Description required> <span class=input-group-btn><a data-ng-click="toogleEditorState(\'descriptionExpanded\')" class="btn btn-default">Expand</a></span></div><div class=toogle-editor data-ng-show=descriptionExpanded><a data-ng-click="toogleEditorState(\'descriptionExpanded\')" class="btn btn-default">Hide</a></div><div data-ng-show=descriptionExpanded text-angular data-ng-model=article.Description></div><div class=error-container ng-show="forms.articleForm.submitted && forms.articleForm.Description.$invalid"><small class=error ng-show=forms.articleForm.Description.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Description")}}</small></div></div></div><div class=form-group><label for=Image class="col-md-3 control-label">Image</label><div class=col-md-9><filefield name=Image placeholder=Image ng-model=article.FileUrl></filefield></div></div><span class=legend>SEO</span><div class=form-group><label for=meta_title class="col-md-3 control-label">Meta Title</label><div class=col-md-9><input class=form-control placeholder="Meta Title" data-ng-model=article.Title></div></div><div class=form-group><label for=meta_description class="col-md-3 control-label">Meta Description</label><div class=col-md-9><textarea type=text class=form-control placeholder="Meta Description" rows=10 data-ng-model=article.MetaDescription></textarea></div></div></fieldset></form></spinner-overlay></div></div></uib-tab><uib-tab heading=Categories><div class="container container-left"><div class="well row categories"><spinner-overlay data-loading=refreshTracker.active()><span class=legend>Categories</span> <button class="btn btn-info width-160px margin-bottom-10px" ui-sref="index.oneCol.manageArticleCategories({mode:\'edit\', id: id})">Manage Categories</button> <button data-ng-if=!categoriesExpanded data-ng-click=updateCategoriesCollapsed(true); class="btn btn-primary btn-xs expand-button">Expand All</button> <button data-ng-if=categoriesExpanded data-ng-click=updateCategoriesCollapsed(false); class="btn btn-primary btn-xs expand-button">Collapse All</button><div ui-tree data-drag-enabled=false class=ya-treeview><ol ui-tree-nodes="" data-ng-model=rootCategory.SubItems><li ng-repeat="item in rootCategory.SubItems" ui-tree-node collapsed=true data-ng-include="\'app/modules/content/partials/contentCategories.html\'"></li></ol></div></spinner-overlay></div></div></uib-tab><uib-tab heading=Template><div class="container container-left"><div class="well row"><spinner-overlay data-loading=refreshTracker.active()><div data-ng-if=validatePermission(7) class=form-group><label for=masterTemplate class="col-md-3 control-label">Master Template</label><div class=col-md-9><select class=form-control name=MasterTemplate data-ng-model=article.MasterContentItemId ng-options="master.Id as master.Name for master in masters"></select></div></div><button class="btn btn-info width-200px margin-bottom-10px" data-ng-if="validatePermission(7) && article.MasterContentItemId!=0" data-ng-click=goToMaster(article.MasterContentItemId);>Manage Master Template</button> <span class=legend>Manage Template</span><div class=form-group><div class=col-md-12><div data-ng-model=article.Template ui-ace-ttl master-id=article.MasterContentItemId></div></div></div></spinner-overlay></div></div></uib-tab></uib-tabset></div></div></div></div>'),a.put("app/modules/content/partials/articlesList.html",'<div class=container-fluid><div class=well><span class=legend>Manage Articles</span><div class="row form-group"><div class=col-md-4><input class=form-control placeholder=Title data-ng-model=filter.Name></div></div><div class="row form-group"><div class=col-md-4><select class=form-control data-ng-model=filter.CategoryId ng-options="category.Id as category.Name for category in categories"></select></div></div><div class="row form-group"><div class=col-md-4><button class="btn btn-info" data-ng-click=filterArticles(); type=button>Filter</button></div></div><hr><div class=form-group><button data-ng-click=open(); class="btn btn-primary">Add New Article</button> <button class="btn btn-info btn-right width-160px" ui-sref="index.oneCol.manageArticleCategories({mode:\'list\'})">Manage Categories</button> <button class="btn btn-primary btn-right width-160px margin-right-15px" data-ng-click=openBonusLinks()>Manage Bonus Links</button></div><spinner-overlay data-loading=refreshTracker.active()><table id=data-grid class="table table-striped table-hover"><thead><tr><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Title\')"><span>Title</span> <span data-ng-if="filter.Sorting.Path == \'Title\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Url\')"><span>URL</span> <span data-ng-if="filter.Sorting.Path == \'Url\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th>Category</th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Updated\')"><span>Updated</span> <span data-ng-if="filter.Sorting.Path == \'Updated\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th>Actions</th></tr></thead><tbody><tr data-ng-repeat="article in articles"><td><a ui-sref=index.oneCol.articleDetail({id:article.Id})>{{::article.Name}}</a></td><td>{{article.Url}}</td><td><div data-ng-if="article.Categories && article.Categories.length>0"><div data-ng-repeat="category in article.Categories">{{category}}</div></div><div data-ng-if="!article.Categories || article.Categories.length==0">No Categories</div></td><td>{{article.Updated | date:"MM/dd/yy"}}<br>{{article.Updated | date:"h:mm a"}}<br>{{article.AgentId}}</td><td><button title=Edit class="btn btn-default btn-success btn-xs" data-ng-click=open(article.Id);><i class="glyphicon glyphicon-edit"></i></button> <button title=Delete class="btn btn-default btn-danger btn-xs" ladda=deleteTracker.active() data-ng-click=delete(article.Id);><i class="glyphicon glyphicon-remove"></i></button></td></tr></tbody></table></spinner-overlay><uib-pagination boundary-links=true total-items=totalItems items-per-page=filter.Paging.PageItemCount data-ng-model=filter.Paging.PageIndex previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; data-ng-change="pageChanged();scrollTo(\'data-grid\');"></uib-pagination></div></div>'),a.put("app/modules/content/partials/contentAreaDetail.html",'<div class=container-fluid><div class=left-pane-controls><div class="well container-fluid"><div><button class="btn btn-success width-160px" ladda=editTracker.active() data-ng-click=save()>Save</button></div><div class="btn-group margin-top-10px"><a target=_blank href={{previewUrl}} class="btn btn-info width-80px">Preview</a> <button cancel-button-default-state=index.oneCol.manageContentAreas cancel-button class="btn btn-default width-80px">Cancel</button></div><div class=margin-top-10px><button class="btn btn-primary width-160px" ui-sref=index.oneCol.manageContentAreas>Manage All</button></div></div><div ng-controller=objectHistorySectionController onload="name = \'History\'" data-ng-include="\'app/modules/setting/partials/objectHistorySection.html\'"></div></div><div class=right-pane-main><div class=container-fluid><div class=row><div class="container container-left"><div class="well row"><spinner-overlay data-loading=refreshTracker.active()><form class=form-horizontal><fieldset><span class="legend ng-scope">Manage {{contentArea.Name}}</span><div class=form-group><div class=col-md-12><div data-ng-model=contentArea.Template ui-ace="{\n				                                require: [\'ace/ext/language_tools\'],\n				                                advanced: {\n					                                enableSnippets: true,\n					                                enableBasicAutocompletion: true,\n					                                enableLiveAutocompletion: true\n				                                },\n				                                theme:\'cobalt\',\n				                                mode: \'html\',\n				                                onLoad: aceLoaded,\n				                                onChange: aceChanged\n		                                }"></div></div></div></fieldset></form></spinner-overlay></div></div></div></div></div></div>'),a.put("app/modules/content/partials/contentAreas.html",'<div class=container-fluid><div class=well><span class=legend>Manage Design Elements</span><spinner-overlay data-loading=refreshTracker.active()><table class="table table-striped table-hover"><thead><tr><th>Name</th><th>Updated</th><th>Actions</th></tr></thead><tbody><tr data-ng-repeat="contentArea in contentAreas"><td><a ui-sref=index.oneCol.manageContentAreaDetail({id:contentArea.Id})>{{::contentArea.Name}}</a></td><td>{{contentArea.Updated | date:"MM/dd/yy"}}<br>{{contentArea.Updated | date:"h:mm a"}}<br>{{contentArea.AgentId}}</td><td><button title=Edit class="btn btn-default btn-success btn-xs" data-ng-click=open(contentArea.Id)><i class="glyphicon glyphicon-edit"></i></button></td></tr></tbody></table></spinner-overlay></div></div>'),a.put("app/modules/content/partials/contentCategories.html",'<div data-ng-if="item.SubItems && item.SubItems.length > 0"><a class="btn btn-link pull-left" data-nodrag data-ng-click=toggle(this)><i class=glyphicon ng-class="{\'glyphicon-chevron-right\': collapsed, \'glyphicon-chevron-down\': !collapsed}"></i></a></div><div ui-tree-handle><div class="ya-treeview-content clearfix"><div class=checkbox><label><input data-ng-model=item.IsSelected data-ng-click="treeItemClick && treeItemClick(item)" type=checkbox>{{item.Name}}</label><span data-ng-if="item.StatusCode == 1" class="label label-warning category-status">Hidden</span></div></div></div><ol ui-tree-nodes="" data-ng-model=item.SubItems data-ng-class="{hidden: collapsed}"><li ng-repeat="item in item.SubItems" ui-tree-node collapsed=true data-ng-include="\'app/modules/content/partials/contentCategories.html\'"></li></ol>'),a.put("app/modules/content/partials/contentCategoriesReordering.html",'<div data-ng-if="item.SubItems && item.SubItems.length > 0"><a class="btn btn-link pull-left" data-nodrag data-ng-click=toggle(this)><i class=glyphicon ng-class="{\'glyphicon-chevron-right\': collapsed, \'glyphicon-chevron-down\': !collapsed}"></i></a></div><div ui-tree-handle><div class="ya-treeview-content clearfix"><div class=line><label>{{item.Name}}</label><span data-ng-if="item.StatusCode == 1" class="label label-warning category-status">Hidden</span> <span data-ng-if="item.StatusCode == 2 && item.Assigned == 2" class="label label-wholesale category-status">Wholesale</span></div><div class=ya-treview-buttons data-nodrag><a class="btn btn-success btn-xs" title=Add nodrag data-ng-click=add(item.Id)><i class="glyphicon glyphicon-plus"></i></a> <a class="btn btn-info btn-xs" title=Edit nodrag data-ng-click=open(item.Id)><i class="glyphicon glyphicon-edit"></i></a> <a class="btn btn-danger btn-xs" title=Delete nodrag data-ng-if="!item.SubItems || item.SubItems.length == 0" ladda=deleteTracker.active() data-ng-click=delete(item.Id)><i class="glyphicon glyphicon-remove"></i></a></div></div></div><ol ui-tree-nodes="" data-ng-model=item.SubItems data-ng-class="{hidden: collapsed}"><li ng-repeat="item in item.SubItems" ui-tree-node data-ng-include="\'app/modules/content/partials/contentCategoriesReordering.html\'"></li></ol>'),a.put("app/modules/content/partials/contentCrossSells.html",'<div class=container-fluid><div class=left-pane-controls><div class="well container-fluid"><div><button data-ng-click=save() class="btn btn-success width-160px" unsaved-warning-clear>Save</button></div><div class=margin-top-10px><button cancel-button class="btn btn-default width-160px" unsaved-warning-clear>Cancel</button></div></div></div><div class=right-pane-main><div class=container-fluid><div class=row><div class="container container-left"><div class="well row"><spinner-overlay data-loading=refreshTracker.active()><span class=legend>{{title}}</span><form data-ng-submit=save() name=forms.Items data-ng-class="{submitted: forms.submitted}" novalidate unsaved-warning-form><div class="panel-group sortable-accordion"><div ui-sortable=sortableOptions data-ng-model=model.Items><div data-ng-repeat="crossSellProduct in model.Items" class="panel panel-default"><div class=form-horizontal ng-form=i{{$index}}><fieldset><div class=panel-heading><h4 class=panel-title><div class=accordion-toggle><div class=form-horizontal><div class=form-group><div data-ng-click=$event.stopPropagation()><label class="control-label col-md-3">Title</label><div class=col-md-9><input name=Title class=form-control placeholder="Cross Sell Title" data-ng-model=crossSellProduct.Title required><div class=error-container ng-show="forms.submitted && forms.Items.i{{$index}}.Title.$invalid"><small class=error ng-show=forms.Items.i{{$index}}.Title.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Title")}}</small> <small class=error ng-show=forms.Items.i{{$index}}.Title.$error.server>{{serverMessages.GetMessage(\'Title\',\'Items\', $index)}}</small></div></div></div></div><div class=form-group><div data-ng-click=$event.stopPropagation()><label class="control-label col-md-3">Image</label><div class=col-md-9><filefield name=ImageUrl placeholder="Cross Sell Image" ng-model=crossSellProduct.ImageUrl required></filefield><div class=error-container ng-show="forms.submitted && forms.Items.i{{$index}}.ImageUrl.$invalid"><small class=error ng-show=forms.Items.i{{$index}}.ImageUrl.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Image")}}</small> <small class=error ng-show=forms.Items.i{{$index}}.ImageUrl.$error.server>{{serverMessages.GetMessage(\'ImageUrl\',\'Items\',$index)}}</small></div></div></div></div><div class=form-group><div data-ng-click=$event.stopPropagation()><label class="control-label col-md-3">SKU Associated</label><div class=col-md-9><input name=Sku class=form-control placeholder="Cross Sell SKU" data-ng-model=crossSellProduct.SkuCode typeahead-min-length=1 typeahead-wait-ms=200 uib-typeahead="sku.Code as sku.Code for sku in getSku($viewValue)" typeahead-loading=loadingSKUsBySKU typeahead-on-select=skuChanged($item,$index) data-ng-change=cleaerTypeaheadBox(crossSellProduct) typeahead-wait-ms=200 typeahead-editable=false required><div class=error-container ng-show="forms.submitted && (forms.Items.i{{$index}}.SkuCode.$invalid || crossSellProduct.IdSku == 0)"><small class=error ng-show=forms.Items.i{{$index}}.SkuCode.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","SKU")}}</small> <small class=error ng-show=forms.Items.i{{$index}}.SkuCode.$error.server>{{serverMessages.GetMessage(\'SkuCode\',\'Items\', $index)}}</small> <small class=error ng-show="crossSellProduct.IdSku == 0 && !forms.Items.i{{$index}}.SkuCode.$invalid">{{getValidationMessage("ValidationMessages.FieldRequired","SKU")}}</small></div></div></div></div><div class=form-group><label class="control-label col-md-3">Retail Price</label><div data-ng-click=$event.stopPropagation()><div class=col-md-3><div class=input-group><span class=input-group-addon>$</span> <input name=RetailPrice class=form-control money="" placeholder="Retail Price" data-ng-model=crossSellProduct.RetailPrice readonly></div></div><label class="control-label col-md-3">Wholesale Price</label><div class=col-md-3><div class=input-group><span class=input-group-addon>$</span> <input name=WholesalePrice class=form-control money="" placeholder="Wholesale Price" data-ng-model=crossSellProduct.WholesalePrice readonly></div></div></div></div></div></div></h4></div><div class=panel-collapse data-ng-class="{collapse: !crossSellProduct.IsOpen}"><div class=panel-body><div class=form-horizontal><div class=form-group></div></div></div></div></fieldset></div></div></div></div></form></spinner-overlay></div></div></div></div></div></div>'),a.put("app/modules/content/partials/contentPageCategoriesTreeView.html",'<div class=container-fluid><div class=left-pane-controls><div class="well container-fluid"><div><button class="btn btn-success width-160px" ladda=editTracker.active() data-ng-click=save()>Save</button></div><div class="btn-group margin-top-10px"><button class="btn btn-default width-160px" data-ng-click=cancel()>Cancel</button></div></div></div><div class=right-pane-main><div class=container-fluid><div class=row><div class="container container-left"><div class="well row categories"><spinner-overlay data-loading=refreshTracker.active()><span class=legend>Manage Content Categories</span> <a class="btn btn-success btn-xs" title=Add nodrag data-ng-click=add(rootCategory.Id)><i class="glyphicon glyphicon-plus"></i></a> <button data-ng-if=!categoriesExpanded data-ng-click=updateCategoriesCollapsed(true); class="btn btn-primary btn-xs expand-button">Expand All</button> <button data-ng-if=categoriesExpanded data-ng-click=updateCategoriesCollapsed(false); class="btn btn-primary btn-xs expand-button">Collapse All</button><div ui-tree class=ya-treeview><ol ui-tree-nodes data-ng-model=rootCategory.SubItems><li ng-repeat="item in rootCategory.SubItems" ui-tree-node data-ng-include="\'app/modules/content/partials/contentCategoriesReordering.html\'"></li></ol></div></spinner-overlay></div></div></div></div></div></div>'),a.put("app/modules/content/partials/contentPageCategoryDetail.html",'<div class=container-fluid><div class=left-pane-controls><div class="well container-fluid"><div><button class="btn btn-success width-160px" ladda=editTracker.active() data-ng-click=save()>Save</button></div><div class="btn-group margin-top-10px"><a target=_blank href={{previewUrl}} data-ng-if=previewUrl class="btn btn-info width-80px">Preview</a> <a data-ng-if=!previewUrl class="btn btn-info width-80px">Preview</a> <button cancel-button-default-state=index.oneCol.manageContentPageCategories cancel-button class="btn btn-default width-80px">Cancel</button></div><div class=margin-top-10px><button ui-sref=index.oneCol.manageContentPageCategories class="btn btn-primary width-160px">Manage All</button></div></div><div ng-controller=objectHistorySectionController onload="name = \'History\'" data-ng-include="\'app/modules/setting/partials/objectHistorySection.html\'"></div></div><div class=right-pane-main><div class=container-fluid><div class=row><uib-tabset><uib-tab heading=Details active=detailsTab.active><div class="container container-left"><div class="well row"><spinner-overlay data-loading=refreshTracker.active()><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.form.submitted}" novalidate><fieldset><span class=legend>Content Page Category Details</span><div class=form-group><label for=name class="col-md-3 control-label">Name</label><div class=col-md-9><input name=Name class=form-control placeholder=Name data-ng-model=contentPageCategory.Name required><div class=error-container ng-show="forms.form.submitted && forms.form.Name.$invalid"><small class=error ng-show=forms.form.Name.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Name")}}</small></div></div></div><div class=form-group><label for=url class="col-md-3 control-label">URL</label><div class=col-md-9><input name=Url class=form-control placeholder=URL data-ng-model=contentPageCategory.Url ng-pattern="/^[A-Za-z0-9]{1}[A-Za-z0-9-_]{3}[A-Za-z0-9-_]*$/" required><div class=error-container ng-show="forms.form.submitted && forms.form.Url.$invalid"><small class=error ng-show=forms.form.Url.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Url")}}</small> <small class=error ng-show=forms.form.Url.$error.pattern>{{getValidationMessage("ValidationMessages.FieldContentUrlInvalidFormat","GeneralFieldNames.Url")}}</small> <small class=error ng-show=forms.form.Url.$error.server>{{serverMessages.GetMessage(\'Url\')}}</small></div></div></div><span class=legend>SEO</span><div class=form-group><label for=meta_title class="col-md-3 control-label">Meta Title</label><div class=col-md-9><input class=form-control placeholder="Meta Title" data-ng-model=contentPageCategory.Title></div></div><div class=form-group><label for=meta_description class="col-md-3 control-label">Meta Description</label><div class=col-md-9><textarea type=text class=form-control placeholder="Meta Description" rows=10 data-ng-model=contentPageCategory.MetaDescription></textarea></div></div></fieldset></form></spinner-overlay></div></div></uib-tab><uib-tab heading=Template><div class="container container-left"><div class="well row"><spinner-overlay data-loading=refreshTracker.active()><form class=form-horizontal><fieldset><div data-ng-if=validatePermission(7) class=form-group><label for=masterTemplate class="col-md-3 control-label">Master Template</label><div class=col-md-9><select class=form-control name=MasterTemplate data-ng-model=contentPageCategory.MasterContentItemId ng-options="master.Id as master.Name for master in masters"></select></div></div><button class="btn btn-info width-200px margin-bottom-10px" data-ng-if="validatePermission(7) && contentPageCategory.MasterContentItemId!=0" data-ng-click=goToMaster(contentPageCategory.MasterContentItemId);>Manage Master Template</button> <span class=legend>Manage Template</span><div class=form-group><div class=col-md-12><div data-ng-model=contentPageCategory.Template ui-ace-ttl master-id=contentPageCategory.MasterContentItemId></div></div></div></fieldset></form></spinner-overlay></div></div></uib-tab></uib-tabset></div></div></div></div>'),a.put("app/modules/content/partials/contentPageDetail.html",'<div class=container-fluid><div class=left-pane-controls><div class="well container-fluid"><div><button class="btn btn-success width-160px" ladda=editTracker.active() data-ng-click=save()>Save</button></div><div class="btn-group margin-top-10px"><a target=_blank href={{previewUrl}} data-ng-if=previewUrl class="btn btn-info width-80px">Preview</a> <a data-ng-if=!previewUrl class="btn btn-info width-80px">Preview</a> <button cancel-button-default-state=index.oneCol.manageContentPages cancel-button class="btn btn-default width-80px">Cancel</button></div><div class=margin-top-10px><button class="btn btn-primary width-160px" ui-sref=index.oneCol.manageContentPages>Manage All</button></div></div><div ng-controller=objectHistorySectionController onload="name = \'History\'" data-ng-include="\'app/modules/setting/partials/objectHistorySection.html\'"></div></div><div class=right-pane-main><div class=container-fluid><div class=row><uib-tabset><uib-tab heading=Details active=detailsTab.active><div class="container container-left"><div class="well row"><spinner-overlay data-loading=refreshTracker.active()><form class=form-horizontal name=forms.contentPageForm data-ng-submit=save() data-ng-class="{submitted: forms.contentPageForm.submitted}" novalidate><fieldset><div class=form-group><label for=type class="col-md-3 control-label">Status</label><div class=col-md-9><select class=form-control name=Status data-ng-model=contentPage.Status ng-options="status.Key as status.Text for status in statuses"></select></div></div><span class=legend>Content Page Details</span><div class=form-group><label for=title class="col-md-3 control-label">Title</label><div class=col-md-9><input name=Name class=form-control placeholder=Title data-ng-model=contentPage.Name required><div class=error-container ng-show="forms.contentPageForm.submitted && forms.contentPageForm.Name.$invalid"><small class=error ng-show=forms.contentPageForm.Name.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Title")}}</small></div></div></div><div class=form-group><label for=url class="col-md-3 control-label">URL</label><div class=col-md-9><input name=Url class=form-control placeholder=URL data-ng-model=contentPage.Url ng-pattern="/^[A-Za-z0-9]{1}[A-Za-z0-9-_]{3}[A-Za-z0-9-_]*$/" required><div class=error-container ng-show="forms.contentPageForm.submitted && forms.contentPageForm.Url.$invalid"><small class=error ng-show=forms.contentPageForm.Url.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Url")}}</small> <small class=error ng-show=forms.contentPageForm.Url.$error.pattern>{{getValidationMessage("ValidationMessages.FieldContentUrlInvalidFormat","GeneralFieldNames.Url")}}</small> <small class=error ng-show=forms.contentPageForm.Url.$error.server>{{serverMessages.GetMessage(\'Url\')}}</small></div></div></div><div class=form-group><label for=description class="col-md-3 control-label">Description</label><div class=col-md-9><div class=input-group data-ng-show=!descriptionExpanded><input name=Description class=form-control id=short placeholder=Description disabled data-ng-model=contentPage.Description required> <span class=input-group-btn><a data-ng-click="toogleEditorState(\'descriptionExpanded\')" class="btn btn-default">Expand</a></span></div><div class=toogle-editor data-ng-show=descriptionExpanded><a data-ng-click="toogleEditorState(\'descriptionExpanded\')" class="btn btn-default">Hide</a></div><div data-ng-show=descriptionExpanded text-angular data-ng-model=contentPage.Description></div><div class=error-container ng-show="forms.contentPageForm.submitted && forms.contentPageForm.Description.$invalid"><small class=error ng-show=forms.contentPageForm.Description.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Description")}}</small></div></div></div><span class=legend>SEO</span><div class=form-group><label for=meta_title class="col-md-3 control-label">Meta Title</label><div class=col-md-9><input class=form-control placeholder="Meta Title" data-ng-model=contentPage.Title></div></div><div class=form-group><label for=meta_description class="col-md-3 control-label">Meta Description</label><div class=col-md-9><textarea type=text class=form-control placeholder="Meta Description" rows=10 data-ng-model=contentPage.MetaDescription></textarea></div></div><span class=legend>Old Content Redirect</span><div class=form-group><label class="col-md-3 control-label">idpage</label><div class=col-md-9><input name=IdOld class=form-control placeholder=idpage numbers-only data-ng-model=contentPage.IdOld><div class=error-container ng-show="forms.contentPageForm.submitted && forms.contentPageForm.IdOld.$invalid"><small class=error ng-show=forms.contentPageForm.IdOld.$error.server>{{serverMessages.GetMessage(\'IdOld\')}}</small></div></div></div></fieldset></form></spinner-overlay></div></div></uib-tab><uib-tab heading=Categories><div class="container container-left"><div class="well row categories"><spinner-overlay data-loading=refreshTracker.active()><span class=legend>Categories</span> <button class="btn btn-info width-160px margin-bottom-10px" ui-sref="index.oneCol.manageContentPageCategories({mode:\'edit\', id: id})">Manage Categories</button> <button data-ng-if=!categoriesExpanded data-ng-click=updateCategoriesCollapsed(true); class="btn btn-primary btn-xs expand-button">Expand All</button> <button data-ng-if=categoriesExpanded data-ng-click=updateCategoriesCollapsed(false); class="btn btn-primary btn-xs expand-button">Collapse All</button><div ui-tree data-drag-enabled=false class=ya-treeview><ol ui-tree-nodes="" data-ng-model=rootCategory.SubItems><li ng-repeat="item in rootCategory.SubItems" ui-tree-node collapsed=true data-ng-include="\'app/modules/content/partials/contentCategories.html\'"></li></ol></div></spinner-overlay></div></div></uib-tab><uib-tab heading=Template><div class="container container-left"><div class="well row"><spinner-overlay data-loading=refreshTracker.active()><form class=form-horizontal><fieldset><div class=form-group><label for=masterTemplate class="col-md-3 control-label">Master Template</label><div class=col-md-9><select class=form-control name=MasterTemplate data-ng-model=contentPage.MasterContentItemId ng-options="master.Id as master.Name for master in masters"></select></div></div><button class="btn btn-info width-200px margin-bottom-10px" data-ng-if="validatePermission(7) && contentPage.MasterContentItemId!=0" data-ng-click=goToMaster(contentPage.MasterContentItemId);>Manage Master Template</button> <span class=legend>Manage Template</span><div class=form-group><div class=col-md-12><div data-ng-model=contentPage.Template ui-ace-ttl master-id=contentPage.MasterContentItemId></div></div></div></fieldset></form></spinner-overlay></div></div></uib-tab></uib-tabset></div></div></div></div>'),
a.put("app/modules/content/partials/contentPagesList.html",'<div class=container-fluid><div class=well><span class=legend>Manage Content</span><div class="row form-group"><div class=col-md-4><input class=form-control placeholder=Title data-ng-model=filter.Name></div></div><div class="row form-group"><div class=col-md-4><select class=form-control data-ng-model=filter.CategoryId ng-options="category.Id as category.Name for category in categories"></select></div></div><div class="row form-group"><div class=col-md-4><button class="btn btn-info" data-ng-click=filterContentPages(); type=button>Filter</button></div></div><hr><div class=form-group><button data-ng-click=open(); class="btn btn-primary">Add New Content</button> <button class="btn btn-info btn-right width-160px" ui-sref="index.oneCol.manageContentPageCategories({mode:\'list\'})">Manage Categories</button></div><spinner-overlay data-loading=refreshTracker.active()><table id=data-grid class="table table-striped table-hover"><thead><tr><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Title\')"><span>Title</span> <span data-ng-if="filter.Sorting.Path == \'Title\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Url\')"><span>URL</span> <span data-ng-if="filter.Sorting.Path == \'Url\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th>Category</th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Status\')"><span>Status</span> <span data-ng-if="filter.Sorting.Path == \'Status\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Updated\')"><span>Updated</span> <span data-ng-if="filter.Sorting.Path == \'Updated\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th>Actions</th></tr></thead><tbody><tr data-ng-repeat="contentPage in contentPages"><td><a ui-sref=index.oneCol.contentPageDetail({id:contentPage.Id})>{{::contentPage.Name}}</a></td><td>{{contentPage.Url}}</td><td><div data-ng-if="contentPage.Categories && contentPage.Categories.length>0"><div data-ng-repeat="category in contentPage.Categories">{{category}}</div></div><div data-ng-if="!contentPage.Categories || contentPage.Categories.length==0">No Categories</div></td><td><span data-ng-if="contentPage.Status == \'Draft\'" class="label label-draft font-default ng-binding ng-scope">{{contentPage.Status}}</span> <span data-ng-if="contentPage.Status == \'Published - All\'" class="label label-info font-default ng-binding ng-scope">{{contentPage.Status}}</span> <span data-ng-if="contentPage.Status == \'Published - Wholesale Only\'" class="label label-wholesale font-default">{{contentPage.Status}}</span></td><td>{{contentPage.Updated | date:"MM/dd/yy"}}<br>{{contentPage.Updated | date:"h:mm a"}}<br>{{contentPage.AgentId}}</td><td><button title=Edit class="btn btn-default btn-success btn-xs" data-ng-click=open(contentPage.Id);><i class="glyphicon glyphicon-edit"></i></button> <button title=Delete class="btn btn-default btn-danger btn-xs" ladda=deleteTracker.active() data-ng-click=delete(contentPage.Id);><i class="glyphicon glyphicon-remove"></i></button></td></tr></tbody></table><uib-pagination boundary-links=true total-items=totalItems items-per-page=filter.Paging.PageItemCount data-ng-model=filter.Paging.PageIndex previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; data-ng-change="pageChanged();scrollTo(\'data-grid\');"></uib-pagination></spinner-overlay></div></div>'),a.put("app/modules/content/partials/emailTemplateDetail.html",'<div class="container-fluid email-template-edit"><div class=left-pane-controls><div class="well container-fluid"><div><button class="btn btn-success width-160px" ladda=editTracker.active() data-ng-click=save()>Save</button></div><div class="btn-group margin-top-10px"><button cancel-button-default-state=index.oneCol.manageEmailTemplates cancel-button class="btn btn-default width-160px">Cancel</button></div><div class=margin-top-10px><button class="btn btn-primary width-160px" ui-sref=index.oneCol.manageEmailTemplates>Manage All</button></div></div><div ng-controller=objectHistorySectionController onload="name = \'History\'" data-ng-include="\'app/modules/setting/partials/objectHistorySection.html\'"></div></div><div class=right-pane-main><div class=container-fluid><div class=row><div class=container-fluid><div class="well row"><spinner-overlay data-loading=refreshTracker.active()><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.form.submitted}" novalidate><fieldset><span class=legend>Email Template Details</span><div class=form-group><label for="" class="col-md-3 control-label">Trigger</label><div class="col-md-9 form-control-static" data-ng-if=emailTemplate.Id><span>{{::emailTemplate.EmailDescription}}</span></div></div><div class=form-group><label for=masterTemplate class="col-md-3 control-label">Master Template</label><div class=col-md-6><select class=form-control name=MasterTemplate data-ng-model=emailTemplate.MasterContentItemId ng-options="master.Id as master.Name for master in masters"></select></div><button class="btn btn-info width-200px margin-bottom-10px" data-ng-if="validatePermission(14) && emailTemplate.MasterContentItemId!=0" data-ng-click=goToMaster(emailTemplate.MasterContentItemId);>Manage Master Template</button></div><div class=form-group><label for="" class="col-md-3 control-label">Place Holders</label><div class="col-md-9 form-control-static" data-ng-if=emailTemplate.Id><div data-ng-repeat="item in emailTemplate.ModelPropertyNames">@({{::item}})</div></div></div><div class=form-group><label for=title class="col-md-3 control-label">Subject</label><div class=col-md-9><input name=Name class=form-control placeholder=Subject data-ng-model=emailTemplate.Subject required><div class=error-container ng-show="forms.form.submitted && forms.form.Subject.$invalid"><small class=error ng-show=forms.form.Subject.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Subject")}}</small> <small class=error ng-show=forms.form.Subject.$error.server>{{serverMessages.GetMessage(\'Subject\')}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label">Template</label></div><div class=form-group><div class=col-md-12><div data-ng-model=emailTemplate.Template ui-ace-ttl master-id=emailTemplate.MasterContentItemId></div></div><div class=error-container ng-show="forms.form.submitted && forms.form.Template.$invalid"><small class=error ng-show=forms.form.Template.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Template")}}</small> <small class=error ng-show=forms.form.Template.$error.server>{{serverMessages.GetMessage(\'Template\')}}</small></div></div></fieldset></form></spinner-overlay></div></div></div></div></div></div>'),a.put("app/modules/content/partials/emailTemplatesList.html",'<div class=container-fluid><div class=well><span class=legend>Manage Email Templates</span><spinner-overlay data-loading=refreshTracker.active()><table id=data-grid class="table table-striped table-hover"><thead><tr><th>Subject</th><th>Trigger</th><th>Updated</th><th>Actions</th></tr></thead><tbody><tr data-ng-repeat="item in items"><td><a ui-sref=index.oneCol.emailTemplateDetail({id:item.Id})>{{::item.Subject}}</a></td><td>{{item.EmailDescription}}</td><td>{{item.Updated | date:"MM/dd/yy"}}<br>{{item.Updated | date:"h:mm a"}}<br>{{item.AgentId}}</td><td><a title=Edit class="btn btn-default btn-success btn-xs" ui-sref=index.oneCol.emailTemplateDetail({id:item.Id})><i class="glyphicon glyphicon-edit"></i></a></td></tr></tbody></table><uib-pagination boundary-links=true total-items=totalItems items-per-page=filter.Paging.PageItemCount data-ng-model=filter.Paging.PageIndex previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; data-ng-change="pageChanged();scrollTo(\'data-grid\');"></uib-pagination></spinner-overlay></div></div>'),a.put("app/modules/content/partials/errorDetails.html",'<div class=modal-header><h3 class=modal-title>Error Details</h3></div><div class=modal-body><h4>{{::error.Error}}</h4><div data-ng-if=error.Exception>{{::error.Exception.Message}}<p class=text-break-message>{{::error.Exception.StackTrace}}</p></div></div><div class=modal-footer><button class="btn btn-default" data-ng-click=cancel()>Close</button></div>'),a.put("app/modules/content/partials/faqCategoriesTreeView.html",'<div class=container-fluid><div class=left-pane-controls><div class="well container-fluid"><div><button class="btn btn-success width-160px" ladda=editTracker.active() data-ng-click=save()>Save</button></div><div class="btn-group margin-top-10px"><button class="btn btn-default width-160px" data-ng-click=cancel()>Cancel</button></div></div></div><div class=right-pane-main><div class=container-fluid><div class=row><div class="container container-left"><div class="well row categories"><spinner-overlay data-loading=refreshTracker.active()><span class=legend>Manage FAQ Categories</span> <a class="btn btn-success btn-xs" title=Add nodrag data-ng-click=add(rootCategory.Id)><i class="glyphicon glyphicon-plus"></i></a> <button data-ng-if=!categoriesExpanded data-ng-click=updateCategoriesCollapsed(true); class="btn btn-primary btn-xs expand-button">Expand All</button> <button data-ng-if=categoriesExpanded data-ng-click=updateCategoriesCollapsed(false); class="btn btn-primary btn-xs expand-button">Collapse All</button><div ui-tree class=ya-treeview><ol ui-tree-nodes data-ng-model=rootCategory.SubItems><li ng-repeat="item in rootCategory.SubItems" ui-tree-node data-ng-include="\'app/modules/content/partials/contentCategoriesReordering.html\'"></li></ol></div></spinner-overlay></div></div></div></div></div></div>'),a.put("app/modules/content/partials/faqCategoryDetail.html",'<div class=container-fluid><div class=left-pane-controls><div class="well container-fluid"><div><button class="btn btn-success width-160px" ladda=editTracker.active() data-ng-click=save()>Save</button></div><div class="btn-group margin-top-10px"><a target=_blank href={{previewUrl}} data-ng-if=previewUrl class="btn btn-info width-80px">Preview</a> <a data-ng-if=!previewUrl class="btn btn-info width-80px">Preview</a> <button cancel-button-default-state=index.oneCol.manageFaqCategories cancel-button class="btn btn-default width-80px">Cancel</button></div><div class=margin-top-10px><button ui-sref=index.oneCol.manageFaqCategories class="btn btn-primary width-160px">Manage All</button></div></div><div ng-controller=objectHistorySectionController onload="name = \'History\'" data-ng-include="\'app/modules/setting/partials/objectHistorySection.html\'"></div></div><div class=right-pane-main><div class=container-fluid><div class=row><uib-tabset><uib-tab heading=Details active=detailsTab.active><div class="container container-left"><div class="well row"><spinner-overlay data-loading=refreshTracker.active()><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.form.submitted}" novalidate><fieldset><span class=legend>FAQ Category Details</span><div class=form-group><label for=name class="col-md-3 control-label">Name</label><div class=col-md-9><input name=Name class=form-control placeholder=Name data-ng-model=faqCategory.Name required><div class=error-container ng-show="forms.form.submitted && forms.form.Name.$invalid"><small class=error ng-show=forms.form.Name.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Name")}}</small></div></div></div><div class=form-group><label for=url class="col-md-3 control-label">URL</label><div class=col-md-9><input name=Url class=form-control placeholder=URL data-ng-model=faqCategory.Url ng-pattern="/^[A-Za-z0-9]{1}[A-Za-z0-9-_]{3}[A-Za-z0-9-_]*$/" required><div class=error-container ng-show="forms.form.submitted && forms.form.Url.$invalid"><small class=error ng-show=forms.form.Url.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Url")}}</small> <small class=error ng-show=forms.form.Url.$error.pattern>{{getValidationMessage("ValidationMessages.FieldContentUrlInvalidFormat","GeneralFieldNames.Url")}}</small> <small class=error ng-show=forms.form.Url.$error.server>{{serverMessages.GetMessage(\'Url\')}}</small></div></div></div><span class=legend>SEO</span><div class=form-group><label for=meta_title class="col-md-3 control-label">Meta Title</label><div class=col-md-9><input class=form-control placeholder="Meta Title" data-ng-model=faqCategory.Title></div></div><div class=form-group><label for=meta_description class="col-md-3 control-label">Meta Description</label><div class=col-md-9><textarea type=text class=form-control placeholder="Meta Description" rows=10 data-ng-model=faqCategory.MetaDescription></textarea></div></div></fieldset></form></spinner-overlay></div></div></uib-tab><uib-tab heading=Template><div class="container container-left"><div class="well row"><spinner-overlay data-loading=refreshTracker.active()><form class=form-horizontal><fieldset><div data-ng-if=validatePermission(7) class=form-group><label for=masterTemplate class="col-md-3 control-label">Master Template</label><div class=col-md-9><select class=form-control name=MasterTemplate data-ng-model=faqCategory.MasterContentItemId ng-options="master.Id as master.Name for master in masters"></select></div></div><button class="btn btn-info width-200px margin-bottom-10px" data-ng-if="validatePermission(7) && faqCategory.MasterContentItemId!=0" data-ng-click=goToMaster(faqCategory.MasterContentItemId);>Manage Master Template</button> <span class=legend>Manage Template</span><div class=form-group><div class=col-md-12><div data-ng-model=faqCategory.Template ui-ace-ttl master-id=faqCategory.MasterContentItemId></div></div></div></fieldset></form></spinner-overlay></div></div></uib-tab></uib-tabset></div></div></div></div>'),a.put("app/modules/content/partials/faqDetail.html",'<div class=container-fluid><div class=left-pane-controls><div class="well container-fluid"><div><button class="btn btn-success width-160px" ladda=editTracker.active() data-ng-click=save()>Save</button></div><div class="btn-group margin-top-10px"><a target=_blank href={{previewUrl}} data-ng-if=previewUrl class="btn btn-info width-80px">Preview</a> <a data-ng-if=!previewUrl class="btn btn-info width-80px">Preview</a> <button cancel-button-default-state=index.oneCol.manageFaqs cancel-button class="btn btn-default width-80px">Cancel</button></div><div class=margin-top-10px><button class="btn btn-primary width-160px" ui-sref=index.oneCol.manageFaqs>Manage All</button></div></div><div ng-controller=objectHistorySectionController onload="name = \'History\'" data-ng-include="\'app/modules/setting/partials/objectHistorySection.html\'"></div></div><div class=right-pane-main><div class=container-fluid><div class=row><uib-tabset><uib-tab heading=Details active=detailsTab.active><div class="container container-left"><div class="well row"><spinner-overlay data-loading=refreshTracker.active()><form class=form-horizontal name=forms.faqForm data-ng-submit=save() data-ng-class="{submitted: forms.faqForm.submitted}" novalidate><fieldset><span class=legend>FAQ Details</span><div class=form-group><label for=title class="col-md-3 control-label">Title</label><div class=col-md-9><input name=Name class=form-control placeholder=Title data-ng-model=faq.Name required><div class=error-container ng-show="forms.faqForm.submitted && forms.faqForm.Name.$invalid"><small class=error ng-show=forms.faqForm.Name.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Name")}}</small></div></div></div><div class=form-group><label for=url class="col-md-3 control-label">URL</label><div class=col-md-9><input name=Url class=form-control placeholder=URL data-ng-model=faq.Url ng-pattern="/^[A-Za-z0-9]{1}[A-Za-z0-9-_]{3}[A-Za-z0-9-_]*$/" required><div class=error-container ng-show="forms.faqForm.submitted && forms.faqForm.Url.$invalid"><small class=error ng-show=forms.faqForm.Url.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Url")}}</small> <small class=error ng-show=forms.faqForm.Url.$error.pattern>{{getValidationMessage("ValidationMessages.FieldContentUrlInvalidFormat","GeneralFieldNames.Url")}}</small> <small class=error ng-show=forms.faqForm.Url.$error.server>{{serverMessages.GetMessage(\'Url\')}}</small></div></div></div><div class=form-group><label for=description class="col-md-3 control-label">Description</label><div class=col-md-9><div class=input-group data-ng-show=!descriptionExpanded><input name=Description class=form-control id=short placeholder=Description disabled data-ng-model=faq.Description required> <span class=input-group-btn><a data-ng-click="toogleEditorState(\'descriptionExpanded\')" class="btn btn-default">Expand</a></span></div><div class=toogle-editor data-ng-show=descriptionExpanded><a data-ng-click="toogleEditorState(\'descriptionExpanded\')" class="btn btn-default">Hide</a></div><div data-ng-show=descriptionExpanded text-angular data-ng-model=faq.Description></div><div class=error-container ng-show="forms.faqForm.submitted && forms.faqForm.Description.$invalid"><small class=error ng-show=forms.faqForm.Description.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Description")}}</small></div></div></div><span class=legend>SEO</span><div class=form-group><label for=meta_title class="col-md-3 control-label">Meta Title</label><div class=col-md-9><input class=form-control placeholder="Meta Title" data-ng-model=faq.Title></div></div><div class=form-group><label for=meta_description class="col-md-3 control-label">Meta Description</label><div class=col-md-9><textarea type=text class=form-control placeholder="Meta Description" rows=10 data-ng-model=faq.MetaDescription></textarea></div></div></fieldset></form></spinner-overlay></div></div></uib-tab><uib-tab heading=Categories><div class="container container-left"><div class="well row categories"><spinner-overlay data-loading=refreshTracker.active()><span class=legend>Categories</span> <button class="btn btn-info width-160px margin-bottom-10px" ui-sref="index.oneCol.manageFaqCategories({mode:\'edit\', id: id})">Manage Categories</button> <button data-ng-if=!categoriesExpanded data-ng-click=updateCategoriesCollapsed(true); class="btn btn-primary btn-xs expand-button">Expand All</button> <button data-ng-if=categoriesExpanded data-ng-click=updateCategoriesCollapsed(false); class="btn btn-primary btn-xs expand-button">Collapse All</button><div ui-tree data-drag-enabled=false class=ya-treeview><ol ui-tree-nodes="" data-ng-model=rootCategory.SubItems><li ng-repeat="item in rootCategory.SubItems" ui-tree-node collapsed=true data-ng-include="\'app/modules/content/partials/contentCategories.html\'"></li></ol></div></spinner-overlay></div></div></uib-tab><uib-tab heading=Template><div class="container container-left"><div class="well row"><spinner-overlay data-loading=refreshTracker.active()><div data-ng-if=validatePermission(7) class=form-group><label for=masterTemplate class="col-md-3 control-label">Master Template</label><div class=col-md-9><select class=form-control name=MasterTemplate data-ng-model=faq.MasterContentItemId ng-options="master.Id as master.Name for master in masters"></select></div></div><button class="btn btn-info width-200px margin-bottom-10px" data-ng-if="validatePermission(7) && faq.MasterContentItemId!=0" data-ng-click=goToMaster(faq.MasterContentItemId);>Manage Master Template</button> <span class=legend>Manage Template</span><div class=form-group><div class=col-md-12><div data-ng-model=faq.Template ui-ace-ttl master-id=faq.MasterContentItemId></div></div></div></spinner-overlay></div></div></uib-tab></uib-tabset></div></div></div></div>'),a.put("app/modules/content/partials/faqsList.html",'<div class=container-fluid><div class=well><span class=legend>Manage FAQs</span><div class="row form-group"><div class=col-md-4><input class=form-control placeholder=Title data-ng-model=filter.Name></div></div><div class="row form-group"><div class=col-md-4><select class=form-control data-ng-model=filter.CategoryId ng-options="category.Id as category.Name for category in categories"></select></div></div><div class="row form-group"><div class=col-md-4><button class="btn btn-info" data-ng-click=filterFaqs(); type=button>Filter</button></div></div><hr><div class=form-group><button data-ng-click=open(); class="btn btn-primary">Add New FAQ</button> <button class="btn btn-info btn-right width-160px" ui-sref="index.oneCol.manageFaqCategories({mode:\'list\'})">Manage Categories</button></div><spinner-overlay data-loading=refreshTracker.active()><table id=data-grid class="table table-striped table-hover"><thead><tr><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Title\')"><span>Title</span> <span data-ng-if="filter.Sorting.Path == \'Title\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Url\')"><span>URL</span> <span data-ng-if="filter.Sorting.Path == \'Url\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th>Category</th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Updated\')"><span>Updated</span> <span data-ng-if="filter.Sorting.Path == \'Updated\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th>Actions</th></tr></thead><tbody><tr data-ng-repeat="faq in faqs"><td><a ui-sref=index.oneCol.faqDetail({id:faq.Id})>{{::faq.Name}}</a></td><td>{{faq.Url}}</td><td><div data-ng-if="faq.Categories && faq.Categories.length>0"><div data-ng-repeat="category in faq.Categories">{{category}}</div></div><div data-ng-if="!faq.Categories || faq.Categories.length==0">No Categories</div></td><td>{{faq.Updated | date:"MM/dd/yy"}}<br>{{faq.Updated | date:"h:mm a"}}<br>{{faq.AgentId}}</td><td><button title=Edit class="btn btn-default btn-success btn-xs" data-ng-click=open(faq.Id);><i class="glyphicon glyphicon-edit"></i></button> <button title=Delete class="btn btn-default btn-danger btn-xs" ladda=deleteTracker.active() data-ng-click=delete(faq.Id);><i class="glyphicon glyphicon-remove"></i></button></td></tr></tbody></table></spinner-overlay><uib-pagination boundary-links=true total-items=totalItems items-per-page=filter.Paging.PageItemCount data-ng-model=filter.Paging.PageIndex previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; data-ng-change="pageChanged();scrollTo(\'data-grid\');"></uib-pagination></div></div>'),a.put("app/modules/content/partials/masterDetail.html",'<div class=container-fluid><div class=left-pane-controls><div class="well container-fluid"><div><button class="btn btn-success width-160px" ladda=editTracker.active() data-ng-click=save()>Save</button></div><div class="btn-group margin-top-10px"><button cancel-button-default-state=index.oneCol.manageMasters cancel-button class="btn btn-default width-160px" data-ng-click=cancel()>Cancel</button></div><div class=margin-top-10px><button class="btn btn-primary width-160px" ui-sref=index.oneCol.manageMasters>Manage All</button></div></div><div ng-controller=objectHistorySectionController onload="name = \'History\'" data-ng-include="\'app/modules/setting/partials/objectHistorySection.html\'"></div></div><div class=right-pane-main><spinner-overlay data-loading=refreshTracker.active()><div class=container-fluid><div class=row><uib-tabset><uib-tab heading=Details active=detailsTab.active><div class="container container-left"><div class="well row"><spinner-overlay data-loading=refreshTracker.active()><form class=form-horizontal name=forms.masterForm data-ng-submit=save() data-ng-class="{submitted: forms.masterForm.submitted}" novalidate><fieldset><span class=legend>Master Template Details</span><div class=form-group><label for=name class="col-md-3 control-label">Name</label><div class=col-md-9><input name=Name class=form-control placeholder=Name data-ng-model=master.Name required><div class=error-container ng-show="forms.masterForm.submitted && forms.masterForm.Name.$invalid"><small class=error ng-show=forms.masterForm.Name.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Name")}}</small></div></div></div><div class=form-group><label for=type class="col-md-3 control-label">Type</label><div class=col-md-9><select class=form-control name=Type ng-disabled=id data-ng-model=master.Type ng-options="type.Key as type.Text for type in types"></select></div></div><div class=form-group><label for=is_default class="col-md-3 control-label">Is Default</label><div class=col-md-9><div class=checkbox><label><input type=checkbox name=IsDefault placeholder="Is Default" checked ng-disabled="IsDefaultInDB && id" data-ng-model="master.IsDefault"></label></div></div></div></fieldset></form></spinner-overlay></div></div></uib-tab><uib-tab heading=Template><div class="container container-left"><div class="well row"><spinner-overlay data-loading=refreshTracker.active()><form class=form-horizontal><fieldset><span class=legend>Manage Template</span><div class=form-group><div class=col-md-12><div data-ng-model=master.Template ui-ace-ttl></div></div></div></fieldset></form></spinner-overlay></div></div></uib-tab><uib-tab heading=Processors><div class="container container-left"><div class="well row"><spinner-overlay data-loading=refreshTracker.active()><form class=form-horizontal><fieldset><span class=legend>Manage Processors</span><div ng-repeat="processor in processors"><div class=checkbox><label><input data-ng-model=processor.IsSelected type=checkbox>{{processor.Name}}</label></div></div></fieldset></form></spinner-overlay></div></div></uib-tab></uib-tabset></div></div></spinner-overlay></div></div>'),a.put("app/modules/content/partials/mastersList.html",'<div class=container-fluid><div class=well><span class=legend>Manage Master Templates</span><div class="row form-group"><div class=col-md-4><select class=form-control data-ng-model=filter.Type ng-options="type.Key as type.Text for type in types"></select></div></div><div class="row form-group"><div class=col-md-4><button class="btn btn-info" data-ng-click=filterMasters(); type=button>Filter</button></div></div><hr><div class=form-group><button data-ng-click=open(); class="btn btn-primary">Add New Master Template</button></div><spinner-overlay data-loading=refreshTracker.active()><table class="table table-striped table-hover"><thead><tr><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Name\')"><span>Name</span> <span data-ng-if="filter.Sorting.Path == \'Name\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Type\')"><span>Type</span> <span data-ng-if="filter.Sorting.Path == \'Type\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Updated\')"><span>Updated</span> <span data-ng-if="filter.Sorting.Path == \'Updated\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th>Is Default</th><th>Actions</th></tr></thead><tbody><tr data-ng-repeat="master in masters"><td><a ui-sref=index.oneCol.masterDetail({id:master.Id})>{{::master.Name}}</a></td><td>{{master.TypeName}}</td><td>{{master.Updated | date:"MM/dd/yy"}}<br>{{master.Updated | date:"h:mm a"}}<br>{{master.AgentId}}</td><td><div class=checkbox><label><input type=checkbox data-ng-checked={{master.IsDefault}} disabled></label></div></td><td><button title=Edit class="btn btn-default btn-success btn-xs" data-ng-click=open(master.Id);><i class="glyphicon glyphicon-edit"></i></button> <button title=Delete class="btn btn-default btn-danger btn-xs" ladda=deleteTracker.active() data-ng-click=delete(master.Id);><i class="glyphicon glyphicon-remove"></i></button></td></tr></tbody></table></spinner-overlay></div></div>'),a.put("app/modules/content/partials/recipeCategoriesTreeView.html",'<div class=container-fluid><div class=left-pane-controls><div class="well container-fluid"><div><button class="btn btn-success width-160px" ladda=editTracker.active() data-ng-click=save()>Save</button></div><div class="btn-group margin-top-10px"><button class="btn btn-default width-160px" data-ng-click=cancel()>Cancel</button></div></div></div><div class=right-pane-main><div class=container-fluid><div class=row><div class="container container-left"><div class="well row categories"><spinner-overlay data-loading=refreshTracker.active()><span class=legend>Manage Recipe Categories</span> <a class="btn btn-success btn-xs" title=Add nodrag data-ng-click=add(rootCategory.Id)><i class="glyphicon glyphicon-plus"></i></a> <button data-ng-if=!categoriesExpanded data-ng-click=updateCategoriesCollapsed(true); class="btn btn-primary btn-xs expand-button">Expand All</button> <button data-ng-if=categoriesExpanded data-ng-click=updateCategoriesCollapsed(false); class="btn btn-primary btn-xs expand-button">Collapse All</button><div ui-tree class=ya-treeview><ol ui-tree-nodes data-ng-model=rootCategory.SubItems><li ng-repeat="item in rootCategory.SubItems" ui-tree-node data-ng-include="\'app/modules/content/partials/contentCategoriesReordering.html\'"></li></ol></div></spinner-overlay></div></div></div></div></div></div>'),a.put("app/modules/content/partials/recipeCategoryDetail.html",'<div class=container-fluid><div class=left-pane-controls><div class="well container-fluid"><div><button class="btn btn-success width-160px" ladda=editTracker.active() data-ng-click=save()>Save</button></div><div class="btn-group margin-top-10px"><a target=_blank href={{previewUrl}} data-ng-if=previewUrl class="btn btn-info width-80px">Preview</a> <a data-ng-if=!previewUrl class="btn btn-info width-80px">Preview</a> <button cancel-button-default-state=index.oneCol.manageRecipeCategories cancel-button class="btn btn-default width-80px">Cancel</button></div><div class=margin-top-10px><button ui-sref=index.oneCol.manageRecipeCategories class="btn btn-primary width-160px">Manage All</button></div></div><div ng-controller=objectHistorySectionController onload="name = \'History\'" data-ng-include="\'app/modules/setting/partials/objectHistorySection.html\'"></div></div><div class=right-pane-main><div class=container-fluid><div class=row><uib-tabset><uib-tab heading=Details active=detailsTab.active><div class="container container-left"><div class="well row"><spinner-overlay data-loading=refreshTracker.active()><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.form.submitted}" novalidate><fieldset><span class=legend>Recipe Category Details</span><div class=form-group><label for=name class="col-md-3 control-label">Name</label><div class=col-md-9><input name=Name class=form-control placeholder=Name data-ng-model=recipeCategory.Name required><div class=error-container ng-show="forms.form.submitted && forms.form.Name.$invalid"><small class=error ng-show=forms.form.Name.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Name")}}</small></div></div></div><div class=form-group><label for=url class="col-md-3 control-label">URL</label><div class=col-md-9><input name=Url class=form-control placeholder=URL data-ng-model=recipeCategory.Url ng-pattern="/^[A-Za-z0-9]{1}[A-Za-z0-9-_]{3}[A-Za-z0-9-_]*$/" required><div class=error-container ng-show="forms.form.submitted && forms.form.Url.$invalid"><small class=error ng-show=forms.form.Url.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Url")}}</small> <small class=error ng-show=forms.form.Url.$error.pattern>{{getValidationMessage("ValidationMessages.FieldContentUrlInvalidFormat","GeneralFieldNames.Url")}}</small> <small class=error ng-show=forms.form.Url.$error.server>{{serverMessages.GetMessage(\'Url\')}}</small></div></div></div><span class=legend>SEO</span><div class=form-group><label for=meta_title class="col-md-3 control-label">Meta Title</label><div class=col-md-9><input class=form-control placeholder="Meta Title" data-ng-model=recipeCategory.Title></div></div><div class=form-group><label for=meta_description class="col-md-3 control-label">Meta Description</label><div class=col-md-9><textarea type=text class=form-control placeholder="Meta Description" rows=10 data-ng-model=recipeCategory.MetaDescription></textarea></div></div></fieldset></form></spinner-overlay></div></div></uib-tab><uib-tab heading=Template><div class="container container-left"><div class="well row"><spinner-overlay data-loading=refreshTracker.active()><form class=form-horizontal><fieldset><div data-ng-if=validatePermission(7) class=form-group><label for=masterTemplate class="col-md-3 control-label">Master Template</label><div class=col-md-9><select class=form-control name=MasterTemplate data-ng-model=recipeCategory.MasterContentItemId ng-options="master.Id as master.Name for master in masters"></select></div></div><button class="btn btn-info width-200px margin-bottom-10px" data-ng-if="validatePermission(7) && recipeCategory.MasterContentItemId!=0" data-ng-click=goToMaster(recipeCategory.MasterContentItemId);>Manage Master Template</button> <span class=legend>Manage Template</span><div class=form-group><div class=col-md-12><div data-ng-model=recipeCategory.Template ui-ace-ttl master-id=recipeCategory.MasterContentItemId></div></div></div></fieldset></form></spinner-overlay></div></div></uib-tab></uib-tabset></div></div></div></div>'),
a.put("app/modules/content/partials/recipeDetail.html",'<div class=container-fluid><div class=left-pane-controls><div class="well container-fluid"><div><button class="btn btn-success width-160px" ladda=editTracker.active() data-ng-click=save()>Save</button></div><div class="btn-group margin-top-10px"><a target=_blank href={{previewUrl}} data-ng-if=previewUrl class="btn btn-info width-80px">Preview</a> <a data-ng-if=!previewUrl class="btn btn-info width-80px">Preview</a> <button cancel-button-default-state=index.oneCol.manageRecipes cancel-button class="btn btn-default width-80px">Cancel</button></div><div class=margin-top-10px><button class="btn btn-primary width-160px" ui-sref=index.oneCol.manageRecipes>Manage All</button></div></div><div ng-controller=objectHistorySectionController onload="name = \'History\'" data-ng-include="\'app/modules/setting/partials/objectHistorySection.html\'"></div></div><div class=right-pane-main><div class=container-fluid><div class=row><uib-tabset active=options.activeTabIndex><uib-tab heading=Details index=detailsTab.index><div class="container container-left"><div class="well row"><spinner-overlay data-loading=refreshTracker.active()><form class=form-horizontal name=forms.recipeForm data-ng-submit=save() data-ng-class="{submitted: forms.recipeForm.submitted}" novalidate><fieldset><span class=legend>Recipe Details</span><div class=form-group><label for=title class="col-md-3 control-label">Title</label><div class=col-md-9><input name=Name class=form-control placeholder=Title data-ng-model=recipe.Name required><div class=error-container ng-show="forms.recipeForm.submitted && forms.recipeForm.Name.$invalid"><small class=error ng-show=forms.recipeForm.Name.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Title")}}</small></div></div></div><div class=form-group><label for=subtitle class="col-md-3 control-label">Subtitle</label><div class=col-md-9><input name=Subtitle class=form-control placeholder=Subtitle data-ng-model=recipe.Subtitle><div class=error-container ng-show="forms.recipeForm.submitted && forms.recipeForm.Subtitle.$invalid"><small class=error ng-show=forms.recipeForm.Subtitle.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Subtitle")}}</small></div></div></div><div class=form-group><label for=url class="col-md-3 control-label">URL</label><div class=col-md-9><input name=Url class=form-control placeholder=URL data-ng-model=recipe.Url ng-pattern="/^[A-Za-z0-9]{1}[A-Za-z0-9-_]{3}[A-Za-z0-9-_]*$/" required><div class=error-container ng-show="forms.recipeForm.submitted && forms.recipeForm.Url.$invalid"><small class=error ng-show=forms.recipeForm.Url.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Url")}}</small> <small class=error ng-show=forms.recipeForm.Url.$error.pattern>{{getValidationMessage("ValidationMessages.FieldContentUrlInvalidFormat","GeneralFieldNames.Url")}}</small> <small class=error ng-show=forms.recipeForm.Url.$error.server>{{serverMessages.GetMessage(\'Url\')}}</small></div></div></div><div class=form-group><label class="control-label col-md-3">Video Image</label><div class=col-md-9><filefield name=YoutubeImage placeholder="Video Image" ng-model=recipe.YoutubeImage></filefield><div class=error-container ng-show="forms.recipeForm.submitted && forms.recipeForm.YoutubeImage.$invalid"><small class=error ng-show=forms.recipeForm.YoutubeImage.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Video Image")}}</small></div></div></div><div class=form-group><label class="control-label col-md-3">Video</label><div class=col-md-9><div class=input-group><input name=YoutubeVideo class=form-control placeholder=Video data-ng-model=recipe.YoutubeVideo> <span class=input-group-btn><a target=_blank data-ng-href="{{recipe.YoutubeVideo ? youTubeBaseUrl.format(recipe.YoutubeVideo) : \'\'}}" class="btn btn-default"><i class="glyphicon glyphicon-eye-open"></i></a></span></div><div class=error-container ng-show="forms.recipeForm.submitted && forms.recipeForm.YoutubeVideo.$invalid"><small class=error ng-show=forms.recipeForm.YoutubeVideo.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Video")}}</small> <small class=error ng-show=forms.recipeForm.YoutubeVideo.$error.server>{{serverMessages.GetMessage(\'YoutubeVideo\')}}</small></div></div></div><div class=form-group><label for=description class="col-md-3 control-label">Description</label><div class=col-md-9><div class=input-group data-ng-show=!descriptionExpanded><input name=Description class=form-control id=short placeholder=Description disabled data-ng-model=recipe.Description required> <span class=input-group-btn><a data-ng-click="toogleEditorState(\'descriptionExpanded\')" class="btn btn-default">Expand</a></span></div><div class=toogle-editor data-ng-show=descriptionExpanded><a data-ng-click="toogleEditorState(\'descriptionExpanded\')" class="btn btn-default">Hide</a></div><div data-ng-show=descriptionExpanded text-angular data-ng-model=recipe.Description></div><div class=error-container ng-show="forms.recipeForm.submitted && forms.recipeForm.Description.$invalid"><small class=error ng-show=forms.recipeForm.Description.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Description")}}</small></div></div></div><div class=form-group><label for=AboutChef class="col-md-3 control-label">About Chef</label><div class=col-md-9><div class=input-group data-ng-show=!AboutChefExpanded><input name=AboutChef class=form-control placeholder="About Chef" disabled data-ng-model=recipe.AboutChef> <span class=input-group-btn><a data-ng-click="toogleEditorState(\'AboutChefExpanded\')" class="btn btn-default">Expand</a></span></div><div class=toogle-editor data-ng-show=AboutChefExpanded><a data-ng-click="toogleEditorState(\'AboutChefExpanded\')" class="btn btn-default">Hide</a></div><div data-ng-show=AboutChefExpanded text-angular data-ng-model=recipe.AboutChef></div></div></div><div class=form-group><label for=Ingredients class="col-md-3 control-label">Ingredients</label><div class=col-md-9><div class=input-group data-ng-show=!IngredientsExpanded><input name=Ingredients class=form-control placeholder=Ingredients disabled data-ng-model=recipe.Ingredients> <span class=input-group-btn><a data-ng-click="toogleEditorState(\'IngredientsExpanded\')" class="btn btn-default">Expand</a></span></div><div class=toogle-editor data-ng-show=IngredientsExpanded><a data-ng-click="toogleEditorState(\'IngredientsExpanded\')" class="btn btn-default">Hide</a></div><div data-ng-show=IngredientsExpanded text-angular data-ng-model=recipe.Ingredients></div></div></div><div class=form-group><label for=Directions class="col-md-3 control-label">Directions</label><div class=col-md-9><div class=input-group data-ng-show=!DirectionsExpanded><input name=Directions class=form-control placeholder=Directions disabled data-ng-model=recipe.Directions> <span class=input-group-btn><a data-ng-click="toogleEditorState(\'DirectionsExpanded\')" class="btn btn-default">Expand</a></span></div><div class=toogle-editor data-ng-show=DirectionsExpanded><a data-ng-click="toogleEditorState(\'DirectionsExpanded\')" class="btn btn-default">Hide</a></div><div data-ng-show=DirectionsExpanded text-angular data-ng-model=recipe.Directions></div></div></div><div class=form-group><label for=Image class="col-md-3 control-label">Image</label><div class=col-md-9><filefield name=Image placeholder=Image ng-model=recipe.FileUrl></filefield></div></div><span class=legend>SEO</span><div class=form-group><label for=meta_title class="col-md-3 control-label">Meta Title</label><div class=col-md-9><input class=form-control placeholder="Meta Title" data-ng-model=recipe.Title></div></div><div class=form-group><label for=meta_description class="col-md-3 control-label">Meta Description</label><div class=col-md-9><textarea type=text class=form-control placeholder="Meta Description" rows=10 data-ng-model=recipe.MetaDescription></textarea></div></div></fieldset></form></spinner-overlay></div></div></uib-tab><uib-tab heading=Categories index=11><div class="container container-left"><div class="well row categories"><spinner-overlay data-loading=refreshTracker.active()><span class=legend>Categories</span> <button class="btn btn-info width-160px margin-bottom-10px" ui-sref="index.oneCol.manageRecipeCategories({mode:\'edit\', id: id})">Manage Categories</button> <button data-ng-if=!categoriesExpanded data-ng-click=updateCategoriesCollapsed(true); class="btn btn-primary btn-xs expand-button">Expand All</button> <button data-ng-if=categoriesExpanded data-ng-click=updateCategoriesCollapsed(false); class="btn btn-primary btn-xs expand-button">Collapse All</button><div ui-tree data-drag-enabled=false class=ya-treeview><ol ui-tree-nodes="" data-ng-model=rootCategory.SubItems><li ng-repeat="item in rootCategory.SubItems" ui-tree-node collapsed=true data-ng-include="\'app/modules/content/partials/contentCategories.html\'"></li></ol></div></spinner-overlay></div></div></uib-tab><uib-tab heading=Products index=12><div class="container container-left big-container"><div class="well row"><spinner-overlay data-loading=refreshTracker.active()><span class=legend>Assigned Products</span><table class="table table-striped table-hover"><thead><tr><th>Name</th><th></th></tr></thead><tbody><tr data-ng-repeat="item in recipe.RecipesToProducts"><td>{{item.ShortProductInfo.ProductName}}</td><td><button class="btn btn-xs btn-default btn-danger" data-ng-click=deleteRecipesToProducts($index);>Delete</button></td></tr></tbody></table><div ng-controller=productsSearchController onload="name = \'RecipesToProducts\'" data-ng-include="\'app/modules/product/partials/productsSearchList.html\'"></div></spinner-overlay></div></div></uib-tab><uib-tab heading=Template index=13><div class="container container-left"><div class="well row"><spinner-overlay data-loading=refreshTracker.active()><div data-ng-if=validatePermission(7) class=form-group><label for=masterTemplate class="col-md-3 control-label">Master Template</label><div class=col-md-9><select class=form-control name=MasterTemplate data-ng-model=recipe.MasterContentItemId ng-options="master.Id as master.Name for master in masters"></select></div></div><button class="btn btn-info width-200px margin-bottom-10px" data-ng-if="validatePermission(7) && recipe.MasterContentItemId!=0" data-ng-click=goToMaster(recipe.MasterContentItemId);>Manage Master Template</button> <span class=legend>Manage Template</span><div class=form-group><div class=col-md-12><div data-ng-model=recipe.Template ui-ace-ttl master-id=recipe.MasterContentItemId></div></div></div></spinner-overlay></div></div></uib-tab><uib-tab heading="Cross Sell Products & Related Recipes" index=crossSellProductsAndVideosTab.index><div class="container container-left"><div class="well row"><spinner-overlay data-loading=refreshTracker.active()><span class=legend>Cross Sell Products</span><form name=forms.CrossSellRecipes data-ng-submit=save() data-ng-class="{submitted: forms.crossessubmitted}" novalidate><div class="panel-group sortable-accordion"><div data-ng-model=recipe.CrossSellRecipes><div data-ng-repeat="crossSellRecipe in recipe.CrossSellRecipes" class="panel panel-default"><div class=form-horizontal ng-form=i{{$index}}><fieldset><div class=panel-heading><h4 class=panel-title><div class=accordion-toggle><div class=form-horizontal><div class=row><div class=col-md-12><div class="fixed-accordion-row extra-spacing one-line" data-ng-click=$event.stopPropagation()><label class=control-label>Image</label><div class=col-md-1 data-ng-if=crossSellRecipe.InUse><filefield name=Image placeholder="Cross Sell Image" ng-model=crossSellRecipe.Image required></filefield><div class=error-container ng-show="forms.crossessubmitted && forms.CrossSellRecipes.i{{$index}}.Image.$invalid"><small class=error ng-show=forms.CrossSellRecipes.i{{$index}}.Image.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Image")}}</small></div></div><div class=col-md-1 data-ng-if=!crossSellRecipe.InUse><filefield name=DefaultImage placeholder="Cross Sell Image" ng-model="recipeDefaults[\'CrossSellImage\'+($index+1)]" disabled></filefield></div></div><div class="fixed-accordion-row pull-right" data-ng-click=$event.stopPropagation()><button data-ng-if=!crossSellRecipe.InUse class="btn btn-info width-80px" data-ng-click=setCustom(crossSellRecipe)>Set</button> <button data-ng-if=crossSellRecipe.InUse class="btn btn-info width-80px" data-ng-click=removeCustom(crossSellRecipe)>Remove</button></div></div></div><div class=row><div class=col-md-11><div class="fixed-accordion-row extra-spacing one-line" data-ng-click=$event.stopPropagation()><label class=control-label>Title</label><div class=col-md-1 data-ng-if=crossSellRecipe.InUse><input name=Title class=form-control placeholder="Cross Sell Title" data-ng-model=crossSellRecipe.Title required><div class=error-container ng-show="forms.crossessubmitted && forms.CrossSellRecipes.i{{$index}}.Title.$invalid"><small class=error ng-show=forms.CrossSellRecipes.i{{$index}}.Title.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Title")}}</small> <small class=error ng-show=forms.CrossSellRecipes.i{{$index}}.Title.$error.server>{{serverMessages.GetMessage(\'Title\',\'CrossSellRecipes\',$index)}}</small></div></div><div class=col-md-1 data-ng-if=!crossSellRecipe.InUse><input name=DefaultTitle class=form-control placeholder="Cross Sell Title" data-ng-model="recipeDefaults[\'CrossSellTitle\'+($index+1)]" readonly></div></div></div></div><div class=row><div class=col-md-11><div class="fixed-accordion-row extra-spacing one-line" data-ng-click=$event.stopPropagation()><label class=control-label>Subtitle</label><div class=col-md-1 data-ng-if=crossSellRecipe.InUse><input name=Subtitle class=form-control placeholder="Cross Sell Subtitle" data-ng-model=crossSellRecipe.Subtitle required><div class=error-container ng-show="forms.crossessubmitted && forms.CrossSellRecipes.i{{$index}}.Subtitle.$invalid"><small class=error ng-show=forms.CrossSellRecipes.i{{$index}}.Subtitle.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Subtitle")}}</small> <small class=error ng-show=forms.CrossSellRecipes.i{{$index}}.Subtitle.$error.server>{{serverMessages.GetMessage(\'Subtitle\',\'CrossSellRecipes\',$index)}}</small></div></div><div class=col-md-1 data-ng-if=!crossSellRecipe.InUse><input name=DefaultSubtitle class=form-control placeholder="Cross Sell Subtitle" data-ng-model="recipeDefaults[\'CrossSellSubtitle\'+($index+1)]" readonly></div></div></div></div><div class=row><div class=col-md-11><div class="fixed-accordion-row extra-spacing one-line" data-ng-click=$event.stopPropagation()><label class=control-label>URL</label><div class=col-md-1 data-ng-if=crossSellRecipe.InUse><input name=Url class=form-control placeholder="URL Cross Sell" data-ng-model=crossSellRecipe.Url required><div class=error-container ng-show="forms.crossessubmitted && forms.CrossSellRecipes.i{{$index}}.Url.$invalid"><small class=error ng-show=forms.CrossSellRecipes.i{{$index}}.Url.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Url")}}</small> <small class=error ng-show=forms.CrossSellRecipes.i{{$index}}.Url.$error.server>{{serverMessages.GetMessage(\'Url\',\'CrossSellRecipes\',$index)}}</small></div></div><div class=col-md-1 data-ng-if=!crossSellRecipe.InUse><input name=DefaultUrl class=form-control placeholder="URL Cross Sell" data-ng-model="recipeDefaults[\'CrossSellUrl\'+($index+1)]" readonly></div></div></div></div></div></div></h4></div><div class=panel-collapse data-ng-class="{collapse: !crossSellRecipe.IsOpen}"><div class=panel-body><div class=form-horizontal><div class=form-group></div></div></div></div></fieldset></div></div></div></div></form><span class=legend>Related Recipes</span><form name=forms.RelatedRecipes data-ng-submit=save() data-ng-class="{submitted: forms.relatedsubmitted}" novalidate><div class="panel-group sortable-accordion"><div data-ng-model=recipe.RelatedRecipes><div data-ng-repeat="relatedRecipe in recipe.RelatedRecipes" class="panel panel-default"><div class=form-horizontal ng-form=i{{$index}}><fieldset><div class=panel-heading><h4 class=panel-title><div class=accordion-toggle><div class=form-horizontal><div class=row><div class=col-md-12><div class="fixed-accordion-row extra-spacing one-line" data-ng-click=$event.stopPropagation()><label class=control-label>Image</label><div class=col-md-1 data-ng-if=relatedRecipe.InUse><filefield name=Image placeholder="Related Recipe Image" ng-model=relatedRecipe.Image required></filefield><div class=error-container ng-show="forms.relatedsubmitted && forms.RelatedRecipes.i{{$index}}.Image.$invalid"><small class=error ng-show=forms.RelatedRecipes.i{{$index}}.Image.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Image")}}</small></div></div><div class=col-md-1 data-ng-if=!relatedRecipe.InUse><filefield name=DefaultImage placeholder="Related Recipe Image" ng-model="recipeDefaults[\'RelatedRecipeImage\'+($index+1)]" disabled></filefield></div></div><div class="fixed-accordion-row pull-right" data-ng-click=$event.stopPropagation()><button data-ng-if=!relatedRecipe.InUse class="btn btn-info width-80px" data-ng-click=setCustom(relatedRecipe)>Set</button> <button data-ng-if=relatedRecipe.InUse class="btn btn-info width-80px" data-ng-click=removeCustom(relatedRecipe)>Remove</button></div></div></div><div class=row><div class=col-md-11><div class="fixed-accordion-row extra-spacing one-line" data-ng-click=$event.stopPropagation()><label class=control-label>Title</label><div class=col-md-1 data-ng-if=relatedRecipe.InUse><input name=Title class=form-control placeholder="Related Recipe Title" data-ng-model=relatedRecipe.Title required><div class=error-container ng-show="forms.relatedsubmitted && forms.RelatedRecipes.i{{$index}}.Title.$invalid"><small class=error ng-show=forms.RelatedRecipes.i{{$index}}.Title.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Title")}}</small> <small class=error ng-show=forms.RelatedRecipes.i{{$index}}.Title.$error.server>{{serverMessages.GetMessage(\'Title\',\'RelatedRecipes\',$index)}}</small></div></div><div class=col-md-1 data-ng-if=!relatedRecipe.InUse><input name=DefaultTitle class=form-control placeholder="Related Recipe Title" data-ng-model="recipeDefaults[\'RelatedRecipeTitle\'+($index+1)]" readonly></div></div></div></div><div class=row><div class=col-md-11><div class="fixed-accordion-row extra-spacing one-line" data-ng-click=$event.stopPropagation()><label class=control-label>URL</label><div class=col-md-1 data-ng-if=relatedRecipe.InUse><input name=Url class=form-control placeholder="URL Related Recipe" data-ng-model=relatedRecipe.Url required><div class=error-container ng-show="forms.relatedsubmitted && forms.RelatedRecipes.i{{$index}}.Url.$invalid"><small class=error ng-show=forms.RelatedRecipes.i{{$index}}.Url.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Url")}}</small> <small class=error ng-show=forms.RelatedRecipes.i{{$index}}.Url.$error.server>{{serverMessages.GetMessage(\'Url\',\'RelatedRecipes\',$index)}}</small></div></div><div class=col-md-1 data-ng-if=!relatedRecipe.InUse><input name=DefaultUrl class=form-control placeholder="URL Related Recipe" data-ng-model="recipeDefaults[\'RelatedRecipeUrl\'+($index+1)]" readonly></div></div></div></div></div></div></h4></div><div class=panel-collapse data-ng-class="{collapse: !relatedRecipe.IsOpen}"><div class=panel-body><div class=form-horizontal><div class=form-group></div></div></div></div></fieldset></div></div></div></div></form></spinner-overlay></div></div></uib-tab></uib-tabset></div></div></div></div>'),a.put("app/modules/content/partials/recipesList.html",'<div class=container-fluid><div class=well><span class=legend>Manage Recipes</span><div class="row form-group"><div class=col-md-4><input class=form-control placeholder=Title data-ng-model=filter.Name></div></div><div class="row form-group"><div class=col-md-4><select class=form-control data-ng-model=filter.CategoryId ng-options="category.Id as category.Name for category in categories"></select></div></div><div class="row form-group"><div class=col-md-4><button class="btn btn-info" data-ng-click=filterRecipes(); type=button>Filter</button></div></div><hr><div class=form-group><button data-ng-click=open(); class="btn btn-primary">Add New Recipe</button> <button class="btn btn-info btn-right width-160px" ui-sref="index.oneCol.manageRecipeCategories({mode:\'list\'})">Manage Categories</button></div><spinner-overlay data-loading=refreshTracker.active()><table id=data-grid class="table table-striped table-hover"><thead><tr><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Title\')"><span>Title</span> <span data-ng-if="filter.Sorting.Path == \'Title\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Url\')"><span>URL</span> <span data-ng-if="filter.Sorting.Path == \'Url\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th>Category</th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Updated\')"><span>Updated</span> <span data-ng-if="filter.Sorting.Path == \'Updated\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th>Actions</th></tr></thead><tbody><tr data-ng-repeat="recipe in recipes"><td><a ui-sref=index.oneCol.recipeDetail({id:recipe.Id})>{{::recipe.Name}}</a></td><td>{{recipe.Url}}</td><td><div data-ng-if="recipe.Categories && recipe.Categories.length>0"><div data-ng-repeat="category in recipe.Categories">{{category}}</div></div><div data-ng-if="!recipe.Categories || recipe.Categories.length==0">No Categories</div></td><td>{{recipe.Updated | date:"MM/dd/yy"}}<br>{{recipe.Updated | date:"h:mm a"}}<br>{{recipe.AgentId}}</td><td><button title=Edit class="btn btn-default btn-success btn-xs" data-ng-click=open(recipe.Id);><i class="glyphicon glyphicon-edit"></i></button> <button title=Delete class="btn btn-default btn-danger btn-xs" ladda=deleteTracker.active() data-ng-click=delete(recipe.Id);><i class="glyphicon glyphicon-remove"></i></button></td></tr></tbody></table><uib-pagination boundary-links=true total-items=totalItems items-per-page=filter.Paging.PageItemCount data-ng-model=filter.Paging.PageIndex previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; data-ng-change="pageChanged();scrollTo(\'data-grid\');"></uib-pagination></spinner-overlay></div></div>'),a.put("app/modules/content/partials/stylesDetail.html",'<div class=container-fluid><div class=left-pane-controls><div class="well container-fluid"><div><button class="btn btn-success width-160px" ladda=editTracker.active() data-ng-click=save()>Save</button></div><div class="btn-group margin-top-10px"><a target=_blank href={{previewUrl}} class="btn btn-info width-80px">Preview</a> <button cancel-button class="btn btn-default width-80px">Cancel</button></div></div><div ng-controller=objectHistorySectionController onload="name = \'History\'" data-ng-include="\'app/modules/setting/partials/objectHistorySection.html\'"></div></div><div class=right-pane-main><div class=container-fluid><div class=row><div class="container container-left"><div class="well row"><spinner-overlay data-loading=refreshTracker.active()><form class=form-horizontal><fieldset><span class="legend ng-scope">Manage Custom CSS</span><div class=form-group><div class=col-md-12><div data-ng-model=model.CSS ui-ace="{\n				                                require: [\'ace/ext/language_tools\'],\n				                                advanced: {\n					                                enableSnippets: true,\n					                                enableBasicAutocompletion: true,\n					                                enableLiveAutocompletion: true\n				                                },\n				                                theme:\'cobalt\',\n				                                mode: \'css\',\n				                                onLoad: aceLoaded,\n				                                onChange: aceChanged\n		                                }"></div></div></div></fieldset></form></spinner-overlay></div></div></div></div></div></div>'),a.put("app/modules/customer/partials/address.html",'<div class=form-group><label for={{::model.formName}}_model_company class="col-md-3 control-label">Company</label><div class=col-md-9><input name=Company class=form-control id={{::model.formName}}_model_company data-ng-model=model.Address.Company placeholder=Company data-ng-maxlength=100 autocomplete=off data-ng-disabled="orderEditDisabled"><div class=error-container ng-show="forms.submitted[model.formName] && forms[model.formName].Company.$invalid"><small class=error ng-show=forms[model.formName].Company.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["Company", "100"])}}</small> <small class=error ng-show=forms[model.formName].Company.$error.server>{{serverMessages.GetMessage(\'Company\', model.collectionName, model.index, model.formName)}}</small></div></div></div><div class=form-group><label for={{::model.formName}}_model_firstname class="col-md-3 control-label">First Name</label><div class=col-md-9><input name=FirstName class=form-control data-ng-model=model.Address.FirstName id={{::model.formName}}_model_firstname placeholder="First Name" data-ng-required=!model.disableValidation data-ng-maxlength=100 autocomplete=off data-ng-disabled="orderEditDisabled"><div class=error-container ng-show="forms.submitted[model.formName] && forms[model.formName].FirstName.$invalid"><small class=error ng-show=forms[model.formName].FirstName.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.FirstName")}}</small> <small class=error ng-show=forms[model.formName].FirstName.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["GeneralFieldNames.FirstName", "100"])}}</small> <small class=error ng-show=forms[model.formName].FirstName.$error.server>{{serverMessages.GetMessage(\'FirstName\', model.collectionName, model.index, model.formName)}}</small></div></div></div><div class=form-group><label for={{::model.formName}}_model_lastname class="col-md-3 control-label">Last Name</label><div class=col-md-9><input name=LastName class=form-control id={{::model.formName}}_model_lastname data-ng-model=model.Address.LastName placeholder="Last Name" data-ng-required=!model.disableValidation data-ng-maxlength=100 autocomplete=off data-ng-disabled="orderEditDisabled"><div class=error-container ng-show="forms.submitted[model.formName] && forms[model.formName].LastName.$invalid"><small class=error ng-show=forms[model.formName].LastName.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.LastName")}}</small> <small class=error ng-show=forms[model.formName].LastName.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["GeneralFieldNames.LastName", "100"])}}</small> <small class=error ng-show=forms[model.formName].LastName.$error.server>{{serverMessages.GetMessage(\'LastName\', model.collectionName, model.index, model.formName)}}</small></div></div></div><div class=form-group><label for={{::model.formName}}_model_address1 class="col-md-3 control-label">Address 1</label><div class=col-md-9><input name=Address1 class=form-control data-ng-model=model.Address.Address1 id={{::model.formName}}_model_address1 placeholder="Address 1" data-ng-required=!model.disableValidation data-ng-maxlength=100 autocomplete=off data-ng-disabled="orderEditDisabled"><div class=error-container ng-show="forms.submitted[model.formName] && forms[model.formName].Address1.$invalid"><small class=error ng-show=forms[model.formName].Address1.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Address1")}}</small> <small class=error ng-show=forms[model.formName].Address1.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["Address1", "100"])}}</small> <small class=error ng-show=forms[model.formName].Address1.$error.server>{{serverMessages.GetMessage(\'Address1\', model.collectionName, model.index, model.formName)}}</small></div></div></div><div class=form-group><label for={{::model.formName}}_model_address2 class="col-md-3 control-label">Address 2</label><div class=col-md-9><input name=Address2 class=form-control data-ng-model=model.Address.Address2 id={{::model.formName}}_model_address2 placeholder="Address 2" data-ng-maxlength=100 autocomplete=off data-ng-disabled="orderEditDisabled"><div class=error-container ng-show="forms.submitted[model.formName] && forms[model.formName].Address2.$invalid"><small class=error ng-show=forms[model.formName].Address2.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["Address2", "100"])}}</small> <small class=error ng-show=forms[model.formName].Address2.$error.server>{{serverMessages.GetMessage(\'Address2\', model.collectionName, model.index, model.formName)}}</small></div></div></div><div class=form-group><label for={{::model.formName}}_model_city class="col-md-3 control-label">City</label><div class=col-md-9><input name=City class=form-control data-ng-model=model.Address.City id={{::model.formName}}_model_city placeholder=City data-ng-required=!model.disableValidation data-ng-maxlength=100 autocomplete=off data-ng-disabled="orderEditDisabled"><div class=error-container ng-show="forms.submitted[model.formName] && forms[model.formName].City.$invalid"><small class=error ng-show=forms[model.formName].City.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","City")}}</small> <small class=error ng-show=forms[model.formName].City.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["City", "100"])}}</small> <small class=error ng-show=forms[model.formName].City.$error.server>{{serverMessages.GetMessage(\'City\', model.collectionName, model.index, model.formName)}}</small></div></div></div><div class=form-group><label for={{::model.formName}}_model_country class="col-md-3 control-label">Country</label><div class=col-md-9><select id={{::model.formName}}_model_country name=Country class=form-control data-ng-model=model.Address.Country data-ng-options="country as country.CountryName for country in countries track by country.Id" data-ng-required=!model.disableValidation data-ng-change="model.recalculate && requestRecalculate()" data-ng-disabled=orderEditDisabled><option value="">Select Country</option></select><div class=error-container ng-show="forms.submitted[model.formName] && forms[model.formName].Country.$invalid"><small class=error ng-show=forms[model.formName].Country.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Country")}}</small> <small class=error ng-show=forms[model.formName].Country.$error.server>{{serverMessages.GetMessage(\'Country\', model.collectionName, model.index, model.formName)}}</small></div></div></div><div class=form-group data-ng-if=model.Address.Country.CountryCode><label class="col-md-3 control-label">State/Province</label><div class=col-md-9 data-ng-if="model.Address.Country.States && model.Address.Country.States.length > 0"><select name=State class=form-control id={{::model.formName}}_model_state data-ng-model=model.Address.State data-ng-options="state.Id as state.StateName for state in model.Address.Country.States" data-ng-required=!model.disableValidation data-ng-change="model.recalculate && requestRecalculate()" data-ng-disabled=orderEditDisabled><option value="">Select State</option></select><div class=error-container ng-show="forms.submitted[model.formName] && forms[model.formName].State.$invalid"><small class=error ng-show=forms[model.formName].State.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","State")}}</small> <small class=error ng-show=forms[model.formName].State.$error.server>{{serverMessages.GetMessage(\'State\', model.collectionName, model.index, model.formName)}}</small></div></div><div class=col-md-9 data-ng-if="!(model.Address.Country.States && model.Address.Country.States.length > 0)"><input name=County id={{::model.formName}}_model_county class=form-control data-ng-model=model.Address.County placeholder=State data-ng-maxlength=100 autocomplete=off data-ng-disabled="orderEditDisabled"><div class=error-container ng-show="forms.submitted[model.formName] && forms[model.formName].County.$invalid"><small class=error ng-show=forms[model.formName].County.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["State", "100"])}}</small> <small class=error ng-show=forms[model.formName].County.$error.server>{{serverMessages.GetMessage(\'County\', model.collectionName, model.index, model.formName)}}</small></div></div></div><div class=form-group><label for={{::model.formName}}_model_zip class="col-md-3 control-label">Zip</label><div class=col-md-9><input name=Zip class=form-control data-ng-model=model.Address.Zip id={{::model.formName}}_model_zip placeholder=Zip data-ng-required=!model.disableValidation data-ng-maxlength=100 autocomplete=off data-ng-disabled="orderEditDisabled"><div class=error-container ng-show="forms.submitted[model.formName] && forms[model.formName].Zip.$invalid"><small class=error ng-show=forms[model.formName].Zip.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Zip")}}</small> <small class=error ng-show=forms[model.formName].Zip.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["Zip", "100"])}}</small> <small class=error ng-show=forms[model.formName].Zip.$error.server>{{serverMessages.GetMessage(\'Zip\', model.collectionName, model.index, model.formName)}}</small></div></div></div><div class=form-group><label for={{::model.formName}}_model_phone class="col-md-3 control-label">Phone</label><div class=col-md-9><input name=Phone class=form-control data-ng-model=model.Address.Phone id={{::model.formName}}_model_phone placeholder=Phone data-mask="(999) 999-9999? x99999" data-clean=true data-ng-maxlength=100 autocomplete=off data-ng-required=!model.disableValidation data-ng-disabled="orderEditDisabled"><div class=error-container ng-show="forms.submitted[model.formName] && forms[model.formName].Phone.$invalid"><small class=error ng-show=forms[model.formName].Phone.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Phone")}}</small> <small class=error ng-show=forms[model.formName].Phone.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["Phone", "100"])}}</small> <small class=error ng-show=forms[model.formName].Phone.$error.mask>{{getValidationMessage("ValidationMessages.FieldInvalid","Phone")}}</small> <small class=error ng-show=forms[model.formName].Phone.$error.server>{{serverMessages.GetMessage(\'Phone\', model.collectionName, model.index, model.formName)}}</small></div></div></div><div class=form-group><label for={{::model.formName}}_model_fax class="col-md-3 control-label">Fax</label><div class=col-md-9><input name=Fax class=form-control data-ng-model=model.Address.Fax id={{::model.formName}}_model_fax placeholder=Fax data-mask="(999) 999-9999? x99999" data-clean=true data-ng-maxlength=100 autocomplete=off data-ng-disabled="orderEditDisabled"><div class=error-container ng-show="forms.submitted[model.formName] && forms[model.formName].Fax.$invalid"><small class=error ng-show=forms[model.formName].Fax.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["Fax", "100"])}}</small> <small class=error ng-show=forms[model.formName].Fax.$error.mask>{{getValidationMessage("ValidationMessages.FieldInvalid","Fax")}}</small> <small class=error ng-show=forms[model.formName].Fax.$error.server>{{serverMessages.GetMessage(\'Fax\', model.collectionName, model.index, model.formName)}}</small></div></div></div>'),
a.put("app/modules/customer/partials/addShippingSection.html",'<form class=form-horizontal name=forms.shipping data-ng-class="{submitted: forms.submitted[\'shipping\']}" novalidate unsaved-warning-form><fieldset><span class=legend>Shipping Address</span><div class=form-group><div class=col-md-3></div><div class=col-md-3><button data-ng-if=!currentCustomer.Id class="btn btn-info" id=sameAsProfile data-ng-click=makeAsProfileAddress();>Copy Profile</button></div></div><div data-ng-include="\'app/modules/customer/partials/shippingAddress.html\'" data-ng-repeat="model in [buildShippingAddressForPartial(currentCustomer.Shipping, 0)]"></div></fieldset></form>'),a.put("app/modules/customer/partials/customerObjectHistorySection.html",'<div data-ng-if="historyItemsCount>0" class="well container-fluid object-history"><div class=header><span class=legend>History</span></div><table class="table table-striped order-statuses"><thead><tr><th>Date</th><th>Status</th><th></th></tr></thead><tbody><tr data-ng-repeat="item in historyItems"><td class=date>{{::item.DateCreated | date:"MM/dd/yy"}}<br>{{::item.DateCreated | date:"h:mm a"}}<br>{{::item.EditedBy}}</td><td class=status><span data-ng-if="item.IdObjectStatus == 1" class="label label-warning font-default">{{getReferenceItem(ReferenceData.CustomerStatuses, item.IdObjectStatus).Text}}</span> <span data-ng-if="item.IdObjectStatus == 2" class="label label-info font-default">{{getReferenceItem(ReferenceData.CustomerStatuses, item.IdObjectStatus).Text}}</span> <span data-ng-if="item.IdObjectStatus == 3" class="label label-danger font-default">{{getReferenceItem(ReferenceData.CustomerStatuses, item.IdObjectStatus).Text}}</span> <span data-ng-if="item.IdObjectStatus == 4" class="label label-danger font-default">{{getReferenceItem(ReferenceData.CustomerStatuses, item.IdObjectStatus).Text}}</span> <span data-ng-if="item.IdObjectStatus == 5" class="label label-danger font-default">{{getReferenceItem(ReferenceData.CustomerStatuses, item.IdObjectStatus).Text}}</span></td><td class=actions><button data-ng-if=!$first title=View class="btn btn-default btn-success btn-xs" data-ng-click=openHistoryReport(item.DataReferenceId);><i class="fa fa-search"></i></button></td></tr></tbody></table></div>'),a.put("app/modules/customer/partials/customersList.html",'<div class=container-fluid><div class=well><span class=legend>Manage Customers</span><form class=form-horizontal name=forms.filterForm data-ng-class="{submitted: submitted}" data-ng-keypress="$event.keyCode==13 ? filterCustomers($event) : null" novalidate autocomplete=off><div style="display: none"><input id=PreventChromeAutocomplete name=PreventChromeAutocomplete autocomplete="address-level4"></div><div class="row form-group"><div class=col-md-3><div class="input-group autocomplete"><input name=Id class=form-control placeholder=Email data-ng-model=address.Email autocomplete=off autofocus typeahead-min-length=1 typeahead-wait-ms=200 uib-typeahead="item as item for item in getByStaticAutoComplete($viewValue,\'Email\')" typeahead-loading=loadingByEmail> <span class=input-group-addon><i ng-show=loadingByEmail class="glyphicon glyphicon-refresh"></i></span></div></div><div class=col-md-3><div class="input-group autocomplete"><input name=Id class=form-control placeholder="Last Name" data-ng-model=address.LastName autocomplete=off typeahead-min-length=1 typeahead-wait-ms=200 uib-typeahead="item as item for item in getByProfileAddressAutoComplete($viewValue,\'LastName\')" typeahead-loading=loadingByLastName> <span class=input-group-addon><i ng-show=loadingByLastName class="glyphicon glyphicon-refresh"></i></span></div></div><div class=col-md-3><input class=form-control placeholder="First Name" data-ng-model=address.FirstName autocomplete=off></div><div class=col-md-3><input class=form-control placeholder="Ship Address 1" data-ng-model=defaultShippingAddress.Address1 autocomplete=off></div></div><div class="row form-group"><div class=col-md-3><div class="input-group autocomplete"><input name=Id class=form-control placeholder="Customer #" data-ng-model=address.SearchText numbers-only autocomplete=off typeahead-min-length=1 typeahead-wait-ms=200 uib-typeahead="item as item for item in getByStaticAutoComplete($viewValue,\'Id\')" typeahead-loading=loadingById> <span class=input-group-addon><i ng-show=loadingById class="glyphicon glyphicon-refresh"></i></span></div></div><div class=col-md-3><div class="input-group autocomplete"><input name=Id class=form-control placeholder="Ship City" data-ng-model=defaultShippingAddress.City autocomplete=off typeahead-min-length=1 typeahead-wait-ms=200 uib-typeahead="item as item for item in getByDefaultShippingAddressAutoComplete($viewValue,\'City\')" typeahead-loading=loadingByCity> <span class=input-group-addon><i ng-show=loadingByCity class="glyphicon glyphicon-refresh"></i></span></div></div><div class=col-md-3><input class=form-control placeholder="Ship Zip" data-ng-model=defaultShippingAddress.Zip autocomplete=off></div><div class=col-md-3><input class=form-control placeholder=Phone data-ng-model=address.Phone autocomplete=off></div></div><div class="row form-group"><div class=col-md-3><div class="input-group autocomplete"><input name=Company class=form-control placeholder=Company data-ng-model=address.Company autocomplete=off typeahead-min-length=1 typeahead-wait-ms=200 uib-typeahead="item as item for item in getByProfileAddressAutoComplete($viewValue,\'Company\')" typeahead-loading=loadingByCompany> <span class=input-group-addon><i ng-show=loadingByCompany class="glyphicon glyphicon-refresh"></i></span></div></div></div></form><div class="row form-group"><div class=col-md-4><button class="btn btn-info" data-ng-click=filterCustomers(); type=button>Filter</button></div></div><hr><div class=form-group><button ui-sref=index.oneCol.addCustomer class="btn btn-primary">Add New Customer</button></div><spinner-overlay data-loading=refreshTracker.active()><table id=data-grid class="table table-striped table-hover"><thead><tr><th class=sortable-column data-ng-click="applySort(\'Id\')"><span>Customer #</span> <span data-ng-if="filter.Sorting.Path == \'Id\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="applySort(\'IdObjectType\')"><span>Type</span> <span data-ng-if="filter.Sorting.Path == \'IdObjectType\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th>Name</th><th class=sortable-column data-ng-click="applySort(\'Email\')"><span>Email</span> <span data-ng-if="filter.Sorting.Path == \'Email\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th>Ship State/Province</th><th>Ship City</th><th>Last Order Placed</th><th>Total Orders</th><th class=sortable-column data-ng-click="applySort(\'Status\')"><span>Status</span> <span data-ng-if="filter.Sorting.Path == \'Status\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="applySort(\'Updated\')"><span>Updated</span> <span data-ng-if="filter.Sorting.Path == \'Updated\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=actions>Actions</th></tr></thead><tbody><tr data-ng-repeat="customer in customers"><td><a ui-sref=index.oneCol.customerDetail({id:customer.Id})>{{::customer.Id}}</a></td><td><span data-ng-if="customer.IdObjectType == 1" class="label label-retail font-default">{{getReferenceItem(ReferenceData.ShortCustomerTypes, customer.IdObjectType).Text}}</span> <span data-ng-if="customer.IdObjectType == 2" class="label label-wholesale font-default">{{getReferenceItem(ReferenceData.ShortCustomerTypes, customer.IdObjectType).Text}}</span></td><td><a ui-sref=index.oneCol.customerDetail({id:customer.Id})>{{::customer.Name}}</a></td><td>{{::customer.Email}}</td><td>{{::customer.State}}</td><td>{{::customer.City}}</td><td>{{::customer.LastOrderPlaced | date:"MM/dd/yy"}}<br>{{::customer.LastOrderPlaced | date:"h:mm a"}}</td><td>{{::customer.TotalOrders}}</td><td><span data-ng-if="customer.StatusCode == 1" class="label label-warning font-default">{{getReferenceItem(ReferenceData.CustomerStatuses, customer.StatusCode).Text}}</span> <span data-ng-if="customer.StatusCode == 2" class="label label-info font-default">{{getReferenceItem(ReferenceData.CustomerStatuses, customer.StatusCode).Text}}</span> <span data-ng-if="customer.StatusCode == 3" class="label label-danger font-default">{{getReferenceItem(ReferenceData.CustomerStatuses, customer.StatusCode).Text}}</span> <span data-ng-if="customer.StatusCode == 4" class="label label-danger font-default">{{getReferenceItem(ReferenceData.CustomerStatuses, customer.StatusCode).Text}}</span> <span data-ng-if="customer.StatusCode == 5" class="label label-danger font-default">{{getReferenceItem(ReferenceData.CustomerStatuses, customer.StatusCode).Text}}</span></td><td>{{::customer.DateEdited | date:"MM/dd/yy"}}<br>{{::customer.DateEdited | date:"h:mm a"}}<br>{{::customer.EditedBy}}</td><td><button title=Edit ui-sref=index.oneCol.customerDetail({id:customer.Id}) ladda=editTracker.active() class="btn btn-default btn-success btn-xs"><i class="glyphicon glyphicon-edit"></i></button> <button data-ng-if="customer.StatusCode != 4" title="Place Order" class="btn btn-default btn-primary btn-xs" ui-sref=index.oneCol.orderAdd({idcustomer:customer.Id})><i class="glyphicon glyphicon-plus"></i></button></td></tr></tbody></table></spinner-overlay><uib-pagination boundary-links=true total-items=totalItems items-per-page=filter.Paging.PageItemCount data-ng-model=filter.Paging.PageIndex previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; max-size=10 data-ng-change="pageChanged();scrollTo(\'data-grid\');"></uib-pagination></div></div>'),a.put("app/modules/customer/partials/mailingReport.html",'<div class="container-fluid matchback-report"><div class=well><span class=legend>Matchback and Post-Season Analysis</span><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.form.submitted}" novalidate><fieldset><div class="row form-group"><div class=col-md-3><strong>Order Date</strong></div></div><div class="row form-group"><div class=col-md-3><p class=input-group><input class=form-control name=From data-ng-change=filterChanged(); uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.From is-open=fromOpened ng-required="true"> <span class=input-group-btn><button type=button class="btn btn-default" ng-click="stopPropagation($event); fromOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.form.submitted && forms.form.From.$invalid"><small class=error ng-show=forms.form.From.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","From")}}</small></div></div><div class=col-md-3><p class=input-group><input class=form-control name=To data-ng-change=filterChanged(); uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.To is-open=toOpened ng-required="true"> <span class=input-group-btn><button type=button class="btn btn-default" ng-click="stopPropagation($event); toOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.form.submitted && forms.form.To.$invalid"><small class=error ng-show=forms.form.To.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","To")}}</small></div></div></div><div class="row form-group"><div class=col-md-3><strong>Entry Date</strong></div></div><div class="row form-group"><div class=col-md-3><p class=input-group><input class=form-control name=FromFirst placeholder=From data-ng-change=filterChanged(); uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.FromFirst is-open="FromFirstOpened"> <span class=input-group-btn><button type=button class="btn btn-default" ng-click="stopPropagation($event); FromFirstOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p></div><div class=col-md-3><p class=input-group><input class=form-control name=ToFirst placeholder=To data-ng-change=filterChanged(); uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.ToFirst is-open="ToFirstOpened"> <span class=input-group-btn><button type=button class="btn btn-default" ng-click="stopPropagation($event); ToFirstOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p></div></div><div class="row form-group"><div class=col-md-3><strong>Last Order Date</strong></div></div><div class="row form-group"><div class=col-md-3><p class=input-group><input class=form-control name=FromLast placeholder=From data-ng-change=filterChanged(); uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.FromLast is-open="FromLastOpened"> <span class=input-group-btn><button type=button class="btn btn-default" ng-click="stopPropagation($event); FromLastOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p></div><div class=col-md-3><p class=input-group><input class=form-control name=ToLast placeholder=To data-ng-change=filterChanged(); uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.ToLast is-open="ToLastOpened"> <span class=input-group-btn><button type=button class="btn btn-default" ng-click="stopPropagation($event); ToLastOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p></div><div class=col-md-3><input name=LastFromTotal class=form-control placeholder="From Last Order Total" data-ng-change=filterChanged(); data-ng-model=filter.LastFromTotal money autocomplete=off><div class=error-container ng-show="forms.form.submitted && forms.form.LastFromTotal.$invalid"></div></div><div class=col-md-3><input name=LastToTotal class=form-control placeholder="To Last Order Total" data-ng-change=filterChanged(); data-ng-model=filter.LastToTotal money autocomplete=off><div class=error-container ng-show="forms.form.submitted && forms.form.LastToTotal.$invalid"></div></div></div><div class="row form-group"><div class=col-md-3><strong>Order Frequency</strong></div></div><div class="row form-group"><div class=col-md-3><input name=FromOrderCount class=form-control placeholder=From data-ng-change=filterChanged(); data-ng-model=filter.FromOrderCount numbers-only autocomplete=off><div class=error-container ng-show="forms.form.submitted && forms.form.FromOrderCount.$invalid"></div></div><div class=col-md-3><input name=ToOrderCount class=form-control placeholder=From data-ng-change=filterChanged(); data-ng-model=filter.ToOrderCount numbers-only autocomplete=off><div class=error-container ng-show="forms.form.submitted && forms.form.ToOrderCount.$invalid"></div></div></div><hr><div class="row form-group"><div class=col-md-3><select class=form-control name=CustomerIdObjectType data-ng-change=filterChanged(); data-ng-model=filter.CustomerIdObjectType ng-options="item.Key as item.Text for item in customerTypes"></select></div><div class=col-md-3><select class=form-control name=IdCustomerOrderSource data-ng-change=filterChanged(); data-ng-model=filter.IdCustomerOrderSource ng-options="item.Key as item.Text for item in orderSources"></select></div><div class=col-md-3><input class=form-control name=KeyCodeFirst data-ng-change=filterChanged(); placeholder="First Key Code" data-ng-model=filter.KeyCodeFirst autocomplete=off></div><div class=col-md-3><input class=form-control name=DiscountCodeFirst data-ng-change=filterChanged(); placeholder="First Discount Code" data-ng-model=filter.DiscountCodeFirst autocomplete=off></div></div><div class="row form-group"><div class="col-md-3 checkbox-select-wrapper"><select class=form-control name=DNM data-ng-change=filterChanged(); data-ng-model=filter.DNM ng-options="item.Key as item.Text for item in checkboxOptions"></select><label>DNM</label></div><div class="col-md-3 checkbox-select-wrapper"><select class=form-control name=DNR data-ng-change=filterChanged(); data-ng-model=filter.DNR ng-options="item.Key as item.Text for item in checkboxOptions"></select><label>DNR</label></div></div><div class="row form-group"><div class=col-md-12><button class="btn btn-info" data-ng-click=filterItems(); type=button>Filter</button> <a target=_self class="btn btn-primary pull-right" data-ng-href={{options.exportUrl}}>Export</a></div></div></fieldset></form><spinner-overlay data-loading=refreshTracker.active()><div><table id=data-grid class="table table-striped"><thead><tr><th>Customer #</th><th>First Name</th><th>Last Name</th><th>Address 1</th><th>Address 2</th><th>Country</th><th>State</th><th>City</th><th>Zip</th><th>Phone</th><th>First Discount Code</th><th>Type</th><th>Email</th><th>Last Order Date</th><th>Last Order Amout</th><th>Entry Date</th><th>Order Frequency</th><th>Total Of Sales</th><th>First Source</th><th>Key Code</th><th>DNM</th><th>DNR</th></tr></thead><tbody><tr data-ng-repeat="item in items"><td><a ui-sref=index.oneCol.customerDetail({id:item.Id})>{{::item.Id}}</a></td><td>{{::item.FirstName}}</td><td>{{::item.LastName}}</td><td>{{::item.Address1}}</td><td>{{::item.Address2}}</td><td>{{::item.CountryCode}}</td><td>{{::item.StateCode}}</td><td>{{::item.City}}</td><td>{{::item.Zip}}</td><td>{{::item.Phone}}</td><td>{{::item.FirstDiscountCode}}</td><td><span data-ng-if="item.CustomerIdObjectType == 1" class="label label-retail font-default">{{getReferenceItem(ReferenceData.ShortCustomerTypes, item.CustomerIdObjectType).Text}}</span> <span data-ng-if="item.CustomerIdObjectType == 2" class="label label-wholesale font-default">{{getReferenceItem(ReferenceData.ShortCustomerTypes, item.CustomerIdObjectType).Text}}</span></td><td>{{::item.Email}}</td><td>{{::item.LastOrderDateCreated | date:"MM/dd/yy"}}<br>{{::item.LastOrderDateCreated | date:"h:mm a"}}</td><td>{{::item.LastOrderTotal | currency}}</td><td>{{::item.FirstOrderDateCreated | date:"MM/dd/yy"}}<br>{{::item.FirstOrderDateCreated | date:"h:mm a"}}</td><td>{{::item.OrdersCount}}</td><td>{{::item.OrdersTotal | currency}}</td><td>{{::item.CustomerOrderSource}}</td><td>{{::item.FirstKeyCode}}</td><td>{{::item.DoNotMail}}</td><td>{{::item.DoNotRent}}</td></tr></tbody></table></div></spinner-overlay><uib-pagination boundary-links=true total-items=totalItems items-per-page=filter.Paging.PageItemCount data-ng-model=filter.Paging.PageIndex previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; data-ng-change="pageChanged();scrollTo(\'data-grid\');"></uib-pagination></div></div>'),a.put("app/modules/customer/partials/manageCustomer.html",'<div class="container-fluid customer-edit"><div class=left-pane-controls><div class="well container-fluid"><div><button data-ng-click=save() class="btn btn-success width-160px" unsaved-warning-clear>Save</button></div><div class=margin-top-10px><button cancel-button-default-state=index.oneCol.manageCustomers cancel-button class="btn btn-default width-160px" unsaved-warning-clear>Cancel</button></div><div class=margin-top-10px><button class="btn btn-primary width-160px" ui-sref=index.oneCol.manageCustomers>Manage All</button></div></div><div ng-controller=objectHistorySectionController onload="name = \'History\'" data-ng-include="\'app/modules/customer/partials/customerObjectHistorySection.html\'"></div></div><div class=right-pane-main><div class=container-fluid><div class=container-fluid><div data-ng-if=currentCustomer.Id class=row><span class="legend top"><span class=item>Customer: <strong>{{currentCustomer.ProfileAddress.FirstName}} {{currentCustomer.ProfileAddress.LastName}}</strong></span> <span class=item>Customer ID: <strong>{{currentCustomer.Id}}</strong></span> <span class=item>Type: <strong>{{getReferenceItem(ReferenceData.CustomerTypes, currentCustomer.CustomerType).Text}}</strong></span></span></div><div class=row><uib-tabset active=options.activeTabIndex><uib-tab heading="Account Profile" index=accountProfileTab.index><div class="container container-left"><div class="well row"><spinner-overlay data-loading=addEditTracker.active()><form class=form-horizontal name=forms.profile data-ng-submit=save() data-ng-class="{submitted: forms.submitted[\'profile\']}" novalidate unsaved-warning-form><fieldset><div data-ng-if="currentCustomer.Id && options.DBStatusCode != 4 &&  options.DBStatusCode != 5" class=form-group><label for="" class="col-md-3 control-label"></label><div class=col-md-9><button class="btn btn-primary width-160px margin-right-25px" ui-sref=index.oneCol.orderAdd({idcustomer:currentCustomer.Id})>Place Order</button> <button class="btn btn-primary-orange width-160px" data-ng-click=loginAsCustomer() ladda=loginAsCustomerTracker.active() data-ng-if="currentCustomer.Id && currentCustomer.StatusCode == 2">Log In As Customer</button></div></div><div data-ng-if="currentCustomer.Id && options.DBStatusCode == 5" class=form-group><label for=active class="col-md-3 control-label">Active</label><div class=col-md-9><div class=checkbox><label><input type=checkbox id=active name=ActivatePending data-ng-model="currentCustomer.ActivatePending"></label></div></div></div><div class=form-group><label for="" class="col-md-3 control-label">Customer ID</label><div class="col-md-9 form-control-static" data-ng-if=currentCustomer.Id><span>{{currentCustomer.Id}}</span></div></div><span class=legend>Customer Type</span><div class=form-group><div class=col-md-3></div><div class=col-md-9><select class=form-control id=customerType data-ng-model=currentCustomer.CustomerType data-ng-change=filterCountries(); data-ng-options="customerType.Key as customerType.Text for customerType in ReferenceData.CustomerTypes"></select></div></div><div data-ng-if="currentCustomer.CustomerType == 2"><div class=form-group><label for=taxExempt class="col-md-3 control-label">Tax Exempt</label><div class=col-md-9><select class=form-control name=TaxExempt id=taxExempt data-ng-model=currentCustomer.TaxExempt data-ng-options="taxExempt.Key as taxExempt.Text for taxExempt in ReferenceData.TaxExempts" required></select><div class=error-container ng-show="forms.submitted[\'profile\'] && forms.profile.TaxExempt.$invalid"><small class=error ng-show=forms.profile.TaxExempt.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Tax Exempt")}}</small> <small class=error ng-show=forms.profile.TaxExempt.$error.server>{{serverMessages.GetMessage(\'TaxExempt\')}}</small></div></div></div><div class=form-group><label for=website class="col-md-3 control-label">Website</label><div class=col-md-9><input name=Website class=form-control id=website data-ng-model=currentCustomer.Website placeholder=Website required data-ng-maxlength=100 autocomplete=off><div class=error-container ng-show="forms.submitted[\'profile\'] && forms.profile.Website.$invalid"><small class=error ng-show=forms.profile.Website.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Website")}}</small> <small class=error ng-show=forms.profile.Website.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["Website", "100"])}}</small> <small class=error ng-show=forms.profile.Website.$error.server>{{serverMessages.GetMessage(\'Website\')}}</small></div></div></div><div class=form-group><label for=promoting class="col-md-3 control-label">Promoting Websites</label><div class=col-md-9><textarea type=text name=PromotingWebsites class=form-control data-ng-model=currentCustomer.PromotingWebsites id=promoting placeholder="Promoting Websites" rows=10 required data-ng-maxlength=1000></textarea><div class=error-container ng-show="forms.submitted[\'profile\'] && forms.profile.PromotingWebsites.$invalid"><small class=error ng-show=forms.profile.PromotingWebsites.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Promoting Websites")}}</small> <small class=error ng-show=forms.profile.PromotingWebsites.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["Promoting Websites", "1000"])}}</small> <small class=error ng-show=forms.profile.PromotingWebsites.$error.server>{{serverMessages.GetMessage(\'Promoting Websites\')}}</small></div></div></div><div class=form-group><label for=tier class="col-md-3 control-label">Tier</label><div class=col-md-9><select class=form-control id=tier name=Tier data-ng-model=currentCustomer.Tier data-ng-options="tier.Key as tier.Text for tier in ReferenceData.Tiers" required></select><div class=error-container ng-show="forms.submitted[\'profile\'] && forms.profile.Tier.$invalid"><small class=error ng-show=forms.profile.Tier.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Tier")}}</small> <small class=error ng-show=forms.profile.Tier.$error.server>{{serverMessages.GetMessage(\'Tier\')}}</small></div></div></div><div class=form-group><label for=tradeClass class="col-md-3 control-label">Trade Class</label><div class=col-md-9><select class=form-control name=TradeClass id=tradeClass data-ng-model=currentCustomer.TradeClass data-ng-options="tradeClass.Key as tradeClass.Text for tradeClass in ReferenceData.TradeClasses" required></select><div class=error-container ng-show="forms.submitted[\'profile\'] && forms.profile.TradeClass.$invalid"><small class=error ng-show=forms.profile.TradeClass.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Trade Class")}}</small> <small class=error ng-show=forms.profile.TradeClass.$error.server>{{serverMessages.GetMessage(\'TradeClass\')}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label">Inception Date</label><div class=col-md-9><p class=input-group><input name=InceptionDate class=form-control uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=currentCustomer.InceptionDate is-open=inceptionDateOpened required autocomplete="off"> <span class=input-group-btn><button type=button class="btn btn-default" ng-disabled=false ng-click="stopPropagation($event); inceptionDateOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.submitted[\'profile\'] && forms.profile.InceptionDate.$invalid"><small class=error ng-show=forms.profile.InceptionDate.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Inception Date")}}</small> <small class=error ng-show=forms.profile.InceptionDate.$error.server>{{serverMessages.GetMessage(\'InceptionDate\')}}</small></div></div></div></div><span class=legend>Profile Details</span><div data-ng-if="currentCustomer.CustomerType == 1" class=form-group><label for=linked class="col-md-3 control-label">Linked to Affiliate</label><div class=col-md-3><input name=IdAffiliate class=form-control id=linked data-ng-model=currentCustomer.IdAffiliate numbers-only numbers-only-deny-zero placeholder="Linked to Affiliate" autocomplete=off><div class=error-container ng-show="forms.submitted[\'profile\'] && forms.profile.IdAffiliate.$invalid"><small class=error ng-show=forms.profile.IdAffiliate.$error.server>{{serverMessages.GetMessage(\'IdAffiliate\')}}</small></div></div></div><div data-ng-include="\'app/modules/customer/partials/profileAddress.html\'" data-ng-repeat="model in [accountProfileTab]"></div><div class=form-group data-ng-if=editMode><label for=currentEmail class="col-md-3 control-label">Current Email</label><div class="col-md-9 form-control-static"><span data-ng-bind=currentCustomer.Email></span></div></div><div data-ng-if=!options.OverrideEmail class=form-group><label for=enterEmail class="col-md-3 control-label">Enter Email</label><div class=col-md-9><input type=email name=Email class=form-control id=enterEmail data-ng-model=currentCustomer.newEmail placeholder="Enter Email" data-ng-required="!editMode || !currentCustomer.Email" data-ng-maxlength=100 autocomplete=off><div class=error-container ng-show="forms.submitted[\'profile\'] && forms.profile.Email.$invalid"><small class=error ng-show=forms.profile.Email.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Email")}}</small> <small class=error ng-show=forms.profile.Email.$error.email>{{getValidationMessage("ValidationMessages.EmailFormat","GeneralFieldNames.Email")}}</small> <small class=error ng-show=forms.profile.Email.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["GeneralFieldNames.Email", "100"])}}</small> <small class=error ng-show=forms.profile.Email.$error.server>{{serverMessages.GetMessage(\'Email\')}}</small></div></div></div><div data-ng-if=!options.OverrideEmail class=form-group><label for=reEnterEmail class="col-md-3 control-label">Re-enter Email</label><div class=col-md-9><input type=email name=EmailConfirm class=form-control id=reEnterEmail data-ng-model=currentCustomer.uiEmailConfirm placeholder="Re-enter Email" data-ng-required="!editMode || !currentCustomer.Email" data-ng-maxlength=100 autocomplete=off><div class=error-container ng-show="forms.submitted[\'profile\'] && forms.profile.EmailConfirm.$invalid"><small class=error ng-show=forms.profile.EmailConfirm.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Email Confirmation")}}</small> <small class=error ng-show=forms.profile.EmailConfirm.$error.email>{{getValidationMessage("ValidationMessages.EmailFormat","Email Confirmation")}}</small> <small class=error ng-show=forms.profile.EmailConfirm.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["Email Confirmation", "100"])}}</small> <small class=error ng-show=forms.profile.EmailConfirm.$error.server>{{serverMessages.GetMessage(\'EmailConfirm\')}}</small></div></div></div><div data-ng-if="options.DBStatusCode == 1 && !currentCustomer.Email" class=form-group><label for=active class="col-md-3 control-label">Override Email</label><div class=col-md-9><div class=checkbox><label><input type=checkbox id=overrideEmail name=OverrideEmail data-ng-model="options.OverrideEmail"></label></div></div></div><div class=form-group data-ng-if="editMode && currentCustomer.Email"><div class=col-md-3></div><div class=col-md-9><button class="btn btn-info" data-ng-if="currentCustomer.StatusCode == 2" ladda=resetTracker.active() data-ng-click=resetPassword()>Send Reset Password Email</button> <button class="btn btn-info" data-ng-if="currentCustomer.StatusCode == 1" ladda=resendTracker.active() data-ng-click=resend()>Resend Activation Email</button></div></div><span class=legend>Approved Payment Methods</span><div class=form-group><div class=col-md-3></div><div class=col-md-9><label class="checkbox-inline margin-left-zero margin-right-25px" data-ng-repeat="paymentMethod in paymentMethods"><input type=checkbox data-ng-click=togglePaymentMethodSelection(paymentMethod) data-ng-checked="currentCustomer.ApprovedPaymentMethods.indexOf(paymentMethod.Id) > -1" autocomplete=off> {{paymentMethod.Name}}</label></div></div><div class=form-group><label for=state class="col-md-3 control-label">Default Payment Method</label><div class=col-md-9><select class=form-control name=DefaultPaymentMethod data-ng-model=currentCustomer.DefaultPaymentMethod data-ng-options="paymentMethod.Id as paymentMethod.Name for paymentMethod in selectedPaymentMethods" required><option value="">Select Default Payment Method</option></select><div class=error-container ng-show="forms.submitted[\'profile\'] && forms.profile.DefaultPaymentMethod.$invalid"><small class=error ng-show=forms.profile.DefaultPaymentMethod.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Default Payment Method")}}</small> <small class=error ng-show=forms.profile.DefaultPaymentMethod.$error.server>{{serverMessages.GetMessage(\'DefaultPaymentMethod\')}}</small></div></div></div><span class=legend>Automatic Order Specific Notes</span><div class=form-group><div class=col-md-3></div><div class=col-md-9><label class="checkbox-inline margin-left-zero margin-right-25px" data-ng-repeat="orderNote in orderNotes"><input type=checkbox data-ng-click=toggleOrderNoteSelection(orderNote.Id) data-ng-checked="currentCustomer.OrderNotes.indexOf(orderNote.Id) > -1" autocomplete=off> {{orderNote.Name}}</label></div></div><span class=legend>DNM / DNR</span><div class=form-group><div class=col-md-3></div><div class=col-md-9><label class="checkbox-inline col-md-3"><input type=checkbox id=doNotMail data-ng-model=currentCustomer.DoNotMail autocomplete=off> Do Not Mail</label><label class="checkbox-inline col-md-3"><input type=checkbox id=doNotRent data-ng-model=currentCustomer.DoNotRent autocomplete=off> Do Not Rent</label></div></div><div data-ng-if=currentCustomer.Email><span class=legend>Product Review Email Status</span><div class=form-group><label for=productReviewEmail class="col-md-3 control-label">Enabled</label><div class=col-md-9><div class=checkbox><label><input type=checkbox id=productReviewEmail data-ng-model=currentCustomer.ProductReviewEmailEnabled></label></div></div></div></div><div data-ng-if="currentCustomer.CustomerType == 1"><span class=legend>HealthWise Customer Status</span><div class=form-group><label for=HasHealthwiseOrders class="col-md-3 control-label">Enabled</label><div class=col-md-9><div class=checkbox><label><input type=checkbox id=HasHealthwiseOrders name=HasHealthwiseOrders data-ng-model=currentCustomer.HasHealthwiseOrders></label></div></div></div></div><span data-ng-if="currentCustomer.Id && currentCustomer.StatusCode!=5" class=legend>Suspend User Account</span><div data-ng-if="currentCustomer.Id && currentCustomer.StatusCode!=5" class=form-group><label for=suspendUserAccount class="col-md-3 control-label">Suspend User Account</label><div class=col-md-9><div class=checkbox><label><input type=checkbox id=suspendUserAccount data-ng-click=toggleSuspended() data-ng-checked="currentCustomer.StatusCode == 4"></label></div></div></div><div class=form-group data-ng-if="currentCustomer.StatusCode == 4"><label for=reason class="col-md-3 control-label">Reason</label><div class=col-md-9><textarea type=text name=Reason class=form-control id=reason placeholder=Reason rows=10 data-ng-model=currentCustomer.Reason required data-ng-maxlength=1000></textarea><div class=error-container ng-show="forms.submitted[\'profile\'] && forms.profile.Reason.$invalid"><small class=error ng-show=forms.profile.Reason.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Reason")}}</small> <small class=error ng-show=forms.profile.Reason.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["Reason", "1000"])}}</small> <small class=error ng-show=forms.profile.Reason.$error.server>{{serverMessages.GetMessage(\'Reason\')}}</small></div></div></div></fieldset></form></spinner-overlay></div></div></uib-tab><uib-tab heading="Shipping Address" index=shippingAddressTab.index><div class="container container-left"><div class="well row"><spinner-overlay data-loading=addEditTracker.active()><div data-ng-if=!editMode data-ng-include="\'app/modules/customer/partials/addShippingSection.html\'"></div><div data-ng-if=editMode data-ng-include="\'app/modules/customer/partials/updateShippingSection.html\'"></div></spinner-overlay></div></div></uib-tab><uib-tab heading="Payment Information" index=paymentInfoTab.index><div class="container container-left"><div class="well row"><spinner-overlay data-loading=addEditTracker.active()><div class=form-horizontal><span class=legend>Select Payment Method</span><div class=form-group data-ng-if="currentCustomer.ApprovedPaymentMethods.indexOf(1) >= 0"><div class=col-md-3></div><div class=col-md-6><button class="btn btn-info" data-ng-show="paymentInfoTab.PaymentMethodType == 1" data-ng-click=setNewCreditCard();>Add New Credit Card</button></div><div class=col-md-3></div></div><div class=form-group data-ng-if="currentCustomer.ApprovedPaymentMethods.indexOf(1) >= 0"><div class="radio col-md-3"><label class=control-label><input type=radio data-ng-model=paymentInfoTab.PaymentMethodType value=1 id=creditCard> Credit Card</label></div><div class=col-md-6><select class=form-control id=selectPaymentMethod data-ng-change=cardChanged() data-ng-disabled="paymentInfoTab.PaymentMethodType != 1 || !currentCustomer.CreditCards || currentCustomer.CreditCards.length == 0" data-ng-model=paymentInfoTab.CreditCardIndex data-ng-options="idx as (getCreditCardTypeName(creditCard.CardType) + \', ending in \' + getLast4(creditCard.CardNumber) + (creditCard.Default ? \' (Default)\' : \'\')) for (idx, creditCard) in currentCustomer.CreditCards"></select></div><div class="col-md-3 padding-l-0px"><button class="btn btn-danger pull-right" data-ng-show="currentCustomer.CreditCards[paymentInfoTab.CreditCardIndex] && paymentInfoTab.PaymentMethodType == 1 && (!currentCustomer.CreditCards[paymentInfoTab.CreditCardIndex].Default || currentCustomer.CreditCards.length==1)" data-ng-click=deleteSelectedCreditCard();>Delete</button> <button class="btn btn-success pull-right margin-right-8px" data-ng-show="currentCustomer.CreditCards && currentCustomer.CreditCards.length>0 && paymentInfoTab.PaymentMethodType == 1 && !currentCustomer.CreditCards[paymentInfoTab.CreditCardIndex].Default" data-ng-click=setDefaultCreditCard();>Set as Default</button></div></div><div data-ng-if="currentCustomer.ApprovedPaymentMethods.indexOf(1) >= 0 && paymentInfoTab.PaymentMethodType==1"><div class=form-group><div class=col-md-3></div><div class=col-md-9><strong>Credit card data is only validated when adding or replacing masked credit card data.</strong></div></div><div class=form-group><div class=col-md-12><button class="btn btn-danger pull-right" data-ng-show="currentCustomer.CreditCards.length>0 && paymentInfoTab.PaymentMethodType == 1" data-ng-click=deleteAllCreditCards();>Delete All Credit Cards</button></div></div></div><div class=form-group data-ng-if="currentCustomer.ApprovedPaymentMethods.indexOf(2) >= 0"><div class=col-md-3><div class=radio><label class=control-label><input type=radio data-ng-model=paymentInfoTab.PaymentMethodType value=2 id=oac> On Approved Credit</label></div></div><div class=col-md-6><div data-ng-if="paymentInfoTab.PaymentMethodType == 2 && currentCustomer.ApprovedPaymentMethods.length > 0 && !currentCustomer.Oac"><button class="btn btn-info" data-ng-click=setNewOac();>Add New OAC</button></div><div data-ng-if="paymentInfoTab.PaymentMethodType == 2 && currentCustomer.ApprovedPaymentMethods.length > 0 && currentCustomer.Oac"><button class="btn btn-danger" data-ng-click="currentCustomer.Oac = undefined;">Delete</button></div></div></div><div class=form-group data-ng-if="currentCustomer.ApprovedPaymentMethods.indexOf(3) >= 0"><div class=col-md-3><div class=radio><label class=control-label><input type=radio data-ng-model=paymentInfoTab.PaymentMethodType value=3 id=check> Check</label></div></div><div class=col-md-6><div data-ng-if="paymentInfoTab.PaymentMethodType == 3 && currentCustomer.ApprovedPaymentMethods.length > 0 && !currentCustomer.Check"><button class="btn btn-info" data-ng-click=setNewCheck();>Add New Check</button></div><div data-ng-if="paymentInfoTab.PaymentMethodType == 3 && currentCustomer.ApprovedPaymentMethods.length > 0 && currentCustomer.Check"><button class="btn btn-danger" data-ng-click="currentCustomer.Check = undefined;">Delete</button></div></div></div><div class=form-group data-ng-if="currentCustomer.ApprovedPaymentMethods.indexOf(6) >= 0"><div class=col-md-3><div class=radio><label class=control-label><input type=radio data-ng-model=paymentInfoTab.PaymentMethodType value=6 id=wiretransfer> Wire Transfer</label></div></div><div class=col-md-6><div data-ng-if="paymentInfoTab.PaymentMethodType == 6 && currentCustomer.ApprovedPaymentMethods.length > 0 && !currentCustomer.WireTransfer"><button class="btn btn-info" data-ng-click=setNewWireTransfer();>Add New Wire Transfer</button></div><div data-ng-if="paymentInfoTab.PaymentMethodType == 6 && currentCustomer.ApprovedPaymentMethods.length > 0 && currentCustomer.WireTransfer"><button class="btn btn-danger" data-ng-click="currentCustomer.WireTransfer = undefined;">Delete</button></div></div></div><div class=form-group data-ng-if="currentCustomer.ApprovedPaymentMethods.indexOf(7) >= 0"><div class=col-md-3><div class=radio><label class=control-label><input type=radio data-ng-model=paymentInfoTab.PaymentMethodType value=7 id=marketing> Marketing</label></div></div><div class=col-md-6><div data-ng-if="paymentInfoTab.PaymentMethodType == 7 && currentCustomer.ApprovedPaymentMethods.length > 0 && !currentCustomer.Marketing"><button class="btn btn-info" data-ng-click=setNewMarketing();>Add New Marketing</button></div><div data-ng-if="paymentInfoTab.PaymentMethodType == 7 && currentCustomer.ApprovedPaymentMethods.length > 0 && currentCustomer.Marketing"><button class="btn btn-danger" data-ng-click="currentCustomer.Marketing = undefined;">Delete</button></div></div></div><div class=form-group data-ng-if="currentCustomer.ApprovedPaymentMethods.indexOf(8) >= 0"><div class=col-md-3><div class=radio><label><input type=radio data-ng-model=paymentInfoTab.PaymentMethodType value=8 id=vcwellness> VC Wellness Employee Program</label></div></div><div class=col-md-6><div data-ng-if="paymentInfoTab.PaymentMethodType == 8 && currentCustomer.ApprovedPaymentMethods.length > 0 && !currentCustomer.VCWellness"><button class="btn btn-info" data-ng-click=setNewVCWellness();>Add New VC Wellness Employee Program</button></div><div data-ng-if="paymentInfoTab.PaymentMethodType == 8 && currentCustomer.ApprovedPaymentMethods.length > 0 && currentCustomer.VCWellness"><button class="btn btn-danger" data-ng-click="currentCustomer.VCWellness = undefined;">Delete</button></div></div></div><hr><form class=form-horizontal name=forms.card data-ng-class="{submitted: forms.submitted[\'card\']}" novalidate unsaved-warning-form><fieldset><div data-ng-if="paymentInfoTab.PaymentMethodType == 1 && currentCustomer.ApprovedPaymentMethods.length > 0 && currentCustomer.CreditCards[paymentInfoTab.CreditCardIndex]"><div class=form-group><label for=NameOnCard class="col-md-3 control-label">Name on Card</label><div class=col-md-9><input class=form-control name=NameOnCard id=NameOnCard data-ng-model=currentCustomer.CreditCards[paymentInfoTab.CreditCardIndex].NameOnCard placeholder="Name on Card" required autocomplete=off><div class=error-container ng-show="forms.submitted[\'card\'] && forms.card.NameOnCard.$invalid"><small class=error ng-show=forms.card.NameOnCard.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.NameOnCard")}}</small> <small class=error ng-show=forms.card.NameOnCard.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["GeneralFieldNames.NameOnCard", "100"])}}</small> <small class=error ng-show="!forms.card.NameOnCard.$error.required && !forms.card.NameOnCard.$error.maxlength && forms.card.NameOnCard.$error.server">{{serverMessages.GetMessage(\'NameOnCard\', "CreditCards", paymentInfoTab.CreditCardIndex, "card")}}</small></div></div></div><div class=form-group><label for=CardType class="col-md-3 control-label">Card Type</label><div class=col-md-9><select class=form-control id=CardType name=CardType data-ng-model=currentCustomer.CreditCards[paymentInfoTab.CreditCardIndex].CardType ng-options="creditCardType.Key as creditCardType.Text for creditCardType in creditCardTypes" required autocomplete=off></select><div class=error-container ng-show="forms.submitted[\'card\'] && forms.card.CardType.$invalid"><small class=error ng-show=forms.card.CardType.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.CardType")}}</small> <small class=error ng-show="!forms.card.CardType.$error.required && forms.card.CardType.$error.server">{{serverMessages.GetMessage(\'CardType\', "CreditCards", paymentInfoTab.CreditCardIndex, "card")}}</small></div></div></div><div class=form-group><label for=CardNumber class="col-md-3 control-label">Card Number</label><div class=col-md-9><input class=form-control id=CardNumber name=CardNumber data-max-characters=16 data-ng-model=currentCustomer.CreditCards[paymentInfoTab.CreditCardIndex].CardNumber placeholder="Card Number" data-ng-maxlength="{{paymentInfoTab.CreditCard.CardType == 3 ? \'15\' : \'16\'}}" required autocomplete=off><div class=error-container ng-show="forms.submitted[\'card\'] && forms.card.CardNumber.$invalid"><small class=error ng-show=forms.card.CardNumber.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.CardNumber")}}</small> <small class=error ng-show=forms.card.CardNumber.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["GeneralFieldNames.CardNumber", paymentInfoTab.CreditCard.CardType == 3 ? \'15\' : \'16\'])}}</small> <small class=error ng-show="!forms.card.CardNumber.$error.required && !forms.card.CardNumber.$error.maxlength && forms.card.CardNumber.$error.server">{{serverMessages.GetMessage(\'CardNumber\', "CreditCards", paymentInfoTab.CreditCardIndex, "card")}}</small> <small class=error ng-show="!forms.card.CardNumber.$error.required && !forms.card.CardNumber.$error.maxlength && forms.card.CardNumber.$error.server">{{serverMessages.GetMessage(\'CardNumber\')}}</small></div></div></div><div class=form-group><label for=ExpirationDateMonth class="col-md-3 control-label">Expiration Date</label><div class=col-md-2><input class="form-control number" id=ExpirationDateMonth numbers-only data-max-characters=2 name=ExpirationDateMonth data-ng-model=currentCustomer.CreditCards[paymentInfoTab.CreditCardIndex].ExpirationDateMonth min=1 max=12 ng-pattern="/^\\d{1,2}?$/" placeholder=Month required autocomplete=off><div class=error-container ng-show="forms.submitted[\'card\'] && forms.card.ExpirationDateMonth.$invalid"><small class=error ng-show=forms.card.ExpirationDateMonth.$error.pattern>{{getValidationMessage("ValidationMessages.MonthFormat","GeneralFieldNames.ExpirationDateMonth")}}</small> <small class=error ng-show=forms.card.ExpirationDateMonth.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.ExpirationDateMonth")}}</small> <small class=error ng-show="!forms.card.ExpirationDateMonth.$error.pattern && !forms.card.ExpirationDateMonth.$error.required && forms.card.ExpirationDateMonth.$error.server">{{serverMessages.GetMessage(\'ExpirationDateMonth\', "CreditCards", paymentInfoTab.CreditCardIndex, "card")}}</small></div></div><div class=col-md-2><input class=form-control id=ExpirationDateYear numbers-only data-max-characters=2 name=ExpirationDateYear data-ng-model=currentCustomer.CreditCards[paymentInfoTab.CreditCardIndex].ExpirationDateYear min=1 max=99 ng-pattern="/^\\d{1,2}?$/" placeholder=Year required autocomplete=off><div class=error-container ng-show="forms.submitted[\'card\'] && forms.card.ExpirationDateYear.$invalid"><small class=error ng-show=forms.card.ExpirationDateYear.$error.pattern>{{getValidationMessage("ValidationMessages.YearFormat","GeneralFieldNames.ExpirationDateYear")}}</small> <small class=error ng-show=forms.card.ExpirationDateYear.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.ExpirationDateYear")}}</small> <small class=error ng-show="!forms.card.ExpirationDateYear.$error.pattern && !forms.card.ExpirationDateYear.$error.required && forms.card.ExpirationDateYear.$error.server">{{serverMessages.GetMessage(\'ExpirationDateYear\', "CreditCards", paymentInfoTab.CreditCardIndex, "card")}}</small></div></div></div><span class=legend>Billing Address</span><div class=form-group><div class=col-md-3></div><div class=col-md-3><button class="btn btn-info" id=sameCreditCardAsProfile data-ng-click=makeBillingAsShippingAddress();>Copy Shipping</button></div></div><div data-ng-include="\'app/modules/customer/partials/address.html\'" data-ng-repeat="model in [buildCreditCardAddressForPartial(currentCustomer.CreditCards, paymentInfoTab.CreditCardIndex)]"></div></div></fieldset></form><form class=form-horizontal name=forms.oac data-ng-class="{submitted: forms.submitted[\'oac\']}" novalidate unsaved-warning-form><fieldset><div data-ng-if="paymentInfoTab.PaymentMethodType == 2 && currentCustomer.ApprovedPaymentMethods.length > 0 && currentCustomer.Oac"><div class=form-group><label for=terms class="col-md-3 control-label">Terms:</label><div class=col-md-9><select class=form-control id=terms name=Terms data-ng-model=currentCustomer.Oac.Terms data-ng-options="term.Key as term.Text for term in ReferenceData.OacTerms" required></select></div></div><div class=form-group><label class="col-md-3 control-label" for=Fob>FOB:</label><div class=col-md-9><select class=form-control id=Fob name=Fob data-ng-model=currentCustomer.Oac.Fob data-ng-options="fob.Key as fob.Text for fob in ReferenceData.OacFob" required></select></div></div><span class=legend>Billing Address</span><div class=form-group><div class=col-md-3></div><div class=col-md-3><button class="btn btn-info" id=sameOacAsProfile data-ng-click=makeBillingAsShippingAddress();>Copy Shipping</button></div></div><div data-ng-include="\'app/modules/customer/partials/address.html\'" data-ng-repeat="model in [currentCustomer.Oac]"></div></div></fieldset></form><form class=form-horizontal name=forms.check data-ng-class="{submitted: forms.submitted[\'check\']}" novalidate unsaved-warning-form><fieldset><div data-ng-if="paymentInfoTab.PaymentMethodType == 3 && currentCustomer.ApprovedPaymentMethods.length > 0 && currentCustomer.Check"><span class=legend>Billing Address</span><div class=form-group><div class=col-md-3></div><div class=col-md-3><button class="btn btn-info" id=sameCheckAsProfile data-ng-click=makeBillingAsShippingAddress();>Copy Shipping</button></div></div><div data-ng-include="\'app/modules/customer/partials/address.html\'" data-ng-repeat="model in [currentCustomer.Check]"></div></div></fieldset></form><form class=form-horizontal name=forms.wiretransfer data-ng-class="{submitted: forms.submitted[\'wiretransfer\']}" novalidate unsaved-warning-form><fieldset><div data-ng-if="paymentInfoTab.PaymentMethodType == 6 && currentCustomer.ApprovedPaymentMethods.length > 0 && currentCustomer.WireTransfer"><span class=legend>Billing Address</span><div class=form-group><div class=col-md-3></div><div class=col-md-3><button class="btn btn-info" data-ng-click=makeBillingAsShippingAddress();>Copy Shipping</button></div></div><div data-ng-include="\'app/modules/customer/partials/address.html\'" data-ng-repeat="model in [currentCustomer.WireTransfer]"></div></div></fieldset></form><form class=form-horizontal name=forms.marketing data-ng-class="{submitted: forms.submitted[\'marketing\']}" novalidate unsaved-warning-form><fieldset><div data-ng-if="paymentInfoTab.PaymentMethodType == 7 && currentCustomer.ApprovedPaymentMethods.length > 0 && currentCustomer.Marketing"><span class=legend>Billing Address</span><div class=form-group><div class=col-md-3></div><div class=col-md-3><button class="btn btn-info" data-ng-click=makeBillingAsShippingAddress();>Copy Shipping</button></div></div><div data-ng-include="\'app/modules/customer/partials/address.html\'" data-ng-repeat="model in [currentCustomer.Marketing]"></div></div></fieldset></form><form class=form-horizontal name=forms.vcwellness data-ng-class="{submitted: forms.submitted[\'vcwellness\']}" novalidate unsaved-warning-form><fieldset><div data-ng-if="paymentInfoTab.PaymentMethodType == 8 && currentCustomer.ApprovedPaymentMethods.length > 0 && currentCustomer.VCWellness"><span class=legend>Billing Address</span><div class=form-group><div class=col-md-3></div><div class=col-md-3><button class="btn btn-info" data-ng-click=makeBillingAsShippingAddress();>Copy Shipping</button></div></div><div data-ng-include="\'app/modules/customer/partials/address.html\'" data-ng-repeat="model in [currentCustomer.VCWellness]"></div></div></fieldset></form><form class=form-horizontal name=forms.nc data-ng-class="{submitted: forms.submitted[\'nc\']}" novalidate unsaved-warning-form><fieldset><div data-ng-if="paymentInfoTab.PaymentMethodType == 4 && currentCustomer.ApprovedPaymentMethods.length > 0 && currentCustomer.NC"><span class=legend>Billing Address</span><div class=form-group><div class=col-md-3></div><div class=col-md-3><button class="btn btn-info" data-ng-click=makeBillingAsShippingAddress();>Copy Shipping</button></div></div><div data-ng-include="\'app/modules/customer/partials/address.html\'" data-ng-repeat="model in [currentCustomer.NC]"></div></div></fieldset></form></div></spinner-overlay></div></div></uib-tab><uib-tab data-ng-show=currentCustomer.Id heading="Order History" index=11><div class=container-fluid><div ng-controller=customerOrdersController onload="name = \'CustomerOrders\'" data-ng-include="\'app/modules/order/partials/customerOrdersList.html\'"></div></div></uib-tab><uib-tab data-ng-show=currentCustomer.Id heading=Auto-Ship index=12><div class=container-fluid><div ng-controller=customerAutoShipsController data-ng-include="\'app/modules/order/partials/autoShipList.html\'"></div></div></uib-tab><uib-tab heading=Notes index=customerNotesTab.index><div class=container-fluid><div ng-controller=manageCustomerNotesController onload="name = \'CustomerNotes\'" data-ng-include="\'app/modules/customer/partials/manageCustomerNotes.html\'"></div></div></uib-tab><uib-tab heading=Files index=customerFilesTab.index><div class=container-fluid><div ng-controller=manageCustomerFilesController onload="name = \'CustomerFiles\'" data-ng-include="\'app/modules/customer/partials/manageCustomerFiles.html\'"></div></div></uib-tab><uib-tab data-ng-show=currentCustomer.Id heading="Additional Actions" index=additionalActionsTab.index><div class="container container-left"><div class="well row"><spinner-overlay data-loading=addEditTracker.active()><form class=form-horizontal name=forms.uploadOrderType data-ng-class="{submitted: forms.submitted[\'uploadOrderType\']}" novalidate><fieldset><span class=legend>Import Orders</span><div class=form-group><label for=UploadOrdersType class="col-md-3 control-label">Upload Type</label><div class=col-md-9><select class=form-control id=Type name=Type data-ng-model=options.UploadOrderType ng-options="item.Key as item.Text for item in uploadOrderTypes" required autocomplete=off></select><div class=error-container ng-show="forms.submitted[\'uploadOrderType\'] && forms.uploadOrderType.Type.$invalid"><small class=error ng-show=forms.uploadOrderType.Type.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Upload Type")}}</small></div></div></div><div data-ng-if="options.UploadOrderType==4" class=form-group><label for=CreditCard class="col-md-3 control-label">Credit Card</label><div class=col-md-9><select class=form-control id=CreditCard name=CreditCard data-ng-model=options.UploadOrderCreditCard ng-options="item.Key as item.Text for item in uploadOrderCreditCards" required autocomplete=off></select><div class=error-container ng-show="forms.submitted[\'uploadOrderType\'] && forms.uploadOrderType.CreditCard.$invalid"><small class=error ng-show=forms.uploadOrderType.CreditCard.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Credit Card")}}</small></div></div></div><div data-ng-if="options.UploadOrderType==3" class=form-group><label class="col-md-3 control-label"></label><div class="col-md-9 form-control-static"><a target=_blank href=/assets/templates/ds_template.csv>Get a template</a></div></div><div data-ng-if="options.UploadOrderType==4" class=form-group><label class="col-md-3 control-label"></label><div class="col-md-9 form-control-static"><a target=_blank href=/assets/templates/gl_template.csv>Get a template</a></div></div><div data-ng-if="options.UploadOrderType==8" class=form-group><label class="col-md-3 control-label"></label><div class="col-md-9 form-control-static"><a target=_blank href=/assets/templates/ds_aafes_template.csv>Get a template</a></div></div><div data-ng-if=options.selectedOrderImportFile class=form-group><label class="col-md-3 control-label">File Name</label><div class="col-md-9 form-control-static"><span>{{options.selectedOrderImportFile.name}}</span></div></div><div class=form-group><label class="col-md-3 control-label">File</label><div class=col-md-9><button class="btn btn-primary margin-right-8px" ngf-select ngf-change=setOrderImportFile($files) accept=.csv,.edi>Locate file</button> <button data-ng-if=options.selectedOrderImportFile class="btn btn-success" data-ng-click=uploadOrderImportFile() ladda=uploadingOrdersImport>Upload</button></div></div></fieldset></form></spinner-overlay></div></div></uib-tab></uib-tabset></div></div></div></div></div>'),
a.put("app/modules/customer/partials/manageCustomerFiles.html",'<spinner-overlay data-loading=addEditTracker.active()><div class="well row customer-files"><div class=col-md-9><form class=form-horizontal name=fileForms.file novalidate unsaved-warning-form><fieldset><span class=legend>Upload New File</span><div class=form-group><label class="col-md-2 control-label">Description</label><div class=col-md-9><input class=form-control maxlength=500 placeholder=Description data-ng-model=options.currentFileDescription></div></div><div data-ng-if=uploadFile class=form-group><label class="col-md-2 control-label">File Name</label><div class="col-md-9 form-control-static"><span>{{uploadFile.name}}</span></div></div><div class=form-group><label class="col-md-2 control-label"></label><div class=col-md-9><div class="col-md-5 padding-0px"><button class="btn btn-primary margin-right-8px" ngf-select ngf-change=setFile($files)>Locate file</button> <button data-ng-if=uploadFile class="btn btn-success" data-ng-click=upload() ladda=uploading>Upload</button></div><div class="col-md-7 form-control-static"><div ng-if="logFileRequest.state==\'progress\'"><uib-progressbar animate=true value=logFileRequest.progress type=success><b>{{logFileRequest.progress}}%</b></uib-progressbar></div><div ng-if="logFileRequest.state==\'done\'"><uib-progressbar animate=true value=100 type=success><b>Done</b></uib-progressbar></div><div ng-if="logFileRequest.state==\'error\'"><uib-progressbar animate=true value=100 type=danger><b>Error</b></uib-progressbar></div></div></div></div><div class=form-group></div></fieldset></form></div><div class=col-md-12><table class="table table-striped table-hover"><thead><tr><th>File Name</th><th>Upload Date</th><th>Description</th><th>Actions</th></tr></thead><tbody><tr data-ng-repeat="(fileIndex, file) in files | orderBy:\'FileName\'"><td><a target=_blank data-ng-href="/api/Customer/GetFile?fileName={{file.FileName}}&publicId={{publicId}}&viewMode=true&buildNumber={{buildNumber}}">{{file.FileName}}</a></td><td>{{file.UploadDate | date:"MM/dd/yy"}}</td><td>{{file.Description}}</td><td><a title=Download class="btn btn-xs btn-success" target=_self data-ng-href="/api/Customer/GetFile?fileName={{file.FileName}}&publicId={{publicId}}&viewMode=false&buildNumber={{buildNumber}}"><i class="glyphicon glyphicon-download"></i></a> <button title=Delete class="btn btn-xs btn-danger" data-ng-click=deleteFile(file)><i class="glyphicon glyphicon-remove"></i></button></td></tr></tbody></table></div></div></spinner-overlay>'),a.put("app/modules/customer/partials/manageCustomerNotes.html",'<spinner-overlay data-loading=addEditTracker.active()><div class="well row"><div class=col-md-6><form class=form-horizontal name=childForms.customerNote data-ng-class="{submitted: childForms.submitted[\'customerNote\']}" novalidate unsaved-warning-form><fieldset><span class=legend>Notes</span><div class=form-group><label for=priority class="col-md-3 control-label">Priority</label><div class=col-md-9><select class=form-control name=Priority id=priority data-ng-model=customerNote.Priority data-ng-options="priority.Key as priority.Text for priority in ReferenceData.CustomerNotePriorities" required></select><div class=error-container ng-show="childForms.submitted[\'customerNote\'] && childForms.customerNote.Priority.$invalid"><small class=error ng-show=childForms.customerNote.Priority.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Priority")}}</small></div></div></div><div class=form-group><label for=note class="col-md-3 control-label">Note</label><div class=col-md-9><textarea type=text name=Text class=form-control data-ng-model=customerNote.Text id=note placeholder=Note rows=10 data-ng-maxlength=1000 required></textarea><div class=error-container ng-show="childForms.submitted[\'customerNote\'] && childForms.customerNote.Text.$invalid"><small class=error ng-show=childForms.customerNote.Text.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Text")}}</small> <small class=error ng-show=childForms.customerNote.Text.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["Text", "1000"])}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label"></label><div data-ng-if=!selectedCustomerNote class=col-md-3><button class="btn btn-info" data-ng-click=addNewCustomerNote();>Add Customer Note</button></div><div data-ng-if=selectedCustomerNote class=col-md-6><button class="btn btn-info margin-right-8px" data-ng-click=saveEdit();>Update</button> <button class="btn btn-danger" data-ng-click=cancelEdit();>Cancel</button></div></div></fieldset></form></div><div class=col-md-12><table class="table table-striped table-hover"><thead><tr><th>Priority</th><th>Notes</th><th>Added</th><th>Edited</th><th>Actions</th></tr></thead><tbody><tr data-ng-repeat="note in customerNotes | orderBy:DateEdited:reverse"><td>{{getReferenceItem(ReferenceData.CustomerNotePriorities, note.Priority).Text}}</td><td>{{note.Text}}</td><td>{{note.DateCreated | date:"MM/dd/yy"}}<br>{{note.DateCreated | date:"h:mm a"}}<br>{{note.AddedBy}}</td><td>{{note.DateEdited | date:"MM/dd/yy"}}<br>{{note.DateEdited | date:"h:mm a"}}<br>{{note.EditedBy}}</td><td><button data-ng-if=!note.Editing title=Edit class="btn btn-default btn-success btn-xs" data-ng-click=initEdit(note);><i class="glyphicon glyphicon-edit"></i></button> <button data-ng-if=!note.Editing title=Delete class="btn btn-default btn-danger btn-xs" data-ng-click=deleteCustomerNote($index);><i class="glyphicon glyphicon-remove"></i></button></td></tr></tbody></table></div></div></spinner-overlay>'),a.put("app/modules/customer/partials/mergeCustomers.html",'<div class="container-fluid merger-customers"><div class=well><div class=dublicate-emails-panel><uib-accordion class=collapsible-header-blue-link><uib-accordion-group><uib-accordion-heading><span class=legend>Customers With Dublicate Emails</span></uib-accordion-heading><spinner-overlay data-loading=dublicateEmailsRefreshTracker.active()><table id=dublicate-emails-data-grid class="table table-striped"><thead><tr><th>Email</th><th>Count</th><th>Actions</th></tr></thead><tbody><tr data-ng-repeat="item in dublicateEmails"><td>{{::item.Email}}</td><td>{{::item.Count}}</td><td><button title=Select data-ng-click=selectDublicateEmail(item) class="btn btn-default btn-success btn-xs">Select</button></td></tr></tbody></table></spinner-overlay><uib-pagination boundary-links=true total-items=dublicateTotalItems items-per-page=filter.Paging.PageItemCount data-ng-model=filter.Paging.PageIndex previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; data-ng-change="pageChanged();scrollTo(\'dublicate-emails-data-grid\');"></uib-pagination></uib-accordion-group></uib-accordion></div><span class=legend>Merge Customers</span><div data-ng-if=!primary><span class=legend>Step 1 - Select Primary Customer</span><div ng-controller=searchCustomersController onload="name = \'Step1SearchCustomers\'" data-ng-include="\'app/modules/customer/partials/searchCustomersList.html\'"></div></div><div data-ng-if=primary><span class=legend>Primary Customer</span><div class=row><div class="col-md-6 checkbox">Customer #: <a target=_blank ui-sref=index.oneCol.customerDetail({id:primary.Id})>{{primary.Id}}</a>, Email: {{primary.Email}}, Name: {{primary.Name}}</div><div class=col-md-6><button class="btn btn-success pull-right" data-ng-click=mergeCustomers(); ladda=refreshTracker.active() type=button>Merge Customers</button> <button class="btn btn-info pull-right margin-right-15px" data-ng-click=selectAnotherPrimary(); ladda=refreshTracker.active() type=button>Select Another Primary Customer</button> <button class="btn btn-info pull-right margin-right-15px" data-ng-click=userTheSameEmailStep2(); ladda=refreshTracker.active() type=button>Use The Same Email On The Second Step</button></div></div><span class=legend>Customers For Merge</span><table id=data-grid class="table table-striped table-hover"><thead><tr><th>Customer #</th><th>Type</th><th>Name</th><th>Email</th><th>Ship State/Province</th><th>Ship City</th><th>Last Order Placed</th><th>Total Orders</th><th>Status</th><th>Updated</th><th>Actions</th></tr></thead><tbody><tr data-ng-repeat="customer in selectedCustomers"><td><a target=_blank target=_blank ui-sref=index.oneCol.customerDetail({id:customer.Id})>{{::customer.Id}}</a></td><td><span data-ng-if="customer.IdObjectType == 1" class="label label-retail font-default">{{getReferenceItem(ReferenceData.ShortCustomerTypes, customer.IdObjectType).Text}}</span> <span data-ng-if="customer.IdObjectType == 2" class="label label-wholesale font-default">{{getReferenceItem(ReferenceData.ShortCustomerTypes, customer.IdObjectType).Text}}</span></td><td><a target=_blank ui-sref=index.oneCol.customerDetail({id:customer.Id})>{{::customer.Name}}</a></td><td>{{::customer.Email}}</td><td>{{::customer.State}}</td><td>{{::customer.City}}</td><td>{{::customer.LastOrderPlaced | date:"MM/dd/yy"}}<br>{{::customer.LastOrderPlaced | date:"h:mm a"}}</td><td>{{::customer.TotalOrders}}</td><td><span data-ng-if="customer.StatusCode == 1" class="label label-warning font-default">{{getReferenceItem(ReferenceData.CustomerStatuses, customer.StatusCode).Text}}</span> <span data-ng-if="customer.StatusCode == 2" class="label label-info font-default">{{getReferenceItem(ReferenceData.CustomerStatuses, customer.StatusCode).Text}}</span> <span data-ng-if="customer.StatusCode == 3" class="label label-danger font-default">{{getReferenceItem(ReferenceData.CustomerStatuses, customer.StatusCode).Text}}</span> <span data-ng-if="customer.StatusCode == 4" class="label label-danger font-default">{{getReferenceItem(ReferenceData.CustomerStatuses, customer.StatusCode).Text}}</span> <span data-ng-if="customer.StatusCode == 5" class="label label-danger font-default">{{getReferenceItem(ReferenceData.CustomerStatuses, customer.StatusCode).Text}}</span></td><td>{{::customer.DateEdited | date:"MM/dd/yy"}}<br>{{::customer.DateEdited | date:"h:mm a"}}<br>{{::customer.EditedBy}}</td><td><button title=Remove data-ng-click=unselectCustomer($index) class="btn btn-default btn-danger btn-xs">Remove</button></td></tr></tbody></table><span class=legend>Step 2 - Select Customers For Merge</span><div ng-controller=searchCustomersController onload="name = \'Step2SearchCustomers\'" data-ng-include="\'app/modules/customer/partials/searchCustomersList.html\'"></div></div></div></div>'),a.put("app/modules/customer/partials/profileAddress.html",'<div class=form-group><label for={{::model.formName}}_model_company class="col-md-3 control-label">Company</label><div class=col-md-9><input name=Company class=form-control id={{::model.formName}}_model_company data-ng-model=model.Address.Company placeholder=Company data-ng-maxlength=100 autocomplete=off data-ng-disabled="orderEditDisabled"><div class=error-container ng-show="forms.submitted[model.formName] && forms[model.formName].Company.$invalid"><small class=error ng-show=forms[model.formName].Company.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["Company", "100"])}}</small> <small class=error ng-show=forms[model.formName].Company.$error.server>{{serverMessages.GetMessage(\'Company\', model.collectionName, model.index, model.formName)}}</small></div></div></div><div class=form-group><label for={{::model.formName}}_model_firstname class="col-md-3 control-label">First Name</label><div class=col-md-9><input name=FirstName class=form-control data-ng-model=model.Address.FirstName id={{::model.formName}}_model_firstname placeholder="First Name" data-ng-required=!model.disableValidation data-ng-maxlength=100 autocomplete=off data-ng-disabled="orderEditDisabled"><div class=error-container ng-show="forms.submitted[model.formName] && forms[model.formName].FirstName.$invalid"><small class=error ng-show=forms[model.formName].FirstName.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.FirstName")}}</small> <small class=error ng-show=forms[model.formName].FirstName.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["GeneralFieldNames.FirstName", "100"])}}</small> <small class=error ng-show=forms[model.formName].FirstName.$error.server>{{serverMessages.GetMessage(\'FirstName\', model.collectionName, model.index, model.formName)}}</small></div></div></div><div class=form-group><label for={{::model.formName}}_model_lastname class="col-md-3 control-label">Last Name</label><div class=col-md-9><input name=LastName class=form-control id={{::model.formName}}_model_lastname data-ng-model=model.Address.LastName placeholder="Last Name" data-ng-required=!model.disableValidation data-ng-maxlength=100 autocomplete=off data-ng-disabled="orderEditDisabled"><div class=error-container ng-show="forms.submitted[model.formName] && forms[model.formName].LastName.$invalid"><small class=error ng-show=forms[model.formName].LastName.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.LastName")}}</small> <small class=error ng-show=forms[model.formName].LastName.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["GeneralFieldNames.LastName", "100"])}}</small> <small class=error ng-show=forms[model.formName].LastName.$error.server>{{serverMessages.GetMessage(\'LastName\', model.collectionName, model.index, model.formName)}}</small></div></div></div><div class=form-group><label for={{::model.formName}}_model_phone class="col-md-3 control-label">Phone</label><div class=col-md-9><input name=Phone class=form-control data-ng-model=model.Address.Phone id={{::model.formName}}_model_phone placeholder=Phone data-mask="(999) 999-9999? x99999" data-clean=true data-ng-maxlength=100 autocomplete=off data-ng-required=!model.disableValidation data-ng-disabled="orderEditDisabled"><div class=error-container ng-show="forms.submitted[model.formName] && forms[model.formName].Phone.$invalid"><small class=error ng-show=forms[model.formName].Phone.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Phone")}}</small> <small class=error ng-show=forms[model.formName].Phone.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["Phone", "100"])}}</small> <small class=error ng-show=forms[model.formName].Phone.$error.mask>{{getValidationMessage("ValidationMessages.FieldInvalid","Phone")}}</small> <small class=error ng-show=forms[model.formName].Phone.$error.server>{{serverMessages.GetMessage(\'Phone\', model.collectionName, model.index, model.formName)}}</small></div></div></div><div class=form-group><label for={{::model.formName}}_model_fax class="col-md-3 control-label">Fax</label><div class=col-md-9><input name=Fax class=form-control data-ng-model=model.Address.Fax id={{::model.formName}}_model_fax placeholder=Fax data-mask="(999) 999-9999? x99999" data-clean=true data-ng-maxlength=100 autocomplete=off data-ng-disabled="orderEditDisabled"><div class=error-container ng-show="forms.submitted[model.formName] && forms[model.formName].Fax.$invalid"><small class=error ng-show=forms[model.formName].Fax.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["Fax", "100"])}}</small> <small class=error ng-show=forms[model.formName].Fax.$error.mask>{{getValidationMessage("ValidationMessages.FieldInvalid","Fax")}}</small> <small class=error ng-show=forms[model.formName].Fax.$error.server>{{serverMessages.GetMessage(\'Fax\', model.collectionName, model.index, model.formName)}}</small></div></div></div>'),a.put("app/modules/customer/partials/searchCustomersList.html",'<div><form class=form-horizontal name=forms.filterForm data-ng-class="{submitted: submitted}" novalidate autocomplete=off><div style="display: none"><input id=PreventChromeAutocomplete name=PreventChromeAutocomplete autocomplete="address-level4"></div><div class="row form-group"><div class=col-md-3><div class="input-group autocomplete"><input name=Id class=form-control placeholder=Email data-ng-model=address.Email autocomplete=off autofocus typeahead-min-length=1 typeahead-wait-ms=200 uib-typeahead="item as item for item in getByStaticAutoComplete($viewValue,\'Email\')" typeahead-loading=loadingByEmail> <span class=input-group-addon><i ng-show=loadingByEmail class="glyphicon glyphicon-refresh"></i></span></div></div><div class=col-md-3><div class="input-group autocomplete"><input name=Id class=form-control placeholder="Last Name" data-ng-model=address.LastName autocomplete=off typeahead-min-length=1 typeahead-wait-ms=200 uib-typeahead="item as item for item in getByProfileAddressAutoComplete($viewValue,\'LastName\')" typeahead-loading=loadingByLastName> <span class=input-group-addon><i ng-show=loadingByLastName class="glyphicon glyphicon-refresh"></i></span></div></div><div class=col-md-3><input class=form-control placeholder="First Name" data-ng-model=address.FirstName autocomplete=off></div><div class=col-md-3><input class=form-control placeholder="Ship Address 1" data-ng-model=defaultShippingAddress.Address1 autocomplete=off></div></div><div class="row form-group"><div class=col-md-3><div class="input-group autocomplete"><input name=Id class=form-control placeholder="Customer #" data-ng-model=address.SearchText numbers-only autocomplete=off typeahead-min-length=1 typeahead-wait-ms=200 uib-typeahead="item as item for item in getByStaticAutoComplete($viewValue,\'Id\')" typeahead-loading=loadingById> <span class=input-group-addon><i ng-show=loadingById class="glyphicon glyphicon-refresh"></i></span></div></div><div class=col-md-3><div class="input-group autocomplete"><input name=Id class=form-control placeholder="Ship City" data-ng-model=defaultShippingAddress.City autocomplete=off typeahead-min-length=1 typeahead-wait-ms=200 uib-typeahead="item as item for item in getByDefaultShippingAddressAutoComplete($viewValue,\'City\')" typeahead-loading=loadingByCity> <span class=input-group-addon><i ng-show=loadingByCity class="glyphicon glyphicon-refresh"></i></span></div></div><div class=col-md-3><input class=form-control placeholder="Ship Zip" data-ng-model=defaultShippingAddress.Zip autocomplete=off></div><div class=col-md-3><input class=form-control placeholder=Phone data-ng-model=address.Phone autocomplete=off></div></div><div class="row form-group"><div class=col-md-3><div class="input-group autocomplete"><input name=Company class=form-control placeholder=Company data-ng-model=address.Company autocomplete=off typeahead-min-length=1 typeahead-wait-ms=200 uib-typeahead="item as item for item in getByProfileAddressAutoComplete($viewValue,\'Company\')" typeahead-loading=loadingByCompany> <span class=input-group-addon><i ng-show=loadingByCompany class="glyphicon glyphicon-refresh"></i></span></div></div></div></form><div class="row form-group"><div class=col-md-4><button class="btn btn-info" data-ng-click=filterCustomers(); type=button>Filter</button></div></div><hr><spinner-overlay data-loading=refreshTracker.active()><table id={{name}} class="table table-striped table-hover"><thead><tr><th class=sortable-column data-ng-click="applySort(\'Id\')"><span>Customer #</span> <span data-ng-if="filter.Sorting.Path == \'Id\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="applySort(\'IdObjectType\')"><span>Type</span> <span data-ng-if="filter.Sorting.Path == \'IdObjectType\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th>Name</th><th class=sortable-column data-ng-click="applySort(\'Email\')"><span>Email</span> <span data-ng-if="filter.Sorting.Path == \'Email\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th>Ship State/Province</th><th>Ship City</th><th>Last Order Placed</th><th>Total Orders</th><th class=sortable-column data-ng-click="applySort(\'Status\')"><span>Status</span> <span data-ng-if="filter.Sorting.Path == \'Status\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="applySort(\'Updated\')"><span>Updated</span> <span data-ng-if="filter.Sorting.Path == \'Updated\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=actions>Actions</th></tr></thead><tbody><tr data-ng-repeat="customer in viewCustomers"><td><a target=_blank ui-sref=index.oneCol.customerDetail({id:customer.Id})>{{::customer.Id}}</a></td><td><span data-ng-if="customer.IdObjectType == 1" class="label label-retail font-default">{{getReferenceItem(ReferenceData.ShortCustomerTypes, customer.IdObjectType).Text}}</span> <span data-ng-if="customer.IdObjectType == 2" class="label label-wholesale font-default">{{getReferenceItem(ReferenceData.ShortCustomerTypes, customer.IdObjectType).Text}}</span></td><td><a target=_blank ui-sref=index.oneCol.customerDetail({id:customer.Id})>{{::customer.Name}}</a></td><td>{{::customer.Email}}</td><td>{{::customer.State}}</td><td>{{::customer.City}}</td><td>{{::customer.LastOrderPlaced | date:"MM/dd/yy"}}<br>{{::customer.LastOrderPlaced | date:"h:mm a"}}</td><td>{{::customer.TotalOrders}}</td><td><span data-ng-if="customer.StatusCode == 1" class="label label-warning font-default">{{getReferenceItem(ReferenceData.CustomerStatuses, customer.StatusCode).Text}}</span> <span data-ng-if="customer.StatusCode == 2" class="label label-info font-default">{{getReferenceItem(ReferenceData.CustomerStatuses, customer.StatusCode).Text}}</span> <span data-ng-if="customer.StatusCode == 3" class="label label-danger font-default">{{getReferenceItem(ReferenceData.CustomerStatuses, customer.StatusCode).Text}}</span> <span data-ng-if="customer.StatusCode == 4" class="label label-danger font-default">{{getReferenceItem(ReferenceData.CustomerStatuses, customer.StatusCode).Text}}</span> <span data-ng-if="customer.StatusCode == 5" class="label label-danger font-default">{{getReferenceItem(ReferenceData.CustomerStatuses, customer.StatusCode).Text}}</span></td><td>{{::customer.DateEdited | date:"MM/dd/yy"}}<br>{{::customer.DateEdited | date:"h:mm a"}}<br>{{::customer.EditedBy}}</td><td><button title=Select data-ng-click=select(customer) class="btn btn-default btn-success btn-xs">Select</button></td></tr></tbody></table></spinner-overlay><uib-pagination boundary-links=true total-items=totalItems items-per-page=filter.Paging.PageItemCount data-ng-model=filter.Paging.PageIndex previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; max-size=10 data-ng-change="pageChanged();scrollTo(\'{{name}}\');"></uib-pagination></div>'),a.put("app/modules/customer/partials/shippingAddress.html",'<div data-ng-include="\'app/modules/customer/partials/address.html\'"></div><div class=form-group><label class="col-md-3 control-label"></label><div class=col-md-9><label class=radio-inline><input data-ng-model=model.Address.ShippingAddressType value=1 type=radio>Residential</label><label class=radio-inline><input data-ng-model=model.Address.ShippingAddressType value=2 type=radio>Commercial</label></div></div><div class=form-group><label for={{::model.formName}}_model_preferred class="col-md-3 control-label">Preferred Ship Method</label><div class=col-md-9><select name=PreferredShipMethod class=form-control data-ng-model=model.Address.PreferredShipMethod id={{::model.formName}}_model_preferred ng-options="item.Key as item.Text for item in ReferenceData.OrderPreferredShipMethod" required autocomplete=off data-ng-disabled=orderEditDisabled></select><div class=error-container ng-show="forms.submitted[model.formName] && forms[model.formName].PreferredShipMethod.$invalid"><small class=error ng-show=forms[model.formName].PreferredShipMethod.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Preferred Ship Method")}}</small> <small class=error ng-show=forms[model.formName].PreferredShipMethod.$error.server>{{serverMessages.GetMessage(\'PreferredShipMethod\', model.collectionName, model.index, model.formName)}}</small></div></div></div><div class=form-group><label for={{::model.formName}}_model_delivery class="col-md-3 control-label">Delivery Instructions (*Prints to Shipping Label):</label><div class=col-md-9><textarea type=text name=DeliveryInstructions id={{::model.formName}}_model_delivery class=form-control placeholder="Delivery Instructions" rows=5 data-ng-model=model.Address.DeliveryInstructions autocomplete=off data-ng-disabled=orderEditDisabled></textarea><div class=error-container ng-show="forms.submitted[model.formName] && forms[model.formName].DeliveryInstructions.$invalid"><small class=error ng-show=forms[model.formName].DeliveryInstructions.$error.server>{{serverMessages.GetMessage(\'DeliveryInstructions\', model.collectionName, model.index, model.formName)}}</small></div></div></div>'),a.put("app/modules/customer/partials/updateOrderShippingSection.html","<form class=form-horizontal name=forms.shipping data-ng-class=\"{submitted: forms.submitted['shipping']}\" novalidate unsaved-warning-form><fieldset><span class=legend>Shipping Address</span><div class=form-group><label for=shippingCustomerSaved class=\"col-md-3 control-label\"></label><div class=col-md-9><div class=checkbox><label><input type=checkbox id=shippingCustomerSaved data-ng-model=options.shippingCustomerSaved data-ng-change=shippingCustomerSavedChanged() data-ng-disabled=orderEditDisabled> <strong>Customer Saved Address</strong></label></div></div></div><div class=form-group><div class=col-md-3></div><div class=col-md-7><select class=form-control id=shippingAddresses data-ng-disabled=\"!options.shippingCustomerSaved || orderEditDisabled\" data-ng-model=shippingAddressTab.AddressIndex data-ng-options=\"idx as (shippingAddress.FirstName && shippingAddress.LastName && shippingAddress.Address1 ? (shippingAddress.FirstName + ' ' + shippingAddress.LastName + ' - ' + shippingAddress.Address1 + (shippingAddress.Default ? ' (Default)' : '')) : '') for (idx, shippingAddress) in currentCustomer.Shipping\"></select></div></div><div class=form-group data-ng-if=options.showCopyButtonsOnOrder><div class=col-md-3></div><div class=col-md-3><button class=\"btn btn-info\" data-ng-click=makeShippingAsBillingAddressOrder();>Copy Billing</button></div></div><div data-ng-include=\"'app/modules/customer/partials/shippingAddress.html'\" data-ng-repeat=\"model in [buildOrderShippingAddressForPartial(order.OnHold && !order.UpdateShippingAddressForCustomer)]\"></div></fieldset></form>"),a.put("app/modules/customer/partials/updateShippingSection.html",'<form class=form-horizontal name=forms.shipping data-ng-class="{submitted: forms.submitted[\'shipping\']}" novalidate unsaved-warning-form><fieldset><span class=legend>Shipping Address</span><div class=form-group><div class=col-md-3></div><div class=col-md-3><button class="btn btn-info" data-ng-click=setNewAddress();>Add New Address</button></div></div><div class=form-group><div class=col-md-3><button class="btn btn-success pull-right" data-ng-show=!currentCustomer.Shipping[shippingAddressTab.AddressIndex].Default data-ng-click=setDefaultAddress();>Set as Default</button></div><div class=col-md-7><select class=form-control id=shippingAddresses data-ng-model=shippingAddressTab.AddressIndex data-ng-options="idx as (shippingAddress.FirstName && shippingAddress.LastName && shippingAddress.Address1 ? (shippingAddress.FirstName + \' \' + shippingAddress.LastName + \' - \' + shippingAddress.Address1 + (shippingAddress.Default ? \' (Default)\' : \'\')) : \'\') for (idx, shippingAddress) in currentCustomer.Shipping"></select></div><div class=col-md-2><button class="btn btn-danger pull-right" data-ng-show=!currentCustomer.Shipping[shippingAddressTab.AddressIndex].Default data-ng-click=deleteShippingAddress();>Delete</button></div></div><div class=form-group><div class=col-md-3></div><div class=col-md-3><button class="btn btn-info" id=sameAsProfile data-ng-click=makeShippingAsBillingAddress();>Copy Billing</button></div></div><div data-ng-include="\'app/modules/customer/partials/shippingAddress.html\'" data-ng-repeat="model in [buildShippingAddressForPartial(currentCustomer.Shipping, shippingAddressTab.AddressIndex, order.OnHold && !order.UpdateShippingAddressForCustomer, order && true)]"></div></fieldset></form>'),a.put("app/modules/customer/partials/wholesalesReport.html",'<div class="container-fluid wholesales-report"><div class=well><span class=legend>Wholesale Account List</span><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.form.submitted}" novalidate><fieldset><div class="row form-group"><div class=col-md-3><select class=form-control name=IdTier data-ng-change=filterChanged(); data-ng-model=filter.IdTier ng-options="item.Key as item.Text for item in tiers"></select></div><div class=col-md-3><select class=form-control name=IdTradeClass data-ng-change=filterChanged(); data-ng-model=filter.IdTradeClass ng-options="item.Key as item.Text for item in tradeClasses"></select></div><div class=col-md-6><div class=checkbox><label><input type=checkbox name=OnlyActive data-ng-change=filterChanged(); data-ng-model="filter.OnlyActive"> Display only Active Accounts</label></div></div></div><div class="row form-group"><div class=col-md-12><button class="btn btn-info" data-ng-click=filterItems(); type=button>Filter</button> <a target=_self class="btn btn-primary pull-right" data-ng-href={{options.exportUrl}}>Export</a></div></div></fieldset></form><hr><spinner-overlay data-loading=refreshTracker.active()><table id=data-grid class="table table-striped table-hover margin-bottom-30px"><thead><tr><th>Account ID</th><th>Company Name</th><th>Tier</th><th>Trade Class</th><th>Sales (Last 90 days)</th><th>Sales (Last 12 months)</th><th>Last Sale Date</th><th>Inception Date</th><th>Contact First Name</th><th>Contact Last Name</th><th>Contact Email</th><th>Contact Phone</th></tr></thead><tbody><tr data-ng-repeat="item in items"><td><a ui-sref=index.oneCol.customerDetail({id:item.Id})>{{::item.Id}}</a></td><td>{{::item.Company}}</td><td>{{::item.Tier}}</td><td>{{::item.TradeClass}}</td><td>{{::item.SalesLastThreeMonths | currency}}</td><td>{{::item.SalesLastYear | currency}}</td><td>{{::item.LastOrderDate | date:"MM/dd/yy"}}<br>{{::item.LastOrderDate | date:"h:mm a"}}</td><td>{{::item.DateCreated | date:"MM/dd/yy"}}<br>{{::item.DateCreated | date:"h:mm a"}}</td><td>{{::item.FirstName}}</td><td>{{::item.LastName}}</td><td>{{::item.Email}}</td><td>{{::item.Phone}}</td></tr></tbody></table></spinner-overlay><uib-pagination boundary-links=true total-items=totalItems items-per-page=filter.Paging.PageItemCount data-ng-model=filter.Paging.PageIndex previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; data-ng-change="pageChanged();scrollTo(\'data-grid\');"></uib-pagination></div></div>'),a.put("app/modules/customer/partials/wholesaleSummaryReport.html",'<div class="container-fluid wholesales-summary"><div class=well><span class=legend>Wholesale Customer Summary Information</span><spinner-overlay data-loading=refreshTracker.active()><div class=summary><div class=form-group><div class="info-label text-right"><a ui-sref=index.oneCol.wholesalesListReport()>Accounts</a></div><strong class=ng-binding>{{summary.AllAccounts}}</strong></div><div class=form-group><div class="info-label text-right">Active Accounts</div><strong class=ng-binding>{{summary.ActiveAccounts}}</strong></div><div class=form-group><div class="info-label text-right">New Accounts</div><strong class=ng-binding>{{summary.NewActiveAccounts}}</strong></div><hr><span class=legend>Trade Classes</span><div class=form-group data-ng-repeat="item in summary.TradeClasses"><div class="info-label trade-class text-right">{{item.Name}}</div><strong class=ng-binding>{{item.Count}}</strong></div></div></spinner-overlay><hr><div class="form-group inline-form-group"><label for="" class=control-label>Monthly Wholesale Sales Last</label><select class=form-control data-ng-model=options.count data-ng-options="item as item for item in months"></select><label for="" class=control-label>Months.</label><label for=include class=control-label>Include current</label><label class=checkbox-inline><input type=checkbox id=include data-ng-model=options.include>&nbsp;</label><button class="btn btn-info" data-ng-click=refresh(); type=button>Refresh</button></div><hr><spinner-overlay data-loading=refreshItemsTracker.active()><table class="table table-striped"><thead><tr><th class=name></th><th class="month text-center" data-ng-repeat="item in items | orderBy:\'$index\':true">{{item.Month}}</th><th></th></tr></thead><tbody><tr><td class=text-right>New Account Sales</td><td class=text-right data-ng-repeat="item in items | orderBy:\'$index\':true">{{item.NewSales | currency}}</td><td></td></tr><tr><td class=text-right>Established Account Sales</td><td class=text-right data-ng-repeat="item in items | orderBy:\'$index\':true">{{item.EstablishedSales | currency}}</td><td></td></tr><tr><td class=text-right>Total Sales</td><td class=text-right data-ng-repeat="item in items | orderBy:\'$index\':true">{{item.Total | currency}}</td><td></td></tr></tbody></table></spinner-overlay></div></div>'),
a.put("app/modules/demo/partials/addNewCustomer.html",'<div class=container-fluid><div class=left-pane-controls><div class="well container-fluid"><div><button ui-sref=index.oneCol.customersList class="btn btn-success width-160px">Save</button></div><div class=margin-top-10px><button ui-sref=index.oneCol.customersList class="btn btn-default width-160px">Cancel</button></div></div></div><div class=right-pane-main><div class=container-fluid><div class=row><uib-tabset><uib-tab heading="Account Profile"><div class="container container-left"><div class="well row"><form class=form-horizontal><fieldset><span class=legend>Customer Type</span><div class=form-group><div class=col-md-3></div><div class=col-md-9><select class=form-control id=customerType><option>Retail</option><option>Wholesale</option></select></div></div><span class=legend>Profile Details</span><div class=form-group><label for=linked class="col-md-3 control-label">Linked to Affiliate</label><div class=col-md-9><input class=form-control id=linked placeholder="Linked to Affiliate"></div></div><div class=form-group><label for=company class="col-md-3 control-label">Company</label><div class=col-md-9><input class=form-control id=company placeholder=Company></div></div><div class=form-group><label for=firstName class="col-md-3 control-label">First Name</label><div class=col-md-9><input class=form-control id=firstName placeholder="First Name"></div></div><div class=form-group><label for=lastName class="col-md-3 control-label">Last Name</label><div class=col-md-9><input class=form-control id=lastName placeholder="Last Name"></div></div><div class=form-group><label for=address1 class="col-md-3 control-label">Address 1</label><div class=col-md-9><input class=form-control id=address1 placeholder="Address 1"></div></div><div class=form-group><label for=address2 class="col-md-3 control-label">Address 2</label><div class=col-md-9><input class=form-control id=address2 placeholder="Address 2"></div></div><div class=form-group><label for=city class="col-md-3 control-label">City</label><div class=col-md-9><input class=form-control id=city placeholder=City></div></div><div class=form-group><label for=country class="col-md-3 control-label">Country</label><div class=col-md-9><select class=form-control id=country><option value=0>Select</option><option value=AU>Australia</option><option value=CA>Canada</option><option value=CH>Chile</option><option value=DK>Denmark</option><option value=FR>France</option><option value=GB>Great Britain</option><option value=HK>Hong Kong</option><option value=IE>Ireland</option><option value=IS>Israel</option><option value=NO>Norway</option><option value=PH>Philippines</option><option value=PT>Portugal</option><option value=SG>Singapore</option><option value=KR>South Korea</option><option value=34>Spain</option><option value=SE>Sweden</option><option value=CH>Taiwan</option><option value=TL>Thailand</option><option selected value=US>United States</option></select></div></div><div class=form-group><label for=state class="col-md-3 control-label">State/Province</label><div class=col-md-9><select class=form-control id=state><option value=0>Select</option><option value=AL>Alabama</option><option value=AK>Alaska</option><option value=AR>Arkansas</option><option value=AZ>Arizona</option><option value=BVI>British Virgin Islands</option><option value=CA>California</option><option value=CO>Colorado</option><option value=CT>Connecticut</option><option value=DE>Delaware</option><option value=FL>Florida</option><option value=GA>Georgia</option><option value=GU>Guam</option><option value=HI>Hawaii</option><option value=IA>Iowa</option><option value=ID>Idaho</option><option value=IL>Illinois</option><option value=IN>Indiana</option><option value=KS>Kansas</option><option value=KY>Kentucky</option><option value=LA>Louisiana</option><option value=MA>Massachusetts</option><option value=MD>Maryland</option><option value=ME>Maine</option><option value=MI>Michigan</option><option value=MN>Minnesota</option><option value=MO>Missouri</option><option value=MP>Northern Mariana Islands</option><option value=MPI>Mariana Islands (Pacific)</option><option value=MS>Mississippi</option><option value=MT>Montana</option><option value=NC>North Carolina</option><option value=ND>North Dakota</option><option value=NE>Nebraska</option><option value=NH>New Hampshire</option><option value=NJ>New Jersey</option><option value=NM>New Mexico</option><option value=NV>Nevada</option><option value=NY>New York</option><option value=OH>Ohio</option><option value=OK>Oklahoma</option><option value=OR>Oregon</option><option value=PA>Pennsylvania</option><option value=PR>Puerto Rico</option><option value=RI>Rhode Island</option><option value=SC>South Carolina</option><option value=SD>South Dakota</option><option value=TN>Tennessee</option><option value=TX>Texas</option><option value=VI>U.S. Virgin Islands</option><option value=UT>Utah</option><option value=VA>Virginia</option><option value=VT>Vermont</option><option value=WA>Washington</option><option value=WI>Wisconsin</option><option value=WV>West Virginia</option><option value=WY>Wyoming</option><option value=AS>American Samoa</option><option value=DC>District of Columbia</option><option value=AE>AE</option><option value=AP>AP</option><option value=AA>AA</option></select></div></div><div class=form-group><label for=zip class="col-md-3 control-label">Zip</label><div class=col-md-9><input class=form-control id=zip placeholder=Zip></div></div><div class=form-group><label for=phone class="col-md-3 control-label">Phone</label><div class=col-md-9><input class=form-control id=phone placeholder=Phone></div></div><div class=form-group><label for=fax class="col-md-3 control-label">Fax</label><div class=col-md-9><input class=form-control id=fax placeholder=Fax></div></div><div class=form-group><label for=enterEmail class="col-md-3 control-label">Enter Email</label><div class=col-md-9><input class=form-control id=enterEmail placeholder="Enter Email"></div></div><div class=form-group><label for=reEnterEmail class="col-md-3 control-label">Re-enter Email</label><div class=col-md-9><input class=form-control id=reEnterEmail placeholder="Re-enter Email"></div></div><span class=legend>Set Password</span><div class=form-group><label for=enterPassword class="col-md-3 control-label">Enter new password</label><div class=col-md-9><input class=form-control id=enterPassword placeholder="Enter new password"></div></div><div class=form-group><label for=reEnterPassword class="col-md-3 control-label">Re-enter new password</label><div class=col-md-9><input class=form-control id=reEnterPassword placeholder="Re-enter new password"></div></div><span class=legend>Approved Payment Methods</span><div class=form-group><div class=col-md-3></div><div class=col-md-9><label class="checkbox-inline col-md-3"><input type=checkbox checked id=creditCard placeholder="Credit Card"> Credit Card</label><label class="checkbox-inline col-md-3"><input type=checkbox checked id=oac placeholder=OAC> OAC</label><label class="checkbox-inline col-md-3"><input type=checkbox checked id=check placeholder=Check> Check</label></div></div><div class=form-group><label for=state class="col-md-3 control-label">Default Payment Method</label><div class=col-md-9><select class=form-control id=ddCreditCard><option value=0>Credit Card</option></select></div></div><span class=legend>Automatic Order Specific Notes</span><div class=form-group><div class=col-md-3></div><div class=col-md-9><label class="checkbox-inline col-md-2"><input type=checkbox checked id=extraice placeholder=EXTRAICE> EXTRAICE</label><label class="checkbox-inline col-md-2"><input type=checkbox checked id=ib placeholder=IB> IB</label><label class="checkbox-inline col-md-2"><input type=checkbox checked id=in placeholder=IN> IN</label><label class="checkbox-inline col-md-2"><input type=checkbox checked id=ps placeholder=PS> PS</label><label class="checkbox-inline col-md-2"><input type=checkbox checked id=special placeholder=SPECIAL> SPECIAL</label></div></div><span class=legend>DNM / DNR</span><div class=form-group><div class=col-md-3></div><div class=col-md-9><label class="checkbox-inline col-md-3"><input type=checkbox checked id=doNotMail placeholder="Do Not Mail"> Do Not Mail</label><label class="checkbox-inline col-md-3"><input type=checkbox checked id=doNotRent placeholder="Do Not Rent"> Do Not Rent</label></div></div></fieldset></form></div></div></uib-tab><uib-tab heading="Shipping Address"><div class="container container-left"><div class="well row"><form class=form-horizontal><fieldset><span class=legend>Shipping Address</span><div class=form-group><label for=sameAsProfileAddress class="col-md-3 control-label">Same as profile address</label><div class=col-md-9><div class=checkbox><label><input type=checkbox checked id=sameAsProfileAddress></label></div></div></div><div class="form-group margin-top-30px"><label for=shipping_company class="col-md-3 control-label">Company</label><div class=col-md-9><input class=form-control id=shipping_company placeholder=Company></div></div><div class=form-group><label for=shipping_firstName class="col-md-3 control-label">First Name</label><div class=col-md-9><input class=form-control id=shipping_firstName placeholder="First Name"></div></div><div class=form-group><label for=shipping_lastName class="col-md-3 control-label">Last Name</label><div class=col-md-9><input class=form-control id=shipping_lastName placeholder="Last Name"></div></div><div class=form-group><label for=shipping_address1 class="col-md-3 control-label">Address 1</label><div class=col-md-9><input class=form-control id=shipping_address1 placeholder="Address 1"></div></div><div class=form-group><label for=shipping_address2 class="col-md-3 control-label">Address 2</label><div class=col-md-9><input class=form-control id=shipping_address2 placeholder="Address 2"></div></div><div class=form-group><label for=shipping_city class="col-md-3 control-label">City</label><div class=col-md-9><input class=form-control id=shipping_city placeholder=City></div></div><div class=form-group><label for=shipping_country class="col-md-3 control-label">Country</label><div class=col-md-9><select class=form-control id=shipping_country><option value=0>Select</option><option value=AU>Australia</option><option value=CA>Canada</option><option value=CH>Chile</option><option value=DK>Denmark</option><option value=FR>France</option><option value=GB>Great Britain</option><option value=HK>Hong Kong</option><option value=IE>Ireland</option><option value=IS>Israel</option><option value=NO>Norway</option><option value=PH>Philippines</option><option value=PT>Portugal</option><option value=SG>Singapore</option><option value=KR>South Korea</option><option value=34>Spain</option><option value=SE>Sweden</option><option value=CH>Taiwan</option><option value=TL>Thailand</option><option selected value=US>United States</option></select></div></div><div class=form-group><label for=shipping_state class="col-md-3 control-label">State/Province</label><div class=col-md-9><select class=form-control id=shipping_state><option value=0>Select</option><option value=AL>Alabama</option><option value=AK>Alaska</option><option value=AR>Arkansas</option><option value=AZ>Arizona</option><option value=BVI>British Virgin Islands</option><option value=CA>California</option><option value=CO>Colorado</option><option value=CT>Connecticut</option><option value=DE>Delaware</option><option value=FL>Florida</option><option value=GA>Georgia</option><option value=GU>Guam</option><option value=HI>Hawaii</option><option value=IA>Iowa</option><option value=ID>Idaho</option><option value=IL>Illinois</option><option value=IN>Indiana</option><option value=KS>Kansas</option><option value=KY>Kentucky</option><option value=LA>Louisiana</option><option value=MA>Massachusetts</option><option value=MD>Maryland</option><option value=ME>Maine</option><option value=MI>Michigan</option><option value=MN>Minnesota</option><option value=MO>Missouri</option><option value=MP>Northern Mariana Islands</option><option value=MPI>Mariana Islands (Pacific)</option><option value=MS>Mississippi</option><option value=MT>Montana</option><option value=NC>North Carolina</option><option value=ND>North Dakota</option><option value=NE>Nebraska</option><option value=NH>New Hampshire</option><option value=NJ>New Jersey</option><option value=NM>New Mexico</option><option value=NV>Nevada</option><option value=NY>New York</option><option value=OH>Ohio</option><option value=OK>Oklahoma</option><option value=OR>Oregon</option><option value=PA>Pennsylvania</option><option value=PR>Puerto Rico</option><option value=RI>Rhode Island</option><option value=SC>South Carolina</option><option value=SD>South Dakota</option><option value=TN>Tennessee</option><option value=TX>Texas</option><option value=VI>U.S. Virgin Islands</option><option value=UT>Utah</option><option value=VA>Virginia</option><option value=VT>Vermont</option><option value=WA>Washington</option><option value=WI>Wisconsin</option><option value=WV>West Virginia</option><option value=WY>Wyoming</option><option value=AS>American Samoa</option><option value=DC>District of Columbia</option><option value=AE>AE</option><option value=AP>AP</option><option value=AA>AA</option></select></div></div><div class=form-group><label for=shipping_zip class="col-md-3 control-label">Zip</label><div class=col-md-9><input class=form-control id=shipping_zip placeholder=Zip></div></div><div class=form-group><label for=shipping_phone class="col-md-3 control-label">Phone</label><div class=col-md-9><input class=form-control id=shipping_phone placeholder=Phone></div></div><div class=form-group><label for=shipping_fax class="col-md-3 control-label">Fax</label><div class=col-md-9><input class=form-control id=shipping_fax placeholder=Fax></div></div><div class=form-group><label for=shipping_email class="col-md-3 control-label">Email</label><div class=col-md-9><input class=form-control id=shipping_email placeholder=Email></div></div></fieldset></form></div></div></uib-tab><uib-tab heading="Customer Notes"><div class="container container-left"><div class="well row"><form class=form-horizontal><fieldset><span class=legend>Customer Notes</span><div class=form-group><label for=country class="col-md-3 control-label">Priority</label><div class=col-md-9><select class=form-control id=priority><option value=0>Normal Priority</option><option value=1>High Priority</option></select></div></div><div class=form-group><label for=note class="col-md-3 control-label">Note</label><div class=col-md-9><textarea type=text class=form-control id=note placeholder=Note rows=10></textarea></div></div></fieldset></form></div></div></uib-tab></uib-tabset></div></div></div></div>'),a.put("app/modules/demo/partials/addNewOrder.html",'<div class=container-fluid><div class=left-pane-controls><div class="well container-fluid"><div><button ui-sref=index.oneCol.productsList class="btn btn-success width-160px">Save</button></div><div class=margin-top-10px><button ui-sref=index.oneCol.locateCustomer class="btn btn-default width-160px">Cancel</button></div></div></div><div class=right-pane-main><div class=container-fluid><div class=row><uib-tabset><uib-tab heading=Order></uib-tab><uib-tab heading=History><div class=container-fluid><div class=row><a ui-sref=index.oneCol.dashboard>View Current Auto-Ships</a><div class=well><table class="table table-striped table-hover"><thead><tr><th>Status</th><th>Agent</th><th>Order Type</th><th>Order Date</th><th>Order ID</th><th>Order Total</th><th>Ship To</th><th>Actions</th></tr></thead><tbody><tr data-ng-repeat="order in orders" data-ng-class="{success: order.RowStatus == 1, info: order.RowStatus == 2, warning: order.RowStatus == 3}"><td><span data-ng-if="order.ProcessingStatus == 3" class="glyphicon glyphicon-minus-sign" aria-hidden=true></span> <span data-ng-if="order.ProcessingStatus == 2" class="glyphicon glyphicon-warning-sign" aria-hidden=true></span> <span data-ng-if="order.ProcessingStatus == 1" class="glyphicon glyphicon-pause" aria-hidden=true></span> &nbsp;{{order.Status}}</td><td>{{order.Agent}}</td><td>{{order.OrderType}}</td><td>{{order.OrderDate}}</td><td><a ui-sref=index.oneCol.dashboard>{{order.OrderId}}</a></td><td>{{order.OrderTotal}}</td><td>{{order.ShipTo}}</td><td><button ui-sref=index.col.dashboard class="btn btn-default btn-primary">Repeat</button></td></tr></tbody></table><ul class=pagination><li class=disabled><a href=#></a></li><li class=active><a href=#>1</a></li><li><a href=#>2</a></li><li><a href=#>3</a></li><li><a href=#>4</a></li><li><a href=#>5</a></li><li><a href=#></a></li></ul></div></div></div></uib-tab><uib-tab heading=Profile><div class="container container-left"><div class="well row"><form class=form-horizontal><fieldset><span class=legend>Customer Type</span><div class=form-group><div class=col-md-3></div><div class=col-md-9><select class=form-control id=customerType data-ng-model=currentCustomer.CustomerType><option value=1>Retail</option><option value=2>Wholesale</option></select></div></div><div data-ng-if="currentCustomer.CustomerType == 2"><div class=form-group><label for=taxExempt class="col-md-3 control-label">Tax Exempt</label><div class=col-md-9><select class=form-control id=taxExempt data-ng-model=currentCustomer.TaxExempt><option>Yes, Current Certificate</option><option>Sales Tax will be Paid</option></select></div></div><div class=form-group><label for=website class="col-md-3 control-label">Website</label><div class=col-md-9><input class=form-control id=website data-ng-model=currentCustomer.Website placeholder=Website></div></div><div class=form-group><label for=tier class="col-md-3 control-label">Tier</label><div class=col-md-9><select class=form-control id=tier data-ng-model=currentCustomer.Tier><option>Tier 1</option><option>Tier 2</option><option>Tier 3</option></select></div></div><div class=form-group><label for=tradeClass class="col-md-3 control-label">Trade Class</label><div class=col-md-9><select class=form-control id=tradeClass data-ng-model=currentCustomer.TradeClass><option value=1></option><option value=2>Retail - General</option><option value=3>Retail - Specialty Foods</option><option value=4>Retail - Health & Supplements</option><option value=14>Retail - Online</option><option value=5>Retail - All Other</option><option selected value=20>Retail - Drop Ship</option><option value=6>Buying Group & Co-Ops</option><option value=7>Clinical - General Practice</option><option value=8>Clinical - Optometrist</option><option value=9>Clinical - Chiropractor</option><option value=10>Clinical - Alternative Medicine</option><option value=15>Clinical - Homeopath</option><option value=16>Clinical - Naturopath</option><option value=17>Clinical - Osteopath</option><option value=18>Clinical - Traditional Chinese Medicine</option><option value=11>Clinical - All Other</option><option value=19>Spa & Massage</option><option value=12>Private Label & Bulk</option><option value=13>International</option></select></div></div><div class=form-group><label for=website class="col-md-3 control-label">Inception Date</label><div class=col-md-9><p class=input-group><input name=test class=form-control uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=date.InceptionDate is-open=date.opened datepicker-options=dateOptions ng-required="true"> <span class=input-group-btn><button type=button class="btn btn-default" ng-disabled=false ng-click=openDate($event)><i class="glyphicon glyphicon-calendar"></i></button></span></p></div></div></div><span class=legend>Profile Details</span><div class=form-group><label for=permanentlyUpdate class="col-md-3 control-label">Permanently Update Profile</label><div class=col-md-9><div class=checkbox><label><input type=checkbox data-ng-model=currentCustomer.PermanentlyUpdate></label></div></div></div><div class=form-group><label for=linked class="col-md-3 control-label">Linked to Affiliate</label><div class=col-md-9><input class=form-control id=linked data-ng-model=currentCustomer.LinkedToAffiliate placeholder="Linked to Affiliate"></div></div><div data-ng-include="\'app/modules/demo/partials/address.html\'"></div><div class=form-group><label for=currentEmail class="col-md-3 control-label">Enter Email</label><div class=col-md-9 style="padding-top: 9px"><span>{{currentCustomer.Email}}</span></div></div><div class=form-group><label for=enterEmail class="col-md-3 control-label">Enter Email</label><div class=col-md-9><input class=form-control id=enterEmail placeholder="Enter Email"></div></div><div class=form-group><label for=reEnterEmail class="col-md-3 control-label">Re-enter Email</label><div class=col-md-9><input class=form-control id=reEnterEmail placeholder="Re-enter Email"></div></div><span class=legend>Customer Files</span><div class=form-group><div class=container-fluid><div><table class="table table-striped table-hover"><thead><tr><th></th><th>Upload Date</th><th>Description</th><th>File Name</th><th>Actions</th></tr></thead><tbody><tr data-ng-repeat="file in currentCustomer.Files" data-ng-class="{success: order.RowStatus == 1, info: order.RowStatus == 2, warning: order.RowStatus == 3}"><td><input type=checkbox></td><td>{{file.UploadDate}}</td><td>{{file.Description}}</td><td>{{file.FileName}}</td><td><button ui-sref=index.col.dashboard class="btn btn-default btn-primary">View</button> <button ui-sref=index.col.dashboard class="btn btn-default btn-info">Download</button></td></tr></tbody></table></div><button ui-sref=index.col.dashboard class="btn btn-danger">Delete</button></div></div><span class=legend>Upload New File</span><div class=form-group><label for=fileDescription class="col-md-3 control-label">Description</label><div class=col-md-9><input class=form-control id=fileDescription placeholder=Description></div></div><div class=form-group><label class="col-md-3 control-label"></label><div class=col-md-9><input type=file placeholder="Choose File"></div></div><div class=form-group><label class="col-md-3 control-label"></label><div class=col-md-9><button class="btn btn-primary">Upload</button></div></div><span class=legend>Update Password</span><div class=form-group><label for=enterPassword class="col-md-3 control-label">Enter New Password</label><div class=col-md-9><input class=form-control id=enterPassword placeholder="Enter New Password"></div></div><div class=form-group><label for=reEnterPassword class="col-md-3 control-label">Re-enter New Password</label><div class=col-md-9><input class=form-control id=reEnterPassword placeholder="Re-enter New Password"></div></div><span class=legend>Approved Payment Methods</span><div class=form-group><div class=col-md-3></div><div class=col-md-9><label class="checkbox-inline col-md-3"><input type=checkbox data-ng-model=currentCustomer.CreditCardApproved id=creditCard placeholder="Credit Card"> Credit Card</label><label class="checkbox-inline col-md-3"><input type=checkbox data-ng-model=currentCustomer.OACApproved id=oac placeholder=OAC> OAC</label><label class="checkbox-inline col-md-3"><input type=checkbox data-ng-model=currentCustomer.CheckApproved id=check placeholder=Check> Check</label></div></div><div class=form-group><label for=state class="col-md-3 control-label">Default Payment Method</label><div class=col-md-9><select class=form-control id=ddCreditCard data-ng-model=currentCustomer.DefaultPaymentMethod><option value=0>Credit Card</option></select></div></div><span class=legend>Automatic Order Specific Notes</span><div class=form-group><div class=col-md-3></div><div class=col-md-9><label class="checkbox-inline col-md-2"><input type=checkbox data-ng-model=currentCustomer.Extraice id=extraice placeholder=EXTRAICE> EXTRAICE</label><label class="checkbox-inline col-md-2"><input type=checkbox data-ng-model=currentCustomer.Ib id=ib placeholder=IB> IB</label><label class="checkbox-inline col-md-2"><input type=checkbox data-ng-model=currentCustomer.In id=in placeholder=IN> IN</label><label class="checkbox-inline col-md-2"><input type=checkbox data-ng-model=currentCustomer.Ps id=ps placeholder=PS> PS</label><label class="checkbox-inline col-md-2"><input type=checkbox data-ng-model=currentCustomer.Special id=special placeholder=SPECIAL> SPECIAL</label></div></div><span class=legend>DNM / DNR</span><div class=form-group><div class=col-md-3></div><div class=col-md-9><label class="checkbox-inline col-md-3"><input type=checkbox id=doNotMail data-ng-model=currentCustomer.DoNotMail placeholder="Do Not Mail"> Do Not Mail</label><label class="checkbox-inline col-md-3"><input type=checkbox id=doNotRent data-ng-model=currentCustomer.DoNotRent placeholder="Do Not Rent"> Do Not Rent</label></div></div><span class=legend>Suspend User Account</span><div class=form-group><label for=suspendUserAccount class="col-md-3 control-label">Suspend User Account</label><div class=col-md-9><div class=checkbox><label><input type=checkbox id=suspendUserAccount data-ng-model=currentCustomer.SuspendUserAccount placeholder="Suspend User Account"></label></div></div></div><div class=form-group><label for=reason class="col-md-3 control-label">Reason</label><div class=col-md-9><textarea type=text class=form-control id=reason placeholder=Reason rows=10 data-ng-model=currentCustomer.Reason></textarea></div></div></fieldset></form></div></div></uib-tab><uib-tab heading=Billing><div class="container container-left"><div class="well row"><form class=form-horizontal><fieldset><span class=legend>Select Payment Method</span><div class=form-group><div class=col-md-3></div><div class="radio col-md-3"><label><input type=radio data-ng-model=currentCustomer.PaymentMethodType value=1 id=savedCreditCard> Saved Credit Card</label></div><div class=col-md-3><select class=form-control id=selectPaymentMethod data-ng-disabled="currentCustomer.PaymentMethodType != 1" data-ng-model=currentCustomer.SavedPaymentMethod><option selected value=0>Select Payment Method</option><option value=1>Visa, ending in 5443</option></select></div><div class=col-md-3 style=padding-top:9px><a href=# data-ng-click="">Delete this Credit Card</a></div></div><div class=form-group><div class=col-md-3></div><div class=col-md-9><div class=radio><label><input type=radio data-ng-model=currentCustomer.PaymentMethodType value=2 id=newCreditCard> New Credit Card</label></div></div></div><div class=form-group><div class=col-md-3></div><div class=col-md-9><div class=radio><label><input type=radio data-ng-model=currentCustomer.PaymentMethodType value=3 id=check> Check</label></div></div></div><div class=form-group><div class=col-md-3></div><div class=col-md-9><div class=radio><label><input type=radio data-ng-model=currentCustomer.PaymentMethodType value=4 id=noCharge> No Charge</label></div></div></div><div class=form-group><div class=col-md-3></div><div class=col-md-9><div class=radio><label><input type=radio data-ng-model=currentCustomer.PaymentMethodType value=5 id=prepaid> Prepaid</label></div></div></div><hr><div data-ng-if="currentCustomer.PaymentMethodType == 1 || currentCustomer.PaymentMethodType == 2"><div class=form-group><label for=nameOnCard class="col-md-3 control-label">Name on Card</label><div class=col-md-9><input class=form-control id=nameOnCard data-ng-model=currentCustomer.NameOnCard placeholder="Name on Card"></div></div><div class=form-group><label for=cardType class="col-md-3 control-label">Card Type</label><div class=col-md-9><select class=form-control id=cardType data-ng-model=currentCustomer.CardType><option value=1>MasterCard</option><option value=2>Visa</option><option value=3>American Express</option><option value=4>Discover</option></select></div></div><div class=form-group><label for=cardNumber class="col-md-3 control-label">Card Number</label><div class=col-md-9><input class=form-control id=cardNumber data-ng-model=currentCustomer.CardNumber placeholder=CardNumber></div></div><div class=form-group><label for=expirationDateMonth class="col-md-3 control-label">Expiration Date</label><div class=col-md-4><input class=form-control id=expirationDateMonth data-ng-model=currentCustomer.ExpirationDateMonth placeholder=Month></div><label class=col-md-1></label><div class=col-md-4><input class=form-control id=expirationDateYear data-ng-model=currentCustomer.ExpirationDateYear placeholder=Year></div></div></div><div data-ng-if="currentCustomer.PaymentMethodType == 3"><div class=form-group><label for=checkNumber class="col-md-3 control-label">Check #</label><div class=col-md-9><input class=form-control id=checkNumber data-ng-model=currentCustomer.CheckNumber placeholder="Check #"></div></div><div class=form-group><label class="col-md-3 control-label">Paid In Full - Taxes Included</label><div class=col-md-9><div class=checkbox><label><input type=checkbox></label></div></div></div></div><div data-ng-if="currentCustomer.PaymentMethodType == 1 || currentCustomer.PaymentMethodType == 2 || currentCustomer.PaymentMethodType == 3"><span class=legend>Billing Address</span><div class=form-group><label for=sameAsProfile class="col-md-3 control-label">Same as Profile Address</label><div class=col-md-9><div class=checkbox><label><input type=checkbox id=sameAsProfile data-ng-model=sameAsProfileAddress></label></div></div></div><div class=form-group data-ng-if="currentCustomer.PaymentMethodType == 1"><label for=permanentlyUpdatePaymentInfo class="col-md-3 control-label">Permanently Update Payment Info</label><div class=col-md-9><div class=checkbox><label><input type=checkbox id=permanentlyUpdatePaymentInfo data-ng-model=vurrentCustomer.PermanentlyUpdate></label></div></div></div><div class=form-group data-ng-if="currentCustomer.PaymentMethodType == 2"><label for=saveCardToProfile class="col-md-3 control-label">Save this Credit Card to Profile</label><div class=col-md-9><div class=checkbox><label><input type=checkbox id=saveCardToProfile></label></div></div></div><div class=form-group data-ng-if="currentCustomer.PaymentMethodType == 3"><label for=saveCheckToProfile class="col-md-3 control-label">Save this Check to Profile</label><div class=col-md-9><div class=checkbox><label><input type=checkbox id=saveCheckToProfile></label></div></div></div><div data-ng-include="\'app/modules/demo/partials/address.html\'"></div></div></fieldset></form></div></div></uib-tab><uib-tab heading=Shipping><div class="container container-left"><div class="well row"><form class=form-horizontal><fieldset><div class=form-group><label for=newAddress class="col-md-3 control-label">New Address</label><div class=col-md-9><div class=checkbox><label><input type=checkbox id=saveCheckToProfile data-ng-model=IsNewAddress></label></div></div></div><div class=form-group data-ng-if=!IsNewAddress><div class=col-md-3></div><div class=col-md-5><select class=form-control id=selectPaymentMethod data-ng-model=CurrentAddress data-ng-options="item as item.label for item in Addresses"></select></div><div class=col-md-2 data-ng-show="CurrentAddress.value == 2"><div class=checkbox><label><input type=checkbox> Set as Default</label></div></div><div class=col-md-2 style=padding-top:9px data-ng-show="CurrentAddress.value == 2"><a href=#>Delete this Address</a></div></div><span class=legend>Shipping Address</span><div class=form-group><label for=sameAsProfile1 class="col-md-3 control-label">Same as Profile Address</label><div class=col-md-9><div class=checkbox><label><input type=checkbox id=sameAsProfile1 data-ng-model=sameAsProfileAddress></label></div></div></div><div class=form-group data-ng-if=!IsNewAddress><label for=permanentlyUpdatePaymentInfo1 class="col-md-3 control-label">Permanently Update Payment Info</label><div class=col-md-9><div class=checkbox><label><input type=checkbox id=permanentlyUpdatePaymentInfo1 data-ng-model=vurrentCustomer.PermanentlyUpdate></label></div></div></div><div data-ng-include="\'app/modules/demo/partials/address.html\'"></div><div class=form-group><label for=shippingEmail class="col-md-3 control-label">Email</label><div class=col-md-9><input class=form-control id=shippingEmail placeholder=Email></div></div></fieldset></form></div></div></uib-tab><uib-tab heading=Notes><div class="container container-left"><div class="well row"><form class=form-horizontal><fieldset><span class=legend>Notes</span><div class=form-group><label for=country class="col-md-3 control-label">Priority</label><div class=col-md-9><select class=form-control id=priority><option value=0>Normal Priority</option><option value=1>High Priority</option></select></div></div><div class=form-group><label for=note class="col-md-3 control-label">Note</label><div class=col-md-9><textarea type=text class=form-control id=note placeholder=Note rows=10></textarea></div></div></fieldset></form></div></div><div class="container-fluid margin-top-30px"><div class="row well"><table class="table table-striped table-hover"><thead><tr><th>Date</th><th>Agent</th><th>Priority</th><th>Notes</th><th>Actions</th></tr></thead><tbody><tr data-ng-repeat="note in notes"><td>{{note.Date}}</td><td>{{note.Agent}}</td><td>{{note.Priority}}</td><td>{{note.Notes}}</td><td><button ui-sref=index.col.dashboard class="btn btn-default btn-danger">Delete</button></td></tr></tbody></table></div></div></uib-tab><uib-tab heading=Actions><div class="container container-left"><div class="well row"><span class=legend>Consolidate User Account</span><p>This section allows you to "merge" or combine two user accounts with each other into a single user account</p><p class=text-danger>Please beware, merging user accounts will delete 1 of the user accounts from the system. This action cannot be undone. Use this system only if you are fully aware of the procedures to consolidate a user account.</p><br><p>To begin make a selection below:</p><div class=radio><label><input type=radio data-ng-model=MergeDirection value=1 id=mergeDirectionFrom> Merge this user account with another user account (this user account will be deleted)</label></div><div class=radio><label><input type=radio data-ng-model=MergeDirection value=2 id=mergeDirectionTo> Merge another user account with this user account (the other user account will be deleted)</label></div><br><div data-ng-if="MergeDirection == 1"><p class=text-primary>Merge this user account with another user account (this user account will be deleted):</p><div class=row><label for=customerNumberTo class="col-md-5 control-label">Customer Number to merge this user account with</label><div class=col-md-7><input class=form-control id=customerNumberTo placeholder="Customer Number"></div></div></div><div data-ng-if="MergeDirection == 2"><p class=text-primary>Merge another user account with this user account (the other user account will be deleted):</p><div class=row><label for=customerNumberFrom class="col-md-5 control-label">Customer Number to merge with this user account</label><div class=col-md-7><input class=form-control id=customerNumberFrom placeholder="Customer Number"></div></div></div><div style=margin-top:20px><a ui-sref=index.oneCol.dashboard class="btn btn-primary">Merge Accounts</a> <a ui-sref=index.oneCol.dashboard class="pull-right btn btn-info">View Consolidation Report</a></div><hr><form class=form-horizontal><fieldset><span class=legend>Upload Type</span><div class=form-group><div class=col-md-3></div><div class=col-md-9><label class="checkbox-inline col-md-4"><input type=checkbox id=dropshipOrders selected> Dropship Orders</label><label class="checkbox-inline col-md-4"><input type=checkbox id=giftOrders> Gift Orders</label></div></div><span class=legend>Order List Upload</span><div class=form-group><div class=col-md-3></div><div class=col-md-9><select class=form-control><option selected value=1>Visa, ending in 5443</option></select></div></div><div class=form-group><label class="col-md-3 control-label">XML Order List</label><div class=col-md-9 style=padding-top:9px><input type=file placeholder="Choose File"></div></div></fieldset><a style=margin-top:20px ui-sref=index.oneCol.dashboard class="btn btn-primary">Upload</a></form></div></div></uib-tab><uib-tab heading="Reship / Refund"><div class=container-fluid><div class=row><div class=well><table class="table table-striped table-hover"><thead><tr><th>Status</th><th>Agent</th><th>Order Type</th><th>Order Date</th><th>Order ID</th><th>Order Total</th><th>Actions</th></tr></thead><tbody><tr data-ng-repeat="order in orders" data-ng-class="{success: order.RowStatus == 1, info: order.RowStatus == 2, warning: order.RowStatus == 3}"><td><span data-ng-if="order.ProcessingStatus == 3" class="glyphicon glyphicon-minus-sign" aria-hidden=true></span> <span data-ng-if="order.ProcessingStatus == 2" class="glyphicon glyphicon-warning-sign" aria-hidden=true></span> <span data-ng-if="order.ProcessingStatus == 1" class="glyphicon glyphicon-pause" aria-hidden=true></span> &nbsp;{{order.Status}}</td><td>{{order.Agent}}</td><td>{{order.OrderType}}</td><td>{{order.OrderDate}}</td><td><a ui-sref=index.oneCol.dashboard>{{order.OrderId}}</a></td><td>{{order.OrderTotal}}</td><td><button ui-sref=index.col.dashboard class="btn btn-default btn-primary">Refund</button> <button ui-sref=index.col.dashboard class="btn btn-default btn-info" data-ng-show="order.Status == \'Processed\'">Reship</button></td></tr></tbody></table><ul class=pagination><li class=disabled><a href=#></a></li><li class=active><a href=#>1</a></li><li><a href=#>2</a></li><li><a href=#>3</a></li><li><a href=#>4</a></li><li><a href=#>5</a></li><li><a href=#></a></li></ul></div></div></div></uib-tab></uib-tabset></div></div></div></div>'),
a.put("app/modules/demo/partials/address.html",'<div class=form-group><label class="col-md-3 control-label">Company</label><div class=col-md-9><input class=form-control data-ng-model=currentCustomer.Company placeholder=Company></div></div><div class=form-group><label class="col-md-3 control-label">First Name</label><div class=col-md-9><input class=form-control data-ng-model=currentCustomer.FirstName placeholder="First Name"></div></div><div class=form-group><label class="col-md-3 control-label">Last Name</label><div class=col-md-9><input class=form-control data-ng-model=currentCustomer.LastName placeholder="Last Name"></div></div><div class=form-group><label class="col-md-3 control-label">Address 1</label><div class=col-md-9><input class=form-control data-ng-model=currentCustomer.Address1 placeholder="Address 1"></div></div><div class=form-group><label class="col-md-3 control-label">Address 2</label><div class=col-md-9><input class=form-control data-ng-model=currentCustomer.Address2 placeholder="Address 2"></div></div><div class=form-group><label class="col-md-3 control-label">City</label><div class=col-md-9><input class=form-control data-ng-model=currentCustomer.City placeholder=City></div></div><div class=form-group><label class="col-md-3 control-label">Country</label><div class=col-md-9><select class=form-control data-ng-model=currentCustomer.Country><option value=0>Select</option><option value=AU>Australia</option><option value=CA>Canada</option><option value=CH>Chile</option><option value=DK>Denmark</option><option value=FR>France</option><option value=GB>Great Britain</option><option value=HK>Hong Kong</option><option value=IE>Ireland</option><option value=IS>Israel</option><option value=NO>Norway</option><option value=PH>Philippines</option><option value=PT>Portugal</option><option value=SG>Singapore</option><option value=KR>South Korea</option><option value=34>Spain</option><option value=SE>Sweden</option><option value=CH>Taiwan</option><option value=TL>Thailand</option><option selected value=US>United States</option></select></div></div><div class=form-group><label for=state class="col-md-3 control-label">State/Province</label><div class=col-md-9><select class=form-control id=state data-ng-model=currentCustomer.State><option value=0>Select</option><option value=AL>Alabama</option><option value=AK>Alaska</option><option value=AR>Arkansas</option><option value=AZ>Arizona</option><option value=BVI>British Virgin Islands</option><option value=CA>California</option><option value=CO>Colorado</option><option value=CT>Connecticut</option><option value=DE>Delaware</option><option value=FL>Florida</option><option value=GA>Georgia</option><option value=GU>Guam</option><option value=HI>Hawaii</option><option value=IA>Iowa</option><option value=ID>Idaho</option><option value=IL>Illinois</option><option value=IN>Indiana</option><option value=KS>Kansas</option><option value=KY>Kentucky</option><option value=LA>Louisiana</option><option value=MA>Massachusetts</option><option value=MD>Maryland</option><option value=ME>Maine</option><option value=MI>Michigan</option><option value=MN>Minnesota</option><option value=MO>Missouri</option><option value=MP>Northern Mariana Islands</option><option value=MPI>Mariana Islands (Pacific)</option><option value=MS>Mississippi</option><option value=MT>Montana</option><option value=NC>North Carolina</option><option value=ND>North Dakota</option><option value=NE>Nebraska</option><option value=NH>New Hampshire</option><option value=NJ>New Jersey</option><option value=NM>New Mexico</option><option value=NV>Nevada</option><option value=NY>New York</option><option value=OH>Ohio</option><option value=OK>Oklahoma</option><option value=OR>Oregon</option><option value=PA>Pennsylvania</option><option value=PR>Puerto Rico</option><option value=RI>Rhode Island</option><option value=SC>South Carolina</option><option value=SD>South Dakota</option><option value=TN>Tennessee</option><option value=TX>Texas</option><option value=VI>U.S. Virgin Islands</option><option value=UT>Utah</option><option value=VA>Virginia</option><option value=VT>Vermont</option><option value=WA>Washington</option><option value=WI>Wisconsin</option><option value=WV>West Virginia</option><option value=WY>Wyoming</option><option value=AS>American Samoa</option><option value=DC>District of Columbia</option><option value=AE>AE</option><option value=AP>AP</option><option value=AA>AA</option></select></div></div><div class=form-group><label for=zip class="col-md-3 control-label">Zip</label><div class=col-md-9><input class=form-control data-ng-model=currentCustomer.Zip id=zip placeholder=Zip></div></div><div class=form-group><label for=phone class="col-md-3 control-label">Phone</label><div class=col-md-9><input class=form-control data-ng-model=currentCustomer.Phone id=phone placeholder=Phone></div></div><div class=form-group><label for=fax class="col-md-3 control-label">Fax</label><div class=col-md-9><input class=form-control data-ng-model=currentCustomer.Fax id=fax placeholder=Fax></div></div>'),a.put("app/modules/demo/partials/addSubProduct.html",'<div class=modal-header><h3 class=modal-title>Add New Product SKU</h3></div><div class=modal-body><div class=form-horizontal><div class=form-group><div class=col-md-12><div class="fixed-accordion-row extra-spacing" data-ng-click=$event.stopPropagation()><label class=control-label>SKU</label><input class=form-control placeholder="" data-ng-model=subSku.SKU></div><div class=fixed-accordion-row data-ng-click=$event.stopPropagation()><label for=lblActive{{subSku.Id}} class=control-label>Active</label><div class=checkbox><label><input id=lblActive{{subSku.Id}} type=checkbox data-ng-model=subSku.Active></label></div></div><div class=fixed-accordion-row data-ng-click=$event.stopPropagation()><label for=lblHide{{subSku.Id}} class=control-label>Hide in Storefront</label><div class=checkbox><label><input id=lblHide{{subSku.Id}} type=checkbox data-ng-model=subSku.HideInStorefront></label></div></div><div class="fixed-accordion-row pull-right" data-ng-click=$event.stopPropagation()><label class=control-label>Order</label><input class="form-control half-size-input" placeholder="" data-ng-model=subSku.Order></div></div></div><div data-ng-include="\'app/modules/demo/partials/subProductBody.html\'"></div></div></div><div class=modal-footer><button class="btn btn-success" data-ng-click=ok()>Save</button> <button class="btn btn-default" data-ng-click=cancel()>Cancel</button></div>'),a.put("app/modules/demo/partials/buttons.html",'<a href=# class="btn btn-default">Default</a> <a href=# class="btn btn-primary">Primary</a> <a href=# class="btn btn-success">Success</a> <a href=# class="btn btn-info">Info</a> <a href=# class="btn btn-warning">Warning</a> <a href=# class="btn btn-danger">Danger</a> <a href=# class="btn btn-link">Link</a><br><a href=# class="btn btn-default disabled">Default</a> <a href=# class="btn btn-primary disabled">Primary</a> <a href=# class="btn btn-success disabled">Success</a> <a href=# class="btn btn-info disabled">Info</a> <a href=# class="btn btn-warning disabled">Warning</a> <a href=# class="btn btn-danger disabled">Danger</a> <a href=# class="btn btn-link disabled">Link</a><div class=btn-group><a href=# class="btn btn-default">Default</a> <a href=# class="btn btn-default dropdown-toggle" data-toggle=dropdown><span class=caret></span></a><ul class=dropdown-menu><li><a href=#>Action</a></li><li><a href=#>Another action</a></li><li><a href=#>Something else here</a></li><li class=divider></li><li><a href=#>Separated link</a></li></ul></div><div class=btn-group><a href=# class="btn btn-primary">Primary</a> <a href=# class="btn btn-primary dropdown-toggle" data-toggle=dropdown><span class=caret></span></a><ul class=dropdown-menu><li><a href=#>Action</a></li><li><a href=#>Another action</a></li><li><a href=#>Something else here</a></li><li class=divider></li><li><a href=#>Separated link</a></li></ul></div><div class=btn-group><a href=# class="btn btn-success">Success</a> <a href=# class="btn btn-success dropdown-toggle" data-toggle=dropdown><span class=caret></span></a><ul class=dropdown-menu><li><a href=#>Action</a></li><li><a href=#>Another action</a></li><li><a href=#>Something else here</a></li><li class=divider></li><li><a href=#>Separated link</a></li></ul></div><div class=btn-group><a href=# class="btn btn-info">Info</a> <a href=# class="btn btn-info dropdown-toggle" data-toggle=dropdown><span class=caret></span></a><ul class=dropdown-menu><li><a href=#>Action</a></li><li><a href=#>Another action</a></li><li><a href=#>Something else here</a></li><li class=divider></li><li><a href=#>Separated link</a></li></ul></div><div class=btn-group><a href=# class="btn btn-warning">Warning</a> <a href=# class="btn btn-warning dropdown-toggle" data-toggle=dropdown aria-expanded=false><span class=caret></span></a><ul class=dropdown-menu><li><a href=#>Action</a></li><li><a href=#>Another action</a></li><li><a href=#>Something else here</a></li><li class=divider></li><li><a href=#>Separated link</a></li></ul></div><a href=# class="btn btn-default btn-lg btn-block">Block level button</a><div class="btn-group btn-group-justified"><a href=# class="btn btn-default">Left</a> <a href=# class="btn btn-default">Middle</a> <a href=# class="btn btn-default">Right</a></div><div class=btn-toolbar><div class=btn-group><a href=# class="btn btn-default">1</a> <a href=# class="btn btn-default">2</a> <a href=# class="btn btn-default">3</a> <a href=# class="btn btn-default">4</a></div><div class=btn-group><a href=# class="btn btn-default">5</a> <a href=# class="btn btn-default">6</a> <a href=# class="btn btn-default">7</a></div><div class=btn-group><a href=# class="btn btn-default">8</a><div class=btn-group><a href=# class="btn btn-default dropdown-toggle" data-toggle=dropdown>Dropdown <span class=caret></span></a><ul class=dropdown-menu><li><a href=#>Dropdown link</a></li><li><a href=#>Dropdown link</a></li><li><a href=#>Dropdown link</a></li></ul></div></div></div><div class=btn-group-vertical><a href=# class="btn btn-default">Button</a> <a href=# class="btn btn-default">Button</a> <a href=# class="btn btn-default">Button</a> <a href=# class="btn btn-default">Button</a></div>'),a.put("app/modules/demo/partials/containers.html",'<div class=jumbotron><h1>Jumbotron</h1><p>This is a simple hero unit, a simple jumbotron-style component for calling extra attention to featured content or information.</p><p><a class="btn btn-primary btn-lg">Learn more</a></p></div>'),a.put("app/modules/demo/partials/countries.html",'<div data-ng-if="country.states && country.states.length > 0"><a class="btn btn-link pull-left" nodrag data-ng-click=toggle(this)><i class=glyphicon ng-class="{\'glyphicon-chevron-right\': collapsed, \'glyphicon-chevron-down\': !collapsed}"></i></a></div><div ui-tree-handle><div class="ya-treeview-content clearfix"><div class=line><label>{{country.Name}}</label></div><div class=ya-treview-buttons data-nodrag></div></div></div><ol ui-tree-nodes data-ng-model=country.states data-ng-class="{hidden: collapsed}" data-type={{country.Code}}><li ng-repeat="state in country.states" ui-tree-node><div ui-tree-handle><div class="ya-treeview-content clearfix"><div class=line><label>{{state.Name}}</label></div><div class=ya-treview-buttons data-nodrag></div></div></div></li></ol>'),a.put("app/modules/demo/partials/customerDetail.html",'<div class=container-fluid><div class=left-pane-controls><div class="well container-fluid"><div><button ui-sref=index.oneCol.customersList class="btn btn-success width-160px">Save</button></div><div class=btn-group style="margin-top: 10px"><button ui-sref=index.oneCol.customersList class="btn btn-info width-80px">Preview</button> <button ui-sref=index.oneCol.customersList class="btn btn-default width-80px">Cancel</button></div></div></div><div class=right-pane-main><div class=container-fluid><div class=row><uib-tabset><uib-tab heading="Awaiting for info..."></uib-tab></uib-tabset></div></div></div></div>'),a.put("app/modules/demo/partials/customers.html",'<div class=container-fluid><div class=well><table class="table table-striped table-hover"><thead><tr><th>Name</th><th>City</th><th>State/Province</th><th>Last Order Placed</th><th>Total Orders</th><th>Last Updated</th><th>Actions</th></tr></thead><tbody><tr data-ng-repeat="customer in customers"><td>{{customer.Name}}</td><td>{{customer.City}}</td><td>{{customer.State}}</td><td>{{customer.LastOrderPlaced}}</td><td>{{customer.TotalOrders}}</td><td>{{customer.LastUpdated}}</td><td><button ui-sref=index.oneCol.customerDetail class="btn btn-default btn-success">Details</button></td></tr></tbody></table><ul class=pagination><li class=disabled><a href=#></a></li><li class=active><a href=#>1</a></li><li><a href=#>2</a></li><li><a href=#>3</a></li><li><a href=#>4</a></li><li><a href=#>5</a></li><li><a href=#></a></li></ul></div></div>'),a.put("app/modules/demo/partials/dashboard.html",'<div class=container-fluid style="max-width: 1500px; margin: 0 auto"><div class=col-md-6><div class=well><nvd3-multi-bar-horizontal-chart data=monthlySalesData id=monthlySales xaxistickformat=xAxisTickFormatFunction() yaxistickformat=yAxisTickFormatFunction() height=250 showvalues=true showlegend=true valueformat=valueFormatFunction() delay=2400><svg></svg></nvd3-multi-bar-horizontal-chart></div><div class=well><nvd3-multi-bar-horizontal-chart data=topSellingProducts id=topSellingProducts xaxistickformat=xAxisTickFormatFunction() yaxistickformat=yAxisTickFormatFunction() height=250 showvalues=true showlegend=true valueformat=valueFormatFunction() delay=2400><svg></svg></nvd3-multi-bar-horizontal-chart></div></div><div class=col-md-6><div class=well><nvd3-multi-bar-horizontal-chart data=salesNewCustomers id=salesNewCustomers xaxistickformat=xAxisTickFormatFunction() yaxistickformat=yAxisTickFormatFunction() height=250 showvalues=true showlegend=true valueformat=valueFormatFunction() delay=2400><svg></svg></nvd3-multi-bar-horizontal-chart></div><div class=well><nvd3-multi-bar-horizontal-chart data=salesExistingCustomers id=salesExistingCustomers xaxistickformat=xAxisTickFormatFunction() yaxistickformat=yAxisTickFormatFunction() height=250 showvalues=true showlegend=true valueformat=valueFormatFunction() delay=2400><svg></svg></nvd3-multi-bar-horizontal-chart></div></div></div>'),a.put("app/modules/demo/partials/demoPage.html",'<h2 style="margin-left: 30px">Content goes here</h2>'),a.put("app/modules/demo/partials/demoPageWithSidebar.html",'<h2 style="margin-left: 30px">Content goes here</h2>'),a.put("app/modules/demo/partials/dialogs.html",'<div class=modal><div class=modal-dialog><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-hidden=true></button><h4 class=modal-title>Modal title</h4></div><div class=modal-body><p>One fine body</p></div><div class=modal-footer><button type=button class="btn btn-default" data-dismiss=modal>Close</button> <button type=button class="btn btn-primary">Save changes</button></div></div></div></div><button type=button class="btn btn-default" data-container=body data-toggle=popover data-placement=left data-content="Vivamus sagittis lacus vel augue laoreet rutrum faucibus." data-original-title="">Left</button> <button type=button class="btn btn-default" data-container=body data-toggle=popover data-placement=top data-content="Vivamus sagittis lacus vel augue laoreet rutrum faucibus." data-original-title="" aria-describedby=popover481269>Top</button> <button type=button class="btn btn-default" data-container=body data-toggle=popover data-placement=bottom data-content="Vivamus\nsagittis lacus vel augue laoreet rutrum faucibus." data-original-title="" aria-describedby=popover363370>Bottom</button> <button type=button class="btn btn-default" data-container=body data-toggle=popover data-placement=right data-content="Vivamus sagittis lacus vel augue laoreet rutrum faucibus." data-original-title="">Right</button>'),a.put("app/modules/demo/partials/forms.html",'<div class=well><form class=form-horizontal><fieldset><legend>Legend</legend><div class=form-group><label for=inputEmail class="col-md-2 control-label">Email</label><div class=col-md-10><input class=form-control id=inputEmail placeholder=Email></div></div><div class=form-group><label for=inputPassword class="col-md-2 control-label">Password</label><div class=col-md-10><input type=password class=form-control id=inputPassword placeholder=Password><div class=checkbox><label><input type=checkbox> Checkbox</label></div></div></div><div class=form-group><label for=textArea class="col-md-2 control-label">Textarea</label><div class=col-md-10><textarea class=form-control rows=3 id=textArea></textarea><span class=help-block>A longer block of help text that breaks onto a new line and may extend beyond one line.</span></div></div><div class=form-group><label class="col-md-2 control-label">Radios</label><div class=col-md-10><div class=radio><label><input type=radio name=optionsRadios id=optionsRadios1 value=option1 checked> Option one is this</label></div><div class=radio><label><input type=radio name=optionsRadios id=optionsRadios2 value=option2> Option two can be something else</label></div></div></div><div class=form-group><label for=select class="col-md-2 control-label">Selects</label><div class=col-md-10><select class=form-control id=select><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select><br><select multiple class=form-control><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select></div></div><div class=form-group><div class="col-md-10 col-md-offset-2"><button type=reset class="btn btn-default">Cancel</button> <button type=submit class="btn btn-primary">Submit</button></div></div></fieldset></form></div><div class=form-group><label class=control-label for=focusedInput>Focused input</label><input class=form-control id=focusedInput value="This is focused..."></div><div class=form-group><label class=control-label for=disabledInput>Disabled input</label><input class=form-control id=disabledInput placeholder="Disabled input here..." disabled></div><div class="form-group has-warning"><label class=control-label for=inputWarning>Input warning</label><input class=form-control id=inputWarning></div><div class="form-group has-error"><label class=control-label for=inputError>Input error</label><input class=form-control id=inputError></div><div class="form-group has-success"><label class=control-label for=inputSuccess>Input success</label><input class=form-control id=inputSuccess></div><div class=form-group><label class=control-label for=inputLarge>Large input</label><input class="form-control input-lg" id=inputLarge></div><div class=form-group><label class=control-label for=inputDefault>Default input</label><input class=form-control id=inputDefault></div><div class=form-group><label class=control-label for=inputSmall>Small input</label><input class="form-control input-sm" id=inputSmall></div><div class=form-group><label class=control-label>Input addons</label><div class=input-group><span class=input-group-addon>$</span> <input class=form-control> <span class=input-group-btn><button class="btn btn-default" type=button>Button</button></span></div></div>'),a.put("app/modules/demo/partials/heading.html","<h1>Heading 1</h1><h2>Heading 2</h2><h3>Heading 3</h3><h4>Heading 4</h4><h5>Heading 5</h5><h6>Heading 6</h6><p class=lead>Vivamus sagittis lacus vel augue laoreet rutrum faucibus dolor auctor.</p>"),a.put("app/modules/demo/partials/indicators.html",'<div class=progress><div class="progress-bar progress-bar-info" style="width: 20%"></div></div><div class=progress><div class="progress-bar progress-bar-success" style="width: 40%"></div></div><div class=progress><div class="progress-bar progress-bar-warning" style="width: 60%"></div></div><div class=progress><div class="progress-bar progress-bar-danger" style="width: 80%"></div></div><ul class=list-group><li class=list-group-item><span class=badge>14</span> Cras justo odio</li><li class=list-group-item><span class=badge>2</span> Dapibus ac facilisis in</li><li class=list-group-item><span class=badge>1</span> Morbi leo risus</li></ul>'),a.put("app/modules/demo/partials/manageRecipes.html",'<div class=container-fluid><div class=left-pane-controls><div class="well container-fluid"><div><button class="btn btn-success width-160px" ladda=editTracker.active() data-ng-click=save()>Save</button></div><div class="btn-group margin-top-10px"><button class="btn btn-default width-160px" data-ng-click=cancel()>Cancel</button></div></div></div><div class=right-pane-main><div class=container-fluid><div class=row><div class="container container-left"><div class="well row"><span class=legend>2 Levels</span><div ui-tree=treeOptions class=ya-treeview><ol ui-tree-nodes data-ng-model=countries data-type=country><li ng-repeat="country in countries" ui-tree-node data-ng-include="\'app/modules/demo/partials/countries.html\'"></li></ol></div></div></div></div></div></div></div>'),a.put("app/modules/demo/partials/navs.html",'<ul class="nav nav-tabs"><li class=active><a href=#home data-toggle=tab>Home</a></li><li><a href=#profile data-toggle=tab>Profile</a></li><li class=disabled><a>Disabled</a></li><li class=dropdown><a class=dropdown-toggle data-toggle=dropdown href=#>Dropdown <span class=caret></span></a><ul class=dropdown-menu><li><a href=#dropdown1 data-toggle=tab>Action</a></li><li class=divider></li><li><a href=#dropdown2 data-toggle=tab>Another action</a></li></ul></li></ul><div id=myTabContent class=tab-content><div class="tab-pane fade active in" id=home><p>Raw denim you probably haven\'t heard of them jean shorts Austin. Nesciunt tofu stumptown aliqua, retro synth master cleanse. Mustache cliche tempor, williamsburg carles vegan helvetica. Reprehenderit butcher retro keffiyeh dreamcatcher synth. Cosby sweater eu banh mi, qui irure terry richardson ex squid. Aliquip placeat salvia cillum iphone. Seitan aliquip quis cardigan american apparel, butcher voluptate nisi qui.</p></div><div class="tab-pane fade" id=profile><p>Food truck fixie locavore, accusamus mcsweeney\'s marfa nulla single-origin coffee squid. Exercitation +1 labore velit, blog sartorial PBR leggings next level wes anderson artisan four loko farm-to-table craft beer twee. Qui photo booth letterpress, commodo enim craft beer mlkshk aliquip jean shorts ullamco ad vinyl cillum PBR. Homo nostrud organic, assumenda labore aesthetic magna delectus mollit.</p></div><div class="tab-pane fade" id=dropdown1><p>Etsy mixtape wayfarers, ethical wes anderson tofu before they sold out mcsweeney\'s organic lomo retro fanny pack lo-fi farm-to-table readymade. Messenger bag gentrify pitchfork tattooed craft beer, iphone skateboard locavore carles etsy salvia banksy hoodie helvetica. DIY synth PBR banksy irony. Leggings gentrify squid 8-bit cred pitchfork.</p></div><div class="tab-pane fade" id=dropdown2><p>Trust fund seitan letterpress, keytar raw denim keffiyeh etsy art party before they sold out master cleanse gluten-free squid scenester freegan cosby sweater. Fanny pack portland seitan DIY, art party locavore wolf cliche high life echo park Austin. Cred vinyl keffiyeh DIY salvia PBR, banh mi before they sold out farm-to-table VHS viral locavore cosby sweater.</p></div></div><ul class=pagination><li class=disabled><a href=#></a></li><li class=active><a href=#>1</a></li><li><a href=#>2</a></li><li><a href=#>3</a></li><li><a href=#>4</a></li><li><a href=#>5</a></li><li><a href=#></a></li></ul><ul class="pagination pagination-lg"><li class=disabled><a href=#></a></li><li class=active><a href=#>1</a></li><li><a href=#>2</a></li><li><a href=#>3</a></li><li><a href=#></a></li></ul><ul class="pagination pagination-sm"><li class=disabled><a href=#></a></li><li class=active><a href=#>1</a></li><li><a href=#>2</a></li><li><a href=#>3</a></li><li><a href=#>4</a></li><li><a href=#>5</a></li><li><a href=#></a></li></ul><ul class=pager><li><a href=#>Previous</a></li><li><a href=#>Next</a></li></ul><ul class=pager><li class="previous disabled"><a href=#> Older</a></li><li class=next><a href=#>Newer </a></li></ul>'),a.put("app/modules/demo/partials/recipesCategories.html",'<div data-ng-if="item.children && item.children.length > 0"><a class="btn btn-link pull-left" nodrag data-ng-click=toggle(this)><i class=glyphicon ng-class="{\'glyphicon-chevron-right\': collapsed, \'glyphicon-chevron-down\': !collapsed}"></i></a></div><div ui-tree-handle><div class="ya-treeview-content clearfix"><div class=checkbox><label><input data-ng-checked=item.checked type=checkbox>{{item.label}}</label><span data-ng-if="item.status == 2" class="label label-warning category-status">Hidden</span></div><div class=ya-treview-buttons data-nodrag><a class="btn btn-success btn-xs" title=Edit nodrag data-ng-click=testEdit()><i class="glyphicon glyphicon-edit"></i></a> <a class="btn btn-danger btn-xs" title=Delete nodrag data-ng-click=testDelete()><i class="glyphicon glyphicon-remove"></i></a></div></div></div><ol ui-tree-nodes="" data-ng-model=item.children data-ng-class="{hidden: collapsed}" data-type=category2><li ng-repeat="item in item.children" ui-tree-node data-ng-include="\'app/modules/demo/partials/recipesCategories.html\'"></li></ol>'),a.put("app/modules/demo/partials/searchCustomer.html",'<div class="container container-left small-container"><div class=well><form class=form-horizontal><fieldset><legend>Find Customer</legend><div class=form-group><label for=customerNo class="col-md-3 control-label">Customer #</label><div class=col-md-9><input class=form-control id=customerNo placeholder=Customer></div></div><div class=form-group><label for=company class="col-md-3 control-label">Company</label><div class=col-md-9><input class=form-control id=company placeholder=Company></div></div><div class=form-group><label for=lastName class="col-md-3 control-label">Last Name</label><div class=col-md-9><input class=form-control id=lastName placeholder="Last Name"></div></div><div class=form-group><label for=firstName class="col-md-3 control-label">First Name</label><div class=col-md-9><input class=form-control id=firstName placeholder="First Name"></div></div><div class=form-group><label for=address1 class="col-md-3 control-label">Address 1</label><div class=col-md-9><input class=form-control id=address1 placeholder="Address 1"></div></div><div class=form-group><label for=address2 class="col-md-3 control-label">Address 2</label><div class=col-md-9><input class=form-control id=address2 placeholder="Address 2"></div></div><div class=form-group><label for=email class="col-md-3 control-label">Email</label><div class=col-md-9><input class=form-control id=email placeholder=Email></div></div><div class=form-group><label for=phone class="col-md-3 control-label">Phone</label><div class=col-md-9><input class=form-control id=phone placeholder=Phone></div></div><div class=form-group><label for=city class="col-md-3 control-label">City</label><div class=col-md-9><input class=form-control id=city placeholder=City></div></div><div class=form-group><label for=state class="col-md-3 control-label">State/Province</label><div class=col-md-9><input class=form-control id=state placeholder=state></div></div><div class=form-group><label for=zip class="col-md-3 control-label">Zip</label><div class=col-md-9><input class=form-control id=zip placeholder=Zip></div></div></fieldset><div class=margin-top-20px><a ui-sref=index.oneCol.customersList class="btn btn-primary btn-lg">Search</a> <a class="btn btn-info btn-lg">Reset</a></div></form></div></div>'),a.put("app/modules/demo/partials/searchProducts.html",'<div class="container container-left small-container"><div class=well><form class=form-horizontal><fieldset><legend>Find Product</legend><div class=form-group><label for=sku class="col-md-3 control-label">SKU</label><div class=col-md-9><input class=form-control id=sku placeholder=SKU></div></div><div class=form-group><label for=key class="col-md-3 control-label">Keyword(s)</label><div class=col-md-9><input class=form-control id=key placeholder=Keyword(s)><div class=checkbox><label><input type=checkbox> Search on exact phrase</label></div></div></div></fieldset><div class=margin-top-20px><a ui-sref=index.oneCol.productsList class="btn btn-primary btn-lg">Search</a> <a class="btn btn-info btn-lg">Reset</a></div></form></div></div>'),a.put("app/modules/demo/partials/subProductBody.html",'<div class=form-group><div class=col-md-12><div class=fixed-accordion-row><label class=control-label>Retail Price</label><div class=input-group><span class=input-group-addon>$</span> <input type=number class=form-control placeholder="" data-ng-model=subSku.RetailPrice></div></div><div class=fixed-accordion-row><label class=control-label>Wholesale Price</label><div class=input-group><span class=input-group-addon>$</span> <input type=number class=form-control placeholder="" data-ng-model=subSku.WholesalePrice></div></div><div class=fixed-accordion-row><label class=control-label>Stock</label><input type=number class="form-control half-size-input" placeholder="" data-ng-model=subSku.Stock></div><div class=fixed-accordion-row><label for=lblDisregard{{subSku.Id}} class=control-label>Disregard Stock</label><div class=checkbox><label><input id=lblDisregard{{subSku.Id}} type=checkbox data-ng-model=subSku.DisregardStock></label></div></div></div></div><div class=form-group><div class=col-md-12><div class=fixed-accordion-row><label for=lblDisallowSingle{{subSku.Id}} class=control-label>Disallow Single</label><div class=checkbox><label><input id=lblDisallowSingle{{subSku.Id}} type=checkbox></label></div></div><div class=fixed-accordion-row><label for=lblNonDiscountable{{subSku.Id}} class=control-label>Non-discountable</label><div class=checkbox><label><input id=lblNonDiscountable{{subSku.Id}} type=checkbox></label></div></div></div></div><div class=form-group><div class=col-md-12><div class=fixed-accordion-row><label class=control-label>Orphan Type</label><select class=form-control><option>None</option><option>Orphan-N</option></select></div></div></div><div class=form-group><div class=col-md-12><div class="fixed-accordion-row extra-spacing"><label for=lblAutoship{{subSku.Id}} class=control-label>Auto-Ship Product</label><div class=checkbox><label><input id=lblAutoship{{subSku.Id}} type=checkbox></label></div></div><div class="fixed-accordion-row extra-spacing"><label class=control-label>Auto-Ship Frequency</label><label class=checkbox-inline><input type=checkbox> 1</label><label class=checkbox-inline><input type=checkbox> 2</label><label class=checkbox-inline><input type=checkbox> 3</label><label class=checkbox-inline><input type=checkbox> 6</label></div><div class=fixed-accordion-row><label class=control-label>% Off</label><input type=number class="form-control half-size-input" placeholder=""></div></div></div><div class=form-group><div class=col-md-12><div class="fixed-accordion-row extra-spacing"><label class=control-label>Seller</label><select class=form-control><option>Seller 1</option><option>Seller 2</option></select></div><div class=fixed-accordion-row><label for=lblHideFromFeed{{subSku.Id}} class=control-label>Hide From Data Feed</label><div class=checkbox><label><input id=lblHideFromFeed{{subSku.Id}} type=checkbox></label></div></div></div></div>'),a.put("app/modules/demo/partials/subProductHeader.html",'<div class="fixed-accordion-row extra-spacing" data-ng-click=$event.stopPropagation()><label class=control-label>SKU</label><input class=form-control placeholder=SKU data-ng-model=subSku.SKU></div><div class=fixed-accordion-row data-ng-click=$event.stopPropagation()><label for=lblActive{{subSku.Id}} class=control-label>Active</label><div class=checkbox><label><input id=lblActive{{subSku.Id}} type=checkbox data-ng-model=subSku.Active></label></div></div><div class=fixed-accordion-row data-ng-click=$event.stopPropagation()><label for=lblHide{{subSku.Id}} class=control-label>Hide in Storefront</label><div class=checkbox><label><input id=lblHide{{subSku.Id}} type=checkbox data-ng-model=subSku.HideInStorefront></label></div></div>'),
a.put("app/modules/demo/partials/tables.html",'<table class="table table-striped table-hover"><thead><tr><th>#</th><th>Column heading</th><th>Column heading</th><th>Column heading</th></tr></thead><tbody><tr><td>1</td><td>Column content</td><td>Column content</td><td>Column content</td></tr><tr><td>2</td><td>Column content</td><td>Column content</td><td>Column content</td></tr><tr class=info><td>3</td><td>Column content</td><td>Column content</td><td>Column content</td></tr><tr class=success><td>4</td><td>Column content</td><td>Column content</td><td>Column content</td></tr><tr class=danger><td>5</td><td>Column content</td><td>Column content</td><td>Column content</td></tr><tr class=warning><td>6</td><td>Column content</td><td>Column content</td><td>Column content</td></tr><tr class=active><td>7</td><td>Column content</td><td>Column content</td><td>Column content</td></tr></tbody></table>'),a.put("app/modules/demo/partials/upload.html",'<style>.button {\n        -moz-appearance: button;\n        /* Firefox */\n        -webkit-appearance: button;\n        /* Safari and Chrome */\n        padding: 10px;\n        margin: 10px;\n        width: 70px;\n    }\n\n    .drop-box {\n        background: #F8F8F8;\n        border: 5px dashed #DDD;\n        width: 200px;\n        height: 65px;\n        text-align: center;\n        padding-top: 25px;\n        margin: 10px;\n    }\n\n    .dragover {\n        border: 5px dashed blue;\n    }</style><div>Username <input ng-model=username><br><br><input type=checkbox ng-model=multiple>upload multiple file<br><br>watching model:<div class=button ngf-select ng-model=files accept=.jpg,.gif,.png,.pdf ngf-multiple=true>Select File</div>Drop File:<div ngf-drop ngf-select ng-model=files class=drop-box ngf-drag-over-class=dragover ngf-multiple=true ngf-allow-dir=true accept=.jpg,.gif,.png,.pdf>Drop pdfs or images here or click to upload</div><div ngf-no-file-drop>File Drag/Drop is not supported for this browser</div>Files:<ul><li ng-repeat="f in files" style=font:smaller>{{f.name}}</li></ul>Upload Log:<pre>{{log}}</pre></div>'),a.put("app/modules/file/partials/addFolder.html",'<div class=modal-header><h3 class=modal-title>Add Directory</h3></div><div class=modal-body><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.form.submitted}" novalidate><fieldset><div class=form-group><label class="col-md-3 control-label">Directory</label><div class=col-md-9><input name=Directory class=form-control placeholder=Name data-ng-model=directory.Name ng-pattern="/^[A-Za-z0-9]{1}[A-Za-z0-9-_/.]*$/" required><div class=error-container ng-show="forms.form.submitted && forms.form.Directory.$invalid"><small class=error ng-show=forms.form.Directory.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Directory")}}</small> <small class=error ng-show=forms.form.Directory.$error.pattern>{{getValidationMessage("ValidationMessages.FieldNameInvalidFormat","Directory")}}</small> <small class=error ng-show=forms.form.Directory.$error.server>{{serverMessages.GetMessage(\'Directory\')}}</small></div></div></div></fieldset></form></div><div class=modal-footer><button class="btn btn-success" ladda=saveTracker.active() data-ng-click=save()>Save</button> <button class="btn btn-default" data-ng-click=cancel()>Cancel</button></div>'),a.put("app/modules/file/partials/filesManagement.html",'<div class=file-manager><div class="top-area container-fluid"><div class=add-file-pane><div class="well container-fluid"><div><div ngf-drop="" ngf-select="" ngf-change=uploadFiles($files) class="drop-box ng-pristine ng-valid" ngf-drag-over-class=dragover ngf-multiple=true ngf-allow-dir=true accept=.jpg,.jpeg,.gif,.png,.pdf>Drop media here or click to upload</div><div class=drop-box-disabled ngf-no-file-drop="" style="display: none">File Drag/Drop is not supported for this browser</div></div></div></div><div class=status-pane><div class="well container-fluid"><div class=wrapper><div data-ng-repeat="request in logRequests"><div class=row><div ng-if="request.type==\'upload\'" class=col-md-4><strong>Upload:</strong>&nbsp;{{request.name}}</div><div ng-if="request.type==\'delete\'" class=col-md-4><strong>Delete:</strong>&nbsp;{{request.name}}</div><div ng-if="request.state==\'progress\'" class=col-md-3><uib-progressbar animate=true value=request.progress type=success><b>{{request.progress}}%</b></uib-progressbar></div><div ng-if="request.state==\'done\'" class=col-md-3><uib-progressbar animate=true value=100 type=success><b>Done</b></uib-progressbar></div><div ng-if="request.state==\'error\'" class=col-md-3><uib-progressbar animate=true value=100 type=danger><b>Error</b></uib-progressbar></div><div ng-if="request.state==\'error\'" class="col-md-5 error">{{request.messages}}</div></div></div></div></div></div></div><div class="work-area container-fluid"><div class=left-pane><div class="well container-fluid"><spinner-overlay data-loading=refreshDirectoriesTracker.active()><div class=wrapper><div><div ui-tree data-drag-enabled=false class=ya-treeview><ol ui-tree-nodes="" data-ng-model=directories><li ng-repeat="item in directories" ui-tree-node collapsed=false selected data-ng-include="\'app/modules/file/partials/foldersTree.html\'"></li></ol></div></div></div></spinner-overlay></div></div><div class=center-pane><div class=container-fluid><div class=row><div class="container-fluid container-left"><div class="well row"><spinner-overlay data-loading=refreshFilesTracker.active()><div class="row form-group"><div class=col-md-12><div class=input-group><input class=form-control placeholder="File Name" data-ng-model=filter.Name> <span class=input-group-btn><button class="btn btn-info" type=button data-ng-click=filterFilesRequest()>Filter</button></span></div></div></div><div><table id=data-grid class="table table-striped table-hover"><thead><tr><th>Name</th><th class=width-140px>Updated</th><th class=width-80px>Size</th><th class=width-80px>Actions</th></tr></thead><tbody class=wrapper></tbody></table><uib-pagination boundary-links=true total-items=totalItems items-per-page=filter.Paging.PageItemCount data-ng-model=filter.Paging.PageIndex previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; data-ng-change="pageChanged();scrollTo(\'data-grid\');"></uib-pagination></div></spinner-overlay></div></div></div></div></div><div class=right-pane><div class="well container-fluid"><div class=wrapper><div class=image-box><a ng-if=selectedFile.PreviewUrl target=_blank href={{selectedFile.PreviewUrl}}><img img-load=selectedFileImgLoad($event) ng-src="{{selectedFile.PreviewUrl}}"></a><div ng-if=selectedFile.Dimensions>{{selectedFile.Dimensions}}</div><div>{{selectedFile.SizeMessage}}</div></div></div></div></div></div></div>'),a.put("app/modules/file/partials/foldersTree.html",'<div data-ng-if="item.Directories && item.Directories.length > 0"><a class="btn btn-link pull-left" data-nodrag data-ng-click=toggle(this)><i class=glyphicon ng-class="{\'glyphicon-chevron-right\': collapsed, \'glyphicon-chevron-down\': !collapsed}"></i></a></div><div ui-tree-handle ng-class="{\'selected\': item.selected}" ng-click=selectDirectory(item.FullRelativeName)><div class="ya-treeview-content clearfix"><div class=line><label>{{item.Name}}</label></div><div class=wrapper-ya-treview-buttons><div class=ya-treview-buttons data-nodrag><a class="btn btn-success btn-xs" title=Add nodrag data-ng-click="addDirectory(item.FullRelativeName); $event.stopPropagation();"><i class="glyphicon glyphicon-plus"></i></a> <a class="btn btn-danger btn-xs" title=Delete nodrag data-ng-if="item.FullRelativeName!=\'/\' && (!item.Directories || item.Directories.length == 0)" ladda=deleteTracker.active() data-ng-click="deleteDirectory(item); $event.stopPropagation();"><i class="glyphicon glyphicon-remove"></i></a></div></div></div></div><ol ui-tree-nodes="" data-ng-model=item.Directories data-ng-class="{hidden: collapsed}"><li ng-repeat="item in item.Directories" collapsed=true ui-tree-node data-ng-include="\'app/modules/file/partials/foldersTree.html\'"></li></ol>'),a.put("app/modules/file/partials/previewFile.html",'<div class="modal-body file-preview"><div class=image-box><img src="{{previewUrl}}"></div></div><div class=modal-footer><button class="btn btn-default" data-ng-click=cancel()>Cancel</button></div>'),a.put("app/modules/file/partials/selectFile.html",'<div class=modal-header><h3 class=modal-title>Select Image</h3></div><div class=modal-body data-ng-include="\'app/modules/file/partials/filesManagement.html\'"></div><div class=modal-footer><button class="btn btn-success" data-ng-click=save()>Select</button> <button class="btn btn-default" data-ng-click=cancel()>Cancel</button></div>'),a.put("app/modules/gc/partials/gcDetail.html",'<div class=container-fluid><div class=left-pane-controls><div class="well container-fluid"><div><button class="btn btn-success width-160px" ladda=editTracker.active() data-ng-click=save() unsaved-warning-clear>Save</button></div><div class="btn-group margin-top-10px"><button class="btn btn-info width-80px" data-ng-click=send()>Send</button> <button cancel-button-default-state=index.oneCol.manageGCs cancel-button class="btn btn-default width-80px">Cancel</button></div><div class=margin-top-10px><button class="btn btn-primary width-160px" ui-sref=index.oneCol.manageGCs>Manage All</button></div></div></div><div class=right-pane-main><div class=container-fluid><div class=row><uib-tabset><uib-tab heading="Gift Certificate Details" active=detailsTab.active><div class="container container-left"><div class="well row"><spinner-overlay data-loading=refreshTracker.active()><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.form.submitted}" novalidate unsaved-warning-form><fieldset><span class=legend>General Information</span><div class=form-group><label for=type class="col-md-3 control-label">Active</label><div class=col-md-9><div class=checkbox><label><input type=checkbox name=Active placeholder=Active data-ng-model=gc.StatusCode data-ng-true-value=2 data-ng-false-value="1"></label></div></div></div><div class=form-group><label class="col-md-3 control-label">GC Code</label><div class=col-md-9><input name=GCCode class=form-control placeholder="GC Code" data-ng-model=gc.Code disabled></div></div><div class=form-group><label for=type class="col-md-3 control-label">Amount</label><div class=col-md-9><div class=input-group><span class=input-group-addon>$</span> <input name=Balance class=form-control placeholder=Amount money max=100000 min=0.00 data-ng-model=gc.Balance required></div><div class=error-container ng-show="forms.form.submitted && forms.form.Balance.$invalid"><small class=error ng-show=forms.form.Balance.$error.parse>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Amount")}}</small> <small class=error ng-show=forms.form.Balance.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Amount")}}</small> <small class=error ng-show=forms.form.Balance.$error.max>{{getValidationMessage("ValidationMessages.FieldMax","GeneralFieldNames.Amount",1000000)}}</small> <small class=error ng-show=forms.form.Balance.$error.min>{{getValidationMessage("{0} must be over $0.00","GeneralFieldNames.Amount")}}</small> <small class=error ng-show=forms.form.Balance.$error.server>{{serverMessages.GetMessage(\'Balance\')}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label">First Name</label><div class=col-md-9><input name=FirstName class=form-control placeholder="First Name" data-ng-model=gc.FirstName><div class=error-container ng-show="forms.form.submitted && forms.form.FirstName.$invalid"><small class=error ng-show=forms.form.FirstName.$error.server>{{serverMessages.GetMessage(\'FirstName\')}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label">Last Name</label><div class=col-md-9><input name=LastName class=form-control placeholder="Last Name" data-ng-model=gc.LastName><div class=error-container ng-show="forms.form.submitted && forms.form.LastName.$invalid"><small class=error ng-show=forms.form.LastName.$error.server>{{serverMessages.GetMessage(\'LastName\')}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label">Email</label><div class=col-md-9><input type=email name=Email class=form-control placeholder=Email data-ng-model=gc.Email><div class=error-container ng-show="forms.form.submitted && forms.form.Email.$invalid"><small class=error ng-show=forms.form.Email.$error.email>{{getValidationMessage("ValidationMessages.EmailFormat","GeneralFieldNames.Email")}}</small> <small class=error ng-show=forms.form.Email.$error.server>{{serverMessages.GetMessage(\'Email\')}}</small></div></div></div></fieldset></form></spinner-overlay></div></div></uib-tab><uib-tab heading="Orders Used On" active=orders.active><div class=container-fluid><div class="well row orders"><spinner-overlay data-loading=refreshTracker.active()><table class="table table-striped order-statuses"><thead><tr><th class=status>Status</th><th>Updated</th><th>Order Source</th><th>Order Date</th><th>Customer</th><th>Order #</th><th>Order Total</th><th>Ship To</th><th>GC Amount Used</th></tr></thead><tbody><tr data-ng-repeat="item in items"><td><div data-ng-include="\'app/modules/order/partials/orderStatusSection.html\'"></div></td><td>{{::item.DateEdited | date:"MM/dd/yy"}}<br>{{::item.DateEdited | date:"h:mm a"}}<br>{{::item.EditedBy}}</td><td class=order-source><span>{{getReferenceItem(ReferenceData.OrderSourceTypes, item.IdOrderSource).Text}}</span></td><td>{{::item.DateCreated | date:"MM/dd/yy"}}<br>{{::item.DateCreated | date:"h:mm a"}}</td><td><a ui-sref=index.oneCol.customerDetail({id:item.IdCustomer})>{{::item.CustomerFirstName}} {{::item.CustomerLastName}}</a></td><td><a ui-sref="{{::item.IdObjectType==5 ? \'index.oneCol.orderReshipDetail({id: item.Id })\' : item.IdObjectType==6 ? \'index.oneCol.orderRefundDetail({id: item.Id })\' : \'index.oneCol.orderDetail({id: item.Id })\'}}">{{::item.Id}}</a></td><td data-ng-if="::item.IdObjectType!=6">{{::item.Total | currency}}</td><td data-ng-if="::item.IdObjectType==6">({{::item.Total | currency}})</td><td>{{::item.CustomerShipFirstName}} {{::item.CustomerShipLastName}}</td><td>{{::item.GCAmountUsed | currency}}</td></tr></tbody></table></spinner-overlay></div></div></uib-tab></uib-tabset></div></div></div></div>'),a.put("app/modules/gc/partials/gcOrdersList.html",'<div class="container-fluid gc-list"><div class=well><span class=legend>Gift Certificates Report</span><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.form.submitted}" novalidate><fieldset><div class="row form-group"><div class=col-md-3><p class=input-group><input name=test class=form-control placeholder=From uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.From is-open=fromOpened required data-ng-change="filterChanged();"> <span class=input-group-btn><button type=button class="btn btn-default" ng-disabled=false ng-click="stopPropagation($event); fromOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.form.submitted && forms.form.From.$invalid"><small class=error ng-show=forms.form.From.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","From")}}</small></div></div><div class=col-md-3><p class=input-group><input name=test class=form-control placeholder=To uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.To is-open=toOpened required data-ng-change="filterChanged();"> <span class=input-group-btn><button type=button class="btn btn-default" ng-disabled=false ng-click="stopPropagation($event); toOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.form.submitted && forms.form.To.$invalid"><small class=error ng-show=forms.form.To.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","To")}}</small></div></div><div class=col-md-3><input class=form-control placeholder="Billing Last Name" data-ng-model=filter.BillingAddress.LastName data-ng-change=filterChanged();></div><div class=col-md-3><input class=form-control placeholder="Shipping Last Name" data-ng-model=filter.ShippingAddress.LastName data-ng-change=filterChanged();></div></div><div class="row form-group"><div class=col-md-3><select class=form-control name=StatusCode data-ng-model=filter.StatusCode ng-options="item.Key as item.Text for item in ReferenceData.PublicRecordStatuses" data-ng-change=filterChanged();></select></div><div class=col-md-3><select class=form-control name=ExpiredType data-ng-model=filter.Type ng-options="item.Key as item.Text for item in types" data-ng-change=filterChanged();></select></div></div></fieldset></form><div class="row form-group"><div class=col-md-12><button class="btn btn-info" data-ng-click=filterData(); type=button>Filter</button> <a target=_self class="btn btn-primary pull-right" data-ng-href={{options.exportUrl}}>Export</a></div></div><span class=legend>Summary</span><div class=form-group>Count: <strong>{{options.Count}}</strong></div><div class=form-group>Total Active & Outstanding: <strong>{{options.Total | currency}}</strong></div><hr><spinner-overlay data-loading=refreshTracker.active()><table id=data-grid-gcs class="table table-striped table-hover"><thead><tr><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Code\')"><span>Gift Certificate</span> <span data-ng-if="filter.Sorting.Path == \'Code\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Created\')"><span>Creation Date</span> <span data-ng-if="filter.Sorting.Path == \'Created\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th>Billing Last Name</th><th>Shipping Last Name</th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Type\')"><span>Type</span> <span data-ng-if="filter.Sorting.Path == \'Type\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Status\')"><span>Status</span> <span data-ng-if="filter.Sorting.Path == \'Status\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Balance\')"><span>Current Balance</span> <span data-ng-if="filter.Sorting.Path == \'Balance\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th></tr></thead><tbody><tr data-ng-repeat="item in items"><td><a ui-sref=index.oneCol.gcDetail({id:item.Id})>{{::item.Code}}</a></td><td>{{::item.Created | date:"MM/dd/yy"}}<br>{{::item.Created | date:"h:mm a"}}</td><td>{{::item.BillingLastName}}</td><td>{{::item.ShippingLastName}}</td><td>{{::getReferenceItem(ReferenceData.GCShortTypes, item.GCType).Text}}</td><td><span data-ng-if="item.StatusCode == 2" class="label label-info font-default">{{::getReferenceItem(ReferenceData.RecordStatuses, item.StatusCode).Text}}</span> <span data-ng-if="item.StatusCode == 1" class="label label-danger font-default">{{::getReferenceItem(ReferenceData.RecordStatuses, item.StatusCode).Text}}</span></td><td>{{::item.Balance | currency}}</td></tr></tbody></table></spinner-overlay><uib-pagination boundary-links=true total-items=options.Count items-per-page=filter.Paging.PageItemCount data-ng-model=filter.Paging.PageIndex previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; data-ng-change="pageChanged();scrollTo(\'data-grid-gcs\');"></uib-pagination></div></div>'),a.put("app/modules/gc/partials/gcsAdd.html",'<div class=container-fluid><div class=left-pane-controls><div class="well container-fluid"><div data-ng-show="state==1"><button class="btn btn-success width-160px" ladda=editTracker.active() data-ng-click=save()>Save</button></div><div class="btn-group margin-top-10px" data-ng-show="state==1"><button cancel-button-default-state=index.oneCol.manageGCs cancel-button class="btn btn-default width-160px">Cancel</button></div><div class=btn-group data-ng-show="state==2"><button class="btn btn-info width-160px" data-ng-click=send()>Send</button></div><div class=margin-top-10px><button class="btn btn-primary width-160px" ui-sref=index.oneCol.manageGCs>Manage All</button></div></div></div><div class=right-pane-main><div class=container-fluid><div class=row><div class="container container-left"><div class="well row"><spinner-overlay data-loading=refreshTracker.active()><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.form.submitted}" novalidate><fieldset><div data-ng-show="state==1"><div class=form-group><label class="col-md-3 control-label">Quantity</label><div class=col-md-9><input name=Quantity class=form-control placeholder=Quantity data-ng-model=gc.Quantity numbers-only min=1 max=100 required ng-pattern="/^\\d{0,9}?$/"><div class=error-container ng-show="forms.form.submitted && forms.form.Quantity.$invalid"><small class=error ng-show=forms.form.Quantity.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Quantity")}}</small> <small class=error ng-show=forms.form.Quantity.$error.max>{{getValidationMessage("ValidationMessages.FieldMax","GeneralFieldNames.Quantity",100)}}</small> <small class=error ng-show=forms.form.Quantity.$error.min>{{getValidationMessage("ValidationMessages.FieldMin","GeneralFieldNames.Quantity",1)}}</small> <small class=error ng-show=forms.form.Quantity.$error.pattern>{{getValidationMessage("ValidationMessages.FieldNumber","GeneralFieldNames.Quantity")}}</small> <small class=error ng-show=forms.form.Quantity.$error.server>{{serverMessages.GetMessage(\'Quantity\')}}</small></div></div></div><div class=form-group><label for=type class="col-md-3 control-label">Amount</label><div class=col-md-9><div class=input-group><span class=input-group-addon>$</span> <input name=Balance class=form-control placeholder=Amount money min=0.01 max=100000 data-ng-model=gc.Balance required></div><div class=error-container ng-show="forms.form.submitted && forms.form.Balance.$invalid"><small class=error ng-show=forms.form.Balance.$error.parse>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Amount")}}</small> <small class=error ng-show=forms.form.Balance.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Amount")}}</small> <small class=error ng-show=forms.form.Balance.$error.max>{{getValidationMessage("ValidationMessages.FieldMax","GeneralFieldNames.Amount",1000000)}}</small> <small class=error ng-show=forms.form.Balance.$error.min>{{getValidationMessage("{0} must be over $0.00","GeneralFieldNames.Amount")}}</small> <small class=error ng-show=forms.form.Balance.$error.server>{{serverMessages.GetMessage(\'Balance\')}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label">First Name</label><div class=col-md-9><input name=FirstName class=form-control placeholder="First Name" data-ng-model=gc.FirstName></div></div><div class=form-group><label class="col-md-3 control-label">Last Name</label><div class=col-md-9><input name=LastName class=form-control placeholder="Last Name" data-ng-model=gc.LastName></div></div><div class=form-group><label class="col-md-3 control-label">Email</label><div class=col-md-9><input type=email name=Email class=form-control placeholder=Email data-ng-model=gc.Email><div class=error-container ng-show="forms.form.submitted && forms.form.Email.$invalid"><small class=error ng-show=forms.form.Email.$error.email>{{getValidationMessage("ValidationMessages.EmailFormat","GeneralFieldNames.Email")}}</small> <small class=error ng-show=forms.form.Email.$error.server>{{serverMessages.GetMessage(\'Email\')}}</small></div></div></div></div><div data-ng-show="state==2"><div class=form-group><label class="col-md-3 control-label">GC Codes</label><div class=col-md-9><div class=form-list-wrapper data-ng-repeat="code in codes"><div>{{code.Code}}&nbsp;(${{code.Balance}} available)</div></div></div></div></div></fieldset></form></spinner-overlay></div></div></div></div></div></div>'),a.put("app/modules/gc/partials/gcsList.html",'<div class=container-fluid><div class=well><span class=legend>Manage Gift Certificates</span><div class="row form-group"><div class=col-md-4><input class=form-control placeholder="Gift Certificate #" data-ng-model=filter.Code></div><div class=col-md-4><input class=form-control placeholder="Recipient Name" data-ng-model=filter.Name></div><div class=col-md-4><input class=form-control placeholder="Recipient Email" data-ng-model=filter.Email></div></div><div class="row form-group"><div class=col-md-4><select class=form-control data-ng-model=filter.Type ng-options="type.Key as type.Text for type in types"></select></div></div><div class="row form-group"><div class=col-md-4><button class="btn btn-info" data-ng-click=filterItems(); type=button>Filter</button></div></div><hr><div class=form-group><button data-ng-click=add(); class="btn btn-primary">Create New Gift Certificate</button></div><spinner-overlay data-loading=refreshTracker.active()><table id=data-grid class="table table-striped table-hover"><thead><tr><th>Product Name</th><th>GC Code</th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Created\')"><span>Created</span> <span data-ng-if="filter.Sorting.Path == \'Created\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'IdOrder\')"><span>Order #</span> <span data-ng-if="filter.Sorting.Path == \'IdOrder\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Recipient\')"><span>Recipient</span> <span data-ng-if="filter.Sorting.Path == \'Recipient\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Available\')"><span>Available</span> <span data-ng-if="filter.Sorting.Path == \'Available\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Status\')"><span>Status</span> <span data-ng-if="filter.Sorting.Path == \'Status\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=actions-3>Actions</th></tr></thead><tbody><tr data-ng-repeat="item in items"><td>{{item.ProductName}}</td><td><a ui-sref=index.oneCol.gcDetail({id:item.Id})>{{::item.Code}}</a></td><td>{{item.Created | date:"MM/dd/yy"}}<br>{{item.Created | date:"h:mm a"}}<br>{{item.AgentId}}</td><td><a data-ng-if=item.IdOrder ui-sref=index.oneCol.orderDetail({id:item.IdOrder})>{{item.IdOrder}}</a></td><td>{{item.RecipientName}}<br>{{item.RecipientEmail}}</td><td>{{item.Balance | currency}}</td><td><span data-ng-if="item.StatusCode == 2" class="label label-info font-default">{{getReferenceItem(ReferenceData.RecordStatuses, item.StatusCode).Text}}</span> <span data-ng-if="item.StatusCode == 1" class="label label-danger font-default">{{getReferenceItem(ReferenceData.RecordStatuses, item.StatusCode).Text}}</span></td><td><button title=Edit class="btn btn-default btn-success btn-xs" data-ng-click=edit(item.Id);><i class="glyphicon glyphicon-edit"></i></button> <button title=Delete class="btn btn-default btn-danger btn-xs" ladda=deleteTracker.active() data-ng-click=delete(item.Id);><i class="glyphicon glyphicon-remove"></i></button> <button title=Send class="btn btn-default btn-primary btn-xs" data-ng-show="item.StatusCode == 2 && item.Balance != 0" data-ng-click=send(item);><i class="fa fa-envelope"></i></button></td></tr></tbody></table><uib-pagination boundary-links=true total-items=totalItems items-per-page=filter.Paging.PageItemCount data-ng-model=filter.Paging.PageIndex previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; data-ng-change="pageChanged();scrollTo(\'data-grid\');"></uib-pagination></spinner-overlay></div></div>'),a.put("app/modules/gc/partials/sendEmail.html",'<div class=modal-header><h3 class=modal-title>Send Gift Certificate(s)</h3></div><div class=modal-body><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.form.submitted}" novalidate><fieldset><div class=form-group><label class="col-md-3 control-label">To Name</label><div class=col-md-9><input name=ToName class=form-control placeholder="To Name" data-ng-model=email.ToName required><div class=error-container ng-show="forms.form.submitted && forms.form.ToName.$invalid"><small class=error ng-show=forms.form.ToName.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Name")}}</small> <small class=error ng-show=forms.form.ToName.$error.server>{{serverMessages.GetMessage(\'ToName\')}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label">To Email</label><div class=col-md-9><input type=email name=ToEmail class=form-control placeholder="To Email" data-ng-model=email.ToEmail required><div class=error-container ng-show="forms.form.submitted && forms.form.ToEmail.$invalid"><small class=error ng-show=forms.form.ToEmail.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Email")}}</small> <small class=error ng-show=forms.form.ToEmail.$error.pattern>{{getValidationMessage("ValidationMessages.EmailFormat","GeneralFieldNames.Email")}}</small> <small class=error ng-show=forms.form.ToEmail.$error.server>{{serverMessages.GetMessage(\'ToEmail\')}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label">Message</label><div class=col-md-9><textarea type=text name=Message class=form-control placeholder=Message rows=10 data-ng-model=email.Message></textarea><div class=error-container ng-show="forms.form.submitted && forms.form.Message.$invalid"><small class=error ng-show=forms.form.ToEmail.$error.server>{{serverMessages.GetMessage(\'Message\')}}</small></div></div></div></fieldset></form></div><div class=modal-footer><button class="btn btn-success" ladda=saveTracker.active() data-ng-click=save()>Send</button> <button class="btn btn-default" data-ng-click=cancel()>Cancel</button></div>'),a.put("app/modules/healthwise/partials/healthwiseDetail.html",'<div class="container-fluid help-ticket"><div class=left-pane-controls><div class="well container-fluid"><div data-ng-if=payment.AllowPayment class=margin-bottom-10px><button class="btn btn-success width-160px" ladda=editTracker.active() data-ng-click=save() unsaved-warning-clear>Bill</button></div><div><button class="btn btn-primary width-160px" ui-sref=index.oneCol.healthwisePeriods>Manage All</button></div></div></div><div class=right-pane-main><div class=container-fluid><div class=row><div class="container container-left"><div class="well row"><spinner-overlay data-loading=refreshTracker.active()><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.form.submitted}" novalidate unsaved-warning-form><fieldset><span class=legend>HealthWise Details</span><div class=form-group><label for="" class="col-md-3 control-label">Customer</label><div class="col-md-9 form-control-static"><span>{{options.FirstName}} {{options.LastName}}</span></div></div><div data-ng-if=options.PaidAmount class=form-group><label for="" class="col-md-3 control-label">Paid</label><div class="col-md-9 form-control-static"><span>{{options.PaidAmount | currency}}</span></div></div><div data-ng-if=options.PaidAmount class=form-group><label for="" class="col-md-3 control-label">Date</label><div class="col-md-9 form-control-static"><span>{{options.PaidDate | date:"MM/dd/yy"}}</span></div></div><div data-ng-if=payment.AllowPayment class=form-group><label for=type class="col-md-3 control-label">Amount</label><div class=col-md-9><div class=input-group><span class=input-group-addon>$</span> <input name=Amount class=form-control placeholder=Amount money min=0.01 max=100000 data-ng-model=payment.Amount required></div><div class=error-container ng-show="forms.form.submitted && forms.form.Amount.$invalid"><small class=error ng-show=forms.form.Amount.$error.parse>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Amount")}}</small> <small class=error ng-show=forms.form.Amount.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Amount")}}</small> <small class=error ng-show=forms.form.Amount.$error.max>{{getValidationMessage("ValidationMessages.FieldMax","GeneralFieldNames.Amount",1000000)}}</small> <small class=error ng-show=forms.form.Amount.$error.min>{{getValidationMessage("{0} must be over $0.00","GeneralFieldNames.Amount")}}</small> <small class=error ng-show=forms.form.Amount.$error.server>{{serverMessages.GetMessage(\'Amount\')}}</small></div></div></div><div data-ng-if=payment.AllowPayment class=form-group><label for=date class="col-md-3 control-label">Date</label><div class=col-md-9><p class=input-group><input name=Date class=form-control placeholder=Date uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=payment.Date is-open=dateOpened required> <span class=input-group-btn><button type=button class="btn btn-default" ng-click="stopPropagation($event); dateOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.form.submitted && forms.form.Date.$invalid"><small class=error ng-show=forms.form.Date.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Date")}}</small> <small class=error ng-show=forms.form.Date.$error.server>{{serverMessages.GetMessage(\'Date\')}}</small></div></div></div><div data-ng-if=payment.AllowPayment class=form-group><label for=PayAsGC class="col-md-3 control-label"></label><div class=col-md-9><div class=checkbox><label><input type=checkbox name=PayAsGC data-ng-model="payment.PayAsGC"> <strong>Generate And Send GC</strong></label></div></div></div></fieldset></form><div><span class=legend>Orders</span><div data-ng-if=options.AllowMove class="row form-group btn-line"><div class=col-md-12><button data-ng-click=openMovePopup(); class="btn btn-primary pull-right">Move Orders to Different HW Anniversary</button></div></div><table class="table table-striped"><thead><tr><th>Order #</th><th>Order Date</th><th>Discounted Subtotal</th><th>Details</th><th data-ng-if=options.AllowMove><div class=checkbox-inline><label class=margin-bottom-0px><input data-ng-model=options.allSelected type=checkbox data-ng-change=allSelectCall();> <strong>Select all</strong></label></div></th></tr></thead><tbody><tr data-ng-repeat-start="item in items"><td>{{::item.Id}}</td><td>{{::item.DateCreated | date:"MM/dd/yy"}}<br>{{::item.DateCreated | date:"h:mm a"}}</td><td>{{::item.DiscountedSubtotal | currency}}</td><td><button title=View class="btn btn-default btn-success btn-xs" data-ng-click=openOrder(item.Id);><i class="fa fa-search"></i></button></td><td data-ng-if=options.AllowMove><input data-ng-model=item.IsSelected type=checkbox data-ng-change=itemSelectChanged(item)></td></tr><tr class=hidden data-ng-repeat-end></tr></tbody></table></div></spinner-overlay></div></div></div></div></div></div>'),
a.put("app/modules/healthwise/partials/healthwisePeriodsList.html",'<div class="container-fluid healthwise-customers"><div class=well><span class=legend>HealthWise Report</span><div class="row form-group"><div class=col-md-2><p class=input-group><input name=From class=form-control placeholder=From uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.From is-open="fromOpened"> <span class=input-group-btn><button type=button class="btn btn-default" ng-click="stopPropagation($event); fromOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p></div><div class=col-md-2><p class=input-group><input name=To class=form-control placeholder=To uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.To is-open="toOpened"> <span class=input-group-btn><button type=button class="btn btn-default" ng-click="stopPropagation($event); toOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p></div><div class=col-md-4><div class=checkbox><label><input type=checkbox name=NotBilledOnly data-ng-model="filter.NotBilledOnly"> Show Only All Qualified HealthWise Customers</label></div></div></div><div class="row form-group"><div class=col-md-12><button class="btn btn-info" data-ng-click=filterItems(); type=button>Filter</button> <button data-ng-click=flagCustomer(); class="btn btn-primary pull-right">Flag Customer</button> <button data-ng-click=flagOrder(); class="btn btn-primary pull-right margin-right-15px">Flag Individual Order</button></div></div><spinner-overlay data-loading=refreshTracker.active()><table id=data-grid class="table table-striped"><thead><tr><th>Customer</th><th>Orders This HW Year</th><th>Discounted Subtotal</th><th>Discounted Subtotal Average</th><th></th></tr></thead><tbody><tr class=customer-row data-ng-repeat-start="item in items"><td><a ui-sref=index.oneCol.customerDetail({id:item.Id})>{{::item.FirstName}} {{::item.LastName}} ({{::item.Id}})</a></td><td colspan=4></td></tr><tr data-ng-class="{\'paid\': period.PaidDate, \'allow-paid\': period.AllowPayment}" class=period-row data-ng-repeat="period in item.Periods"><td>> {{::period.StartDate | date:"MM/dd/yy"}} - {{::period.EndDate | date:"MM/dd/yy"}}</td><td>{{::period.OrdersCount}}</td><td>{{::period.DiscountedSubtotal | currency}}</td><td data-ng-if="period.OrdersCount!=0">{{::period.AverageDiscountedSubtotal | currency}}</td><td data-ng-if="period.OrdersCount==0">{{::0 | currency}}</td><td><button title=View class="btn btn-default btn-success btn-xs" data-ng-click=openPeriod(period.Id);><i class="fa fa-search"></i></button> <button data-ng-if="period.OrdersCount==0" title=Delete class="btn btn-default btn-danger btn-xs" data-ng-click=deletePeriod(period.Id);><i class="glyphicon glyphicon-remove"></i></button> <button data-ng-if=period.AllowPayment title=Bill class="btn btn-default btn-primary btn-xs ma" data-ng-click=openPeriod(period.Id);>Bill</button> <span data-ng-if="period.AllowPayment && period.OrdersCount!=0" class=important>{{::period.AverageDiscountedSubtotal | currency}} <span data-ng-if=period.LastOrderDate>{{::period.LastOrderDate | date:"MM/dd/yy"}}</span></span> <span data-ng-if=period.PaidDate class=important>Paid: {{::period.PaidAmount | currency}} {{::period.PaidDate | date:"MM/dd/yy"}}</span></td></tr><tr class=hidden data-ng-repeat-end></tr></tbody></table></spinner-overlay><uib-pagination boundary-links=true total-items=totalItems items-per-page=filter.Paging.PageItemCount data-ng-model=filter.Paging.PageIndex previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; data-ng-change="pageChanged();scrollTo(\'data-grid\');"></uib-pagination></div></div>'),a.put("app/modules/healthwise/partials/markCustomerOrdersPopup.html",'<div class=modal-header><h3 class=modal-title>Flag Customer Orders</h3></div><div class=modal-body><spinner-overlay data-loading=refreshTracker.active()><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.form.submitted}" novalidate><fieldset><div class=form-group><label for=id class="col-md-3 control-label">Customer #:</label><div class=col-md-9><div class="input-group autocomplete"><input name=IdCustomer class=form-control placeholder="New Customer #" data-ng-model=options.IdCustomer required numbers-only typeahead-min-length=3 typeahead-wait-ms=200 uib-typeahead="item.Id as item.Id+\' - \'+item.Name for item in getCustomers($viewValue)"> <span class=input-group-addon><i ng-show=loadingCustomers class="glyphicon glyphicon-refresh"></i></span></div><div class=error-container ng-show="forms.form.submitted && forms.form.IdCustomer.$invalid"><small class=error ng-show=forms.form.IdCustomer.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Customer #")}}</small> <small class=error ng-show=forms.form.IdCustomer.$error.server>{{serverMessages.GetMessage(\'IdCustomer\')}}</small></div></div></div></fieldset></form></spinner-overlay></div><div class=modal-footer><button class="btn btn-success" ladda=refreshTracker.active() data-ng-click=flag()>Flag</button> <button class="btn btn-default" data-ng-click=cancel()>Cancel</button></div>'),a.put("app/modules/healthwise/partials/markOrderPopup.html",'<div class=modal-header><h3 class=modal-title>Flag Order</h3></div><div class=modal-body><spinner-overlay data-loading=refreshTracker.active()><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.form.submitted}" novalidate><fieldset><div class=form-group><label for=id class="col-md-3 control-label">Order #</label><div class=col-md-9><div class="input-group autocomplete"><input name=IdOrder class=form-control placeholder="Order #" data-ng-model=options.IdOrder required numbers-only typeahead-min-length=3 typeahead-wait-ms=200 uib-typeahead="item.Id as item.Id for item in getOrders($viewValue)" typeahead-loading=loadingOrders> <span class=input-group-addon><i ng-show=loadingOrders class="glyphicon glyphicon-refresh"></i></span></div><div class=error-container ng-show="forms.form.submitted && forms.form.IdOrder.$invalid"><small class=error ng-show=forms.form.IdOrder.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Order #")}}</small> <small class=error ng-show=forms.form.IdOrder.$error.server>{{serverMessages.GetMessage(\'IdOrder\')}}</small></div></div></div></fieldset></form></spinner-overlay></div><div class=modal-footer><button class="btn btn-success" ladda=refreshTracker.active() data-ng-click=flag()>Flag</button> <button class="btn btn-default" data-ng-click=cancel()>Cancel</button></div>'),a.put("app/modules/healthwise/partials/moveToPeriodPopup.html",'<div class=modal-header><h3 class=modal-title>Select HealthWise anniversary to move into</h3></div><div class=modal-body><div data-ng-if="items.length==0" class="row form-group btn-line"><div class=col-md-12><div class="col-md-10 important padding-0px">Customer doesn\'t have any HealthWise years available with open positions. Would you like to create a new HealthWise year?</div><button data-ng-click=addPeriod(); class="btn btn-primary pull-right">Create New</button></div></div><spinner-overlay data-loading=refreshTracker.active()><table class="table table-striped"><thead><tr><th>Anniversary Dates</th><th>Orders This HW Year</th><th>Orders Total</th><th>Order Average</th><th></th></tr></thead><tbody><tr data-ng-repeat="item in items"><td>{{::item.StartDate | date:"MM/dd/yy"}} - {{::item.EndDate | date:"MM/dd/yy"}}</td><td>{{::item.OrdersCount}}</td><td>{{::item.OrderSubtotals | currency}}</td><td data-ng-if="item.OrdersCount!=0">{{::(item.OrderSubtotals / item.OrdersCount).toFixed(2) | currency}}</td><td data-ng-if="item.OrdersCount==0">{{::0 | currency}}</td><td><button title=Move class="btn btn-default btn-success btn-xs" data-ng-click=move(item.Id);>Move</button></td></tr></tbody></table></spinner-overlay></div><div class=modal-footer><button class="btn btn-default" data-ng-click=cancel()>Cancel</button></div>'),a.put("app/modules/help/partials/bugTicketDetail.html",'<div class="container-fluid bug-ticket"><div class=left-pane-controls><div class="well container-fluid"><div><button data-ng-disabled=!bugTicket.IsAllowEdit class="btn btn-success width-160px" ladda=editTracker.active() data-ng-click=save() unsaved-warning-clear>Save</button></div><div class=margin-top-10px><button cancel-button-default-state=index.oneCol.manageBugTickets cancel-button class="btn btn-default width-160px" unsaved-warning-clear>Cancel</button></div><div class=margin-top-10px><button class="btn btn-primary width-160px" ui-sref=index.oneCol.manageBugTickets>Manage All</button></div></div></div><div class=right-pane-main><div class=container-fluid><div class=row><div class="container container-left"><div class="well row"><spinner-overlay data-loading=refreshTracker.active()><form class=form-horizontal name=forms.form data-ng-class="{submitted: forms.form.submitted}" novalidate unsaved-warning-form><fieldset><span class=legend>Bug Ticket Details</span><div data-ng-if=bugTicket.Id class=form-group><label for="" class="col-md-3 control-label">ID</label><div class="col-md-9 form-control-static"><span>{{::bugTicket.Id}}</span></div></div><div data-ng-if=bugTicket.AddedBy class=form-group><label for="" class="col-md-3 control-label">Posted by</label><div class="col-md-9 form-control-static"><span>{{::bugTicket.AddedBy}} ({{::bugTicket.AddedByAgent}})</span></div></div><div class=form-group><label for=Priority class="col-md-3 control-label">Priority</label><div class=col-md-9><select class=form-control id=Priority data-ng-model=bugTicket.Priority data-ng-options="item.Key as item.Text for item in ReferenceData.Priorities" data-ng-disabled=!bugTicket.IsAllowEdit></select></div></div><div class=form-group><label for="" class="col-md-3 control-label">Summary</label><div class=col-md-9><input name=Summary class=form-control placeholder=Summary data-ng-model=bugTicket.Summary required data-ng-disabled=!bugTicket.IsAllowEdit><div class=error-container ng-show="forms.form.submitted && forms.form.Summary.$invalid"><small class=error ng-show=forms.form.Summary.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Summary")}}</small> <small class=error ng-show=forms.form.Summary.$error.server>{{serverMessages.GetMessage(\'Summary\')}}</small></div></div></div><div class=form-group><label for="" class="col-md-3 control-label">Description</label><div class=col-md-9><textarea type=text name=Description class=form-control placeholder=Description rows=10 data-ng-model=bugTicket.Description required data-ng-disabled=!bugTicket.IsAllowEdit></textarea><div class=error-container ng-show="forms.form.submitted && forms.form.Description.$invalid"><small class=error ng-show=forms.form.Description.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Description")}}</small> <small class=error ng-show=forms.form.Description.$error.server>{{serverMessages.GetMessage(\'Description\')}}</small></div></div></div><div class=form-group><label for=status class="col-md-3 control-label">Status</label><div class=col-md-9><select class=form-control id=status data-ng-model=bugTicket.StatusCode data-ng-options="item.Key as item.Text for item in ReferenceData.BugTicketStatuses" data-ng-disabled="!bugTicket.IsAllowEdit || bugTicket.Id==0"></select></div></div><div class=form-group><label for=status class="col-md-3 control-label">Attachments</label><div class=col-md-9><div><div data-ng-repeat="file in bugTicket.Files" class=form-control-static><a target=_blank data-ng-href="/api/Help/GetBugTicketFile?fileName={{file.FileName}}&publicId={{bugTicket.PublicId}}&viewMode=true&buildNumber={{buildNumber}}">{{file.FileName}}</a> added <strong>{{::file.UploadDate | date:"MM/dd/yy"}} {{::file.UploadDate | date:"h:mm a"}}</strong><div class=pull-right><a title=Download class="btn btn-xs btn-success" target=_self data-ng-href="/api/Help/GetBugTicketFile?fileName={{file.FileName}}&publicId={{bugTicket.PublicId}}&viewMode=false&buildNumber={{buildNumber}}"><i class="glyphicon glyphicon-download"></i></a> <button data-ng-if=bugTicket.IsAllowEdit title=Delete class="btn btn-xs btn-danger" data-ng-click="deleteFile($index, file);"><i class="glyphicon glyphicon-remove"></i></button></div></div></div><div data-ng-if=bugTicket.IsAllowEdit class="col-md-2 padding-0px"><button class="btn btn-primary" ngf-select ngf-change=upload($files) ladda=uploading>Attach file</button></div><div class="col-md-10 form-control-static"><div ng-if="logTicketFileRequest.state==\'progress\'"><uib-progressbar animate=true value=logTicketFileRequest.progress type=success><b>{{logTicketFileRequest.progress}}%</b></uib-progressbar></div><div ng-if="logTicketFileRequest.state==\'done\'"><uib-progressbar animate=true value=100 type=success><b>Done</b></uib-progressbar></div><div ng-if="logTicketFileRequest.state==\'error\'"><uib-progressbar animate=true value=100 type=danger><b>Error</b></uib-progressbar></div></div></div></div></fieldset></form><form data-ng-if=bugTicket.Id class=form-horizontal name=forms.existComment data-ng-class="{submitted: forms.existComment.submitted}" novalidate><fieldset><span class=legend>Comments</span><div data-ng-repeat="comment in bugTicket.Comments"><div class=form-group><div class=col-md-10><span><span data-ng-if="comment.DateCreated==comment.DateEdited">Submitted</span><span data-ng-if="comment.DateCreated!=comment.DateEdited">Modified</span> on <strong>{{::comment.DateEdited | date:"MM/dd/yy"}} {{::comment.DateEdited | date:"h:mm a"}}</strong> by</span> <strong>{{::comment.EditedBy}} ({{::comment.EditedByAgent}})</strong></div><div data-ng-if="bugTicket.IsAllowEdit && comment.EditedBy && !comment.IsEdit" class=col-md-2><div class=pull-right><button title=Edit class="btn btn-xs btn-success" data-ng-click=startUpdateComment(comment);><i class="glyphicon glyphicon-edit"></i></button> <button title=Delete class="btn btn-xs btn-danger" data-ng-click=deleteComment(comment);><i class="glyphicon glyphicon-remove"></i></button></div></div><div data-ng-if="bugTicket.IsAllowEdit && comment.EditedBy && comment.IsEdit" class=col-md-2><div class=pull-right><button title=Save class="btn btn-xs btn-success" data-ng-click=updateComment(comment);><i class="glyphicon glyphicon-check"></i></button> <button title=Cancel class="btn btn-xs btn-danger" data-ng-click=cancelUpdateComment(comment);><i class="glyphicon glyphicon-remove"></i></button></div></div></div><div class=form-group><label for="" class="col-md-3 control-label">Comment</label><div data-ng-if=!comment.IsEdit class="col-md-9 form-control-static"><span>{{comment.Comment}}</span></div><div data-ng-if=comment.IsEdit class=col-md-9><textarea type=text name=Comment class=form-control placeholder=Comment rows=10 data-ng-model=comment.EditComment required data-ng-maxlength=1000></textarea><div class=error-container ng-show="forms.existComment.submitted && forms.existComment.Comment.$invalid"><small class=error ng-show=forms.existComment.Comment.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Comment")}}</small> <small class=error ng-show=forms.existComment.Comment.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["Comment", "1000"])}}</small> <small class=error ng-show=forms.existComment.Comment.$error.server>{{serverMessages.GetMessage(\'Comment\')}}</small></div></div></div><div class=form-group><label for=status class="col-md-3 control-label">Attachments</label><div class=col-md-9><div><div data-ng-repeat="file in comment.Files" class=form-control-static><a target=_blank data-ng-href="/api/Help/GetBugTicketCommentFile?fileName={{file.FileName}}&publicId={{comment.PublicId}}&viewMode=true&buildNumber={{buildNumber}}">{{file.FileName}}</a> added <strong>{{::file.UploadDate | date:"MM/dd/yy"}} {{::file.UploadDate | date:"h:mm a"}}</strong><div class=pull-right><a title=Download class="btn btn-xs btn-success" target=_self data-ng-href="/api/Help/GetBugTicketCommentFile?fileName={{file.FileName}}&publicId={{comment.PublicId}}&viewMode=false&buildNumber={{buildNumber}}"><i class="glyphicon glyphicon-download"></i></a> <button data-ng-if=bugTicket.IsAllowEdit title=Delete class="btn btn-xs btn-danger" data-ng-click="deleteFile($index, file, comment);"><i class="glyphicon glyphicon-remove"></i></button></div></div></div><div data-ng-if=bugTicket.IsAllowEdit class="col-md-2 padding-0px"><button class="btn btn-primary" ngf-select ngf-change="upload($files, comment)" ladda=uploading>Attach file</button></div><div class="col-md-10 form-control-static"><div ng-if="logTicketCommentFileRequest[comment.Id].state==\'progress\'"><uib-progressbar animate=true value=logTicketFileRequest.progress type=success><b>{{logTicketCommentFileRequest[comment.Id].progress}}%</b></uib-progressbar></div><div ng-if="logTicketCommentFileRequest[comment.Id].state==\'done\'"><uib-progressbar animate=true value=100 type=success><b>Done</b></uib-progressbar></div><div ng-if="logTicketCommentFileRequest[comment.Id].state==\'error\'"><uib-progressbar animate=true value=100 type=danger><b>Error</b></uib-progressbar></div></div></div></div></div></fieldset></form><form data-ng-if="bugTicket.IsAllowEdit && bugTicket.Id" class=form-horizontal name=forms.newComment data-ng-class="{submitted: forms.newComment.submitted}" novalidate><fieldset><span class=legend>Add New Comment</span><div class=form-group><label for="" class="col-md-3 control-label">Comment</label><div class=col-md-9><textarea type=text name=Comment class=form-control placeholder=Comment rows=10 data-ng-model=newBugTicketComment.Comment required data-ng-maxlength=1000></textarea><div class=error-container ng-show="forms.newComment.submitted && forms.newComment.Comment.$invalid"><small class=error ng-show=forms.newComment.Comment.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Comment")}}</small> <small class=error ng-show=forms.newComment.Comment.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["Comment", "1000"])}}</small> <small class=error ng-show=forms.newComment.Comment.$error.server>{{serverMessages.GetMessage(\'Comment\')}}</small></div></div></div><div class=form-group><div class=col-md-3></div><div class=col-md-9><button class="btn btn-success width-160px" data-ng-click=addComment()>Add New Comment</button></div></div></fieldset></form></spinner-overlay></div></div></div></div></div></div>'),a.put("app/modules/help/partials/bugTicketsList.html",'<div class="container-fluid bug-tickets"><div class=well><span class=legend>Manage Bug Tickets</span><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.form.submitted}" novalidate><fieldset><div class="row form-group"><div class=col-md-2><p class=input-group><input class=form-control uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.From is-open="fromOpened"> <span class=input-group-btn><button type=button class="btn btn-default" ng-disabled=false ng-click="stopPropagation($event); fromOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p></div><div class=col-md-2><p class=input-group><input class=form-control uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.To is-open="toOpened"> <span class=input-group-btn><button type=button class="btn btn-default" ng-disabled=false ng-click="stopPropagation($event); toOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p></div></div><div class="row form-group"><div class=col-md-2><select class=form-control placeholder=Priority data-ng-model=filter.Priority data-ng-options="item.Key as item.Text for item in priorities"></select></div><div class=col-md-2><select class=form-control placeholder=Status data-ng-model=filter.StatusCode data-ng-options="item.Key as item.Text for item in statuses"></select></div></div></fieldset></form><div class="row form-group"><div class=col-md-4><button class="btn btn-info" data-ng-click=filterItems(); type=button>Filter</button></div></div><hr><div class=form-group><button ui-sref=index.oneCol.addNewBugTicket class="btn btn-primary">Add New Bug Ticket</button></div><spinner-overlay data-loading=refreshTracker.active()><table id=data-grid class="table table-striped"><thead><tr><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Id\')"><span>ID</span> <span data-ng-if="filter.Sorting.Path == \'Id\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Priority\')"><span>Priority</span> <span data-ng-if="filter.Sorting.Path == \'Priority\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Summary\')"><span>Summary</span> <span data-ng-if="filter.Sorting.Path == \'Summary\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'DateCreated\')"><span>Posted</span> <span data-ng-if="filter.Sorting.Path == \'DateCreated\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'DateEdited\')"><span>Last Updated</span> <span data-ng-if="filter.Sorting.Path == \'DateEdited\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'IdAddedBy\')"><span>Posted by</span> <span data-ng-if="filter.Sorting.Path == \'IdAddedBy\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'StatusCode\')"><span>Status</span> <span data-ng-if="filter.Sorting.Path == \'StatusCode\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th>Actions</th></tr></thead><tbody><tr data-ng-class="{\'success\': item.StatusCode==1, \'warning\': item.StatusCode==2}" data-ng-repeat="item in items"><td><a ui-sref=index.oneCol.bugTicketDetail({id:item.Id})>{{::item.Id}}</a></td><td><span data-ng-if="item.Priority == 1" class="label label-danger font-default">{{getReferenceItem(ReferenceData.Priorities, item.Priority).Text}}</span> <span data-ng-if="item.Priority == 2" class="label label-warning font-default">{{getReferenceItem(ReferenceData.Priorities, item.Priority).Text}}</span> <span data-ng-if="item.Priority == 3" class="label label-info font-default">{{getReferenceItem(ReferenceData.Priorities, item.Priority).Text}}</span></td><td>{{::item.Summary}}</td><td>{{::item.DateCreated | date:"MM/dd/yy"}}<br>{{::item.DateCreated | date:"h:mm a"}}</td><td>{{::item.DateEdited | date:"MM/dd/yy"}}<br>{{::item.DateEdited | date:"h:mm a"}}<br>{{::item.EditedByAgent}}</td><td>{{::item.AddedBy}} ({{::item.AddedByAgent}})</td><td><span data-ng-if="item.StatusCode == 1" class="label label-warning font-default">{{getReferenceItem(ReferenceData.BugTicketStatuses, item.StatusCode).Text}}</span> <span data-ng-if="item.StatusCode == 2" class="label label-info font-default">{{getReferenceItem(ReferenceData.BugTicketStatuses, item.StatusCode).Text}}</span> <span data-ng-if="item.StatusCode == 4" class="label label-future font-default">{{getReferenceItem(ReferenceData.BugTicketStatuses, item.StatusCode).Text}}</span></td><td><button title=Edit class="btn btn-default btn-success btn-xs" ui-sref=index.oneCol.bugTicketDetail({id:item.Id})><i class="glyphicon glyphicon-edit"></i></button> <button data-ng-if=item.AllowDelete title=Delete class="btn btn-default btn-danger btn-xs" ladda=deleteTracker.active() data-ng-click=delete(item.Id);><i class="glyphicon glyphicon-remove"></i></button></td></tr></tbody></table></spinner-overlay><uib-pagination boundary-links=true total-items=totalItems items-per-page=filter.Paging.PageItemCount data-ng-model=filter.Paging.PageIndex previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; data-ng-change="pageChanged();scrollTo(\'data-grid\');"></uib-pagination></div></div>'),a.put("app/modules/help/partials/helpTicketDetail.html",'<div class="container-fluid help-ticket"><div class=left-pane-controls><div class="well container-fluid"><div><button class="btn btn-success width-160px" ladda=editTracker.active() data-ng-click=save() unsaved-warning-clear>Save</button></div><div class=margin-top-10px><button cancel-button-default-state=index.oneCol.manageHelpTickets cancel-button class="btn btn-default width-160px" unsaved-warning-clear>Cancel</button></div><div class=margin-top-10px><button class="btn btn-primary width-160px" ui-sref=index.oneCol.manageHelpTickets>Manage All</button></div></div></div><div class=right-pane-main><div class=container-fluid><div class=row><div class="container container-left"><div class="well row"><spinner-overlay data-loading=refreshTracker.active()><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.form.submitted}" novalidate unsaved-warning-form><fieldset><span class=legend>Help Ticket Details</span><div class=form-group><label for="" class="col-md-3 control-label">ID</label><div class="col-md-9 form-control-static"><span>{{helpTicket.Id}}</span></div></div><div class=form-group><label for="" class="col-md-3 control-label">Order ID</label><div class="col-md-9 form-control-static"><span>{{helpTicket.IdOrder}}</span></div></div><div class=form-group><label for="" class="col-md-3 control-label">Customer</label><div class="col-md-9 form-control-static"><span>{{helpTicket.Customer}}</span></div></div><div class=form-group><label for=Priority class="col-md-3 control-label">Priority</label><div class=col-md-9><select class=form-control id=Priority data-ng-model=helpTicket.Priority data-ng-options="item.Key as item.Text for item in ReferenceData.Priorities"></select></div></div><div class=form-group><label for="" class="col-md-3 control-label">Summary</label><div class="col-md-9 form-control-static"><span>{{helpTicket.Summary}}</span></div></div><div class=form-group><label for="" class="col-md-3 control-label">Description</label><div class="col-md-9 form-control-static"><span>{{helpTicket.Description}}</span></div></div><div class=form-group><label for=status class="col-md-3 control-label">Status</label><div class=col-md-9><select class=form-control id=status data-ng-model=helpTicket.StatusCode data-ng-options="item.Key as item.Text for item in ReferenceData.TicketStatuses"></select></div></div></fieldset></form><form class=form-horizontal name=forms.existComment data-ng-class="{submitted: forms.existComment.submitted}" novalidate unsaved-warning-form><fieldset><span class=legend>Comments</span><div data-ng-repeat="comment in helpTicket.Comments"><div class=form-group><div class=col-md-10><span><span data-ng-if="comment.DateCreated==comment.DateEdited">Submitted</span><span data-ng-if="comment.DateCreated!=comment.DateEdited">Modified</span> on <strong>{{::comment.DateEdited | date:"MM/dd/yy"}} {{::comment.DateEdited | date:"h:mm a"}}</strong> by</span> <strong data-ng-if=comment.EditedBy>Vital Choice ({{::comment.EditedBy}})</strong> <strong data-ng-if=!comment.EditedBy>{{::comment.Customer}}</strong></div><div data-ng-if="comment.EditedBy && !comment.IsEdit" class=col-md-2><div class=pull-right><button title=Edit class="btn btn-xs btn-success" data-ng-click=startUpdateComment(comment);><i class="glyphicon glyphicon-edit"></i></button> <button title=Delete class="btn btn-xs btn-danger" data-ng-click=deleteComment(comment);><i class="glyphicon glyphicon-remove"></i></button></div></div><div data-ng-if="comment.EditedBy && comment.IsEdit" class=col-md-2><div class=pull-right><button title=Save class="btn btn-xs btn-success" data-ng-click=updateComment(comment);><i class="glyphicon glyphicon-check"></i></button> <button title=Cancel class="btn btn-xs btn-danger" data-ng-click=cancelUpdateComment(comment);><i class="glyphicon glyphicon-remove"></i></button></div></div></div><div class=form-group><label for="" class="col-md-3 control-label">Comment</label><div data-ng-if=!comment.IsEdit class="col-md-9 form-control-static"><span>{{comment.Comment}}</span></div><div data-ng-if=comment.IsEdit class=col-md-9><textarea type=text name=Comment class=form-control placeholder=Comment rows=10 data-ng-model=comment.EditComment data-ng-maxlength=1000 required></textarea><div class=error-container ng-show="forms.existComment.submitted && forms.existComment.Comment.$invalid"><small class=error ng-show=forms.existComment.Comment.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Comment")}}</small> <small class=error ng-show=forms.existComment.Comment.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["Comment", "1000"])}}</small> <small class=error ng-show=forms.existComment.Comment.$error.server>{{serverMessages.GetMessage(\'Comment\')}}</small></div></div></div></div></fieldset></form><form class=form-horizontal name=forms.newComment data-ng-class="{submitted: forms.newComment.submitted}" novalidate unsaved-warning-form><fieldset><span class=legend>Add New Comment</span><div class=form-group><label for="" class="col-md-3 control-label">Comment</label><div class=col-md-9><textarea type=text name=Comment class=form-control placeholder=Comment rows=10 data-ng-model=newHelpTicketComment.Comment required data-ng-maxlength=1000></textarea><div class=error-container ng-show="forms.newComment.submitted && forms.newComment.Comment.$invalid"><small class=error ng-show=forms.newComment.Comment.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Comment")}}</small> <small class=error ng-show=forms.newComment.Comment.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["Comment", "1000"])}}</small> <small class=error ng-show=forms.newComment.Comment.$error.server>{{serverMessages.GetMessage(\'Comment\')}}</small></div></div></div><div class=form-group><div class=col-md-3></div><div class=col-md-9><button class="btn btn-success width-160px" data-ng-click=addComment()>Add New Comment</button></div></div></fieldset></form></spinner-overlay></div></div></div></div></div></div>'),a.put("app/modules/help/partials/helpTicketsList.html",'<div class="container-fluid help-tickets"><div class=well><span class=legend>Manage Help Tickets</span><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.form.submitted}" novalidate><fieldset><div class="row form-group"><div class=col-md-2><p class=input-group><input class=form-control uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.From is-open="fromOpened"> <span class=input-group-btn><button type=button class="btn btn-default" ng-disabled=false ng-click="stopPropagation($event); fromOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p></div><div class=col-md-2><p class=input-group><input class=form-control uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.To is-open="toOpened"> <span class=input-group-btn><button type=button class="btn btn-default" ng-disabled=false ng-click="stopPropagation($event); toOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p></div></div><div class="row form-group"><div class=col-md-2><select class=form-control placeholder=Priority data-ng-model=filter.Priority data-ng-options="item.Key as item.Text for item in priorities"></select></div><div class=col-md-2><select class=form-control placeholder=Status data-ng-model=filter.StatusCode data-ng-options="item.Key as item.Text for item in statuses"></select></div></div></fieldset></form><div class="row form-group"><div class=col-md-4><button class="btn btn-info" data-ng-click=filterItems(); type=button>Filter</button></div></div><hr><spinner-overlay data-loading=refreshTracker.active()><table id=data-grid class="table table-striped"><thead><tr><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Id\')"><span>ID</span> <span data-ng-if="filter.Sorting.Path == \'Id\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'IdOrder\')"><span>Order</span> <span data-ng-if="filter.Sorting.Path == \'IdOrder\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Priority\')"><span>Priority</span> <span data-ng-if="filter.Sorting.Path == \'Priority\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Summary\')"><span>Summary</span> <span data-ng-if="filter.Sorting.Path == \'Summary\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'DateCreated\')"><span>Posted</span> <span data-ng-if="filter.Sorting.Path == \'DateCreated\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'DateEdited\')"><span>Last Updated</span> <span data-ng-if="filter.Sorting.Path == \'DateEdited\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Customer\')"><span>Posted by</span> <span data-ng-if="filter.Sorting.Path == \'Customer\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'StatusCode\')"><span>Status</span> <span data-ng-if="filter.Sorting.Path == \'StatusCode\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th>Actions</th></tr></thead><tbody><tr data-ng-class="{\'success\': item.StatusCode==1, \'warning\': item.StatusCode==2}" data-ng-repeat="item in items"><td><a ui-sref=index.oneCol.helpTicketDetail({id:item.Id})>{{::item.Id}}</a></td><td><a ui-sref=index.oneCol.orderDetail({id:item.IdOrder})>{{::item.IdOrder}}</a></td><td><span data-ng-if="item.Priority == 1" class="label label-danger font-default">{{getReferenceItem(ReferenceData.Priorities, item.Priority).Text}}</span> <span data-ng-if="item.Priority == 2" class="label label-warning font-default">{{getReferenceItem(ReferenceData.Priorities, item.Priority).Text}}</span> <span data-ng-if="item.Priority == 3" class="label label-info font-default">{{getReferenceItem(ReferenceData.Priorities, item.Priority).Text}}</span></td><td>{{::item.Summary}}</td><td>{{::item.DateCreated | date:"MM/dd/yy"}}<br>{{::item.DateCreated | date:"h:mm a"}}</td><td>{{::item.DateEdited | date:"MM/dd/yy"}}<br>{{::item.DateEdited | date:"h:mm a"}}</td><td><a ui-sref=index.oneCol.customerDetail({id:item.IdCustomer})>{{::item.Customer}}</a></td><td><span data-ng-if="item.StatusCode == 1" class="label label-warning font-default">{{getReferenceItem(ReferenceData.TicketStatuses, item.StatusCode).Text}}</span> <span data-ng-if="item.StatusCode == 2" class="label label-info font-default">{{getReferenceItem(ReferenceData.TicketStatuses, item.StatusCode).Text}}</span></td><td><button title=Edit class="btn btn-default btn-success btn-xs" ui-sref=index.oneCol.helpTicketDetail({id:item.Id})><i class="glyphicon glyphicon-edit"></i></button> <button title=Delete class="btn btn-default btn-danger btn-xs" ladda=deleteTracker.active() data-ng-click=delete(item.Id);><i class="glyphicon glyphicon-remove"></i></button></td></tr></tbody></table></spinner-overlay><uib-pagination boundary-links=true total-items=totalItems items-per-page=filter.Paging.PageItemCount data-ng-model=filter.Paging.PageIndex previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; data-ng-change="pageChanged();scrollTo(\'data-grid\');"></uib-pagination></div></div>'),
a.put("app/modules/inventorysku/partials/assignInventorySkusPopup.html",'<div class=modal-header><h3 class=modal-title>Assign Parts</h3></div><div class="modal-body inventory-assign-popup"><span class=legend>Assigned Parts</span><form class="form-horizontal parts" name=forms.InventorySkus data-ng-class="{submitted: forms.InventorySkus.submitted}" novalidate><table class="table table-striped table-hover"><thead><tr><th class=qty>Quantity</th><th class=sku>Code</th><th>Description</th><th class=actions></th></tr></thead><tbody><tr data-ng-repeat="item in assignedItems" class=form-horizontal ng-form=i{{$index}} novalidate><td><input name=Quantity class=form-control placeholder=QTY numbers-only min=1 max=100 data-ng-model=item.Quantity required><div class="error-container small-block" ng-show="forms.InventorySkus.submitted && forms.InventorySkus.i{{$index}}.Quantity.$invalid"><small class=error ng-show=forms.InventorySkus.i{{$index}}.Quantity.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Quantity")}}</small> <small class=error ng-show=forms.InventorySkus.i{{$index}}.Quantity.$error.parse>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Quantity")}}</small> <small class=error ng-show=forms.InventorySkus.i{{$index}}.Quantity.$error.max>{{getValidationMessage("ValidationMessages.FieldMax","GeneralFieldNames.Quantity",100)}}</small> <small class=error ng-show=forms.InventorySkus.i{{$index}}.Quantity.$error.min>{{getValidationMessage("ValidationMessages.FieldMin","GeneralFieldNames.Quantity", 0)}}</small> <small class=error ng-show=forms.InventorySkus.i{{$index}}.Quantity.$error.server>{{serverMessages.GetMessage(\'Quantity\',\'InventorySkus\',$index)}}</small></div></td><td><div class=as-label>{{item.Code}}</div></td><td><div class=as-label>{{item.Description}}</div></td><td><div class=as-label><button class="btn btn-xs btn-default btn-danger" data-ng-click=delete($index);>Delete</button></div></td></tr></tbody></table></form><span class=legend>Search Parts</span><form class=form-horizontal name=forms.form data-ng-class="{submitted: forms.submitted}" novalidate><div class="row form-group"><div class=col-md-4><input class="form-control direct-validation" name=Code placeholder=Code data-ng-model=filter.Code ng-minlength=3 required><div class=error-container ng-show="forms.submitted && forms.form.Code.$invalid"><small class=error ng-show=forms.form.Code.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Code")}}</small> <small class=error ng-show=forms.form.Code.$error.minlength>{{getValidationMessage("{0} should have at least 3 symbols","Code")}}</small></div></div><div class=col-md-4><button class="btn btn-info" data-ng-click=filterItems(); type=button>Filter</button></div></div></form><spinner-overlay data-loading=refreshTracker.active()><table class="table table-striped table-hover"><thead><tr><th class=sku>Code</th><th>Description</th><th class=actions></th></tr></thead><tbody><tr data-ng-repeat="item in items"><td>{{item.Code}}</td><td>{{item.Description}}</td><td><button class="btn btn-xs btn-default btn-success" data-ng-click=add(item);>Add</button></td></tr></tbody></table></spinner-overlay></div><div class=modal-footer><button class="btn btn-success" ladda=refreshTracker.active() data-ng-click=save()>Assign</button> <button class="btn btn-default" data-ng-click=cancel()>Cancel</button></div>'),a.put("app/modules/inventorysku/partials/inventoriesSummaryUsageReport.html",'<div class="container-fluid inventory-usage-summary-report"><div class=well><span class=legend>Inventory Shipment Summary</span><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.form.submitted}" novalidate><fieldset><div class="row form-group"><div class=col-md-3><p class=input-group><input class=form-control name=From data-ng-change=filterChanged(); uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.From is-open=fromOpened ng-required="true"> <span class=input-group-btn><button type=button class="btn btn-default" ng-disabled=false ng-click="stopPropagation($event); fromOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.form.submitted && forms.form.From.$invalid"><small class=error ng-show=forms.form.From.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","From")}}</small></div></div><div class=col-md-3><p class=input-group><input class=form-control name=To data-ng-change=filterChanged(); uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.To is-open=toOpened ng-required="true"> <span class=input-group-btn><button type=button class="btn btn-default" ng-disabled=false ng-click="stopPropagation($event); toOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.form.submitted && forms.form.To.$invalid"><small class=error ng-show=forms.form.To.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","To")}}</small></div></div><div class=col-md-2><div class=checkbox><label><input type=checkbox name=ShipDate data-ng-change=filterChanged(); data-ng-model="filter.ShipDate"> Ship Date</label></div></div></div><div class="row form-group"><div class=col-md-3><div class="input-group autocomplete col-md-12"><input name=Sku class=form-control placeholder="Product SKU" data-ng-change=filterChanged(); data-ng-model=filter.Sku autocomplete=off data-ng-minlength=3 typeahead-min-length=1 uib-typeahead="sku.Code as sku.Code for sku in getSKUsBySKU($viewValue)" typeahead-loading=loadingSKUsBySKU typeahead-wait-ms=200></div><div class=error-container ng-show="forms.form.submitted && forms.form.Sku.$invalid"><small class=error ng-show=forms.form.Sku.$error.minlength>{{getValidationMessage("{0} should have at least 3 symbols","Product SKU")}}</small></div></div><div class=col-md-3><div class="input-group autocomplete col-md-12"><input name=InvSku class=form-control placeholder="Inventory Code" data-ng-change=filterChanged(); data-ng-model=filter.InvSku autocomplete=off data-ng-minlength=3 typeahead-min-length=1 uib-typeahead="sku.Code as sku.Code for sku in getInvSKUsBySKU($viewValue)" typeahead-loading=loadingInvSKUsBySKU typeahead-wait-ms=200></div><div class=error-container ng-show="forms.form.submitted && forms.form.InvSku.$invalid"><small class=error ng-show=forms.form.InvSku.$error.minlength>{{getValidationMessage("{0} should have at least 3 symbols","Part SKU")}}</small></div></div><div class=col-md-3><select class=form-control data-ng-change=filterChanged(); data-ng-model=filter.IdsInvCat ng-options="item.Key as item.Text for item in filterCategories"></select></div><div class=col-md-3><select class=form-control data-ng-change=filterChanged(); data-ng-model=filter.Assemble ng-options="item.Key as item.Text for item in assembles"></select></div></div><div class="row form-group"><div class=col-md-12><button class="btn btn-info" data-ng-click=filterItems(); type=button>Filter</button> <a target=_self class="btn btn-primary pull-right" data-ng-href={{options.exportUrl}} data-ng-click=exportClick($event)>Export</a></div></div></fieldset></form><spinner-overlay data-loading=refreshTracker.active()><table class="table table-striped"><thead><tr><th>Inventory Code</th><th>Inventory Description</th><th>UOM</th><th data-ng-repeat="item in report.TotalItems">{{item.Date | date:"MMM-yy"}}</th><th>Total</th></tr></thead><tbody><tr data-ng-repeat-start="category in report.Categories"></tr><tr data-ng-repeat="inventory in category.Inventories"><td>{{inventory.Code}}</td><td><div class=description>{{inventory.Description}}</div></td><td>{{inventory.UnitOfMeasureAmount}}</td><td data-ng-repeat="item in inventory.Items">{{item.Quantity}}</td><td><strong>{{inventory.GrandTotal}}</strong></td></tr><tr><td><strong>{{category.Name}} Total</strong></td><td></td><td><div class=description></div></td><td data-ng-repeat="item in category.TotalItems"><strong>{{item.Quantity}}</strong></td><td><strong>{{category.GrandTotal}}</strong></td></tr><tr data-ng-repeat-end></tr><tr><td><strong>Total</strong></td><td></td><td><div class=description></div></td><td data-ng-repeat="item in report.TotalItems"><strong>{{item.Quantity}}</strong></td><td><strong>{{report.GrandTotal}}</strong></td></tr></tbody></table></spinner-overlay></div></div>'),a.put("app/modules/inventorysku/partials/inventorySkuCategories.html",'<div data-ng-if="item.SubItems && item.SubItems.length > 0"><a class="btn btn-link pull-left" data-nodrag data-ng-click=toggle(this)><i class=glyphicon ng-class="{\'glyphicon-chevron-right\': collapsed, \'glyphicon-chevron-down\': !collapsed}"></i></a></div><div ui-tree-handle><div class="ya-treeview-content clearfix"><div class=line><label>{{item.Name}}</label></div><div class=ya-treview-buttons data-nodrag><a class="btn btn-success btn-xs" title=Add data-ng-if=item.AllowAdd nodrag data-ng-click=add(item.Id)><i class="glyphicon glyphicon-plus"></i></a> <a class="btn btn-info btn-xs" title=Edit nodrag data-ng-click=edit(item.Id)><i class="glyphicon glyphicon-edit"></i></a> <a class="btn btn-danger btn-xs" title=Delete nodrag data-ng-if="item.AllowDelete && (!item.SubItems || item.SubItems.length == 0)" ladda=deleteTracker.active() data-ng-click=delete(item.Id)><i class="glyphicon glyphicon-remove"></i></a></div></div></div><ol ui-tree-nodes="" data-ng-model=item.SubItems data-ng-class="{hidden: collapsed}" data-type={{item.Id}}><li ng-repeat="item in item.SubItems" ui-tree-node data-ng-include="\'app/modules/inventorysku/partials/inventorySkuCategories.html\'"></li></ol>'),a.put("app/modules/inventorysku/partials/inventorySkuCategoriesAssign.html",'<div data-ng-if="item.SubItems && item.SubItems.length > 0"><a class="btn btn-link pull-left" data-nodrag data-ng-click=toggle(this)><i class=glyphicon ng-class="{\'glyphicon-chevron-right\': collapsed, \'glyphicon-chevron-down\': !collapsed}"></i></a></div><div ui-tree-handle><div class="ya-treeview-content clearfix"><div class=line data-ng-class="{\'radio-inline\': !item.SubItems || item.SubItems.length == 0}"><label><input data-ng-if="!item.SubItems || item.SubItems.length == 0" data-ng-model=inventorySku.IdInventorySkuCategory value={{item.Id}} type=radio>{{item.Name}}</label></div></div></div><ol ui-tree-nodes="" data-ng-model=item.SubItems data-ng-class="{hidden: collapsed}"><li ng-repeat="item in item.SubItems" ui-tree-node collapsed=true data-ng-include="\'app/modules/inventorysku/partials/inventorySkuCategoriesAssign.html\'"></li></ol>'),a.put("app/modules/inventorysku/partials/inventorySkuCategoriesTreeView.html",'<div class="container-fluid inventory-categories"><div class=left-pane-controls><div class="well container-fluid"><div><button class="btn btn-success width-160px" ladda=editTracker.active() data-ng-click=save()>Save</button></div></div></div><div class=right-pane-main><div class=container-fluid><div class=row><div class="container container-left"><div class="well row categories"><spinner-overlay data-loading=refreshTracker.active()><span class=legend>Manage Parts Categories</span> <a class="btn btn-success btn-xs" title=Add nodrag data-ng-click=add(null)><i class="glyphicon glyphicon-plus"></i></a> <button data-ng-if=!categoriesExpanded data-ng-click=updateCategoriesCollapsed(true); class="btn btn-primary btn-xs expand-button">Expand All</button> <button data-ng-if=categoriesExpanded data-ng-click=updateCategoriesCollapsed(false); class="btn btn-primary btn-xs expand-button">Collapse All</button><div ui-tree=treeOptions class=ya-treeview><ol ui-tree-nodes data-ng-model=rootCategories data-type=0><li ng-repeat="item in rootCategories" ui-tree-node data-ng-include="\'app/modules/inventorysku/partials/inventorySkuCategories.html\'"></li></ol></div></spinner-overlay></div></div></div></div></div></div>'),a.put("app/modules/inventorysku/partials/inventorySkuCategoryDetail.html",'<div class=modal-header><h3 class=modal-title>Add / Edit Parts Category</h3></div><div class=modal-body><spinner-overlay data-loading=refreshTracker.active()><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.submitted}" novalidate><fieldset><div class=form-group><label for=name class="col-md-3 control-label">Name</label><div class=col-md-9><input name=Name class=form-control placeholder=Name data-ng-model=category.Name required><div class=error-container ng-show="forms.submitted && forms.form.Name.$invalid"><small class=error ng-show=forms.form.Name.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Name")}}</small></div></div></div></fieldset></form></spinner-overlay></div><div class=modal-footer><button class="btn btn-success" ladda=saveTracker.active() data-ng-click=save()>Save</button> <button class="btn btn-default" data-ng-click=cancel()>Cancel</button></div>'),a.put("app/modules/inventorysku/partials/inventorySkuDetail.html",'<div class="container-fluid product-edit"><div class=left-pane-controls><div class="well container-fluid"><div><button data-ng-click=save() class="btn btn-success width-160px" unsaved-warning-clear>Save</button></div><div class="btn-group margin-top-10px"><button cancel-button-default-state=index.oneCol.manageInventorySkus cancel-button class="btn btn-default width-160px" unsaved-warning-clear>Cancel</button></div><div class=margin-top-10px><button class="btn btn-primary width-160px" ui-sref=index.oneCol.manageInventorySkus>Manage All</button></div></div></div><div class=right-pane-main><div class=container-fluid><div class=row><uib-tabset active=options.activeTabIndex><uib-tab heading=Details index=detailsTab.index><div class="container container-left"><div class="well row"><spinner-overlay data-loading=refreshTracker.active()><form class=form-horizontal name=forms.details data-ng-submit=save() data-ng-class="{submitted: forms.submitted}" novalidate unsaved-warning-form><fieldset><div class=form-group><label for=active class="col-md-3 control-label">Active</label><div class=col-md-9><div class=checkbox><label><input id=active type=checkbox name=StatusCode data-ng-model=inventorySku.StatusCode data-ng-true-value=2 data-ng-false-value="1"></label></div></div></div><div class=form-group><label for=name class="col-md-3 control-label">Code</label><div class=col-md-9><input name=Code class=form-control placeholder=Code data-ng-model=inventorySku.Code required data-ng-pattern="/^[A-Za-z0-9-]+$/"><div class=error-container ng-show="forms.submitted && forms.details.Code.$invalid"><small class=error ng-show=forms.details.Code.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Code")}}</small> <small class=error ng-show=forms.details.Code.$error.pattern>{{getValidationMessage("ValidationMessages.FieldInvalid","Code")}}</small> <small class=error ng-show=forms.details.Code.$error.server>{{serverMessages.GetMessage(\'Code\')}}</small></div></div></div><div class=form-group><label for=name class="col-md-3 control-label">Description</label><div class=col-md-9><input name=Description class=form-control placeholder=Description data-ng-model=inventorySku.Description required><div class=error-container ng-show="forms.submitted && forms.details.Description.$invalid"><small class=error ng-show=forms.details.Description.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Description")}}</small> <small class=error ng-show=forms.details.Description.$error.server>{{serverMessages.GetMessage(\'Description\')}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label">Product Source</label><div class=col-md-9><select class=form-control name=ProductSource data-ng-model=inventorySku.ProductSource required data-ng-options="option.Id as option.ValueVariant for option in lookups.inventorySkuProductSources"><option value="" ng-if=false></option></select><div class=error-container ng-show="forms.submitted && forms.details.ProductSource.$invalid"><small class=error ng-show=forms.details.ProductSource.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Product Source")}}</small> <small class=error ng-show=forms.details.ProductSource.$error.server>{{serverMessages.GetMessage(\'ProductSource\')}}</small></div></div></div><div class=form-group><label for=name class="col-md-3 control-label">Inventory Quantity</label><div class=col-md-9><input name=Quantity class=form-control placeholder="Inventory Quantity" data-ng-model=inventorySku.Quantity required numbers-only><div class=error-container ng-show="forms.submitted && forms.details.Description.$invalid"><small class=error ng-show=forms.details.Quantity.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Quantity")}}</small> <small class=error ng-show=forms.details.Quantity.$error.server>{{serverMessages.GetMessage(\'Quantity\')}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label">Inventory Unit of Measure</label><div class=col-md-9><select class=form-control name=UnitOfMeasure data-ng-model=inventorySku.UnitOfMeasure required data-ng-options="option.Id as option.ValueVariant for option in lookups.inventorySkuUnitOfMeasures"><option value="" ng-if=false></option></select><div class=error-container ng-show="forms.submitted && forms.details.UnitOfMeasure.$invalid"><small class=error ng-show=forms.details.UnitOfMeasure.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Inventory Unit of Measure")}}</small> <small class=error ng-show=forms.details.UnitOfMeasure.$error.server>{{serverMessages.GetMessage(\'UnitOfMeasure\')}}</small></div></div></div><div class=form-group><label for=name class="col-md-3 control-label">Inventory Unit Amount</label><div class=col-md-9><input name=UnitOfMeasureAmount class=form-control placeholder="Inventory Unit Amount" required data-ng-model=inventorySku.UnitOfMeasureAmount max=100000 min=0.00 required money><div class=error-container ng-show="forms.submitted && forms.details.UnitOfMeasureAmount.$invalid"><small class=error ng-show=forms.details.UnitOfMeasureAmount.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Inventory Unit Amount")}}</small> <small class=error ng-show=forms.details.UnitOfMeasureAmount.$error.parse>{{getValidationMessage("ValidationMessages.FieldRequired","Inventory Unit Amount")}}</small> <small class=error ng-show=forms.details.UnitOfMeasureAmount.$error.max>{{getValidationMessage("ValidationMessages.FieldMax","Inventory Unit Amount",1000000)}}</small> <small class=error ng-show=forms.details.UnitOfMeasureAmount.$error.min>{{getValidationMessage("{0} must be over 0.00","Inventory Unit Amount")}}</small> <small class=error ng-show=forms.details.UnitOfMeasureAmount.$error.server>{{serverMessages.GetMessage(\'UnitOfMeasureAmount\')}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label">Purchase Unit of Measure</label><div class=col-md-9><select class=form-control name=PurchaseUnitOfMeasure data-ng-model=inventorySku.PurchaseUnitOfMeasure data-ng-options="option.Id as option.ValueVariant for option in lookups.inventorySkuPurchaseUnitOfMeasures"><option value="" ng-if=false></option></select><div class=error-container ng-show="forms.submitted && forms.details.PurchaseUnitOfMeasure.$invalid"><small class=error ng-show=forms.details.PurchaseUnitOfMeasure.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Purchase Unit of Measure")}}</small> <small class=error ng-show=forms.details.PurchaseUnitOfMeasure.$error.server>{{serverMessages.GetMessage(\'PurchaseUnitOfMeasure\')}}</small></div></div></div><div class=form-group><label for=name class="col-md-3 control-label">Unit of Measure Quantity</label><div class=col-md-9><input name=PurchaseUnitOfMeasureAmount class=form-control placeholder="Unit of Measure Quantity" data-ng-model=inventorySku.PurchaseUnitOfMeasureAmount required numbers-only><div class=error-container ng-show="forms.submitted && forms.details.PurchaseUnitOfMeasureAmount.$invalid"><small class=error ng-show=forms.details.PurchaseUnitOfMeasureAmount.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Unit of Measure Quantity")}}</small> <small class=error ng-show=forms.details.PurchaseUnitOfMeasureAmount.$error.server>{{serverMessages.GetMessage(\'PurchaseUnitOfMeasureAmount\')}}</small></div></div></div></fieldset></form></spinner-overlay></div></div></uib-tab><uib-tab heading="Parts Category" index=categoriesTab.index><div class="container container-left"><div class="well row categories sales"><spinner-overlay data-loading=refreshTracker.active()><span class=legend>Parts Category</span> <button data-ng-if=!salesCategoriesExpanded data-ng-click=updateSalesCategoriesCollapsed(true); class="btn btn-primary btn-xs expand-button">Expand All</button> <button data-ng-if=salesCategoriesExpanded data-ng-click=updateSalesCategoriesCollapsed(false); class="btn btn-primary btn-xs expand-button">Collapse All</button><div ui-tree data-drag-enabled=false class=ya-treeview><ol ui-tree-nodes="" data-ng-model=rootInventoryCategory.SubItems><li ng-repeat="item in rootInventoryCategory.SubItems" ui-tree-node collapsed=true data-ng-include="\'app/modules/inventorysku/partials/inventorySkuCategoriesAssign.html\'"></li></ol></div></spinner-overlay></div></div></uib-tab></uib-tabset></div></div></div></div>'),a.put("app/modules/inventorysku/partials/inventorySkusList.html",'<div class="container-fluid product-list"><div class=well><span class=legend>Manage Parts</span><div class="row form-group"><div class=col-md-4><input class=form-control placeholder=Code data-ng-model=filter.Code></div><div class=col-md-4><input class=form-control placeholder=Description data-ng-model=filter.Description></div></div><div class="row form-group"><div class=col-md-4><button class="btn btn-info" data-ng-click=filterItems(); type=button>Filter</button></div></div><hr><div class=form-group><button data-ng-click=open(); class="btn btn-primary">Add New Part</button></div><spinner-overlay data-loading=refreshTracker.active()><table id=data-grid class="table table-striped table-hover"><thead><tr><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Code\')"><span>Code</span> <span data-ng-if="filter.Sorting.Path == \'Code\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Description\')"><span>Description</span> <span data-ng-if="filter.Sorting.Path == \'Description\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'StatusCode\')"><span>Status</span> <span data-ng-if="filter.Sorting.Path == \'StatusCode\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'DateEdited\')"><span>Updated</span> <span data-ng-if="filter.Sorting.Path == \'DateEdited\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=actions>Actions</th></tr></thead><tbody><tr data-ng-repeat="item in items"><td><a ui-sref=index.oneCol.inventorySkuDetail({id:item.Id})>{{::item.Code}}</a></td><td>{{::item.Description}}</td><td><span data-ng-if="item.StatusCode == 2" class="label label-info font-default">{{getReferenceItem(ReferenceData.RecordStatuses, item.StatusCode).Text}}</span> <span data-ng-if="item.StatusCode == 1" class="label label-warning font-default">{{getReferenceItem(ReferenceData.RecordStatuses, item.StatusCode).Text}}</span></td><td>{{item.DateEdited | date:"MM/dd/yy"}}<br>{{item.DateEdited | date:"h:mm a"}}<br>{{item.EditedByAgentId}}</td><td><button title=Edit class="btn btn-default btn-success btn-xs" data-ng-click=open(item.Id);><i class="glyphicon glyphicon-edit"></i></button> <button title=Delete class="btn btn-default btn-danger btn-xs" ladda=deleteTracker.active() data-ng-click=delete(item.Id);><i class="glyphicon glyphicon-remove"></i></button></td></tr></tbody></table></spinner-overlay><uib-pagination boundary-links=true total-items=totalItems items-per-page=filter.Paging.PageItemCount data-ng-model=filter.Paging.PageIndex previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; data-ng-change="pageChanged();scrollTo(\'data-grid\');"></uib-pagination></div></div>'),a.put("app/modules/inventorysku/partials/inventorySkusUsageReport.html",'<div class="container-fluid inventory-usage-report"><div class=well><span class=legend>Parts Usage Report</span><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.form.submitted}" novalidate><fieldset><div class="row form-group"><div class=col-md-3><p class=input-group><input name=From data-ng-change=filterChanged(); class=form-control placeholder=From uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.From is-open=fromOpened ng-required="true"> <span class=input-group-btn><button type=button class="btn btn-default" ng-disabled=false ng-click="stopPropagation($event); fromOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.form.submitted && forms.form.From.$invalid"><small class=error ng-show=forms.form.From.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","From")}}</small></div></div><div class=col-md-3><p class=input-group><input name=To data-ng-change=filterChanged(); class=form-control placeholder=To uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.To is-open=toOpened ng-required="true"> <span class=input-group-btn><button type=button class="btn btn-default" ng-disabled=false ng-click="stopPropagation($event); toOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.form.submitted && forms.form.To.$invalid"><small class=error ng-show=forms.form.To.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","To")}}</small></div></div></div><span class=legend>Selected Product SKUs</span><div class="row form-group"><div class=col-md-3><div class="input-group autocomplete col-md-12"><input name=ProductSKU class=form-control placeholder="Product SKU" data-ng-model=options.SkuCode autocomplete=off typeahead-min-length=1 typeahead-wait-ms=200 uib-typeahead="sku.Code as sku.Code for sku in getSKUsBySKU($viewValue)" typeahead-loading=loadingSKUsBySKU typeahead-on-select=skuChanged($index) data-ng-blur=skuChanged($index)></div></div><div class=col-md-4><button class="btn btn-info" data-ng-click=addSku(); type=button data-ng-disabled=options.SkuAddDisabled>Add to Filter</button></div></div><div class="row form-group"><div class=col-md-12><div class=filtered-item data-ng-repeat="item in filter.Skus">{{item.Code}} <button title=Remove class="btn btn-default btn-danger btn-xs" data-ng-click=removeSku($index)><i class="glyphicon glyphicon-remove"></i></button></div></div></div><span class=legend>Selected Part SKUs</span><div class="row form-group"><div class=col-md-3><div class="input-group autocomplete col-md-12"><input name=PartSKU class=form-control placeholder="Part SKU" data-ng-model=options.InvSkuCode autocomplete=off typeahead-min-length=1 typeahead-wait-ms=200 uib-typeahead="sku.Code as sku.Code for sku in getInvSKUsBySKU($viewValue)" typeahead-loading=loadingInvSKUsBySKU typeahead-on-select=invSkuChanged($index) data-ng-blur=invSkuChanged($index)></div></div><div class=col-md-4><button class="btn btn-info" data-ng-click=addInvSku(); type=button data-ng-disabled=options.InvSkuAddDisabled>Add to Filter</button></div></div><div class="row form-group"><div class=col-md-12><div class=filtered-item data-ng-repeat="item in filter.InvSkus">{{item.Code}} <button title=Remove class="btn btn-default btn-danger btn-xs" data-ng-click=removeInvSku($index)><i class="glyphicon glyphicon-remove"></i></button></div></div></div><div class="row form-group"><div class=col-md-4><button class="btn btn-info" data-ng-click=filterItems(); type=button>Filter</button></div><div class=col-md-8><a target=_self class="btn btn-primary pull-right" data-ng-href={{options.ExportUrl}}>Export</a></div></div></fieldset></form><hr><spinner-overlay data-loading=refreshTracker.active()><table class="table table-striped table-hover"><thead><tr><th>Product SKU</th><th>Quantity</th><th>Assemble</th><th>Channel</th><th>Born Date</th><th>Inventory SKU</th><th>Inventory Quantity</th><th>Inventory Description</th><th>Inventory Unit of Measure</th><th>Inventory Unit Amount</th><th>Purchase Unit of Measure</th><th>Product Source</th><th>Category</th></tr></thead><tbody><tr data-ng-repeat-start="item in items"><td>{{item.SkuCode}}</td><td>{{item.TotalSkuQuantity}}</td><td><span data-ng-if="item.Assemble == true" class="label label-draft font-default">Yes</span> <span data-ng-if="item.Assemble == false" class="label label-draft font-default">No</span></td><td>{{getReferenceItem(lookups.inventorySkuChannels, item.InventorySkuChannel).Text}}</td><td>{{item.BornDate | date:"MM/dd/yy"}}</td><td colspan=8></td></tr><tr class=sub-item-row data-ng-repeat="inventorySku in item.InventorySkus"><td colspan=5></td><td>{{inventorySku.InvSkuCode}}</td><td>{{inventorySku.TotalInvQuantityWithInvCorrection}}</td><td>{{inventorySku.InvDescription}}</td><td>{{getReferenceItem(lookups.inventorySkuUnitOfMeasures, inventorySku.UnitOfMeasure).Text}}</td><td>{{inventorySku.TotalUnitOfMeasureAmount}}</td><td>{{getReferenceItem(lookups.inventorySkuPurchaseUnitOfMeasures, inventorySku.PurchaseUnitOfMeasure).Text}}</td><td>{{getReferenceItem(lookups.inventorySkuProductSources, inventorySku.ProductSource).Text}}</td><td>{{inventorySku.InventorySkuCategory}}</td></tr><tr class=hidden data-ng-repeat-end></tr></tbody></table></spinner-overlay></div></div>'),a.put("app/modules/inventorysku/partials/lookupDetail.html",'<div class=container-fluid><div class=left-pane-controls><div class="well container-fluid"><div data-ng-show="state==1"><button class="btn btn-success width-160px" ladda=refreshTracker.active() data-ng-click=save()>Save</button></div><div class="btn-group margin-top-10px"><button cancel-button-default-state=index.oneCol.manageInventorySkuLookups cancel-button class="btn btn-default width-160px">Cancel</button></div><div class=margin-top-10px><button class="btn btn-primary width-160px" ui-sref=index.oneCol.manageInventorySkuLookups>Manage All</button></div></div></div><div class=right-pane-main><div class=container-fluid><div class=row><div class="container container-left"><div class="well row"><spinner-overlay data-loading=refreshTracker.active()><form class=form-horizontal name=forms.form data-ng-class="{submitted: forms.submitted}" novalidate><fieldset><div class=form-group><label class="col-md-3 control-label">Name</label><div class="col-md-9 form-control-static"><span>{{lookup.Description}}</span></div></div><div class=form-group><label class="col-md-3 control-label">Variants</label><div class=col-md-9><button data-ng-click=addVariant(); class="btn btn-info btn-right">Add New Variant</button></div></div><div ui-sortable=sortableOptions data-ng-model=lookup.LookupVariants><div data-ng-repeat="item in lookup.LookupVariants" class=variant-panel><div class=form-horizontal ng-form=i{{$index}} novalidate><fieldset><div class=form-group><label class="col-md-3 control-label"></label><div class="col-md-9 padding-0px"><div class=col-md-1><div class="sortable-move btn btn-info"><i class="glyphicon glyphicon-sort"></i></div></div><div class=col-md-9><input name=ValueVariant class=form-control placeholder=Name data-ng-model=item.ValueVariant required data-ng-maxlength=100><div class=error-container ng-show="forms.submitted && forms.form.i{{$index}}.ValueVariant.$invalid"><small class=error ng-show=forms.form.i{{$index}}.ValueVariant.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Name")}}</small> <small class=error ng-show=forms.form.i{{$index}}.ValueVariant.$error.exist>{{getValidationMessage("ValidationMessages.Exist","GeneralFieldNames.Name")}}</small> <small class=error ng-show=forms.form.i{{$index}}.ValueVariant.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["GeneralFieldNames.Name", "100"])}}</small></div></div><div class=col-md-2 data-ng-click=$event.stopPropagation()><button class="btn btn-danger" data-ng-click=deleteVariant($index)>Delete</button></div></div></div></fieldset></div></div></div></fieldset></form></spinner-overlay></div></div></div></div></div></div>'),
a.put("app/modules/inventorysku/partials/lookupsList.html",'<div class=container-fluid><div class=well><span class=legend>Manage Parts Lookups</span><spinner-overlay data-loading=refreshTracker.active()><table class="table table-striped table-hover"><thead><tr><th>Name</th><th>Actions</th></tr></thead><tbody><tr data-ng-repeat="item in items"><td>{{item.Description}}</td><td><a title=Edit class="btn btn-default btn-success btn-xs" ui-sref=index.oneCol.lookupDetail({id:item.Id})><i class="glyphicon glyphicon-edit"></i></a></td></tr></tbody></table></spinner-overlay></div></div>'),a.put("app/modules/misc/partials/addEditRedirectPopup.html",'<div class=modal-header><h3 class=modal-title>Add / Edit Redirect</h3></div><div class=modal-body><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.submitted}" novalidate><fieldset><div class=form-group><label class="col-md-3 control-label">Source Relative URL</label><div class=col-md-9><input name=From class=form-control placeholder="Relative URL" data-ng-model=redirect.From required><div class=error-container ng-show="forms.submitted && forms.form.From.$invalid"><small class=error ng-show=forms.form.From.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Url")}}</small> <small class=error ng-show=forms.form.From.$error.server>{{serverMessages.GetMessage(\'From\')}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label">Redirect URL</label><div class=col-md-9><input name=To class=form-control placeholder="Redirect URL" data-ng-model=redirect.To required><div class=error-container ng-show="forms.submitted && forms.form.To.$invalid"><small class=error ng-show=forms.form.To.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.RedirectUrl")}}</small> <small class=error ng-show=forms.form.To.$error.server>{{serverMessages.GetMessage(\'To\')}}</small></div></div></div></fieldset></form></div><div class=modal-footer><button class="btn btn-success" ladda=saveTracker.active() data-ng-click=save()>Save</button> <button class="btn btn-default" data-ng-click=cancel()>Cancel</button></div>'),a.put("app/modules/misc/partials/catalogRequests.html",'<div class=container-fluid><div class=well><span class=legend>Catalog Requests</span><div class="row form-group"><div class=col-md-12><button class="btn btn-info" data-ng-click=clear(); type=button>Clear</button> <a target=_self class="btn btn-primary pull-right" data-ng-href={{options.exportUrl}}>Export</a></div></div><hr><spinner-overlay data-loading=refreshTracker.active()><table class="table table-striped"><thead><tr><th>Title</th><th>First Name</th><th>Last Name</th><th>Address</th><th>City</th><th>Country</th><th>State/Province</th><th>Postal Code</th><th>Email</th></tr></thead><tbody><tr data-ng-repeat="item in items"><td>{{::item.PersonTitle}}</td><td>{{::item.FirstName}}</td><td>{{::item.LastName}}</td><td>{{::item.Address1}}</td><td>{{::item.City}}</td><td>{{::item.Country}}</td><td><span data-ng-if=item.StateCode>{{::item.StateCode}}</span> <span data-ng-if="!item.StateCode && item.County">{{::item.County}}</span></td><td>{{::item.Zip}}</td><td>{{::item.Email}}</td></tr></tbody></table></spinner-overlay></div></div>'),a.put("app/modules/misc/partials/redirectsList.html",'<div class="container-fluid redirects-list"><div class=well><span class=legend>Manage Redirects</span><div class=form-group><button data-ng-click=open(); class="btn btn-primary">Add New Redirect</button></div><spinner-overlay data-loading=refreshTracker.active()><table id=data-grid class="table table-striped table-hover"><thead><tr><th>Source Relative Url</th><th>Redirect Url</th><th>Added</th><th>Updated</th><th class=actions>Actions</th></tr></thead><tbody><tr data-ng-repeat="item in items"><td>{{::item.From}}</td><td>{{::item.To}}</td><td>{{::item.DateCreated | date:"MM/dd/yy"}}<br>{{::item.DateCreated | date:"h:mm a"}}<br>{{::item.AddedBy}}</td><td>{{::item.DateEdited | date:"MM/dd/yy"}}<br>{{::item.DateEdited | date:"h:mm a"}}<br>{{::item.EditedBy}}</td><td><button title=Edit class="btn btn-default btn-success btn-xs" data-ng-click=open(item.Id);><i class="glyphicon glyphicon-edit"></i></button> <button title=Delete class="btn btn-default btn-danger btn-xs" ladda=deleteTracker.active() data-ng-click=delete(item.Id);><i class="glyphicon glyphicon-remove"></i></button></td></tr></tbody></table></spinner-overlay><uib-pagination boundary-links=true total-items=totalItems items-per-page=filter.Paging.PageItemCount data-ng-model=filter.Paging.PageIndex previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; data-ng-change="pageChanged();scrollTo(\'data-grid\');"></uib-pagination></div></div>'),a.put("app/modules/misc/partials/vitalGreenReport.html",'<div class="container-fluid vital-green-report"><div class=well><span class=legend>Review VitalGreen Statistics</span><div class="row form-group"><div class=col-md-3><select class=form-control name=Month data-ng-change=filterChanged(); data-ng-model=filter.Month ng-options="item.Key as item.Text for item in ReferenceData.Months"></select></div><div class=col-md-3><select class=form-control name=Year data-ng-change=filterChanged(); data-ng-model=filter.Year ng-options="item.Key as item.Text for item in years"></select></div></div><div class="row form-group"><div class=col-md-12><button class="btn btn-info" data-ng-click=filterReport(); type=button>Filter</button> <a target=_self class="btn btn-primary pull-right" data-ng-href={{report.exportUrl}}>Export</a></div></div><span class=legend>{{getReferenceItem(ReferenceData.Months, report.Month).Text}} - {{report.Year}}</span><div class=form-group>Completed Requests: <strong>{{report.CompletedCount}}</strong></div><div><div data-ng-repeat="item in report.Zones">{{::item.Zone.Company}} - {{::item.Zone.City}}, {{::item.Zone.State}} - <strong>{{::item.CompletedCount}}</strong></div></div><hr><spinner-overlay data-loading=refreshTracker.active()><table class="table table-striped"><thead><tr><th>Name</th><th>Address</th><th>Region</th><th class=completions>Completions</th></tr></thead><tbody><tr class=container-row data-ng-repeat-start="item in report.Dates" data-ng-click="item.RequestsVisible=!item.RequestsVisible"><td colspan=3><strong>{{::item.Date | date:"EEEE MM/dd/yy"}}</strong></td><td><strong>{{::item.CompletedCount}}</strong></td></tr><tr data-ng-class="{\'hidden\': !item.RequestsVisible}" class=request-row data-ng-repeat="request in item.Requests"><td>{{::request.FirstName}} {{::request.LastName}}</td><td>{{::request.Address}} {{::request.City}}, {{::request.State}} {{::request.Zip}}</td><td colspan=2 data-ng-if=request.Zone>{{::request.Zone.Company}} - {{::request.Zone.City}}, {{::request.Zone.State}}</td></tr><tr class=hidden data-ng-repeat-end></tr></tbody></table></spinner-overlay></div></div>'),a.put("app/modules/order/partials/aAFESShipReport.html",'<div class="container-fluid aafes-ship-report"><div class=well><span class=legend>AAFES Ship Report</span><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.form.submitted}" novalidate><fieldset><div class="row form-group"><div class=col-md-3><p class=input-group><input class=form-control name=Shipfrom data-ng-change=filterChanged(); uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.ShipFrom is-open=fromOpened ng-required="true"> <span class=input-group-btn><button type=button class="btn btn-default" ng-click="stopPropagation($event); fromOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.form.submitted && forms.form.From.$invalid"><small class=error ng-show=forms.form.From.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","From")}}</small></div></div><div class=col-md-3><p class=input-group><input class=form-control name=ShipTo data-ng-change=filterChanged(); uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.ShipTo is-open=toOpened ng-required="true"> <span class=input-group-btn><button type=button class="btn btn-default" ng-click="stopPropagation($event); toOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.form.submitted && forms.form.To.$invalid"><small class=error ng-show=forms.form.To.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","To")}}</small></div></div></div><div class="row form-group"><div class=col-md-12><button class="btn btn-info" data-ng-click=filterItems(); type=button>Filter</button> <a target=_self class="btn btn-primary pull-right" data-ng-href={{options.exportUrl}}>Export</a></div></div></fieldset></form><spinner-overlay data-loading=refreshTracker.active()><div><table class="table table-striped"><thead><tr><th>ORDER_NO</th><th>SKU_NO</th><th>QUANTITY</th><th>SHIP_METHOD</th><th>TRACKING_NO</th><th>INVOICE_NO</th></tr></thead><tbody><tr data-ng-repeat="item in items"><td>{{::item.OrderNotes}}</td><td>{{::item.Code}}</td><td>{{::item.Quantity}}</td><td>{{::item.ShipMethodFreightCarrier}}</td><td><a target=_blank data-ng-href={{item.ServiceUrl}}>{{::item.TrackingNumber}}</a></td><td><a ui-sref="{{::item.IdObjectType==5 ? \'index.oneCol.orderReshipDetail({id: item.IdOrder })\' : item.IdObjectType==6 ? \'index.oneCol.orderRefundDetail({id: item.IdOrder })\' : \'index.oneCol.orderDetail({id: item.IdOrder })\'}}">{{::item.IdOrder}}</a></td></tr></tbody></table></div></spinner-overlay></div></div>'),a.put("app/modules/order/partials/autoShipList.html",'<div class="well row customer-orders-list orders"><spinner-overlay data-loading=addEditTracker.active()><table id=data-grid-autoships class="table table-striped order-statuses"><thead><tr><th colspan=2>Item</th><th>Frequency</th><th>Active</th><th>Next Date</th><th>Shipping Details</th><th>Billing Details</th><th>Actions</th></tr></thead><tbody><tr data-ng-repeat="item in autoShips"><td><a target=_blank href={{baseUrl}}{{item.ProductUrl}} title={{item.DisplayName}}><img class=thumb data-ng-src={{item.IconUrl}} alt={{item.Name}}></a></td><td><a target=_blank href={{baseUrl}}{{item.ProductUrl}} title={{item.DisplayName}} class=cart-text-link>{{item.DisplayName}} ({{item.Code}})</a></td><td>{{item.Frequency}} Months</td><td><span data-ng-if=item.Active class="label label-success font-default">Yes</span> <span data-ng-if=!item.Active class="label label-danger font-default">No</span></td><td>{{item.NextDate | date:"MM/dd/yy"}}</td><td><div class=key-value-line data-ng-repeat="detail in item.ShippingDetails | filter:emptyOrNull"><span class=key-info-boxed data-ng-if=detail.Key>{{detail.Key}}:</span> <span class=value-info-boxed data-ng-if=detail.Value>{{detail.Value}}</span></div></td><td><div class=key-value-line data-ng-repeat="detail in item.PaymentMethodDetails | filter:emptyOrNull"><span class=key-info-boxed data-ng-if=detail.Key>{{detail.Key}}:</span> <span class=value-info-boxed data-ng-if=detail.Value>{{detail.Value}}</span></div></td><td class=buttons-compact-container><button title="Edit Billing" class="btn btn-default btn-primary btn-xs" data-ng-click=editBilling(item.Id)>Edit Billing Details</button> <button title=Pause data-ng-if=item.Active class="btn btn-default btn-info btn-xs" data-ng-click="activatePause(item.Id, false)">Pause</button> <button title=Pause data-ng-if=!item.Active class="btn btn-default btn-success btn-xs" data-ng-click="activatePause(item.Id, true)">Start</button> <button title=Delete class="btn btn-default btn-danger btn-xs" data-ng-click=delete(item.Id)>Delete</button></td></tr></tbody></table></spinner-overlay><uib-pagination boundary-links=true total-items=autoShipsTotalItems items-per-page=autoShipsFilter.Paging.PageItemCount data-ng-model=autoShipsFilter.Paging.PageIndex previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; data-ng-change="autoShipsPageChanged();scrollTo(\'data-grid-autoships\');"></uib-pagination></div>'),a.put("app/modules/order/partials/customerOrdersList.html",'<div class="well row customer-orders-list orders"><spinner-overlay data-loading=addEditTracker.active()><table id=data-grid-orders class="table table-striped order-statuses"><thead><tr><th class=status data-ng-click="filter.Sorting.applySort(\'OrderStatus\')"><span>Status</span> <span data-ng-if="filter.Sorting.Path == \'OrderStatus\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'IdObjectType\')"><span>Type</span> <span data-ng-if="filter.Sorting.Path == \'IdObjectType\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'DateEdited\')"><span>Updated</span> <span data-ng-if="filter.Sorting.Path == \'DateEdited\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'IdOrderSource\')"><span>Order Source</span> <span data-ng-if="filter.Sorting.Path == \'IdOrderSource\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'DateCreated\')"><span>Order Date</span> <span data-ng-if="filter.Sorting.Path == \'DateCreated\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Id\')"><span>Order #</span> <span data-ng-if="filter.Sorting.Path == \'Id\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Total\')"><span>Order Total</span> <span data-ng-if="filter.Sorting.Path == \'Total\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'ShipTo\')"><span>Ship To</span> <span data-ng-if="filter.Sorting.Path == \'ShipTo\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th>Actions</th></tr></thead><tbody><tr data-ng-class="::{\'order-notes\': item.OrderNotes}" data-ng-repeat="item in ordersHistory"><td><div data-ng-include="\'app/modules/order/partials/orderStatusSection.html\'"></div></td><td><span class="label font-default" data-ng-class="::{\'label-retail\': (item.IdObjectType==1 || item.IdObjectType==7 ||item.IdObjectType==3 || item.IdObjectType==4), \'label-primary\':  item.IdObjectType==5, \'label-success\':  item.IdObjectType==6}">{{::getReferenceItem(ReferenceData.ShortOrderTypes, item.IdObjectType).Text}}</span></td><td>{{::item.DateEdited | date:"MM/dd/yy"}}<br>{{::item.DateEdited | date:"h:mm a"}}<br>{{::item.EditedByAgentId}}</td><td class=order-source><span>{{getReferenceItem(ReferenceData.OrderSourceTypes, item.IdOrderSource).Text}}</span></td><td>{{::item.DateCreated | date:"MM/dd/yy"}}<br>{{::item.DateCreated | date:"h:mm a"}}</td><td><a ui-sref="{{::item.IdObjectType==5 ? \'index.oneCol.orderReshipDetail({id: item.Id })\' : item.IdObjectType==6 ? \'index.oneCol.orderRefundDetail({id: item.Id })\' : \'index.oneCol.orderDetail({id: item.Id })\'}}">{{::item.Id}}</a></td><td data-ng-if="::item.IdObjectType!=6">{{::item.Total | currency}}</td><td data-ng-if="::item.IdObjectType==6">({{::item.Total | currency}})</td><td>{{::item.ShipTo}}</td><td><a class="btn btn-default btn-primary btn-xs" target=_blank data-ng-href=/api/orderinvoice/base/{{::item.Id}}><i class="fa fa-search"></i></a> <button title=Repeat class="btn btn-default btn-success btn-xs" data-ng-if="item.IdObjectType!=5 && item.IdObjectType!=6 && item.IdObjectType!=7 && item.OrderStatus!=1 && item.POrderStatus!=1 && item.NPOrderStatus!=1" ui-sref="index.oneCol.orderAdd({idcustomer:item.IdCustomer, idsource:item.Id })">Repeat</button> <button title=Reship class="btn btn-default btn-info btn-xs" data-ng-if="item.IdObjectType!=6 && (item.OrderStatus==3 || item.POrderStatus==3 || item.NPOrderStatus==3)" ui-sref="index.oneCol.orderReshipAdd({idcustomer:item.IdCustomer, idsource:item.Id })">Reship</button> <button data-ng-if="item.IdObjectType!=6 && item.OrderStatus==3 || item.POrderStatus==3 || item.NPOrderStatus==3" ui-sref="index.oneCol.orderRefundAdd({idcustomer:item.IdCustomer, idsource:item.Id })" title=Refund class="btn btn-default btn-primary btn-xs">Refund</button></td></tr></tbody></table></spinner-overlay><uib-pagination boundary-links=true total-items=ordersTotalItems items-per-page=ordersFilter.Paging.PageItemCount data-ng-model=ordersFilter.Paging.PageIndex previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; data-ng-change="ordersPageChanged();scrollTo(\'data-grid-orders\');"></uib-pagination></div>'),a.put("app/modules/order/partials/exportResult.html",'<div class=modal-header><h3>Export Result</h3></div><div class=modal-body><p class=text-primary><b>Total:</b>&nbsp;{{total}}</p><p class=text-success><b>Succeeded:</b>&nbsp;{{successCount}}</p><p class=text-danger><b>Failed:</b>&nbsp;{{errorCount}}</p><div class=export-result-errors><table class="margin-top-20px table table-striped table-hover" data-ng-if="errors.length > 0"><thead><tr><th>Order Id</th><th>Error</th></tr></thead><tbody><tr data-ng-repeat="error in errors"><td>{{error.Id}}</td><td><p class=text-danger>{{error.Error}}</p></td></tr></tbody></table></div></div><div class=modal-footer><button data-ng-click=ok() class="btn btn-success">OK</button></div>'),a.put("app/modules/order/partials/manageAutoShipBilling.html",'<div class=modal-header><h3 class=modal-title>Billing Details</h3></div><div class=modal-body><form class=form-horizontal name=forms.creditCard data-ng-submit=save() data-ng-class="{submitted: forms.submitted[creditCard.formName]}" novalidate><fieldset><div class=form-group><label class="col-md-3 control-label">Credit Cards</label><div class=col-md-9><select class=form-control id=selectPaymentMethod data-ng-model=creditCard data-ng-options="(getCreditCardTypeName(cc.CardType) + \', ending in \' + getLast4(cc.CardNumber) + (cc.IsSelected ? \' (In Order)\' : \'\')) for cc in creditCards"></select></div></div><div class=form-group><label for=NameOnCard class="col-md-3 control-label">Name on Card</label><div class=col-md-9><input class=form-control name=NameOnCard id=NameOnCard data-ng-model=creditCard.NameOnCard placeholder="Name on Card" required autocomplete=off><div class=error-container ng-show="forms.submitted[creditCard.formName] && forms.creditCard.NameOnCard.$invalid"><small class=error ng-show=forms.creditCard.NameOnCard.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.NameOnCard")}}</small> <small class=error ng-show=forms.creditCard.NameOnCard.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["GeneralFieldNames.NameOnCard", "100"])}}</small> <small class=error ng-show="!forms.creditCard.NameOnCard.$error.required && !forms.creditCard.NameOnCard.$error.maxlength && forms.creditCard.NameOnCard.$error.server">{{serverMessages.GetMessage(\'NameOnCard\')}}</small></div></div></div><div class=form-group><label for=CardType class="col-md-3 control-label">Card Type</label><div class=col-md-9><select class=form-control id=CardType name=CardType data-ng-model=creditCard.CardType ng-options="creditCardType.Key as creditCardType.Text for creditCardType in creditCardTypes" required autocomplete=off></select><div class=error-container ng-show="forms.submitted[creditCard.formName] && forms.creditCard.CardType.$invalid"><small class=error ng-show=forms.creditCard.CardType.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.CardType")}}</small> <small class=error ng-show="!forms.creditCard.CardType.$error.required && forms.creditCard.CardType.$error.server">{{serverMessages.GetMessage(\'CardType\')}}</small></div></div></div><div class=form-group><label for=CardNumber class="col-md-3 control-label">Card Number</label><div class=col-md-9><input class=form-control id=CardNumber name=CardNumber data-max-characters=16 data-ng-model=creditCard.CardNumber placeholder="Card Number" data-ng-maxlength="{{paymentInfoTab.CreditCard.CardType == 3 ? \'15\' : \'16\'}}" required autocomplete=off><div class=error-container ng-show="forms.submitted[creditCard.formName] && forms.creditCard.CardNumber.$invalid"><small class=error ng-show=forms.creditCard.CardNumber.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.CardNumber")}}</small> <small class=error ng-show=forms.creditCard.CardNumber.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["GeneralFieldNames.CardNumber", paymentInfoTab.CreditCard.CardType == 3 ? \'15\' : \'16\'])}}</small> <small class=error ng-show="!forms.creditCard.CardNumber.$error.required && !forms.creditCard.CardNumber.$error.maxlength && forms.creditCard.CardNumber.$error.server">{{serverMessages.GetMessage(\'CardNumber\')}}</small></div></div></div><div class=form-group><label for=ExpirationDateMonth class="col-md-3 control-label">Expiration Date</label><div class=col-md-2><input class="form-control number" id=ExpirationDateMonth numbers-only data-max-characters=2 name=ExpirationDateMonth data-ng-model=creditCard.ExpirationDateMonth min=1 max=12 ng-pattern="/^\\d{1,2}?$/" placeholder=Month required autocomplete=off><div class=error-container ng-show="forms.submitted[creditCard.formName] && forms.creditCard.ExpirationDateMonth.$invalid"><small class=error ng-show=forms.creditCard.ExpirationDateMonth.$error.pattern>{{getValidationMessage("ValidationMessages.MonthFormat","GeneralFieldNames.ExpirationDateMonth")}}</small> <small class=error ng-show=forms.creditCard.ExpirationDateMonth.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.ExpirationDateMonth")}}</small> <small class=error ng-show="!forms.creditCard.ExpirationDateMonth.$error.pattern && !forms.creditCard.ExpirationDateMonth.$error.required && forms.creditCard.ExpirationDateMonth.$error.server">{{serverMessages.GetMessage(\'ExpirationDateMonth\')}}</small></div></div><div class=col-md-2><input class=form-control id=ExpirationDateYear numbers-only data-max-characters=2 name=ExpirationDateYear data-ng-model=creditCard.ExpirationDateYear min=1 max=99 ng-pattern="/^\\d{1,2}?$/" placeholder=Year required autocomplete=off><div class=error-container ng-show="forms.submitted[creditCard.formName] && forms.creditCard.ExpirationDateYear.$invalid"><small class=error ng-show=forms.creditCard.ExpirationDateYear.$error.pattern>{{getValidationMessage("ValidationMessages.YearFormat","GeneralFieldNames.ExpirationDateYear")}}</small> <small class=error ng-show=forms.creditCard.ExpirationDateYear.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.ExpirationDateYear")}}</small> <small class=error ng-show="!forms.creditCard.ExpirationDateYear.$error.pattern && !forms.creditCard.ExpirationDateYear.$error.required && forms.creditCard.ExpirationDateYear.$error.server">{{serverMessages.GetMessage(\'ExpirationDateYear\')}}</small></div></div></div><hr><div data-ng-include="\'app/modules/customer/partials/address.html\'" data-ng-repeat="model in [creditCard]"></div></fieldset></form></div><div class=modal-footer><button class="btn btn-success" ladda=saveTracker.active() data-ng-click=save()>Save</button> <button class="btn btn-default" data-ng-click=cancel()>Cancel</button></div>'),a.put("app/modules/order/partials/matchbackReport.html",'<div class="container-fluid matchback-report"><div class=well><span class=legend>Matchback and Post-Season Analysis</span><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.form.submitted}" novalidate><fieldset><div class="row form-group"><div class=col-md-3><p class=input-group><input class=form-control name=From data-ng-change=filterChanged(); uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.From is-open=fromOpened ng-required="true"> <span class=input-group-btn><button type=button class="btn btn-default" ng-click="stopPropagation($event); fromOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.form.submitted && forms.form.From.$invalid"><small class=error ng-show=forms.form.From.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","From")}}</small></div></div><div class=col-md-3><p class=input-group><input class=form-control name=To data-ng-change=filterChanged(); uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.To is-open=toOpened ng-required="true"> <span class=input-group-btn><button type=button class="btn btn-default" ng-click="stopPropagation($event); toOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.form.submitted && forms.form.To.$invalid"><small class=error ng-show=forms.form.To.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","To")}}</small></div></div><div class=col-md-3><select class=form-control name=IdOrderSource data-ng-change=filterChanged(); data-ng-model=filter.IdOrderSource ng-options="item.Key as item.Text for item in orderSourceTypes"></select></div></div><div class="row form-group"><div class=col-md-12><button class="btn btn-info" data-ng-click=filterItems(); type=button>Filter</button> <a target=_self class="btn btn-primary pull-right" data-ng-href={{options.exportUrl}}>Export</a></div></div></fieldset></form><spinner-overlay data-loading=refreshTracker.active()><div><table id=data-grid class="table table-striped"><thead><tr><th>Order #</th><th>Order Source</th><th>Customer #</th><th>Order Date</th><th>First Name</th><th>Last Name</th><th>Address1</th><th>Address2</th><th>Country</th><th>State</th><th>City</th><th>Zip</th><th>Key Code</th><th>Heard Of</th><th>Discount Code</th><th>Products Total</th><th>Shipping Total</th><th>Total</th></tr></thead><tbody><tr data-ng-repeat="item in items"><td><a ui-sref="{{::item.IdObjectType==5 ? \'index.oneCol.orderReshipDetail({id: item.IdOrder })\' : item.IdObjectType==6 ? \'index.oneCol.orderRefundDetail({id: item.IdOrder })\' : \'index.oneCol.orderDetail({id: item.IdOrder })\'}}">{{::item.IdOrder}}</a></td><td>{{::item.OrderSource}}</td><td><a ui-sref="index.oneCol.customerDetail({id: {{::item.IdCustomer}}})">{{::item.IdCustomer}}</a></td><td>{{::item.DateCreated | date:"MM/dd/yy"}}<br>{{::item.DateCreated | date:"h:mm a"}}</td><td>{{::item.BillingFirstName}}</td><td>{{::item.BillingLastName}}</td><td>{{::item.BillingAddress1}}</td><td>{{::item.BillingAddress2}}</td><td>{{::item.BillingCountyCode}}</td><td>{{::item.BillingStateCode}}</td><td>{{::item.BillingCity}}</td><td>{{::item.BillingZip}}</td><td>{{::item.KeyCode}}</td><td>{{::item.Source}}</td><td>{{::item.DiscountCode}}</td><td>{{::item.ProductsSubtotal | currency}}</td><td>{{::item.ShippingTotal | currency}}</td><td>{{::item.Total | currency}}</td></tr></tbody></table></div></spinner-overlay><uib-pagination boundary-links=true total-items=totalItems items-per-page=filter.Paging.PageItemCount data-ng-model=filter.Paging.PageIndex previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; data-ng-change="pageChanged();scrollTo(\'data-grid\');"></uib-pagination></div></div>'),a.put("app/modules/order/partials/moveOrderForm.html",'<div class=container-fluid><div class=left-pane-controls><div class="well container-fluid"><div><button class="btn btn-success width-160px" ladda=editTracker.active() data-ng-click=save()>Save</button></div></div></div><div class=right-pane-main><div class=container-fluid><div class=row><div class="container container-left"><div class="well row"><spinner-overlay data-loading=refreshTracker.active()><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.form.submitted}" novalidate><fieldset><span class=legend>Reassign Transaction</span><div class=form-group><label for=id class="col-md-3 control-label">Order #</label><div class=col-md-9><div class="input-group autocomplete"><input name=Id class=form-control placeholder="Order #" data-ng-model=order.Id required numbers-only typeahead-min-length=3 uib-typeahead="item.Id as item.Id for item in getOrders($viewValue)" typeahead-loading=loadingOrders> <span class=input-group-addon><i ng-show=loadingOrders class="glyphicon glyphicon-refresh"></i></span></div><div class=error-container ng-show="forms.form.submitted && forms.form.Id.$invalid"><small class=error ng-show=forms.form.Id.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Order #")}}</small> <small class=error ng-show=forms.form.Id.$error.server>{{serverMessages.GetMessage(\'Id\')}}</small></div></div></div><div class=form-group><label for=id class="col-md-3 control-label">New Customer #:</label><div class=col-md-9><div class="input-group autocomplete"><input name=IdCustomer class=form-control placeholder="New Customer #" data-ng-model=order.IdCustomer required numbers-only typeahead-min-length=3 uib-typeahead="item.Id as item.Id+\' - \'+item.Name for item in getCustomers($viewValue)" typeahead-loading=loadingCustomers> <span class=input-group-addon><i ng-show=loadingCustomers class="glyphicon glyphicon-refresh"></i></span></div><div class=error-container ng-show="forms.form.submitted && forms.form.IdCustomer.$invalid"><small class=error ng-show=forms.form.IdCustomer.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","New Customer #")}}</small> <small class=error ng-show=forms.form.IdCustomer.$error.server>{{serverMessages.GetMessage(\'IdCustomer\')}}</small></div></div></div></fieldset></form></spinner-overlay></div></div></div></div></div></div>'),a.put("app/modules/order/partials/orderAgentsReport.html",'<div class="container-fluid order-agents-report"><div class=well><span class=legend>Agents Report</span><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.form.submitted}" novalidate><fieldset><div class="row form-group"><div class=col-md-3><p class=input-group><input class=form-control name=From data-ng-change=filterChanged(); uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.From is-open=fromOpened ng-required="true"> <span class=input-group-btn><button type=button class="btn btn-default" ng-disabled=false ng-click="stopPropagation($event); fromOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.form.submitted && forms.form.From.$invalid"><small class=error ng-show=forms.form.From.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","From")}}</small></div></div><div class=col-md-3><p class=input-group><input class=form-control name=To data-ng-change=filterChanged(); uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.To is-open=toOpened ng-required="true"> <span class=input-group-btn><button type=button class="btn btn-default" ng-disabled=false ng-click="stopPropagation($event); toOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.form.submitted && forms.form.To.$invalid"><small class=error ng-show=forms.form.To.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","To")}}</small></div></div></div><div class="row form-group"><div class=col-md-3><select class=form-control name=FrequencyType data-ng-change=filterChanged(); data-ng-model=filter.FrequencyType ng-options="item.Key as item.Text for item in frequencyTypes"></select></div><div data-ng-if=options.allowSeeFullReport class=col-md-3><select class=form-control multiple name=IdAdminTeams data-ng-model=filter.IdAdminTeams data-ng-change=idAdminTeamChanged() ng-options="item.Id as item.Name for item in teams"></select></div><div data-ng-if=options.allowSeeFullReport class=col-md-3><select class=form-control name=IdAdmin data-ng-model=filter.IdAdmin data-ng-change=idAdminChanged() ng-options="item.Id as item.AgentId for item in admins"></select></div></div><div class="row form-group"><div class=col-md-12><button class="btn btn-info" data-ng-click=filterItems(); type=button>Filter</button> <a target=_self class="btn btn-primary pull-right" data-ng-href={{options.exportUrl}} data-ng-click=exportClick($event)>Export</a></div></div></fieldset></form><spinner-overlay data-loading=refreshTracker.active()><div class=margin-bottom-30px data-ng-repeat="period in report.Periods"><span data-ng-if="report.FrequencyType==1" class="legend dates">{{period.From | date:"MM/dd/yy"}}</span> <span data-ng-if="report.FrequencyType!=1" class="legend dates">{{period.From | date:"MM/dd/yy"}} - {{period.To | date:"MM/dd/yy"}}</span><div><div data-ng-repeat="team in period.Teams"><span data-ng-if=team.AdminTeamName class=legend>{{team.AdminTeamName}}</span><table data-ng-if="team.Agents.length>0" class="table table-striped agents"><thead><tr><th class=sortable-column data-ng-click="team.Sorting.applySort(\'AgentId\')"><span>Agent</span> <span data-ng-if="team.Sorting.Path == \'AgentId\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="team.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="team.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="team.Sorting.applySort(\'AgentName\')"><span>Name</span> <span data-ng-if="team.Sorting.Path == \'AgentName\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="team.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="team.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="team.Sorting.applySort(\'OrdersCount\')"><span># of Orders</span> <span data-ng-if="team.Sorting.Path == \'OrdersCount\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="team.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="team.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="team.Sorting.applySort(\'TotalOrdersAmount\')"><span>Total Order Value</span> <span data-ng-if="team.Sorting.Path == \'TotalOrdersAmount\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="team.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="team.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="team.Sorting.applySort(\'AverageOrdersAmount\')"><span>Average Order Value</span> <span data-ng-if="team.Sorting.Path == \'AverageOrdersAmount\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="team.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="team.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="team.Sorting.applySort(\'LowestOrderAmount\')"><span>Lowest Order Value</span> <span data-ng-if="team.Sorting.Path == \'LowestOrderAmount\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="team.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="team.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="team.Sorting.applySort(\'HighestOrderAmount\')"><span>Highest Order Value</span> <span data-ng-if="team.Sorting.Path == \'HighestOrderAmount\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="team.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="team.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="team.Sorting.applySort(\'RefundsCount\')"><span># Refunds</span> <span data-ng-if="team.Sorting.Path == \'RefundsCount\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="team.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="team.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="team.Sorting.applySort(\'ReshipsCount\')"><span># Reships</span> <span data-ng-if="team.Sorting.Path == \'ReshipsCount\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="team.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="team.Sorting.SortOrder == \'Desc\'"></i></span></th></tr></thead><tbody><tr data-ng-repeat="agent in team.Agents"><td class=agent>{{agent.AgentId}}</td><td class=agent-name>{{agent.AgentName}}</td><td class=orders-count>{{agent.OrdersCount}}</td><td class=orders-total-amount>{{agent.TotalOrdersAmount | currency}}</td><td class=orders-average-amount>{{agent.AverageOrdersAmount | currency}}</td><td class=orders-lowest-amount>{{agent.LowestOrderAmount | currency}}</td><td class=orders-highest-amount>{{agent.HighestOrderAmount | currency}}</td><td class=refunds>{{agent.RefundsCount}}</td><td class=reships>{{agent.ReshipsCount}}</td></tr></tbody></table><table data-ng-if="options.allowSeeFullReport && !report.IdAdmin" class="table table-striped team-total"><tbody><tr><td class=agent><strong>Team Total</strong></td><td class=agent-name></td><td class=orders-count><strong>{{team.OrdersCount}}</strong></td><td class=orders-total-amount><strong>{{team.TotalOrdersAmount | currency}}</strong></td><td class=orders-average-amount><strong>{{team.AverageOrdersAmount | currency}}</strong></td><td class=orders-lowest-amount><strong>{{team.LowestOrderAmount | currency}}</strong></td><td class=orders-highest-amount><strong>{{team.HighestOrderAmount | currency}}</strong></td><td class=refunds><strong>{{team.RefundsCount}}</strong></td><td class=reships><strong>{{team.ReshipsCount}}</strong></td></tr></tbody></table><table data-ng-if=options.allowSeeFullReport class="table table-striped team-diff"><tbody><tr><td class=agent>% of total phone orders</td><td class=agent-name></td><td class=orders-count>{{team.AgentOrdersPercent}}%</td><td class=orders-total-amount></td><td data-ng-if="team.AverageOrdersAmountDifference>=0" class=orders-average-amount>{{team.AverageOrdersAmountDifference | currency}}</td><td data-ng-if="team.AverageOrdersAmountDifference<0" class=orders-average-amount>({{Math.abs(team.AverageOrdersAmountDifference) | currency}})</td><td class=orders-lowest-amount></td><td class=orders-highest-amount></td><td class=refunds></td><td class=reships></td></tr></tbody></table></div></div><div data-ng-if=options.allowSeeFullReport class=margin-top-30px><table class="table table-striped all-teams-total"><tbody><tr><td class=agent><strong>Overall Teams Total(phone orders)</strong></td><td class=agent-name></td><td class=orders-count><strong>{{period.OrdersCount}}</strong></td><td class=orders-total-amount><strong>{{period.TotalOrdersAmount | currency}}</strong></td><td class=orders-average-amount><strong>{{period.AverageOrdersAmount | currency}}</strong></td><td class=orders-lowest-amount><strong>{{period.LowestOrderAmount | currency}}</strong></td><td class=orders-highest-amount><strong>{{period.HighestOrderAmount | currency}}</strong></td><td class=refunds><strong>{{period.RefundsCount}}</strong></td><td class=reships><strong>{{period.ReshipsCount}}</strong></td></tr></tbody></table><table class="table table-striped all-teams-diff"><tbody><tr><td class=agent>% of total orders</td><td class=agent-name></td><td class=orders-count>{{period.AgentOrdersPercent}}%</td><td class=orders-total-amount></td><td data-ng-if="period.AverageOrdersAmountDifference>=0" class=orders-average-amount>{{period.AverageOrdersAmountDifference | currency}}</td><td data-ng-if="period.AverageOrdersAmountDifference<0" class=orders-average-amount>({{Math.abs(period.AverageOrdersAmountDifference) | currency}})</td><td class=orders-lowest-amount></td><td class=orders-highest-amount></td><td class=refunds></td><td class=reships></td></tr></tbody></table><table class="table table-striped all-total"><tbody><tr><td class=agent><strong>Total Orders</strong></td><td class=agent-name></td><td class=orders-count><strong>{{period.AllOrdersCount}}</strong></td><td class=orders-total-amount><strong>{{period.AllTotalOrdersAmount | currency}}</strong></td><td class=orders-average-amount><strong>{{period.AllAverageOrdersAmount | currency}}</strong></td><td class=orders-lowest-amount><strong>{{period.AllLowestOrderAmount | currency}}</strong></td><td class=orders-highest-amount><strong>{{period.AllHighestOrderAmount | currency}}</strong></td><td class=refunds><strong>{{period.AllRefundsCount}}</strong></td><td class=reships><strong>{{period.AllReshipsCount}}</strong></td></tr></tbody></table></div></div></spinner-overlay></div></div>'),
a.put("app/modules/order/partials/orderDetail.html",'<div class="container-fluid order-edit"><div class=left-pane-controls><div class="well container-fluid"><div><button data-ng-bind="order.Id ? \'Save\' : \'Submit\'" data-ng-click=save() class="btn btn-success width-160px" unsaved-warning-clear></button></div><div class="btn-group margin-top-10px"><button ui-sref=index.oneCol.manageOrders class="btn btn-default width-160px" unsaved-warning-clear>Cancel</button></div><div class=margin-top-10px><button class="btn btn-primary width-160px" ui-sref=index.oneCol.manageOrders>Manage All</button></div><div class=margin-top-10px><button class="btn btn-info width-160px" data-ng-if=validatePermission(1) data-ng-click=goToCustomer();>Manage Customer</button></div><div data-ng-show="currentCustomer && order.Id && options.oldOrderStatus!=1 && options.oldOrderStatus!=4" class=margin-top-10px><button class="btn btn-purple width-160px" data-ng-click=sendOrderConfirmationEmail();>Resend Order Conf</button></div><div data-ng-show="currentCustomer && order.Id && order.CombinedEditOrderStatus==3" class=margin-top-10px><button class="btn btn-purple width-160px" data-ng-click=sendOrderShippingConfirmationEmail();>Resend Ship Conf</button></div></div><div ng-controller=objectHistorySectionController onload="name = \'History\'" data-ng-include="\'app/modules/order/partials/orderObjectHistorySection.html\'"></div></div><div class=right-pane-main><div class=container-fluid><div class=row><span class="legend top"><span data-ng-if=legend.CustomerName class=item>Customer: <strong>{{legend.CustomerName}}</strong></span> <span data-ng-if=legend.CustomerId class=item>Customer ID: <strong>{{legend.CustomerId}}</strong></span> <span data-ng-if=legend.OrderId class=item>Order ID: <strong>{{legend.OrderId}}</strong></span> <span data-ng-if=legend.OrderDate class=item>Order Date: <strong>{{::legend.OrderDate | date:"MM/dd/yy"}} {{::legend.OrderDate | date:"h:mm a"}}</strong></span> <span data-ng-if=legend.OrderStatus class=item>Status: <strong>{{legend.OrderStatus}}</strong></span></span></div><div class=row><uib-tabset active=options.activeTabIndex><uib-tab heading={{mainTab.name}} index=mainTab.index><div class="container container-left xbig-container"><div class="well row"><spinner-overlay data-loading=addEditTracker.active()><div class=row><div class=col-md-12><div class="options-row form-horizontal"><label class=checkbox-inline><input type=checkbox data-ng-model=order.OnHold data-ng-disabled=orderEditDisabled>Hold Order <i class="fa fa-pause"></i></label><div data-ng-if="order.IdObjectType==1 || order.IdObjectType==2" class=inline-block><form class=form-horizontal name=forms.topForm data-ng-submit=save() data-ng-class="{submitted: forms.topForm.submitted}" novalidate unsaved-warning-form><label data-ng-if=autoShipOrderOptionShow class=checkbox-inline><input type=checkbox data-ng-model=order.IdObjectType data-ng-change=requestRecalculate() ng-true-value=2 ng-false-value=1 data-ng-disabled=orderEditDisabled>Auto-Ship Order <i class="fa fa-history"></i></label><div data-ng-if=autoShipOrderOptionShow class=auto-ship-frequency><select data-ng-if="order.IdObjectType == 2" data-ng-change=requestRecalculate() class="form-control margin-top-15px" name=AutoShipFrequency data-ng-model=order.AutoShipFrequency ng-options="autoShipOrderFrequency.Key as autoShipOrderFrequency.Text for autoShipOrderFrequency in autoShipOrderFrequencies" required data-ng-disabled=orderEditDisabled><option value="" selected hidden></select><div class=error-container ng-show="forms.topForm.submitted && forms.topForm.AutoShipFrequency.$invalid"><small class=error ng-show=forms.topForm.AutoShipFrequency.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Frequency")}}</small></div></div></form></div><label class=checkbox-inline><input type=checkbox data-ng-model=order.GiftOrder data-ng-disabled=orderEditDisabled data-ng-change=giftOrderChanged()>Gift Order <i class="fa fa-gift"></i></label><label data-ng-if="order.IdObjectType!=3" class=checkbox-inline><input type=checkbox data-ng-model=order.MailOrder data-ng-disabled=orderEditDisabled>Mail Order <i class="fa fa-envelope"></i></label><label data-ng-if=order.Guest class="checkbox-inline guest">Guest Checkout</label></div></div><div class="col-md-12 products-buttons"><button data-ng-click=productAdd() class="btn btn-primary-orange width-160px" data-ng-if=!orderEditDisabled>Add Product</button> <button data-ng-click=topPurchasedProducts() class="btn btn-info btn-right width-200px" data-ng-if=!orderEditDisabled>Top Purchased Products</button></div><div class="col-md-12 form-horizontal products"><table class="table table-striped"><tbody><tr data-ng-class="{warning: (item.ErrorMessages && item.ErrorMessages.length>0) || (item.ClientMessages && item.ClientMessages.length>0)}" data-ng-repeat-start="item in order.SkuOrdereds"><td class=sku><div class="input-group autocomplete"><input name=SKU{{$index}} class=form-control placeholder=SKU data-ng-model=item.Code typeahead-min-length=1 uib-typeahead="sku.Code as (sku.Code+\' - \'+ sku.DescriptionName) for sku in getSKUsBySKU($viewValue)" typeahead-loading=loadingSKUsBySKU typeahead-on-select=skuChanged($index) data-ng-blur=skuChanged($index) typeahead-wait-ms=200 data-ng-disabled=orderEditDisabled></div></td><td class=type><span data-ng-if="item.IdProductType==2" class=perishable>P</span> <span data-ng-if="item.IdProductType==1" class=not-perishable>NP</span> <span data-ng-if="item.IdProductType==3" class=perishable>eGC</span> <span data-ng-if="item.IdProductType==4" class=perishable>GC</span></td><td class=qty><input name=QTY{{$index}} class=form-control placeholder=QTY numbers-only numbers-only-deny-zero min=1 max=1000 data-ng-model=item.QTY data-ng-blur=requestRecalculate() data-ng-disabled=orderEditDisabled></td><td class=product-name><div class="input-group autocomplete"><input name=ProductName{{$index}} class=form-control placeholder="Product Name" data-ng-model=item.ProductName typeahead-min-length=1 uib-typeahead="sku.DescriptionName as sku.DescriptionName for sku in getSKUsByProductName($viewValue)" typeahead-loading=loadingSKUsByProductNane typeahead-on-select=productNameChanged($index) typeahead-wait-ms=200 data-ng-disabled=orderEditDisabled></div><div data-ng-if=item.GCCodes class=input-group><span data-ng-repeat="gc in item.GCCodes"><em>GC Code: {{gc}}</em><br></span></div></td><td class=price><div class="col-md-12 padding-0px"><div class=input-group><span class=input-group-addon>$</span> <input name=Price{{$index}} class=form-control placeholder=Price money min=0.00 max=100000 data-ng-model=item.Price data-ng-blur=requestRecalculate() data-ng-disabled=orderEditDisabled></div></div></td><td class=amount><div class=amount>{{item.Amount | currency}}</div></td><td class=del><a class="btn btn-danger btn-xs" title=Delete data-ng-click=productDelete($index); data-ng-disabled=orderEditDisabled data-ng-if=!orderEditDisabled><i class="glyphicon glyphicon-remove"></i></a></td></tr><tr data-ng-class="{warning: messageItem.MessageLevel==0, \'message-warning\': messageItem.MessageLevel==1, \'message-info\': messageItem.MessageLevel==2 }" data-ng-repeat="messageItem in item.Messages"><td colspan=7><strong class=message>{{messageItem.Message}}</strong></td></tr><tr data-ng-repeat-end class=warning data-ng-if="item.ClientMessages && item.ClientMessages.length>0"><td colspan=7><strong class=message data-ng-repeat="message in item.ClientMessages">{{message}}</strong></td></tr><tr class=warning data-ng-if="productsPerishableThresholdIssue && !options.ignoneMinimumPerishableThreshold"><td colspan=7><label class=perishable-threshold-message><strong>{{minimumPerishableThreshold | currency}} minimum perishable threshold not met. Override</strong> <input type=checkbox data-ng-model=options.ignoneMinimumPerishableThreshold data-ng-disabled=orderEditDisabled></label></td></tr></tbody></table></div><div data-ng-if="order.PromoSkus && order.PromoSkus.length>0" class="col-md-12 form-horizontal products promo"><span class=legend>Promo Products</span><table class="table table-striped"><tbody><tr data-ng-class="{warning: item.ErrorMessages && item.ErrorMessages.length>0}" data-ng-repeat-start="item in order.PromoSkus"><td class=sku><div class="input-group autocomplete"><input name=SKU{{$index}} class=form-control placeholder=SKU data-ng-model=item.Code readonly></div></td><td class=type><span data-ng-if="item.IdProductType==2" class=perishable>P</span> <span data-ng-if="item.IdProductType==1" class=not-perishable>NP</span> <span data-ng-if="item.IdProductType==3" class=perishable>eGC</span> <span data-ng-if="item.IdProductType==4" class=perishable>GC</span></td><td class=qty><input name=QTY{{$index}} class=form-control placeholder=QTY numbers-only data-ng-model=item.QTY readonly></td><td class=product-name><div class="input-group autocomplete"><input name=ProductName{{$index}} class=form-control placeholder="Product Name" data-ng-model=item.ProductName readonly></div></td><td class=price><div class="col-md-12 padding-0px"><div class=input-group><span class=input-group-addon>$</span> <input name=Price{{$index}} class=form-control placeholder=Price money data-ng-model=item.Price readonly></div></div></td><td class=amount><div class=amount>{{item.Amount | currency}}</div></td><td class=enabled><input type=checkbox data-ng-model=item.IsEnabled data-ng-disabled="!item.IsAllowDisable || orderEditDisabled" data-ng-change=requestRecalculate()></td></tr><tr data-ng-repeat-end data-ng-class="{warning: messageItem.MessageLevel==0, \'message-warning\': messageItem.MessageLevel==1, \'message-info\': messageItem.MessageLevel==2 }" data-ng-repeat="messageItem in item.Messages"><td colspan=7><strong class=message>{{messageItem.Message}}</strong></td></tr></tbody></table></div><div class="col-md-6 left-section"><form class=form-horizontal name=forms.mainForm data-ng-submit=save() data-ng-class="{submitted: forms.mainForm.submitted}" novalidate unsaved-warning-form><fieldset><div class=form-group><label class="col-md-3 control-label">Source</label><div data-ng-if=currentCustomer.SourceValue class="col-md-9 form-control-static"><span>{{currentCustomer.SourceValue}}</span></div><div data-ng-if=!currentCustomer.SourceValue class=col-md-9><select class=form-control name=Source data-ng-model=currentCustomer.Source ng-options="source.Key as source.Text for source in orderSources" data-ng-required=!order.OnHold data-ng-disabled=orderEditDisabled><option value="" selected hidden></select><div class=error-container ng-show="forms.mainForm.submitted && forms.mainForm.Source.$invalid"><small class=error ng-show=forms.mainForm.Source.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Source")}}</small></div></div></div><div data-ng-if="!currentCustomer.SourceValue && currentCustomer.Source && (currentCustomer.Source==4 || currentCustomer.Source==10)" class=form-group><label class="col-md-3 control-label">Details</label><div class=col-md-9><input data-ng-if="currentCustomer.Source==10" name=SourceDetailsText class=form-control placeholder=Details data-ng-model=currentCustomer.SourceDetails data-ng-required=!order.OnHold data-ng-disabled=orderEditDisabled><div class=error-container ng-show="forms.mainForm.submitted && forms.mainForm.SourceDetailsText.$invalid"><small class=error ng-show=forms.mainForm.SourceDetailsText.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Details")}}</small></div><select data-ng-if="currentCustomer.Source==4" class=form-control name=SourceDetailsCelebrity data-ng-model=currentCustomer.SourceDetails ng-options="sourceCelebrity.Text as sourceCelebrity.Text for sourceCelebrity in orderSourcesCelebrityHealthAdvocate" data-ng-required=!order.OnHold data-ng-disabled=orderEditDisabled><option value="" selected hidden></select><div class=error-container ng-show="forms.mainForm.submitted && forms.mainForm.SourceDetailsCelebrity.$invalid"><small class=error ng-show=forms.mainForm.SourceDetailsCelebrity.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Details")}}</small></div></div></div><div data-ng-if="currentCustomer.CustomerType == 2 && order.IdObjectType!=4" class=form-group><label class="col-md-3 control-label">PO#</label><div class=col-md-9><input name=PoNumber class=form-control placeholder=PO# data-ng-model=order.PoNumber data-ng-required=!order.OnHold data-ng-disabled=orderEditDisabled><div class=error-container ng-show="forms.mainForm.submitted && forms.mainForm.PoNumber.$invalid"><small class=error ng-show=forms.mainForm.PoNumber.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","#PO")}}</small> <small class=error ng-show=forms.mainForm.PoNumber.$error.server>{{serverMessages.GetMessage(\'PoNumber\')}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label">Key Code</label><div class=col-md-9><input name=KeyCode class=form-control placeholder="Key Code" data-ng-model=order.KeyCode data-ng-required=!order.OnHold data-ng-disabled=orderEditDisabled><div class=error-container ng-show="forms.mainForm.submitted && forms.mainForm.KeyCode.$invalid"><small class=error ng-show=forms.mainForm.KeyCode.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Key Code")}}</small> <small class=error ng-show=forms.mainForm.KeyCode.$error.server>{{serverMessages.GetMessage(\'KeyCode\')}}</small></div></div></div><div data-ng-hide="order.IdObjectType==2"><span class=legend>Ship Delay</span><div class=form-group><label class="col-md-12 control-label left">Ship Delay Order?</label><div class=col-md-12><label class=radio-inline><input data-ng-model=order.ShipDelayType name=ShipDelayType value=0 type=radio data-ng-disabled=orderEditDisabled>None</label><label class=radio-inline><input data-ng-model=order.ShipDelayType name=ShipDelayType value=1 type=radio data-ng-disabled=orderEditDisabled>Entire Order</label><label data-ng-if="order.ShouldSplit && order.IdObjectType!=3" class=radio-inline><input data-ng-model=order.ShipDelayType name=ShipDelayType value=2 type=radio data-ng-disabled=orderEditDisabled>Perishable & Non-Perishable</label></div></div><div data-ng-if="order.ShipDelayType==1" class=form-group><label for=date class="col-md-6 control-label">Ship Date</label><div class=col-md-6><p class=input-group><input name=ShipDelayDate class=form-control uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=order.ShipDelayDate is-open=shipDelayDateOpened required data-ng-disabled="orderEditDisabled"> <span class=input-group-btn><button type=button class="btn btn-default" ng-disabled=false ng-click="stopPropagation($event); shipDelayDateOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.mainForm.submitted && forms.mainForm.ShipDelayDate.$invalid"><small class=error ng-show=forms.mainForm.ShipDelayDate.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Date")}}</small> <small class=error ng-show=forms.mainForm.ShipDelayDate.$error.server>{{serverMessages.GetMessage(\'ShipDelayDate\')}}</small></div></div></div></div><div data-ng-if="order.ShipDelayType==2 && order.ShouldSplit" class=form-group><label for=date class="col-md-6 control-label">Perishable Ship Date</label><div class=col-md-6><p class=input-group><input name=ShipDelayDateP class=form-control uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=order.ShipDelayDateP is-open=shipDelayDatePOpened data-ng-disabled="orderEditDisabled"> <span class=input-group-btn><button type=button class="btn btn-default" ng-disabled=false ng-click="stopPropagation($event); shipDelayDatePOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.mainForm.submitted && forms.mainForm.ShipDelayDateP.$invalid"><small class=error ng-show=forms.mainForm.ShipDelayDateP.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Date")}}</small> <small class=error ng-show=forms.mainForm.ShipDelayDateP.$error.server>{{serverMessages.GetMessage(\'ShipDelayDateP\')}}</small></div></div></div><div data-ng-if="order.ShipDelayType==2 && order.ShouldSplit" class=form-group><label for=date class="col-md-6 control-label">Non-Perishable Ship Date</label><div class=col-md-6><p class=input-group><input name=ShipDelayDateNP class=form-control uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=order.ShipDelayDateNP is-open=shipDelayDateNPOpened data-ng-disabled="orderEditDisabled"> <span class=input-group-btn><button type=button class="btn btn-default" ng-disabled=false ng-click="stopPropagation($event); shipDelayDateNPOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.mainForm.submitted && forms.mainForm.ShipDelayDateNP.$invalid"><small class=error ng-show=forms.mainForm.ShipDelayDateNP.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Date")}}</small> <small class=error ng-show=forms.mainForm.ShipDelayDateNP.$error.server>{{serverMessages.GetMessage(\'ShipDelayDateNP\')}}</small></div></div></div><span class=legend>Notes</span><div class=form-group><label class="col-md-12 control-label left">Order Specific Notes (*Will appear on invoice)</label><div class=col-md-12><textarea type=text name=OrderNotes class=form-control placeholder="Order Specific Notes" rows=5 data-ng-model=order.OrderNotes data-ng-disabled=orderEditDisabled></textarea><div class=error-container ng-show="forms.mainForm.submitted && forms.mainForm.OrderNotes.$invalid"><small class=error ng-show=forms.mainForm.OrderNotes.$error.server>{{serverMessages.GetMessage(\'OrderNotes\')}}</small></div></div></div><div data-ng-if=order.GiftOrder class=form-group><label class="col-md-12 control-label left">Gift Message (*Will appear on invoice)</label><div class=col-md-12><textarea type=text name=GiftMessage class=form-control placeholder="Gift Message" rows=5 data-ng-model=order.GiftMessage data-ng-disabled=orderEditDisabled></textarea><div class=error-container ng-show="forms.mainForm.submitted && forms.mainForm.GiftMessage.$invalid"><small class=error ng-show=forms.mainForm.GiftMessage.$error.server>{{serverMessages.GetMessage(\'GiftMessage\')}}</small></div></div></div><div class=form-group><label class="col-md-12 control-label left">Delivery Instructions (*Prints to Shipping Label):</label><div class=col-md-12><textarea data-ng-if=!id type=text name=DeliveryInstructions class=form-control rows=5 data-ng-model="buildShippingAddressForPartial(currentCustomer.Shipping, shippingAddressTab.AddressIndex, order.OnHold && !order.UpdateShippingAddressForCustomer, order && true).Address.DeliveryInstructions" data-ng-disabled=true></textarea><textarea data-ng-if=id type=text name=DeliveryInstructions class=form-control rows=5 data-ng-model="buildOrderShippingAddressForPartial(order.OnHold && !order.UpdateShippingAddressForCustomer).Address.DeliveryInstructions" data-ng-disabled=true></textarea></div></div><span data-ng-if=options.BrontoSubscribedStatusLoaded class=legend>Newsletter</span><div data-ng-if=options.BrontoSubscribedStatusLoaded class=form-group><div class=col-md-12><div class=checkbox><label><input type=checkbox name=BrontoSubscribedStatus data-ng-model=options.BrontoSubscribedStatus data-ng-disabled="orderEditDisabled"> Sign up for e-newsletter and receive Bonus Offers, Sale Alerts, Recipes, and Health News</label></div></div></div></fieldset></form></div><div class="col-md-6 right-section"><form class=form-horizontal name=forms.mainForm2 data-ng-submit=save() data-ng-class="{submitted: forms.mainForm2.submitted}" novalidate unsaved-warning-form><fieldset><div data-ng-if="order.AlaskaHawaiiSurcharge!=0" class="form-group margin-bottom-0px"><label for=type class="col-md-7 control-label">Alaska/Hawaii Surcharge</label><div class="col-md-5 form-control-static"><span>{{order.AlaskaHawaiiSurcharge | currency}}</span></div></div><div data-ng-if="order.CanadaSurcharge!=0" class="form-group margin-bottom-0px"><label for=type class="col-md-7 control-label">Canada Surcharge</label><div class="col-md-5 form-control-static"><span>{{order.CanadaSurcharge | currency}}</span></div></div><div class="form-group margin-bottom-0px"><label for=type class="col-md-7 control-label">Standard Shipping Charges</label><div class="col-md-5 form-control-static"><span>{{order.StandardShippingCharges | currency}}</span></div></div><div data-ng-if="shippingUpgradePOptions && shippingUpgradePOptions.length!=0" class=form-group><label for=type class="col-md-7 control-label">Upgrade Perishable Shipping</label><div class=col-md-5><select data-ng-disabled="!shippingUpgradePOptions || shippingUpgradePOptions.length==0 || orderEditDisabled" class=form-control name=ShippingUpgradeP data-ng-model=order.ShippingUpgradeP ng-options="item.Key as item.Text for item in shippingUpgradePOptions" data-ng-change=requestRecalculate()><option value="">None</option></select></div></div><div data-ng-if="shippingUpgradeNPOptions && shippingUpgradeNPOptions.length!=0" class=form-group><label for=type class="col-md-7 control-label">Upgrade Non-Perishable Shipping</label><div class=col-md-5><select data-ng-disabled="!shippingUpgradeNPOptions || shippingUpgradeNPOptions.length==0 || orderEditDisabled" class=form-control name=ShippingUpgradeNP data-ng-model=order.ShippingUpgradeNP ng-options="item.Key as item.Text for item in shippingUpgradeNPOptions" data-ng-change=requestRecalculate()><option value="">None</option></select></div></div><div data-ng-if="order.AlaskaHawaiiSurcharge!=0 || order.CanadaSurcharge!=0" class=form-group><label for=type class="col-md-7 control-label">Surcharge Override (-)</label><div class=col-md-5><div class=input-group><span class=input-group-addon>$</span> <input name=SurchargeOverride class=form-control placeholder=Surcharge money min=0.00 max=100000 data-ng-model=order.SurchargeOverride data-ng-blur=requestRecalculate() data-ng-disabled=orderEditDisabled></div><div class=error-container ng-show="forms.mainForm2.submitted && forms.mainForm2.SurchargeOverride.$invalid"><small class=error ng-show=forms.mainForm2.SurchargeOverride.$error.parse>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Amount")}}</small> <small class=error ng-show=forms.mainForm2.SurchargeOverride.$error.max>{{getValidationMessage("ValidationMessages.FieldMax","GeneralFieldNames.Amount",1000000)}}</small> <small class=error ng-show=forms.mainForm2.SurchargeOverride.$error.server>{{serverMessages.GetMessage(\'SurchargeOverride\')}}</small></div></div></div><div class=form-group><label for=type class="col-md-7 control-label">Shipping Override (-)</label><div class=col-md-5><div class=input-group><span class=input-group-addon>$</span> <input name=ShippingOverride class=form-control placeholder=Shipping money min=0.00 max=100000 data-ng-model=order.ShippingOverride data-ng-blur=requestRecalculate() data-ng-disabled=orderEditDisabled></div><div class=error-container ng-show="forms.mainForm2.submitted && forms.mainForm2.ShippingOverride.$invalid"><small class=error ng-show=forms.mainForm2.ShippingOverride.$error.parse>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Amount")}}</small> <small class=error ng-show=forms.mainForm2.ShippingOverride.$error.max>{{getValidationMessage("ValidationMessages.FieldMax","GeneralFieldNames.Amount",1000000)}}</small> <small class=error ng-show=forms.mainForm2.ShippingOverride.$error.server>{{serverMessages.GetMessage(\'ShippingOverride\')}}</small></div></div></div><div class="form-group margin-bottom-0px"><label for=type class="col-md-7 control-label">Total Shipping</label><div class="col-md-5 form-control-static"><span>{{order.TotalShipping | currency}}</span></div></div><div class="form-group margin-bottom-0px"><label for=type class="col-md-7 control-label">Product Subtotal</label><div class="col-md-5 form-control-static"><span>{{order.ProductsSubtotal | currency}}</span></div></div><div data-ng-if="order.IdObjectType!=3 && order.IdObjectType != 2" class=form-group><label for=type class="col-md-7 control-label">Discount Code</label><div class=col-md-5><div class="input-group autocomplete"><input name=DiscountCode class=form-control placeholder="Discount Code" data-ng-model=order.DiscountCode autocomplete=off typeahead-min-length=1 uib-typeahead="code for code in getDiscounts($viewValue)" typeahead-loading=loadingDiscounts data-ng-blur=requestRecalculate() typeahead-on-select=requestRecalculate() typeahead-wait-ms=200 data-ng-disabled=orderEditDisabled></div><div class=error-container ng-show="forms.mainForm2.submitted && forms.mainForm2.DiscountCode.$invalid"><small class=error ng-show=forms.mainForm2.DiscountCode.$error.server>{{calculateServerMessages.GetMessage(\'DiscountCode\')}}</small></div></div></div></fieldset></form><form name=forms.GCs class=form-horizontal data-ng-submit=save() data-ng-class="{submitted: forms.GCs.skussubmitted}" novalidate unsaved-warning-form><fieldset><div data-ng-if="order.IdObjectType!=3 && order.IdObjectType != 2" class=form-group><label for=type class="col-md-7 control-label">Gift Certificate</label><div class=col-md-5><div data-ng-repeat="gc in order.GCs" class=gcs><div class="form-horizontal item" ng-form=i{{$index}} novalidate><div class="col-md-10 padding-0px"><div class="input-group autocomplete code"><input name=Code class=form-control placeholder="Gift Certificate" data-ng-model=gc.Code autocomplete=off typeahead-min-length=1 uib-typeahead="code for code in getGCs($viewValue)" typeahead-loading=loadingGCs data-ng-blur="gcLostFocus($index, gc.Code)" typeahead-on-select=requestRecalculate() typeahead-wait-ms=200 data-ng-disabled=orderEditDisabled></div><div class="error-container small-block" ng-show="forms.GCs.skussubmitted && forms.GCs.i{{$index}}.Code.$invalid"><small class=error ng-show=forms.GCs.i{{$index}}.Code.$error.server>{{calculateServerMessages.GetMessage(\'Code\',\'GCs\',$index)}}</small></div></div><div data-ng-if="$index==0 && !orderEditDisabled" class="col-md-2 padding-0px"><a class="btn btn-success btn-xs" title=Add data-ng-click=gcAdd();><i class="glyphicon glyphicon-plus"></i></a></div><div data-ng-if="$index!=0 && !orderEditDisabled" class="col-md-2 padding-0px"><a class="btn btn-danger btn-xs" title=Delete data-ng-click=gcDelete($index);><i class="glyphicon glyphicon-remove"></i></a></div></div></div></div></div><div class=total-section><div data-ng-if="order.IdObjectType!=3" class="form-group margin-bottom-0px"><label class="col-md-6 control-label">Discount</label><div class="col-md-6 form-control-static"><span>{{order.DiscountMessage}}</span></div></div><div data-ng-if="order.IdObjectType!=3" class="form-group margin-bottom-0px"><label class="col-md-6 control-label">Discount Amount</label><div class="col-md-6 form-control-static"><span>({{order.DiscountTotal | currency}})</span></div></div><div data-ng-if="order.IdObjectType!=3" class="form-group margin-bottom-0px"><label class="col-md-6 control-label">Discounted Subtotal</label><div class="col-md-6 form-control-static"><span>{{order.DiscountedSubtotal | currency}}</span></div></div><div class="form-group margin-bottom-0px"><label class="col-md-6 control-label">Shipping Total</label><div class="col-md-6 form-control-static"><span>{{order.ShippingTotal | currency}}</span></div></div><div class="form-group margin-bottom-0px"><label class="col-md-6 control-label">Tax</label><div class="col-md-6 form-control-static"><span>{{order.TaxTotal | currency}}</span></div></div><div class="form-group margin-bottom-0px"><label class="col-md-6 control-label">Gift Certificates</label><div class="col-md-6 form-control-static"><span>({{order.GiftCertificatesSubtotal | currency}})</span></div></div><div class="form-group margin-bottom-0px"><label class="col-md-6 control-label">Grand Total</label><div class="col-md-6 form-control-static"><span>{{order.Total | currency}}</span></div></div></div></fieldset></form></div><div data-ng-include="\'app/modules/order/partials/orderEditShippedSection.html\'"></div></div></spinner-overlay></div></div></uib-tab><uib-tab heading="Order History" index=11><div class=container-fluid><div ng-controller=customerOrdersController onload="name = \'CustomerOrders\'" data-ng-include="\'app/modules/order/partials/customerOrdersList.html\'"></div></div></uib-tab><uib-tab heading=Auto-Ship index=12><div class=container-fluid><div ng-controller=customerAutoShipsController data-ng-include="\'app/modules/order/partials/autoShipList.html\'"></div></div></uib-tab><uib-tab data-ng-if=!id heading="Account Profile" index=accountProfileTab.index><div class="container container-left"><div class="well row"><spinner-overlay data-loading=addEditTracker.active()><form class=form-horizontal name=forms.profile data-ng-submit=save() data-ng-class="{submitted: forms.submitted[\'profile\']}" novalidate unsaved-warning-form><fieldset><span class=legend>Customer Type</span><div class=form-group><div class=col-md-3></div><div class=col-md-9><select class=form-control id=customerType data-ng-model=currentCustomer.CustomerType data-ng-change=filterCountries(); data-ng-options="customerType.Key as customerType.Text for customerType in ReferenceData.CustomerTypes" data-ng-change=requestRecalculate() data-ng-disabled=orderEditDisabled></select></div></div><div data-ng-if="currentCustomer.CustomerType == 2"><div class=form-group><label for=taxExempt class="col-md-3 control-label">Tax Exempt</label><div class=col-md-9><select class=form-control name=TaxExempt id=taxExempt data-ng-model=currentCustomer.TaxExempt data-ng-options="taxExempt.Key as taxExempt.Text for taxExempt in ReferenceData.TaxExempts" required data-ng-disabled=orderEditDisabled></select><div class=error-container ng-show="forms.submitted[\'profile\'] && forms.profile.TaxExempt.$invalid"><small class=error ng-show=forms.profile.TaxExempt.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Tax Exempt")}}</small> <small class=error ng-show=forms.profile.TaxExempt.$error.server>{{serverMessages.GetMessage(\'TaxExempt\')}}</small></div></div></div><div class=form-group><label for=website class="col-md-3 control-label">Website</label><div class=col-md-9><input name=Website class=form-control id=website data-ng-model=currentCustomer.Website placeholder=Website required data-ng-maxlength=100 autocomplete=off data-ng-disabled=orderEditDisabled><div class=error-container ng-show="forms.submitted[\'profile\'] && forms.profile.Website.$invalid"><small class=error ng-show=forms.profile.Website.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Website")}}</small> <small class=error ng-show=forms.profile.Website.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["Website", "100"])}}</small> <small class=error ng-show=forms.profile.Website.$error.server>{{serverMessages.GetMessage(\'Website\')}}</small></div></div></div><div class=form-group><label for=promoting class="col-md-3 control-label">Promoting Websites</label><div class=col-md-9><textarea type=text name=PromotingWebsites class=form-control data-ng-model=currentCustomer.PromotingWebsites id=promoting placeholder="Promoting Websites" rows=10 required data-ng-maxlength=1000 data-ng-disabled=orderEditDisabled></textarea><div class=error-container ng-show="forms.submitted[\'profile\'] && forms.profile.PromotingWebsites.$invalid"><small class=error ng-show=forms.profile.PromotingWebsites.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Promoting Websites")}}</small> <small class=error ng-show=forms.profile.PromotingWebsites.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["Promoting Websites", "1000"])}}</small> <small class=error ng-show=forms.profile.PromotingWebsites.$error.server>{{serverMessages.GetMessage(\'Promoting Websites\')}}</small></div></div></div><div class=form-group><label for=tier class="col-md-3 control-label">Tier</label><div class=col-md-9><select class=form-control id=tier name=Tier data-ng-model=currentCustomer.Tier data-ng-options="tier.Key as tier.Text for tier in ReferenceData.Tiers" required data-ng-disabled=orderEditDisabled></select><div class=error-container ng-show="forms.submitted[\'profile\'] && forms.profile.Tier.$invalid"><small class=error ng-show=forms.profile.Tier.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Tier")}}</small> <small class=error ng-show=forms.profile.Tier.$error.server>{{serverMessages.GetMessage(\'Tier\')}}</small></div></div></div><div class=form-group><label for=tradeClass class="col-md-3 control-label">Trade Class</label><div class=col-md-9><select class=form-control name=TradeClass id=tradeClass data-ng-model=currentCustomer.TradeClass data-ng-options="tradeClass.Key as tradeClass.Text for tradeClass in ReferenceData.TradeClasses" required data-ng-disabled=orderEditDisabled></select><div class=error-container ng-show="forms.submitted[\'profile\'] && forms.profile.TradeClass.$invalid"><small class=error ng-show=forms.profile.TradeClass.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Trade Class")}}</small> <small class=error ng-show=forms.profile.TradeClass.$error.server>{{serverMessages.GetMessage(\'TradeClass\')}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label">Inception Date</label><div class=col-md-9><p class=input-group><input name=InceptionDate class=form-control uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=currentCustomer.InceptionDate is-open=inceptionDateOpened required autocomplete=off data-ng-disabled="orderEditDisabled"> <span class=input-group-btn><button type=button class="btn btn-default" ng-disabled=false ng-click="stopPropagation($event); inceptionDateOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.submitted[\'profile\'] && forms.profile.InceptionDate.$invalid"><small class=error ng-show=forms.profile.InceptionDate.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Inception Date")}}</small> <small class=error ng-show=forms.profile.InceptionDate.$error.server>{{serverMessages.GetMessage(\'InceptionDate\')}}</small></div></div></div></div><span class=legend>Profile Details</span><div data-ng-if="currentCustomer.CustomerType == 1" class=form-group><label for=linked class="col-md-3 control-label">Linked to Affiliate</label><div class=col-md-3><input name=IdAffiliate class=form-control id=linked data-ng-model=currentCustomer.IdAffiliate numbers-only numbers-only-deny-zero placeholder="Linked to Affiliate" autocomplete=off><div class=error-container ng-show="forms.submitted[\'profile\'] && forms.profile.IdAffiliate.$invalid"><small class=error ng-show=forms.profile.IdAffiliate.$error.server>{{serverMessages.GetMessage(\'IdAffiliate\')}}</small></div></div></div><div data-ng-include="\'app/modules/customer/partials/profileAddress.html\'" data-ng-repeat="model in [accountProfileTab]"></div><div class=form-group><label for=currentEmail class="col-md-3 control-label">Current Email</label><div class="col-md-9 form-control-static"><span data-ng-bind=currentCustomer.Email></span></div></div><div data-ng-if=!options.OverrideEmail class=form-group><label for=enterEmail class="col-md-3 control-label">Enter Email</label><div class=col-md-9><input type=email name=Email class=form-control id=enterEmail data-ng-model=currentCustomer.newEmail placeholder="Enter Email" data-ng-required=!currentCustomer.Email data-ng-maxlength=100 autocomplete=off data-ng-disabled=orderEditDisabled><div class=error-container ng-show="forms.submitted[\'profile\'] && forms.profile.Email.$invalid"><small class=error ng-show=forms.profile.Email.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Email")}}</small> <small class=error ng-show=forms.profile.Email.$error.email>{{getValidationMessage("ValidationMessages.EmailFormat","GeneralFieldNames.Email")}}</small> <small class=error ng-show=forms.profile.Email.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["GeneralFieldNames.Email", "100"])}}</small> <small class=error ng-show=forms.profile.Email.$error.server>{{serverMessages.GetMessage(\'Email\')}}</small></div></div></div><div data-ng-if=!options.OverrideEmail class=form-group><label for=reEnterEmail class="col-md-3 control-label">Re-enter Email</label><div class=col-md-9><input type=email name=EmailConfirm class=form-control id=reEnterEmail data-ng-model=currentCustomer.emailConfirm placeholder="Re-enter Email" data-ng-required=!currentCustomer.Email data-ng-maxlength=100 autocomplete=off data-ng-disabled=orderEditDisabled><div class=error-container ng-show="forms.submitted[\'profile\'] && forms.profile.EmailConfirm.$invalid"><small class=error ng-show=forms.profile.EmailConfirm.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Email Confirmation")}}</small> <small class=error ng-show=forms.profile.EmailConfirm.$error.email>{{getValidationMessage("ValidationMessages.EmailFormat","Email Confirmation")}}</small> <small class=error ng-show=forms.profile.EmailConfirm.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["Email Confirmation", "100"])}}</small> <small class=error ng-show=forms.profile.EmailConfirm.$error.server>{{serverMessages.GetMessage(\'EmailConfirm\')}}</small></div></div></div><div data-ng-if="!currentCustomer.Id || (options.DBStatusCode == 1 && !currentCustomer.Email)" class=form-group><label for=active class="col-md-3 control-label">Override Email</label><div class=col-md-9><div class=checkbox><label><input type=checkbox id=overrideEmail name=OverrideEmail data-ng-model="options.OverrideEmail"></label></div></div></div><div data-ng-if=currentCustomer.Email class=form-group><div class=col-md-3></div><div class=col-md-9><button class="btn btn-info" data-ng-if="currentCustomer.StatusCode == 2" ladda=resetTracker.active() data-ng-click=resetPassword()>Send Reset Password Email</button> <button class="btn btn-info" data-ng-if="currentCustomer.StatusCode == 1" ladda=resendTracker.active() data-ng-click=resend()>Resend Activation Email</button></div></div><span class=legend>Approved Payment Methods</span><div class=form-group><div class=col-md-3></div><div class=col-md-9><label class="checkbox-inline margin-left-zero margin-right-25px" data-ng-repeat="paymentMethod in paymentMethods"><input type=checkbox data-ng-click=togglePaymentMethodSelection(paymentMethod) data-ng-checked="currentCustomer.ApprovedPaymentMethods.indexOf(paymentMethod.Id) > -1" autocomplete=off data-ng-disabled=orderEditDisabled> {{paymentMethod.Name}}</label></div></div><div class=form-group><label for=state class="col-md-3 control-label">Default Payment Method</label><div class=col-md-9><select class=form-control name=DefaultPaymentMethod data-ng-model=currentCustomer.DefaultPaymentMethod data-ng-options="paymentMethod.Id as paymentMethod.Name for paymentMethod in selectedPaymentMethods" required data-ng-disabled=orderEditDisabled><option value="">Select Default Payment Method</option></select><div class=error-container ng-show="forms.submitted[\'profile\'] && forms.profile.DefaultPaymentMethod.$invalid"><small class=error ng-show=forms.profile.DefaultPaymentMethod.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Default Payment Method")}}</small> <small class=error ng-show=forms.profile.DefaultPaymentMethod.$error.server>{{serverMessages.GetMessage(\'DefaultPaymentMethod\')}}</small></div></div></div><span class=legend>Automatic Order Specific Notes</span><div class=form-group><div class=col-md-3></div><div class=col-md-9><label class="checkbox-inline margin-left-zero margin-right-25px" data-ng-repeat="orderNote in orderNotes"><input type=checkbox data-ng-click=toggleOrderNoteSelection(orderNote.Id) data-ng-checked="currentCustomer.OrderNotes.indexOf(orderNote.Id) > -1" autocomplete=off data-ng-disabled=orderEditDisabled> {{orderNote.Name}}</label></div></div><span class=legend>DNM / DNR</span><div class=form-group><div class=col-md-3></div><div class=col-md-9><label class="checkbox-inline col-md-3"><input type=checkbox id=doNotMail data-ng-model=currentCustomer.DoNotMail autocomplete=off data-ng-disabled=orderEditDisabled> Do Not Mail</label><label class="checkbox-inline col-md-3"><input type=checkbox id=doNotRent data-ng-model=currentCustomer.DoNotRent autocomplete=off data-ng-disabled=orderEditDisabled> Do Not Rent</label></div></div><div data-ng-if=currentCustomer.Email><span class=legend>Product Review Email Status</span><div class=form-group><label for=productReviewEmail class="col-md-3 control-label">Enabled</label><div class=col-md-9><div class=checkbox><label><input type=checkbox id=productReviewEmail data-ng-model=currentCustomer.ProductReviewEmailEnabled></label></div></div></div></div><div data-ng-if="currentCustomer.CustomerType == 1"><span class=legend>HealthWise Customer Status</span><div class=form-group><label for=HasHealthwiseOrders class="col-md-3 control-label">Enabled</label><div class=col-md-9><div class=checkbox><label><input type=checkbox id=HasHealthwiseOrders name=HasHealthwiseOrders data-ng-model=currentCustomer.HasHealthwiseOrders></label></div></div></div></div><span data-ng-if="currentCustomer.Id && currentCustomer.StatusCode!=5" class=legend>Suspend User Account</span><div data-ng-if="currentCustomer.StatusCode!=5" class=form-group><label for=suspendUserAccount class="col-md-3 control-label">Suspend User Account</label><div class=col-md-9><div class=checkbox><label><input type=checkbox id=suspendUserAccount data-ng-click=toggleSuspended() data-ng-checked="currentCustomer.StatusCode == 4" data-ng-disabled=orderEditDisabled></label></div></div></div><div class=form-group data-ng-if="currentCustomer.StatusCode == 4"><label for=reason class="col-md-3 control-label">Reason</label><div class=col-md-9><textarea type=text name=Reason class=form-control id=reason placeholder=Reason rows=10 data-ng-model=currentCustomer.Reason required data-ng-maxlength=1000 data-ng-disabled=orderEditDisabled></textarea><div class=error-container ng-show="forms.submitted[\'profile\'] && forms.profile.Reason.$invalid"><small class=error ng-show=forms.profile.Reason.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Reason")}}</small> <small class=error ng-show=forms.profile.Reason.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["Reason", "1000"])}}</small> <small class=error ng-show=forms.profile.Reason.$error.server>{{serverMessages.GetMessage(\'Reason\')}}</small></div></div></div></fieldset></form></spinner-overlay></div></div></uib-tab><uib-tab heading="Shipping Address" index=shippingAddressTab.index><div class="container container-left"><div class="well row"><spinner-overlay data-loading=addEditTracker.active()><div data-ng-if=!id><div class=form-horizontal><div class=form-group><label for=updateShippingAddressForCustomer class="col-md-3 control-label"></label><div class=col-md-9><div class=checkbox><label><input type=checkbox id=updateShippingAddressForCustomer data-ng-model=order.UpdateShippingAddressForCustomer data-ng-disabled=orderEditDisabled> <strong>Permanently update this address</strong></label></div></div></div></div><div data-ng-include="\'app/modules/customer/partials/updateShippingSection.html\'"></div></div><div data-ng-if=id data-ng-include="\'app/modules/customer/partials/updateOrderShippingSection.html\'"></div></spinner-overlay></div></div></uib-tab><uib-tab heading="Payment Information" index=paymentInfoTab.index><div class="container container-left"><div class="well row"><spinner-overlay data-loading=addEditTracker.active()><div class=form-horizontal><span class=legend>Select Payment Method</span><div data-ng-if=!id><div class=form-group data-ng-if="currentCustomer.ApprovedPaymentMethods.indexOf(1) >= 0"><div class=col-md-3></div><div class=col-md-6><button class="btn btn-info" data-ng-show="paymentInfoTab.PaymentMethodType == 1" data-ng-click=setNewCreditCard();>Add New Credit Card</button></div><div class=col-md-3></div></div><div class=form-group data-ng-if="currentCustomer.ApprovedPaymentMethods.indexOf(1) >= 0"><div class="radio col-md-3"><label class=control-label><input type=radio data-ng-model=paymentInfoTab.PaymentMethodType value=1 id=creditCard data-ng-disabled=orderEditDisabled> Credit Card</label></div><div class=col-md-6><div class="input-group autocomplete"><select class=form-control id=selectPaymentMethod data-ng-disabled="paymentInfoTab.PaymentMethodType != 1 || !currentCustomer.CreditCards || currentCustomer.CreditCards.length == 0 || orderEditDisabled" data-ng-model=paymentInfoTab.CreditCardIndex data-ng-options="idx as (getCreditCardTypeName(creditCard.CardType) + \', ending in \' + getLast4(creditCard.CardNumber) + (creditCard.Default ? \' (Default)\' : \'\')) for (idx, creditCard) in currentCustomer.CreditCards" data-ng-change=checkCustomerCreditCardStatus()></select><span class=input-group-addon><i class="glyphicon glyphicon-alert" data-ng-show="currentCustomer.CreditCards[paymentInfoTab.CreditCardIndex] && paymentInfoTab.PaymentMethodType == 1 && currentCustomer.CreditCards[paymentInfoTab.CreditCardIndex].NotInStore" tooltip-placement=top-right tooltip-animation=false tooltip-popup-close-delay=1000 uib-tooltip="This credit card doesn\'t present in the remote store, please update info"></i></span></div></div><div class="col-md-3 padding-l-0px"><button class="btn btn-danger pull-right" data-ng-show="currentCustomer.CreditCards[paymentInfoTab.CreditCardIndex] && paymentInfoTab.PaymentMethodType == 1 && (!currentCustomer.CreditCards[paymentInfoTab.CreditCardIndex].Default || currentCustomer.CreditCards.length==1)" data-ng-click=deleteSelectedCreditCard();>Delete</button> <button class="btn btn-success pull-right margin-right-8px" data-ng-show="currentCustomer.CreditCards && currentCustomer.CreditCards.length>0 && paymentInfoTab.PaymentMethodType == 1 && !currentCustomer.CreditCards[paymentInfoTab.CreditCardIndex].Default" data-ng-click=setDefaultCreditCard();>Set as Default</button></div></div><div data-ng-if="currentCustomer.ApprovedPaymentMethods.indexOf(1) >= 0 && paymentInfoTab.PaymentMethodType==1"><div class=form-group><div class=col-md-3></div><div class=col-md-9><strong>Credit card data is only validated when adding or replacing masked credit card data.</strong></div></div><div class=form-group><div class=col-md-12><button class="btn btn-danger pull-right" data-ng-show="currentCustomer.CreditCards.length>0 && paymentInfoTab.PaymentMethodType == 1" data-ng-click=deleteAllCreditCards();>Delete All Credit Cards</button></div></div></div><div class=form-group data-ng-if="currentCustomer.ApprovedPaymentMethods.indexOf(2) >= 0"><div class=col-md-3><div class=radio><label class=control-label><input type=radio data-ng-model=paymentInfoTab.PaymentMethodType value=2 id=oac data-ng-disabled=orderEditDisabled> On Approved Credit</label></div></div><div class=col-md-6><div data-ng-if="paymentInfoTab.PaymentMethodType == 2 && currentCustomer.ApprovedPaymentMethods.length > 0 && !currentCustomer.Oac"><button class="btn btn-info" data-ng-click=setNewOac();>Add New OAC</button></div><div data-ng-if="paymentInfoTab.PaymentMethodType == 2 && currentCustomer.ApprovedPaymentMethods.length > 0 && currentCustomer.Oac"><button class="btn btn-danger" data-ng-click="currentCustomer.Oac = undefined;">Delete</button></div></div></div><div class=form-group data-ng-if="currentCustomer.ApprovedPaymentMethods.indexOf(3) >= 0"><div class=col-md-3><div class=radio><label class=control-label><input type=radio data-ng-model=paymentInfoTab.PaymentMethodType value=3 id=check data-ng-disabled=orderEditDisabled> Check</label></div></div><div class=col-md-6><div data-ng-if="paymentInfoTab.PaymentMethodType == 3 && currentCustomer.ApprovedPaymentMethods.length > 0 && !currentCustomer.Check"><button class="btn btn-info" data-ng-click=setNewCheck();>Add New Check</button></div><div data-ng-if="paymentInfoTab.PaymentMethodType == 3 && currentCustomer.ApprovedPaymentMethods.length > 0 && currentCustomer.Check"><button class="btn btn-danger" data-ng-click="currentCustomer.Check = undefined;">Delete</button></div></div></div><div class=form-group data-ng-if="currentCustomer.ApprovedPaymentMethods.indexOf(6) >= 0"><div class=col-md-3><div class=radio><label class=control-label><input type=radio data-ng-model=paymentInfoTab.PaymentMethodType value=6 id=wiretransfer data-ng-disabled=orderEditDisabled> Wire Transfer</label></div></div><div class=col-md-6><div data-ng-if="paymentInfoTab.PaymentMethodType == 6 && currentCustomer.ApprovedPaymentMethods.length > 0 && !currentCustomer.WireTransfer"><button class="btn btn-info" data-ng-click=setNewWireTransfer();>Add New Wire Transfer</button></div><div data-ng-if="paymentInfoTab.PaymentMethodType == 6 && currentCustomer.ApprovedPaymentMethods.length > 0 && currentCustomer.WireTransfer"><button class="btn btn-danger" data-ng-click="currentCustomer.WireTransfer = undefined;">Delete</button></div></div></div><div class=form-group data-ng-if="currentCustomer.ApprovedPaymentMethods.indexOf(7) >= 0"><div class=col-md-3><div class=radio><label class=control-label><input type=radio data-ng-model=paymentInfoTab.PaymentMethodType value=7 id=marketing data-ng-disabled=orderEditDisabled> Marketing</label></div></div><div class=col-md-6><div data-ng-if="paymentInfoTab.PaymentMethodType == 7 && currentCustomer.ApprovedPaymentMethods.length > 0 && !currentCustomer.Marketing"><button class="btn btn-info" data-ng-click=setNewMarketing();>Add New Marketing</button></div><div data-ng-if="paymentInfoTab.PaymentMethodType == 7 && currentCustomer.ApprovedPaymentMethods.length > 0 && currentCustomer.Marketing"><button class="btn btn-danger" data-ng-click="currentCustomer.Marketing = undefined;">Delete</button></div></div></div><div class=form-group data-ng-if="currentCustomer.ApprovedPaymentMethods.indexOf(8) >= 0"><div class=col-md-3><div class=radio><label><input type=radio data-ng-model=paymentInfoTab.PaymentMethodType value=8 id=vcwellness data-ng-disabled=orderEditDisabled> VC Wellness Employee Program</label></div></div><div class=col-md-6><div data-ng-if="paymentInfoTab.PaymentMethodType == 8 && currentCustomer.ApprovedPaymentMethods.length > 0 && !currentCustomer.VCWellness"><button class="btn btn-info" data-ng-click=setNewVCWellness();>Add New VC Wellness Employee Program</button></div><div data-ng-if="paymentInfoTab.PaymentMethodType == 8 && currentCustomer.ApprovedPaymentMethods.length > 0 && currentCustomer.VCWellness"><button class="btn btn-danger" data-ng-click="currentCustomer.VCWellness = undefined;">Delete</button></div></div></div><div class=form-group data-ng-if="currentCustomer.ApprovedPaymentMethods.indexOf(4) >= 0"><div class=col-md-3><div class=radio><label class=control-label><input type=radio data-ng-model=paymentInfoTab.PaymentMethodType value=4 id=noCharge data-ng-disabled=orderEditDisabled> No Charge</label></div></div><div class=col-md-6><div data-ng-if="paymentInfoTab.PaymentMethodType == 4 && currentCustomer.ApprovedPaymentMethods.length > 0 && !currentCustomer.NC"><button class="btn btn-info" data-ng-click=setNewNC();>Add New NC</button></div><div data-ng-if="paymentInfoTab.PaymentMethodType == 4 && currentCustomer.ApprovedPaymentMethods.length > 0 && currentCustomer.NC"><button class="btn btn-danger" data-ng-click="currentCustomer.NC = undefined;">Delete</button></div></div></div><hr><form class=form-horizontal name=forms.card data-ng-class="{submitted: forms.submitted[\'card\']}" novalidate unsaved-warning-form><fieldset><div data-ng-if="paymentInfoTab.PaymentMethodType == 1 && currentCustomer.ApprovedPaymentMethods.length > 0 && currentCustomer.CreditCards[paymentInfoTab.CreditCardIndex]"><div class=form-group><label for=updateCardForCustomer class="col-md-3 control-label"></label><div class=col-md-9><div class=checkbox><label><input type=checkbox id=updateCardForCustomer data-ng-model=order.UpdateCardForCustomer data-ng-disabled=orderEditDisabled> <strong>Permanently update credit card information</strong></label></div></div></div><div class=form-group><label for=NameOnCard class="col-md-3 control-label">Name on Card</label><div class=col-md-9><input class=form-control name=NameOnCard id=NameOnCard data-ng-model=currentCustomer.CreditCards[paymentInfoTab.CreditCardIndex].NameOnCard placeholder="Name on Card" data-ng-required="!order.OnHold || order.UpdateCardForCustomer" autocomplete=off data-ng-disabled=orderEditDisabled><div class=error-container ng-show="forms.submitted[\'card\'] && forms.card.NameOnCard.$invalid"><small class=error ng-show=forms.card.NameOnCard.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.NameOnCard")}}</small> <small class=error ng-show=forms.card.NameOnCard.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["GeneralFieldNames.NameOnCard", "100"])}}</small> <small class=error ng-show=forms.card.NameOnCard.$error.server>{{serverMessages.GetMessage(\'NameOnCard\', "CreditCards", paymentInfoTab.CreditCardIndex, "card")}}</small></div></div></div><div class=form-group><label for=CardType class="col-md-3 control-label">Card Type</label><div class=col-md-9><select class=form-control id=CardType name=CardType data-ng-model=currentCustomer.CreditCards[paymentInfoTab.CreditCardIndex].CardType ng-options="creditCardType.Key as creditCardType.Text for creditCardType in creditCardTypes" data-ng-required="!order.OnHold || order.UpdateCardForCustomer" autocomplete=off data-ng-disabled=orderEditDisabled></select><div class=error-container ng-show="forms.submitted[\'card\'] && forms.card.CardType.$invalid"><small class=error ng-show=forms.card.CardType.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.CardType")}}</small> <small class=error ng-show=forms.card.CardType.$error.server>{{serverMessages.GetMessage(\'CardType\', "CreditCards", paymentInfoTab.CreditCardIndex, "card")}}</small></div></div></div><div class=form-group><label for=CardNumber class="col-md-3 control-label">Card Number</label><div class=col-md-9><input class=form-control id=CardNumber name=CardNumber data-max-characters=16 data-ng-model=currentCustomer.CreditCards[paymentInfoTab.CreditCardIndex].CardNumber placeholder="Card Number" data-ng-maxlength="{{currentCustomer.CreditCards[paymentInfoTab.CreditCardIndex].CreditCard.CardType == 3 ? \'15\' : \'16\'}}" data-ng-required="!order.OnHold || order.UpdateCardForCustomer" autocomplete=off data-ng-disabled=orderEditDisabled><div class=error-container ng-show="forms.submitted[\'card\'] && forms.card.CardNumber.$invalid"><small class=error ng-show=forms.card.CardNumber.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.CardNumber")}}</small> <small class=error ng-show=forms.card.CardNumber.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["GeneralFieldNames.CardNumber", currentCustomer.CreditCards[paymentInfoTab.CreditCardIndex].CreditCard.CardType == 3 ? \'15\' : \'16\'])}}</small> <small class=error ng-show=forms.card.CardNumber.$error.server>{{serverMessages.GetMessage(\'CardNumber\', "CreditCards", paymentInfoTab.CreditCardIndex, "card")}}</small></div></div></div><div class=form-group><label for=ExpirationDateMonth class="col-md-3 control-label">Expiration Date</label><div class=col-md-2><input class="form-control number" id=ExpirationDateMonth numbers-only data-max-characters=2 name=ExpirationDateMonth data-ng-model=currentCustomer.CreditCards[paymentInfoTab.CreditCardIndex].ExpirationDateMonth min=1 max=12 ng-pattern="/^\\d{1,2}?$/" placeholder=Month data-ng-required="!order.OnHold || order.UpdateCardForCustomer" autocomplete=off data-ng-disabled=orderEditDisabled><div class=error-container ng-show="forms.submitted[\'card\'] && forms.card.ExpirationDateMonth.$invalid"><small class=error ng-show=forms.card.ExpirationDateMonth.$error.pattern>{{getValidationMessage("ValidationMessages.MonthFormat","GeneralFieldNames.ExpirationDateMonth")}}</small> <small class=error ng-show=forms.card.ExpirationDateMonth.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.ExpirationDateMonth")}}</small> <small class=error ng-show=forms.card.ExpirationDateMonth.$error.server>{{serverMessages.GetMessage(\'ExpirationDateMonth\', "CreditCards", paymentInfoTab.CreditCardIndex, "card")}}</small></div></div><div class=col-md-2><input class=form-control id=ExpirationDateYear numbers-only data-max-characters=2 name=ExpirationDateYear data-ng-model=currentCustomer.CreditCards[paymentInfoTab.CreditCardIndex].ExpirationDateYear min=1 max=99 ng-pattern="/^\\d{1,2}?$/" placeholder=Year data-ng-required="!order.OnHold || order.UpdateCardForCustomer" autocomplete=off data-ng-disabled=orderEditDisabled><div class=error-container ng-show="forms.submitted[\'card\'] && forms.card.ExpirationDateYear.$invalid"><small class=error ng-show=forms.card.ExpirationDateYear.$error.pattern>{{getValidationMessage("ValidationMessages.YearFormat","GeneralFieldNames.ExpirationDateYear")}}</small> <small class=error ng-show=forms.card.ExpirationDateYear.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.ExpirationDateYear")}}</small> <small class=error ng-show=forms.card.ExpirationDateYear.$error.server>{{serverMessages.GetMessage(\'ExpirationDateYear\', "CreditCards", paymentInfoTab.CreditCardIndex, "card")}}</small></div></div></div><span class=legend>Billing Address</span><div class=form-group><div class=col-md-3></div><div class=col-md-3><button class="btn btn-info" id=sameCreditCardAsProfile data-ng-click=makeBillingAsShippingAddress();>Copy Shipping</button></div></div><div data-ng-include="\'app/modules/customer/partials/address.html\'" data-ng-repeat="model in [buildCreditCardAddressForPartial(currentCustomer.CreditCards, paymentInfoTab.CreditCardIndex, order.OnHold && !order.UpdateCardForCustomer)]"></div></div></fieldset></form><form class=form-horizontal name=forms.oac data-ng-class="{submitted: forms.submitted[\'oac\']}" novalidate unsaved-warning-form><fieldset><div data-ng-if="paymentInfoTab.PaymentMethodType == 2 && currentCustomer.ApprovedPaymentMethods.length > 0 && currentCustomer.Oac"><div class=form-group><label for=updateOACForCustomer class="col-md-3 control-label"></label><div class=col-md-9><div class=checkbox><label><input type=checkbox id=updateOACForCustomer data-ng-model=order.UpdateOACForCustomer data-ng-disabled=orderEditDisabled> <strong>Permanently update oac information</strong></label></div></div></div><div class=form-group><label for=terms class="col-md-3 control-label">Terms:</label><div class=col-md-9><select class=form-control id=terms name=Terms data-ng-model=currentCustomer.Oac.Terms data-ng-options="term.Key as term.Text for term in ReferenceData.OacTerms" data-ng-required="!order.OnHold || order.updateOACForCustomer" data-ng-disabled=orderEditDisabled></select><div class=error-container ng-show="forms.submitted[\'oac\'] && forms.oac.Terms.$invalid"><small class=error ng-show=forms.oac.Terms.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Terms")}}</small> <small class=error ng-show=forms.oac.Terms.$error.server>{{serverMessages.GetMessage(\'Terms\', undefined, undefined, "oac")}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label" for=Fob>FOB:</label><div class=col-md-9><select class=form-control id=Fob name=Fob data-ng-model=currentCustomer.Oac.Fob data-ng-options="fob.Key as fob.Text for fob in ReferenceData.OacFob" data-ng-required="!order.OnHold || order.updateOACForCustomer" data-ng-disabled=orderEditDisabled></select><div class=error-container ng-show="forms.submitted[\'oac\'] && forms.oac.Fob.$invalid"><small class=error ng-show=forms.oac.Fob.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Fob")}}</small> <small class=error ng-show=forms.oac.Fob.$error.server>{{serverMessages.GetMessage(\'CardType\', undefined, undefined, "oac")}}</small></div></div></div><span class=legend>Billing Address</span><div class=form-group><div class=col-md-3></div><div class=col-md-3><button class="btn btn-info" id=sameOacAsProfile data-ng-click=makeBillingAsShippingAddress();>Copy Shipping</button></div></div><div data-ng-include="\'app/modules/customer/partials/address.html\'" data-ng-repeat="model in [buildOrderPaymentPartial(currentCustomer.Oac, order.OnHold && !order.UpdateOACForCustomer)]"></div></div></fieldset></form><form class=form-horizontal name=forms.check data-ng-class="{submitted: forms.submitted[\'check\']}" novalidate unsaved-warning-form><fieldset><div data-ng-if="paymentInfoTab.PaymentMethodType == 3 && currentCustomer.ApprovedPaymentMethods.length > 0 && currentCustomer.Check"><div class=form-group><label for=updateCheckForCustomer class="col-md-3 control-label"></label><div class=col-md-9><div class=checkbox><label><input type=checkbox id=updateCheckForCustomer data-ng-model=order.UpdateCheckForCustomer data-ng-disabled=orderEditDisabled> <strong>Permanently update check information</strong></label></div></div></div><div class=form-group><label for=checkNumber class="col-md-3 control-label">Check #</label><div class=col-md-9><input class=form-control name=CheckNumber id=checkNumber data-ng-model=currentCustomer.Check.CheckNumber placeholder="Check #" data-ng-required="!order.OnHold || order.UpdateCheckForCustomer" data-ng-disabled=orderEditDisabled><div class=error-container ng-show="forms.submitted[\'check\'] && forms.check.CheckNumber.$invalid"><small class=error ng-show=forms.check.CheckNumber.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Check Number")}}</small> <small class=error ng-show=forms.check.CheckNumber.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["Check Number", "100"])}}</small> <small class=error ng-show=forms.check.CheckNumber.$error.server>{{serverMessages.GetMessage(\'CheckNumber\', undefined, undefined, "check")}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label"></label><div class=col-md-9><div class=checkbox><label><input type=checkbox id=PaidInFull data-ng-model=currentCustomer.Check.PaidInFull class="ng-pristine ng-valid ng-touched" data-ng-disabled=orderEditDisabled> <strong>Paid In Full - Taxes Included</strong></label></div></div></div><span class=legend>Billing Address</span><div class=form-group><div class=col-md-3></div><div class=col-md-3><button class="btn btn-info" id=sameCheckAsProfile data-ng-click=makeBillingAsShippingAddress();>Copy Shipping</button></div></div><div data-ng-include="\'app/modules/customer/partials/address.html\'" data-ng-repeat="model in [buildOrderPaymentPartial(currentCustomer.Check, order.OnHold && !order.UpdateCheckForCustomer)]"></div></div></fieldset></form><form class=form-horizontal name=forms.wiretransfer data-ng-class="{submitted: forms.submitted[\'wiretransfer\']}" novalidate unsaved-warning-form><fieldset><div data-ng-if="paymentInfoTab.PaymentMethodType == 6 && currentCustomer.ApprovedPaymentMethods.length > 0 && currentCustomer.WireTransfer"><div class=form-group><label for=updateWireTransferForCustomer class="col-md-3 control-label"></label><div class=col-md-9><div class=checkbox><label><input type=checkbox id=updateWireTransferForCustomer data-ng-model=order.UpdateWireTransferForCustomer data-ng-disabled=orderEditDisabled> <strong>Permanently update wire transfer information</strong></label></div></div></div><div class=form-group><label for=paymentComment class="col-md-3 control-label">Payment Comment:</label><div class=col-md-9><textarea type=text id=paymentComment name=PaymentComment class=form-control data-ng-model=currentCustomer.WireTransfer.PaymentComment placeholder="Payment Comment" rows=3 data-ng-required="!order.OnHold || order.UpdateWireTransferForCustomer" data-ng-maxlength=250 data-ng-disabled=orderEditDisabled></textarea><div class=error-container ng-show="forms.submitted[\'wiretransfer\'] && forms.wiretransfer.PaymentComment.$invalid"><small class=error ng-show=forms.wiretransfer.PaymentComment.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Payment Comment")}}</small> <small class=error ng-show=forms.wiretransfer.PaymentComment.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["Payment Comment", "250"])}}</small> <small class=error ng-show=forms.wiretransfer.PaymentComment.$error.server>{{serverMessages.GetMessage(\'PaymentComment\', undefined, undefined, "wiretransfer")}}</small></div></div></div><span class=legend>Billing Address</span><div class=form-group><div class=col-md-3></div><div class=col-md-3><button class="btn btn-info" data-ng-click=makeBillingAsShippingAddress();>Copy Shipping</button></div></div><div data-ng-include="\'app/modules/customer/partials/address.html\'" data-ng-repeat="model in [buildOrderPaymentPartial(currentCustomer.WireTransfer, order.OnHold && !order.UpdateWireTransferForCustomer)]"></div></div></fieldset></form><form class=form-horizontal name=forms.marketing data-ng-class="{submitted: forms.submitted[\'marketing\']}" novalidate unsaved-warning-form><fieldset><div data-ng-if="paymentInfoTab.PaymentMethodType == 7 && currentCustomer.ApprovedPaymentMethods.length > 0 && currentCustomer.Marketing"><div class=form-group><label for=updateMarketingForCustomer class="col-md-3 control-label"></label><div class=col-md-9><div class=checkbox><label><input type=checkbox id=updateMarketingForCustomer data-ng-model=order.UpdateMarketingForCustomer data-ng-disabled=orderEditDisabled> <strong>Permanently update marketing information</strong></label></div></div></div><div class=form-group><label for=marketingPromotionType class="col-md-3 control-label">Type:</label><div class=col-md-9><select class=form-control id=marketingPromotionType name=MarketingPromotionType data-ng-model=currentCustomer.Marketing.MarketingPromotionType data-ng-options="term.Key as term.Text for term in ReferenceData.MarketingPromotionTypes" data-ng-disabled=orderEditDisabled data-ng-required="!order.OnHold || order.UpdateMarketingForCustomer"><option value="" selected hidden></select><div class=error-container ng-show="forms.submitted[\'marketing\'] && forms.marketing.MarketingPromotionType.$invalid"><small class=error ng-show=forms.marketing.MarketingPromotionType.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Type")}}</small> <small class=error ng-show=forms.marketing.MarketingPromotionType.$error.server>{{serverMessages.GetMessage(\'MarketingPromotionType\', undefined, undefined, "marketing")}}</small></div></div></div><div class=form-group><label for=paymentComment class="col-md-3 control-label">Payment Comment:</label><div class=col-md-9><textarea type=text id=paymentComment name=PaymentComment class=form-control data-ng-model=currentCustomer.Marketing.PaymentComment placeholder="Payment Comment" rows=3 data-ng-required="!order.OnHold || order.UpdateMarketingForCustomer" data-ng-maxlength=250 data-ng-disabled=orderEditDisabled></textarea><div class=error-container ng-show="forms.submitted[\'marketing\'] && forms.marketing.PaymentComment.$invalid"><small class=error ng-show=forms.marketing.PaymentComment.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Payment Comment")}}</small> <small class=error ng-show=forms.marketing.PaymentComment.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["Payment Comment", "250"])}}</small> <small class=error ng-show=forms.marketing.PaymentComment.$error.server>{{serverMessages.GetMessage(\'PaymentComment\', undefined, undefined, "marketing")}}</small></div></div></div><span class=legend>Billing Address</span><div class=form-group><div class=col-md-3></div><div class=col-md-3><button class="btn btn-info" data-ng-click=makeBillingAsShippingAddress();>Copy Shipping</button></div></div><div data-ng-include="\'app/modules/customer/partials/address.html\'" data-ng-repeat="model in [buildOrderPaymentPartial(currentCustomer.Marketing, order.OnHold && !order.UpdateMarketingForCustomer)]"></div></div></fieldset></form><form class=form-horizontal name=forms.vcwellness data-ng-class="{submitted: forms.submitted[\'vcwellness\']}" novalidate unsaved-warning-form><fieldset><div data-ng-if="paymentInfoTab.PaymentMethodType == 8 && currentCustomer.ApprovedPaymentMethods.length > 0 && currentCustomer.VCWellness"><div class=form-group><label for=updateVCWellnessForCustomer class="col-md-3 control-label"></label><div class=col-md-9><div class=checkbox><label><input type=checkbox id=updateVCWellnessForCustomer data-ng-model=order.UpdateVCWellnessForCustomer data-ng-disabled=orderEditDisabled> <strong>Permanently update VC wellness employee program information</strong></label></div></div></div><div class=form-group><label for=paymentComment class="col-md-3 control-label">Payment Comment:</label><div class=col-md-9><textarea type=text id=paymentComment name=PaymentComment class=form-control data-ng-model=currentCustomer.VCWellness.PaymentComment placeholder="Payment Comment" rows=3 data-ng-required="!order.OnHold || order.UpdateVCWellnessForCustomer" data-ng-maxlength=250 data-ng-disabled=orderEditDisabled></textarea><div class=error-container ng-show="forms.submitted[\'vcwellness\'] && forms.vcwellness.PaymentComment.$invalid"><small class=error ng-show=forms.vcwellness.PaymentComment.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Payment Comment")}}</small> <small class=error ng-show=forms.vcwellness.PaymentComment.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["Payment Comment", "250"])}}</small> <small class=error ng-show=forms.vcwellness.PaymentComment.$error.server>{{serverMessages.GetMessage(\'PaymentComment\', undefined, undefined, "vcwellness")}}</small></div></div></div><span class=legend>Billing Address</span><div class=form-group><div class=col-md-3></div><div class=col-md-3><button class="btn btn-info" data-ng-click=makeBillingAsShippingAddress();>Copy Shipping</button></div></div><div data-ng-include="\'app/modules/customer/partials/address.html\'" data-ng-repeat="model in [buildOrderPaymentPartial(currentCustomer.VCWellness, order.OnHold && !order.UpdateVCWellnessForCustomer)]"></div></div></fieldset></form><form class=form-horizontal name=forms.nc data-ng-class="{submitted: forms.submitted[\'nc\']}" novalidate unsaved-warning-form><fieldset><div data-ng-if="paymentInfoTab.PaymentMethodType == 4 && currentCustomer.ApprovedPaymentMethods.length > 0 && currentCustomer.NC"><div class=form-group><label for=paymentComment class="col-md-3 control-label">Payment Comment:</label><div class=col-md-9><textarea type=text id=paymentComment name=PaymentComment class=form-control data-ng-model=currentCustomer.NC.PaymentComment placeholder="Payment Comment" rows=3 data-ng-required=!order.OnHold data-ng-maxlength=250 data-ng-disabled=orderEditDisabled></textarea><div class=error-container ng-show="forms.submitted[\'nc\'] && forms.nc.PaymentComment.$invalid"><small class=error ng-show=forms.nc.PaymentComment.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Payment Comment")}}</small> <small class=error ng-show=forms.nc.PaymentComment.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["Payment Comment", "250"])}}</small> <small class=error ng-show=forms.nc.PaymentComment.$error.server>{{serverMessages.GetMessage(\'PaymentComment\', undefined, undefined, "nc")}}</small></div></div></div><span class=legend>Billing Address</span><div class=form-group><div class=col-md-3></div><div class=col-md-3><button class="btn btn-info" data-ng-click=makeBillingAsShippingAddress();>Copy Shipping</button></div></div><div data-ng-include="\'app/modules/customer/partials/address.html\'" data-ng-repeat="model in [buildOrderPaymentPartial(currentCustomer.NC, order.OnHold)]"></div></div></fieldset></form></div><div data-ng-if=id data-ng-include="\'app/modules/order/partials/updateOrderBillingSection.html\'"></div></div></spinner-overlay></div></div></uib-tab><uib-tab heading="Customer Notes" index=customerNotesTab.index><div class=container-fluid><div ng-controller=manageCustomerNotesController onload="name = \'CustomerNotes\'" data-ng-include="\'app/modules/customer/partials/manageCustomerNotes.html\'"></div></div></uib-tab><uib-tab heading=Files index=customerFilesTab.index><div class=container-fluid><div ng-controller=manageCustomerFilesController onload="name = \'CustomerFiles\'" data-ng-include="\'app/modules/customer/partials/manageCustomerFiles.html\'"></div></div></uib-tab></uib-tabset></div></div></div></div>'),
a.put("app/modules/order/partials/orderEditShippedSection.html",'<div data-ng-if=order.DateShipped class="col-md-12 form-horizontal"><span class=legend>Shipping</span><div class="form-group margin-bottom-0px"><label class="col-md-2 control-label">Date shipped</label><div class="col-md-10 form-control-static"><span>{{order.DateShipped | date:"MM/dd/yy"}}</span></div></div><div class="form-group margin-bottom-0px"><label class="col-md-2 control-label">Shipped Via</label><div class="col-md-10 form-control-static"><span>{{order.ShipVia}}</span></div></div><div class="form-group margin-bottom-0px" data-ng-repeat="item in order.TrackingEntities"><label data-ng-if=$first class="col-md-2 control-label">Tracking No.</label><label data-ng-if=!$first class="col-md-2 control-label"></label><div class="col-md-10 form-control-static"><span>{{item.Sku}} - <a target=_blank data-ng-href={{item.ServiceUrl}}>{{item.TrackingNumber}}</a></span></div></div></div><div data-ng-if=order.PDateShipped class="col-md-12 form-horizontal"><span class=legend>Perishable Items Shipping</span><div class="form-group margin-bottom-0px"><label class="col-md-2 control-label">Date shipped</label><div class="col-md-10 form-control-static"><span>{{order.PDateShipped | date:"MM/dd/yy"}}</span></div></div><div class="form-group margin-bottom-0px"><label class="col-md-2 control-label">Shipped Via</label><div class="col-md-10 form-control-static"><span>{{order.PShipVia}}</span></div></div><div class="form-group margin-bottom-0px" data-ng-repeat="item in order.PTrackingEntities"><label data-ng-if=$first class="col-md-2 control-label">Tracking No.</label><label data-ng-if=!$first class="col-md-2 control-label"></label><div class="col-md-10 form-control-static"><span>{{item.Sku}} - <a target=_blank data-ng-href={{item.ServiceUrl}}>{{item.TrackingNumber}}</a></span></div></div></div><div data-ng-if=order.NPDateShipped class="col-md-12 form-horizontal"><span class=legend>Non-Perishable Items Shipping</span><div class="form-group margin-bottom-0px"><label class="col-md-2 control-label">Date shipped</label><div class="col-md-10 form-control-static"><span>{{order.NPDateShipped | date:"MM/dd/yy"}}</span></div></div><div class="form-group margin-bottom-0px"><label class="col-md-2 control-label">Shipped Via</label><div class="col-md-10 form-control-static"><span>{{order.NPShipVia}}</span></div></div><div class="form-group margin-bottom-0px" data-ng-repeat="item in order.NPTrackingEntities"><label data-ng-if=$first class="col-md-2 control-label">Tracking No.</label><label data-ng-if=!$first class="col-md-2 control-label"></label><div class="col-md-10 form-control-static"><span>{{item.Sku}} - <a target=_blank data-ng-href={{item.ServiceUrl}}>{{item.TrackingNumber}}</a></span></div></div></div>'),a.put("app/modules/order/partials/orderObjectHistorySection.html",'<div data-ng-if="historyItemsCount>0" class="well container-fluid object-history"><div class=header><span class=legend>History</span></div><table class="table table-striped order-statuses"><thead><tr><th>Date</th><th>Status</th><th></th></tr></thead><tbody><tr data-ng-repeat="item in historyItems"><td class=date>{{::item.DateCreated | date:"MM/dd/yy"}}<br>{{::item.DateCreated | date:"h:mm a"}}<br>{{::item.EditedBy}}</td><td class=status><div data-ng-include="\'app/modules/order/partials/orderStatusSection.html\'"></div></td><td class=actions><button data-ng-if=!$first title=View class="btn btn-default btn-success btn-xs" data-ng-click=openHistoryReport(item.DataReferenceId);><i class="fa fa-search"></i></button></td></tr></tbody></table></div>'),a.put("app/modules/order/partials/orderRefundDetail.html",'<div class="container-fluid order-edit order-refund-edit"><div class=left-pane-controls><div class="well container-fluid"><div data-ng-if=!order.Id><button data-ng-click=save() class="btn btn-success width-160px" unsaved-warning-clear>Submit Refund</button></div><div data-ng-if="order.Id && order.OrderStatus!=4"><button data-ng-click=cancelRefund() class="btn btn-default width-160px" unsaved-warning-clear>Cancel Refund</button></div><div class=margin-top-10px><button ui-sref=index.oneCol.manageOrders class="btn btn-default width-160px" unsaved-warning-clear>Cancel</button></div><div class=margin-top-10px><button class="btn btn-primary width-160px" ui-sref=index.oneCol.manageOrders>Manage All</button></div><div class=margin-top-10px><button class="btn btn-info width-160px" data-ng-if=validatePermission(1) data-ng-click=goToCustomer();>Manage Customer</button></div></div><div ng-controller=objectHistorySectionController onload="name = \'History\'" data-ng-include="\'app/modules/order/partials/orderObjectHistorySection.html\'"></div></div><div class=right-pane-main><div class=container-fluid><div class=row><span class="legend top"><span data-ng-if=legend.IdOrderSource class=item>Associated Order ID: <a ui-sref="index.oneCol.orderDetail({id: legend.IdOrderSource })"><strong>{{legend.IdOrderSource}}</strong></a></span><br><span data-ng-if=legend.OrderSourceRefundIds class=item>Associated Refund IDs:<br data-ng-if="legend.OrderSourceRefundIds.length==0"><span data-ng-repeat="item in legend.OrderSourceRefundIds"><span data-ng-if=!$first class=refund-ids-section></span> <a ui-sref="index.oneCol.orderRefundDetail({id: item })"><strong>{{item}}</strong></a><br></span></span> <span class=item>Customer: <strong>{{legend.CustomerName}}</strong></span> <span class=item>Customer ID: <strong>{{legend.CustomerId}}</strong></span><br><span class=item>Order Date: <strong>{{::legend.OrderSourceDateCreated | date:"MM/dd/yy"}} {{::legend.OrderSourceDateCreated | date:"h:mm a"}}</strong></span> <span class=item>Total Order Amount: <strong>{{legend.OrderSourceTotal | currency}}</strong></span> <span class=item>Form of Payment: <strong>{{::getReferenceItem(ReferenceData.PaymentMethods, legend.OrderSourcePaymentMethodType).Text}}</strong></span><br><span data-ng-if=legend.OrderId class=item>Order ID: <strong>{{legend.OrderId}}</strong></span> <span data-ng-if=legend.OrderDate class=item>Order Date: <strong>{{legend.OrderDate | date:"MM/dd/yy"}} {{::legend.OrderDate | date:"h:mm a"}}</strong></span> <span data-ng-if=legend.OrderStatus class=item>Status: <strong>{{legend.OrderStatus}}</strong></span></span></div><div class=row><uib-tabset active=options.activeTabIndex><uib-tab heading={{mainTab.name}} index=mainTab.index><div class="container container-left xbig-container"><div class="well row"><spinner-overlay data-loading=addEditTracker.active()><div class=row><div class=col-md-12><form class=form-horizontal name=forms.topForm data-ng-submit=save() data-ng-class="{submitted: forms.topForm.submitted}" novalidate unsaved-warning-form><fieldset><div class=form-group><label for=type class="col-md-3 control-label">Service Code</label><div class=col-md-9><select data-ng-disabled=orderEditDisabled class=form-control name=ServiceCode data-ng-model=order.ServiceCode ng-options="item.Key as item.Text for item in ReferenceData.ServiceCodes" required></select><div class=error-container ng-show="forms.topForm.submitted && forms.topForm.ServiceCode.$invalid"><small class=error ng-show=forms.topForm.ServiceCode.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Service Code")}}</small> <small class=error ng-show=forms.topForm.ServiceCode.$error.server>{{serverMessages.GetMessage(\'ServiceCode\')}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label"></label><div class=col-md-9><div class=checkbox><label><input type=checkbox data-ng-disabled=orderEditDisabled data-ng-model=order.ReturnAssociated> <strong>Is there a product return associated with this Customer Service call?</strong></label></div></div></div><div class=form-group><label class="col-md-3 control-label">Notes</label><div class=col-md-9><textarea type=text name=OrderNotes class=form-control placeholder=Notes rows=5 data-ng-model=order.OrderNotes data-ng-disabled=orderEditDisabled required></textarea><div class=error-container ng-show="forms.topForm.submitted && forms.topForm.OrderNotes.$invalid"><small class=error ng-show=forms.topForm.OrderNotes.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Order Notes")}}</small> <small class=error ng-show=forms.topForm.OrderNotes.$error.server>{{serverMessages.GetMessage(\'OrderNotes\')}}</small></div></div></div></fieldset></form></div><div class="col-md-12 form-horizontal products"><span class=legend>Products</span><form class=form-horizontal name=forms.mainForm data-ng-submit=save() data-ng-class="{submitted: forms.mainForm.submitted}" novalidate unsaved-warning-form><fieldset><table class="table table-striped"><tbody><tr><td></td><td class=activate-all><div class=input-group><label><input data-ng-model=options.allActiveRefundSkus type=checkbox data-ng-change="toggleAllActiveRefundSkus()"></label></div></td><th colspan=7></th></tr><tr data-ng-form=i{{$index}} data-ng-repeat="item in order.RefundSkus"><td class=redeem><div class=input-group><select class=form-control name=Redeem data-ng-model=item.Redeem data-ng-change=requestRecalculate() ng-options="item.Key as item.Text for item in ReferenceData.RefundRedeemOptions" data-ng-disabled="item.Disabled || orderEditDisabled"></select></div></td><td class=activate><div class=input-group><label><input data-ng-model=item.Active type=checkbox data-ng-change=toggleRefundSku() data-ng-disabled="item.Disabled || orderEditDisabled"></label></div></td><td class=sku><div class=text>{{item.Code}}</div></td><td class=type><span data-ng-if="item.IdProductType==2" class=perishable>P</span> <span data-ng-if="item.IdProductType==1" class=not-perishable>NP</span> <span data-ng-if="item.IdProductType==3" class=perishable>eGC</span> <span data-ng-if="item.IdProductType==4" class=perishable>GC</span></td><td class=qty><input name=Quantity class=form-control placeholder=QTY numbers-only numbers-only-deny-zero min=1 max=1000 data-ng-model=item.Quantity data-ng-disabled=true></td><td class=percent><div class=input-group><input name=RefundPercent class="form-control number" placeholder=Percent money data-ng-model=item.RefundPercent data-ng-blur=requestRecalculate() min=0 max=100 required data-ng-disabled="item.Disabled || orderEditDisabled"><div class=error-container ng-show="forms.mainForm.submitted && forms.mainForm.i{{$index}}.RefundPercent.$invalid"><small class=error ng-show=forms.mainForm.i{{$index}}.RefundPercent.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Percent")}}</small> <small class=error ng-show=forms.mainForm.i{{$index}}.RefundPercent.$error.max>{{getValidationMessage("ValidationMessages.FieldMax","Percent",100)}}</small> <small class=error ng-show=forms.mainForm.i{{$index}}.RefundPercent.$error.min>{{getValidationMessage("ValidationMessages.FieldMin","Percent",0)}}</small></div></div></td><td class=product-name><div class=text>{{item.ProductName}}</div></td><td class=price><div class="col-md-12 padding-0px"><div class=input-group><span class=input-group-addon>$</span> <input name=RefundPrice class=form-control placeholder=Price money min=0.00 max=100000 required data-ng-model=item.RefundPrice data-ng-blur=requestRecalculate() data-ng-disabled="item.Disabled || orderEditDisabled"></div><div class=error-container ng-show="forms.mainForm.submitted && forms.mainForm.i{{$index}}.RefundPrice.$invalid"><small class=error ng-show=forms.mainForm.i{{$index}}.RefundPrice.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Price")}}</small> <small class=error ng-show=forms.mainForm.i{{$index}}.RefundPrice.$error.max>{{getValidationMessage("ValidationMessages.FieldMax","Price",100)}}</small> <small class=error ng-show=forms.mainForm.i{{$index}}.RefundPrice.$error.min>{{getValidationMessage("ValidationMessages.FieldMin","Price",100000)}}</small></div></div></td><td class=amount><div class=amount>{{item.RefundValue | currency}}</div></td></tr></tbody></table></fieldset></form></div><div class=col-md-12><form class=form-horizontal name=forms.mainForm2 data-ng-submit=save() data-ng-class="{submitted: forms.mainForm2.submitted}" novalidate unsaved-warning-form><fieldset><div class="form-group margin-bottom-0px"><label class="col-md-11 control-label">Product Subtotal</label><div class="col-md-1 padding-left-zero form-control-static"><span>{{order.ProductsSubtotal | currency}}</span></div></div><div data-ng-if=order.DiscountCode><span class=legend>Discounts</span><div class="form-group margin-bottom-0px"><label class="col-md-3 control-label">Discount Code</label><div class="col-md-6 form-control-static"><span>{{order.DiscountCode}} ({{order.DiscountMessage}})</span></div><label class="col-md-2 control-label">Amount</label><div class="col-md-1 padding-left-zero form-control-static"><span>({{order.DiscountTotal | currency}})</span></div></div></div><span class=legend>Shipping</span><div class=form-group><label for=shippingrefunded class="col-md-1 control-label"></label><div class="col-md-6 padding-left-30px"><div class=checkbox><label><input id=shippingrefunded type=checkbox name=ShippingRefunded data-ng-model=order.ShippingRefunded data-ng-change=requestRecalculate() data-ng-disabled="order.DisableShippingRefunded || order.Id"> <strong>Shipping Charges</strong></label></div></div><label class="col-md-2 control-label">Amount</label><div class=col-md-3><div class=input-group><span class=input-group-addon>$</span> <input name=ManualShippingTotal class=form-control placeholder="Shipping Charges" money max=100000 min=0.00 data-ng-blur=requestRecalculate() data-ng-model=order.ManualShippingTotal data-ng-disabled="!order.ShippingRefunded || order.DisableShippingRefunded || order.Id" data-ng-required="!(!order.ShippingRefunded || order.DisableShippingRefunded || order.Id)"></div><div class=error-container ng-show="forms.mainForm2.submitted && forms.mainForm2.ManualShippingTotal.$invalid"><small class=error ng-show=forms.mainForm2.ManualShippingTotal.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Shipping Charges")}}</small> <small class=error ng-show=forms.mainForm2.ManualShippingTotal.$error.parse>{{getValidationMessage("ValidationMessages.FieldRequired","Shipping Charges")}}</small> <small class=error ng-show=forms.mainForm2.ManualShippingTotal.$error.max>{{getValidationMessage("ValidationMessages.FieldMax","Shipping Charges",1000000)}}</small> <small class=error ng-show=forms.mainForm2.ManualShippingTotal.$error.min>{{getValidationMessage("{0} must be over $0.00","Shipping Charges")}}</small> <small class=error ng-show=forms.mainForm2.ManualShippingTotal.$error.server>{{serverMessages.GetMessage(\'ManualShippingTotal\')}}</small></div></div></div><div data-ng-if="order.RefundOrderToGiftCertificates && order.RefundOrderToGiftCertificates.length>0"><span class=legend>Gift Certificates Used On Order</span><div class="form-group margin-bottom-0px" data-ng-repeat="item in order.RefundOrderToGiftCertificates"><label for=shippingrefunded class="col-md-3 control-label">Gift Certificate</label><div class="col-md-7 form-control-static"><div><span><span>{{item.Code}}</span> <span data-ng-if=item.AmountRefunded>&nbsp;(Refunded {{item.AmountRefunded | currency}})</span> <span data-ng-if="item.Amount && order.Id">&nbsp;(In this refund {{item.Amount | currency}})</span> <span>&nbsp;(Amount {{item.AmountUsedOnSourceOrder | currency}})</span></span></div></div><div data-ng-if=$last><label class="col-md-1 control-label">Amount</label><div class="col-md-1 padding-left-zero form-control-static"><span>({{order.GiftCertificatesUsedAmountOnSourceOrder | currency}})</span></div></div></div></div><span class=legend></span><div><div class=col-md-8></div><div class="col-md-4 padding-left-zero padding-right-zero"><div class=total-section><div class="form-group margin-bottom-0px"><label class="col-md-8 control-label">Discounted Subtotal</label><div class="col-md-4 form-control-static"><span>{{order.DiscountedSubtotal | currency}}</span></div></div><div class="form-group margin-bottom-0px"><label class="col-md-8 control-label">Shipping Total</label><div class="col-md-4 form-control-static"><span>{{order.ShippingTotal | currency}}</span></div></div><div class="form-group margin-bottom-0px"><label class="col-md-8 control-label">Tax</label><div class="col-md-4 form-control-static"><span>{{order.TaxTotal | currency}}</span></div></div><div class="form-group margin-bottom-0px"><label class="col-md-8 control-label">Total to be Refunded</label><div class="col-md-4 form-control-static"><span>({{order.AutoTotal | currency}})</span></div></div></div></div></div><div data-ng-if="order.RefundOrderToGiftCertificates && order.RefundOrderToGiftCertificates.length>0"><span class=legend>Refund Back to Gift Certificate</span><div class=form-group><label for=gcsrefund class="col-md-1 control-label"></label><div class="col-md-6 padding-left-30px"><div class=checkbox><label><input id=gcsrefund type=checkbox name=RefundGiftCertificatesEnable data-ng-model=options.RefundGiftCertificatesEnable data-ng-change=toggleRefundGiftCertificates() data-ng-disabled="order.Id"> <strong>Refund Gift Certificates Used On Order</strong></label></div></div><label class="col-md-2 control-label">Amount</label><div class=col-md-3><div class=input-group><span class=input-group-addon>$</span> <input name=RefundGCsUsedOnOrder class=form-control placeholder="Refund Gift Certificates" money max=100000 min=0.00 data-ng-blur=requestRecalculate() data-ng-model=order.RefundGCsUsedOnOrder data-ng-disabled="!options.RefundGiftCertificatesEnable || order.Id" data-ng-required="!(!options.RefundGiftCertificatesEnable || order.Id)"></div><div class=error-container ng-show="forms.mainForm2.submitted && forms.mainForm2.RefundGCsUsedOnOrder.$invalid"><small class=error ng-show=forms.mainForm2.RefundGCsUsedOnOrder.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Refund Gift Certificates")}}</small> <small class=error ng-show=forms.mainForm2.RefundGCsUsedOnOrder.$error.parse>{{getValidationMessage("ValidationMessages.FieldRequired","Refund Gift Certificates")}}</small> <small class=error ng-show=forms.mainForm2.RefundGCsUsedOnOrder.$error.max>{{getValidationMessage("ValidationMessages.FieldMax","Refund Gift Certificates",1000000)}}</small> <small class=error ng-show=forms.mainForm2.RefundGCsUsedOnOrder.$error.min>{{getValidationMessage("{0} must be over $0.00","Refund Gift Certificates")}}</small> <small class=error ng-show=forms.mainForm2.RefundGCsUsedOnOrder.$error.server>{{serverMessages.GetMessage(\'RefundGCsUsedOnOrder\')}}</small></div></div></div></div><span class=legend>Manual Override</span><div class=form-group><label for=manualoverriderefund class="col-md-1 control-label"></label><div class="col-md-6 padding-left-30px"><div class=checkbox><label><input id=manualoverriderefund type=checkbox name=ManualRefundOverrideEnable data-ng-model=options.ManualRefundOverrideEnable data-ng-change=toggleManualRefundOverride() data-ng-disabled="order.Id"> <strong>Manual Override</strong></label></div></div><label class="col-md-2 control-label">Amount</label><div class=col-md-3><div class=input-group><span class=input-group-addon>$</span> <input name=ManualRefundOverride class=form-control placeholder="Manual Override Amount" money max=100000 min=0.00 data-ng-blur=requestRecalculate() data-ng-model=order.ManualRefundOverride data-ng-disabled="!options.ManualRefundOverrideEnable || order.Id" data-ng-required="!(!options.ManualRefundOverrideEnable || order.Id)"></div><div class=error-container ng-show="forms.mainForm2.submitted && forms.mainForm2.ManualRefundOverride.$invalid"><small class=error ng-show=forms.mainForm2.ManualRefundOverride.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Manual Override Amount")}}</small> <small class=error ng-show=forms.mainForm2.ManualRefundOverride.$error.parse>{{getValidationMessage("ValidationMessages.FieldRequired","Manual Override Amount")}}</small> <small class=error ng-show=forms.mainForm2.ManualRefundOverride.$error.max>{{getValidationMessage("ValidationMessages.FieldMax","Manual Override Amount",1000000)}}</small> <small class=error ng-show=forms.mainForm2.ManualRefundOverride.$error.min>{{getValidationMessage("{0} must be over $0.00","Manual Override Amount")}}</small> <small class=error ng-show=forms.mainForm2.ManualRefundOverride.$error.server>{{serverMessages.GetMessage(\'ManualRefundOverride\')}}</small></div></div></div><div><div class=col-md-8></div><div class="col-md-4 total-section margin-left-zero padding-right-zero padding-left-zero"><div><label class="col-md-9 control-label">Refund To Be Submitted</label><div class="col-md-3 form-control-static"><span>({{order.Total | currency}})</span></div></div></div></div></fieldset></form></div></div></spinner-overlay></div></div></uib-tab><uib-tab heading="Shipping Address" index=shippingAddressTab.index><div class="container container-left"><div class="well row"><spinner-overlay data-loading=addEditTracker.active()><div data-ng-include="\'app/modules/customer/partials/updateOrderShippingSection.html\'"></div></spinner-overlay></div></div></uib-tab><uib-tab heading="Payment Information" index=paymentInfoTab.index><div class="container container-left"><div class="well row"><spinner-overlay data-loading=addEditTracker.active()><div class=form-horizontal><div><form class=form-horizontal name=forms.oac data-ng-class="{submitted: forms.submitted[\'oac\']}" novalidate unsaved-warning-form><fieldset><div><span class=legend>Billing Address</span><div data-ng-include="\'app/modules/customer/partials/address.html\'" data-ng-repeat="model in [buildOrderPaymentPartial(order.Oac, order.OnHold)]"></div></div></fieldset></form></div></div></spinner-overlay></div></div></uib-tab></uib-tabset></div></div></div></div>'),a.put("app/modules/order/partials/orderReshipDetail.html",'<div class="container-fluid order-edit"><div class=left-pane-controls><div class="well container-fluid"><div><button data-ng-bind="order.Id ? \'Save\' : \'Submit\'" data-ng-click=save() class="btn btn-success width-160px" unsaved-warning-clear></button></div><div class="btn-group margin-top-10px"><button ui-sref=index.oneCol.manageOrders class="btn btn-default width-160px" unsaved-warning-clear>Cancel</button></div><div class=margin-top-10px><button class="btn btn-primary width-160px" ui-sref=index.oneCol.manageOrders>Manage All</button></div><div class=margin-top-10px><button class="btn btn-info width-160px" data-ng-if=validatePermission(1) data-ng-click=goToCustomer();>Manage Customer</button></div><div data-ng-show="currentCustomer && order.Id && options.oldOrderStatus!=1 && options.oldOrderStatus!=4" class=margin-top-10px><button class="btn btn-purple width-160px" data-ng-click=sendOrderConfirmationEmail();>Resend Order Conf</button></div><div data-ng-show="currentCustomer && order.Id && order.CombinedEditOrderStatus==3" class=margin-top-10px><button class="btn btn-purple width-160px" data-ng-click=sendOrderShippingConfirmationEmail();>Resend Ship Conf</button></div></div><div ng-controller=objectHistorySectionController onload="name = \'History\'" data-ng-include="\'app/modules/order/partials/orderObjectHistorySection.html\'"></div></div><div class=right-pane-main><div class=container-fluid><div class=row><span class="legend top"><span data-ng-if=legend.IdOrderSource class=item>Associated Order ID: <a ui-sref="index.oneCol.orderDetail({id: legend.IdOrderSource })"><strong>{{legend.IdOrderSource}}</strong></a></span> <span data-ng-if=legend.OrderSourceDateCreated class=item>Order Date: <strong>{{::legend.OrderSourceDateCreated | date:"MM/dd/yy"}} {{::legend.OrderSourceDateCreated | date:"h:mm a"}}</strong></span> <span data-ng-if=legend.OrderSourceTotal class=item>Total Order Amount: <strong>{{legend.OrderSourceTotal | currency}}</strong></span><br><span data-ng-if=legend.CustomerName class=item>Customer: <strong>{{legend.CustomerName}}</strong></span> <span data-ng-if=legend.CustomerId class=item>Customer ID: <strong>{{legend.CustomerId}}</strong></span> <span data-ng-if=legend.OrderId class=item>Order ID: <strong>{{legend.OrderId}}</strong></span> <span data-ng-if=legend.OrderDate class=item>Order Date: <strong>{{legend.OrderDate | date:"MM/dd/yy"}} {{::legend.OrderDate | date:"h:mm a"}}</strong></span> <span data-ng-if=legend.OrderStatus class=item>Status: <strong>{{legend.OrderStatus}}</strong></span></span></div><div class=row><uib-tabset active=options.activeTabIndex><uib-tab heading={{mainTab.name}} index=mainTab.index><div class="container container-left xbig-container"><div class="well row"><spinner-overlay data-loading=addEditTracker.active()><div class=row><div class=col-md-12><div class="options-row form-horizontal"><label class=checkbox-inline><input type=checkbox data-ng-model=order.OnHold data-ng-disabled=orderEditDisabled>Hold Order <i class="fa fa-pause"></i></label></div></div><div class=col-md-12><form class=form-horizontal name=forms.topForm data-ng-submit=save() data-ng-class="{submitted: forms.topForm.submitted}" novalidate unsaved-warning-form><fieldset><div class=form-group><label for=type class="col-md-3 control-label">Problem SKUs</label><div class=col-md-9><label class="checkbox-inline margin-left-zero margin-right-25px"><input type=checkbox data-ng-click=toggleAllReshipProblemSkus() data-ng-model=options.AllReshipProblemSkus autocomplete=off data-ng-disabled=orderEditDisabled> All</label><label class="checkbox-inline margin-left-zero margin-right-25px" data-ng-repeat="item in order.ReshipProblemSkus"><input type=checkbox data-ng-click=toggleReshipProblemSku(item) data-ng-model=item.Used autocomplete=off data-ng-disabled=orderEditDisabled> {{item.Code}}</label></div></div><div class=form-group><label for=type class="col-md-3 control-label">Service Code</label><div class=col-md-9><select data-ng-disabled=orderEditDisabled class=form-control name=ServiceCode data-ng-model=order.ServiceCode ng-options="item.Key as item.Text for item in ReferenceData.ServiceCodes" required></select><div class=error-container ng-show="forms.topForm.submitted && forms.topForm.ServiceCode.$invalid"><small class=error ng-show=forms.topForm.ServiceCode.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Service Code")}}</small> <small class=error ng-show=forms.topForm.ServiceCode.$error.server>{{serverMessages.GetMessage(\'ServiceCode\')}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label"></label><div class=col-md-9><div class=checkbox><label><input type=checkbox data-ng-disabled=orderEditDisabled data-ng-model=order.ReturnAssociated> <strong>Is there a product return associated with this Customer Service call?</strong></label></div></div></div><div class=form-group><label class="col-md-3 control-label">Notes</label><div class=col-md-9><textarea type=text name=OrderNotes class=form-control placeholder=Notes rows=5 data-ng-model=order.OrderNotes data-ng-disabled=orderEditDisabled required></textarea><div class=error-container ng-show="forms.topForm.submitted && forms.topForm.OrderNotes.$invalid"><small class=error ng-show=forms.topForm.OrderNotes.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Order Notes")}}</small> <small class=error ng-show=forms.topForm.OrderNotes.$error.server>{{serverMessages.GetMessage(\'OrderNotes\')}}</small></div></div></div></fieldset></form></div><div class="col-md-12 products-buttons"><button data-ng-click=productAdd() class="btn btn-primary-orange width-160px" data-ng-if=!orderEditDisabled>Add Product</button> <button data-ng-click=topPurchasedProducts() class="btn btn-info btn-right width-200px" data-ng-if=!orderEditDisabled>Top Purchased Products</button></div><div class="col-md-12 form-horizontal products"><table class="table table-striped"><tbody><tr data-ng-class="{warning: (item.ErrorMessages && item.ErrorMessages.length>0) || (item.ClientMessages && item.ClientMessages.length>0)}" data-ng-repeat-start="item in order.SkuOrdereds"><td class=sku><div class="input-group autocomplete"><input name=SKU{{$index}} class=form-control placeholder=SKU data-ng-model=item.Code typeahead-min-length=1 uib-typeahead="sku.Code as (sku.Code+\' - \'+ sku.DescriptionName) for sku in getSKUsBySKU($viewValue)" typeahead-loading=loadingSKUsBySKU typeahead-on-select=skuChanged($index) data-ng-blur=skuChanged($index) typeahead-wait-ms=200 data-ng-disabled=orderEditDisabled></div></td><td class=type><span data-ng-if="item.IdProductType==2" class=perishable>P</span> <span data-ng-if="item.IdProductType==1" class=not-perishable>NP</span> <span data-ng-if="item.IdProductType==3" class=perishable>eGC</span> <span data-ng-if="item.IdProductType==4" class=perishable>GC</span></td><td class=qty><input name=QTY{{$index}} class=form-control placeholder=QTY numbers-only numbers-only-deny-zero min=1 max=1000 data-ng-model=item.QTY data-ng-blur=requestRecalculate() data-ng-disabled=orderEditDisabled></td><td class=product-name><div class="input-group autocomplete"><input name=ProductName{{$index}} class=form-control placeholder="Product Name" data-ng-model=item.ProductName typeahead-min-length=1 uib-typeahead="sku.DescriptionName as sku.DescriptionName for sku in getSKUsByProductName($viewValue)" typeahead-loading=loadingSKUsByProductNane typeahead-on-select=productNameChanged($index) typeahead-wait-ms=200 data-ng-disabled=orderEditDisabled></div><div data-ng-if=item.GCCodes class=input-group><span data-ng-repeat="gc in item.GCCodes"><em>GC Code: {{gc}}</em><br></span></div></td><td class=price><div class="col-md-12 padding-0px"><div class=input-group><span class=input-group-addon>$</span> <input name=Price{{$index}} class=form-control placeholder=Price money min=0.00 max=100000 data-ng-model=item.Price data-ng-blur=requestRecalculate() data-ng-disabled=orderEditDisabled></div></div></td><td class=amount><div class=amount>{{item.Amount | currency}}</div></td><td class=del><a class="btn btn-danger btn-xs" title=Delete data-ng-click=productDelete($index); data-ng-disabled=orderEditDisabled data-ng-if=!orderEditDisabled><i class="glyphicon glyphicon-remove"></i></a></td></tr><tr data-ng-class="{warning: messageItem.MessageLevel==0, \'message-warning\': messageItem.MessageLevel==1, \'message-info\': messageItem.MessageLevel==2 }" data-ng-repeat="messageItem in item.Messages"><td colspan=7><strong class=message>{{messageItem.Message}}</strong></td></tr><tr data-ng-repeat-end class=warning data-ng-if="item.ClientMessages && item.ClientMessages.length>0"><td colspan=7><strong class=message data-ng-repeat="message in item.ClientMessages">{{message}}</strong></td></tr><tr class=warning data-ng-if="productsPerishableThresholdIssue && !options.ignoneMinimumPerishableThreshold"><td colspan=7><label class=perishable-threshold-message><strong>{{minimumPerishableThreshold | currency}} minimum perishable threshold not met. Override</strong> <input type=checkbox data-ng-model=options.ignoneMinimumPerishableThreshold data-ng-disabled=orderEditDisabled></label></td></tr></tbody></table></div><div class="col-md-6 left-section"><form class=form-horizontal name=forms.mainForm data-ng-submit=save() data-ng-class="{submitted: forms.mainForm.submitted}" novalidate unsaved-warning-form><fieldset><div class=form-group><label for=type class="col-md-3 control-label">Source</label><div data-ng-if=currentCustomer.SourceValue class="col-md-9 form-control-static"><span>{{currentCustomer.SourceValue}}</span></div><div data-ng-if=!currentCustomer.SourceValue class=col-md-9><select class=form-control name=Source data-ng-model=currentCustomer.Source ng-options="source.Key as source.Text for source in orderSources" data-ng-required=!order.OnHold data-ng-disabled=orderEditDisabled><option value="" selected hidden></select><div class=error-container ng-show="forms.mainForm.submitted && forms.mainForm.Source.$invalid"><small class=error ng-show=forms.mainForm.Source.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Source")}}</small></div></div></div><div data-ng-if="!currentCustomer.SourceValue && currentCustomer.Source && (currentCustomer.Source==4 || currentCustomer.Source==10)" class=form-group><label for=type class="col-md-3 control-label">Details</label><div class=col-md-9><input data-ng-if="currentCustomer.Source==10" name=SourceDetailsText class=form-control placeholder=Details data-ng-model=currentCustomer.SourceDetails data-ng-required=!order.OnHold data-ng-disabled=orderEditDisabled><div class=error-container ng-show="forms.mainForm.submitted && forms.mainForm.SourceDetailsText.$invalid"><small class=error ng-show=forms.mainForm.SourceDetailsText.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Details")}}</small></div><select data-ng-if="currentCustomer.Source==4" class=form-control name=SourceDetailsCelebrity data-ng-model=currentCustomer.SourceDetails ng-options="sourceCelebrity.Text as sourceCelebrity.Text for sourceCelebrity in orderSourcesCelebrityHealthAdvocate" data-ng-required=!order.OnHold data-ng-disabled=orderEditDisabled><option value="" selected hidden></select><div class=error-container ng-show="forms.mainForm.submitted && forms.mainForm.SourceDetailsCelebrity.$invalid"><small class=error ng-show=forms.mainForm.SourceDetailsCelebrity.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Details")}}</small></div></div></div><div data-ng-if="currentCustomer.CustomerType == 2 && order.IdObjectType!=4" class=form-group><label for=type class="col-md-3 control-label">PO#</label><div class=col-md-9><input name=PoNumber class=form-control placeholder=PO# data-ng-model=order.PoNumber data-ng-required=!order.OnHold data-ng-disabled=orderEditDisabled><div class=error-container ng-show="forms.mainForm.submitted && forms.mainForm.PoNumber.$invalid"><small class=error ng-show=forms.mainForm.PoNumber.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","#PO")}}</small> <small class=error ng-show=forms.mainForm.PoNumber.$error.server>{{serverMessages.GetMessage(\'PoNumber\')}}</small></div></div></div><div class=form-group><label for=type class="col-md-3 control-label">Key Code</label><div class=col-md-9><input name=KeyCode class=form-control placeholder="Key Code" data-ng-model=order.KeyCode data-ng-required=!order.OnHold data-ng-disabled=orderEditDisabled><div class=error-container ng-show="forms.mainForm.submitted && forms.mainForm.KeyCode.$invalid"><small class=error ng-show=forms.mainForm.KeyCode.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Key Code")}}</small> <small class=error ng-show=forms.mainForm.KeyCode.$error.server>{{serverMessages.GetMessage(\'KeyCode\')}}</small></div></div></div><span class=legend>Ship Delay</span><div class=form-group><label class="col-md-12 control-label left">Ship Delay Order?</label><div class=col-md-12><label class=radio-inline><input data-ng-model=order.ShipDelayType name=ShipDelayType value=0 type=radio data-ng-disabled=orderEditDisabled>None</label><label class=radio-inline><input data-ng-model=order.ShipDelayType name=ShipDelayType value=1 type=radio data-ng-disabled=orderEditDisabled>Entire Order</label><label data-ng-if="order.ShouldSplit && order.IdObjectType!=3" class=radio-inline><input data-ng-model=order.ShipDelayType name=ShipDelayType value=2 type=radio data-ng-disabled=orderEditDisabled>Perishable & Non-Perishable</label></div></div><div data-ng-if="order.ShipDelayType==1" class=form-group><label for=date class="col-md-6 control-label">Ship Date</label><div class=col-md-6><p class=input-group><input name=ShipDelayDate class=form-control uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=order.ShipDelayDate is-open=shipDelayDateOpened required data-ng-disabled="orderEditDisabled"> <span class=input-group-btn><button type=button class="btn btn-default" ng-disabled=false ng-click="stopPropagation($event); shipDelayDateOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.mainForm.submitted && forms.mainForm.ShipDelayDate.$invalid"><small class=error ng-show=forms.mainForm.ShipDelayDate.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Date")}}</small> <small class=error ng-show=forms.mainForm.ShipDelayDate.$error.server>{{serverMessages.GetMessage(\'ShipDelayDate\')}}</small></div></div></div><div data-ng-if="order.ShipDelayType==2 && order.ShouldSplit" class=form-group><label for=date class="col-md-6 control-label">Perishable Ship Date</label><div class=col-md-6><p class=input-group><input name=ShipDelayDateP class=form-control uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=order.ShipDelayDateP is-open=shipDelayDatePOpened data-ng-disabled="orderEditDisabled"> <span class=input-group-btn><button type=button class="btn btn-default" ng-disabled=false ng-click="stopPropagation($event); shipDelayDatePOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.mainForm.submitted && forms.mainForm.ShipDelayDateP.$invalid"><small class=error ng-show=forms.mainForm.ShipDelayDateP.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Date")}}</small> <small class=error ng-show=forms.mainForm.ShipDelayDateP.$error.server>{{serverMessages.GetMessage(\'ShipDelayDateP\')}}</small></div></div></div><div data-ng-if="order.ShipDelayType==2 && order.ShouldSplit" class=form-group><label for=date class="col-md-6 control-label">Non-Perishable Ship Date</label><div class=col-md-6><p class=input-group><input name=ShipDelayDateNP class=form-control uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=order.ShipDelayDateNP is-open=shipDelayDateNPOpened data-ng-disabled="orderEditDisabled"> <span class=input-group-btn><button type=button class="btn btn-default" ng-disabled=false ng-click="stopPropagation($event); shipDelayDateNPOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.mainForm.submitted && forms.mainForm.ShipDelayDateNP.$invalid"><small class=error ng-show=forms.mainForm.ShipDelayDateNP.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Date")}}</small> <small class=error ng-show=forms.mainForm.ShipDelayDateNP.$error.server>{{serverMessages.GetMessage(\'ShipDelayDateNP\')}}</small></div></div></div><span class=legend>Notes</span><div data-ng-if=order.GiftOrder class=form-group><label class="col-md-12 control-label left">Gift Message (*Will appear on invoice)</label><div class=col-md-12><textarea type=text name=GiftMessage class=form-control placeholder="Gift Message" rows=5 data-ng-model=order.GiftMessage data-ng-disabled=orderEditDisabled></textarea></div></div><div class=form-group><label class="col-md-12 control-label left">Delivery Instructions (*Prints to Shipping Label):</label><div class=col-md-12><textarea type=text name=DeliveryInstructions class=form-control rows=5 data-ng-model="buildOrderShippingAddressForPartial(order.OnHold && !order.UpdateShippingAddressForCustomer).Address.DeliveryInstructions" data-ng-disabled=true></textarea></div></div></fieldset></form></div><div class="col-md-6 right-section"><form class=form-horizontal name=forms.mainForm2 data-ng-submit=save() data-ng-class="{submitted: forms.mainForm2.submitted}" novalidate unsaved-warning-form><fieldset><div data-ng-if="order.AlaskaHawaiiSurcharge!=0" class="form-group margin-bottom-0px"><label for=type class="col-md-7 control-label">Alaska/Hawaii Surcharge</label><div class="col-md-5 form-control-static"><span>{{order.AlaskaHawaiiSurcharge | currency}}</span></div></div><div data-ng-if="order.CanadaSurcharge!=0" class="form-group margin-bottom-0px"><label for=type class="col-md-7 control-label">Canada Surcharge</label><div class="col-md-5 form-control-static"><span>{{order.CanadaSurcharge | currency}}</span></div></div><div class="form-group margin-bottom-0px"><label for=type class="col-md-7 control-label">Standard Shipping Charges</label><div class="col-md-5 form-control-static"><span>{{order.StandardShippingCharges | currency}}</span></div></div><div data-ng-if="shippingUpgradePOptions && shippingUpgradePOptions.length!=0 && order.IdObjectType!=3" class=form-group><label for=type class="col-md-7 control-label">Upgrade Perishable Shipping</label><div class=col-md-5><select data-ng-disabled="!shippingUpgradePOptions || shippingUpgradePOptions.length==0 || orderEditDisabled" class=form-control name=ShippingUpgradeP data-ng-model=order.ShippingUpgradeP ng-options="item.Key as item.Text for item in shippingUpgradePOptions" data-ng-change=requestRecalculate()><option value="">None</option></select></div></div><div data-ng-if="shippingUpgradeNPOptions && shippingUpgradeNPOptions.length!=0 && order.IdObjectType!=3" class=form-group><label for=type class="col-md-7 control-label">Upgrade Non-Perishable Shipping</label><div class=col-md-5><select data-ng-disabled="!shippingUpgradeNPOptions || shippingUpgradeNPOptions.length==0 || orderEditDisabled" class=form-control name=ShippingUpgradeNP data-ng-model=order.ShippingUpgradeNP ng-options="item.Key as item.Text for item in shippingUpgradeNPOptions" data-ng-change=requestRecalculate()><option value="">None</option></select></div></div><div data-ng-if="order.AlaskaHawaiiSurcharge!=0 || order.CanadaSurcharge!=0" class=form-group><label for=type class="col-md-7 control-label">Surcharge Override (-)</label><div class=col-md-5><div class=input-group><span class=input-group-addon>$</span> <input name=SurchargeOverride class=form-control placeholder=Surcharge money min=0.00 max=100000 data-ng-model=order.SurchargeOverride data-ng-blur=requestRecalculate() data-ng-disabled=orderEditDisabled></div><div class=error-container ng-show="forms.mainForm2.submitted && forms.mainForm2.SurchargeOverride.$invalid"><small class=error ng-show=forms.mainForm2.SurchargeOverride.$error.parse>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Amount")}}</small> <small class=error ng-show=forms.mainForm2.SurchargeOverride.$error.max>{{getValidationMessage("ValidationMessages.FieldMax","GeneralFieldNames.Amount",1000000)}}</small> <small class=error ng-show=forms.mainForm2.SurchargeOverride.$error.server>{{serverMessages.GetMessage(\'SurchargeOverride\')}}</small></div></div></div><div data-ng-if="order.IdObjectType!=3" class=form-group><label for=type class="col-md-7 control-label">Shipping Override (-)</label><div class=col-md-5><div class=input-group><span class=input-group-addon>$</span> <input name=ShippingOverride class=form-control placeholder=Shipping money min=0.00 max=100000 data-ng-model=order.ShippingOverride data-ng-blur=requestRecalculate() data-ng-disabled=orderEditDisabled></div><div class=error-container ng-show="forms.mainForm2.submitted && forms.mainForm2.ShippingOverride.$invalid"><small class=error ng-show=forms.mainForm2.ShippingOverride.$error.parse>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Amount")}}</small> <small class=error ng-show=forms.mainForm2.ShippingOverride.$error.max>{{getValidationMessage("ValidationMessages.FieldMax","GeneralFieldNames.Amount",1000000)}}</small> <small class=error ng-show=forms.mainForm2.ShippingOverride.$error.server>{{serverMessages.GetMessage(\'ShippingOverride\')}}</small></div></div></div><div class="form-group margin-bottom-0px"><label for=type class="col-md-7 control-label">Total Shipping</label><div class="col-md-5 form-control-static"><span>{{order.TotalShipping | currency}}</span></div></div><div class="form-group margin-bottom-0px"><label for=type class="col-md-7 control-label">Product Subtotal</label><div class="col-md-5 form-control-static"><span>{{order.ProductsSubtotal | currency}}</span></div></div></fieldset></form><form name=forms.GCs class=form-horizontal data-ng-submit=save() data-ng-class="{submitted: forms.GCs.skussubmitted}" novalidate unsaved-warning-form><fieldset><div class=total-section><div data-ng-if="order.IdObjectType!=3" class="form-group margin-bottom-0px"><label class="col-md-6 control-label">Discount</label><div class="col-md-6 form-control-static"><span>{{order.DiscountMessage}}</span></div></div><div data-ng-if="order.IdObjectType!=3" class="form-group margin-bottom-0px"><label class="col-md-6 control-label">Discount Amount</label><div class="col-md-6 form-control-static"><span>({{order.DiscountTotal | currency}})</span></div></div><div data-ng-if="order.IdObjectType!=3" class="form-group margin-bottom-0px"><label class="col-md-6 control-label">Discounted Subtotal</label><div class="col-md-6 form-control-static"><span>{{order.DiscountedSubtotal | currency}}</span></div></div><div class="form-group margin-bottom-0px"><label class="col-md-6 control-label">Shipping Total</label><div class="col-md-6 form-control-static"><span>{{order.ShippingTotal | currency}}</span></div></div><div class="form-group margin-bottom-0px"><label class="col-md-6 control-label">Tax</label><div class="col-md-6 form-control-static"><span>{{order.TaxTotal | currency}}</span></div></div><div class="form-group margin-bottom-0px"><label class="col-md-6 control-label">Gift Certificates</label><div class="col-md-6 form-control-static"><span>({{order.GiftCertificatesSubtotal | currency}})</span></div></div><div class="form-group margin-bottom-0px"><label class="col-md-6 control-label">Grand Total</label><div class="col-md-6 form-control-static"><span>{{order.Total | currency}}</span></div></div></div></fieldset></form></div><div data-ng-include="\'app/modules/order/partials/orderEditShippedSection.html\'"></div></div></spinner-overlay></div></div></uib-tab><uib-tab heading="Shipping Address" index=shippingAddressTab.index><div class="container container-left"><div class="well row"><spinner-overlay data-loading=addEditTracker.active()><div data-ng-include="\'app/modules/customer/partials/updateOrderShippingSection.html\'"></div></spinner-overlay></div></div></uib-tab><uib-tab heading="Payment Information" index=paymentInfoTab.index><div class="container container-left"><div class="well row"><spinner-overlay data-loading=addEditTracker.active()><div class=form-horizontal><span class=legend>Select Payment Method</span><div data-ng-include="\'app/modules/order/partials/updateOrderBillingSection.html\'"></div></div></spinner-overlay></div></div></uib-tab></uib-tabset></div></div></div></div>'),
a.put("app/modules/order/partials/orderSkuCountReport.html",'<div class="container-fluid order-sku-count-report"><div class=well><span class=legend>Order SKU Counts</span><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.form.submitted}" novalidate><fieldset><div class="row form-group"><div class=col-md-3><p class=input-group><input class=form-control name=From uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.From is-open=fromOpened ng-required="true"> <span class=input-group-btn><button type=button class="btn btn-default" ng-click="stopPropagation($event); fromOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.form.submitted && forms.form.From.$invalid"><small class=error ng-show=forms.form.From.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","From")}}</small></div></div><div class=col-md-3><p class=input-group><input class=form-control name=To uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.To is-open=toOpened ng-required="true"> <span class=input-group-btn><button type=button class="btn btn-default" ng-click="stopPropagation($event); toOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.form.submitted && forms.form.To.$invalid"><small class=error ng-show=forms.form.To.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","To")}}</small></div></div><div class=col-md-3><div class="input-group autocomplete col-md-12"><input name=SkuCode class=form-control placeholder="Product SKU" data-ng-model=filter.SkuCode autocomplete=off typeahead-min-length=1 uib-typeahead="sku.Code as sku.Code for sku in getSKUsBySKU($viewValue)" typeahead-loading=loadingSKUsBySKU typeahead-wait-ms=200> <span class=input-group-addon><i ng-show=loadingSKUsBySKU class="glyphicon glyphicon-refresh"></i></span></div></div><div class=col-md-3><div class=checkbox><label><input type=checkbox name=Unique data-ng-model="filter.Unique"> Count unique only</label></div></div></div><div class="row form-group"><div class=col-md-12><button class="btn btn-info" data-ng-click=filterItems(); type=button>Filter</button></div></div></fieldset></form><spinner-overlay data-loading=refreshTracker.active()><div><span class=legend>Total Orders</span><table class="table table-striped"><thead><tr><th>Orders</th><th>Total Orders</th><th>1 SKU Orders</th><th>2 SKU Orders</th><th>3 SKU Orders</th><th>4 SKU Orders</th><th>5+ SKU Orders</th></tr></thead><tbody><tr><td>Non-Perishable</td><td>{{report.NonPerishableTotalOrders}}</td><td>{{report.NonPerishableSku1Orders}}</td><td>{{report.NonPerishableSku2Orders}}</td><td>{{report.NonPerishableSku3Orders}}</td><td>{{report.NonPerishableSku4Orders}}</td><td>{{report.NonPerishableSku5Orders}}</td></tr><tr><td>Non-Perishable (%)</td><td></td><td>{{report.NonPerishableSku1OrderPercent}}%</td><td>{{report.NonPerishableSku2OrderPercent}}%</td><td>{{report.NonPerishableSku3OrderPercent}}%</td><td>{{report.NonPerishableSku4OrderPercent}}%</td><td>{{report.NonPerishableSku5OrderPercent}}%</td></tr><tr><td>Perishable</td><td>{{report.PerishableTotalOrders}}</td><td>{{report.PerishableSku1Orders}}</td><td>{{report.PerishableSku2Orders}}</td><td>{{report.PerishableSku3Orders}}</td><td>{{report.PerishableSku4Orders}}</td><td>{{report.PerishableSku5Orders}}</td></tr><tr><td>Perishable (%)</td><td></td><td>{{report.PerishableSku1OrderPercent}}%</td><td>{{report.PerishableSku2OrderPercent}}%</td><td>{{report.PerishableSku3OrderPercent}}%</td><td>{{report.PerishableSku4OrderPercent}}%</td><td>{{report.PerishableSku5OrderPercent}}%</td></tr></tbody></table><span class=legend>Orders that include the listed product SKU</span><table class="table table-striped"><thead><tr><th>SKU</th><th>Total Orders</th><th>1 SKU Orders</th><th>2 SKU Orders</th><th>3 SKU Orders</th><th>4 SKU Orders</th><th>5+ SKU Orders</th></tr></thead><tbody><tr data-ng-repeat-start="sku in report.Skus"><td><a data-ng-click="sku.ShowOrders=!sku.ShowOrders;">{{::sku.Code}}</a></td><td>{{::sku.TotalOrders}}</td><td>{{::sku.Sku1Orders}}</td><td>{{::sku.Sku2Orders}}</td><td>{{::sku.Sku3Orders}}</td><td>{{::sku.Sku4Orders}}</td><td>{{::sku.Sku5Orders}}</td></tr><tr><td>{{::sku.Code}} (%)</td><td></td><td>{{::sku.Sku1OrderPercent}}%</td><td>{{::sku.Sku2OrderPercent}}%</td><td>{{::sku.Sku3OrderPercent}}%</td><td>{{::sku.Sku4OrderPercent}}%</td><td>{{::sku.Sku5OrderPercent}}%</td></tr><tr data-ng-if=sku.ShowOrders><td><table class="table table-striped"><thead><tr><th>Order #</th><th>SKU Count</th><th>% of Total</th></tr></thead><tbody><tr data-ng-repeat="order in sku.Orders"><td><a ui-sref="index.oneCol.orderDetail({id: order.IdOrder })">{{::order.IdOrder}}</a></td><td>{{::order.SkuCount}}</td><td>{{::order.PercentOfTotal}}%</td></tr></tbody></table></td></tr><tr data-ng-repeat-end></tr></tbody></table></div></spinner-overlay></div></div>'),a.put("app/modules/order/partials/ordersList.html",'<div class="container-fluid orders"><div class=well><span class=legend>Manage Orders</span><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.form.submitted}" novalidate><fieldset><div class="row form-group"><div class=col-md-2><input name=Id class=form-control placeholder="Order #" data-ng-model=directOrdersfilter.Id numbers-only autocomplete=off data-ng-minlength=3 data-ng-required=true><div class=error-container ng-show="forms.form.submitted && forms.form.Id.$invalid"><small class=error ng-show=forms.form.Id.$error.required>{{getValidationMessage("{0} should have at least 3 symbols","Order #")}}</small> <small class=error ng-show=forms.form.Id.$error.minlength>{{getValidationMessage("{0} should have at least 3 symbols","Order #")}}</small></div></div><div class=col-md-4><button class="btn btn-info" data-ng-click=directFilterOrders(); type=button>Locate Order</button></div><div class=col-md-6><div class="pull-right padding-left-15px"><button class="btn btn-info" data-ng-click=filterGCs(); type=button ladda=gcRefreshTracker.active()>Check GC Balance</button></div><div class="col-md-4 pull-right"><input name=ExactCode class=form-control placeholder="GC Code" data-ng-model=gcfilter.ExactCode autocomplete=off></div></div></div><hr></fieldset></form><form class=form-horizontal name=forms.filterForm data-ng-submit=save() data-ng-class="{submitted: forms.filterForm.submitted}" novalidate><fieldset><div class="row form-group"><div class=col-md-2><p class=input-group><input class=form-control name=From uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.From is-open=fromOpened ng-required="true"> <span class=input-group-btn><button type=button class="btn btn-default" ng-disabled=false ng-click="stopPropagation($event); fromOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.filterForm.submitted && forms.filterForm.From.$invalid"><small class=error ng-show=forms.filterForm.From.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","From")}}</small></div></div><div class=col-md-2><p class=input-group><input class=form-control name=To uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.To is-open=toOpened ng-required="true"> <span class=input-group-btn><button type=button class="btn btn-default" ng-disabled=false ng-click="stopPropagation($event); toOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.filterForm.submitted && forms.filterForm.To.$invalid"><small class=error ng-show=forms.filterForm.To.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","To")}}</small></div></div><div class=col-md-2><div class=checkbox><label><input type=checkbox name=ShipDate data-ng-model="filter.ShipDate"> Ship Date</label></div></div><div class=col-md-6><div data-ng-if="gc && gc.StatusCode==2"><div class="pull-right form-control-static padding-left-15px"><span><strong>Active</strong> Code: <strong>{{gc.Code}}</strong> Available Amount: <strong>{{gc.Balance | currency}}</strong></span></div><span class="icon success pull-right"><i class="fa fa-check-circle"></i></span></div><div data-ng-if="gc && gc.StatusCode==1"><div class="pull-right form-control-static padding-left-15px"><span><strong>Inactive</strong> Code: <strong>{{gc.Code}}</strong> Available Amount: <strong>{{gc.Balance | currency}}</strong></span></div><span class="icon warning pull-right"><i class="fa fa-exclamation-triangle"></i></span></div><div data-ng-if="!gc && options.gcSearchUsed"><div class="pull-right form-control-static padding-left-15px"><strong>Gift Certificate Not Found</strong></div><span class="icon warning pull-right"><i class="fa fa-exclamation-triangle"></i></span></div></div></div><div class="row form-group"><div class=col-md-2><select class=form-control data-ng-disabled=filter.ShipDate placeholder="Order Status" data-ng-model=filter.OrderStatus data-ng-options="item.Key as item.Text for item in orderStatuses"></select></div><div class=col-md-2><select class=form-control placeholder="Order Type" data-ng-model=filter.IdObjectType data-ng-options="item.Key as item.Text for item in orderTypes"></select></div><div class=col-md-2><select class=form-control placeholder="Order Source" data-ng-model=filter.IdOrderSource data-ng-options="item.Key as item.Text for item in orderSourceTypes"></select></div><div class=col-md-2><select class=form-control placeholder="P/NP Type" data-ng-model=filter.POrderType data-ng-options="item.Key as item.Text for item in ReferenceData.FilterPNPOrderTypes"></select></div><div class=col-md-2><select class=form-control placeholder="Customer Type" data-ng-model=filter.IdCustomerType data-ng-options="item.Key as item.Text for item in customerTypes"></select></div><div class=col-md-2><select class=form-control placeholder="Shipping Method" data-ng-model=filter.IdShippingMethod data-ng-options="item.Key as item.Text for item in shippingMethods"></select></div></div><div class="row form-group"><div class=col-md-2><input class=form-control name=CustomerCompany placeholder="Customer Company" data-ng-model=filter.CustomerCompany data-ng-minlength=3 autocomplete=off><div class=error-container ng-show="forms.filterForm.submitted && forms.filterForm.CustomerCompany.$invalid"><small class=error ng-show=forms.filterForm.CustomerCompany.$error.minlength>{{getValidationMessage("{0} should have at least 3 symbols","Customer Company")}}</small></div></div><div class=col-md-2><input class=form-control name=CustomerFirstName placeholder="Customer First Name" data-ng-model=filter.CustomerFirstName data-ng-minlength=3 autocomplete=off><div class=error-container ng-show="forms.filterForm.submitted && forms.filterForm.CustomerFirstName.$invalid"><small class=error ng-show=forms.filterForm.CustomerFirstName.$error.minlength>{{getValidationMessage("{0} should have at least 3 symbols","Customer First Name")}}</small></div></div><div class=col-md-2><input class=form-control name=CustomerLastName placeholder="Customer Last Name" data-ng-model=filter.CustomerLastName data-ng-minlength=3 autocomplete=off><div class=error-container ng-show="forms.filterForm.submitted && forms.filterForm.CustomerLastName.$invalid"><small class=error ng-show=forms.filterForm.CustomerLastName.$error.minlength>{{getValidationMessage("{0} should have at least 3 symbols","Customer Last Name")}}</small></div></div><div class=col-md-2><select class=form-control placeholder="Ship State" data-ng-model=filter.IdShipState data-ng-options="item.Id as item.StateName for item in states"></select></div></div></fieldset></form><div class="row form-group"><div class=col-md-4><button class="btn btn-info" data-ng-click=filterOrders(); type=button>Filter</button></div></div><hr><div class="btn-line form-group"><button class="btn btn-info btn-right width-160px" data-ng-click=exportOrders(); ladda=refreshTracker.active()>Export Orders</button></div><spinner-overlay data-loading=refreshTracker.active()><table id=data-grid class="table table-striped table-hover order-statuses"><thead><tr><th class=status>Status</th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'IdObjectType\')"><span>O Type</span> <span data-ng-if="filter.Sorting.Path == \'IdObjectType\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'IdOrderSource\')"><span>Order Source</span> <span data-ng-if="filter.Sorting.Path == \'IdOrderSource\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'IdPaymentMethod\')"><span>Payment</span> <span data-ng-if="filter.Sorting.Path == \'IdPaymentMethod\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'DateCreated\')"><span>Order Date</span> <span data-ng-if="filter.Sorting.Path == \'DateCreated\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=actions>Ship Date</th><th>Company</th><th>Ship State</th><th>Carrier</th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'IdCustomerType\')"><span>C Type</span> <span data-ng-if="filter.Sorting.Path == \'IdCustomerType\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th>Customer</th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Id\')"><span>Order #</span> <span data-ng-if="filter.Sorting.Path == \'Id\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Total\')"><span>Order Total</span> <span data-ng-if="filter.Sorting.Path == \'Total\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'DateEdited\')"><span>Updated</span> <span data-ng-if="filter.Sorting.Path == \'DateEdited\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=actions>Actions</th><th><div class=checkbox-inline><label class=margin-bottom-0px><input data-ng-model=settings.allExport type=checkbox data-ng-change=allExportCall()> <strong>Export</strong></label></div></th></tr></thead><tbody><tr data-ng-class="::{\'order-notes\': item.OrderNotes}" data-ng-repeat="item in items"><td><div data-ng-include="\'app/modules/order/partials/orderStatusSection.html\'"></div></td><td><span class="label font-default" data-ng-class="::{\'label-retail\': (item.IdObjectType==1 || item.IdObjectType==7 ||item.IdObjectType==3 || item.IdObjectType==4), \'label-primary\':  item.IdObjectType==5, \'label-success\':  item.IdObjectType==6}">{{::getReferenceItem(ReferenceData.ShortOrderTypes, item.IdObjectType).Text}}</span></td><td class=order-source><span>{{::getReferenceItem(orderSourceTypes, item.IdOrderSource).Text}}</span></td><td class=payment-methods><span>{{::getReferenceItem(ReferenceData.ShortPaymentMethods, item.IdPaymentMethod).Text}}</span></td><td>{{::item.DateCreated | date:"MM/dd/yy"}}<br>{{::item.DateCreated | date:"h:mm a"}}</td><td><span data-ng-if=::item.DateShipped>{{::item.DateShipped | date:"MM/dd/yy"}}</span><div data-ng-if="::(!item.DateShipped && (item.PDateShipped || item.NPDateShipped))"><span data-ng-if=::item.PDateShipped>{{::item.PDateShipped | date:"MM/dd/yy"}} - P</span><br><span data-ng-if=::item.NPDateShipped>{{::item.NPDateShipped | date:"MM/dd/yy"}} - NP</span></div></td><td>{{::item.Company}}</td><td>{{::item.StateCode}}</td><td>{{::getReferenceItem(ReferenceData.OrderPreferredShipMethod, item.PreferredShipMethod).Text}}</td><td><span data-ng-if="::item.IdCustomerType == 1" class="label label-retail font-default">{{::getReferenceItem(ReferenceData.ShortCustomerTypes, item.IdCustomerType).Text}}</span> <span data-ng-if="::item.IdCustomerType == 2" class="label label-wholesale font-default">{{::getReferenceItem(ReferenceData.ShortCustomerTypes, item.IdCustomerType).Text}}</span></td><td><a ui-sref="index.oneCol.customerDetail({id: {{::item.IdCustomer}}})">{{::item.Customer}}</a></td><td><a ui-sref="{{::item.IdObjectType==5 ? \'index.oneCol.orderReshipDetail({id: item.Id })\' : item.IdObjectType==6 ? \'index.oneCol.orderRefundDetail({id: item.Id })\' : \'index.oneCol.orderDetail({id: item.Id })\'}}">{{::item.Id}}</a></td><td data-ng-if="::item.IdObjectType!=6">{{::item.Total | currency}}</td><td data-ng-if="::item.IdObjectType==6">({{::item.Total | currency}})</td><td>{{::item.DateEdited | date:"MM/dd/yy"}}<br>{{::item.DateEdited | date:"h:mm a"}}<br>{{::item.EditedByAgentId}}</td><td><a class="btn btn-default btn-primary btn-xs" target=_blank data-ng-href=/api/orderinvoice/base/{{::item.Id}}><i class="fa fa-search"></i></a> <button title=Edit class="btn btn-default btn-success btn-xs" ui-sref="{{::item.IdObjectType==5 ? \'index.oneCol.orderReshipDetail({id: item.Id })\' : item.IdObjectType==6 ? \'index.oneCol.orderRefundDetail({id: item.Id })\' : \'index.oneCol.orderDetail({id: item.Id })\'}}"><i class="glyphicon glyphicon-edit"></i></button> <button title=Delete data-ng-if="::!(item.OrderStatus==3 || item.OrderStatus==4 || item.OrderStatus==5 || item.POrderStatus==3 || item.POrderStatus==4 || item.POrderStatus==5 || item.NPOrderStatus==3 || item.NPOrderStatus==4 || item.NPOrderStatus==5)" class="btn btn-default btn-danger btn-xs" ladda=deleteTracker.active() data-ng-click="item.IdObjectType==6 ? cancelRefund(item.Id) : cancel(item.Id)"><i class="glyphicon glyphicon-remove"></i></button></td><td><div data-ng-if=::item.OrderStatus class="checkbox margin-bottom-0px margin-top-0px"><label><input data-ng-disabled=::!item.AllowExport data-ng-model=item.IsSelected type=checkbox data-ng-change="itemExportChanged(item, $event)"></label></div><div data-ng-if="::(!item.OrderStatus && item.POrderStatus)" class="checkbox margin-bottom-5px margin-top-0px"><label><input data-ng-disabled=::!item.PAllowExport data-ng-model=item.IsPSelected type=checkbox data-ng-change="PItemExportChanged(item, $event)"> P</label></div><div data-ng-if="::(!item.OrderStatus && item.NPOrderStatus)" class="checkbox margin-bottom-0px margin-top-0px"><label><input data-ng-disabled=::!item.NPAllowExport data-ng-model=item.IsNPSelected type=checkbox data-ng-change="NPItemExportChanged(item, $event)"> NP</label></div></td></tr></tbody></table></spinner-overlay><div><strong>{{totalItems}}</strong> Orders Found - Displaying <strong>{{filter.Paging.PageItemCount}}</strong> Orders Per Page</div><uib-pagination boundary-links=true total-items=totalItems items-per-page=filter.Paging.PageItemCount data-ng-model=filter.Paging.PageIndex previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; data-ng-change="pageChanged();scrollTo(\'data-grid\');"></uib-pagination></div></div>'),a.put("app/modules/order/partials/ordersRegionStatistic.html",'<div class="container-fluid orders-region-statistic"><div class=well><span class=legend>Regional Sales Summary Information</span><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.submitted}" novalidate><fieldset><div class="row form-group"><div class=col-md-2><p class=input-group><input name=From class=form-control placeholder=From uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.From is-open=fromOpened data-ng-change=filterChanged(); required> <span class=input-group-btn><button type=button class="btn btn-default" ng-click="stopPropagation($event); fromOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p></div><div class=col-md-2><p class=input-group><input name=To class=form-control placeholder=To uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.To is-open=toOpened data-ng-change=filterChanged(); required> <span class=input-group-btn><button type=button class="btn btn-default" ng-click="stopPropagation($event); toOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p></div><div class=col-md-3><select class=form-control placeholder="Customer Type" data-ng-model=filter.IdCustomerType data-ng-options="item.Key as item.Text for item in customerTypes" data-ng-change=filterChanged();></select></div><div class=col-md-3><select class=form-control placeholder="Order Type" data-ng-model=filter.IdOrderType data-ng-options="item.Key as item.Text for item in orderTypes" data-ng-change=filterChanged();></select></div><div class=col-md-2><select class=form-control placeholder="Region Type" data-ng-model=filter.RegionType data-ng-options="item.Key as item.Text for item in regionTypes" data-ng-change=filterChanged();></select></div></div></fieldset></form><div class="row form-group"><div class=col-md-12><button class="btn btn-info" data-ng-click=filterItems(); type=button>Filter</button> <a target=_self class="btn btn-primary pull-right" data-ng-href={{options.exportUrl}}>Export</a></div></div><spinner-overlay data-loading=refreshTracker.active()><table data-ng-if=items class="table table-striped"><thead><tr><th data-ng-if="options.RegionType==1">State/Province</th><th data-ng-if="options.RegionType==2">Zip</th><th>Sales</th><th>Orders</th></tr></thead><tbody><tr data-ng-repeat="item in items"><td data-ng-if="options.RegionType==1"><a data-ng-click=openByRegion(item.Region);>{{::item.Region}}</a></td><td data-ng-if="options.RegionType==2"><a data-ng-click=openByZip(item.Zip);>{{::item.Zip}}</a></td><td>{{::item.Amount | currency}}</td><td>{{::item.Count}}</td></tr></tbody></table></spinner-overlay></div></div>'),a.put("app/modules/order/partials/ordersRegionStatisticDetail.html",'<div class="container-fluid orders-region-statistic"><div class=well><span class=legend>Regional Sales Detail</span><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.submitted}" novalidate><fieldset><div class="row form-group"><div class=col-md-2><p class=input-group><input name=From class=form-control placeholder=From uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.From is-open=fromOpened data-ng-change=filterChanged(); required> <span class=input-group-btn><button type=button class="btn btn-default" ng-click="stopPropagation($event); fromOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p></div><div class=col-md-2><p class=input-group><input name=To class=form-control placeholder=To uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.To is-open=toOpened data-ng-change=filterChanged(); required> <span class=input-group-btn><button type=button class="btn btn-default" ng-click="stopPropagation($event); toOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p></div><div class=col-md-3><select class=form-control placeholder="Customer Type" data-ng-model=filter.IdCustomerType data-ng-options="item.Key as item.Text for item in customerTypes" data-ng-change=filterChanged();></select></div><div class=col-md-3><select class=form-control placeholder="Order Type" data-ng-model=filter.IdOrderType data-ng-options="item.Key as item.Text for item in orderTypes" data-ng-change=filterChanged();></select></div></div><div class="row form-group"><div data-ng-if="filter.RegionType==1" class=col-md-2><input class=form-control placeholder=State/Province data-ng-model=filter.Region autocomplete=false data-ng-change=filterChanged(); required></div><div data-ng-if="filter.RegionType==2" class=col-md-2><input class=form-control placeholder=Zip data-ng-model=filter.Zip autocomplete=false data-ng-change=filterChanged(); required></div><div class=col-md-2><select class=form-control placeholder="Region Type" data-ng-model=filter.RegionType data-ng-options="item.Key as item.Text for item in regionTypes" data-ng-change=filterChanged();></select></div></div></fieldset></form><div class="row form-group"><div class="col-md-6 inline-form-group"><button class="btn btn-info" data-ng-click=filterItems(); type=button>Filter</button><div class=form-control-static><span data-ng-if=options.Total>Orders Total: <strong>{{items.length}}</strong></span> <span data-ng-if=options.Total>Sales Total: <strong>{{options.Total | currency}}</strong></span></div></div><div class=col-md-6><a target=_self class="btn btn-primary pull-right" data-ng-href={{options.exportUrl}}>Export</a></div></div><spinner-overlay data-loading=refreshTracker.active()><table id=data-grid data-ng-if=items class="table table-striped"><thead><tr><th>Order #</th><th>Order Date</th><th>Order Amount</th><th>State/Province</th><th>City</th><th>Zip</th><th>Customer #</th><th>Customer Last Name</th><th>Repeat</th></tr></thead><tbody><tr data-ng-repeat="item in items"><td><a ui-sref=index.oneCol.orderDetail({id:item.Id})>{{::item.Id}}</a></td><td>{{::item.DateCreated | date:"MM/dd/yy"}}<br>{{::item.DateCreated | date:"h:mm a"}}</td><td>{{::item.Total | currency}}</td><td>{{::item.Region}}</td><td>{{::item.City}}</td><td>{{::item.Zip}}</td><td><a ui-sref=index.oneCol.customerDetail({id:item.IdCustomer})>{{::item.IdCustomer}}</a></td><td>{{::item.CustomerLastName}}</td><td>{{::item.CustomerOrdersCount}}</td></tr></tbody></table></spinner-overlay><uib-pagination boundary-links=true total-items=options.TotalItems items-per-page=filter.Paging.PageItemCount data-ng-model=filter.Paging.PageIndex previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; data-ng-change="pageChanged();scrollTo(\'data-grid\');"></uib-pagination></div></div>'),a.put("app/modules/order/partials/ordersSummarySalesReport.html",'<div class="container-fluid orders-summary-sales-report"><div class=well><span class=legend>Summary Sales Report</span><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.form.submitted}" novalidate><fieldset><div class="row form-group"><div class=col-md-3><strong>Order Date</strong></div></div><div class="row form-group"><div class=col-md-3><p class=input-group><input class=form-control name=From data-ng-change=filterChanged(); uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.From is-open=fromOpened ng-required="true"> <span class=input-group-btn><button type=button class="btn btn-default" ng-click="stopPropagation($event); fromOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.form.submitted && forms.form.From.$invalid"><small class=error ng-show=forms.form.From.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","From")}}</small></div></div><div class=col-md-3><p class=input-group><input class=form-control name=To data-ng-change=filterChanged(); uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.To is-open=toOpened ng-required="true"> <span class=input-group-btn><button type=button class="btn btn-default" ng-click="stopPropagation($event); toOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.form.submitted && forms.form.To.$invalid"><small class=error ng-show=forms.form.To.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","To")}}</small></div></div></div><div class="row form-group"><div class=col-md-3><strong>Ship Date</strong></div></div><div class="row form-group"><div class=col-md-3><p class=input-group><input class=form-control name=ShipFrom placeholder=From data-ng-change=filterChanged(); uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.ShipFrom is-open="shipFromOpened"> <span class=input-group-btn><button type=button class="btn btn-default" ng-click="stopPropagation($event); shipFromOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p></div><div class=col-md-3><p class=input-group><input class=form-control name=ShipTo placeholder=To data-ng-change=filterChanged(); uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.ShipTo is-open="shipToOpened"> <span class=input-group-btn><button type=button class="btn btn-default" ng-click="stopPropagation($event); shipToOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p></div></div><div class="row form-group"><div class=col-md-3><strong>Inception Date</strong></div></div><div class="row form-group"><div class=col-md-3><p class=input-group><input class=form-control name=FirstOrderFrom placeholder=From data-ng-change=filterChanged(); uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.FirstOrderFrom is-open="firstOrderFromOpened"> <span class=input-group-btn><button type=button class="btn btn-default" ng-click="stopPropagation($event); firstOrderFromOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p></div><div class=col-md-3><p class=input-group><input class=form-control name=FirstOrderTo placeholder=To data-ng-change=filterChanged(); uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.FirstOrderTo is-open="firstOrderToOpened"> <span class=input-group-btn><button type=button class="btn btn-default" ng-click="stopPropagation($event); firstOrderToOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p></div></div><hr><div class="row form-group"><div class=col-md-2><input name=FromCount class=form-control placeholder="With Repeat Orders From" data-ng-change=filterChanged(); data-ng-model=filter.FromCount numbers-only autocomplete=off><div class=error-container ng-show="forms.form.submitted && forms.form.IdCustomer.$invalid"></div></div><div class=col-md-2><input name=ToCount class=form-control placeholder="With Repeat Orders To" data-ng-change=filterChanged(); data-ng-model=filter.ToCount numbers-only autocomplete=off><div class=error-container ng-show="forms.form.submitted && forms.form.ToCount.$invalid"></div></div><div class=col-md-2><select class=form-control name=IdCustomerSource data-ng-change=idCustomerSourceChanged(); data-ng-model=filter.IdCustomerSource ng-options="item.Key as item.Text for item in orderSources"></select></div><div class=col-md-2><select class=form-control name=CustomerSourceDetails data-ng-change=filterChanged(); data-ng-show="filter.IdCustomerSource==4" data-ng-model=filter.CustomerSourceDetails ng-options="item.Text as item.Text for item in orderSourcesCelebrityHealthAdvocate"></select></div></div><div class="row form-group"><div class=col-md-2><input name=KeyCode class=form-control placeholder="Key Code" data-ng-change=filterChanged(); data-ng-model=filter.KeyCode autocomplete=off><div class=error-container ng-show="forms.form.submitted && forms.form.KeyCode.$invalid"></div></div><div class=col-md-2><input name=IdCustomer class=form-control placeholder="Customer #" data-ng-change=filterChanged(); data-ng-model=filter.IdCustomer numbers-only autocomplete=off data-ng-minlength=3><div class=error-container ng-show="forms.form.submitted && forms.form.IdCustomer.$invalid"><small class=error ng-show=forms.form.IdCustomer.$error.minlength>{{getValidationMessage("{0} should have at least 3 symbols","Customer #")}}</small></div></div><div class=col-md-2><select class=form-control name=IdCustomerType data-ng-change=filterChanged(); data-ng-model=filter.IdCustomerType ng-options="item.Key as item.Text for item in customerTypes"></select></div><div class=col-md-2><input name=DiscountCode class=form-control placeholder="Discount Code" data-ng-change=filterChanged(); data-ng-model=filter.DiscountCode autocomplete=off><div class=error-container ng-show="forms.form.submitted && forms.form.DiscountCode.$invalid"></div></div><div class=col-md-2><div class=checkbox><label><input type=checkbox name=IsAffiliate data-ng-model="filter.IsAffiliate"> Affiliate Sales</label></div></div></div><div class="row form-group"><div class=col-md-12><button class="btn btn-info" data-ng-click=filterItems(); type=button>Filter</button></div></div></fieldset></form><spinner-overlay data-loading=refreshTracker.active()><span class=legend>Order Types Summary</span><table class="table table-striped order-types-total"><thead><tr><th>Type</th><th>Transactions</th><th>Amount</th><th>Average</th></tr></thead><tbody><tr data-ng-repeat="item in statisticItems"><td>{{item.Name}}</td><td>{{item.Count}}</td><td>{{item.Total | currency}}</td><td>{{item.Average | currency}}</td></tr></tbody></table><div class=form-horizontal><div class="row form-group"><div class=col-md-12><a target=_self class="btn btn-primary pull-right" data-ng-href={{options.exportUrl}}>Export</a></div></div></div><div class=orders><table id=data-grid class="table table-striped order-statuses"><thead><tr><th>Order #</th><th class=status>Status</th><th>Customer</th><th>Company</th><th>Order Date</th><th>Products Total</th><th>Gross Total</th><th>Discount Code</th><th>Affiliate Id</th><th>Key Code</th><th>Heard of</th><th>Details</th><th>Repeat</th><th>Inception Date</th></tr></thead><tbody><tr data-ng-repeat="item in items"><td><a ui-sref="{{::item.IdObjectType==5 ? \'index.oneCol.orderReshipDetail({id: item.Id })\' : item.IdObjectType==6 ? \'index.oneCol.orderRefundDetail({id: item.Id })\' : \'index.oneCol.orderDetail({id: item.Id })\'}}">{{::item.Id}}</a></td><td><div data-ng-include="\'app/modules/order/partials/orderStatusSection.html\'"></div></td><td><a ui-sref="index.oneCol.customerDetail({id: item.IdCustomer})">{{::item.CustomerFirstName}} {{::item.CustomerLastName}}</a></td><td>{{::item.CustomerCompany}}</td><td>{{::item.DateCreated | date:"MM/dd/yy"}}<br>{{::item.DateCreated | date:"h:mm a"}}</td><td><span data-ng-if="::item.IdObjectType!=6">{{::item.ProductsSubtotal | currency}}</span> <span data-ng-if="::item.IdObjectType==6">({{Math.abs(item.ProductsSubtotal) | currency}})</span></td><td><span data-ng-if="::item.IdObjectType!=6">{{::item.Total | currency}}</span> <span data-ng-if="::item.IdObjectType==6">({{Math.abs(item.Total) | currency}})</span></td><td>{{::item.DiscountCode}}</td><td>{{::item.IdAffiliate}}</td><td>{{::item.KeyCode}}</td><td>{{::item.SourceName}}</td><td>{{::item.SourceDetails}}</td><td>{{::item.OrdersCount}}</td><td>{{::item.FirstOrderDate | date:"MM/dd/yy"}}<br>{{::item.FirstOrderDate | date:"h:mm a"}}</td></tr></tbody></table></div></spinner-overlay><uib-pagination boundary-links=true total-items=totalItems items-per-page=filter.Paging.PageItemCount data-ng-model=filter.Paging.PageIndex previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; data-ng-change="pageChanged();scrollTo(\'data-grid\');"></uib-pagination></div></div>'),
a.put("app/modules/order/partials/orderStatusSection.html","<div data-ng-if=::item.OrderStatus><span class=\"label font-default\" data-ng-class=\"::{'ban': item.OrderStatus==1, 'exclamation-triangle': item.OrderStatus==2, 'truck': item.OrderStatus==3, 'minus-circle': item.OrderStatus==4, 'check-circle': item.OrderStatus==5, 'calendar': item.OrderStatus==6, 'pause': item.OrderStatus==7}\">{{::getReferenceItem(ReferenceData.OrderStatuses, item.OrderStatus).Text}}</span></div><div class=margin-bottom-5px data-ng-if=\"::(!item.OrderStatus && item.POrderStatus)\"><span class=\"label font-default\" data-ng-class=\"::{'ban': item.POrderStatus==1, 'exclamation-triangle': item.POrderStatus==2, 'truck': item.POrderStatus==3, 'minus-circle': item.POrderStatus==4, 'check-circle': item.POrderStatus==5, 'calendar': item.POrderStatus==6, 'pause': item.POrderStatus==7}\">{{::getReferenceItem(ReferenceData.OrderStatuses, item.POrderStatus).Text}}</span> P</div><div data-ng-if=\"::(!item.OrderStatus && item.NPOrderStatus)\"><span class=\"label font-default\" data-ng-class=\"::{'ban': item.NPOrderStatus==1, 'exclamation-triangle': item.NPOrderStatus==2, 'truck': item.NPOrderStatus==3, 'minus-circle': item.NPOrderStatus==4, 'check-circle': item.NPOrderStatus==5, 'calendar': item.NPOrderStatus==6, 'pause': item.NPOrderStatus==7}\">{{::getReferenceItem(ReferenceData.OrderStatuses, item.NPOrderStatus).Text}}</span> NP</div>"),a.put("app/modules/order/partials/orderStatusUpdateForm.html",'<div class=container-fluid><div class=left-pane-controls><div class="well container-fluid"><div><button class="btn btn-success width-160px" ladda=editTracker.active() data-ng-click=save()>Save</button></div></div></div><div class=right-pane-main><div class=container-fluid><div class=row><div class="container container-left"><div class="well row"><spinner-overlay data-loading=refreshTracker.active()><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.form.submitted}" novalidate><fieldset><span class=legend>Change Order Status</span><div class=form-group><div class="col-md-12 error-container">*Note: If changing order status to PROCESSED you MUST go into the order and re-save it to ensure all calculations generate and save properly.</div></div><div class=form-group><label for=id class="col-md-3 control-label">Order #</label><div class=col-md-9><div class="input-group autocomplete"><input name=Id class=form-control placeholder="Order #" data-ng-model=order.Id required numbers-only typeahead-min-length=3 typeahead-wait-ms=200 uib-typeahead="item.Id as item.Id for item in getOrders($viewValue)" typeahead-loading=loadingOrders typeahead-on-select="idLoaded($item, $model, $label)" data-ng-change=idChanged() autocomplete=off data-ng-keypress="$event.keyCode==13 ? getOrderSettings($event) : null" data-ng-blur=lostFocus()> <span class=input-group-addon><i ng-show=loadingOrders class="glyphicon glyphicon-refresh"></i></span></div><div class=error-container ng-show="forms.form.submitted && forms.form.Id.$invalid"><small class=error ng-show=forms.form.Id.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Order #")}}</small> <small class=error ng-show=forms.form.Id.$error.server>{{serverMessages.GetMessage(\'Id\')}}</small></div></div></div><div data-ng-if=options.loadedId><div class=form-group><label class="col-md-3 control-label">Loaded Order #</label><div class="col-md-9 form-control-static"><span>{{options.loadedId}}</span></div></div><div data-ng-if=order.CurrentIdStatus class=form-group><label class="col-md-3 control-label">Current Status</label><div class="col-md-9 form-control-static"><span>{{getReferenceItem(orderStatuses, order.CurrentIdStatus).Text}}</span></div></div><div data-ng-if=order.CurrentIdPStatus class=form-group><label class="col-md-3 control-label">P Current Status</label><div class="col-md-9 form-control-static"><span>{{getReferenceItem(orderStatuses, order.CurrentIdPStatus).Text}}</span></div></div><div data-ng-if=order.CurrentIdNPStatus class=form-group><label class="col-md-3 control-label">NP Current Status</label><div class="col-md-9 form-control-static"><span>{{getReferenceItem(orderStatuses, order.CurrentIdNPStatus).Text}}</span></div></div><div data-ng-if=order.OrderPart class=form-group><label for=status class="col-md-3 control-label">Order Part</label><div class=col-md-9><select class=form-control name=OrderPart data-ng-model=order.OrderPart ng-options="item.Key as item.Text for item in orderParts"></select></div></div><div class=form-group><label for=status class="col-md-3 control-label">New Status</label><div class=col-md-9><select class=form-control name=Status data-ng-model=order.Status ng-options="item.Key as item.Text for item in orderStatuses"></select></div></div></div></fieldset></form></spinner-overlay></div></div></div></div></div></div>'),a.put("app/modules/order/partials/productQualitySalesReport.html",'<div class="container-fluid product-quality-issues-report"><div class=well><span class=legend>Product Quality Issues Report</span><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.form.submitted}" novalidate><fieldset><div class="row form-group"><div class=col-md-3><p class=input-group><input class=form-control name=From data-ng-change=filterChanged(); uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.From is-open=fromOpened ng-required="true"> <span class=input-group-btn><button type=button class="btn btn-default" ng-click="stopPropagation($event); fromOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.form.submitted && forms.form.From.$invalid"><small class=error ng-show=forms.form.From.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","From")}}</small></div></div><div class=col-md-3><p class=input-group><input class=form-control name=To data-ng-change=filterChanged(); uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.To is-open=toOpened ng-required="true"> <span class=input-group-btn><button type=button class="btn btn-default" ng-click="stopPropagation($event); toOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.form.submitted && forms.form.To.$invalid"><small class=error ng-show=forms.form.To.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","To")}}</small></div></div></div><div class="row form-group"><div class=col-md-12><button class="btn btn-info" data-ng-click=filterItems(); type=button>Filter</button></div></div></fieldset></form><spinner-overlay data-loading=refreshTracker.active()><table class="table table-striped"><thead><tr><th>SKU</th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'SalesPerIssue\')"><span>Sales per Issue</span> <span data-ng-if="filter.Sorting.Path == \'SalesPerIssue\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Sales\')"><span>Unit Sales</span> <span data-ng-if="filter.Sorting.Path == \'Sales\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Issues\')"><span>Issues</span> <span data-ng-if="filter.Sorting.Path == \'Issues\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th></tr></thead><tbody><tr data-ng-repeat="item in items"><td><a data-ng-click=openDetails(item.Code)>{{item.Code}}</a></td><td>{{item.SalesPerIssue}}</td><td>{{item.Sales}}</td><td>{{item.Issues}}</td></tr></tbody></table></spinner-overlay></div></div>'),a.put("app/modules/order/partials/productQualitySkusReport.html",'<div class="container-fluid shipped-order-listing-report"><div class=well><span class=legend>Shipped Order Listing</span><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.form.submitted}" novalidate><fieldset><div class="row form-group"><div class=col-md-3><p class=input-group><input class=form-control name=From uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.From is-open=fromOpened ng-required="true"> <span class=input-group-btn><button type=button class="btn btn-default" ng-click="stopPropagation($event); fromOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.form.submitted && forms.form.From.$invalid"><small class=error ng-show=forms.form.From.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","From")}}</small></div></div><div class=col-md-3><p class=input-group><input class=form-control name=To uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.To is-open=toOpened ng-required="true"> <span class=input-group-btn><button type=button class="btn btn-default" ng-click="stopPropagation($event); toOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.form.submitted && forms.form.To.$invalid"><small class=error ng-show=forms.form.To.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","To")}}</small></div></div><div class=col-md-3><div class="input-group autocomplete col-md-12"><input name=SkuCode class=form-control placeholder="Product SKU" data-ng-model=filter.SkuCode autocomplete=off typeahead-min-length=1 uib-typeahead="sku.Code as sku.Code for sku in getSKUsBySKU($viewValue)" typeahead-loading=loadingSKUsBySKU typeahead-wait-ms=200> <span class=input-group-addon><i ng-show=loadingSKUsBySKU class="glyphicon glyphicon-refresh"></i></span></div></div></div><div class="row form-group"><div class=col-md-12><button class="btn btn-info" data-ng-click=filterItems(); type=button>Filter</button></div></div></fieldset></form><spinner-overlay data-loading=refreshTracker.active()><div><table class="table table-striped"><thead><tr><th>Order #</th><th>Original Order #</th><th>Order Date</th><th>Customer Last Name</th><th>Comments</th></tr></thead><tbody><tr data-ng-repeat="item in items"><td><a ui-sref="{{::item.IdObjectType==5 ? \'index.oneCol.orderReshipDetail({id: item.Id })\' : item.IdObjectType==6 ? \'index.oneCol.orderRefundDetail({id: item.Id })\' : \'index.oneCol.orderDetail({id: item.Id })\'}}">{{::item.Id}}</a></td><td><a ui-sref="{{::item.OrderSourceIdObjectType==5 ? \'index.oneCol.orderReshipDetail({id: item.IdOrderSource })\' : item.OrderSourceIdObjectType==6 ? \'index.oneCol.orderRefundDetail({id: item.IdOrderSource })\' : \'index.oneCol.orderDetail({id: item.IdOrderSource })\'}}">{{::item.IdOrderSource}}</a></td><td>{{::item.DateCreated | date:"MM/dd/yy"}}<br>{{::item.DateCreated | date:"h:mm a"}}</td><td>{{::item.LastName}}</td><td>{{::item.OrderNotes}}</td></tr></tbody></table></div></spinner-overlay></div></div>'),a.put("app/modules/order/partials/sendOrderConfirmationPopup.html",'<div class=modal-header><h3 class=modal-title>Send Order Confirmation Email</h3></div><div class=modal-body><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.submitted}" novalidate><fieldset><div class=form-group><label class="col-md-3 control-label">Email</label><div class=col-md-9><input type=email name=Email class=form-control placeholder=Email data-ng-model=options.Email required><div class=error-container ng-show="forms.submitted && forms.form.Email.$invalid"><small class=error ng-show=forms.form.Email.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Email")}}</small> <small class=error ng-show=forms.form.Email.$error.email>{{getValidationMessage("ValidationMessages.EmailFormat","GeneralFieldNames.Email")}}</small> <small class=error ng-show=forms.form.Email.$error.server>{{serverMessages.GetMessage(\'Email\')}}</small></div></div></div></fieldset></form></div><div class=modal-footer><button class="btn btn-success" ladda=refreshTracker.active() data-ng-click=save()>Send</button> <button class="btn btn-default" data-ng-click=cancel()>Cancel</button></div>'),a.put("app/modules/order/partials/sendOrderShippingConfirmationPopup.html",'<div class=modal-header><h3 class=modal-title>Send Order Shipping Confirmation Email</h3></div><div class=modal-body><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.submitted}" novalidate><fieldset><div class=form-group><label class="col-md-3 control-label">Email</label><div class=col-md-9><input type=email name=Email class=form-control placeholder=Email data-ng-model=options.Email required><div class=error-container ng-show="forms.submitted && forms.form.Email.$invalid"><small class=error ng-show=forms.form.Email.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Email")}}</small> <small class=error ng-show=forms.form.Email.$error.email>{{getValidationMessage("ValidationMessages.EmailFormat","GeneralFieldNames.Email")}}</small> <small class=error ng-show=forms.form.Email.$error.server>{{serverMessages.GetMessage(\'Email\')}}</small></div></div></div><div data-ng-if=!options.SendAll><div class=form-group><label for=sendp class="col-md-3 control-label">Send P side</label><div class=col-md-9><div class=checkbox><label><input id=sendp type=checkbox name=SendP data-ng-model=options.SendP data-ng-disabled="options.POrderStatus!=3"></label></div></div></div><div class=form-group><label for=sendnp class="col-md-3 control-label">Send NP side</label><div class=col-md-9><div class=checkbox><label><input id=sendnp type=checkbox name=SendNP data-ng-model=options.SendNP data-ng-disabled="options.NPOrderStatus!=3"></label></div></div></div></div></fieldset></form></div><div class=modal-footer><button class="btn btn-success" ladda=refreshTracker.active() data-ng-click=save()>Send</button> <button class="btn btn-default" data-ng-click=cancel()>Cancel</button></div>'),a.put("app/modules/order/partials/serviceCodeDetail.html",'<div class="container-fluid service-code-details"><div class=well><span class=legend>Service Code: {{getReferenceItem(ReferenceData.ServiceCodes, options.ServiceCode).Text}}</span><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.form.submitted}" novalidate><fieldset><div class="row form-group"><div class=col-md-3><p class=input-group><input class=form-control name=From data-ng-change=filterChanged(); uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.From is-open=fromOpened ng-required="true"> <span class=input-group-btn><button type=button class="btn btn-default" ng-disabled=false ng-click="stopPropagation($event); fromOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.form.submitted && forms.form.From.$invalid"><small class=error ng-show=forms.form.From.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","From")}}</small></div></div><div class=col-md-3><p class=input-group><input class=form-control name=To data-ng-change=filterChanged(); uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.To is-open=toOpened ng-required="true"> <span class=input-group-btn><button type=button class="btn btn-default" ng-disabled=false ng-click="stopPropagation($event); toOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.form.submitted && forms.form.To.$invalid"><small class=error ng-show=forms.form.To.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","To")}}</small></div></div><div class=col-md-4><button class="btn btn-info" data-ng-click=filterItems(); type=button>Filter</button></div></div></fieldset></form><span class=legend>New Service Code</span><form class=form-horizontal name=forms.newCode data-ng-submit=save() data-ng-class="{submitted: forms.newCode.submitted}" novalidate><fieldset><div class="row form-group"><div class=col-md-3><select class=form-control name=NewServiceCode placeholder="New Service Code" data-ng-required=true data-ng-model=options.NewServiceCode data-ng-options="item.Key as item.Text for item in ReferenceData.ServiceCodes"></select><div class=error-container ng-show="forms.newCode.submitted && forms.newCode.NewServiceCode.$invalid"><small class=error ng-show=forms.newCode.NewServiceCode.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","New Service Code")}}</small></div></div><div class=col-md-4><button class="btn btn-info" data-ng-click=reassignItems(); type=button>Reassign</button></div></div></fieldset></form><span class=legend>Refunds</span><div class="row form-group"><div class=col-md-12><a target=_self class="btn btn-primary pull-right" data-ng-href={{options.refundExportUrl}}>Export</a></div></div><spinner-overlay data-loading=refreshTracker.active()><table id=data-grid-refunds class="table table-striped table-hover margin-bottom-30px"><thead><tr><th>Order Number</th><th>Order Date</th><th>Original Order Number</th><th>Amount</th><th>Issues Sku</th><th>Comments</th></tr></thead><tbody><tr data-ng-repeat="item in refunds"><td><div class="checkbox margin-top-0px"><label><input data-ng-model=item.Assign type=checkbox> <a ui-sref="index.oneCol.orderRefundDetail({id: item.Id })">{{::item.Id}}</a></label></div></td><td>{{::item.DateCreated | date:"MM/dd/yy"}}</td><td><a data-ng-if=item.IdOrderSource ui-sref="index.oneCol.orderDetail({id: item.IdOrderSource })">{{::item.IdOrderSource}}</a></td><td data-ng-if="item.Total>=0">{{::item.Total | currency}}</td><td data-ng-if="item.Total<0">({{::Math.abs(item.Total) | currency}})</td><td><span data-ng-repeat="code in item.SkuCodes">{{code}} <span data-ng-if=!$last>,</span></span></td><td>{{::item.OrderNotes}}</td></tr></tbody></table></spinner-overlay><uib-pagination boundary-links=true total-items=totalRefundItems items-per-page=RefundPaging.PageItemCount data-ng-model=RefundPaging.PageIndex previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; data-ng-change="refreshRefunds();scrollTo(\'data-grid-refunds\');"></uib-pagination><span class=legend>Reships</span><div class="row form-group"><div class=col-md-12><a target=_self class="btn btn-primary pull-right" data-ng-href={{options.reshipExportUrl}}>Export</a></div></div><spinner-overlay data-loading=refreshTracker.active()><table id=data-grid-reships class="table table-striped table-hover margin-bottom-30px"><thead><tr><th>Order Number</th><th>Order Date</th><th>Original Order Number</th><th>Ship Date</th><th>Warehouse</th><th>Dest. State</th><th>Carrier</th><th>Ship Service</th><th>Amount</th><th>Issues Sku</th><th>Comments</th></tr></thead><tbody><tr data-ng-repeat="item in reships"><td><div class="checkbox margin-top-0px"><label><input data-ng-model=item.Assign type=checkbox> <a ui-sref="index.oneCol.orderReshipDetail({id: item.Id })">{{::item.Id}}</a></label></div></td><td>{{::item.DateCreated | date:"MM/dd/yy"}}</td><td><a data-ng-if=item.IdOrderSource ui-sref="index.oneCol.orderDetail({id: item.IdOrderSource })">{{::item.IdOrderSource}}</a></td><td><span data-ng-if=::item.ShipDate>{{::item.ShipDate | date:"MM/dd/yy"}}</span><div data-ng-if="::(!item.ShipDate && (item.PShipDate || item.NPShipDate))"><span data-ng-if=::item.PShipDate>{{::item.PShipDate | date:"MM/dd/yy"}} - P</span><br><span data-ng-if=::item.NPShipDate>{{::item.NPShipDate | date:"MM/dd/yy"}} - NP</span></div></td><td><span data-ng-if=::item.Warehouse>{{::item.Warehouse}}</span><div data-ng-if="::(!item.Warehouse && (item.PWarehouse || item.NPWarehouse))"><span data-ng-if=::item.PWarehouse>{{::item.PWarehouse}} - P</span><br><span data-ng-if=::item.NPWarehouse>{{::item.NPWarehouse}} - NP</span></div></td><td>{{::item.ShippingStateCode}}</td><td><span data-ng-if=::item.Carrier>{{::item.Carrier}}</span><div data-ng-if="::(!item.Carrier && (item.PCarrier || item.NPCarrier))"><span data-ng-if=::item.PCarrier>{{::item.PCarrier}} - P</span><br><span data-ng-if=::item.NPCarrier>{{::item.NPCarrier}} - NP</span></div></td><td><span data-ng-if=::item.ShipService>{{::item.ShipService}}</span><div data-ng-if="::(!item.ShipService && (item.PShipService || item.NPShipService))"><span data-ng-if=::item.PShipService>{{::item.PShipService}} - P</span><br><span data-ng-if=::item.NPShipService>{{::item.NPShipService}} - NP</span></div></td><td data-ng-if="item.Total>=0">{{::item.Total | currency}}</td><td data-ng-if="item.Total<0">({{::Math.abs(item.Total) | currency}})</td><td><span data-ng-repeat="code in item.SkuCodes">{{code}} <span data-ng-if=!$last>,</span></span></td><td>{{::item.OrderNotes}}</td></tr></tbody></table></spinner-overlay><uib-pagination boundary-links=true total-items=totalReshipItems items-per-page=ReshipPaging.PageItemCount data-ng-model=ReshipPaging.PageIndex previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; data-ng-change="refreshReships();scrollTo(\'data-grid-reships\');"></uib-pagination></div></div>'),a.put("app/modules/order/partials/serviceCodesReport.html",'<div class="container-fluid service-codes-report"><div class=well><span class=legend>Service Codes Report</span><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.form.submitted}" novalidate><fieldset><div class="row form-group"><div class=col-md-3><p class=input-group><input class=form-control name=From uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.From is-open=fromOpened ng-required="true"> <span class=input-group-btn><button type=button class="btn btn-default" ng-disabled=false ng-click="stopPropagation($event); fromOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.form.submitted && forms.form.From.$invalid"><small class=error ng-show=forms.form.From.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","From")}}</small></div></div><div class=col-md-3><p class=input-group><input class=form-control uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.To is-open=toOpened ng-required="true"> <span class=input-group-btn><button type=button class="btn btn-default" ng-disabled=false ng-click="stopPropagation($event); toOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.form.submitted && forms.form.To.$invalid"><small class=error ng-show=forms.form.To.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","To")}}</small></div></div></div><div class="row form-group"><div class=col-md-4><button class="btn btn-info" data-ng-click=filterItems(); type=button>Filter</button></div></div></fieldset></form><hr><spinner-overlay data-loading=refreshTracker.active()><table class="table table-striped table-hover margin-bottom-30px"><thead><tr><th class=name>Service Code</th><th>Reships</th><th>Refunds</th><th>Returns</th><th>Total</th><th>CS Rate</th></tr></thead><tbody><tr data-ng-repeat="item in report.Items"><td><a data-ng-if=::item.Id data-ng-click=goToDetails(item.Id)>{{::item.Name}}</a> <span data-ng-if=::!item.Id>{{::item.Name}}</span></td><td>{{::item.ReshipsCount}}</td><td>{{::item.RefundsCount}}</td><td>{{::item.ReturnsCount}}</td><td>{{::item.TotalCount}}</td><td>{{::item.CountPercent}} %</td></tr><tr><td class=name><span class=pull-right>Total All Orders</span></td><td></td><td></td><td></td><td>{{report.OrdersCount}}</td><td></td></tr></tbody></table><table class="table table-striped table-hover margin-bottom-30px"><thead><tr><th class=name>Service Code</th><th>Reships</th><th>Refunds</th><th>Returns</th><th>Total</th><th>CS Rate</th></tr></thead><tbody><tr data-ng-repeat="item in report.Items"><td><a data-ng-if=::item.Id data-ng-click=goToDetails(item.Id)>{{::item.Name}}</a> <span data-ng-if=::!item.Id>{{::item.Name}}</span></td><td><span data-ng-if="::item.ReshipsAmount>=0">{{::item.ReshipsAmount | currency}}</span> <span data-ng-if="::item.ReshipsAmount<0">({{item.AbsReshipsAmount | currency}})</span></td><td><span data-ng-if="::item.RefundsAmount>=0">{{::item.RefundsAmount | currency}}</span> <span data-ng-if="::item.RefundsAmount<0">({{item.AbsRefundsAmount | currency}})</span></td><td><span data-ng-if="::item.ReturnsAmount>=0">{{::item.ReturnsAmount | currency}}</span> <span data-ng-if="::item.ReturnsAmount<0">({{item.AbsReturnsAmount | currency}})</span></td><td><span data-ng-if="::item.TotalAmount>=0">{{::item.TotalAmount | currency}}</span> <span data-ng-if="::item.TotalAmount<0">({{item.AbsTotalAmount | currency}})</span></td><td>{{::item.AmountPercent}} %</td></tr><tr><td><span class=pull-right>Total Sales</span></td><td></td><td></td><td></td><td>{{report.OrdersAmount | currency}}</td><td></td></tr></tbody></table></spinner-overlay></div></div>'),a.put("app/modules/order/partials/shippedViaDetailsReport.html",'<div class="container-fluid shipped-order-listing-report"><div class=well><span class=legend>Shipped Order Listing</span><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.form.submitted}" novalidate><fieldset><div class="row form-group"><div class=col-md-3><p class=input-group><input class=form-control name=From data-ng-change=filterChanged(); uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.From is-open=fromOpened ng-required="true"> <span class=input-group-btn><button type=button class="btn btn-default" ng-click="stopPropagation($event); fromOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.form.submitted && forms.form.From.$invalid"><small class=error ng-show=forms.form.From.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","From")}}</small></div></div><div class=col-md-3><p class=input-group><input class=form-control name=To data-ng-change=filterChanged(); uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.To is-open=toOpened ng-required="true"> <span class=input-group-btn><button type=button class="btn btn-default" ng-click="stopPropagation($event); toOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.form.submitted && forms.form.To.$invalid"><small class=error ng-show=forms.form.To.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","To")}}</small></div></div><div class=col-md-3><select class=form-control name=IdState data-ng-change=filterChanged(); data-ng-model=filter.IdState ng-options="item.Id as item.StateName for item in states"></select></div><div class=col-md-3><select class=form-control name=IdServiceCode data-ng-change=filterChanged(); data-ng-model=filter.IdServiceCode ng-options="item.Key as item.Text for item in serviceCodes"></select></div></div><div class="row form-group"><div class=col-md-3><select class=form-control name=Carrier data-ng-change=filterChanged(); data-ng-model=filter.Carrier ng-options="item.Key as item.Text for item in carriers"></select></div><div class=col-md-3><select class=form-control name=IdShipService data-ng-change=filterChanged(); data-ng-model=filter.IdShipService ng-options="item.Key as item.Text for item in shipMethodTypes"></select></div><div class=col-md-3><select class=form-control name=IdWarehouse data-ng-change=filterChanged(); data-ng-model=filter.IdWarehouse ng-options="item.Key as item.Text for item in warehouses"></select></div></div><div class="row form-group"><div class=col-md-12><button class="btn btn-info" data-ng-click=filterItems(); type=button>Filter</button> <a target=_self class="btn btn-primary pull-right" data-ng-href={{options.exportUrl}}>Export</a></div></div></fieldset></form><spinner-overlay data-loading=refreshTracker.active()><div><table id=data-grid class="table table-striped"><thead><tr><th>Order #</th><th>Ship Date</th><th>Order Date</th><th>Carrier</th><th>Service</th><th>Warehouse</th><th>Dest. State</th><th>Service Code</th><th>Customer #</th><th>Customer Name</th><th>Total</th></tr></thead><tbody><tr data-ng-repeat="item in items"><td><a ui-sref="{{::item.IdObjectType==5 ? \'index.oneCol.orderReshipDetail({id: item.Id })\' : item.IdObjectType==6 ? \'index.oneCol.orderRefundDetail({id: item.Id })\' : \'index.oneCol.orderDetail({id: item.Id })\'}}">{{::item.Id}}</a></td><td>{{::item.ShippedDate | date:"MM/dd/yy"}}<br>{{::item.ShippedDate | date:"h:mm a"}}</td><td>{{::item.DateCreated | date:"MM/dd/yy"}}<br>{{::item.DateCreated | date:"h:mm a"}}</td><td>{{::item.ShipMethodFreightCarrier}}</td><td>{{::item.ShipMethodFreightServiceName}}</td><td>{{::item.WarehouseName}}</td><td>{{::item.StateCode}}</td><td>{{::item.ServiceCodeName}}</td><td><a ui-sref="index.oneCol.customerDetail({id: {{::item.IdCustomer}}})">{{::item.IdCustomer}}</a></td><td><a ui-sref="index.oneCol.customerDetail({id: {{::item.IdCustomer}}})">{{::item.FirstName}} {{::item.LastName}}</a></td><td>{{::item.Total | currency}}</td></tr></tbody></table></div></spinner-overlay><uib-pagination boundary-links=true total-items=totalItems items-per-page=filter.Paging.PageItemCount data-ng-model=filter.Paging.PageIndex previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; data-ng-change="pageChanged();scrollTo(\'data-grid\');"></uib-pagination></div></div>'),a.put("app/modules/order/partials/shippedViaSummaryReport.html",'<div class="container-fluid shipped-via-summary-report"><div class=well><span class=legend>Shipped Via Report</span><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.form.submitted}" novalidate><fieldset><div class="row form-group"><div class=col-md-3><p class=input-group><input class=form-control name=From data-ng-change=filterChanged(); uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.From is-open=fromOpened ng-required="true"> <span class=input-group-btn><button type=button class="btn btn-default" ng-click="stopPropagation($event); fromOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.form.submitted && forms.form.From.$invalid"><small class=error ng-show=forms.form.From.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","From")}}</small></div></div><div class=col-md-3><p class=input-group><input class=form-control name=To data-ng-change=filterChanged(); uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.To is-open=toOpened ng-required="true"> <span class=input-group-btn><button type=button class="btn btn-default" ng-click="stopPropagation($event); toOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.form.submitted && forms.form.To.$invalid"><small class=error ng-show=forms.form.To.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","To")}}</small></div></div><div class=col-md-3><select class=form-control name=IdState data-ng-model=filter.IdState ng-options="item.Id as item.StateName for item in states"></select></div><div class=col-md-3><select class=form-control name=IdServiceCode data-ng-model=filter.IdServiceCode ng-options="item.Key as item.Text for item in serviceCodes"></select></div></div><div class="row form-group"><div class=col-md-12><button class="btn btn-info" data-ng-click=filterItems(); type=button>Filter</button></div></div></fieldset></form><spinner-overlay data-loading=refreshTracker.active()><div data-ng-repeat="warehouses in report.Warehouses"><span class=legend>{{warehouses.WarehouseName}}</span><table class="table table-striped"><thead><tr><th></th><th data-ng-repeat="carrier in warehouses.ShipMethods[0].Carriers">{{carrier.Carrier}}</th></tr></thead><tbody><tr data-ng-repeat="shipMethod in warehouses.ShipMethods"><td>{{shipMethod.ShipMethodTypeName}}</td><td data-ng-repeat="carrier in shipMethod.Carriers"><a data-ng-click="openDetails(warehouses.Warehouse, shipMethod.ShipMethodType, carrier.Carrier)">{{carrier.Count}}</a></td></tr></tbody></table></div></spinner-overlay></div></div>'),
a.put("app/modules/order/partials/skuAddressReport.html",'<div class="container-fluid sku-address-report"><div class=well><span class=legend>Order SKU and Address Report</span><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.form.submitted}" novalidate><fieldset><div class="row form-group"><div class=col-md-3><p class=input-group><input class=form-control name=From data-ng-change=filterChanged(); uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.From is-open=fromOpened ng-required="true"> <span class=input-group-btn><button type=button class="btn btn-default" ng-click="stopPropagation($event); fromOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.form.submitted && forms.form.From.$invalid"><small class=error ng-show=forms.form.From.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","From")}}</small></div></div><div class=col-md-3><p class=input-group><input class=form-control name=To data-ng-change=filterChanged(); uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.To is-open=toOpened ng-required="true"> <span class=input-group-btn><button type=button class="btn btn-default" ng-click="stopPropagation($event); toOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.form.submitted && forms.form.To.$invalid"><small class=error ng-show=forms.form.To.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","To")}}</small></div></div></div><div class="row form-group"><div class=col-md-3><select class=form-control name=IdCustomerType data-ng-change=filterChanged(); data-ng-model=filter.IdCustomerType ng-options="item.Key as item.Text for item in customerTypes"></select></div><div class=col-md-3><div class="input-group autocomplete col-md-12"><input name=SKU class=form-control placeholder=SKU data-ng-model=filter.SkuCode autocomplete=off typeahead-min-length=1 uib-typeahead="item.Code as item.Code for item in getSKUsBySKU($viewValue)" typeahead-loading=loadingSKUsBySKU typeahead-wait-ms=200 data-ng-change=filterChanged();> <span class=input-group-addon><i ng-show=loadingSKUsBySKU class="glyphicon glyphicon-refresh"></i></span></div></div><div class=col-md-3><div class="input-group autocomplete col-md-12"><input data-ng-disabled=filter.WithoutDiscount name=DiscountCode class=form-control placeholder="Discount Code" data-ng-model=filter.DiscountCode autocomplete=off typeahead-min-length=1 uib-typeahead="item.Code as item.Code for item in getDiscounts($viewValue)" typeahead-loading=loadingDiscountCodesByCode typeahead-wait-ms=200 data-ng-change=filterChanged();> <span class=input-group-addon><i ng-show=loadingDiscountCodesByCode class="glyphicon glyphicon-refresh"></i></span></div></div><div class=col-md-2><div class=checkbox><label><input type=checkbox name=WithoutDiscount data-ng-model=filter.WithoutDiscount data-ng-change="filterChanged();"> No discount</label></div></div></div><div class="row form-group"><div class=col-md-12><button class="btn btn-info" data-ng-click=filterItems(); type=button>Filter</button> <a target=_self class="btn btn-primary pull-right" data-ng-href={{options.exportUrl}}>Export</a></div></div></fieldset></form><spinner-overlay data-loading=refreshTracker.active()><div><table id=data-grid class="table table-striped"><thead><tr><th>Order #</th><th>Order Date</th><th>SKU</th><th>Quantity</th><th>Bill to Name</th><th>Bill to Company</th><th>Bill to Address1</th><th>Bill to Address2</th><th>Bill to City</th><th>Bill to State</th><th>Bill to Zip</th><th>Bill to Country</th><th>Bill to Phone</th><th>Customer #</th><th>Discount Code</th><th>Channel</th><th>Unit Price</th><th>Extended Price (Qty x Unit Price)</th><th>DNM flag</th><th>Ship to Name</th><th>Ship to Company</th><th>Ship to Address1</th><th>Ship to Address2</th><th>Ship to City</th><th>Ship to State</th><th>Ship to Zip</th><th>Ship to Country</th><th>Ship to Phone</th></tr></thead><tbody><tr data-ng-repeat="item in items"><td><a ui-sref="{{::item.IdObjectType==5 ? \'index.oneCol.orderReshipDetail({id: item.IdOrder })\' : item.IdObjectType==6 ? \'index.oneCol.orderRefundDetail({id: item.IdOrder })\' : \'index.oneCol.orderDetail({id: item.IdOrder })\'}}">{{::item.IdOrder}}</a></td><td>{{::item.DateCreated | date:"MM/dd/yy"}}<br>{{::item.DateCreated | date:"h:mm a"}}</td><td>{{::item.SkuCode}}</td><td>{{::item.Quantity}}</td><td>{{::item.BillingFirstName}} {{::item.BillingLastName}}</td><td>{{::item.BillingCompany}}</td><td>{{::item.BillingAddress1}}</td><td>{{::item.BillingAddress2}}</td><td>{{::item.BillingCity}}</td><td>{{::item.BillingStateCode}}</td><td>{{::item.BillingZip}}</td><td>{{::item.BillingCountyCode}}</td><td>{{::item.BillingPhone}}</td><td><a ui-sref="index.oneCol.customerDetail({id: {{::item.IdCustomer}}})">{{::item.IdCustomer}}</a></td><td>{{::item.DiscountCode}}</td><td>{{::item.Source}}</td><td>{{::item.Price | currency}}</td><td>{{::item.Amount | currency}}</td><td>{{::item.DoNotMail}}</td><td>{{::item.ShippingFirstName}} {{::item.BillingLastName}}</td><td>{{::item.ShippingCompany}}</td><td>{{::item.ShippingAddress1}}</td><td>{{::item.ShippingAddress2}}</td><td>{{::item.ShippingCity}}</td><td>{{::item.ShippingStateCode}}</td><td>{{::item.ShippingZip}}</td><td>{{::item.ShippingCountyCode}}</td><td>{{::item.ShippingPhone}}</td></tr></tbody></table></div></spinner-overlay><uib-pagination boundary-links=true total-items=totalItems items-per-page=filter.Paging.PageItemCount data-ng-model=filter.Paging.PageIndex previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; data-ng-change="pageChanged();scrollTo(\'data-grid\');"></uib-pagination></div></div>'),a.put("app/modules/order/partials/transactionsAndRefundsReport.html",'<div class="container-fluid transactions-refunds-report"><div class=well><span class=legend>Transaction & Refund Report</span><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.form.submitted}" novalidate><fieldset><div class="row form-group"><div class=col-md-3><p class=input-group><input class=form-control name=From data-ng-change=filterChanged(); uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.From is-open=fromOpened ng-required="true"> <span class=input-group-btn><button type=button class="btn btn-default" ng-click="stopPropagation($event); fromOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.form.submitted && forms.form.From.$invalid"><small class=error ng-show=forms.form.From.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","From")}}</small></div></div><div class=col-md-3><p class=input-group><input class=form-control name=To data-ng-change=filterChanged(); uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.To is-open=toOpened ng-required="true"> <span class=input-group-btn><button type=button class="btn btn-default" ng-click="stopPropagation($event); toOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.form.submitted && forms.form.To.$invalid"><small class=error ng-show=forms.form.To.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","To")}}</small></div></div></div><div class="row form-group"><div class=col-md-3><select class=form-control name=IdCustomerType data-ng-change=filterChanged(); data-ng-model=filter.IdCustomerType ng-options="item.Key as item.Text for item in customerTypes"></select></div><div class=col-md-3><select class=form-control name=IdServiceCode data-ng-change=filterChanged(); data-ng-model=filter.IdServiceCode ng-options="item.Key as item.Text for item in serviceCodes"></select></div></div><div class="row form-group"><div class=col-md-3><input name=IdCustomer class=form-control placeholder="Customer #" data-ng-change=filterChanged(); data-ng-model=filter.IdCustomer numbers-only autocomplete=off data-ng-minlength=3><div class=error-container ng-show="forms.form.submitted && forms.form.IdCustomer.$invalid"><small class=error ng-show=forms.form.IdCustomer.$error.minlength>{{getValidationMessage("{0} should have at least 3 symbols","Customer #")}}</small></div></div><div class=col-md-3><input name=CustomerFirstName class=form-control placeholder="Customer First Name" data-ng-change=filterChanged(); data-ng-model=filter.CustomerFirstName autocomplete=off data-ng-minlength=3><div class=error-container ng-show="forms.form.submitted && forms.form.CustomerFirstName.$invalid"><small class=error ng-show=forms.form.CustomerFirstName.$error.minlength>{{getValidationMessage("{0} should have at least 3 symbols","Customer First Name")}}</small></div></div><div class=col-md-3><input name=CustomerLastName class=form-control placeholder="Customer Last Name" data-ng-change=filterChanged(); data-ng-model=filter.CustomerLastName autocomplete=off data-ng-minlength=3><div class=error-container ng-show="forms.form.submitted && forms.form.CustomerLastName.$invalid"><small class=error ng-show=forms.form.CustomerLastName.$error.minlength>{{getValidationMessage("{0} should have at least 3 symbols","Customer Last Name")}}</small></div></div></div><div class="row form-group"><div class=col-md-3><input name=IdOrder class=form-control placeholder="Order #" data-ng-change=filterChanged(); data-ng-model=filter.IdOrder numbers-only autocomplete=off data-ng-minlength=3><div class=error-container ng-show="forms.form.submitted && forms.form.IdOrder.$invalid"><small class=error ng-show=forms.form.IdOrder.$error.minlength>{{getValidationMessage("{0} should have at least 3 symbols","Order #")}}</small></div></div><div class=col-md-3><select class=form-control name=IdOrderType data-ng-change=filterChanged(); data-ng-model=filter.IdOrderType ng-options="item.Key as item.Text for item in orderTypes"></select></div><div class=col-md-3><select class=form-control name=IdOrderStatus data-ng-change=filterChanged(); data-ng-model=filter.IdOrderStatus ng-options="item.Key as item.Text for item in orderStatuses"></select></div></div><div class="row form-group"><div class=col-md-12><button class="btn btn-info" data-ng-click=filterItems(); type=button>Filter</button> <a target=_self class="btn btn-primary pull-right" data-ng-href={{options.exportUrl}}>Export</a></div></div></fieldset></form><spinner-overlay data-loading=refreshTracker.active()><div class=orders><table id=data-grid class="table table-striped order-statuses"><thead><tr><th>Order #</th><th>Key</th><th class=status>Status</th><th>O Type</th><th>Redeem</th><th>SKU</th><th>Description</th><th>Quantity</th><th>Product Type</th><th>Customer</th><th>C Type</th><th>Payment</th><th>Price</th><th>Product %</th><th>Discount Type</th><th>Discount %</th><th>Discounted Subtotal</th><th>Override</th><th>Service Code</th><th>Return</th><th>Shipping</th><th>Tax</th><th>Total</th></tr></thead><tbody><tr data-ng-repeat="item in items"><td><a ui-sref="{{::item.IdObjectType==5 ? \'index.oneCol.orderReshipDetail({id: item.IdOrder })\' : item.IdObjectType==6 ? \'index.oneCol.orderRefundDetail({id: item.IdOrder })\' : \'index.oneCol.orderDetail({id: item.IdOrder })\'}}">{{::item.IdOrder}}</a></td><td>{{::item.Rank}}</td><td><div data-ng-include="\'app/modules/order/partials/orderStatusSection.html\'"></div></td><td><span class="label font-default" data-ng-class="::{\'label-retail\': (item.IdObjectType==1 || item.IdObjectType==7 ||item.IdObjectType==3 || item.IdObjectType==4), \'label-primary\':  item.IdObjectType==5, \'label-success\':  item.IdObjectType==6}">{{::getReferenceItem(ReferenceData.ShortOrderTypes, item.IdObjectType).Text}}</span></td><td>{{::getReferenceItem(ReferenceData.RefundRedeemOptions, item.RefundIdRedeemType).Text}}</td><td>{{::item.Code}}</td><td>{{::item.DisplayName}}</td><td>{{::item.OrderQuantity}}</td><td>{{getReferenceItem(ReferenceData.ShortProductTypes, item.ProductIdObjectType).Text}}</td><td><a ui-sref="index.oneCol.customerDetail({id: item.IdCustomer})">{{::item.CustomerFirstName}} {{::item.CustomerLastName}}</a></td><td><span data-ng-if="::item.CustomerIdObjectType == 1" class="label label-retail font-default">{{::getReferenceItem(ReferenceData.ShortCustomerTypes, item.CustomerIdObjectType).Text}}</span> <span data-ng-if="::item.CustomerIdObjectType == 2" class="label label-wholesale font-default">{{::getReferenceItem(ReferenceData.ShortCustomerTypes, item.CustomerIdObjectType).Text}}</span></td><td>{{::getReferenceItem(ReferenceData.ShortPaymentMethods, item.PaymentMethodIdObjectType).Text}}</td><td><span data-ng-if="::item.IdObjectType!=6">{{::item.Price | currency}}</span> <span data-ng-if="::item.IdObjectType==6">({{Math.abs(item.Price) | currency}})</span></td><td><span data-ng-if=::item.RefundProductPercent>{{::item.RefundProductPercent}}%</span></td><td>{{::getReferenceItem(ReferenceData.DiscountTypes, item.DiscountIdObjectType).Text}}</td><td><span data-ng-if=::item.DiscountPercent>{{::item.DiscountPercent}}%</span></td><td><span data-ng-if="::item.IdObjectType!=6">{{::item.DiscountedSubtotal | currency}}</span> <span data-ng-if="::item.IdObjectType==6">({{Math.abs(item.DiscountedSubtotal) | currency}})</span></td><td>no</td><td>{{getReferenceItem(ReferenceData.ServiceCodes, item.ServiceCode).Text}}</td><td>{{::item.ReturnAssociated}}</td><td>{{::item.ShippingTotal | currency}}</td><td>{{::item.TaxTotal | currency}}</td><td><span data-ng-if="::item.IdObjectType!=6">{{::item.Total | currency}}</span> <span data-ng-if="::item.IdObjectType==6">({{Math.abs(item.Total) | currency}})</span></td></tr></tbody></table></div></spinner-overlay><uib-pagination boundary-links=true total-items=totalItems items-per-page=filter.Paging.PageItemCount data-ng-model=filter.Paging.PageIndex previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; data-ng-change="pageChanged();scrollTo(\'data-grid\');"></uib-pagination></div></div>'),a.put("app/modules/order/partials/updateOrderBillingSection.html",'<div><div data-ng-if="currentCustomer.ApprovedPaymentMethods.indexOf(1) >= 0"><div class=form-group><label for=creditCardCustomerSaved class="col-md-3 control-label"></label><div class=col-md-9><div class=checkbox><label><input type=checkbox data-ng-disabled="paymentInfoTab.PaymentMethodType != 1 || orderEditDisabled" id=creditCardCustomerSaved data-ng-model=options.creditCardCustomerSaved data-ng-change=creditCardCustomerSavedChanged()> <strong>Customer Saved Credit Card</strong></label></div></div></div><div class=form-group data-ng-show="!order.CreditCard && paymentInfoTab.PaymentMethodType == 1" data-ng-if="currentCustomer.ApprovedPaymentMethods.indexOf(1) >= 0"><div class=col-md-3></div><div class=col-md-6><button class="btn btn-info" data-ng-click=setNewCreditCardOrder();>Add New Credit Card</button></div><div class=col-md-3></div></div><div class=form-group><div class="radio col-md-3"><label class=control-label><input type=radio data-ng-model=paymentInfoTab.PaymentMethodType value=1 id=creditCard data-ng-disabled=orderEditDisabled> Credit Card</label></div><div class=col-md-6><select class=form-control id=selectPaymentMethod data-ng-disabled="!options.creditCardCustomerSaved || paymentInfoTab.PaymentMethodType != 1 || !currentCustomer.CreditCards || currentCustomer.CreditCards.length == 0 || orderEditDisabled" data-ng-model=paymentInfoTab.CreditCardIndex data-ng-options="idx as (getCreditCardTypeName(creditCard.CardType) + \', ending in \' + getLast4(creditCard.CardNumber) + (creditCard.Default ? \' (Default)\' : \'\')) for (idx, creditCard) in currentCustomer.CreditCards"></select></div><div class=col-md-3></div></div></div><div class="form-group ng-scope" data-ng-if="currentCustomer.ApprovedPaymentMethods.indexOf(1) >= 0 && paymentInfoTab.PaymentMethodType==1"><div class=col-md-3></div><div class=col-md-9><strong>Credit card data is only validated when adding or replacing masked credit card data.</strong></div></div><div class=form-group data-ng-if="currentCustomer.ApprovedPaymentMethods.indexOf(2) >= 0"><div class=col-md-3><div class=radio><label class=control-label><input type=radio data-ng-model=paymentInfoTab.PaymentMethodType value=2 id=oac data-ng-disabled=orderEditDisabled> On Approved Credit</label></div></div><div class=col-md-6><div data-ng-if="paymentInfoTab.PaymentMethodType == 2 && currentCustomer.ApprovedPaymentMethods.length > 0 && !order.Oac"><button class="btn btn-info" data-ng-click=setNewOac();>Add New OAC</button></div></div></div><div class=form-group data-ng-if="currentCustomer.ApprovedPaymentMethods.indexOf(3) >= 0"><div class=col-md-3><div class=radio><label class=control-label><input type=radio data-ng-model=paymentInfoTab.PaymentMethodType value=3 id=check data-ng-disabled=orderEditDisabled> Check</label></div></div><div class=col-md-6><div data-ng-if="paymentInfoTab.PaymentMethodType == 3 && currentCustomer.ApprovedPaymentMethods.length > 0 && !order.Check"><button class="btn btn-info" data-ng-click=setNewCheck();>Add New Check</button></div></div></div><div class=form-group data-ng-if="currentCustomer.ApprovedPaymentMethods.indexOf(6) >= 0"><div class=col-md-3><div class=radio><label class=control-label><input type=radio data-ng-model=paymentInfoTab.PaymentMethodType value=6 id=wiretransfer data-ng-disabled=orderEditDisabled> Wire Transfer</label></div></div><div class=col-md-6><div data-ng-if="paymentInfoTab.PaymentMethodType == 6 && currentCustomer.ApprovedPaymentMethods.length > 0 && !order.WireTransfer"><button class="btn btn-info" data-ng-click=setNewWireTransfer();>Add New Wire Transfer</button></div></div></div><div class=form-group data-ng-if="currentCustomer.ApprovedPaymentMethods.indexOf(7) >= 0"><div class=col-md-3><div class=radio><label class=control-label><input type=radio data-ng-model=paymentInfoTab.PaymentMethodType value=7 id=marketing data-ng-disabled=orderEditDisabled> Marketing</label></div></div><div class=col-md-6><div data-ng-if="paymentInfoTab.PaymentMethodType == 7 && currentCustomer.ApprovedPaymentMethods.length > 0 && !order.Marketing"><button class="btn btn-info" data-ng-click=setNewMarketing();>Add New Marketing</button></div></div></div><div class=form-group data-ng-if="currentCustomer.ApprovedPaymentMethods.indexOf(8) >= 0"><div class=col-md-3><div class=radio><label><input type=radio data-ng-model=paymentInfoTab.PaymentMethodType value=8 id=vcwellness data-ng-disabled=orderEditDisabled> VC Wellness Employee Program</label></div></div><div class=col-md-6><div data-ng-if="paymentInfoTab.PaymentMethodType == 8 && currentCustomer.ApprovedPaymentMethods.length > 0 && !order.VCWellness"><button class="btn btn-info" data-ng-click=setNewVCWellness();>Add New VC Wellness Employee Program</button></div></div></div><div class=form-group data-ng-if="currentCustomer.ApprovedPaymentMethods.indexOf(4) >= 0"><div class=col-md-3><div class=radio><label class=control-label><input type=radio data-ng-model=paymentInfoTab.PaymentMethodType value=4 id=noCharge data-ng-disabled=orderEditDisabled> No Charge</label></div></div><div class=col-md-6><div data-ng-if="paymentInfoTab.PaymentMethodType == 4 && currentCustomer.ApprovedPaymentMethods.length > 0 && !order.NC"><button class="btn btn-info" data-ng-click=setNewNC();>Add New NC</button></div></div></div><hr><form class=form-horizontal name=forms.card data-ng-class="{submitted: forms.submitted[\'card\']}" novalidate unsaved-warning-form><fieldset><div data-ng-if="paymentInfoTab.PaymentMethodType == 1 && currentCustomer.ApprovedPaymentMethods.length > 0 && order.CreditCard"><div class=form-group><label for=NameOnCard class="col-md-3 control-label">Name on Card</label><div class=col-md-9><input class=form-control name=NameOnCard id=NameOnCard data-ng-model=order.CreditCard.NameOnCard placeholder="Name on Card" data-ng-required=!order.OnHold autocomplete=off data-ng-disabled=orderEditDisabled><div class=error-container ng-show="forms.submitted[\'card\'] && forms.card.NameOnCard.$invalid"><small class=error ng-show=forms.card.NameOnCard.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.NameOnCard")}}</small> <small class=error ng-show=forms.card.NameOnCard.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["GeneralFieldNames.NameOnCard", "100"])}}</small> <small class=error ng-show=forms.card.NameOnCard.$error.server>{{serverMessages.GetMessage(\'NameOnCard\', undefined, undefined, "card")}}</small></div></div></div><div class=form-group><label for=CardType class="col-md-3 control-label">Card Type</label><div class=col-md-9><select class=form-control id=CardType name=CardType data-ng-model=order.CreditCard.CardType ng-options="creditCardType.Key as creditCardType.Text for creditCardType in creditCardTypes" data-ng-required=!order.OnHold autocomplete=off data-ng-disabled=orderEditDisabled></select><div class=error-container ng-show="forms.submitted[\'card\'] && forms.card.CardType.$invalid"><small class=error ng-show=forms.card.CardType.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.CardType")}}</small> <small class=error ng-show=forms.card.CardType.$error.server>{{serverMessages.GetMessage(\'CardType\', undefined, undefined, "card")}}</small></div></div></div><div class=form-group><label for=CardNumber class="col-md-3 control-label">Card Number</label><div class=col-md-9><input class=form-control id=CardNumber name=CardNumber data-max-characters=16 data-ng-model=order.CreditCard.CardNumber placeholder="Card Number" data-ng-maxlength="{{paymentInfoTab.CreditCard.CardType == 3 ? \'15\' : \'16\'}}" data-ng-required=!order.OnHold autocomplete=off data-ng-disabled=orderEditDisabled><div class=error-container ng-show="forms.submitted[\'card\'] && forms.card.CardNumber.$invalid"><small class=error ng-show=forms.card.CardNumber.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.CardNumber")}}</small> <small class=error ng-show=forms.card.CardNumber.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["GeneralFieldNames.CardNumber", paymentInfoTab.CreditCard.CardType == 3 ? \'15\' : \'16\'])}}</small> <small class=error ng-show=forms.card.CardNumber.$error.server>{{serverMessages.GetMessage(\'CardNumber\', undefined, undefined, "card")}}</small></div></div></div><div class=form-group><label for=ExpirationDateMonth class="col-md-3 control-label">Expiration Date</label><div class=col-md-2><input class="form-control number" id=ExpirationDateMonth numbers-only data-max-characters=2 name=ExpirationDateMonth data-ng-model=order.CreditCard.ExpirationDateMonth min=1 max=12 ng-pattern="/^\\d{1,2}?$/" placeholder=Month data-ng-required=!order.OnHold autocomplete=off data-ng-disabled=orderEditDisabled><div class=error-container ng-show="forms.submitted[\'card\'] && forms.card.ExpirationDateMonth.$invalid"><small class=error ng-show=forms.card.ExpirationDateMonth.$error.pattern>{{getValidationMessage("ValidationMessages.MonthFormat","GeneralFieldNames.ExpirationDateMonth")}}</small> <small class=error ng-show=forms.card.ExpirationDateMonth.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.ExpirationDateMonth")}}</small> <small class=error ng-show=forms.card.ExpirationDateMonth.$error.server>{{serverMessages.GetMessage(\'ExpirationDateMonth\', undefined, undefined, "card")}}</small></div></div><div class=col-md-2><input class=form-control id=ExpirationDateYear numbers-only data-max-characters=2 name=ExpirationDateYear data-ng-model=order.CreditCard.ExpirationDateYear min=1 max=99 ng-pattern="/^\\d{1,2}?$/" placeholder=Year data-ng-required=!order.OnHold autocomplete=off data-ng-disabled=orderEditDisabled><div class=error-container ng-show="forms.submitted[\'card\'] && forms.card.ExpirationDateYear.$invalid"><small class=error ng-show=forms.card.ExpirationDateYear.$error.pattern>{{getValidationMessage("ValidationMessages.YearFormat","GeneralFieldNames.ExpirationDateYear")}}</small> <small class=error ng-show=forms.card.ExpirationDateYear.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.ExpirationDateYear")}}</small> <small class=error ng-show=forms.card.ExpirationDateYear.$error.server>{{serverMessages.GetMessage(\'ExpirationDateYear\', undefined, undefined, "card")}}</small></div></div></div><span class=legend>Billing Address</span><div class=form-group data-ng-if=!order.CreditCard.Id><div class=col-md-3></div><div class=col-md-3><button class="btn btn-info" data-ng-click=makeBillingAsShippingAddressOrder();>Copy Shipping</button></div></div><div class=form-group data-ng-if="order.CreditCard.Id && options.showCopyButtonsOnOrder"><div class=col-md-3></div><div class=col-md-3><button class="btn btn-info" data-ng-click=makeBillingAsShippingAddressOrder();>Copy Shipping</button></div></div><div data-ng-include="\'app/modules/customer/partials/address.html\'" data-ng-repeat="model in [buildOrderPaymentPartial(order.CreditCard, order.OnHold)]"></div></div></fieldset></form><form class=form-horizontal name=forms.oac data-ng-class="{submitted: forms.submitted[\'oac\']}" novalidate unsaved-warning-form><fieldset><div data-ng-if="paymentInfoTab.PaymentMethodType == 2 && currentCustomer.ApprovedPaymentMethods.length > 0 && order.Oac"><div class=form-group><label for=terms class="col-md-3 control-label">Terms:</label><div class=col-md-9><select class=form-control id=terms name=Terms data-ng-model=order.Oac.Terms data-ng-options="term.Key as term.Text for term in ReferenceData.OacTerms" data-ng-required=!order.OnHold data-ng-disabled=orderEditDisabled></select><div class=error-container ng-show="forms.submitted[\'oac\'] && forms.oac.Terms.$invalid"><small class=error ng-show=forms.oac.Terms.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Terms")}}</small> <small class=error ng-show=forms.oac.Terms.$error.server>{{serverMessages.GetMessage(\'Terms\', undefined, undefined, "oac")}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label" for=Fob>FOB:</label><div class=col-md-9><select class=form-control id=Fob name=Fob data-ng-model=order.Oac.Fob data-ng-options="fob.Key as fob.Text for fob in ReferenceData.OacFob" data-ng-required=!order.OnHold data-ng-disabled=orderEditDisabled></select><div class=error-container ng-show="forms.submitted[\'oac\'] && forms.oac.Fob.$invalid"><small class=error ng-show=forms.oac.Fob.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Fob")}}</small> <small class=error ng-show=forms.oac.Fob.$error.server>{{serverMessages.GetMessage(\'CardType\', undefined, undefined, "oac")}}</small></div></div></div><span class=legend>Billing Address</span><div class=form-group data-ng-if=options.showCopyButtonsOnOrder><div class=col-md-3></div><div class=col-md-3><button class="btn btn-info" data-ng-click=makeBillingAsShippingAddressOrder();>Copy Shipping</button></div></div><div data-ng-include="\'app/modules/customer/partials/address.html\'" data-ng-repeat="model in [buildOrderPaymentPartial(order.Oac, order.OnHold)]"></div></div></fieldset></form><form class=form-horizontal name=forms.check data-ng-class="{submitted: forms.submitted[\'check\']}" novalidate unsaved-warning-form><fieldset><div data-ng-if="paymentInfoTab.PaymentMethodType == 3 && currentCustomer.ApprovedPaymentMethods.length > 0 && order.Check"><div class=form-group><label for=checkNumber class="col-md-3 control-label">Check #</label><div class=col-md-9><input class=form-control name=CheckNumber id=checkNumber data-ng-model=order.Check.CheckNumber placeholder="Check #" data-ng-required=!order.OnHold data-ng-disabled=orderEditDisabled><div class=error-container ng-show="forms.submitted[\'check\'] && forms.check.CheckNumber.$invalid"><small class=error ng-show=forms.check.CheckNumber.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Check Number")}}</small> <small class=error ng-show=forms.check.CheckNumber.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["Check Number", "100"])}}</small> <small class=error ng-show=forms.check.CheckNumber.$error.server>{{serverMessages.GetMessage(\'CheckNumber\', undefined, undefined, "check")}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label"></label><div class=col-md-9><div class=checkbox><label><input type=checkbox id=PaidInFull data-ng-model=order.Check.PaidInFull data-ng-disabled=orderEditDisabled> <strong>Paid In Full - Taxes Included</strong></label></div></div></div><span class=legend>Billing Address</span><div class=form-group data-ng-if=options.showCopyButtonsOnOrder><div class=col-md-3></div><div class=col-md-3><button class="btn btn-info" data-ng-click=makeBillingAsShippingAddressOrder();>Copy Shipping</button></div></div><div data-ng-include="\'app/modules/customer/partials/address.html\'" data-ng-repeat="model in [buildOrderPaymentPartial(order.Check, order.OnHold)]"></div></div></fieldset></form><form class=form-horizontal name=forms.wiretransfer data-ng-class="{submitted: forms.submitted[\'wiretransfer\']}" novalidate unsaved-warning-form><fieldset><div data-ng-if="paymentInfoTab.PaymentMethodType == 6 && currentCustomer.ApprovedPaymentMethods.length > 0 && order.WireTransfer"><div class=form-group><label for=paymentComment class="col-md-3 control-label">Payment Comment:</label><div class=col-md-9><textarea type=text id=paymentComment name=PaymentComment class=form-control data-ng-model=order.WireTransfer.PaymentComment placeholder="Payment Comment" rows=3 data-ng-required=!order.OnHold data-ng-maxlength=250 data-ng-disabled=orderEditDisabled></textarea><div class=error-container ng-show="forms.submitted[\'wiretransfer\'] && forms.wiretransfer.PaymentComment.$invalid"><small class=error ng-show=forms.wiretransfer.PaymentComment.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Payment Comment")}}</small> <small class=error ng-show=forms.wiretransfer.PaymentComment.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["Payment Comment", "250"])}}</small> <small class=error ng-show=forms.wiretransfer.PaymentComment.$error.server>{{serverMessages.GetMessage(\'PaymentComment\', undefined, undefined, "wiretransfer")}}</small></div></div></div><span class=legend>Billing Address</span><div class=form-group data-ng-if=options.showCopyButtonsOnOrder><div class=col-md-3></div><div class=col-md-3><button class="btn btn-info" data-ng-click=makeBillingAsShippingAddressOrder();>Copy Shipping</button></div></div><div data-ng-include="\'app/modules/customer/partials/address.html\'" data-ng-repeat="model in [buildOrderPaymentPartial(order.WireTransfer, order.OnHold)]"></div></div></fieldset></form><form class=form-horizontal name=forms.marketing data-ng-class="{submitted: forms.submitted[\'marketing\']}" novalidate unsaved-warning-form><fieldset><div data-ng-if="paymentInfoTab.PaymentMethodType == 7 && currentCustomer.ApprovedPaymentMethods.length > 0 && order.Marketing"><div class=form-group><label for=marketingPromotionType class="col-md-3 control-label">Type:</label><div class=col-md-9><select class=form-control id=marketingPromotionType name=MarketingPromotionType data-ng-model=order.Marketing.MarketingPromotionType data-ng-options="term.Key as term.Text for term in ReferenceData.MarketingPromotionTypes" data-ng-disabled=orderEditDisabled data-ng-required=!order.OnHold><option value="" selected hidden></select><div class=error-container ng-show="forms.submitted[\'marketing\'] && forms.marketing.MarketingPromotionType.$invalid"><small class=error ng-show=forms.marketing.MarketingPromotionType.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Type")}}</small> <small class=error ng-show=forms.marketing.MarketingPromotionType.$error.server>{{serverMessages.GetMessage(\'MarketingPromotionType\', undefined, undefined, "marketing")}}</small></div></div></div><div class=form-group><label for=paymentComment class="col-md-3 control-label">Payment Comment:</label><div class=col-md-9><textarea type=text id=paymentComment name=PaymentComment class=form-control data-ng-model=order.Marketing.PaymentComment placeholder="Payment Comment" rows=3 data-ng-required=!order.OnHold data-ng-maxlength=250 data-ng-disabled=orderEditDisabled></textarea><div class=error-container ng-show="forms.submitted[\'marketing\'] && forms.marketing.PaymentComment.$invalid"><small class=error ng-show=forms.marketing.PaymentComment.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Payment Comment")}}</small> <small class=error ng-show=forms.marketing.PaymentComment.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["Payment Comment", "250"])}}</small> <small class=error ng-show=forms.marketing.PaymentComment.$error.server>{{serverMessages.GetMessage(\'PaymentComment\', undefined, undefined, "marketing")}}</small></div></div></div><span class=legend>Billing Address</span><div class=form-group data-ng-if=options.showCopyButtonsOnOrder><div class=col-md-3></div><div class=col-md-3><button class="btn btn-info" data-ng-click=makeBillingAsShippingAddressOrder();>Copy Shipping</button></div></div><div data-ng-include="\'app/modules/customer/partials/address.html\'" data-ng-repeat="model in [buildOrderPaymentPartial(order.Marketing, order.OnHold)]"></div></div></fieldset></form><form class=form-horizontal name=forms.vcwellness data-ng-class="{submitted: forms.submitted[\'vcwellness\']}" novalidate unsaved-warning-form><fieldset><div data-ng-if="paymentInfoTab.PaymentMethodType == 8 && currentCustomer.ApprovedPaymentMethods.length > 0 && order.VCWellness"><div class=form-group><label for=paymentComment class="col-md-3 control-label">Payment Comment:</label><div class=col-md-9><textarea type=text id=paymentComment name=PaymentComment class=form-control data-ng-model=order.VCWellness.PaymentComment placeholder="Payment Comment" rows=3 data-ng-required=!order.OnHold data-ng-maxlength=250 data-ng-disabled=orderEditDisabled></textarea><div class=error-container ng-show="forms.submitted[\'vcwellness\'] && forms.vcwellness.PaymentComment.$invalid"><small class=error ng-show=forms.vcwellness.PaymentComment.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Payment Comment")}}</small> <small class=error ng-show=forms.vcwellness.PaymentComment.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["Payment Comment", "250"])}}</small> <small class=error ng-show=forms.vcwellness.PaymentComment.$error.server>{{serverMessages.GetMessage(\'PaymentComment\', undefined, undefined, "vcwellness")}}</small></div></div></div><span class=legend>Billing Address</span><div class=form-group data-ng-if=options.showCopyButtonsOnOrder><div class=col-md-3></div><div class=col-md-3><button class="btn btn-info" data-ng-click=makeBillingAsShippingAddressOrder();>Copy Shipping</button></div></div><div data-ng-include="\'app/modules/customer/partials/address.html\'" data-ng-repeat="model in [buildOrderPaymentPartial(order.VCWellness, order.OnHold)]"></div></div></fieldset></form><form class=form-horizontal name=forms.nc data-ng-class="{submitted: forms.submitted[\'nc\']}" novalidate unsaved-warning-form><fieldset><div data-ng-if="paymentInfoTab.PaymentMethodType == 4 && currentCustomer.ApprovedPaymentMethods.length > 0 && order.NC"><div class=form-group><label for=paymentComment class="col-md-3 control-label">Payment Comment:</label><div class=col-md-9><textarea type=text id=paymentComment name=PaymentComment class=form-control data-ng-model=order.NC.PaymentComment placeholder="Payment Comment" rows=3 data-ng-required=!order.OnHold data-ng-maxlength=250 data-ng-disabled=orderEditDisabled></textarea><div class=error-container ng-show="forms.submitted[\'nc\'] && forms.nc.PaymentComment.$invalid"><small class=error ng-show=forms.nc.PaymentComment.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Payment Comment")}}</small> <small class=error ng-show=forms.nc.PaymentComment.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["Payment Comment", "250"])}}</small> <small class=error ng-show=forms.nc.PaymentComment.$error.server>{{serverMessages.GetMessage(\'PaymentComment\', undefined, undefined, "nc")}}</small></div></div></div><span class=legend>Billing Address</span><div class=form-group data-ng-if=options.showCopyButtonsOnOrder><div class=col-md-3></div><div class=col-md-3><button class="btn btn-info" data-ng-click=makeBillingAsShippingAddressOrder();>Copy Shipping</button></div></div><div data-ng-include="\'app/modules/customer/partials/address.html\'" data-ng-repeat="model in [buildOrderPaymentPartial(order.NC, order.OnHold)]"></div></div></fieldset></form></div>'),
a.put("app/modules/order/partials/wholesaleDropShipReport.html",'<div class="container-fluid wholesale-dropship-report"><div class=well><span class=legend>Wholesale Drop Ship Orders Report</span><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.form.submitted}" novalidate><fieldset><div class="row form-group"><div class=col-md-3><strong>Order Date</strong></div></div><div class="row form-group"><div class=col-md-3><p class=input-group><input class=form-control name=From data-ng-change=filterChanged(); uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.From is-open=fromOpened ng-required="true"> <span class=input-group-btn><button type=button class="btn btn-default" ng-click="stopPropagation($event); fromOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.form.submitted && forms.form.From.$invalid"><small class=error ng-show=forms.form.From.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","From")}}</small></div></div><div class=col-md-3><p class=input-group><input class=form-control name=To data-ng-change=filterChanged(); uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.To is-open=toOpened ng-required="true"> <span class=input-group-btn><button type=button class="btn btn-default" ng-click="stopPropagation($event); toOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.form.submitted && forms.form.To.$invalid"><small class=error ng-show=forms.form.To.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","To")}}</small></div></div></div><div class="row form-group"><div class=col-md-3><strong>Ship Date</strong></div></div><div class="row form-group"><div class=col-md-3><p class=input-group><input class=form-control name=ShipFrom data-ng-change=filterChanged(); uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.ShipFrom is-open="shipFromOpened"> <span class=input-group-btn><button type=button class="btn btn-default" ng-click="stopPropagation($event); shipFromOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p></div><div class=col-md-3><p class=input-group><input class=form-control name=ShipTo data-ng-change=filterChanged(); uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.ShipTo is-open="shipToOpened"> <span class=input-group-btn><button type=button class="btn btn-default" ng-click="stopPropagation($event); shipToOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p></div></div><hr><div class="row form-group"><div class=col-md-3><select class=form-control name=IdCustomerType data-ng-change=filterChanged(); data-ng-model=filter.IdCustomerType ng-options="item.Key as item.Text for item in customerTypes"></select></div><div class=col-md-3><select class=form-control name=IdTradeClass data-ng-change=filterChanged(); data-ng-model=filter.IdTradeClass ng-options="item.Key as item.Text for item in tradeClasses"></select></div><div class=col-md-3><input name=IdOrder class=form-control placeholder="Order #" data-ng-change=filterChanged(); data-ng-model=filter.IdOrder numbers-only autocomplete=off data-ng-minlength=3><div class=error-container ng-show="forms.form.submitted && forms.form.IdOrder.$invalid"><small class=error ng-show=forms.form.IdOrder.$error.minlength>{{getValidationMessage("{0} should have at least 3 symbols","Order #")}}</small></div></div><div class=col-md-3><input name=PoNumber class=form-control placeholder="PO #" data-ng-change=filterChanged(); data-ng-model=filter.PoNumber autocomplete=off data-ng-minlength=3><div class=error-container ng-show="forms.form.submitted && forms.form.PoNumber.$invalid"><small class=error ng-show=forms.form.PoNumber.$error.minlength>{{getValidationMessage("{0} should have at least 3 symbols","PO #")}}</small></div></div></div><div class="row form-group"><div class=col-md-3><input name=CustomerCompany class=form-control placeholder="Customer Company Name" data-ng-change=filterChanged(); data-ng-model=filter.CustomerCompany autocomplete=off data-ng-minlength=3><div class=error-container ng-show="forms.form.submitted && forms.form.CustomerCompany.$invalid"><small class=error ng-show=forms.form.CustomerCompany.$error.minlength>{{getValidationMessage("{0} should have at least 3 symbols","Customer Customer Name")}}</small></div></div><div class=col-md-3><input name=CustomerFirstName class=form-control placeholder="Customer First Name" data-ng-change=filterChanged(); data-ng-model=filter.CustomerFirstName autocomplete=off data-ng-minlength=3><div class=error-container ng-show="forms.form.submitted && forms.form.CustomerFirstName.$invalid"><small class=error ng-show=forms.form.CustomerFirstName.$error.minlength>{{getValidationMessage("{0} should have at least 3 symbols","Customer First Name")}}</small></div></div><div class=col-md-3><input name=CustomerLastName class=form-control placeholder="Customer Last Name" data-ng-change=filterChanged(); data-ng-model=filter.CustomerLastName autocomplete=off data-ng-minlength=3><div class=error-container ng-show="forms.form.submitted && forms.form.CustomerLastName.$invalid"><small class=error ng-show=forms.form.CustomerLastName.$error.minlength>{{getValidationMessage("{0} should have at least 3 symbols","Customer Last Name")}}</small></div></div></div><div class="row form-group"><div class=col-md-3><input name=ShipFirstName class=form-control placeholder="Ship to First Name" data-ng-change=filterChanged(); data-ng-model=filter.ShipFirstName autocomplete=off data-ng-minlength=3><div class=error-container ng-show="forms.form.submitted && forms.form.ShipFirstName.$invalid"><small class=error ng-show=forms.form.ShipFirstName.$error.minlength>{{getValidationMessage("{0} should have at least 3 symbols","Ship to First Name")}}</small></div></div><div class=col-md-3><input name=ShipLastName class=form-control placeholder="Ship To Last Name" data-ng-change=filterChanged(); data-ng-model=filter.ShipLastName autocomplete=off data-ng-minlength=3><div class=error-container ng-show="forms.form.submitted && forms.form.ShipLastName.$invalid"><small class=error ng-show=forms.form.ShipLastName.$error.minlength>{{getValidationMessage("{0} should have at least 3 symbols","Ship To Last Name")}}</small></div></div><div class=col-md-3><input name=ShippingIdConfirmation class=form-control placeholder="Shipping Confirmation #" data-ng-change=filterChanged(); data-ng-model=filter.ShippingIdConfirmation autocomplete=off data-ng-minlength=3><div class=error-container ng-show="forms.form.submitted && forms.form.ShippingIdConfirmation.$invalid"><small class=error ng-show=forms.form.ShippingIdConfirmation.$error.minlength>{{getValidationMessage("{0} should have at least 3 symbols","Shipping Confirmation #")}}</small></div></div></div><div class="row form-group"><div class=col-md-12><button class="btn btn-info" data-ng-click=filterItems(); type=button>Filter</button></div></div></fieldset></form><spinner-overlay data-loading=refreshTracker.active()><span class=legend>Order Summary</span><table class="table table-striped orders-total"><thead><tr><th>Discounted Subtotal</th><th>Shipping Total</th><th>Grand Total</th></tr></thead><tbody><tr><td>{{report.DiscountedSubtotal | currency}}</td><td>{{report.Shipping | currency}}</td><td>{{report.Total | currency}}</td></tr></tbody></table><span class=legend>Sku Summary</span><table class="table table-striped skus-total"><thead><tr><th>Sku</th><th>Total Quantity</th><th>Total</th></tr></thead><tbody><tr data-ng-repeat="sku in report.Skus"><td>{{sku.Code}}</td><td>{{sku.Quantity}}</td><td>{{sku.Amount | currency}}</td></tr><tr><td>Grand Total</td><td>{{report.SkusTotal.Quantity}}</td><td>{{report.SkusTotal.Amount | currency}}</td></tr></tbody></table><hr><div class=form-horizontal><div class="row form-group"><div class=col-md-12><a target=_self class="btn btn-primary pull-right" data-ng-href={{options.exportUrl}}>Export</a></div></div></div><div class=orders><table id=data-grid class="table table-striped order-statuses"><thead><tr><th>Order #</th><th class=status>Status</th><th>Total</th><th>Discounted Subtotal</th><th>Shipping</th><th>Order Specific Notes</th><th>PO #</th><th>Profile Company Name</th><th>First Name</th><th>Last Name</th><th>Address 1</th><th>Address 2</th><th>City</th><th>State</th><th>Postal Code</th><th>Country</th><th>Phone</th><th>Ship Date</th><th>Ship Carrier</th><th>Ship Confirmation #</th><th>Products</th></tr></thead><tbody><tr data-ng-repeat="item in items"><td><a ui-sref="index.oneCol.orderDetail({id: item.IdOrder })">{{::item.IdOrder}}</a></td><td><div data-ng-include="\'app/modules/order/partials/orderStatusSection.html\'"></div></td><td>{{::item.Total | currency}}</td><td>{{::item.DiscountedSubtotal | currency}}</td><td>{{::item.Shipping | currency}}</td><td>{{::item.OrderNotes}}</td><td>{{::item.PoNumber}}</td><td>{{::item.ShippingCompany}}</td><td>{{::item.ShippingFirstName}}</td><td>{{::item.ShippingLastName}}</td><td>{{::item.ShippingAddress1}}</td><td>{{::item.ShippingAddress2}}</td><td>{{::item.City}}</td><td>{{::item.StateCode}}</td><td>{{::item.Zip}}</td><td>{{::item.Country}}</td><td>{{::item.Phone}}</td><td><span data-ng-if=::item.ShipDate>{{::item.ShipDate | date:"MM/dd/yy"}}</span><div data-ng-if="::!(item.ShipDate && (item.PShipDate || item.NPShipDate))"><span data-ng-if=::item.PShipDate>{{::item.PShipDate | date:"MM/dd/yy"}} - P</span><br><span data-ng-if=::item.NPShipDate>{{::item.NPShipDate | date:"MM/dd/yy"}} - NP</span></div></td><td><span data-ng-if=::item.ShippingCarrier>{{::item.ShippingCarrier}}</span><div data-ng-if="::!(item.ShippingCarrier && (item.PShippingCarrier || item.NPShippingCarrier))"><span data-ng-if=::item.PShippingCarrier>{{::item.PShippingCarrier}} - P</span><br><span data-ng-if=::item.NPShippingCarrier>{{::item.NPShippingCarrier}} - NP</span></div></td><td><a data-ng-if=::item.ShippingIdConfirmation target=_blank data-ng-href={{::item.ShippingIdConfirmationUrl}}>{{::item.ShippingIdConfirmation}}</a><div data-ng-if="::!(item.ShippingIdConfirmation && (item.PShippingIdConfirmation || item.NPShippingIdConfirmation))"><span data-ng-if=::item.PShippingIdConfirmation><a target=_blank data-ng-href={{::item.PShippingIdConfirmationUrl}}>{{::item.PShippingIdConfirmation}}</a> - P</span><br><span data-ng-if=::item.NPShippingIdConfirmation><a target=_blank data-ng-href={{::item.NPShippingIdConfirmationUrl}}>{{::item.NPShippingIdConfirmation}}</a> - NP</span></div></td><td><span data-ng-repeat="sku in item.Skus"><span>{{sku.Code}} ({{sku.Quantity}})</span> {{$last!=true ? ", " : ""}}</span></td></tr></tbody></table></div></spinner-overlay><uib-pagination boundary-links=true total-items=totalItems items-per-page=filter.Paging.PageItemCount data-ng-model=filter.Paging.PageIndex previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; data-ng-change="pageChanged();scrollTo(\'data-grid\');"></uib-pagination></div></div>'),a.put("app/modules/product/partials/activeProductReviewsList.html",'<div class="container-fluid active-product-reviews"><div class=well><span data-ng-if=productName class=legend>Manage {{productName}} Live Reviews</span><div class="row form-group"><div class=col-md-12><button class="btn btn-info width-180px" ui-sref=index.oneCol.manageProductReviews>Manage All Live Reviews</button></div></div><spinner-overlay data-loading=refreshTracker.active()><table id=data-grid class="table table-striped table-hover"><thead><tr><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Title\')"><span>Review Title</span> <span data-ng-if="filter.Sorting.Path == \'Title\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'CustomerName\')"><span>Customer Name</span> <span data-ng-if="filter.Sorting.Path == \'CustomerName\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'DateCreated\')"><span>Submitted</span> <span data-ng-if="filter.Sorting.Path == \'DateCreated\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Rating\')"><span>Rating</span> <span data-ng-if="filter.Sorting.Path == \'Rating\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th>Actions</th></tr></thead><tbody><tr data-ng-repeat="productReview in productReviews"><td>{{productReview.Title}}</td><td>{{productReview.CustomerName}}</td><td>{{productReview.DateCreated | date:"MM/dd/yy"}}<br>{{productReview.DateCreated | date:"h:mm a"}}</td><td><stars data-ng-model=productReview.Rating></stars></td><td><button title=Edit class="btn btn-default btn-success btn-xs" data-ng-click=edit(productReview.Id);><i class="glyphicon glyphicon-edit"></i></button> <button title=Delete class="btn btn-default btn-danger btn-xs" ladda=deleteTracker.active() data-ng-click=delete(productReview.Id);><i class="glyphicon glyphicon-remove"></i></button></td></tr></tbody></table></spinner-overlay><uib-pagination boundary-links=true total-items=totalItems items-per-page=filter.Paging.PageItemCount data-ng-model=filter.Paging.PageIndex previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; data-ng-change="pageChanged();scrollTo(\'data-grid\');"></uib-pagination></div></div>'),a.put("app/modules/product/partials/addProductPopup.html",'<div class=modal-header><h3 class=modal-title>Add Product</h3></div><div class=modal-body><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.form.submitted}" novalidate><fieldset><div class=form-group><label for=type class="col-md-3 control-label">Type</label><div class=col-md-9><select class=form-control name=Type data-ng-model=type ng-options="type.Key as type.Text for type in types"></select></div></div></fieldset></form></div><div class=modal-footer><button class="btn btn-success" ladda=saveTracker.active() data-ng-click=save()>Save</button> <button class="btn btn-default" data-ng-click=cancel()>Cancel</button></div>'),a.put("app/modules/product/partials/discountDetail.html",'<div class="container-fluid discount-edit"><div class=left-pane-controls><div class="well container-fluid"><div><button data-ng-click=save() class="btn btn-success width-160px" unsaved-warning-clear>Save</button></div><div class="btn-group margin-top-10px"><button cancel-button-default-state=index.oneCol.manageDiscounts cancel-button class="btn btn-default width-160px">Cancel</button></div><div class=margin-top-10px><button class="btn btn-primary width-160px" ui-sref=index.oneCol.manageDiscounts>Manage All</button></div></div><div ng-controller=objectHistorySectionController onload="name = \'History\'" data-ng-include="\'app/modules/setting/partials/objectHistorySection.html\'"></div></div><div class=right-pane-main><div class=container-fluid><div class=row><uib-tabset><uib-tab heading="Discount Details"><div class="container container-left"><div class="well row"><spinner-overlay data-loading=refreshTracker.active()><form class=form-horizontal name=forms.mainForm data-ng-submit=save() data-ng-class="{submitted: forms.submitted}" novalidate unsaved-warning-form><fieldset><span class=legend>General Information</span><div class=form-group><label for=type class="col-md-3 control-label">Customer Type</label><div class=col-md-9><select class=form-control name=Assigned data-ng-model=discount.Assigned ng-options="assignedCustomerType.Key as assignedCustomerType.Text for assignedCustomerType in assignedCustomerTypes"></select></div></div><div class=form-group><label for=url class="col-md-3 control-label">Description</label><div class=col-md-9><input name=Description class=form-control placeholder=Description data-ng-model=discount.Description required><div class=error-container ng-show="forms.submitted && forms.mainForm.Description.$invalid"><small class=error ng-show=forms.mainForm.Description.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Description")}}</small> <small class=error ng-show=forms.mainForm.Description.$error.server>{{serverMessages.GetMessage(\'Description\')}}</small></div></div></div><div class=form-group><label for=url class="col-md-3 control-label">Code</label><div class=col-md-9><input name=Code class=form-control placeholder=Code data-ng-model=discount.Code required><div class=error-container ng-show="forms.submitted && forms.mainForm.Code.$invalid"><small class=error ng-show=forms.mainForm.Code.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Code")}}</small> <small class=error ng-show=forms.mainForm.Code.$error.server>{{serverMessages.GetMessage(\'Code\')}}</small></div></div></div><span class=legend>Status and Expiration</span><div class=form-group><label for=active class="col-md-3 control-label">Active</label><div class=col-md-9><div class=checkbox><label><input type=checkbox name=StatusCode data-ng-model=discount.StatusCode data-ng-true-value=2 data-ng-false-value="1"></label></div></div></div><div class=form-group><label for=date class="col-md-3 control-label">Valid From</label><div class=col-md-9><p class=input-group><input name=StartDate class=form-control uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=discount.StartDate is-open=startDateOpened required> <span class=input-group-btn><button type=button class="btn btn-default" ng-disabled=false ng-click="stopPropagation($event); startDateOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.submitted && forms.mainForm.StartDate.$invalid"><small class=error ng-show=forms.mainForm.StartDate.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Valid From")}}</small> <small class=error ng-show=forms.mainForm.StartDate.$error.server>{{serverMessages.GetMessage(\'StartDate\')}}</small></div></div></div><div class=form-group><label for=date class="col-md-3 control-label">Valid To</label><div class=col-md-9><p class=input-group><input name=ExpirationDate class=form-control uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=discount.ExpirationDate is-open=expirationDateOpened required> <span class=input-group-btn><button type=button class="btn btn-default" ng-disabled=false ng-click="stopPropagation($event); expirationDateOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.submitted && forms.mainForm.ExpirationDate.$invalid"><small class=error ng-show=forms.mainForm.ExpirationDate.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Valid To")}}</small> <small class=error ng-show=forms.mainForm.ExpirationDate.$error.server>{{serverMessages.GetMessage(\'ExpirationDate\')}}</small></div></div></div><span class=legend>Discount Type</span><div class=form-group><label for=type class="col-md-3 control-label">Discount Type</label><div class=col-md-9><select class=form-control name=DiscountType data-ng-model=discount.DiscountType ng-options="discountType.Key as discountType.Text for discountType in discountTypes"></select></div></div><div class=form-group data-ng-hide="discount.DiscountType==3"><label for=active class="col-md-3 control-label">Allow Healthwise</label><div class=col-md-9><div class=checkbox><label><input type=checkbox name=AllowHealthwise data-ng-model="discount.AllowHealthwise"></label></div></div></div><div class=form-group data-ng-hide="discount.DiscountType==3"><label for=active class="col-md-3 control-label">Require Minimum Perishable</label><div class=col-md-9><div class=checkbox><label><input type=checkbox name=RequireMinimumPerishable data-ng-model="discount.RequireMinimumPerishable"></label></div></div></div><div class=form-group data-ng-if="!(discount.DiscountType==3 || !discount.RequireMinimumPerishable)"><label for=type class="col-md-3 control-label">Require Minimum Perishable Amount</label><div class=col-md-9><div class=input-group><span class=input-group-addon>$</span> <input name=RequireMinimumPerishableAmount class=form-control placeholder="Require Minimum Perishable Amount" money min=0.01 max=100000 data-ng-model=discount.RequireMinimumPerishableAmount required></div><div class=error-container ng-show="forms.submitted && forms.mainForm.RequireMinimumPerishableAmount.$invalid"><small class=error ng-show=forms.mainForm.RequireMinimumPerishableAmount.$error.parse>{{getValidationMessage("ValidationMessages.FieldRequired","Require Minimum Perishable Amount")}}</small> <small class=error ng-show=forms.mainForm.RequireMinimumPerishableAmount.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Require Minimum Perishable Amount")}}</small> <small class=error ng-show=forms.mainForm.RequireMinimumPerishableAmount.$error.max>{{getValidationMessage("ValidationMessages.FieldMax","Require Minimum Perishable Amount",1000000)}}</small> <small class=error ng-show=forms.mainForm.RequireMinimumPerishableAmount.$error.min>{{getValidationMessage("{0} must be over $0.00","Require Minimum Perishable Amount")}}</small> <small class=error ng-show=forms.mainForm.RequireMinimumPerishableAmount.$error.server>{{serverMessages.GetMessage(\'RequireMinimumPerishableAmount\')}}</small></div></div></div><div class=form-group data-ng-hide="discount.DiscountType==3"><label for=active class="col-md-3 control-label">Free Shipping</label><div class=col-md-9><div class=checkbox><label><input type=checkbox name=FreeShipping data-ng-model="discount.FreeShipping"></label></div></div></div><div class=form-group><label for=MaxTimesUseMode class="col-md-3 control-label">Uses Per Customer</label><div class=col-md-9><select class=form-control name=MaxTimesUseMode data-ng-model=options.maxTimesUseMode ng-options="item.Key as item.Text for item in maxTimesUseModes"></select></div></div><div data-ng-if="options.maxTimesUseMode==3" class=form-group><label for=MaxTimesUse class="col-md-3 control-label">Count</label><div class=col-md-9><input name=MaxTimesUse class=form-control placeholder=Count data-ng-model=options.maxTimesUse min=1 max=100000 numbers-only required><div class=error-container ng-show="forms.submitted && forms.mainForm.MaxTimesUse.$invalid"><small class=error ng-show=forms.mainForm.MaxTimesUse.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Count")}}</small> <small class=error ng-show=forms.mainForm.MaxTimesUse.$error.max>{{getValidationMessage("ValidationMessages.FieldMax","Count",100000)}}</small> <small class=error ng-show=forms.mainForm.MaxTimesUse.$error.min>{{getValidationMessage("ValidationMessages.FieldMin","Count",1)}}</small></div></div></div><div class=form-group data-ng-if="discount.DiscountType==1"><label for=type class="col-md-3 control-label">Price Discount</label><div class=col-md-9><div class=input-group><span class=input-group-addon>$</span> <input name=Amount class=form-control placeholder="Price Discount" money min=0.01 max=100000 data-ng-model=discount.Amount required></div><div class=error-container ng-show="forms.submitted && forms.mainForm.Amount.$invalid"><small class=error ng-show=forms.mainForm.Amount.$error.parse>{{getValidationMessage("ValidationMessages.FieldRequired","Price Discount")}}</small> <small class=error ng-show=forms.mainForm.Amount.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Price Discount")}}</small> <small class=error ng-show=forms.mainForm.Amount.$error.max>{{getValidationMessage("ValidationMessages.FieldMax","Price Discount",1000000)}}</small> <small class=error ng-show=forms.mainForm.Amount.$error.min>{{getValidationMessage("{0} must be over $0.00","Price Discount")}}</small> <small class=error ng-show=forms.mainForm.Amount.$error.server>{{serverMessages.GetMessage(\'Amount\')}}</small></div></div></div><div class=form-group data-ng-if="discount.DiscountType==2"><label for=type class="col-md-3 control-label">Percent Discount</label><div class=col-md-9><div class=input-group><span class=input-group-addon>%</span> <input name=Percent class=form-control placeholder="Percent Discount" money min=0.01 max=100 data-ng-model=discount.Percent required></div><div class=error-container ng-show="forms.submitted && forms.mainForm.Percent.$invalid"><small class=error ng-show=forms.mainForm.Percent.$error.parse>{{getValidationMessage("ValidationMessages.FieldRequired","Percent Discount")}}</small> <small class=error ng-show=forms.mainForm.Percent.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Percent Discount")}}</small> <small class=error ng-show=forms.mainForm.Percent.$error.max>{{getValidationMessage("ValidationMessages.FieldMax","Percent Discount",100)}}</small> <small class=error ng-show=forms.mainForm.Percent.$error.min>{{getValidationMessage("{0} must be over %0.00","Percent Discount")}}</small> <small class=error ng-show=forms.mainForm.Percent.$error.server>{{serverMessages.GetMessage(\'Percent\')}}</small></div></div></div><div class=form-group data-ng-if="discount.DiscountType==4"><label for=type class="col-md-3 control-label">Threshold</label><div class=col-md-9><div class=input-group><span class=input-group-addon>$</span> <input name=Threshold class=form-control placeholder=Threshold money min=0.01 max=100000 data-ng-model=discount.Threshold required></div><div class=error-container ng-show="forms.submitted && forms.mainForm.Threshold.$invalid"><small class=error ng-show=forms.mainForm.Threshold.$error.parse>{{getValidationMessage("ValidationMessages.FieldRequired","Threshold")}}</small> <small class=error ng-show=forms.mainForm.Threshold.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","")}}</small> <small class=error ng-show=forms.mainForm.Threshold.$error.max>{{getValidationMessage("ValidationMessages.FieldMax","Threshold",1000000)}}</small> <small class=error ng-show=forms.mainForm.Threshold.$error.min>{{getValidationMessage("{0} must be over $0.00","Threshold")}}</small> <small class=error ng-show=forms.mainForm.Threshold.$error.server>{{serverMessages.GetMessage(\'Threshold\')}}</small></div></div></div><div class=form-group data-ng-if="discount.DiscountType==4"><label for=url class="col-md-3 control-label">Product SKU</label><div class=col-md-9><div class="input-group autocomplete"><input name=ProductSKU class=form-control placeholder="Product SKU" data-ng-model=discount.ProductSKU required typeahead-min-length=3 typeahead-wait-ms=200 uib-typeahead="code for code in getSkus($viewValue)" typeahead-loading=loadingSkus> <span class=input-group-addon><i ng-show=loadingSkus class="glyphicon glyphicon-refresh"></i></span></div><div class=error-container ng-show="forms.submitted && forms.mainForm.ProductSKU.$invalid"><small class=error ng-show=forms.mainForm.ProductSKU.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Product SKU")}}</small> <small class=error ng-show=forms.mainForm.ProductSKU.$error.server>{{serverMessages.GetMessage(\'ProductSKU\')}}</small></div></div></div></fieldset></form><form class=form-horizontal name=forms.DiscountTiers data-ng-submit=save() data-ng-class="{submitted: forms.discountTiersSubmitted}" novalidate><fieldset><div class=panel-group data-ng-if="discount.DiscountType==5"><span class=legend>Tiers</span><div class=form-group><div class=col-md-12><button type=button data-ng-click=addTier(); class="btn btn-info">Add New Tier</button></div></div><div data-ng-repeat="discountTier in discount.DiscountTiers" class="panel panel-default tiers"><div class=panel-heading><div class=form-horizontal ng-form=i{{$index}} novalidate><div class=form-group><div class=col-md-12><div class=fixed-accordion-row><label class=control-label>Tier {{$index+1}}:</label><label class=control-label>Min</label><div class=col-md-1><div class=input-group><span class=input-group-addon>$</span> <input ng-blur=tierToBlur($index) ng-disabled="$index!=0" name=From class=form-control placeholder=Min money max=100000 min=0.00 data-ng-model=discountTier.From required></div><div class="error-container small-block" ng-show="forms.discountTiersSubmitted && forms.DiscountTiers.i{{$index}}.From.$invalid"><small class=error ng-show=forms.DiscountTiers.i{{$index}}.From.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Min")}}</small> <small class=error ng-show=forms.DiscountTiers.i{{$index}}.From.$error.parse>{{getValidationMessage("ValidationMessages.FieldRequired","Min")}}</small> <small class=error ng-show=forms.DiscountTiers.i{{$index}}.From.$error.max>{{getValidationMessage("ValidationMessages.FieldMax","Min","$1000000")}}</small> <small class=error ng-show=forms.DiscountTiers.i{{$index}}.From.$error.min>{{getValidationMessage("{0} must be over $0.00","Min")}}</small> <small class=error ng-show=forms.DiscountTiers.i{{$index}}.From.$error.server>{{serverMessages.GetMessage(\'From\',\'DiscountTiers\',$index)}}</small></div></div></div><div class=fixed-accordion-row><label class=control-label>Max</label><div class=col-md-1><div class=input-group><span class=input-group-addon>$</span> <input ng-blur=tierFromBlur($index) name=To class=form-control placeholder=Max money max=100000 min=0.01 data-ng-model=discountTier.To data-ng-required=!$last></div><div class="error-container small-block" ng-show="(forms.discountTiersSubmitted && forms.DiscountTiers.i{{$index}}.To.$invalid) || (lastTierToAddingNewRequired && $last)"><small class=error ng-show=forms.DiscountTiers.i{{$index}}.To.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Max")}}</small> <small class=error ng-show=forms.DiscountTiers.i{{$index}}.To.$error.parse>{{getValidationMessage("ValidationMessages.FieldRequired","Max")}}</small> <small class=error ng-show=forms.DiscountTiers.i{{$index}}.To.$error.max>{{getValidationMessage("ValidationMessages.FieldMax","Max","$1000000")}}</small> <small class=error ng-show=forms.DiscountTiers.i{{$index}}.To.$error.min>{{getValidationMessage("{0} must be over $0.00","Max")}}</small> <small class=error ng-show=forms.DiscountTiers.i{{$index}}.To.$error.server>{{serverMessages.GetMessage(\'To\',\'DiscountTiers\',$index)}}</small></div></div></div><div data-ng-if="discountTier.IdDiscountType==1" class=fixed-accordion-row><div class=col-md-1><div class=input-group><span class=input-group-addon>$</span> <input name=Amount class=form-control placeholder=Amount money max=100000 min=0.01 data-ng-model=discountTier.Amount required></div><div class="error-container small-block" ng-show="forms.discountTiersSubmitted && forms.DiscountTiers.i{{$index}}.Amount.$invalid"><small class=error ng-show=forms.DiscountTiers.i{{$index}}.Amount.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Amount")}}</small> <small class=error ng-show=forms.DiscountTiers.i{{$index}}.Amount.$error.parse>{{getValidationMessage("ValidationMessages.FieldRequired","Amount")}}</small> <small class=error ng-show=forms.DiscountTiers.i{{$index}}.Amount.$error.max>{{getValidationMessage("ValidationMessages.FieldMax","Amount","$1000000")}}</small> <small class=error ng-show=forms.DiscountTiers.i{{$index}}.Amount.$error.min>{{getValidationMessage("{0} must be over $0.00","Amount")}}</small> <small class=error ng-show=forms.DiscountTiers.i{{$index}}.Amount.$error.server>{{serverMessages.GetMessage(\'Amount\',\'DiscountTiers\',$index)}}</small></div></div></div><div data-ng-if="discountTier.IdDiscountType==2" class=fixed-accordion-row><div class=col-md-1><div class=input-group><span class=input-group-addon>%</span> <input name=Percent class=form-control placeholder=Percent money max=100 min=0.01 data-ng-model=discountTier.Percent required></div><div class="error-container small-block" ng-show="forms.discountTiersSubmitted && forms.DiscountTiers.i{{$index}}.Percent.$invalid"><small class=error ng-show=forms.DiscountTiers.i{{$index}}.Percent.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Percent")}}</small> <small class=error ng-show=forms.DiscountTiers.i{{$index}}.Percent.$error.parse>{{getValidationMessage("ValidationMessages.FieldRequired","Percent")}}</small> <small class=error ng-show=forms.DiscountTiers.i{{$index}}.Percent.$error.max>{{getValidationMessage("ValidationMessages.FieldMax","Percent","%100")}}</small> <small class=error ng-show=forms.DiscountTiers.i{{$index}}.Percent.$error.min>{{getValidationMessage("{0} must be over %0.00","Percent")}}</small> <small class=error ng-show=forms.DiscountTiers.i{{$index}}.Percent.$error.server>{{serverMessages.GetMessage(\'Percent\',\'DiscountTiers\',$index)}}</small></div></div></div><div class=fixed-accordion-row><label class=control-label>Off</label><div class=col-md-1><select class=form-control name=IdDiscountType data-ng-model=discountTier.IdDiscountType ng-options="tierDiscountType.Key as tierDiscountType.Text for tierDiscountType in tierDiscountTypes"></select></div></div><div data-ng-if="$index+1==discount.DiscountTiers.length" class="fixed-accordion-row pull-right" data-ng-click=$event.stopPropagation()><button type=button class="btn btn-danger" data-ng-click=deleteTier($index)>Delete</button></div></div></div></div></div></div></div></fieldset></form><div class=form-horizontal><div class=form-group data-ng-hide="discount.DiscountType==3"><label for=active class="col-md-3 control-label"></label><div class=col-md-9><div class=radio><label><input type=radio data-ng-model=discount.SelectedMode data-ng-value="1"> <strong>Discount Applies To All Products</strong></label></div></div><label for=active class="col-md-3 control-label"></label><div class=col-md-9><div class=radio><label><input type=radio data-ng-model=discount.SelectedMode data-ng-value="2"> <strong>Discount Only Applies To These Products</strong></label></div></div><label for=active class="col-md-3 control-label"></label><div class=col-md-9><div class=radio><label><input type=radio data-ng-model=discount.SelectedMode data-ng-value="3"> <strong>Discount Only Applies To These Categories</strong></label></div></div></div><div data-ng-show="discount.DiscountType!=3 && discount.SelectedMode==2"><span class=legend>Selected Products</span><table class="table table-striped table-hover"><thead><tr><th>SKU</th><th>Name</th><th></th></tr></thead><tbody><tr data-ng-repeat="item in discount.DiscountsToSelectedSkus"><td>{{item.ShortSkuInfo.Code}}</td><td>{{item.ShortSkuInfo.ProductName}}</td><td><button class="btn btn-xs btn-default btn-danger" data-ng-click=deleteDiscountToSelectedSku($index);>Delete</button></td></tr></tbody></table><div ng-controller=skusSearchController onload="name = \'DiscountsToSelectedSkus\'" data-ng-include="\'app/modules/product/partials/skusSearchList.html\'"></div></div></div><div data-ng-show="discount.DiscountType!=3 && discount.SelectedMode==3"><span class=legend>Selected Categories</span><div class="applied-categories categories"><button data-ng-if=!appliedCategoriesExpanded data-ng-click=updateAppliedCategoriesCollapsed(true); class="btn btn-primary btn-xs expand-button">Expand All</button> <button data-ng-if=appliedCategoriesExpanded data-ng-click=updateAppliedCategoriesCollapsed(false); class="btn btn-primary btn-xs expand-button">Collapse All</button><div ui-tree data-drag-enabled=false name=applied-categories class=ya-treeview><ol ui-tree-nodes="" data-ng-model=rootAppliedCategory.SubItems><li ng-repeat="item in rootAppliedCategory.SubItems" ui-tree-node collapsed=true data-ng-include="\'app/modules/content/partials/contentCategories.html\'"></li></ol></div></div></div></spinner-overlay></div></div></uib-tab><uib-tab heading="Products Cart Must Contain"><div class="container container-left"><div class="well row"><spinner-overlay data-loading=refreshTracker.active()><span class=legend>Cart Must Include These Products</span> <span class=legend>Selected Products</span><table class="table table-striped table-hover"><thead><tr><th>SKU</th><th>Name</th><th></th></tr></thead><tbody><tr data-ng-repeat="item in discount.DiscountsToSkus"><td>{{item.ShortSkuInfo.Code}}</td><td>{{item.ShortSkuInfo.ProductName}}</td><td><button class="btn btn-xs btn-default btn-danger" data-ng-click=deleteDiscountToSku($index);>Delete</button></td></tr></tbody></table><div ng-controller=skusSearchController onload="name = \'DiscountsToSkus\'" data-ng-include="\'app/modules/product/partials/skusSearchList.html\'"></div></spinner-overlay></div></div></uib-tab><uib-tab heading="Categories Cart Must Contain"><div class="container container-left"><div class="well row"><spinner-overlay data-loading=refreshTracker.active()><span class=legend>Cart Must Include These Categories</span><div class="filter-categories categories"><button data-ng-if=!categoriesExpanded data-ng-click=updateCategoriesCollapsed(true); class="btn btn-primary btn-xs expand-button">Expand All</button> <button data-ng-if=categoriesExpanded data-ng-click=updateCategoriesCollapsed(false); class="btn btn-primary btn-xs expand-button">Collapse All</button><div ui-tree data-drag-enabled=false name=filter-categories class=ya-treeview><ol ui-tree-nodes="" data-ng-model=rootCategory.SubItems><li ng-repeat="item in rootCategory.SubItems" ui-tree-node collapsed=true data-ng-include="\'app/modules/content/partials/contentCategories.html\'"></li></ol></div></div></spinner-overlay></div></div></uib-tab></uib-tabset></div></div></div></div>'),
a.put("app/modules/product/partials/discountsList.html",'<div class="container-fluid discount-list"><div class=well><span class=legend>Manage Discounts</span><div class="row form-group"><div class=col-md-3><input class=form-control placeholder="Code, Description" data-ng-model=filter.SearchText></div><div class=col-md-3><select class=form-control name=Status data-ng-model=filter.Status ng-options="activeFilterOption.Key as activeFilterOption.Text for activeFilterOption in activeFilterOptions"></select></div><div class=col-md-3><select class=form-control name=ExpiredType data-ng-model=filter.DateStatus ng-options="item.Key as item.Text for item in ReferenceData.DateStatuses"></select></div><div class=col-md-3><select class=form-control name=Assigned data-ng-model=filter.Assigned ng-options="item.Key as item.Text for item in customerTypes"></select></div></div><div class="row form-group"><div class=col-md-3><p class=input-group><input name=test class=form-control placeholder="Valid From" uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.ValidFrom is-open="fromOpened"> <span class=input-group-btn><button type=button class="btn btn-default" ng-disabled=false ng-click="stopPropagation($event); fromOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p></div><div class=col-md-3><p class=input-group><input name=test class=form-control placeholder="Valid To" uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.ValidTo is-open="toOpened"> <span class=input-group-btn><button type=button class="btn btn-default" ng-disabled=false ng-click="stopPropagation($event); toOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p></div></div><div class="row form-group"><div class=col-md-4><button class="btn btn-info" data-ng-click=filterDiscounts(); type=button>Filter</button></div></div><hr><div class=form-group><button data-ng-click=open(); class="btn btn-primary">Add New Discount</button></div><spinner-overlay data-loading=refreshTracker.active()><table id=data-grid class="table table-striped table-hover"><thead><tr><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Code\')"><span>Code</span> <span data-ng-if="filter.Sorting.Path == \'Code\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Description\')"><span>Description</span> <span data-ng-if="filter.Sorting.Path == \'Description\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'IdDiscountType\')"><span>Type</span> <span data-ng-if="filter.Sorting.Path == \'IdDiscountType\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Assigned\')"><span>Customer</span> <span data-ng-if="filter.Sorting.Path == \'Assigned\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th>Active</th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'StartDate\')"><span>Valid From</span> <span data-ng-if="filter.Sorting.Path == \'StartDate\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'ExpirationDate\')"><span>Valid To</span> <span data-ng-if="filter.Sorting.Path == \'ExpirationDate\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th>Status</th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'DateCreated\')"><span>Created</span> <span data-ng-if="filter.Sorting.Path == \'DateCreated\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th>Actions</th></tr></thead><tbody><tr data-ng-repeat="item in discounts"><td><a ui-sref=index.oneCol.discountDetail({id:item.Id})>{{::item.Code}}</a></td><td>{{item.Description}}</td><td>{{item.DiscountTypeName}}</td><td><span data-ng-if=!item.Assigned class="label label-info font-default">All</span> <span data-ng-if="item.Assigned==1" class="label label-retail font-default">Retail Only</span> <span data-ng-if="item.Assigned==2" class="label label-wholesale font-default">Wholesale Only</span></td><td><span data-ng-if="item.StatusCode == 2" class="label label-info font-default">{{getReferenceItem(ReferenceData.RecordStatuses, item.StatusCode).Text}}</span> <span data-ng-if="item.StatusCode == 1" class="label label-danger font-default">{{getReferenceItem(ReferenceData.RecordStatuses, item.StatusCode).Text}}</span></td><td>{{item.StartDate | date:"MM/dd/yy"}}</td><td>{{item.ExpirationDate | date:"MM/dd/yy"}}</td><td><span data-ng-if="item.DateStatus == 1" class="label label-danger font-default">Expired</span> <span data-ng-if="item.DateStatus == 2" class="label label-success font-default">Live</span> <span data-ng-if="item.DateStatus == 3" class="label label-future font-default">Future</span></td><td>{{item.DateCreated | date:"MM/dd/yy"}}<br>{{item.DateCreated | date:"h:mm a"}}<br>{{item.AddedByAgentId}}</td><td><button title=Edit class="btn btn-default btn-success btn-xs" data-ng-click=open(item.Id);><i class="glyphicon glyphicon-edit"></i></button> <button title=Delete class="btn btn-default btn-danger btn-xs" ladda=deleteTracker.active() data-ng-click=delete(item.Id);><i class="glyphicon glyphicon-remove"></i></button></td></tr></tbody></table></spinner-overlay><uib-pagination boundary-links=true total-items=totalItems items-per-page=filter.Paging.PageItemCount data-ng-model=filter.Paging.PageIndex previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; data-ng-change="pageChanged();scrollTo(\'data-grid\');"></uib-pagination></div></div>'),a.put("app/modules/product/partials/inventoryCategories.html",'<div data-ng-if="item.SubItems && item.SubItems.length > 0"><a class="btn btn-link pull-left" data-nodrag data-ng-click=toggle(this)><i class=glyphicon ng-class="{\'glyphicon-chevron-right\': collapsed, \'glyphicon-chevron-down\': !collapsed}"></i></a></div><div ui-tree-handle><div class="ya-treeview-content clearfix"><div class=line><label>{{item.Name}}</label></div><div class=ya-treview-buttons data-nodrag><a class="btn btn-success btn-xs" title=Add data-ng-if=item.AllowAdd nodrag data-ng-click=add(item.Id)><i class="glyphicon glyphicon-plus"></i></a> <a class="btn btn-info btn-xs" title=Edit nodrag data-ng-click=edit(item.Id)><i class="glyphicon glyphicon-edit"></i></a> <a class="btn btn-danger btn-xs" title=Delete nodrag data-ng-if="item.AllowDelete && (!item.SubItems || item.SubItems.length == 0)" ladda=deleteTracker.active() data-ng-click=delete(item.Id)><i class="glyphicon glyphicon-remove"></i></a></div></div></div><ol ui-tree-nodes="" data-ng-model=item.SubItems data-ng-class="{hidden: collapsed}" data-type={{item.Id}}><li ng-repeat="item in item.SubItems" ui-tree-node data-ng-include="\'app/modules/product/partials/inventoryCategories.html\'"></li></ol>'),a.put("app/modules/product/partials/inventoryCategoriesAssign.html",'<div data-ng-if="item.SubItems && item.SubItems.length > 0"><a class="btn btn-link pull-left" data-nodrag data-ng-click=toggle(this)><i class=glyphicon ng-class="{\'glyphicon-chevron-right\': collapsed, \'glyphicon-chevron-down\': !collapsed}"></i></a></div><div ui-tree-handle><div class="ya-treeview-content clearfix"><div class=line data-ng-class="{\'radio-inline\': !item.SubItems || item.SubItems.length == 0}"><label><input data-ng-if="!item.SubItems || item.SubItems.length == 0" data-ng-model=product.InventoryCategoryId value={{item.Id}} type=radio>{{item.Name}}</label></div></div></div><ol ui-tree-nodes="" data-ng-model=item.SubItems data-ng-class="{hidden: collapsed}"><li ng-repeat="item in item.SubItems" ui-tree-node collapsed=true data-ng-include="\'app/modules/product/partials/inventoryCategoriesAssign.html\'"></li></ol>'),a.put("app/modules/product/partials/inventoryCategoriesTreeView.html",'<div class="container-fluid inventory-categories"><div class=left-pane-controls><div class="well container-fluid"><div><button class="btn btn-success width-160px" ladda=editTracker.active() data-ng-click=save()>Save</button></div></div></div><div class=right-pane-main><div class=container-fluid><div class=row><div class="container container-left"><div class="well row categories"><spinner-overlay data-loading=refreshTracker.active()><span class=legend>Manage Sales Categories</span> <a class="btn btn-success btn-xs" title=Add nodrag data-ng-click=add(null)><i class="glyphicon glyphicon-plus"></i></a> <button data-ng-if=!categoriesExpanded data-ng-click=updateCategoriesCollapsed(true); class="btn btn-primary btn-xs expand-button">Expand All</button> <button data-ng-if=categoriesExpanded data-ng-click=updateCategoriesCollapsed(false); class="btn btn-primary btn-xs expand-button">Collapse All</button><div ui-tree=treeOptions class=ya-treeview><ol ui-tree-nodes data-ng-model=rootCategories data-type=0><li ng-repeat="item in rootCategories" ui-tree-node data-ng-include="\'app/modules/product/partials/inventoryCategories.html\'"></li></ol></div></spinner-overlay></div></div></div></div></div></div>'),a.put("app/modules/product/partials/inventoryCategoryDetail.html",'<div class=modal-header><h3 class=modal-title>Add / Edit Sales Category</h3></div><div class=modal-body><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.submitted}" novalidate><fieldset><div class=form-group><label for=name class="col-md-3 control-label">Name</label><div class=col-md-9><input name=Name class=form-control placeholder=Name data-ng-model=category.Name required><div class=error-container ng-show="forms.submitted && forms.form.Name.$invalid"><small class=error ng-show=forms.form.Name.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Name")}}</small></div></div></div></fieldset></form></div><div class=modal-footer><button class="btn btn-success" ladda=saveTracker.active() data-ng-click=save()>Save</button> <button class="btn btn-default" data-ng-click=cancel()>Cancel</button></div>'),a.put("app/modules/product/partials/manageProductsOrderPopup.html",'<div class=modal-header><h3 class=modal-title>Manage Products</h3></div><div class="modal-body manage-products-order"><spinner-overlay data-loading=refreshTracker.active()><form class=form-horizontal name=forms.form data-ng-class="{submitted: forms.submitted}" novalidate unsaved-warning-form><fieldset><div ui-sortable=sortableOptions data-ng-model=items><div data-ng-repeat="item in items" class=variant-panel><div class=form-horizontal ng-form=i{{$index}} novalidate unsaved-warning-form><fieldset><div class=form-group><div class="col-md-12 padding-0px"><div class="col-md-1 form-control-static"><div class="sortable-move btn btn-info"><i class="glyphicon glyphicon-sort"></i></div></div><div class="col-md-5 form-control-static"><span>{{item.Name}}<br>{{item.SubTitle}}</span></div><div class="col-md-2 form-control-static"><span data-ng-repeat="sku in item.SKUs"><span class=sku data-ng-class="{\'not-in-stock\': !sku.InStock}">{{sku.Code}}</span> {{$last!=true ? " / " : ""}}</span></div><div class="col-md-1 form-control-static"><span data-ng-if="item.StatusCode == 2" class="label label-info font-default">{{getReferenceItem(ReferenceData.RecordStatuses, item.StatusCode).Text}}</span> <span data-ng-if="item.StatusCode == 1" class="label label-warning font-default">{{getReferenceItem(ReferenceData.RecordStatuses, item.StatusCode).Text}}</span></div><div class="col-md-2 form-control-static"><span data-ng-if="item.IdVisibility==1" class="label label-info font-default">All</span> <span data-ng-if="item.IdVisibility==2" class="label label-wholesale font-default">Wholesale Only</span> <span data-ng-if="item.IdVisibility==3" class="label label-retail font-default">Retail Only</span> <span data-ng-if=!item.IdVisibility class="label label-warning font-default">Hidden</span></div><div class="col-md-1 form-control-static"><div class=pull-right><button class="btn btn-danger" data-ng-click=deleteProduct($index)>Delete</button></div></div></div></div></fieldset></div></div></div></fieldset></form></spinner-overlay><div ng-controller=productsSearchController onload="name = \'Products\'" data-ng-include="\'app/modules/product/partials/productsSearchList.html\'"></div></div><div class=modal-footer><button class="btn btn-success" ladda=refreshTracker.active() data-ng-click=save()>Save</button> <button class="btn btn-default" data-ng-click=cancel()>Cancel</button></div>'),a.put("app/modules/product/partials/outOfStocksList.html",'<div class="container-fluid product-out-os-stock-requests"><div class=well><span class=legend>Out of Stock Requests</span><div class="form-group btn-line"><button data-ng-click=delete(); class="btn btn-danger pull-right">Delete Emails</button> <button data-ng-click=send(); class="btn btn-primary pull-right margin-right-25px">Send Emails</button></div><spinner-overlay data-loading=refreshTracker.active()><table class="table table-striped"><thead><tr><th class=in-stock>In Stock</th><th>Name</th><th>Email</th><th>Date</th><th class=selected>Selected</th></tr></thead><tbody><tr class=container-row data-ng-repeat-start="item in items" data-ng-click="item.RequestsVisible=!item.RequestsVisible"><td><span data-ng-if=item.InStock class="label label-success font-default">Yes</span> <span data-ng-if=!item.InStock class="label label-danger font-default">No</span></td><td colspan=3><a target=_self data-ng-click=$event.stopPropagation() ui-sref="index.oneCol.productDetail({id: item.IdProduct})">{{::item.Name}}</a></td><td><input data-ng-model=item.IsSelected type=checkbox data-ng-click="$event.stopPropagation(); containerIsSelectedChanged(item);"></td></tr><tr data-ng-class="{\'hidden\': !item.RequestsVisible}" class=request-row data-ng-repeat="request in item.Requests"><td></td><td>{{::request.Name}}</td><td>{{::request.Email}}</td><td>{{::request.DateCreated | date:"MM/dd/yy"}} {{::request.DateCreated | date:"h:mm a"}}</td><td><input data-ng-model=request.IsSelected type=checkbox></td></tr><tr class=hidden data-ng-repeat-end></tr></tbody></table></spinner-overlay></div></div>'),a.put("app/modules/product/partials/pendingProductReviewsList.html",'<div class=container-fluid><div class=well><span class=legend>Manage All Pending Reviews</span><div class="row form-group"><div class=col-md-12><button class="btn btn-info btn-right width-180px" ui-sref=index.oneCol.manageProductReviews>Manage All Live Reviews</button></div></div><spinner-overlay data-loading=refreshTracker.active()><table id=data-grid class="table table-striped table-hover"><thead><tr><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'ProductName\')"><span>Product Name</span> <span data-ng-if="filter.Sorting.Path == \'ProductName\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'DateCreated\')"><span>Submitted</span> <span data-ng-if="filter.Sorting.Path == \'DateCreated\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Rating\')"><span>Rating</span> <span data-ng-if="filter.Sorting.Path == \'Rating\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th>Actions</th></tr></thead><tbody><tr data-ng-repeat="productReview in productReviews"><td>{{productReview.ProductName}}</td><td>{{productReview.DateCreated | date:"MM/dd/yy"}}<br>{{productReview.DateCreated | date:"h:mm a"}}</td><td><stars data-ng-model=productReview.Rating></stars></td><td><button title=Edit class="btn btn-default btn-success btn-xs" data-ng-click=edit(productReview.Id);><i class="glyphicon glyphicon-edit"></i></button> <button title=Delete class="btn btn-default btn-danger btn-xs" ladda=deleteTracker.active() data-ng-click=delete(productReview.Id);><i class="glyphicon glyphicon-remove"></i></button></td></tr></tbody></table></spinner-overlay><uib-pagination boundary-links=true total-items=totalItems items-per-page=filter.Paging.PageItemCount data-ng-model=filter.Paging.PageIndex previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; data-ng-change="pageChanged();scrollTo(\'data-grid\');"></uib-pagination></div></div>'),a.put("app/modules/product/partials/productCategoriesReordering.html",'<div data-ng-if="item.SubItems && item.SubItems.length > 0"><a class="btn btn-link pull-left" data-nodrag data-ng-click=toggle(this)><i class=glyphicon ng-class="{\'glyphicon-chevron-right\': collapsed, \'glyphicon-chevron-down\': !collapsed}"></i></a></div><div ui-tree-handle><div class="ya-treeview-content clearfix"><div class=line><label>{{item.Name}}</label><span data-ng-if="item.StatusCode == 1" class="label label-warning category-status">Hidden</span> <span data-ng-if="item.StatusCode == 2 && item.Assigned == 2" class="label label-wholesale category-status">Wholesale</span></div><div class=ya-treview-buttons data-nodrag><a class="btn btn-success btn-xs" title=Add nodrag data-ng-click=add(item.Id)><i class="glyphicon glyphicon-plus"></i></a> <a class="btn btn-info btn-xs" title=Edit nodrag data-ng-click=open(item.Id)><i class="glyphicon glyphicon-edit"></i></a> <a class="btn btn-purple btn-xs" title="Manage Products Order" nodrag data-ng-click=productsOrder(item.Id)><i class="glyphicon glyphicon-th"></i></a> <a class="btn btn-danger btn-xs" title=Delete nodrag data-ng-if="!item.SubItems || item.SubItems.length == 0" ladda=deleteTracker.active() data-ng-click=delete(item.Id)><i class="glyphicon glyphicon-remove"></i></a></div></div></div><ol ui-tree-nodes="" data-ng-model=item.SubItems data-ng-class="{hidden: collapsed}"><li ng-repeat="item in item.SubItems" ui-tree-node data-ng-include="\'app/modules/product/partials/productCategoriesReordering.html\'"></li></ol>'),a.put("app/modules/product/partials/productCategoriesStatistic.html",'<div class="container-fluid product-categories-statistic"><div class=well><span class=legend>Category Sales Report</span><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.submitted}" novalidate><fieldset><div class="row form-group"><div class=col-md-2><p class=input-group><input name=From class=form-control placeholder=From uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.From is-open=fromOpened data-ng-change=filterChanged(); required> <span class=input-group-btn><button type=button class="btn btn-default" ng-click="stopPropagation($event); fromOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p></div><div class=col-md-2><p class=input-group><input name=To class=form-control placeholder=To uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.To is-open=toOpened data-ng-change=filterChanged(); required> <span class=input-group-btn><button type=button class="btn btn-default" ng-click="stopPropagation($event); toOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p></div></div></fieldset></form><div class="row form-group"><div class=col-md-12><button class="btn btn-info" data-ng-click=filterCategories(); type=button>Filter</button> <a target=_self class="btn btn-primary pull-right" data-ng-href={{options.exportUrl}}>Export</a></div></div><spinner-overlay data-loading=refreshCategoriesTracker.active()><div class="categories full-lines margin-bottom-15px"><span>&nbsp;</span> <button data-ng-if=!categoriesExpanded data-ng-click=updateCategoriesCollapsed(true); class="btn btn-primary btn-xs expand-button">Expand All</button> <button data-ng-if=categoriesExpanded data-ng-click=updateCategoriesCollapsed(false); class="btn btn-primary btn-xs expand-button">Collapse All</button><div ui-tree data-drag-enabled=false class=ya-treeview><ol ui-tree-nodes data-ng-model=rootCategory.SubItems><li ng-repeat="item in rootCategory.SubItems" collapsed=true ui-tree-node data-ng-include="\'app/modules/product/partials/productCategoriesStatisticTreeItem.html\'"></li></ol></div></div></spinner-overlay><span data-ng-if=items class=legend>Skus Statistic</span><spinner-overlay data-loading=refreshSkusTracker.active()><table data-ng-if=items class="table table-striped"><thead><tr><th>Product SKU</th><th>Product Name</th><th>Category</th><th>Subcategory</th><th>Item Price</th><th>Quantity Sold</th><th>Sales Amount</th></tr></thead><tbody><tr data-ng-repeat="item in items"><td>{{::item.Code}}</td><td>{{::item.ProductName}}</td><td>{{::item.ParentCategory}}</td><td>{{::item.Category}}</td><td>{{::item.Price | currency}} / {{::item.WholesalePrice | currency}}</td><td>{{::item.Quantity}}</td><td>{{::item.Amount | currency}}</td></tr></tbody></table></spinner-overlay></div></div>'),a.put("app/modules/product/partials/productCategoriesStatisticTreeItem.html",'<div data-ng-if="item.SubItems && item.SubItems.length > 0"><a class="btn btn-link pull-left" data-nodrag data-ng-click=toggle(this)><i class=glyphicon ng-class="{\'glyphicon-chevron-right\': collapsed, \'glyphicon-chevron-down\': !collapsed}"></i></a></div><div ui-tree-handle data-ng-if="item.SubItems && item.SubItems.length > 0"><div class="ya-treeview-content clearfix"><div class=line><div class=fixed-right><span class=amount>{{item.Amount | currency}}</span> <span class=percent>{{item.Percent | number:2}} %</span></div><div class=flex-left><label>{{item.Name}}</label></div></div></div></div><div ui-tree-handle data-ng-if="!item.SubItems || item.SubItems.length == 0" data-ng-click=selectCategory(item.Id);><div class="ya-treeview-content clearfix"><div class=line><div class=fixed-right><span class=amount>{{item.Amount | currency}}</span> <span class=percent>{{item.Percent | number:2}} %</span></div><div class=flex-left><label>{{item.Name}}</label></div></div></div></div><ol ui-tree-nodes="" data-ng-model=item.SubItems data-ng-class="{hidden: collapsed}"><li ng-repeat="item in item.SubItems" ui-tree-node collapsed=true data-ng-include="\'app/modules/product/partials/productCategoriesStatisticTreeItem.html\'"></li></ol>'),a.put("app/modules/product/partials/productCategoriesTreeView.html",'<div class="container-fluid product-categories"><div class=left-pane-controls><div class="well container-fluid"><div><button class="btn btn-success width-160px" ladda=editTracker.active() data-ng-click=save()>Save</button></div></div></div><div class=right-pane-main><div class=container-fluid><div class=row><div class="container container-left"><div class="well row categories"><spinner-overlay data-loading=refreshTracker.active()><span class=legend>Manage Product Categories</span> <a class="btn btn-success btn-xs" title=Add nodrag data-ng-click=add(rootCategory.Id)><i class="glyphicon glyphicon-plus"></i></a> <button data-ng-if=!categoriesExpanded data-ng-click=updateCategoriesCollapsed(true); class="btn btn-primary btn-xs expand-button">Expand All</button> <button data-ng-if=categoriesExpanded data-ng-click=updateCategoriesCollapsed(false); class="btn btn-primary btn-xs expand-button">Collapse All</button><div ui-tree class=ya-treeview><ol ui-tree-nodes data-ng-model=rootCategory.SubItems><li ng-repeat="item in rootCategory.SubItems" ui-tree-node data-ng-include="\'app/modules/product/partials/productCategoriesReordering.html\'"></li></ol></div></spinner-overlay></div></div></div></div></div></div>'),a.put("app/modules/product/partials/productCategoryDetail.html",'<div class=container-fluid><div class=left-pane-controls><div class="well container-fluid"><div><button class="btn btn-success width-160px" ladda=editTracker.active() data-ng-click=save()>Save</button></div><div class="btn-group margin-top-10px"><a target=_blank href={{previewUrl}} data-ng-if=previewUrl class="btn btn-info width-80px">Preview</a> <a data-ng-if=!previewUrl class="btn btn-info width-80px">Preview</a> <button cancel-button-default-state=index.oneCol.manageProductCategories cancel-button class="btn btn-default width-80px">Cancel</button></div><div class=margin-top-10px><button ui-sref=index.oneCol.manageProductCategories class="btn btn-primary width-160px">Manage All</button></div></div><div ng-controller=objectHistorySectionController onload="name = \'History\'" data-ng-include="\'app/modules/setting/partials/objectHistorySection.html\'"></div></div><div class=right-pane-main><div class=container-fluid><div class=row><uib-tabset><uib-tab heading=Details active=detailsTab.active><div class="container container-left"><div class="well row"><spinner-overlay data-loading=refreshTracker.active()><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.form.submitted}" novalidate><fieldset><div class=form-group><label for=type class="col-md-3 control-label">Status</label><div class=col-md-9><select class=form-control name=Status data-ng-model=productCategory.Status ng-options="status.Key as status.Text for status in statuses"></select></div></div><div class=form-group><label for=view class="col-md-3 control-label">Product Display View</label><div class=col-md-9><select class=form-control name=ViewType data-ng-model=productCategory.ViewType ng-options="item.Key as item.Text for item in ReferenceData.ProductCategoryViewTypes" required></select><div class=error-container ng-show="forms.form.submitted && forms.form.ViewType.$invalid"><small class=error ng-show=forms.form.ViewType.$error.server>{{serverMessages.GetMessage(\'ViewType\')}}</small></div></div></div><span class=legend>Product Category Details</span><div class=form-group><label for=name class="col-md-3 control-label">Name</label><div class=col-md-9><input name=Name class=form-control placeholder=Name data-ng-model=productCategory.Name required><div class=error-container ng-show="forms.form.submitted && forms.form.Name.$invalid"><small class=error ng-show=forms.form.Name.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Name")}}</small> <small class=error ng-show=forms.form.Name.$error.server>{{serverMessages.GetMessage(\'Name\')}}</small></div></div></div><div class=form-group><label for=url class="col-md-3 control-label">URL</label><div class=col-md-9><input name=Url class=form-control placeholder=URL data-ng-model=productCategory.Url ng-pattern="/^[A-Za-z0-9]{1}[A-Za-z0-9-_]{3}[A-Za-z0-9-_]*$/" required><div class=error-container ng-show="forms.form.submitted && forms.form.Url.$invalid"><small class=error ng-show=forms.form.Url.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Url")}}</small> <small class=error ng-show=forms.form.Url.$error.pattern>{{getValidationMessage("ValidationMessages.FieldContentUrlInvalidFormat","GeneralFieldNames.Url")}}</small> <small class=error ng-show=forms.form.Url.$error.server>{{serverMessages.GetMessage(\'Url\')}}</small></div></div></div><div class=form-group><label for=shortDescription class="col-md-3 control-label">Short Description</label><div class=col-md-9><textarea type=text name=Description class=form-control placeholder="Short Description" rows=10 data-ng-model=productCategory.Description></textarea><div class=error-container ng-show="forms.form.submitted && forms.form.Description.$invalid"><small class=error ng-show=forms.form.Description.$error.server>{{serverMessages.GetMessage(\'Description\')}}</small></div></div></div><div class=form-group><label for=cbHideLongDescription class="col-md-3 control-label"></label><div class=col-md-9><div class=checkbox><label><input type=checkbox id=cbHideLongDescription name=HideLongDescription data-ng-model="productCategory.HideLongDescription"> <strong>Hide Description</strong></label></div></div></div><div class=form-group><label for=longDescription class="col-md-3 control-label">Top Long Description</label><div class=col-md-9><div class=input-group data-ng-show=!longDescriptionExpanded><input name=LongDescription class=form-control id=short placeholder="Top Long Description" disabled data-ng-model=productCategory.LongDescription> <span class=input-group-btn><a data-ng-click="toogleEditorState(\'longDescriptionExpanded\')" class="btn btn-default">Expand</a></span></div><div class=toogle-editor data-ng-show=longDescriptionExpanded><a data-ng-click="toogleEditorState(\'longDescriptionExpanded\')" class="btn btn-default">Hide</a></div><div data-ng-show=longDescriptionExpanded text-angular ta-unsafe-sanitizer=true data-ng-model=productCategory.LongDescription></div></div></div><div class=form-group><label for=cbHideLongDescriptionBottom class="col-md-3 control-label"></label><div class=col-md-9><div class=checkbox><label><input type=checkbox id=cbHideLongDescriptionBottom name=HideLongDescriptionBottom data-ng-model="productCategory.HideLongDescriptionBottom"> <strong>Hide Description</strong></label></div></div></div><div class=form-group><label for=longDescriptionBottom class="col-md-3 control-label">Bottom Long Description</label><div class=col-md-9><div class=input-group data-ng-show=!longDescriptionBottomExpanded><input name=LongDescriptionBottom class=form-control id=short placeholder="Bottom Long Description" disabled data-ng-model=productCategory.LongDescriptionBottom> <span class=input-group-btn><a data-ng-click="toogleEditorState(\'longDescriptionBottomExpanded\')" class="btn btn-default">Expand</a></span></div><div class=toogle-editor data-ng-show=longDescriptionBottomExpanded><a data-ng-click="toogleEditorState(\'longDescriptionBottomExpanded\')" class="btn btn-default">Hide</a></div><div data-ng-show=longDescriptionBottomExpanded text-angular data-ng-model=productCategory.LongDescriptionBottom></div></div></div><div class=form-group><label for=SmallImage class="col-md-3 control-label">Small Image</label><div class=col-md-9><filefield name=SmallImage placeholder="Small Image" ng-model=productCategory.FileImageSmallUrl></filefield></div></div><div class=form-group><label for=LargeImage class="col-md-3 control-label">Large Image</label><div class=col-md-9><filefield name=LargeImage placeholder="Large Image" ng-model=productCategory.FileImageLargeUrl></filefield></div></div><span class=legend>SEO</span><div class=form-group><label for=meta_title class="col-md-3 control-label">Meta Title</label><div class=col-md-9><input name=Title class=form-control placeholder="Meta Title" data-ng-model=productCategory.Title><div class=error-container ng-show="forms.form.submitted && forms.form.Title.$invalid"><small class=error ng-show=forms.form.Title.$error.server>{{serverMessages.GetMessage(\'Title\')}}</small></div></div></div><div class=form-group><label for=meta_description class="col-md-3 control-label">Meta Description</label><div class=col-md-9><textarea type=text name=MetaDescription class=form-control placeholder="Meta Description" rows=10 data-ng-model=productCategory.MetaDescription></textarea><div class=error-container ng-show="forms.form.submitted && forms.form.MetaDescription.$invalid"><small class=error ng-show=forms.form.MetaDescription.$error.server>{{serverMessages.GetMessage(\'MetaDescription\')}}</small></div></div></div><span class=legend>Navigation</span><div class=form-group><label for=nav_label class="col-md-3 control-label">Nav Label</label><div class=col-md-9><input name="Nav Label" class=form-control placeholder="Nav Label" data-ng-model=productCategory.NavLabel><div class=error-container ng-show="forms.form.submitted && forms.form.NavLabel.$invalid"><small class=error ng-show=forms.form.NavLabel.$error.server>{{serverMessages.GetMessage(\'NavLabel\')}}</small></div></div></div><div class=form-group><label for=display class="col-md-3 control-label">Display</label><div class=col-md-9><select class=form-control name=NavIdVisible data-ng-model=productCategory.NavIdVisible ng-options="item.Key as item.Text for item in visibleOptions"></select><div class=error-container ng-show="forms.form.submitted && forms.form.NavIdVisible.$invalid"><small class=error ng-show=forms.form.NavIdVisible.$error.server>{{serverMessages.GetMessage(\'NavIdVisible\')}}</small></div></div></div></fieldset></form></spinner-overlay></div></div></uib-tab><uib-tab heading=Template><div class="container container-left"><div class="well row"><spinner-overlay data-loading=refreshTracker.active()><form class=form-horizontal><fieldset><div data-ng-if=validatePermission(7) class=form-group><label for=masterTemplate class="col-md-3 control-label">Master Template</label><div class=col-md-9><select class=form-control name=MasterTemplate data-ng-model=productCategory.MasterContentItemId ng-options="master.Id as master.Name for master in masters"></select></div></div><button class="btn btn-info width-200px margin-bottom-10px" data-ng-if="validatePermission(7) && productCategory.MasterContentItemId!=0" data-ng-click=goToMaster(productCategory.MasterContentItemId);>Manage Master Template</button> <span class=legend>Manage Template</span><div class=form-group><div class=col-md-12><div data-ng-model=productCategory.Template ui-ace-ttl master-id=productCategory.MasterContentItemId></div></div></div></fieldset></form></spinner-overlay></div></div></uib-tab></uib-tabset></div></div></div></div>'),
a.put("app/modules/product/partials/productDetail.html",'<div class="container-fluid product-edit"><div class=left-pane-controls><div class="well container-fluid"><div><button data-ng-click=save() class="btn btn-success width-160px" unsaved-warning-clear>Save</button></div><div class="btn-group margin-top-10px"><a target=_blank href={{previewUrl}} data-ng-if=previewUrl class="btn btn-info width-80px">View</a> <a data-ng-if=!previewUrl class="btn btn-info width-80px">View</a> <button cancel-button-default-state=index.oneCol.manageProducts cancel-button class="btn btn-default width-80px" unsaved-warning-clear>Cancel</button></div><div class=margin-top-10px><button class="btn btn-primary width-160px" ui-sref=index.oneCol.manageProducts>Manage All</button></div></div><div ng-controller=objectHistorySectionController onload="name = \'History\'" data-ng-include="\'app/modules/setting/partials/objectHistorySection.html\'"></div></div><div class=right-pane-main><div class=container-fluid><div class=row><uib-tabset active=options.activeTabIndex><uib-tab heading="Parent Details" index=parentDetailsTab.index><div class="container container-left"><div class="well row"><spinner-overlay data-loading=refreshTracker.active()><form class=form-horizontal name=forms.parentDetails data-ng-submit=save() data-ng-class="{submitted: forms.submitted}" novalidate unsaved-warning-form><fieldset><div class=form-group><label for="" class="col-md-3 control-label">Product ID</label><div class="col-md-9 form-control-static" data-ng-if=product.Id><span>{{product.Id}}</span></div></div><span class=legend>Product Type</span><div class=form-group><label for=type class="col-md-3 control-label">Type</label><div class=col-md-9><select class=form-control name=Type data-ng-model=product.Type ng-options="type.Key as type.Text for type in types"></select></div></div><span class=legend>Display</span><div class=form-group><label for=active class="col-md-3 control-label">Active</label><div class=col-md-9><div class=checkbox><label><input type=checkbox name=StatusCode data-ng-model=product.StatusCode data-ng-true-value=2 data-ng-false-value="1"></label></div></div></div><div class=form-group><label for=type class="col-md-3 control-label">Storefront</label><div class=col-md-9><select class=form-control name=IdVisibility data-ng-model=product.IdVisibility ng-options="item.Key as item.Text for item in ReferenceData.VisibleOptions"></select></div></div><span class=legend>Name, Clean URL & Short Description</span><div class=form-group><label for=name class="col-md-3 control-label">Name</label><div class=col-md-9><input name=Name class=form-control placeholder=Name data-ng-model=product.Name required><div class=error-container ng-show="forms.submitted && forms.parentDetails.Name.$invalid"><small class=error ng-show=forms.parentDetails.Name.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Name")}}</small> <small class=error ng-show=forms.parentDetails.Name.$error.server>{{serverMessages.GetMessage(\'Name\')}}</small></div></div></div><div class=form-group><label for=name class="col-md-3 control-label">Sub Title</label><div class=col-md-9><input name=SubTitle class=form-control placeholder="Sub Title" data-ng-model=product.SubTitle><div class=error-container ng-show="forms.submitted && forms.parentDetails.SubTitle.$invalid"><small class=error ng-show=forms.parentDetails.SubTitle.$error.server>{{serverMessages.GetMessage(\'SubTitle\')}}</small></div></div></div><div class=form-group><label for=url class="col-md-3 control-label">URL</label><div class=col-md-9><input name=Url class=form-control placeholder=URL data-ng-model=product.Url ng-pattern="/^[A-Za-z0-9]{1}[A-Za-z0-9-_]{3}[A-Za-z0-9-_]*$/" required><div class=error-container ng-show="forms.submitted && forms.parentDetails.Url.$invalid"><small class=error ng-show=forms.parentDetails.Url.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Url")}}</small> <small class=error ng-show=forms.parentDetails.Url.$error.pattern>{{getValidationMessage("ValidationMessages.FieldContentUrlInvalidFormat","GeneralFieldNames.Url")}}</small> <small class=error ng-show=forms.parentDetails.Url.$error.server>{{serverMessages.GetMessage(\'Url\')}}</small></div></div></div><div class=form-group><label for=ShortDescription class="col-md-3 control-label">Short Description</label><div class=col-md-9><div class=input-group data-ng-show=!ShortDescriptionExpanded><input name=ShortDescription class=form-control id=short placeholder="Short Description" disabled data-ng-model=product.ShortDescription> <span class=input-group-btn><a data-ng-click="toogleEditorState(\'ShortDescriptionExpanded\')" class="btn btn-default">Expand</a></span></div><div class=toogle-editor data-ng-show=ShortDescriptionExpanded><a data-ng-click="toogleEditorState(\'ShortDescriptionExpanded\')" class="btn btn-default">Hide</a></div><div data-ng-show=ShortDescriptionExpanded text-angular data-ng-model=product.ShortDescription></div></div></div><span class=legend>Tabs</span><div class=form-group><label for=Description class="col-md-3 control-label">Description</label><div class=col-md-4><input name=DescriptionTitleOverride class=form-control placeholder="Title Overwrite" data-ng-model=product.DescriptionTitleOverride data-max-characters=25 data-ng-maxlength=25><div class=error-container ng-show="forms.submitted && forms.parentDetails.DescriptionTitleOverride.$invalid"><small class=error ng-show=forms.parentDetails.DescriptionTitleOverride.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["Title Overwrite", "25"])}}</small> <small class=error ng-show=forms.parentDetails.DescriptionTitleOverride.$error.server>{{serverMessages.GetMessage(\'DescriptionTitleOverride\')}}</small></div></div><label for=url class="pull-left padding-lr-0px form-control-static">Title Overwrite</label><div class=col-md-3><div class=checkbox><label><input type=checkbox name=DescriptionHide data-ng-model=product.DescriptionHide> <strong>Hide Tab</strong></label></div></div></div><div class=form-group><label for=Description class="col-md-3 control-label"></label><div class=col-md-9><div class=input-group data-ng-show=!DescriptionExpanded><input name=Description class=form-control id=short placeholder=Description disabled data-ng-model=product.Description> <span class=input-group-btn><a data-ng-click="toogleEditorState(\'DescriptionExpanded\')" class="btn btn-default">Expand</a></span></div><div class=toogle-editor data-ng-show=DescriptionExpanded><a data-ng-click="toogleEditorState(\'DescriptionExpanded\')" class="btn btn-default">Hide</a></div><div data-ng-show=DescriptionExpanded text-angular data-ng-model=product.Description></div></div></div><div class=form-group data-ng-if="!(product.Type==3 || product.Type==4)"><label for=Description class="col-md-3 control-label">Nutrition & Ingredients</label><div class=col-md-4><input name=IngredientsTitleOverride class=form-control placeholder="Title Overwrite" data-ng-model=product.IngredientsTitleOverride data-max-characters=25 data-ng-maxlength=25><div class=error-container ng-show="forms.submitted && forms.parentDetails.IngredientsTitleOverride.$invalid"><small class=error ng-show=forms.parentDetails.IngredientsTitleOverride.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["Title Overwrite", "25"])}}</small> <small class=error ng-show=forms.parentDetails.IngredientsTitleOverride.$error.server>{{serverMessages.GetMessage(\'IngredientsTitleOverride\')}}</small></div></div><label for=url class="pull-left padding-lr-0px form-control-static">Title Overwrite</label><div class=col-md-3><div class=checkbox><label><input type=checkbox name=IngredientsHide data-ng-model=product.IngredientsHide> <strong>Hide Tab</strong></label></div></div></div><div class=form-group data-ng-if="!(product.Type==3 || product.Type==4)"><label for=Ingredients class="col-md-3 control-label"></label><div class=col-md-9><div class=input-group data-ng-show=!IngredientsExpanded><input name=Ingredients class=form-control id=short placeholder=Ingredients disabled data-ng-model=product.Ingredients> <span class=input-group-btn><a data-ng-click="toogleEditorState(\'IngredientsExpanded\')" class="btn btn-default">Expand</a></span></div><div class=toogle-editor data-ng-show=IngredientsExpanded><a data-ng-click="toogleEditorState(\'IngredientsExpanded\')" class="btn btn-default">Hide</a></div><div data-ng-show=IngredientsExpanded text-angular data-ng-model=product.Ingredients></div></div></div><div class=form-group data-ng-if="!(product.Type==3 || product.Type==4)"><label for=Description class="col-md-3 control-label">Recipes</label><div class=col-md-4><input name=RecipesTitleOverride class=form-control placeholder="Title Overwrite" data-ng-model=product.RecipesTitleOverride data-max-characters=25 data-ng-maxlength=25><div class=error-container ng-show="forms.submitted && forms.parentDetails.RecipesTitleOverride.$invalid"><small class=error ng-show=forms.parentDetails.RecipesTitleOverride.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["Title Overwrite", "25"])}}</small> <small class=error ng-show=forms.parentDetails.RecipesTitleOverride.$error.server>{{serverMessages.GetMessage(\'RecipesTitleOverride\')}}</small></div></div><label for=url class="pull-left padding-lr-0px form-control-static">Title Overwrite</label><div class=col-md-3><div class=checkbox><label><input type=checkbox name=IngredientsHide data-ng-model=product.RecipesHide> <strong>Hide Tab</strong></label></div></div></div><div class=form-group data-ng-if="!(product.Type==3 || product.Type==4)"><label for=Recipes class="col-md-3 control-label"></label><div class=col-md-9><div class=input-group data-ng-show=!RecipesExpanded><input name=Recipes class=form-control id=short placeholder=Recipes disabled data-ng-model=product.Recipes> <span class=input-group-btn><a data-ng-click="toogleEditorState(\'RecipesExpanded\')" class="btn btn-default">Expand</a></span></div><div class=toogle-editor data-ng-show=RecipesExpanded><a data-ng-click="toogleEditorState(\'RecipesExpanded\')" class="btn btn-default">Hide</a></div><div data-ng-show=RecipesExpanded text-angular data-ng-model=product.Recipes></div></div></div><div class=form-group data-ng-if="!(product.Type==3 || product.Type==4)"><label for=Description class="col-md-3 control-label">Serving/Storage</label><div class=col-md-4><input name=ServingTitleOverride class=form-control placeholder="Title Overwrite" data-ng-model=product.ServingTitleOverride data-max-characters=25 data-ng-maxlength=25><div class=error-container ng-show="forms.submitted && forms.parentDetails.ServingTitleOverride.$invalid"><small class=error ng-show=forms.parentDetails.ServingTitleOverride.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["Title Overwrite", "25"])}}</small> <small class=error ng-show=forms.parentDetails.ServingTitleOverride.$error.server>{{serverMessages.GetMessage(\'ServingTitleOverride\')}}</small></div></div><label for=url class="pull-left padding-lr-0px form-control-static">Title Overwrite</label><div class=col-md-3><div class=checkbox><label><input type=checkbox name=ServingHide data-ng-model=product.ServingHide> <strong>Hide Tab</strong></label></div></div></div><div class=form-group data-ng-if="!(product.Type==3 || product.Type==4)"><label for=Serving class="col-md-3 control-label"></label><div class=col-md-9><div class=input-group data-ng-show=!ServingExpanded><input name=Serving class=form-control id=short placeholder=Serving/Storage disabled data-ng-model=product.Serving> <span class=input-group-btn><a data-ng-click="toogleEditorState(\'ServingExpanded\')" class="btn btn-default">Expand</a></span></div><div class=toogle-editor data-ng-show=ServingExpanded><a data-ng-click="toogleEditorState(\'ServingExpanded\')" class="btn btn-default">Hide</a></div><div data-ng-show=ServingExpanded text-angular data-ng-model=product.Serving></div></div></div><div class=form-group data-ng-if="!(product.Type==3 || product.Type==4)"><label for=Description class="col-md-3 control-label">Shipping</label><div class=col-md-4><input name=ShippingTitleOverride class=form-control placeholder="Title Overwrite" data-ng-model=product.ShippingTitleOverride data-max-characters=25 data-ng-maxlength=25><div class=error-container ng-show="forms.submitted && forms.parentDetails.ServingTitleOverride.$invalid"><small class=error ng-show=forms.parentDetails.ShippingTitleOverride.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["Title Overwrite", "25"])}}</small> <small class=error ng-show=forms.parentDetails.ShippingTitleOverride.$error.server>{{serverMessages.GetMessage(\'ShippingTitleOverride\')}}</small></div></div><label for=url class="pull-left padding-lr-0px form-control-static">Title Overwrite</label><div class=col-md-3><div class=checkbox><label><input type=checkbox name=ShippingHide data-ng-model=product.ShippingHide> <strong>Hide Tab</strong></label></div></div></div><div class=form-group data-ng-if="!(product.Type==3 || product.Type==4)"><label for=Shipping class="col-md-3 control-label"></label><div class=col-md-9><div class=input-group data-ng-show=!ShippingExpanded><input name=Shipping class=form-control id=short placeholder=Shipping disabled data-ng-model=product.Shipping> <span class=input-group-btn><a data-ng-click="toogleEditorState(\'ShippingExpanded\')" class="btn btn-default">Expand</a></span></div><div class=toogle-editor data-ng-show=ShippingExpanded><a data-ng-click="toogleEditorState(\'ShippingExpanded\')" class="btn btn-default">Hide</a></div><div data-ng-show=ShippingExpanded text-angular data-ng-model=product.Shipping></div></div></div><span class=legend>SEO</span><div class=form-group><label for=meta_title class="col-md-3 control-label">Meta Title</label><div class=col-md-9><input name=MetaTitle class=form-control placeholder="Meta Title" data-ng-model=product.MetaTitle><div class=error-container ng-show="forms.submitted && forms.parentDetails.MetaTitle.$invalid"><small class=error ng-show=forms.parentDetails.MetaTitle.$error.server>{{serverMessages.GetMessage(\'MetaTitle\')}}</small></div></div></div><div class=form-group><label for=meta_description class="col-md-3 control-label">Meta Description</label><div class=col-md-9><textarea type=text name=MetaDescription class=form-control placeholder="Meta Description" rows=10 data-ng-model=product.MetaDescription></textarea><div class=error-container ng-show="forms.submitted && forms.parentDetails.MetaDescription.$invalid"><small class=error ng-show=forms.parentDetails.MetaDescription.$error.server>{{serverMessages.GetMessage(\'MetaDescription\')}}</small></div></div></div><div class=form-group><label for=google_category class="col-md-3 control-label">Google Category</label><div class=col-md-9><select class=form-control name=GoogleCategory data-ng-model=product.GoogleCategory ng-options="googleCategory.Key as googleCategory.Text for googleCategory in googleCategories"><option value="" ng-if=false></option></select></div></div><div class=form-group><label for=meta_title class="col-md-3 control-label">Google Feed Title</label><div class=col-md-9><input name=GoogleFeedTitle class=form-control placeholder="Google Feed Title" data-ng-model=product.GoogleFeedTitle><div class=error-container ng-show="forms.submitted && forms.parentDetails.GoogleFeedTitle.$invalid"><small class=error ng-show=forms.parentDetails.GoogleFeedTitle.$error.server>{{serverMessages.GetMessage(\'GoogleFeedTitle\')}}</small></div></div></div><div class=form-group><label for=meta_description class="col-md-3 control-label">Google Feed Description</label><div class=col-md-9><textarea type=text name=GoogleFeedDescription class=form-control placeholder="Google Feed Description" rows=10 data-ng-model=product.GoogleFeedDescription></textarea><div class=error-container ng-show="forms.submitted && forms.parentDetails.GoogleFeedDescription.$invalid"><small class=error ng-show=forms.parentDetails.GoogleFeedDescription.$error.server>{{serverMessages.GetMessage(\'GoogleFeedDescription\')}}</small></div></div></div><span class=legend>Tax</span><div class=form-group><label for=tax_code class="col-md-3 control-label">Tax Code</label><div class=col-md-9><input name=TaxCode class=form-control placeholder="Tax Code" data-ng-model=product.TaxCode data-ng-minlength=8 data-ng-maxlength=8 data-ng-pattern="/^((?!([pP]0000000))[\\da-zA-Z])*$/"><div class=error-container ng-show="forms.submitted && forms.parentDetails.TaxCode.$invalid"><small class=error ng-show=forms.parentDetails.TaxCode.$error.minlength>Tax Code should be 8 characters long</small> <small class=error ng-show=forms.parentDetails.TaxCode.$error.maxlength>Tax Code should be 8 characters long</small> <small class=error ng-show=forms.parentDetails.TaxCode.$error.pattern>Tax Code should be alphanumeric(P0000000 isn\'t allowed)</small> <small class=error ng-show=forms.parentDetails.TaxCode.$error.server>{{serverMessages.GetMessage(\'TaxCode\')}}</small></div></div></div><span class=legend>Other Settings</span><div class=form-group><label for=special_icon class="col-md-3 control-label">Special Icon</label><div class=col-md-9><select class=form-control name=SpecialIcon data-ng-model=product.SpecialIcon ng-options="specialIcon.Key as specialIcon.Text for specialIcon in specialIcons"><option value="" ng-if=false></option></select></div></div></fieldset></form></spinner-overlay></div></div></uib-tab><uib-tab heading=Images index=imagesTab.index><div class="container container-left"><div class="well row"><spinner-overlay data-loading=refreshTracker.active()><form class=form-horizontal name=forms.images data-ng-submit=save() data-ng-class="{submitted: forms.submitted}" novalidate unsaved-warning-form><fieldset><span class=legend>Product Images</span><div class=form-group><label for=Image class="col-md-3 control-label">Thumbnail</label><div class=col-md-9><filefield name=Thumbnail placeholder=Thumbnail ng-model=product.Thumbnail></filefield></div></div><div class=form-group><label for=Image class="col-md-3 control-label">Main Product</label><div class=col-md-9><filefield name=MainProductImage placeholder="Main Product" ng-model=product.MainProductImage></filefield></div></div></fieldset></form></spinner-overlay></div></div></uib-tab><uib-tab heading="Sub Products" index=subProductsTab.index><div class="container container-left big-container"><div class="well row"><spinner-overlay data-loading=refreshTracker.active()><span class=legend>Sub Product Group Name</span><form class=form-horizontal name=forms.skusDetails data-ng-submit=save() data-ng-class="{submitted: forms.submitted}" novalidate unsaved-warning-form><div class="row form-group"><div class=col-md-12><input class=form-control name=SubProductGroupName placeholder="Example: Number of Portions" data-ng-model=product.SubProductGroupName data-ng-maxlength=32 data-max-characters=32><div class=error-container ng-show="forms.submitted && forms.skusDetails.SubProductGroupName.$invalid"><small class=error ng-show=forms.skusDetails.SubProductGroupName.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength",["Sub Product Group Name", "32"])}}</small> <small class=error ng-show=forms.skusDetails.SubProductGroupName.$error.server>{{serverMessages.GetMessage(\'SubProductGroupName\')}}</small></div></div></div></form><span class=legend>Sub Products</span><div class=form-group><button data-ng-click=addSKU(); class="btn btn-info">Add New SKU</button></div><span class=help-block>*Drag and drop using icon to reorder sub products</span><form name=forms.SKUs data-ng-class="{submitted: forms.skussubmitted}" novalidate unsaved-warning-form><div class="panel-group sortable-accordion"><div ui-sortable=sortableOptionsSKU data-ng-model=product.SKUs><div data-ng-repeat="subSku in product.SKUs" class="panel panel-default skus"><div class=form-horizontal ng-form=i{{$index}} novalidate><fieldset><div class=panel-heading><h4 class=panel-title><a class=accordion-toggle><div class=form-horizontal><div class=row><div class=col-md-12><div class=fixed-accordion-row><div class="sortable-move btn btn-info"><i class="glyphicon glyphicon-sort"></i></div><div data-ng-if=!subSku.IsOpen class="btn btn-primary-orange margin-left-8px" data-ng-click="toggleOpen(subSku, $event)"><i class="glyphicon glyphicon-plus"></i></div><div data-ng-if=subSku.IsOpen class="btn btn-primary-orange margin-left-8px" data-ng-click="toggleOpen(subSku, $event)"><i class="glyphicon glyphicon-minus"></i></div></div><div class="fixed-accordion-row margin-left-zero" data-ng-click=$event.stopPropagation()><label class=control-label>SKU</label><div class=col-md-1><input name=Name class="form-control sku" placeholder=SKU data-ng-model=subSku.Name required data-ng-pattern="/^[A-Za-z0-9-]+$/"><div class="error-container small-block" ng-show="forms.skussubmitted && forms.SKUs.i{{$index}}.Name.$invalid"><small class=error ng-show=forms.SKUs.i{{$index}}.Name.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.SKU")}}</small> <small class=error ng-show=forms.SKUs.i{{$index}}.Name.$error.exist>{{getValidationMessage("ValidationMessages.Exist","GeneralFieldNames.SKU")}}</small> <small class=error ng-show=forms.SKUs.i{{$index}}.Name.$error.pattern>{{getValidationMessage("ValidationMessages.FieldInvalid","GeneralFieldNames.SKU")}}</small> <small class=error ng-show=forms.SKUs.i{{$index}}.Name.$error.server>{{serverMessages.GetMessage(\'Name\',\'SKUs\',$index)}}</small></div></div></div><div class="fixed-accordion-row margin-zero margin-left-zero" data-ng-click=$event.stopPropagation()><label class=control-label>QTY</label><div class=col-md-1><input name=QTY class="form-control qty" placeholder=QTY required data-ng-model=subSku.QTY min=1 numbers-only><div class="error-container small-block" ng-show="forms.skussubmitted && forms.SKUs.i{{$index}}.QTY.$invalid"><small class=error ng-show=forms.SKUs.i{{$index}}.QTY.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","QTY")}}</small> <small class=error ng-show=forms.SKUs.i{{$index}}.QTY.$error.min>{{getValidationMessage("ValidationMessages.FieldMin","QTY",1)}}</small> <small class=error ng-show=forms.SKUs.i{{$index}}.QTY.$error.server>{{serverMessages.GetMessage(\'QTY\',\'SKUs\',$index)}}</small></div></div></div><div class="fixed-accordion-row margin-zero" data-ng-click=$event.stopPropagation()><label for=lblActive{{subSku.Id}} class=control-label>Active</label><div class=checkbox><label><input id=lblActive{{subSku.Id}} type=checkbox data-ng-model=subSku.Active></label></div></div><div class="fixed-accordion-row margin-zero" data-ng-click=$event.stopPropagation()><label for=lblHide{{subSku.Id}} class=control-label>Hide in Storefront</label><div class=checkbox><label><input id=lblHide{{subSku.Id}} type=checkbox data-ng-model=subSku.Hidden></label></div></div><div class="fixed-accordion-row margin-zero" data-ng-click=$event.stopPropagation()><label class=control-label>ID</label><span class=form-control-static data-ng-if=subSku.Id>{{subSku.Id}}</span></div><div class="fixed-accordion-row pull-right" data-ng-click=$event.stopPropagation()><button class="btn btn-danger" data-ng-click=deleteSKU($index)>Delete</button></div></div></div></div></a></h4></div><div class=panel-collapse data-ng-class="{collapse: !subSku.IsOpen}"><div class=panel-body><div class=form-horizontal><div class=form-group><div class=col-md-12><div class=fixed-accordion-row><label class=control-label>Retail Price</label><div class=col-md-1><div class=input-group><span class=input-group-addon>$</span> <input name=RetailPrice class=form-control placeholder="Retail Price" money max=100000 min=0.00 data-ng-model=subSku.RetailPrice required></div><div class="error-container small-block" ng-show="forms.skussubmitted && forms.SKUs.i{{$index}}.RetailPrice.$invalid"><small class=error ng-show=forms.SKUs.i{{$index}}.RetailPrice.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.RetailPrice")}}</small> <small class=error ng-show=forms.SKUs.i{{$index}}.RetailPrice.$error.parse>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.RetailPrice")}}</small> <small class=error ng-show=forms.SKUs.i{{$index}}.RetailPrice.$error.max>{{getValidationMessage("ValidationMessages.FieldMax","GeneralFieldNames.RetailPrice",1000000)}}</small> <small class=error ng-show=forms.SKUs.i{{$index}}.RetailPrice.$error.min>{{getValidationMessage("{0} must be over $0.00","GeneralFieldNames.RetailPrice")}}</small> <small class=error ng-show=forms.SKUs.i{{$index}}.RetailPrice.$error.server>{{serverMessages.GetMessage(\'RetailPrice\',\'SKUs\',$index)}}</small></div></div></div><div class=fixed-accordion-row><label class=control-label>Wholesale Price</label><div class=col-md-1><div class=input-group><span class=input-group-addon>$</span> <input name=WholesalePrice class=form-control placeholder="Wholesale Price" money max=100000 min=0.00 data-ng-model=subSku.WholesalePrice required></div><div class="error-container small-block" ng-show="forms.skussubmitted && forms.SKUs.i{{$index}}.WholesalePrice.$invalid"><small class=error ng-show=forms.SKUs.i{{$index}}.WholesalePrice.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.WholesalePrice")}}</small> <small class=error ng-show=forms.SKUs.i{{$index}}.WholesalePrice.$error.parse>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.WholesalePrice")}}</small> <small class=error ng-show=forms.SKUs.i{{$index}}.WholesalePrice.$error.max>{{getValidationMessage("ValidationMessages.FieldMax","GeneralFieldNames.WholesalePrice",1000000)}}</small> <small class=error ng-show=forms.SKUs.i{{$index}}.WholesalePrice.$error.min>{{getValidationMessage("{0} must be over $0.00","GeneralFieldNames.WholesalePrice")}}</small> <small class=error ng-show=forms.SKUs.i{{$index}}.WholesalePrice.$error.server>{{serverMessages.GetMessage(\'RetailPrice\',\'SKUs\',$index)}}</small></div></div></div><div class=fixed-accordion-row data-ng-if="!(product.Type==3 || product.Type==4)"><label class=control-label>Stock</label><div class=col-md-1><input name=Stock class="form-control number" placeholder=Stock numbers-only numbers-only-allow-negative data-ng-model=subSku.Stock min=-100000 max=100000 required><div class="error-container small-block" ng-show="forms.skussubmitted && forms.SKUs.i{{$index}}.Stock.$invalid"><small class=error ng-show=forms.SKUs.i{{$index}}.Stock.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Stock")}}</small> <small class=error ng-show=forms.SKUs.i{{$index}}.Stock.$error.max>{{getValidationMessage("ValidationMessages.FieldMax","Stock",100000)}}</small> <small class=error ng-show=forms.SKUs.i{{$index}}.Stock.$error.min>{{getValidationMessage("ValidationMessages.FieldMin","Stock",-100000)}}</small> <small class=error ng-show=forms.SKUs.i{{$index}}.Stock.$error.server>{{getValidationMessage("ValidationMessages.FieldNumber","Stock",\'SKUs\',$index)}}</small></div></div></div></div></div><div class=form-group><div class=col-md-12><div class=fixed-accordion-row data-ng-if="!(product.Type==3 || product.Type==4)"><label for=lblDisregard{{subSku.Id}} class=control-label>Disregard Stock</label><div class=checkbox><label><input id=lblDisregard{{subSku.Id}} type=checkbox data-ng-model=subSku.DisregardStock></label></div></div><div class=fixed-accordion-row data-ng-if="!(product.Type==3 || product.Type==4)"><label for=lblDisallowSingle{{subSku.Id}} class=control-label>Disallow Single</label><div class=checkbox><label><input id=lblDisallowSingle{{subSku.Id}} type=checkbox data-ng-model=subSku.DisallowSingle></label></div></div><div class=fixed-accordion-row><label for=lblNonDiscountable{{subSku.Id}} class=control-label>Non-discountable</label><div class=checkbox><label><input id=lblNonDiscountable{{subSku.Id}} type=checkbox data-ng-model=subSku.NonDiscountable></label></div></div><div class=fixed-accordion-row data-ng-show="product.Type==1"><label class=control-label>Orphan</label><div class=checkbox><label><input id=lbOrphanType{{subSku.Id}} type=checkbox data-ng-model=subSku.OrphanType></label></div></div><div class=fixed-accordion-row data-ng-if="product.Type==1 && subSku.OrphanType"><label class=control-label>QTY Threshold</label><div class=col-md-1><input name=QTYThreshold class="form-control number" placeholder=QTY numbers-only data-ng-model=subSku.QTYThreshold min=0 max=100000 ng-pattern="/^\\d{0,9}?$/" required><div class="error-container x-small-block" ng-show="forms.skussubmitted && forms.SKUs.i{{$index}}.QTYThreshold.$invalid"><small class=error ng-show=forms.SKUs.i{{$index}}.QTYThreshold.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","QTY Threshold")}}</small> <small class=error ng-show=forms.SKUs.i{{$index}}.QTYThreshold.$error.max>{{getValidationMessage("ValidationMessages.FieldMax","QTY Threshold",100000)}}</small> <small class=error ng-show=forms.SKUs.i{{$index}}.QTYThreshold.$error.min>{{getValidationMessage("ValidationMessages.FieldMin","QTY Threshold",1)}}</small> <small class=error ng-show=forms.SKUs.i{{$index}}.QTYThreshold.$error.server>{{getValidationMessage("ValidationMessages.FieldNumber","QTYThreshold",\'SKUs\',$index)}}</small></div></div></div></div></div><div class=form-group data-ng-if="!(product.Type==3 || product.Type==4)"><div class=col-md-12><div class="fixed-accordion-row extra-spacing"><label for=lblAutoship{{subSku.Id}} class=control-label>Auto-Ship Product</label><div class=checkbox><label><input id=lblAutoship{{subSku.Id}} type=checkbox data-ng-model=subSku.AutoShipProduct data-ng-click=autoShipProductClick(subSku);></label></div></div><div class="fixed-accordion-row extra-spacing" data-ng-if=subSku.AutoShipProduct><label class=control-label>Auto-Ship Frequency</label><div><div><label class=checkbox-inline><input id=lblAutoShipFrequency1{{subSku.Id}} type=checkbox data-ng-model=subSku.AutoShipFrequency1> 1</label><label class=checkbox-inline><input id=lblAutoShipFrequency2{{subSku.Id}} type=checkbox data-ng-model=subSku.AutoShipFrequency2> 2</label><label class=checkbox-inline><input id=lblAutoShipFrequency3{{subSku.Id}} type=checkbox data-ng-model=subSku.AutoShipFrequency3> 3</label><label class=checkbox-inline><input id=lblAutoShipFrequency6{{subSku.Id}} type=checkbox data-ng-model=subSku.AutoShipFrequency6> 6</label></div><div class="error-container small-block" ng-show=forms.skussubmitted><small class=error ng-show="subSku.AutoShipProduct && !subSku.AutoShipFrequency1 && !subSku.AutoShipFrequency2 && !subSku.AutoShipFrequency3 && !subSku.AutoShipFrequency6">At least one frequency must be selected</small></div></div></div><div class=fixed-accordion-row data-ng-if=subSku.AutoShipProduct><label class=control-label>% Off</label><div class=col-md-1><input name=OffPercent class="form-control number" placeholder="% Off" money data-ng-model=subSku.OffPercent min=0 max=100 required><div class=error-container ng-show="forms.skussubmitted && forms.SKUs.i{{$index}}.OffPercent.$invalid"><small class=error ng-show=forms.SKUs.i{{$index}}.OffPercent.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","% Off")}}</small> <small class=error ng-show=forms.SKUs.i{{$index}}.OffPercent.$error.max>{{getValidationMessage("ValidationMessages.FieldMax","% Off",100)}}</small> <small class=error ng-show=forms.SKUs.i{{$index}}.OffPercent.$error.min>{{getValidationMessage("ValidationMessages.FieldMin","% Off",0)}}</small></div></div></div></div></div><div class=form-group><div class=col-md-12><div class="fixed-accordion-row extra-spacing"><label class=control-label>Seller</label><select class=form-control name=Seller data-ng-model=subSku.Seller ng-options="seller.Key as seller.Text for seller in sellers"></select></div><div class=fixed-accordion-row><label for=lblHideFromFeed{{subSku.Id}} class=control-label>Hide From Data Feed</label><div class=checkbox><label><input id=lblHideFromFeed{{subSku.Id}} type=checkbox data-ng-model=subSku.HideFromDataFeed></label></div></div></div></div><div class=form-group><div class=col-md-12><div class=fixed-accordion-row><label for=lblSalesText{{subSku.Id}} class=control-label>Sales Text</label><div class=col-md-1><input id=lblSalesText{{subSku.Id}} name=SalesText class="form-control sales-text" placeholder="Sales Text" data-max-characters=15 data-ng-model=subSku.SalesText data-ng-maxlength=15><div class="error-container small-block" ng-show="forms.skussubmitted && forms.SKUs.i{{$index}}.SalesText.$invalid"><small class=error ng-show=forms.SKUs.i{{$index}}.SalesText.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["Sales Text", "15"])}}</small> <small class=error ng-show=forms.SKUs.i{{$index}}.SalesText.$error.server>{{getValidationMessage("ValidationMessages.FieldNumber","SalesText",\'SKUs\',$index)}}</small></div></div></div></div></div><div data-ng-if=validatePermission(17)><span class=legend>Parts Settings</span><div class=form-group><div class=col-md-12><div class=fixed-accordion-row><label class=control-label>Channel</label><div class=col-md-1><select class=form-control name=InventorySkuChannel data-ng-model=subSku.InventorySkuChannel ng-options="item.Key as item.Text for item in inventorySkuChannels"></select></div></div><div class=fixed-accordion-row><label for=lblAssemble{{subSku.Id}} class=control-label>Assemble</label><div class=checkbox><label><input id=lblAssemble{{subSku.Id}} type=checkbox data-ng-model=subSku.Assemble></label></div><label for=lblDate{{subSku.Id}} class="col-md-3 control-label">Born Date</label><div class="col-md-1 margin-right-15px"><p class=input-group><input id=lblDate{{subSku.Id}} name=BornDate class=form-control uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=subSku.BornDate is-open="subSku.DateOpened"> <span class=input-group-btn><button type=button class="btn btn-default" ng-disabled=false ng-click="stopPropagation($event); subSku.DateOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.skussubmitted && forms.SKUs.i{{$index}}.BornDate.$invalid"><small class=error ng-show=forms.SKUs.i{{$index}}.BornDate.$error.server>{{serverMessages.GetMessage(\'BornDate\')}}</small></div></div><div class="fixed-accordion-row margin-left-zero pull-right"><button data-ng-click=assignInventorySkus(subSku,$event); class="btn btn-info">Manage Assigned Parts</button></div></div></div></div><div class=form-group><div class=col-md-12><div class=fixed-accordion-row><label class=control-label>Assigned Parts</label><div class="control-label left"><span data-ng-repeat="inventoSku in subSku.InventorySkus"><span data-ng-if=!$last>{{::inventoSku.Code}}({{::inventoSku.Quantity}}),</span> <span data-ng-if=$last>{{::inventoSku.Code}}({{::inventoSku.Quantity}})</span></span></div></div></div></div></div></div></div></div></fieldset></div></div></div></div></form></spinner-overlay></div></div></uib-tab><uib-tab heading=Nutritional index=nutritionalTab.index data-ng-if="!(product.Type==3 || product.Type==4)"><div class="container container-left"><div class="well row"><spinner-overlay data-loading=refreshTracker.active()><form class=form-horizontal name=forms.nutritional data-ng-submit=save() data-ng-class="{submitted: forms.submitted}" novalidate unsaved-warning-form><fieldset><legend>Nutritional</legend><div class=form-group><label for=title class="col-md-3 control-label">Title</label><div class=col-md-9><input name=NutritionalTitle class=form-control placeholder=Title data-ng-model=product.NutritionalTitle><div class=error-container ng-show="forms.submitted && forms.nutritional.NutritionalTitle.$invalid"><small class=error ng-show=forms.nutritional.NutritionalTitle.$error.server>{{serverMessages.GetMessage(\'NutritionalTitle\')}}</small></div></div></div><div class=form-group><label for=serving_size class="col-md-3 control-label">Serving Size</label><div class=col-md-9><input name=ServingSize class=form-control placeholder="Serving Size" data-ng-model=product.ServingSize><div class=error-container ng-show="forms.submitted && forms.nutritional.ServingSize.$invalid"><small class=error ng-show=forms.nutritional.ServingSize.$error.server>{{serverMessages.GetMessage(\'ServingSize\')}}</small></div></div></div><div class=form-group><label for=servings class="col-md-3 control-label">Servings</label><div class=col-md-9><input name=Servings class=form-control placeholder=Servings data-ng-model=product.Servings><div class=error-container ng-show="forms.submitted && forms.nutritional.Servings.$invalid"><small class=error ng-show=forms.nutritional.Servings.$error.server>{{serverMessages.GetMessage(\'Servings\')}}</small></div></div></div><div class=form-group><label for=calories class="col-md-3 control-label">Calories</label><div class=col-md-9><input name=Calories class=form-control placeholder=Calories data-ng-model=product.Calories><div class=error-container ng-show="forms.submitted && forms.nutritional.Calories.$invalid"><small class=error ng-show=forms.nutritional.Calories.$error.server>{{serverMessages.GetMessage(\'Calories\')}}</small></div></div></div><div class=form-group><label for=calories_from_fat class="col-md-3 control-label">Calories from Fat</label><div class=col-md-9><input name=CaloriesFromFat class=form-control placeholder="Calories from Fat" data-ng-model=product.CaloriesFromFat><div class=error-container ng-show="forms.submitted && forms.nutritional.CaloriesFromFat.$invalid"><small class=error ng-show=forms.nutritional.CaloriesFromFat.$error.server>{{serverMessages.GetMessage(\'CaloriesFromFat\')}}</small></div></div></div><div class=form-group><label for=total_fat class="col-md-3 control-label">Total Fat</label><div class=col-md-9><input name=TotalFat class=form-control placeholder="Total Fat" data-ng-model=product.TotalFat><div class=error-container ng-show="forms.submitted && forms.nutritional.TotalFat.$invalid"><small class=error ng-show=forms.nutritional.TotalFat.$error.server>{{serverMessages.GetMessage(\'TotalFat\')}}</small></div></div></div><div class=form-group><label for=total_fat_percent class="col-md-3 control-label">Total Fat Percent</label><div class=col-md-9><input name=TotalFatPercent class=form-control placeholder="Total Fat Percent" data-ng-model=product.TotalFatPercent><div class=error-container ng-show="forms.submitted && forms.nutritional.TotalFatPercent.$invalid"><small class=error ng-show=forms.nutritional.TotalFatPercent.$error.server>{{serverMessages.GetMessage(\'TotalFatPercent\')}}</small></div></div></div><div class=form-group><label for=saturated_fat class="col-md-3 control-label">Saturated Fat</label><div class=col-md-9><input name=SaturatedFat class=form-control placeholder="Saturated Fat" data-ng-model=product.SaturatedFat><div class=error-container ng-show="forms.submitted && forms.nutritional.SaturatedFat.$invalid"><small class=error ng-show=forms.nutritional.SaturatedFat.$error.server>{{serverMessages.GetMessage(\'SaturatedFat\')}}</small></div></div></div><div class=form-group><label for=saturated_fat_percent class="col-md-3 control-label">Saturated Fat Percent</label><div class=col-md-9><input name=SaturatedFatPercent class=form-control placeholder="Saturated Fat Percent" data-ng-model=product.SaturatedFatPercent><div class=error-container ng-show="forms.submitted && forms.nutritional.SaturatedFatPercent.$invalid"><small class=error ng-show=forms.nutritional.SaturatedFatPercent.$error.server>{{serverMessages.GetMessage(\'SaturatedFatPercent\')}}</small></div></div></div><div class=form-group><label for=trans_fat class="col-md-3 control-label">Trans Fat</label><div class=col-md-9><input name=TransFat class=form-control placeholder="Trans Fat" data-ng-model=product.TransFat><div class=error-container ng-show="forms.submitted && forms.nutritional.TransFat.$invalid"><small class=error ng-show=forms.nutritional.TransFat.$error.server>{{serverMessages.GetMessage(\'TransFat\')}}</small></div></div></div><div class=form-group><label for=trans_fat_percent class="col-md-3 control-label">Trans Fat Percent</label><div class=col-md-9><input name=TransFatPercent class=form-control placeholder="Trans Fat Percent" data-ng-model=product.TransFatPercent><div class=error-container ng-show="forms.submitted && forms.nutritional.TransFatPercent.$invalid"><small class=error ng-show=forms.nutritional.TransFatPercent.$error.server>{{serverMessages.GetMessage(\'TransFatPercent\')}}</small></div></div></div><div class=form-group><label for=cholesterol class="col-md-3 control-label">Cholesterol</label><div class=col-md-9><input name=Cholesterol class=form-control placeholder=Cholesterol data-ng-model=product.Cholesterol><div class=error-container ng-show="forms.submitted && forms.nutritional.Cholesterol.$invalid"><small class=error ng-show=forms.nutritional.Cholesterol.$error.server>{{serverMessages.GetMessage(\'Cholesterol\')}}</small></div></div></div><div class=form-group><label for=cholesterol_percent class="col-md-3 control-label">Cholesterol Percent</label><div class=col-md-9><input name=CholesterolPercent class=form-control placeholder="Cholesterol Percent" data-ng-model=product.CholesterolPercent><div class=error-container ng-show="forms.submitted && forms.nutritional.CholesterolPercent.$invalid"><small class=error ng-show=forms.nutritional.CholesterolPercent.$error.server>{{serverMessages.GetMessage(\'CholesterolPercent\')}}</small></div></div></div><div class=form-group><label for=sodium class="col-md-3 control-label">Sodium</label><div class=col-md-9><input name=Sodium class=form-control placeholder=Sodium data-ng-model=product.Sodium><div class=error-container ng-show="forms.submitted && forms.nutritional.Sodium.$invalid"><small class=error ng-show=forms.nutritional.Sodium.$error.server>{{serverMessages.GetMessage(\'Sodium\')}}</small></div></div></div><div class=form-group><label for=sodium_percent class="col-md-3 control-label">Sodium Percent</label><div class=col-md-9><input name=SodiumPercent class=form-control placeholder="Sodium Percent" data-ng-model=product.SodiumPercent><div class=error-container ng-show="forms.submitted && forms.nutritional.SodiumPercent.$invalid"><small class=error ng-show=forms.nutritional.SodiumPercent.$error.server>{{serverMessages.GetMessage(\'SodiumPercent\')}}</small></div></div></div><div class=form-group><label for=total_carbohydrate class="col-md-3 control-label">Total Carbohydrate</label><div class=col-md-9><input name=TotalCarbohydrate class=form-control placeholder="Total Carbohydrate" data-ng-model=product.TotalCarbohydrate><div class=error-container ng-show="forms.submitted && forms.nutritional.TotalCarbohydrate.$invalid"><small class=error ng-show=forms.nutritional.TotalCarbohydrate.$error.server>{{serverMessages.GetMessage(\'TotalCarbohydrate\')}}</small></div></div></div><div class=form-group><label for=total_carbohydrate_percent class="col-md-3 control-label">Total Carbohydrate Percent</label><div class=col-md-9><input name=TotalCarbohydratePercent class=form-control placeholder="Total Carbohydrate Percent" data-ng-model=product.TotalCarbohydratePercent><div class=error-container ng-show="forms.submitted && forms.nutritional.TotalCarbohydratePercent.$invalid"><small class=error ng-show=forms.nutritional.TotalCarbohydratePercent.$error.server>{{serverMessages.GetMessage(\'TotalCarbohydratePercent\')}}</small></div></div></div><div class=form-group><label for=dietary_fiber class="col-md-3 control-label">Dietary Fiber</label><div class=col-md-9><input name=DietaryFiber class=form-control placeholder="Dietary Fiber" data-ng-model=product.DietaryFiber><div class=error-container ng-show="forms.submitted && forms.nutritional.DietaryFiber.$invalid"><small class=error ng-show=forms.nutritional.DietaryFiber.$error.server>{{serverMessages.GetMessage(\'DietaryFiber\')}}</small></div></div></div><div class=form-group><label for=dietary_fiber_percent class="col-md-3 control-label">Dietary Fiber Percent</label><div class=col-md-9><input name=DietaryFiberPercent class=form-control placeholder="Dietary Fiber Percent" data-ng-model=product.DietaryFiberPercent><div class=error-container ng-show="forms.submitted && forms.nutritional.DietaryFiberPercent.$invalid"><small class=error ng-show=forms.nutritional.DietaryFiberPercent.$error.server>{{serverMessages.GetMessage(\'DietaryFiberPercent\')}}</small></div></div></div><div class=form-group><label for=sugars class="col-md-3 control-label">Sugars</label><div class=col-md-9><input name=Sugars class=form-control placeholder=Sugars data-ng-model=product.Sugars><div class=error-container ng-show="forms.submitted && forms.nutritional.Sugars.$invalid"><small class=error ng-show=forms.nutritional.Sugars.$error.server>{{serverMessages.GetMessage(\'Sugars\')}}</small></div></div></div><div class=form-group><label for=sugars_percent class="col-md-3 control-label">Sugars Percent</label><div class=col-md-9><input name=SugarsPercent class=form-control placeholder="Sugars Percent" data-ng-model=product.SugarsPercent><div class=error-container ng-show="forms.submitted && forms.nutritional.SugarsPercent.$invalid"><small class=error ng-show=forms.nutritional.SugarsPercent.$error.server>{{serverMessages.GetMessage(\'SugarsPercent\')}}</small></div></div></div><div class=form-group><label for=protein class="col-md-3 control-label">Protein</label><div class=col-md-9><input name=Protein class=form-control placeholder=Protein data-ng-model=product.Protein><div class=error-container ng-show="forms.submitted && forms.nutritional.Protein.$invalid"><small class=error ng-show=forms.nutritional.Protein.$error.server>{{serverMessages.GetMessage(\'Protein\')}}</small></div></div></div><div class=form-group><label for=protein_percent class="col-md-3 control-label">Protein Percent</label><div class=col-md-9><input name=ProteinPercent class=form-control placeholder="Protein Percent" data-ng-model=product.ProteinPercent><div class=error-container ng-show="forms.submitted && forms.nutritional.ProteinPercent.$invalid"><small class=error ng-show=forms.nutritional.ProteinPercent.$error.server>{{serverMessages.GetMessage(\'ProteinPercent\')}}</small></div></div></div><div class=form-group><label for=nutri_additional_Notes class="col-md-3 control-label">Additional Notes</label><div class=col-md-9><textarea type=text name=AdditionalNotes class=form-control placeholder="Additional Notes" rows=10 data-ng-model=product.AdditionalNotes></textarea><div class=error-container ng-show="forms.submitted && forms.nutritional.AdditionalNotes.$invalid"><small class=error ng-show=forms.nutritional.AdditionalNotes.$error.server>{{serverMessages.GetMessage(\'AdditionalNotes\')}}</small></div></div></div></fieldset></form></spinner-overlay></div></div></uib-tab><uib-tab heading=Categories index=categoriesTab.index><div class="container container-left"><div class="well row categories public"><spinner-overlay data-loading=refreshTracker.active()><span class=legend>Categories</span> <button data-ng-if=!categoriesExpanded data-ng-click=updateCategoriesCollapsed(true); class="btn btn-primary btn-xs expand-button">Expand All</button> <button data-ng-if=categoriesExpanded data-ng-click=updateCategoriesCollapsed(false); class="btn btn-primary btn-xs expand-button">Collapse All</button><div ui-tree data-drag-enabled=false name=public class=ya-treeview><ol ui-tree-nodes="" data-ng-model=rootCategory.SubItems><li ng-repeat="item in rootCategory.SubItems" ui-tree-node collapsed=true data-ng-include="\'app/modules/content/partials/contentCategories.html\'"></li></ol></div></spinner-overlay></div></div></uib-tab><uib-tab heading="Cross Sell & Videos" index=crossSellProductsAndVideosTab.index><div class="container container-left"><div class="well row"><spinner-overlay data-loading=refreshTracker.active()><span class=legend>Cross Sell Products</span><form name=forms.CrossSellProducts data-ng-submit=save() data-ng-class="{submitted: forms.crossessubmitted}" novalidate unsaved-warning-form><div class="panel-group sortable-accordion"><div ui-sortable=sortableOptions data-ng-model=product.CrossSellProducts><div data-ng-repeat="crossSellProduct in product.CrossSellProducts" class="panel panel-default"><div class=form-horizontal ng-form=i{{$index}}><fieldset><div class=panel-heading><h4 class=panel-title><div class=accordion-toggle><div class=form-horizontal><div class=row><div class=col-md-12><div class="fixed-accordion-row extra-spacing one-line" data-ng-click=$event.stopPropagation()><label class=control-label>Cross Sell Image</label><div class=col-md-1 data-ng-if=crossSellProduct.ImageUse><filefield name=Image placeholder="Cross Sell Image" ng-model=crossSellProduct.Image required></filefield><div class=error-container ng-show="forms.crossessubmitted && forms.CrossSellProducts.i{{$index}}.Image.$invalid"><small class=error ng-show=forms.CrossSellProducts.i{{$index}}.Image.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Image")}}</small> <small class=error ng-show=forms.CrossSellProducts.i{{$index}}.Image.$error.server>{{serverMessages.GetMessage(\'Image\',\'CrossSellProducts\',$index)}}</small></div></div><div class=col-md-1 data-ng-if=!crossSellProduct.ImageUse><filefield name=DefaultImage placeholder="Cross Sell Image" ng-model="productTypeDefaults[\'CrossSellImage\'+($index+1)]" disabled></filefield></div></div><div class="fixed-accordion-row pull-right" data-ng-click=$event.stopPropagation()><button data-ng-if=!crossSellProduct.UrlUse class="btn btn-info width-80px" data-ng-click=setCustomCross(crossSellProduct)>Set</button> <button data-ng-if=crossSellProduct.UrlUse class="btn btn-info width-80px" data-ng-click=removeCustomCross(crossSellProduct)>Remove</button></div></div></div><div class=row><div class=col-md-11><div class="fixed-accordion-row extra-spacing one-line" data-ng-click=$event.stopPropagation()><label class=control-label>URL Cross Sell</label><div class=col-md-1 data-ng-if=crossSellProduct.UrlUse><input name=Url class=form-control placeholder="URL Cross Sell" data-ng-model=crossSellProduct.Url required><div class=error-container ng-show="forms.crossessubmitted && forms.CrossSellProducts.i{{$index}}.Url.$invalid"><small class=error ng-show=forms.CrossSellProducts.i{{$index}}.Url.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Url")}}</small> <small class=error ng-show=forms.CrossSellProducts.i{{$index}}.Url.$error.server>{{serverMessages.GetMessage(\'Url\',\'CrossSellProducts\',$index)}}</small></div></div><div class=col-md-1 data-ng-if=!crossSellProduct.UrlUse><input name=DefaultUrl class=form-control placeholder="URL Cross Sell" data-ng-model="productTypeDefaults[\'CrossSellUrl\'+($index+1)]" readonly></div></div></div></div></div></div></h4></div><div class=panel-collapse data-ng-class="{collapse: !crossSellProduct.IsOpen}"><div class=panel-body><div class=form-horizontal><div class=form-group></div></div></div></div></fieldset></div></div></div></div></form><span class=legend>YouTube Videos</span><form name=forms.Videos data-ng-submit=save() data-ng-class="{submitted: forms.videossubmitted}" novalidate unsaved-warning-form><div class="panel-group sortable-accordion"><div ui-sortable=sortableOptions data-ng-model=product.Videos><div data-ng-repeat="video in product.Videos" class="panel panel-default"><div class=form-horizontal ng-form=i{{$index}}><fieldset><div class=panel-heading><h4 class=panel-title><div class=accordion-toggle><div class=form-horizontal><div class=row><div class=col-md-12><div class="fixed-accordion-row extra-spacing one-line" data-ng-click=$event.stopPropagation()><label class=control-label>YouTube Video</label><div class=col-md-1 data-ng-if=video.VideoUse><input name=Video class=form-control placeholder="YouTube Video" data-ng-model=video.Video required><div class=error-container ng-show="forms.videossubmitted && forms.Videos.i{{$index}}.Video.$invalid"><small class=error ng-show=forms.Videos.i{{$index}}.Video.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","YouTube Video")}}</small> <small class=error ng-show=forms.Videos.i{{$index}}.Video.$error.server>{{serverMessages.GetMessage(\'Video\',\'Videos\',$index)}}</small></div></div><div class=col-md-1 data-ng-if=!video.VideoUse><input name=DefaultVideo class=form-control placeholder="YouTube Video" data-ng-model="productTypeDefaults[\'YouTubeVideo\'+($index+1)]" readonly></div><a data-ng-if=!video.VideoUse target=_blank data-ng-href="{{youTubeBaseUrl.format(productTypeDefaults[\'YouTubeVideo\'+($index+1)])}}" class=edit-link>view</a> <a data-ng-if=video.VideoUse target=_blank data-ng-href="{{video.Video ? youTubeBaseUrl.format(video.Video) : \'\'}}" class=edit-link>view</a></div><div class="fixed-accordion-row pull-right" data-ng-click=$event.stopPropagation()><button data-ng-if=!video.VideoUse class="btn btn-info width-80px" data-ng-click=setCustomVideo(video)>Set</button> <button data-ng-if=video.VideoUse class="btn btn-info width-80px" data-ng-click=removeCustomVideo(video)>Remove</button></div></div></div><div class=row><div class=col-md-12><div class="fixed-accordion-row extra-spacing one-line" data-ng-click=$event.stopPropagation()><label class=control-label>YouTube Image</label><div class=col-md-1 data-ng-if=video.ImageUse><filefield name=Image placeholder="YouTube Image" ng-model=video.Image required></filefield><div class=error-container ng-show="forms.videossubmitted && forms.Videos.i{{$index}}.Image.$invalid"><small class=error ng-show=forms.Videos.i{{$index}}.Image.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Image")}}</small> <small class=error ng-show=forms.Videos.i{{$index}}.Image.$error.server>{{serverMessages.GetMessage(\'Image\',\'Videos\',$index)}}</small></div></div><div class=col-md-1 data-ng-if=!video.ImageUse><filefield name=DefaultImage placeholder="YouTube Image" ng-model="productTypeDefaults[\'YouTubeImage\'+($index+1)]" disabled></filefield></div></div></div></div><div class=row><div class=col-md-12><div class="fixed-accordion-row extra-spacing one-line" data-ng-click=$event.stopPropagation()><label class=control-label>YouTube Text</label><div class=col-md-1 data-ng-if=video.TextUse><input name=Text class=form-control placeholder="YouTube Text" data-ng-model=video.Text required><div class=error-container ng-show="forms.videossubmitted && forms.Videos.i{{$index}}.Text.$invalid"><small class=error ng-show=forms.Videos.i{{$index}}.Text.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Text")}}</small> <small class=error ng-show=forms.Videos.i{{$index}}.Text.$error.server>{{serverMessages.GetMessage(\'Text\',\'Videos\',$index)}}</small></div></div><div class=col-md-1 data-ng-if=!video.TextUse><input name=DefaultText class=form-control placeholder="YouTube Text" data-ng-model="productTypeDefaults[\'YouTubeText\'+($index+1)]" readonly></div></div></div></div></div></div></h4></div><div class=panel-collapse data-ng-class="{collapse: !video.IsOpen}"><div class=panel-body><div class=form-horizontal><div class=form-group></div></div></div></div></fieldset></div></div></div></div></form></spinner-overlay></div></div></uib-tab><uib-tab heading="Sales Category" index=salesCategoriesTab.index><div class="container container-left"><div class="well row categories sales"><spinner-overlay data-loading=refreshTracker.active()><span class=legend>Sales Category</span> <button data-ng-if=!salesCategoriesExpanded data-ng-click=updateSalesCategoriesCollapsed(true); class="btn btn-primary btn-xs expand-button">Expand All</button> <button data-ng-if=salesCategoriesExpanded data-ng-click=updateSalesCategoriesCollapsed(false); class="btn btn-primary btn-xs expand-button">Collapse All</button><div ui-tree data-drag-enabled=false data-ng-model=rootInventoryCategory class=ya-treeview><ol ui-tree-nodes="" data-ng-model=rootInventoryCategory.SubItems><li ng-repeat="item in rootInventoryCategory.SubItems" ui-tree-node collapsed=true data-ng-include="\'app/modules/product/partials/inventoryCategoriesAssign.html\'"></li></ol></div></spinner-overlay></div></div></uib-tab><uib-tab heading=Template index=11><div class="container container-left"><div class="well row"><spinner-overlay data-loading=refreshTracker.active()><form class=form-horizontal><fieldset><div data-ng-if=validatePermission(7) class=form-group><label for=masterTemplate class="col-md-3 control-label">Master Template</label><div class=col-md-9><select class=form-control name=MasterTemplate data-ng-model=product.MasterContentItemId ng-options="master.Id as master.Name for master in masters"></select></div></div><button class="btn btn-info width-200px margin-bottom-10px" data-ng-if="validatePermission(7) && product.MasterContentItemId!=0" data-ng-click=goToMaster(product.MasterContentItemId);>Manage Master Template</button> <span class=legend>Manage Template</span><div class=form-group><div class=col-md-12><div data-ng-model=product.Template ui-ace-ttl master-id=product.MasterContentItemId></div></div></div></fieldset></form></spinner-overlay></div></div></uib-tab></uib-tabset></div></div></div></div>'),
a.put("app/modules/product/partials/productDetailCategories.html",'<div data-ng-show=hasChildren(this)><a class="btn btn-link pull-left" data-nodrag data-ng-click=toggle(this)><i class=glyphicon ng-class="{\'glyphicon-chevron-right\': collapsed, \'glyphicon-chevron-down\': !collapsed}"></i></a></div><div ui-tree-handle><div class="ya-treeview-content clearfix"><div class=checkbox><label><input data-ng-checked=item.checked type=checkbox>{{item.label}}</label><span data-ng-if="item.status == 2" class="label label-warning category-status">Hidden</span></div></div></div><ol ui-tree-nodes="" data-ng-model=item.children data-ng-class="{hidden: collapsed}"><li ng-repeat="item in item.children" ui-tree-node collapsed=true data-ng-include="\'app/modules/product/partials/productDetailCategories.html\'"></li></ol>'),a.put("app/modules/product/partials/productReviewDetail.html",'<div class=container-fluid><div class=left-pane-controls><div class="well container-fluid"><div><button class="btn btn-success width-160px" ladda=editTracker.active() data-ng-click=save()>Save</button></div><div class=margin-top-10px><button class="btn btn-danger width-160px" ladda=editTracker.active() data-ng-click=delete();>Delete</button></div><div class=margin-top-10px><button class="btn btn-default width-160px" data-ng-click=goBack()>Cancel</button></div></div></div><div class=right-pane-main><div class=container-fluid><div class=row><div class="container container-left"><div class="well row"><spinner-overlay data-loading=refreshTracker.active()><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.form.submitted}" novalidate><fieldset><span class=legend>Product Review Details</span><div class=form-group><label class="col-md-3 control-label">Product Name</label><div class=col-md-9><input name=ProductName class=form-control placeholder=Quantity data-ng-model=productReview.ProductName disabled></div></div><div class=form-group><label for=type class="col-md-3 control-label">Active/Approved</label><div class=col-md-9><div class=checkbox><label><input type=checkbox name=Active placeholder=Active data-ng-model=productReview.StatusCode data-ng-true-value=2 data-ng-false-value="1"></label></div></div></div><div class=form-group><label for=type class="col-md-3 control-label">Customer Name</label><div class=col-md-9><input name=CustomerName class=form-control placeholder="Customer Name" data-ng-model=productReview.CustomerName required><div class=error-container ng-show="forms.form.submitted && forms.form.CustomerName.$invalid"><small class=error ng-show=forms.form.CustomerName.$error.parse>{{getValidationMessage("ValidationMessages.FieldRequired","Customer Name")}}</small> <small class=error ng-show=forms.form.CustomerName.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Customer Name")}}</small> <small class=error ng-show=forms.form.CustomerName.$error.server>{{serverMessages.GetMessage(\'CustomerName\')}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label">Email</label><div class=col-md-9><input type=email name=Email class=form-control placeholder=Email data-ng-model=productReview.Email required><div class=error-container ng-show="forms.form.submitted && forms.form.Email.$invalid"><small class=error ng-show=forms.form.Email.$error.parse>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Email")}}</small> <small class=error ng-show=forms.form.Email.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Email")}}</small> <small class=error ng-show=forms.form.Email.$error.email>{{getValidationMessage("ValidationMessages.EmailFormat","GeneralFieldNames.Email")}}</small> <small class=error ng-show=forms.form.Email.$error.server>{{serverMessages.GetMessage(\'Email\')}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label">Rating</label><div class="col-md-9 input-label"><uib-rating data-ng-model=productReview.Rating max=5></uib-rating></div></div><div class=form-group><label class="col-md-3 control-label">Review Title</label><div class=col-md-9><input name=Title class=form-control placeholder="Review Title" data-ng-model=productReview.Title required><div class=error-container ng-show="forms.form.submitted && forms.form.Title.$invalid"><small class=error ng-show=forms.form.Title.$error.parse>{{getValidationMessage("ValidationMessages.FieldRequired","Title")}}</small> <small class=error ng-show=forms.form.Title.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Title")}}</small> <small class=error ng-show=forms.form.Title.$error.server>{{serverMessages.GetMessage(\'Title\')}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label">Review</label><div class=col-md-9><textarea type=text name=Description class=form-control placeholder=Review rows=10 data-ng-model=productReview.Description required></textarea><div class=error-container ng-show="forms.form.submitted && forms.form.Description.$invalid"><small class=error ng-show=forms.form.Description.$error.parse>{{getValidationMessage("ValidationMessages.FieldRequired","Review")}}</small> <small class=error ng-show=forms.form.Description.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Review")}}</small> <small class=error ng-show=forms.form.Description.$error.server>{{serverMessages.GetMessage(\'Description\')}}</small></div></div></div></fieldset></form></spinner-overlay></div></div></div></div></div></div>'),a.put("app/modules/product/partials/productsList.html",'<div class="container-fluid product-list"><div class=well><span class=legend>Manage Products</span><div class="row form-group"><div class=col-md-4><input class=form-control placeholder="SKU, Product Name" data-ng-model=filter.SearchText></div></div><div class="row form-group"><div class=col-md-4><button class="btn btn-info" data-ng-click=filterProducts(); type=button>Filter</button></div></div><hr><div class=form-group><button data-ng-click=open(); class="btn btn-primary">Add New Product</button></div><spinner-overlay data-loading=refreshTracker.active()><table id=data-grid class="table table-striped table-hover"><thead><tr><th></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Name\')"><span>Product</span> <span data-ng-if="filter.Sorting.Path == \'Name\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'IdProductType\')"><span>Type</span> <span data-ng-if="filter.Sorting.Path == \'IdProductType\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th>SKUs</th><th>Status</th><th>View</th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'DateEdited\')"><span>Updated</span> <span data-ng-if="filter.Sorting.Path == \'DateEdited\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=actions>Actions</th></tr></thead><tbody><tr data-ng-repeat="item in products"><td><a ui-sref=index.oneCol.productDetail({id:item.ProductId})><img ng-if=item.ThumbnailUrl class=thumb ng-src="{{item.Thumbnail}}"></a></td><td><a ui-sref=index.oneCol.productDetail({id:item.ProductId})>{{::item.Name}}<br>{{::item.SubTitle}}</a></td><td><span>{{getReferenceItem(ReferenceData.ShortProductTypes, item.IdProductType).Text}}</span></td><td><span data-ng-repeat="sku in item.SKUs"><span class=sku data-ng-class="{\'not-in-stock\': !sku.InStock}">{{sku.Code}}</span> {{$last!=true ? " / " : ""}}</span></td><td><span data-ng-if="item.StatusCode == 2" class="label label-info font-default">{{getReferenceItem(ReferenceData.RecordStatuses, item.StatusCode).Text}}</span> <span data-ng-if="item.StatusCode == 1" class="label label-warning font-default">{{getReferenceItem(ReferenceData.RecordStatuses, item.StatusCode).Text}}</span></td><td><span data-ng-if="item.IdVisibility==1" class="label label-info font-default">All</span> <span data-ng-if="item.IdVisibility==2" class="label label-wholesale font-default">Wholesale Only</span> <span data-ng-if="item.IdVisibility==3" class="label label-retail font-default">Retail Only</span> <span data-ng-if=!item.IdVisibility class="label label-warning font-default">Hidden</span></td><td>{{item.DateEdited | date:"MM/dd/yy"}}<br>{{item.DateEdited | date:"h:mm a"}}<br>{{item.EditedByAgentId}}</td><td><button title=Edit class="btn btn-default btn-success btn-xs" data-ng-click=open(item.ProductId);><i class="glyphicon glyphicon-edit"></i></button> <button title=Delete class="btn btn-default btn-danger btn-xs" ladda=deleteTracker.active() data-ng-click=delete(item.ProductId);><i class="glyphicon glyphicon-remove"></i></button></td></tr></tbody></table></spinner-overlay><uib-pagination boundary-links=true total-items=totalItems items-per-page=filter.Paging.PageItemCount data-ng-model=filter.Paging.PageIndex previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; data-ng-change="pageChanged();scrollTo(\'data-grid\');"></uib-pagination></div></div>'),a.put("app/modules/product/partials/productsSearchList.html",'<div class=product-list><span class=legend>Search Products</span><div class=form-horizontal ng-form=forms.filterForm data-ng-submit=save() data-ng-class="{submitted: submitted}" novalidate><div class="row form-group"><div class=col-md-4><input class=form-control name=SearchText placeholder="SKU, Product Name" data-ng-model=filter.SearchText ng-minlength=3 required><div class=error-container ng-show="submitted && forms.filterForm.SearchText.$invalid"><small class=error ng-show=forms.filterForm.SearchText.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Search Text")}}</small> <small class=error ng-show=forms.filterForm.SearchText.$error.minlength>{{getValidationMessage("{0} should have at least 3 symbols","Search Text")}}</small></div></div><div class=col-md-4><button class="btn btn-info" data-ng-click=filterSkus(); type=button>Filter</button></div></div></div><spinner-overlay data-loading=refreshTracker.active()><table class="table table-striped table-hover"><thead><tr><th>Name</th><th>SKUs</th><th>Status</th><th>View</th><th></th></tr></thead><tbody><tr data-ng-repeat="item in items"><td>{{item.Name}}<br>{{item.SubTitle}}</td><td><span data-ng-repeat="sku in item.SKUs"><span class=sku data-ng-class="{\'not-in-stock\': !sku.InStock}">{{sku.Code}}</span> {{$last!=true ? " / " : ""}}</span></td><td><span data-ng-if="item.StatusCode == 2" class="label label-info font-default">{{getReferenceItem(ReferenceData.RecordStatuses, item.StatusCode).Text}}</span> <span data-ng-if="item.StatusCode == 1" class="label label-warning font-default">{{getReferenceItem(ReferenceData.RecordStatuses, item.StatusCode).Text}}</span></td><td><span data-ng-if="item.IdVisibility==1" class="label label-info font-default">All</span> <span data-ng-if="item.IdVisibility==2" class="label label-wholesale font-default">Wholesale Only</span> <span data-ng-if="item.IdVisibility==3" class="label label-retail font-default">Retail Only</span> <span data-ng-if=!item.IdVisibility class="label label-warning font-default">Hidden</span></td><td><button class="btn btn-xs btn-default btn-success" data-ng-click=add(item);>Add</button></td></tr></tbody></table></spinner-overlay></div>'),a.put("app/modules/product/partials/productsWithReviewsList.html",'<div class=container-fluid><div class=well><span class=legend>Manage Live Product Reviews</span><div class="row form-group"><div class=col-md-4><input class=form-control placeholder="Product Name" data-ng-model=filter.SearchText></div></div><div class="row form-group"><div class=col-md-4><button class="btn btn-info" data-ng-click=filterProducts(); type=button>Filter</button></div></div><hr><div class="row form-group"><div class=col-md-12><button class="btn btn-primary-orange btn-right width-180px" ui-sref=index.oneCol.managePendingProductReviews>Manage All Pending Reviews</button></div></div><spinner-overlay data-loading=refreshTracker.active()><table id=data-grid class="table table-striped table-hover"><thead><tr><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'ProductName\')"><span>Product Name</span> <span data-ng-if="filter.Sorting.Path == \'ProductName\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Count\')"><span># Reviews</span> <span data-ng-if="filter.Sorting.Path == \'Count\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'DateCreated\')"><span>Latest Review</span> <span data-ng-if="filter.Sorting.Path == \'DateCreated\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Rating\')"><span>Avg Rating</span> <span data-ng-if="filter.Sorting.Path == \'Rating\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th>Actions</th></tr></thead><tbody><tr data-ng-repeat="product in products"><td>{{product.ProductName}}</td><td>{{product.Count}}</td><td>{{product.DateCreated | date:"MM/dd/yy"}}<br>{{product.DateCreated | date:"h:mm a"}}</td><td><stars data-ng-model=product.Rating></stars></td><td><button title=View class="btn btn-default btn-success btn-xs" data-ng-click=open(product.IdProduct);><i class="glyphicon glyphicon-edit"></i></button></td></tr></tbody></table></spinner-overlay><uib-pagination boundary-links=true total-items=totalItems items-per-page=filter.Paging.PageItemCount data-ng-model=filter.Paging.PageIndex previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; data-ng-change="pageChanged();scrollTo(\'data-grid\');"></uib-pagination></div></div>'),a.put("app/modules/product/partials/productTaxCodesList.html",'<div class=container-fluid><div class=well><span class=legend>Manage Product Tax Codes</span><div class="row form-group"><div class=col-md-4><input class=form-control placeholder="SKU, Product Name" data-ng-model=filter.SearchText></div></div><div class="row form-group"><div class=col-md-4><button class="btn btn-info" data-ng-click=filterProducts(); type=button>Filter</button></div></div><hr><div class="btn-line form-group"><button class="btn btn-success btn-right width-160px" data-ng-click=update();>Update</button></div><spinner-overlay data-loading=refreshTracker.active()><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.submitted}" unsaved-warning-form><fieldset><table id=data-grid class="table table-striped table-hover editable-table"><thead><tr><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Name\')"><span>Product</span> <span data-ng-if="filter.Sorting.Path == \'Name\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th>SKUs</th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'TaxCode\')"><span>Current Tax Code</span> <span data-ng-if="filter.Sorting.Path == \'TaxCode\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=width-160px>New Tax Code</th></tr></thead><tbody><tr data-ng-repeat="item in products"><td><div class=text>{{item.Name}}</div></td><td><div class=text><span data-ng-repeat="sku in item.SKUs">{{sku.Code}}{{$last!=true ? " / " : ""}}</span></div></td><td><div class=text>{{item.TaxCode}}</div></td><td><div class=input-group><input name=NewTaxCode{{$index}} class=form-control placeholder="New Tax Code" data-ng-model=item.NewTaxCode data-ng-minlength=8 data-ng-maxlength=8 data-ng-pattern="/^((?!([pP]0000000))[\\da-zA-Z])*$/"><div class=error-container ng-show="forms.submitted && forms.form.NewTaxCode{{$index}}.$invalid"><small class=error ng-show=forms.form.NewTaxCode{{$index}}.$error.minlength>Tax Code should be 8 characters long</small> <small class=error ng-show=forms.form.NewTaxCode{{$index}}.$error.maxlength>Tax Code should be 8 characters long</small> <small class=error ng-show=forms.form.NewTaxCode{{$index}}.$error.pattern>Tax Code should be alphanumeric(P0000000 isn\'t allowed)</small> <small class=error ng-show=forms.form.NewTaxCode{{$index}}.$error.server>{{serverMessages.GetMessage(\'TaxCode\')}}</small></div></div></td></tr></tbody></table></fieldset></form></spinner-overlay><uib-pagination boundary-links=true total-items=totalItems items-per-page=filter.Paging.PageItemCount data-ng-model=filter.Paging.PageIndex previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; data-ng-change="pageChanged();scrollTo(\'data-grid\');"></uib-pagination></div></div>'),a.put("app/modules/product/partials/promotionDetail.html",'<div class="container-fluid promotion-edit"><div class=left-pane-controls><div class="well container-fluid"><div><button data-ng-click=save() class="btn btn-success width-160px" unsaved-warning-clear>Save</button></div><div class="btn-group margin-top-10px"><button cancel-button-default-state=index.oneCol.managePromotions cancel-button class="btn btn-default width-160px">Cancel</button></div><div class=margin-top-10px><button class="btn btn-primary width-160px" ui-sref=index.oneCol.managePromotions>Manage All</button></div></div><div ng-controller=objectHistorySectionController onload="name = \'History\'" data-ng-include="\'app/modules/setting/partials/objectHistorySection.html\'"></div></div><div class=right-pane-main><div class=container-fluid><div class=row><uib-tabset><uib-tab heading="Promotion Details"><div class="container container-left"><div class="well row"><spinner-overlay data-loading=refreshTracker.active()><form class=form-horizontal name=forms.mainForm data-ng-submit=save() data-ng-class="{submitted: forms.submitted}" novalidate unsaved-warning-form><fieldset><span class=legend>General Information</span><div class=form-group><label for=type class="col-md-3 control-label">Customer Type</label><div class=col-md-9><select class=form-control name=Assigned data-ng-model=promotion.Assigned ng-options="assignedCustomerType.Key as assignedCustomerType.Text for assignedCustomerType in assignedCustomerTypes"></select></div></div><div class=form-group><label for=url class="col-md-3 control-label">Description</label><div class=col-md-9><input name=Description class=form-control placeholder=Description data-ng-model=promotion.Description required><div class=error-container ng-show="forms.submitted && forms.mainForm.Description.$invalid"><small class=error ng-show=forms.mainForm.Description.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Description")}}</small> <small class=error ng-show=forms.mainForm.Description.$error.server>{{serverMessages.GetMessage(\'Description\')}}</small></div></div></div><span class=legend>Status and Expiration</span><div class=form-group><label for=active class="col-md-3 control-label">Active</label><div class=col-md-9><div class=checkbox><label><input type=checkbox name=StatusCode data-ng-model=promotion.StatusCode data-ng-true-value=2 data-ng-false-value="1"></label></div></div></div><div class=form-group><label for=date class="col-md-3 control-label">Valid From</label><div class=col-md-9><p class=input-group><input name=StartDate class=form-control uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=promotion.StartDate is-open=startDateOpened required> <span class=input-group-btn><button type=button class="btn btn-default" ng-disabled=false ng-click="stopPropagation($event); startDateOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.submitted && forms.mainForm.StartDate.$invalid"><small class=error ng-show=forms.mainForm.StartDate.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Valid From")}}</small> <small class=error ng-show=forms.mainForm.StartDate.$error.server>{{serverMessages.GetMessage(\'StartDate\')}}</small></div></div></div><div class=form-group><label for=date class="col-md-3 control-label">Valid To</label><div class=col-md-9><p class=input-group><input name=ExpirationDate class=form-control uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=promotion.ExpirationDate is-open=expirationDateOpened required> <span class=input-group-btn><button type=button class="btn btn-default" ng-disabled=false ng-click="stopPropagation($event); expirationDateOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.submitted && forms.mainForm.ExpirationDate.$invalid"><small class=error ng-show=forms.mainForm.ExpirationDate.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Valid To")}}</small> <small class=error ng-show=forms.mainForm.ExpirationDate.$error.server>{{serverMessages.GetMessage(\'ExpirationDate\')}}</small></div></div></div><span class=legend>Promotion Type</span><div class=form-group><label for=type class="col-md-3 control-label">Promotion Type</label><div class=col-md-9><select class=form-control name=PromotionType data-ng-model=promotion.IdObjectType ng-options="promotionType.Key as promotionType.Text for promotionType in promotionTypes"></select></div></div><div class=form-group><label for=active class="col-md-3 control-label">Allow Healthwise</label><div class=col-md-9><div class=checkbox><label><input type=checkbox name=AllowHealthwise data-ng-model="promotion.AllowHealthwise"></label></div></div></div><div class=form-group><label for=active class="col-md-3 control-label">Can use with discount</label><div class=col-md-9><div class=checkbox><label><input type=checkbox name=CanUseWithDiscount data-ng-model="promotion.CanUseWithDiscount"></label></div></div></div><div data-ng-if="promotion.IdObjectType==1" class=form-group><label for=MaxTimesUseMode class="col-md-3 control-label">Uses Per Order</label><div class=col-md-9><select class=form-control name=MaxTimesUseMode data-ng-model=options.maxTimesUseMode ng-options="item.Key as item.Text for item in maxTimesUseModes"></select></div></div><div data-ng-if="promotion.IdObjectType==1 && options.maxTimesUseMode==3" class=form-group><label for=MaxTimesUse class="col-md-3 control-label">Count</label><div class=col-md-9><input name=MaxTimesUse class=form-control placeholder=Count data-ng-model=options.maxTimesUse min=1 max=100000 numbers-only required><div class=error-container ng-show="forms.submitted && forms.mainForm.MaxTimesUse.$invalid"><small class=error ng-show=forms.mainForm.MaxTimesUse.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Count")}}</small> <small class=error ng-show=forms.mainForm.MaxTimesUse.$error.max>{{getValidationMessage("ValidationMessages.FieldMax","Count",100000)}}</small> <small class=error ng-show=forms.mainForm.MaxTimesUse.$error.min>{{getValidationMessage("ValidationMessages.FieldMin","Count",1)}}</small></div></div></div><div data-ng-if="promotion.IdObjectType==2" class=form-group><label for=Percent class="col-md-3 control-label">Percent Discount</label><div class=col-md-9><div class=input-group><span class=input-group-addon>%</span> <input name=Percent class=form-control placeholder="Percent Discount" money min=0.01 max=100 data-ng-model=promotion.Percent required></div><div class=error-container ng-show="forms.submitted && forms.mainForm.Percent.$invalid"><small class=error ng-show=forms.mainForm.Percent.$error.parse>{{getValidationMessage("ValidationMessages.FieldRequired","Percent Discount")}}</small> <small class=error ng-show=forms.mainForm.Percent.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Percent Discount")}}</small> <small class=error ng-show=forms.mainForm.Percent.$error.max>{{getValidationMessage("ValidationMessages.FieldMax","Percent Discount",100)}}</small> <small class=error ng-show=forms.mainForm.Percent.$error.min>{{getValidationMessage("{0} must be over %0.00","Percent Discount")}}</small> <small class=error ng-show=forms.mainForm.Percent.$error.server>{{serverMessages.GetMessage(\'Percent\')}}</small></div></div></div></fieldset></form><div data-ng-show="promotion.IdObjectType==1"><div class=products><span class=legend>Buy<select class="form-control buy-types" name=PromotionBuyType data-ng-model=promotion.PromotionBuyType ng-options="item.Key as item.Text for item in ReferenceData.PromotionBuyTypes"></select>X</span><form class=form-horizontal name=forms.PromotionsToBuySkus data-ng-class="{submitted: forms.submitted}" novalidate unsaved-warning-form><table class="table table-striped table-hover"><thead><tr><th class=qty>Quantity</th><th class=sku>SKU</th><th>Name</th><th class=actions></th></tr></thead><tbody><tr data-ng-repeat="item in promotion.PromotionsToBuySkus" class=form-horizontal ng-form=i{{$index}} novalidate><td><input name=Quantity class=form-control placeholder=QTY numbers-only min=1 max=100 data-ng-model=item.Quantity required><div class="error-container small-block" ng-show="forms.submitted && forms.PromotionsToBuySkus.i{{$index}}.Quantity.$invalid"><small class=error ng-show=forms.PromotionsToBuySkus.i{{$index}}.Quantity.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Quantity")}}</small> <small class=error ng-show=forms.PromotionsToBuySkus.i{{$index}}.Quantity.$error.parse>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Quantity")}}</small> <small class=error ng-show=forms.PromotionsToBuySkus.i{{$index}}.Quantity.$error.max>{{getValidationMessage("ValidationMessages.FieldMax","GeneralFieldNames.Quantity",100)}}</small> <small class=error ng-show=forms.PromotionsToBuySkus.i{{$index}}.Quantity.$error.min>{{getValidationMessage("ValidationMessages.FieldMin","GeneralFieldNames.Quantity", 0)}}</small> <small class=error ng-show=forms.PromotionsToBuySkus.i{{$index}}.Quantity.$error.server>{{serverMessages.GetMessage(\'Quantity\',\'PromotionsToBuySkus\',$index)}}</small></div></td><td><div class=as-label>{{item.ShortSkuInfo.Code}}</div></td><td><div class=as-label>{{item.ShortSkuInfo.ProductName}}</div></td><td><div class=as-label><button class="btn btn-xs btn-default btn-danger" data-ng-click=deletePromotionToBuySku($index);>Delete</button></div></td></tr></tbody></table></form><div ng-controller=skusSearchController onload="name = \'PromotionsToBuySkus\'" data-ng-include="\'app/modules/product/partials/skusSearchList.html\'"></div></div><div><div class=products><span class=legend>Get Y</span><form class=form-horizontal name=forms.PromotionsToGetSkus data-ng-class="{submitted: forms.submitted}" novalidate unsaved-warning-form><table class="table table-striped table-hover"><thead><tr><th class=qty>Quantity</th><th class=sku>SKU</th><th>Name</th><th class=percent>Percent</th><th class=actions></th></tr></thead><tbody><tr data-ng-repeat="item in promotion.PromotionsToGetSkus" class=form-horizontal ng-form=i{{$index}} novalidate><td><input name=Quantity class=form-control placeholder=QTY numbers-only min=1 max=100 data-ng-model=item.Quantity required><div class="error-container small-block" ng-show="forms.submitted && forms.PromotionsToGetSkus.i{{$index}}.Quantity.$invalid"><small class=error ng-show=forms.PromotionsToGetSkus.i{{$index}}.Quantity.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Quantity")}}</small> <small class=error ng-show=forms.PromotionsToGetSkus.i{{$index}}.Quantity.$error.parse>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Quantity")}}</small> <small class=error ng-show=forms.PromotionsToGetSkus.i{{$index}}.Quantity.$error.max>{{getValidationMessage("ValidationMessages.FieldMax","GeneralFieldNames.Quantity",100)}}</small> <small class=error ng-show=forms.PromotionsToGetSkus.i{{$index}}.Quantity.$error.min>{{getValidationMessage("ValidationMessages.FieldMin","GeneralFieldNames.Quantity", 0)}}</small> <small class=error ng-show=forms.PromotionsToGetSkus.i{{$index}}.Quantity.$error.server>{{serverMessages.GetMessage(\'Quantity\',\'PromotionsToBuySkus\',$index)}}</small></div></td><td><div class=as-label>{{item.ShortSkuInfo.Code}}</div></td><td><div class=as-label>{{item.ShortSkuInfo.ProductName}}</div></td><td><div><div class=input-group><span class=input-group-addon>%</span> <input name=Percent class=form-control placeholder=Percent money max=100 min=0.01 data-ng-model=item.Percent required></div><div class="error-container small-block" ng-show="forms.submitted && forms.PromotionsToGetSkus.i{{$index}}.Percent.$invalid"><small class=error ng-show=forms.PromotionsToGetSkus.i{{$index}}.Percent.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Percent")}}</small> <small class=error ng-show=forms.PromotionsToGetSkus.i{{$index}}.Percent.$error.parse>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Percent")}}</small> <small class=error ng-show=forms.PromotionsToGetSkus.i{{$index}}.Percent.$error.max>{{getValidationMessage("ValidationMessages.FieldMax","GeneralFieldNames.Percent",100)}}</small> <small class=error ng-show=forms.PromotionsToGetSkus.i{{$index}}.Percent.$error.min>{{getValidationMessage("{0} must be over $0.00","GeneralFieldNames.Percent")}}</small> <small class=error ng-show=forms.PromotionsToGetSkus.i{{$index}}.Percent.$error.server>{{serverMessages.GetMessage(\'Percent\',\'PromotionsToGetSkus\',$index)}}</small></div></div></td><td><div class=as-label><button class="btn btn-xs btn-default btn-danger" data-ng-click=deletePromotionToGetSku($index);>Delete</button></div></td></tr></tbody></table></form><div ng-controller=skusSearchController onload="name = \'PromotionsToGetSkus\'" data-ng-include="\'app/modules/product/partials/skusSearchList.html\'"></div></div></div></div><div data-ng-show="promotion.IdObjectType==2"><span class=legend>Selected Categories</span><div class=categories><button data-ng-if=!categoriesExpanded data-ng-click=updateCategoriesCollapsed(true); class="btn btn-primary btn-xs expand-button">Expand All</button> <button data-ng-if=categoriesExpanded data-ng-click=updateCategoriesCollapsed(false); class="btn btn-primary btn-xs expand-button">Collapse All</button><div ui-tree data-drag-enabled=false class=ya-treeview><ol ui-tree-nodes="" data-ng-model=rootCategory.SubItems><li ng-repeat="item in rootCategory.SubItems" ui-tree-node collapsed=true data-ng-include="\'app/modules/content/partials/contentCategories.html\'"></li></ol></div></div></div></spinner-overlay></div></div></uib-tab></uib-tabset></div></div></div></div>'),a.put("app/modules/product/partials/promotionsList.html",'<div class="container-fluid promotion-list"><div class=well><span class=legend>Manage Promotions</span><div class="row form-group"><div class=col-md-3><input class=form-control placeholder=Description data-ng-model=filter.SearchText></div><div class=col-md-3><select class=form-control name=Status data-ng-model=filter.Status ng-options="activeFilterOption.Key as activeFilterOption.Text for activeFilterOption in activeFilterOptions"></select></div><div class=col-md-3><select class=form-control name=ExpiredType data-ng-model=filter.DateStatus ng-options="item.Key as item.Text for item in ReferenceData.DateStatuses"></select></div><div class=col-md-3><select class=form-control name=Assigned data-ng-model=filter.Assigned ng-options="item.Key as item.Text for item in customerTypes"></select></div></div><div class="row form-group"><div class=col-md-3><p class=input-group><input name=test class=form-control placeholder="Valid From" uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.ValidFrom is-open="fromOpened"> <span class=input-group-btn><button type=button class="btn btn-default" ng-disabled=false ng-click="stopPropagation($event); fromOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p></div><div class=col-md-3><p class=input-group><input name=test class=form-control placeholder="Valid To" uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.ValidTo is-open="toOpened"> <span class=input-group-btn><button type=button class="btn btn-default" ng-disabled=false ng-click="stopPropagation($event); toOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p></div></div><div class="row form-group"><div class=col-md-4><button class="btn btn-info" data-ng-click=filterPromotions(); type=button>Filter</button></div></div><hr><div class=form-group><button data-ng-click=open(); class="btn btn-primary">Add New Promotion</button></div><spinner-overlay data-loading=refreshTracker.active()><table id=data-grid class="table table-striped table-hover"><thead><tr><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Description\')"><span>Description</span> <span data-ng-if="filter.Sorting.Path == \'Description\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'IdObjectType\')"><span>Type</span> <span data-ng-if="filter.Sorting.Path == \'IdObjectType\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Assigned\')"><span>Customer</span> <span data-ng-if="filter.Sorting.Path == \'Assigned\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th>Active</th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'StartDate\')"><span>Valid From</span> <span data-ng-if="filter.Sorting.Path == \'StartDate\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'ExpirationDate\')"><span>Valid To</span> <span data-ng-if="filter.Sorting.Path == \'ExpirationDate\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th>Status</th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'DateCreated\')"><span>Created</span> <span data-ng-if="filter.Sorting.Path == \'DateCreated\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th>Actions</th></tr></thead><tbody><tr data-ng-repeat="item in promotions"><td><a ui-sref=index.oneCol.promotionDetail({id:item.Id})>{{::item.Description}}</a></td><td>{{item.PromotionTypeName}}</td><td><span data-ng-if=!item.Assigned class="label label-info font-default">All</span> <span data-ng-if="item.Assigned==1" class="label label-retail font-default">Retail Only</span> <span data-ng-if="item.Assigned==2" class="label label-wholesale font-default">Wholesale Only</span></td><td><span data-ng-if="item.StatusCode == 2" class="label label-info font-default">{{getReferenceItem(ReferenceData.RecordStatuses, item.StatusCode).Text}}</span> <span data-ng-if="item.StatusCode == 1" class="label label-danger font-default">{{getReferenceItem(ReferenceData.RecordStatuses, item.StatusCode).Text}}</span></td><td>{{item.StartDate | date:"MM/dd/yy"}}</td><td>{{item.ExpirationDate | date:"MM/dd/yy"}}</td><td><span data-ng-if="item.DateStatus == 1" class="label label-danger font-default">Expired</span> <span data-ng-if="item.DateStatus == 2" class="label label-success font-default">Live</span> <span data-ng-if="item.DateStatus == 3" class="label label-future font-default">Future</span></td><td>{{item.DateCreated | date:"MM/dd/yy"}}<br>{{item.DateCreated | date:"h:mm a"}}<br>{{item.AddedByAgentId}}</td><td><button title=Edit class="btn btn-default btn-success btn-xs" data-ng-click=open(item.Id);><i class="glyphicon glyphicon-edit"></i></button> <button title=Delete class="btn btn-default btn-danger btn-xs" ladda=deleteTracker.active() data-ng-click=delete(item.Id);><i class="glyphicon glyphicon-remove"></i></button></td></tr></tbody></table></spinner-overlay><uib-pagination boundary-links=true total-items=totalItems items-per-page=filter.Paging.PageItemCount data-ng-model=filter.Paging.PageIndex previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; data-ng-change="pageChanged();scrollTo(\'data-grid\');"></uib-pagination></div></div>'),
a.put("app/modules/product/partials/sendOutOfStockRequestsPopup.html",'<div class=modal-header><h3 class=modal-title>Are you sure you want to send these emails?</h3></div><div class=modal-body><spinner-overlay data-loading=refreshTracker.active()><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.submitted}" novalidate><fieldset><div class=form-group><label class="col-md-3 control-label">Message Format</label><div class=col-md-9><textarea type=text name=MessageFormat class=form-control placeholder="Message Format" rows=10 data-ng-model=options.MessageFormat required data-ng-maxlength=1000></textarea><div class=error-container ng-show="forms.submitted && forms.form.MessageFormat.$invalid"><small class=error ng-show=forms.form.MessageFormat.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Message Format")}}</small> <small class=error ng-show=forms.form.MessageFormat.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["Message Format", "1000"])}}</small> <small class=error ng-show=forms.form.MessageFormat.$error.server>{{serverMessages.GetMessage(\'MessageFormat\')}}</small></div></div></div></fieldset></form></spinner-overlay></div><div class=modal-footer><button class="btn btn-success" ladda=refreshTracker.active() data-ng-click=save()>Send</button> <button class="btn btn-default" data-ng-click=cancel()>Cancel</button></div>'),a.put("app/modules/product/partials/skuBreakDownReport.html",'<div class="container-fluid sku-breakdown-report"><div class=well><span class=legend>SKU Breakdown Report</span><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.form.submitted}" novalidate><fieldset><div class="row form-group"><div class=col-md-3><p class=input-group><input class=form-control name=From data-ng-change=filterChanged(); uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.From is-open=fromOpened ng-required="true"> <span class=input-group-btn><button type=button class="btn btn-default" ng-click="stopPropagation($event); fromOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.form.submitted && forms.form.From.$invalid"><small class=error ng-show=forms.form.From.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","From")}}</small></div></div><div class=col-md-3><p class=input-group><input class=form-control name=To data-ng-change=filterChanged(); uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.To is-open=toOpened ng-required="true"> <span class=input-group-btn><button type=button class="btn btn-default" ng-click="stopPropagation($event); toOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.form.submitted && forms.form.To.$invalid"><small class=error ng-show=forms.form.To.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","To")}}</small></div></div></div><div class="row form-group"><div class=col-md-12><button class="btn btn-info" data-ng-click=filterItems(); type=button>Filter</button> <a target=_self class="btn btn-primary pull-right" data-ng-href={{options.exportUrl}}>Export</a></div></div></fieldset></form><spinner-overlay data-loading=refreshTracker.active()><div class=orders><table class="table table-striped order-statuses"><thead><tr><th>SKU</th><th>Quantity</th><th>Total</th><th>Retail</th><th>Wholesale</th></tr></thead><tbody><tr data-ng-repeat="item in items"><td><a data-ng-click=openOrders(item.IdSku)>{{::item.Code}}</a></td><td>{{::item.TotalQuantity}}</td><td>{{::item.TotalAmount | currency}}</td><td>{{::item.RetailPercent}}%</td><td>{{::item.WholesalePercent}}%</td></tr></tbody></table></div></spinner-overlay></div></div>'),a.put("app/modules/product/partials/skuPOrderTypeBreakDownReport.html",'<div class="container-fluid sku-pordertype-breakdown-report"><div class=well><span class=legend>Breakdown Report</span><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.form.submitted}" novalidate><fieldset><div class="row form-group"><div class=col-md-3><p class=input-group><input class=form-control name=From data-ng-change=filterChanged(); uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.From is-open=fromOpened ng-required="true"> <span class=input-group-btn><button type=button class="btn btn-default" ng-disabled=false ng-click="stopPropagation($event); fromOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.form.submitted && forms.form.From.$invalid"><small class=error ng-show=forms.form.From.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","From")}}</small></div></div><div class=col-md-3><p class=input-group><input class=form-control name=To data-ng-change=filterChanged(); uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.To is-open=toOpened ng-required="true"> <span class=input-group-btn><button type=button class="btn btn-default" ng-disabled=false ng-click="stopPropagation($event); toOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=error-container ng-show="forms.form.submitted && forms.form.To.$invalid"><small class=error ng-show=forms.form.To.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","To")}}</small></div></div><div class=col-md-3><select class=form-control name=FrequencyType data-ng-change=filterChanged(); data-ng-model=filter.FrequencyType ng-options="item.Key as item.Text for item in frequencyTypes"></select></div><div class=col-md-3><div class=checkbox><label><input type=checkbox name=Future data-ng-model=filter.Future data-ng-change="futureChanged();"> Future Transactions</label></div></div></div><div class="row form-group"><div class=col-md-12><button class="btn btn-info" data-ng-click=filterItems(); type=button>Filter</button></div></div></fieldset></form><spinner-overlay data-loading=refreshTracker.active()><span class=legend>Transactions</span><table class="table table-striped"><thead><tr><th>Date</th><th>Transactions</th><th>P Orders</th><th>NP Orders</th><th>P/NP Orders</th><th>% Perishable</th></tr></thead><tbody><tr data-ng-repeat="period in report.POrderTypePeriods"><td data-ng-if="report.FrequencyType==1">{{::period.From | date:"MM/dd/yy"}}</td><td data-ng-if="report.FrequencyType!=1">{{::period.From | date:"MM/dd/yy"}} - {{::period.To | date:"MM/dd/yy"}}</td><td>{{::period.TotalCount}}</td><td>{{::period.PCount}}</td><td>{{::period.NPCount}}</td><td>{{::period.PNPCount}}</td><td>{{::period.PPercent}}%</td></tr></tbody></table><span class=legend>SKUs</span><table class="table table-striped"><thead><tr><th>SKU</th><th data-ng-repeat="period in report.POrderTypePeriods"><span data-ng-if="report.FrequencyType==1">{{::period.From | date:"MM/dd/yy"}}</span> <span data-ng-if="report.FrequencyType!=1">{{::period.From | date:"MM/dd/yy"}} - {{::period.To | date:"MM/dd/yy"}}</span></th></tr></thead><tbody><tr data-ng-repeat="sku in report.Skus"><td><a data-ng-click=openOrders(sku.IdSku)>{{::sku.Code}}</a></td><td data-ng-repeat="period in sku.Periods">{{::period.Quantity}}</td></tr></tbody></table></spinner-overlay></div></div>'),a.put("app/modules/product/partials/skuPrices.html",'<div class=container-fluid><div class=well><span class=legend>Bulk Product Price Update</span><div class="row form-group"><div class=col-md-4><input class=form-control placeholder="SKU, Product Name" data-ng-model=filter.SearchText></div></div><div class="row form-group"><div class=col-md-4><button class="btn btn-info" data-ng-click=filterItems(); type=button>Filter</button></div></div><hr><div class="btn-line form-group"><button class="btn btn-success btn-right width-160px" data-ng-click=update();>Update</button></div><spinner-overlay data-loading=refreshTracker.active()><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.submitted}" unsaved-warning-form><fieldset><table id=data-grid-skus class="table table-striped table-hover editable-table"><thead><tr><th>SKU</th><th>Product Name</th><th>Price</th><th class=width-160px>New Price</th><th>Wholesale Price</th><th class=width-160px>New Wholesale Price</th></tr></thead><tbody><tr data-ng-repeat="item in items"><td><div class=text>{{::item.Code}}</div></td><td><a ui-sref=index.oneCol.productDetail({id:item.IdProduct})>{{::item.ProductName}}</a></td><td><div class=text>{{::item.Price | currency}}</div></td><td><div class=input-group><input name=NewPrice{{$index}} class=form-control placeholder="New Price" data-ng-model=item.NewPrice money max=100000 min=0.00 required><div class=error-container ng-show="forms.submitted && forms.form.NewPrice{{$index}}.$invalid"><small class=error ng-show=forms.form.NewPrice{{$index}}.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.RetailPrice")}}</small> <small class=error ng-show=forms.form.NewPrice{{$index}}.$error.parse>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.RetailPrice")}}</small> <small class=error ng-show=forms.form.NewPrice{{$index}}.$error.max>{{getValidationMessage("ValidationMessages.FieldMax","GeneralFieldNames.RetailPrice",1000000)}}</small> <small class=error ng-show=forms.form.NewPrice{{$index}}.$error.min>{{getValidationMessage("{0} must be over $0.00","GeneralFieldNames.RetailPrice")}}</small> <small class=error ng-show=forms.form.NewPrice{{$index}}.$error.server>{{serverMessages.GetMessage(\'NewPrice\')}}</small></div></div></td><td><div class=text>{{::item.WholesalePrice | currency}}</div></td><td><div class=input-group><input name=NewWholesalePrice{{$index}} class=form-control placeholder="New Wholesale Price" data-ng-model=item.NewWholesalePrice money max=100000 min=0.00 required><div class=error-container ng-show="forms.submitted && forms.form.NewWholesalePrice{{$index}}.$invalid"><small class=error ng-show=forms.form.NewWholesalePrice{{$index}}.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.WholesalePrice")}}</small> <small class=error ng-show=forms.form.NewWholesalePrice{{$index}}.$error.parse>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.WholesalePrice")}}</small> <small class=error ng-show=forms.form.NewWholesalePrice{{$index}}.$error.max>{{getValidationMessage("ValidationMessages.FieldMax","GeneralFieldNames.WholesalePrice",1000000)}}</small> <small class=error ng-show=forms.form.NewWholesalePrice{{$index}}.$error.min>{{getValidationMessage("{0} must be over $0.00","GeneralFieldNames.WholesalePrice")}}</small> <small class=error ng-show=forms.form.NewWholesalePrice{{$index}}.$error.server>{{serverMessages.GetMessage(\'NewWholesalePrice\')}}</small></div></div></td></tr></tbody></table></fieldset></form></spinner-overlay><uib-pagination boundary-links=true total-items=totalItems items-per-page=filter.Paging.PageItemCount data-ng-model=filter.Paging.PageIndex previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; data-ng-change="pageChanged();scrollTo(\'data-grid-skus\');"></uib-pagination></div></div>'),a.put("app/modules/product/partials/skusSearchList.html",'<div class=partial-sku-list><span class=legend>Search Products</span><div class=form-horizontal ng-form=forms.filterForm data-ng-submit=save() data-ng-class="{submitted: submitted}" novalidate><div class="row form-group"><div class=col-md-4><input class=form-control name=SearchText placeholder="SKU, Product Name" data-ng-model=filter.SearchText ng-minlength=3 required><div class=error-container ng-show="submitted && forms.filterForm.SearchText.$invalid"><small class=error ng-show=forms.filterForm.SearchText.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Search Text")}}</small> <small class=error ng-show=forms.filterForm.SearchText.$error.minlength>{{getValidationMessage("{0} should have at least 3 symbols","Search Text")}}</small></div></div><div class=col-md-4><button class="btn btn-info" data-ng-click=filterSkus(); type=button>Filter</button></div></div></div><spinner-overlay data-loading=refreshTracker.active()><table class="table table-striped table-hover"><thead><tr><th class=sku>SKU</th><th>Name</th><th class=actions></th></tr></thead><tbody><tr data-ng-repeat="item in items"><td>{{item.Code}}</td><td>{{item.ProductName}}</td><td><button class="btn btn-xs btn-default btn-success" data-ng-click=add(item);>Add</button></td></tr></tbody></table></spinner-overlay></div>'),a.put("app/modules/product/partials/topPurchasedProductsPopup.html",'<div class=modal-header><h3 class=modal-title>Top Purchased Products</h3></div><div class="modal-body products"><spinner-overlay data-loading=refreshTracker.active()><table class="table table-striped table-hover"><thead><tr><th>SKU</th><th>Type</th><th>Product Name</th><th>Ordered</th><th></th></tr></thead><tbody><tr data-ng-repeat="item in products"><td>{{item.Code}}</td><td class=type><span data-ng-if="item.ProductType==2" class=perishable>P</span> <span data-ng-if="item.ProductType==1" class=not-perishable>NP</span></td><td>{{item.DescriptionName}}</td><td>{{item.Ordered}}</td><td><input data-ng-model=item.IsSelected type=checkbox></td></tr></tbody></table></spinner-overlay></div><div class=modal-footer><button class="btn btn-success" ladda=saveTracker.active() data-ng-click=save()>Add Selected to Order</button> <button class="btn btn-default" data-ng-click=cancel()>Cancel</button></div>'),a.put("app/modules/profile/partials/profile.html",'<div class=container-fluid><div class=left-pane-controls><div class="well container-fluid"><div><button class="btn btn-success width-160px" ladda=profileTracker.active() data-ng-click=save()>Save</button></div><div class=margin-top-10px><button class="btn btn-default width-160px" cancel-button>Cancel</button></div></div></div><div class=right-pane-main><div class=container-fluid><div class=row><div class="container container-left"><div class="well row"><spinner-overlay data-loading=profileTracker.active()><form class=form-horizontal name=form.profileForm data-ng-submit=save() data-ng-class="{submitted: form.profileForm.submitted}" novalidate><fieldset><span class=legend>Manage Profile</span><div class=form-group><label for=agentId class="col-md-3 control-label">Agent ID</label><div class="col-md-9 form-control-static"><span>{{profile.AgentId}}</span></div></div><div class=form-group><label class="col-md-3 control-label">First Name</label><div class=col-md-9><input name=FirstName class=form-control placeholder="First Name" data-ng-model=profile.FirstName required data-ng-maxlength=100><div class=error-container ng-show="form.profileForm.submitted && form.profileForm.FirstName.$invalid"><small class=error ng-show=form.profileForm.FirstName.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.FirstName")}}</small> <small class=error ng-show=form.profileForm.FirstName.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["GeneralFieldNames.FirstName", "100"])}}</small> <small class=error ng-show=form.profileForm.FirstName.$error.server>{{serverMessages.GetMessage(\'FirstName\')}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label">Last Name</label><div class=col-md-9><input name=LastName class=form-control placeholder="Last Name" data-ng-model=profile.LastName required data-ng-maxlength=100><div class=error-container ng-show="form.profileForm.submitted && form.profileForm.LastName.$invalid"><small class=error ng-show=form.profileForm.LastName.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.LastName")}}</small> <small class=error ng-show=form.profileForm.LastName.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["GeneralFieldNames.LastName", "100"])}}</small> <small class=error ng-show=form.profileForm.LastName.$error.server>{{serverMessages.GetMessage(\'LastName\')}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label">Email</label><div class=col-md-9><input type=email name=Email class=form-control placeholder=Email data-ng-model=profile.Email required data-ng-maxlength=100><div class=error-container ng-show="form.profileForm.submitted && form.profileForm.email.$invalid"><small class=error ng-show=form.profileForm.Email.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Email")}}</small> <small class=error ng-show=form.profileForm.Email.$error.email>{{getValidationMessage("ValidationMessages.EmailFormat","GeneralFieldNames.Email")}}</small> <small class=error ng-show=form.profileForm.Email.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["GeneralFieldNames.Email", "100"])}}</small> <small class=error ng-show=form.profileForm.Email.$error.server>{{serverMessages.GetMessage(\'Email\')}}</small></div></div></div><span class=legend>Change Password</span><div class=form-group><label class="col-md-3 control-label">Old Password</label><div class=col-md-9><input type=password name=OldPassword class=form-control data-ng-model=profile.OldPassword placeholder="Old Password"><div class=error-container ng-show="form.profileForm.submitted && form.profileForm.OldPassword.$invalid"><small class=error ng-show=form.profileForm.OldPassword.$error.server>{{serverMessages.GetMessage(\'OldPassword\')}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label">New Password</label><div class=col-md-9><input type=password name=NewPassword class=form-control data-ng-model=profile.NewPassword placeholder="New Password"><div class=error-container ng-show="form.profileForm.submitted && form.profileForm.NewPassword.$invalid"><small class=error ng-show=form.profileForm.NewPassword.$error.server>{{serverMessages.GetMessage(\'NewPassword\')}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label">Confirm New Password</label><div class=col-md-9><input type=password name=ConfirmNewPassword class=form-control data-ng-model=profile.ConfirmNewPassword placeholder="Confirm New Password"><div class=error-container ng-show="form.profileForm.submitted && form.profileForm.ConfirmNewPassword.$invalid"><small class=error ng-show=form.profileForm.ConfirmNewPassword.$error.server>{{serverMessages.GetMessage(\'ConfirmNewPassword\')}}</small></div></div></div></fieldset></form></spinner-overlay></div></div></div></div></div></div>'),a.put("app/modules/setting/partials/addEditCountry.html",'<div class=modal-header><h3 class=modal-title>Add/Edit Country</h3></div><div class=modal-body><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.form.submitted}" novalidate unsaved-warning-form><fieldset><div class=form-group><label class="col-md-3 control-label">Country Name</label><div class=col-md-9><input name=CountryName class=form-control placeholder="Country Name" data-ng-model=country.CountryName required><div class=error-container ng-show="forms.form.submitted && forms.form.CountryName.$invalid"><small class=error ng-show=forms.form.CountryName.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.CountryName")}}</small> <small class=error ng-show=forms.form.CountryName.$error.server>{{serverMessages.GetMessage(\'CountryName\')}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label">Country Code</label><div class=col-md-9><input name=CountryCode class=form-control placeholder="Country Code" data-ng-model=country.CountryCode maxlength=3 required><div class=error-container ng-show="forms.form.submitted && forms.form.CountryCode.$invalid"><small class=error ng-show=forms.form.CountryCode.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.CountryCode")}}</small> <small class=error ng-show=forms.form.CountryCode.$error.server>{{serverMessages.GetMessage(\'CountryCode\')}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label">Visibility</label><div class=col-md-9><select class=form-control name=IdVisibility data-ng-model=country.IdVisibility ng-options="item.Key as item.Text for item in customerTypes"></select></div></div></fieldset></form></div><div class=modal-footer><button class="btn btn-success" ladda=saveTracker.active() data-ng-click=save()>Save</button> <button class="btn btn-default" data-ng-click=cancel()>Cancel</button></div>'),a.put("app/modules/setting/partials/addEditOrderNote.html",'<div class=modal-header><h3 class=modal-title>Order Specific Note Details</h3></div><div class=modal-body><form class=form-horizontal name=orderNoteForm data-ng-submit=save() data-ng-class="{submitted: orderNoteForm.submitted}" novalidate unsaved-warning-form><fieldset><div class=form-group><label class="col-md-3 control-label">Label</label><div class=col-md-9><input name=title class=form-control placeholder=Label data-ng-model=orderNote.Title required data-ng-maxlength=50><div class=error-container ng-show="orderNoteForm.submitted && orderNoteForm.title.$invalid"><small class=error ng-show=orderNoteForm.title.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Label")}}</small> <small class=error ng-show=orderNoteForm.title.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["GeneralFieldNames.Label", "50"])}}</small> <small class=error ng-show=orderNoteForm.title.$error.server>{{serverMessages.GetMessage(\'Title\')}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label">Order Note</label><div class=col-md-9><textarea type=text name=description class=form-control placeholder="Order Note" data-ng-model=orderNote.Description required data-ng-maxlength=1000 rows=10></textarea><div class=error-container ng-show="orderNoteForm.submitted && orderNoteForm.description.$invalid"><small class=error ng-show=orderNoteForm.description.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.OrderNote")}}</small> <small class=error ng-show=orderNoteForm.description.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["GeneralFieldNames.OrderNote", "1000"])}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label">Customer Types</label><div class=col-md-9><label class="checkbox-inline checkbox-in-group" data-ng-repeat="customerType in ReferenceData.CustomerTypes"><input type=checkbox value={{customerType.Key}} data-ng-checked="orderNote.CustomerTypes.indexOf(customerType.Key) > -1" data-ng-click="toggleCustomerTypeSelection(customerType.Key)"> {{customerType.Text}}</label></div></div></fieldset></form></div><div class=modal-footer><button class="btn btn-success" ladda=saveTracker.active() data-ng-click=save()>Save</button> <button class="btn btn-default" data-ng-click=cancel()>Cancel</button></div>'),a.put("app/modules/setting/partials/addEditState.html",'<div class=modal-header><h3 class=modal-title>Add / Edit State / Province</h3></div><div class=modal-body><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.form.submitted}" novalidate unsaved-warning-form><fieldset><div class=form-group><label class="col-md-3 control-label">State / Province Name</label><div class=col-md-9><input name=StateName class=form-control placeholder="State / Province Name" data-ng-model=state.StateName required><div class=error-container ng-show="forms.form.submitted && forms.form.StateName.$invalid"><small class=error ng-show=forms.form.StateName.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.StateName")}}</small> <small class=error ng-show=forms.form.StateName.$error.server>{{serverMessages.GetMessage(\'StateName\')}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label">State / Province Code</label><div class=col-md-9><input name=StateCode class=form-control placeholder="State / Province Code" data-ng-model=state.StateCode maxlength=3 required><div class=error-container ng-show="forms.form.submitted && forms.form.StateCode.$invalid"><small class=error ng-show=forms.form.StateCode.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.StateCode")}}</small> <small class=error ng-show=forms.form.StateCode.$error.server>{{serverMessages.GetMessage(\'StateCode\')}}</small></div></div></div></fieldset></form></div><div class=modal-footer><button class="btn btn-success" ladda=saveTracker.active() data-ng-click=save()>Save</button> <button class="btn btn-default" data-ng-click=cancel()>Cancel</button></div>'),a.put("app/modules/setting/partials/countries.html",'<div class=container-fluid><div class=left-pane-controls><div class="well container-fluid"><div><button class="btn btn-success width-160px" ladda=editTracker.active() data-ng-click=save()>Save</button></div></div></div><div class=right-pane-main><div class=container-fluid><div class=row><div class="container container-left"><div class="well row categories"><spinner-overlay data-loading=refreshTracker.active()><span class=legend>Manage Countries, States / Provinces</span> <a class="btn btn-success btn-xs" title=Add nodrag data-ng-click=addCountry()><i class="glyphicon glyphicon-plus"></i></a> <button data-ng-if=!categoriesExpanded data-ng-click=updateCategoriesCollapsed(true); class="btn btn-primary btn-xs expand-button">Expand All</button> <button data-ng-if=categoriesExpanded data-ng-click=updateCategoriesCollapsed(false); class="btn btn-primary btn-xs expand-button">Collapse All</button><div ui-tree=treeOptions class=ya-treeview><ol ui-tree-nodes data-ng-model=countries data-type=country><li ng-repeat="country in countries" collapsed=true ui-tree-node><div data-ng-if="country.States && country.States.length > 0"><a class="btn btn-link pull-left" nodrag data-ng-click=toggle(this)><i class=glyphicon ng-class="{\'glyphicon-chevron-right\': collapsed, \'glyphicon-chevron-down\': !collapsed}"></i></a></div><div ui-tree-handle><div class="ya-treeview-content clearfix"><div class=line><label><span class=text-break-message>{{country.CountryName}} -&nbsp;</span><strong>{{country.CountryCode}}</strong></label><span data-ng-if="country.IdVisibility==1" class="label label-info font-default category-status">{{getReferenceItem(ReferenceData.AssignedCustomerTypes, country.IdVisibility).Text}}</span> <span data-ng-if="country.IdVisibility==2" class="label label-wholesale font-default category-status">{{getReferenceItem(ReferenceData.AssignedCustomerTypes, country.IdVisibility).Text}}</span> <span data-ng-if="country.IdVisibility==3" class="label label-retail font-default category-status">{{getReferenceItem(ReferenceData.AssignedCustomerTypes, country.IdVisibility).Text}}</span></div><div class=ya-treview-buttons data-nodrag><a class="btn btn-success btn-xs" title=Add nodrag data-ng-click="addState(country.CountryCode, country.Id)"><i class="glyphicon glyphicon-plus"></i></a> <a class="btn btn-info btn-xs" title=Edit nodrag data-ng-click=editCountry(country)><i class="glyphicon glyphicon-edit"></i></a> <a class="btn btn-danger btn-xs" title=Delete nodrag ladda=deleteTracker.active() data-ng-if="!country.States || country.States.length == 0" data-ng-click=deleteCountry(country.Id)><i class="glyphicon glyphicon-remove"></i></a></div></div></div><ol ui-tree-nodes data-ng-model=country.States data-ng-class="{hidden: collapsed}" data-type={{country.CountryCode}}><li ng-repeat="state in country.States" ui-tree-node><div ui-tree-handle><div class="ya-treeview-content clearfix"><div class=line><label><span class=text-break-message>{{state.StateName}} -&nbsp;</span><strong>{{state.StateCode}}</strong></label><span data-ng-if="state.StatusCode == 1" class="label label-warning category-status">Hidden</span></div><div class=ya-treview-buttons data-nodrag><a class="btn btn-info btn-xs" title=Edit nodrag data-ng-click="editState(country.Id, state)"><i class="glyphicon glyphicon-edit"></i></a> <a class="btn btn-danger btn-xs" title=Delete nodrag ladda=deleteTracker.active() data-ng-click="deleteState(country.Id, state.Id)"><i class="glyphicon glyphicon-remove"></i></a></div></div></div></li></ol></li></ol></div></spinner-overlay></div></div></div></div></div></div>'),a.put("app/modules/setting/partials/infoDetailsPopup.html",'<div class=modal-header><h3 class=modal-title>{{Header}}</h3></div><div class=modal-body><p data-ng-repeat="item in Messages">{{item.Message}}</p></div><div class=modal-footer><button data-ng-if=OkButton class="btn btn-success" data-ng-click=ok()>{{OkButton.Label}}</button> <button data-ng-if=CancelButtom class="btn btn-default" data-ng-click=cancel()>{{CancelButtom.Label}}</button></div>'),a.put("app/modules/setting/partials/logDetails.html",'<div class=modal-header><h3 class=modal-title>Log Details</h3></div><div class=modal-body><p class=text-break-message ng-if=displayAsObject><json-formatter open json=item.Message></json-formatter></p><p class=text-break-message ng-if=!displayAsObject>{{::item.Message}}</p></div><div class=modal-footer><button class="btn btn-default" data-ng-click=cancel()>Cancel</button></div>'),a.put("app/modules/setting/partials/logsList.html",'<div class="container-fluid logs-list"><div class=well><span class=legend>Logs</span><div class="row form-group"><div class=col-md-3><select class=form-control data-ng-model=filter.LogLevel ng-options="logLevel.Id as logLevel.Name for logLevel in logLevels"></select></div><div class=col-md-3><p class=input-group><input name=test class=form-control uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.From is-open=fromOpened ng-required="true"> <span class=input-group-btn><button type=button class="btn btn-default" ng-disabled=false ng-click="stopPropagation($event); fromOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p></div><div class=col-md-3><p class=input-group><input name=test class=form-control uib-datepicker-popup={{UIOptions.DatepickerFormat}} ng-model=filter.To is-open=toOpened ng-required="true"> <span class=input-group-btn><button type=button class="btn btn-default" ng-disabled=false ng-click="stopPropagation($event); toOpened =true;"><i class="glyphicon glyphicon-calendar"></i></button></span></p></div></div><div class="row form-group"><div class=col-md-3><select class=form-control data-ng-model=filter.AppName ng-options="name as name for name in appNames"></select></div><div class=col-md-3><input class=form-control placeholder=Message data-ng-model=filter.Message></div><div class=col-md-3><input class=form-control placeholder=Source data-ng-model=filter.Source></div></div><div class="row form-group"><div class=col-md-4><button class="btn btn-info" data-ng-click=filterLogs(); type=button>Filter</button></div></div><hr><spinner-overlay data-loading=refreshTracker.active()><table id=data-grid ng-if=loaded class="table table-striped table-hover"><thead><tr><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Date\')"><span>Date</span> <span data-ng-if="filter.Sorting.Path == \'Date\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'LogLevel\')"><span>Log Level</span> <span data-ng-if="filter.Sorting.Path == \'LogLevel\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Source\')"><span>Source</span> <span data-ng-if="filter.Sorting.Path == \'Source\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'ShortMessage\')"><span>Short Message</span> <span data-ng-if="filter.Sorting.Path == \'ShortMessage\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th>Actions</th></tr></thead><tbody><tr data-ng-repeat="log in logs"><td>{{log.Date | date:"MM/dd/yy"}}<br>{{log.Date | date:"h:mm a"}}</td><td>{{log.LogLevel}}</td><td class=text-break-message>{{log.Source}}</td><td class=text-break-message>{{log.ShortMessage}}</td><td><button title="Show Details" class="btn btn-default btn-success btn-xs" data-ng-click=open(log);><i class="fa fa-search"></i></button></td></tr></tbody></table></spinner-overlay><uib-pagination boundary-links=true total-items=totalItems items-per-page=filter.Paging.PageItemCount data-ng-model=filter.Paging.PageIndex previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; data-ng-change="pageChanged();scrollTo(\'data-grid\');"></uib-pagination></div></div>'),
a.put("app/modules/setting/partials/lookupDetail.html",'<div class=container-fluid><div class=left-pane-controls><div class="well container-fluid"><div data-ng-show="state==1"><button class="btn btn-success width-160px" ladda=refreshTracker.active() data-ng-click=save()>Save</button></div><div class="btn-group margin-top-10px"><button cancel-button-default-state=index.oneCol.manageLookups cancel-button class="btn btn-default width-160px">Cancel</button></div><div class=margin-top-10px><button class="btn btn-primary width-160px" ui-sref=index.oneCol.manageLookups>Manage All</button></div></div></div><div class=right-pane-main><div class=container-fluid><div class=row><div class="container container-left"><div class="well row"><spinner-overlay data-loading=refreshTracker.active()><form class=form-horizontal name=forms.form data-ng-class="{submitted: forms.submitted}" novalidate unsaved-warning-form><fieldset><div class=form-group><label class="col-md-3 control-label">Name</label><div class="col-md-9 form-control-static"><span>{{lookup.Description}}</span></div></div><div class=form-group><label class="col-md-3 control-label">Variants</label><div class=col-md-9><button data-ng-click=addVariant(); class="btn btn-info btn-right">Add New Variant</button></div></div><div ui-sortable=sortableOptions data-ng-model=lookup.LookupVariants><div data-ng-repeat="item in lookup.LookupVariants" class=variant-panel><div class=form-horizontal ng-form=i{{$index}} novalidate unsaved-warning-form><fieldset><div class=form-group><label class="col-md-3 control-label"></label><div class="col-md-9 padding-0px"><div class=col-md-1><div class="sortable-move btn btn-info"><i class="glyphicon glyphicon-sort"></i></div></div><div class=col-md-9><input name=ValueVariant class=form-control placeholder=Name data-ng-model=item.ValueVariant required data-ng-maxlength=100><div class=error-container ng-show="forms.submitted && forms.form.i{{$index}}.ValueVariant.$invalid"><small class=error ng-show=forms.form.i{{$index}}.ValueVariant.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Name")}}</small> <small class=error ng-show=forms.form.i{{$index}}.ValueVariant.$error.exist>{{getValidationMessage("ValidationMessages.Exist","GeneralFieldNames.Name")}}</small> <small class=error ng-show=forms.form.i{{$index}}.ValueVariant.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["GeneralFieldNames.Name", "100"])}}</small></div></div><div class=col-md-2 data-ng-click=$event.stopPropagation()><button class="btn btn-danger" data-ng-click=deleteVariant($index)>Delete</button></div></div></div></fieldset></div></div></div></fieldset></form></spinner-overlay></div></div></div></div></div></div>'),a.put("app/modules/setting/partials/lookupsList.html",'<div class=container-fluid><div class=well><span class=legend>Manage Lookups</span><spinner-overlay data-loading=refreshTracker.active()><table class="table table-striped table-hover"><thead><tr><th>Name</th><th>Actions</th></tr></thead><tbody><tr data-ng-repeat="item in items"><td>{{item.Description}}</td><td><a title=Edit class="btn btn-default btn-success btn-xs" ui-sref=index.oneCol.lookupDetail({id:item.Id})><i class="glyphicon glyphicon-edit"></i></a></td></tr></tbody></table></spinner-overlay></div></div>'),a.put("app/modules/setting/partials/objectHistorySection.html",'<div data-ng-if="historyItemsCount>0" class="well container-fluid object-history"><div class=header><span class=legend>History</span></div><table class="table table-striped order-statuses"><thead><tr><th>Date</th><th>Status</th><th></th></tr></thead><tbody><tr data-ng-repeat="item in historyItems"><td class=date>{{::item.DateCreated | date:"MM/dd/yy"}}<br>{{::item.DateCreated | date:"h:mm a"}}<br>{{::item.EditedBy}}</td><td class=status><span data-ng-if="item.IdObjectStatus == 2" class="label label-info font-default">{{getReferenceItem(ReferenceData.RecordStatuses, item.IdObjectStatus).Text}}</span> <span data-ng-if="item.IdObjectStatus == 1" class="label label-danger font-default">{{getReferenceItem(ReferenceData.RecordStatuses, item.IdObjectStatus).Text}}</span></td><td class=actions><button data-ng-if=!$first title=View class="btn btn-default btn-success btn-xs" data-ng-click=openHistoryReport(item.DataReferenceId);><i class="fa fa-search"></i></button></td></tr></tbody></table></div>'),a.put("app/modules/setting/partials/objectLogReportPopup.html",'<div class="modal-header object-history-report-header"><h3 class=modal-title>Details <button data-ng-if=!options.isDiff class="btn btn-success" data-ng-click="options.isDiff=true;">Show Diff</button> <button data-ng-if=options.isDiff class="btn btn-success" data-ng-click="options.isDiff=false;">Show Data</button></h3><label data-ng-if=options.isDiff class=checkbox-inline><input type=checkbox data-ng-model=options.showUnchanged>Show unchanged values</label></div><div data-ng-if=report class="modal-body object-history-report"><div class="container-fluid wrapper"><div data-ng-show=!options.isDiff class="col-md-6 left-area"><span class=legend>Selected - {{::report.Before.DateCreated | date:"MM/dd/yy"}} {{::report.Before.DateCreated | date:"h:mm a"}}, Agent Id - {{::report.Before.EditedBy}}</span><json-formatter open json=BeforeJsonData></json-formatter></div><div data-ng-show=!options.isDiff class="col-md-6 right-area"><span class=legend>Current in DB - {{::report.Main.DateCreated | date:"MM/dd/yy"}} {{::report.Main.DateCreated | date:"h:mm a"}}, Agent Id - {{::report.Main.EditedBy}}</span><json-formatter open json=MainJsonData></json-formatter></div><div data-ng-show=options.isDiff data-ng-bind-html=visualDiff></div></div></div><div class=modal-footer><button class="btn btn-success" data-ng-click=cancel()>Ok</button></div>'),a.put("app/modules/setting/partials/orderNotesList.html",'<div class=container-fluid><div class=well><span class=legend>Manage Automatic Order Specific Notes</span><div class="row form-group"><div class=col-md-4><input class=form-control data-ng-model=filter.SearchText placeholder="Filter by Label, Order Note"></div></div><div class="row form-group"><div class=col-md-4><button class="btn btn-info" data-ng-click=filterOrderNotes(); type=button>Filter</button></div></div><hr><div class=form-group><button data-ng-click=open(false); ladda=addTracker.active() class="btn btn-primary">Add New Order Note</button></div><spinner-overlay data-loading=refreshTracker.active()><table id=data-grid class="table table-striped table-hover"><thead><tr><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Title\')"><span>Label</span> <span data-ng-if="filter.Sorting.Path == \'Title\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th>Order Note</th><th>Retail</th><th>Wholesale</th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Updated\')"><span>Updated</span> <span data-ng-if="filter.Sorting.Path == \'Updated\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th></th></tr></thead><tbody><tr data-ng-repeat="orderNote in orderNotes"><td>{{orderNote.Title}}</td><td>{{orderNote.Description}}</td><td><input type=checkbox data-ng-checked="orderNote.CustomerTypes.indexOf(1) > -1" disabled></td><td><input type=checkbox data-ng-checked="orderNote.CustomerTypes.indexOf(2) > -1" disabled></td><td>{{orderNote.DateEdited | date:"MM/dd/yy"}}<br>{{orderNote.DateEdited | date:"h:mm a"}}<br>{{orderNote.EditedBy}}</td><td><button title=Edit class="btn btn-default btn-success btn-xs" ladda=editTracker.active() data-ng-click="open(true, orderNote.Id);"><i class="glyphicon glyphicon-edit"></i></button> <button title=Delete class="btn btn-default btn-danger btn-xs" ladda=deleteTracker.active() data-ng-click="delete(orderNote.Title, orderNote.Id);"><i class="glyphicon glyphicon-remove"></i></button></td></tr></tbody></table><uib-pagination boundary-links=true total-items=totalItems items-per-page=filter.Paging.PageItemCount data-ng-model=filter.Paging.PageIndex previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; data-ng-change="pageChanged();scrollTo(\'data-grid\');"></uib-pagination></spinner-overlay></div></div>'),a.put("app/modules/setting/partials/paymentMethodsList.html",'<div class=container-fluid><div class=well><span class=legend>Manage Payment Methods</span><div class=form-group><button data-ng-click=setState(); ladda=refreshTracker.active() class="btn btn-success">Apply Changes</button></div><spinner-overlay data-loading=refreshTracker.active()><table class="table table-striped table-hover"><thead><tr><th>Name</th><th>Retail</th><th>Wholesale</th><th>Updated</th></tr></thead><tbody><tr data-ng-repeat="paymentMethod in paymentMethods"><td>{{paymentMethod.Name}}</td><td><input type=checkbox data-ng-model=paymentMethod.RetailAvailable></td><td><input type=checkbox data-ng-model=paymentMethod.WholesaleAvailable></td><td>{{paymentMethod.DateEdited | date:"MM/dd/yy"}}<br>{{paymentMethod.DateEdited | date:"h:mm a"}}<br>{{paymentMethod.EditedBy}}</td></tr></tbody></table></spinner-overlay></div></div>'),a.put("app/modules/setting/partials/profileScopeListItem.html",'<div><a class="btn btn-link pull-left" data-ng-click=toggle(item)><i class=glyphicon ng-class="{\'glyphicon-chevron-right\': item.ShowInner, \'glyphicon-chevron-down\': !item.ShowInner}"></i></a></div><div class=angular-ui-tree-handle><div class="ya-treeview-content clearfix" data-ng-click=toggle(item)><div class=line><label>{{::item.ShortData}} <span style=font-weight:bolder><span data-ng-if="::item.TimeElapsed > 500" style="color: orangered">{{::item.TimeElapsed}}</span><span data-ng-if="::item.TimeElapsed <= 500">{{::item.TimeElapsed}}</span> ms</span></label></div></div></div><div data-ng-if=item.ShowInner><div style="font-weight: bolder; border: 1px solid gainsboro; padding: 5px">{{::item.Data}}</div><div style="font-weight: lighter;color: grey"><div ng-repeat="additional in ::item.AdditionalData">{{::additional}}</div></div></div><ol data-ng-if=item.ShowInner class=angular-ui-tree-nodes><li class=angular-ui-tree-node data-ng-repeat="item in ::item.SubScopes track by item.Id" data-ng-include="\'app/modules/setting/partials/profileScopeListItem.html\'"></li></ol>'),a.put("app/modules/setting/partials/profileScopesList.html",'<div class="container-fluid profile-scopes"><div class="well categories"><span class=legend>Profile Scopes</span><spinner-overlay data-loading=refreshTracker.active()><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.form.submitted}" novalidate><fieldset><div class="row form-group"><div class=col-md-2><input name=SearchText class=form-control placeholder="Request Path" data-ng-model=filter.SearchText autocomplete=off data-ng-required=true></div><div class=col-md-2><button class="btn btn-info" data-ng-click=pageChanged(); type=button>Locate Requests</button></div></div><hr></fieldset></form><table id=data-grid class="table table-striped table-hover order-statuses"><thead><tr><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Start\')"><span>Start Time</span> <span data-ng-if="filter.Sorting.Path == \'Start\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'TimeElapsed\')"><span>Time Elapsed (ms)</span> <span data-ng-if="filter.Sorting.Path == \'TimeElapsed\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'ShortData\')"><span>Request Details</span> <span data-ng-if="filter.Sorting.Path == \'ShortData\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th></tr></thead><tbody><tr data-ng-repeat="item in options.Items track by item.Id"><td><span>{{::item.Start | date:"hh:mm:ss.sss"}}<br>{{::item.Start | date:"MM/dd/yy"}}</span></td><td><span style="font-weight: bolder"><span data-ng-if="::item.TimeElapsed > 500" style="color: orangered">{{::item.TimeElapsed}}</span><span data-ng-if="::item.TimeElapsed <= 500">{{::item.TimeElapsed}}</span></span></td><td style="width: 85%"><div style="font-weight: bolder">{{::item.Data}}</div><div class=ya-treeview><ol class=angular-ui-tree-nodes><li class=angular-ui-tree-node data-ng-include="\'app/modules/setting/partials/profileScopeListItem.html\'" data-ng-repeat="item in ::item.SubScopes track by item.Id"></li></ol></div></td></tr></tbody></table></spinner-overlay><uib-pagination boundary-links=true total-items=totalItems items-per-page=filter.Paging.PageItemCount data-ng-model=filter.Paging.PageIndex previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; data-ng-change="pageChanged();scrollTo(\'data-grid\');"></uib-pagination></div></div>'),a.put("app/modules/setting/partials/settingsDetail.html",'<div class=container-fluid><div class=left-pane-controls><div class="well container-fluid"><div><button class="btn btn-success width-160px" ladda=editTracker.active() data-ng-click=save() unsaved-warning-clear>Save</button></div></div></div><div class=right-pane-main><div class=container-fluid><div class=row><div class="container container-left"><div class="well row"><spinner-overlay data-loading=refreshTracker.active()><form class=form-horizontal name=forms.form data-ng-submit=save() data-ng-class="{submitted: forms.form.submitted}" novalidate unsaved-warning-form><fieldset><span class=legend>Minimum Cart Perishable Value</span><div class=form-group><label for=name class="col-md-4 control-label">Minimum Perishable</label><div class=col-md-8><input name=GlobalPerishableThreshold class=form-control placeholder="Minimum Perishable" data-ng-model=settings.GlobalPerishableThreshold money max=100000 min=0.00 required><div class=error-container ng-show="forms.form.submitted && forms.form.GlobalPerishableThreshold.$invalid"><small class=error ng-show=forms.form.GlobalPerishableThreshold.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","Minimum Perishable")}}</small> <small class=error ng-show=forms.form.GlobalPerishableThreshold.$error.max>{{getValidationMessage("ValidationMessages.FieldMax","Minimum Perishable",1000)}}</small> <small class=error ng-show=forms.form.GlobalPerishableThreshold.$error.min>{{getValidationMessage("{0} must be over $0.00","Minimum Perishable")}}</small> <small class=error ng-show=forms.form.GlobalPerishableThreshold.$error.server>{{serverMessages.GetMessage(\'GlobalPerishableThreshold\')}}</small></div></div></div><span class=legend>Credit Card Authorizations</span><div class=form-group><label for=CreditCardAuthorizations class="col-md-4 control-label">Credit card authorizations on</label><div class=col-md-8><div class=checkbox><label><input type=checkbox name=CreditCardAuthorizations data-ng-model="settings.CreditCardAuthorizations"></label></div></div></div></fieldset></form></spinner-overlay></div></div></div></div></div></div>'),a.put("app/modules/users/partials/addEditUser.html",'<div class=modal-header><h3 class=modal-title>User Details</h3></div><div class=modal-body><spinner-overlay data-loading=refreshTracker.active()><form class=form-horizontal name=forms.userForm data-ng-submit=save() data-ng-class="{submitted: forms.userForm.submitted}" novalidate><fieldset><div class=form-group><label class="col-md-3 control-label">Agent ID</label><div class=col-md-9><input name=agentId class=form-control placeholder="Agent ID" data-ng-model=user.AgentId required data-ng-maxlength=10><div class=error-container ng-show="forms.userForm.submitted && forms.userForm.agentId.$invalid"><small class=error ng-show=forms.userForm.agentId.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.AgentId")}}</small> <small class=error ng-show=forms.userForm.agentId.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["GeneralFieldNames.AgentId", "10"])}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label">First Name</label><div class=col-md-9><input name=firstName class=form-control placeholder="First Name" data-ng-model=user.FirstName required data-ng-maxlength=100><div class=error-container ng-show="forms.userForm.submitted && forms.userForm.firstName.$invalid"><small class=error ng-show=forms.userForm.firstName.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.FirstName")}}</small> <small class=error ng-show=forms.userForm.firstName.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["GeneralFieldNames.FirstName", "100"])}}</small> <small class=error ng-show=forms.userForm.firstName.$error.server>{{serverMessages.GetMessage(\'FirstName\')}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label">Last Name</label><div class=col-md-9><input name=lastName class=form-control placeholder="Last Name" data-ng-model=user.LastName required data-ng-maxlength=100><div class=error-container ng-show="forms.userForm.submitted && forms.userForm.lastName.$invalid"><small class=error ng-show=forms.userForm.lastName.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.LastName")}}</small> <small class=error ng-show=forms.userForm.lastName.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["GeneralFieldNames.LastName", "100"])}}</small> <small class=error ng-show=forms.userForm.lastName.$error.server>{{serverMessages.GetMessage(\'LastName\')}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label">Email</label><div class=col-md-9><input type=email name=email class=form-control placeholder=Email data-ng-model=user.Email required data-ng-maxlength=100><div class=error-container ng-show="forms.userForm.submitted && forms.userForm.email.$invalid"><small class=error ng-show=forms.userForm.email.$error.required>{{getValidationMessage("ValidationMessages.FieldRequired","GeneralFieldNames.Email")}}</small> <small class=error ng-show=forms.userForm.email.$error.email>{{getValidationMessage("ValidationMessages.EmailFormat","GeneralFieldNames.Email")}}</small> <small class=error ng-show=forms.userForm.email.$error.maxlength>{{getValidationMessage("ValidationMessages.FieldLength", ["GeneralFieldNames.Email", "100"])}}</small> <small class=error ng-show=forms.userForm.email.$error.server>{{serverMessages.GetMessage(\'Email\')}}</small></div></div></div><div class=form-group><label class="col-md-3 control-label">Team</label><div class=col-md-9><select class=form-control data-ng-model=user.IdAdminTeam data-ng-options="item.Id as item.Name for item in adminTeams"></select></div></div><div class=form-group><label class="col-md-3 control-label">Roles</label><div class=col-md-9><label class="checkbox-inline checkbox-in-group" data-ng-repeat="role in ReferenceData.AdminRoles"><input type=checkbox value={{role.Key}} data-ng-checked="user.RoleIds.indexOf(role.Key) > -1" data-ng-click="toggleRoleSelection(role.Key)"> {{role.Text}}</label></div></div><div class=form-group data-ng-if="editMode && user.Status != 0 && !signedInUser"><label class="col-md-3 control-label">Status</label><div class=col-md-9><select class=form-control data-ng-model=user.Status data-ng-options="status.Key as status.Text for status in userStatuses" required></select></div></div></fieldset></form></spinner-overlay></div><div class=modal-footer><button class="btn btn-info" data-ng-if="editMode && user.Status != 0 && !signedInUser" ladda=resetTracker.active() data-ng-click=resetPassword()>Reset Password</button> <button class="btn btn-info" data-ng-if="editMode && user.Status == 0" ladda=resendTracker.active() data-ng-click=resend()>Resend Activation Email</button> <button class="btn btn-success" ladda=saveTracker.active() data-ng-click=save()>Save</button> <button class="btn btn-default" data-ng-click=cancel()>Cancel</button></div>'),a.put("app/modules/users/partials/usersList.html",'<div class=container-fluid><div class=well><span class=legend>Manage Users</span><div class="row form-group"><div class=col-md-4><input class=form-control data-ng-model=filter.SearchText placeholder="Filter by Name, Email"></div></div><div class="row form-group"><div class=col-md-4><button class="btn btn-info" data-ng-click=filterUsers(); type=button>Filter</button></div></div><hr><div class=form-group><button data-ng-click=open(false); ladda=addTracker.active() class="btn btn-primary">Add New User</button></div><spinner-overlay data-loading=refreshTracker.active()><table class="table table-striped table-hover"><thead><tr><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'AgentId\')"><span>Agent ID</span> <span data-ng-if="filter.Sorting.Path == \'AgentId\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'FullName\')"><span>Full Name</span> <span data-ng-if="filter.Sorting.Path == \'FullName\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Email\')"><span>Email</span> <span data-ng-if="filter.Sorting.Path == \'Email\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th>Team</th><th>Roles</th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'Status\')"><span>Status</span> <span data-ng-if="filter.Sorting.Path == \'Status\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th><th class=sortable-column data-ng-click="filter.Sorting.applySort(\'LastLoginDate\')"><span>Last Login</span> <span data-ng-if="filter.Sorting.Path == \'LastLoginDate\'"><i class="glyphicon glyphicon-chevron-up" data-ng-if="filter.Sorting.SortOrder == \'Asc\'"></i> <i class="glyphicon glyphicon-chevron-down" data-ng-if="filter.Sorting.SortOrder == \'Desc\'"></i></span></th></tr></thead><tbody><tr data-ng-repeat="user in users"><td>{{user.AgentId}}</td><td><a data-ng-click="open(true, user.PublicId);">{{::user.FullName}}</a></td><td>{{user.Email}}</td><td>{{user.AdminTeam}}</td><td><span data-ng-repeat="role in user.RoleIds" data-ng-bind="$index < user.RoleIds.length - 1 ? getReferenceItem(ReferenceData.AdminRoles, role).Text + \', \' : getReferenceItem(ReferenceData.AdminRoles, role).Text"></span></td><td><span data-ng-if="user.Status == 2" class="label label-danger font-default">{{getReferenceItem(ReferenceData.UserStatuses, user.Status).Text}}</span> <span data-ng-if="user.Status == 0" class="label label-warning font-default">{{getReferenceItem(ReferenceData.UserStatuses, user.Status).Text}}</span> <span data-ng-if="user.Status == 1" class="label label-info font-default">{{getReferenceItem(ReferenceData.UserStatuses, user.Status).Text}}</span></td><td>{{user.LastLoginDate | date:"MM/dd/yy"}}<br>{{user.LastLoginDate | date:"h:mm a"}}</td><td><button title=Edit class="btn btn-default btn-success btn-xs" ladda=editTracker.active() data-ng-click="open(true, user.PublicId);"><i class="glyphicon glyphicon-edit"></i></button> <button title=Delete data-ng-if="currentUser && currentUser.Email != user.Email" class="btn btn-default btn-danger btn-xs" ladda=deleteTracker.active() data-ng-click="delete(user.FullName, user.PublicId);"><i class="glyphicon glyphicon-remove"></i></button></td></tr></tbody></table><uib-pagination boundary-links=true total-items=totalItems items-per-page=filter.Paging.PageItemCount data-ng-model=filter.Paging.PageIndex previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; data-ng-change=pageChanged();></uib-pagination></spinner-overlay></div></div>'),a.put("app/shared/area/partials/404.html","<div class=container-fluid><span class=legend>Page Not Found</span></div>"),a.put("app/shared/area/partials/oneColumn.html",'<div data-ui-view=""></div>'),a.put("app/shared/area/partials/twoColumn.html",'<div data-ui-view=left class="left-pane container-fluid"></div><div data-ui-view="" class=right-pane></div>'),a.put("app/shared/area/partials/workingPanel.html",'<div data-ui-view="" data-ng-if=appStarted></div>'),a.put("app/shared/layout/partials/index.html","<div class=container-fluid><div data-ng-class=\"{'ball-loader': !appStarted }\" data-ng-hide=appStarted></div><div class=\"row fade\" data-ng-show=appStarted><div data-ui-view=topMenu></div><div data-ui-view=workingPanel></div></div></div><toaster-container toaster-options=\"{'position-class': 'toast-bottom-right'}\"></toaster-container>"),a.put("app/shared/menu/partials/mainMenu.html",'<nav class="navbar margin-zero custom-navbar-top"><div class=container-fluid><div class=navbar-header><a ui-sref=index.oneCol.dashboard><img src=/assets/images/logo.png class=logo></a></div><div class="collapse navbar-collapse"><div class="nav navbar-nav navbar-cache" data-ng-if=authenticated><div class=.nav-small-font>Cache latency:</div><div ng-repeat="(appName, latency) in cacheState">{{appName}}: <span ng-if="latency > 500" style="background-color: red; color: white">{{latency}}</span><span ng-if="latency <= 500" style=color:forestgreen>{{latency}}</span> ms</div></div><ul class="nav navbar-nav navbar-right navbar-custom-header" data-ng-if=authenticated><li class=dropdown><a class=dropdown-toggle data-toggle=dropdown role=button aria-expanded=false>{{currentUser.FirstName}}&nbsp;{{currentUser.LastName}} <span class=caret></span></a><ul class=dropdown-menu role=menu><li><a data-ng-click=logout()>Log Out</a></li><li ui-sref-active=active><a ui-sref=index.oneCol.profile>Edit Profile</a></li></ul></li></ul></div></div></nav><nav class="navbar navbar-inverse custom-navbar-bottom margin-zero"><div class=container-fluid><div class=navbar-header></div><div class="collapse navbar-collapse"><ul class="nav navbar-nav" data-ng-if=authenticated><li data-ng-repeat="module in navigation.menu" data-ng-class="{dropdown: module.subMenu != null}" data-ng-if=validatePermissionMenuItem(module) ui-sref-active=active><a data-ng-if=!module.subMenu ui-sref={{module.stateName}}({name:module.name})>{{module.stateLabel}}</a> <a data-ng-if="module.subMenu != null" class=dropdown-toggle data-toggle=dropdown role=button aria-expanded=false>{{module.stateLabel}} <span class=caret></span></a><ul data-ng-if="module.subMenu != null" class=dropdown-menu role=menu><li data-ng-class="{\'sub-dropdown\': subModule.subMenu != null}" data-ng-repeat="subModule in module.subMenu" ui-sref-active=active data-ng-if="subModule.access==null || validatePermission(subModule.access)"><a ng-if=subModule.stateName ui-sref={{subModule.stateName}}({name:subModule.name})>{{subModule.stateLabel}}</a> <a ng-if=subModule.href target=_blank data-ng-href={{subModule.href}}>{{subModule.stateLabel}}</a> <a ng-if=subModule.handler ng-click=subModule.handler();>{{subModule.stateLabel}}</a> <a data-ng-if="subModule.subMenu != null" data-ng-click=$event.stopPropagation();$event.preventDefault();>{{subModule.stateLabel}} <span class=caret></span></a><ul data-ng-if="subModule.subMenu != null" class=dropdown-menu role=menu><li data-ng-repeat="subModule2 in subModule.subMenu" ui-sref-active=active data-ng-if="subModule2.access==null || validatePermission(subModule2.access)"><a ng-if=subModule2.stateName ui-sref={{subModule2.stateName}}({name:subModule2.name})>{{subModule2.stateLabel}}</a> <a ng-if=subModule2.handler ng-click=subModule2.handler();>{{subModule2.stateLabel}}</a> <a ng-if=subModule2.href target=_blank data-ng-href={{subModule2.href}}>{{subModule2.stateLabel}}</a></li></ul></li></ul></li></ul></div></div></nav><div data-ng-show=authenticated data-area-name="Admin Below Nav Critical Alert Message" class="area warning-wrapper margin-bottom-15px centered-text"></div>'),a.put("app/shared/menu/partials/sidebar.html",'<nav class="navbar navbar-default sidebar" role=navigation><div class="collapse navbar-collapse"><ul class="nav navbar-nav"><li data-ng-repeat="module in sidebar.menu" data-ng-class="{dropdown: module.subMenu != null}" ui-sref-active=active><a data-ng-if=!module.subMenu ui-sref={{module.stateName}}>{{module.stateLabel}} <span data-ng-if="currentModule == module.name" class=sr-only>(current)</span></a> <a data-ng-if="module.subMenu != null" class=dropdown-toggle data-toggle=dropdown role=button aria-expanded=false>{{module.stateLabel}} <span class=caret></span></a><ul data-ng-if="module.subMenu != null" class=dropdown-menu role=menu><li data-ng-repeat="subModule in module.subMenu" ui-sref-active=active><a ui-sref={{subModule.stateName}}>{{subModule.stateLabel}}</a></li></ul></li><li class=divider></li></ul></div></nav>')}]),Object.clone=function(a){if(null==a||"object"!=typeof a)return a;if(a instanceof Date){var b=new Date;return b.setTime(a.getTime()),b}if(a instanceof Array){for(var b=[],c=0;c<a.length;c++)b[c]=Object.clone(a[c]);return b}if(a instanceof Object){var b={};for(var d in a)a.hasOwnProperty(d)&&(b[d]=Object.clone(a[d]));return b}throw new Error("Unable to copy object! Its type isn't supported.")},Boolean.parse=function(a){if(a)switch(a.toLowerCase()){case"true":return!0;case"false":return!1;case"1":return!0;case"0":return!1}return!1},String.prototype.format=function(){return String.format(this,1==arguments.length?arguments[0]:arguments)},String.format=function(a,b){var c=function(a,b){var c=function(a){return"number"==typeof a?Number:"boolean"==typeof a?Boolean:"string"==typeof a?String:a.constructor}(a),d=c.prototype,e="string"!=typeof a?d?d.format||d.toString:a.format||a.toString:a.toString;return e?"undefined"==typeof b||""==b?e.call(a):e.call(a,b):""};return 1==arguments.length?function(){return String.format.apply(null,[a].concat(Array.prototype.slice.call(arguments,0)))}:(2==arguments.length&&"object"!=typeof b&&"array"!=typeof b&&(b=[b]),arguments.length>2&&(b=Array.prototype.slice.call(arguments,1)),a=a.replace(/\{\{|\}\}|\{([^}: ]+?)(?::([^}]*?))?\}/g,function(a,d,e){return"{{"==a?"{":"}}"==a?"}":"undefined"!=typeof b[d]&&null!==b[d]?c(b[d],e):""}))},String.isString=function(a){return"string"==typeof a||a instanceof String},String.prototype.formatPhone=function(){return String.formatPhone(this)},String.formatPhone=function(a){return a.replace(/(\d\d\d)(\d\d\d)(\d\d\d\d)/,"($1) $2-$3 x")},"startsWith"in String.prototype||(String.prototype.startsWith=function(a){return this.length>a.length&&0==this.indexOf(a)}),"endsWith"in String.prototype||(String.prototype.endsWith=function(a){return this.length>a.length&&this.lastIndexOf(a)==this.length-a.length}),Date.doPlaceDate=function(a,b){var c=a,d=b||new Date;return c=c.replace("{dd}",d.getDate()),c=c.replace("{DD}",d.getDate()<10?"0"+d.getDate():d.getDate()),c=c.replace("{mm}",d.getMonth()+1),c=c.replace("{MM}",d.getMonth()<9?"0"+(d.getMonth()+1):d.getMonth()+1),
c=c.replace("{yy}",d.getYear()>100?d.getYear()-100:d.getYear()),c=c.replace("{yyyy}",d.getFullYear()),c=c.replace("{hh}",d.getHours()),c=c.replace("{HH}",d.getHours()<10?"0"+d.getHours():d.getHours()),c=c.replace("{MN}",d.getMinutes()<10?"0"+d.getMinutes():d.getMinutes()),c=c.replace("{SS}",d.getSeconds()<10?"0"+d.getSeconds():d.getSeconds()),c=c.replace("{AP}",d.getHours()>=12?"AM":"PM")},String.prototype.doPlaceDate=function(a){return Date.doPlaceDate(this,a)},String.prototype.replaceAll=function(a,b){var c=this;return c.replace(new RegExp(a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),b)},"format"in Date.prototype||(Date.prototype.format=function(a){return Date.doPlaceDate(a,this)}),Date.prototype.toServerDateTime=function(){return Date.doPlaceDate("{yyyy}-{MM}-{DD}T{HH}:{MN}:{SS}.000Z",this)},Date.prototype.toQueryParamDateTime=function(){return Date.doPlaceDate("{yyyy}-{MM}-{DD}T{HH}:{MN}:{SS}",this)},Date.parseDateTime=function(a,b){if(!String.isString(a))return a;var c=(a||"").split("T");if(2!=c.length)return null;var d=c[1].lastIndexOf("+");d>0&&(c[1]=c[1].substr(0,d));var e=c[0].split("-"),f=c[1].split(":");return 3!=e.length||3!=f.length?null:b?new Date(Date.UTC(e[0],parseInt(e[1],10)-1,e[2],f[0],f[1],f[2])):new Date(e[0],parseInt(e[1],10)-1,e[2],f[0],f[1],f[2])},!("shiftDate"in Date.prototype)){var pModifiers={y:function(a,b,c){var d=c;switch(b){case"!":break;case"+":d=a.getFullYear()+c;break;case"-":d=a.getFullYear()-c;break;default:throw"UNKNOWN DATE SIGN FOR MODIFIER `Y`"}a.setFullYear(d)},m:function(a,b,c){var d=c;switch(b){case"!":break;case"+":d=a.getMonth()+c;break;case"-":d=a.getMonth()-c;break;default:throw"UNKNOWN DATE SIGN FOR MODIFIER `M`"}a.setMonth(d)},d:function(a,b,c){var d=c;switch(b){case"!":break;case"+":d=a.getDate()+c;break;case"-":d=a.getDate()-c;break;default:throw"UNKNOWN DATE SIGN FOR MODIFIER `D`"}a.setDate(d)},h:function(a,b,c){var d=c;switch(b){case"!":break;case"+":d=a.getHours()+c;break;case"-":d=a.getHours()-c;break;default:throw"UNKNOWN DATE SIGN FOR MODIFIER `H`"}a.setHours(d)}};Date.prototype.shiftDate=function(a){if(!jQuery.isFunction(a.split))throw"WRONG DATE DATE SHIFT RULE!";var b=a.split(/\s/);if(!b||b.length<1)throw"WRONG DATE DATE SHIFT RULE!";for(var c=new Date(this.getFullYear(),this.getMonth(),this.getDate(),this.getHours(),this.getMinutes(),this.getSeconds()),d=0;d<b.length;d++){var e=b[d];if(e.length<3)throw"WRONG DATE DATE SHIFT RULE!";var f=e.charAt(0),g=e.charAt(e.length-1),h=e.substring(1,e.length-1);if(!(g in pModifiers))throw"WRONG MODIFIER IN DATE SHIFT RULE!";pModifiers[g](c,f,parseInt(h))}return c}}Date.parseDate=function(a){if(!String.isString(a))return a;var b=a.split("-");return 3!=b.length?null:new Date(b[0],parseInt(b[1],10)-1,b[2],0,0,0)},Date.parseDateTime=function(a,b){if(!String.isString(a))return a;var c=(a||"").split("T");if(2!=c.length)return null;var d=c[1].lastIndexOf("+");d>0&&(c[1]=c[1].substr(0,d));var e=c[0].split("-"),f=c[1].split(":");return 3!=e.length||3!=f.length?null:b?new Date(Date.UTC(e[0],parseInt(e[1],10)-1,e[2],f[0],f[1],f[2])):new Date(e[0],parseInt(e[1],10)-1,e[2],f[0],f[1],f[2])},ServerMessages.prototype.GetMessage=function(a,b,c,d){var e="",f=a;return void 0!=b&&void 0!=c&&(f="{0}.i{1}.{2}".format(b,c,a)),void 0!=d&&(f=d+"::"+f),$.each(this.Messages,function(a,b){return b.Field==f?(e=b.Message,!1):void 0}),e};var app=angular.module("mainApp",["templates","ui.router","ui.bootstrap","app.core","app.modules","app.shared"]).config(["$stateProvider","$urlRouterProvider","$httpProvider","$locationProvider","$compileProvider",function(a,b,c,d,e){b.when("/",["$state",function(a){a.go("index.oneCol.dashboard")}]),b.otherwise("/404"),c.interceptors.push("httpInterceptor"),d.html5Mode(!0),e.debugInfoEnabled(!1)}]).run(["$rootScope","$state","$stateParams","appBootstrap",function(a,b,c,d){function e(){a.$state=b,a.$stateParams=c,d.initialize(),a.$on("$locationChangeStart",function(a){window.onresize=null}),nv.dev=!1}e()}]);angular.module("app.core",["app.utils","app.dataAccess"]),angular.module("app.core.dataAccess.services.infrastructureService",[]).service("infrastructureService",["$http",function(a){var b="/Api/Infrastructure/",c={};return{getReferenceData:function(){return a.get(b+"GetReferenceData",c)}}}]),angular.module("app.core.dataAccess.services.userService",[]).service("userService",["$http",function(a){function b(a){var b={};return a&&(b.tracker=a),b}var c="/Api/UserManagement/";return{getAdminTeams:function(d){return a.get(c+"GetAdminTeams",b(d))},getUsers:function(d,e){return a.post(c+"GetUsers",d,b(e))},createUserPrototype:function(d){return a.post(c+"CreateUserPrototype",null,b(d))},createUser:function(d,e){return a.post(c+"CreateUser",d,b(e))},updateUser:function(d,e){return a.post(c+"UpdateUser",d,b(e))},getUser:function(d,e){return a.get(c+"GetUser/"+d,b(e))},deleteUser:function(d,e){return a.post(c+"DeleteUser",{PublicId:d},b(e))},resendActivation:function(d,e){return a.post(c+"ResendActivation/"+d,null,b(e))},resetPassword:function(d,e){return a.post(c+"ResetPassword/"+d,null,b(e))}}}]),angular.module("app.core.dataAccess.services.contentService",[]).service("contentService",["$http",function(a){function b(a){var b={};return a&&(b.tracker=a),b}var c="/Api/Content/";return{getCategoriesTree:function(d,e){return a.post(c+"GetCategoriesTree",d,b(e))},updateCategoriesTree:function(d,e){return a.post(c+"UpdateCategoriesTree",d,b(e))},getCategory:function(d,e){return a.get(c+"GetCategory/"+d,b(e))},updateCategory:function(d,e){return a.post(c+"UpdateCategory",d,b(e))},deleteCategory:function(d,e){return a.post(c+"DeleteCategory/"+d,null,b(e))},getMasterContentItems:function(d,e){return a.post(c+"GetMasterContentItems",d,b(e))},getMasterContentItem:function(d,e){return a.get(c+"GetMasterContentItem/"+d,b(e))},updateMasterContentItem:function(d,e){return a.post(c+"UpdateMasterContentItem",d,b(e))},deleteMasterContentItem:function(d,e){return a.post(c+"DeleteMasterContentItem/"+d,null,b(e))},getEmailTemplates:function(d,e){return a.post(c+"GetEmailTemplates",d,b(e))},getEmailTemplate:function(d,e){return a.get(c+"GetEmailTemplate/"+d,b(e))},updateEmailTemplate:function(d,e){return a.post(c+"UpdateEmailTemplate",d,b(e))},deleteEmailTemplate:function(d,e){return a.post(c+"DeleteEmailTemplate/"+d,b(e))},getRecipes:function(d,e){return a.post(c+"GetRecipes",d,b(e))},getRecipe:function(d,e){return a.get(c+"GetRecipe/"+d,b(e))},updateRecipe:function(d,e){return a.post(c+"UpdateRecipe",d,b(e))},deleteRecipe:function(d,e){return a.post(c+"DeleteRecipe/"+d,b(e))},getRecipeSettings:function(d){return a.get(c+"GetRecipeSettings",null,b(d))},getFAQs:function(d,e){return a.post(c+"GetFAQs",d,b(e))},getFAQ:function(d,e){return a.get(c+"GetFAQ/"+d,b(e))},updateFAQ:function(d,e){return a.post(c+"UpdateFAQ",d,b(e))},deleteFAQ:function(d,e){return a.post(c+"DeleteFAQ/"+d,null,b(e))},getArticles:function(d,e){return a.post(c+"GetArticles",d,b(e))},getArticle:function(d,e){return a.get(c+"GetArticle/"+d,b(e))},updateArticle:function(d,e){return a.post(c+"UpdateArticle",d,b(e))},deleteArticle:function(d,e){return a.post(c+"DeleteArticle/"+d,null,b(e))},getArticleBonusLinks:function(d){return a.get(c+"GetArticleBonusLinks",b(d))},updateArticleBonusLinks:function(d,e){return a.post(c+"UpdateArticleBonusLinks",d,b(e))},getContentPages:function(d,e){return a.post(c+"GetContentPages",d,b(e))},getContentPage:function(d,e){return a.get(c+"GetContentPage/"+d,b(e))},updateContentPage:function(d,e){return a.post(c+"UpdateContentPage",d,b(e))},deleteContentPage:function(d,e){return a.post(c+"DeleteContentPage/"+d,null,b(e))},getContentCrossSells:function(d,e){return a.get(c+"GetContentCrossSells/"+d,b(e))},updateContentCrossSells:function(d,e){return a.post(c+"UpdateContentCrossSells",d,b(e))}}}]),angular.module("app.core.dataAccess.services.contentAreaService",[]).service("contentAreaService",["$http",function(a){function b(a){var b={};return a&&(b.tracker=a),b}var c="/Api/ContentArea/";return{getContentAreas:function(d){return a.get(c+"GetContentAreas",b(d))},saveContentArea:function(d,e){return a.post(c+"UpdateContentArea",d,b(e))},getContentArea:function(d,e){return a.get(c+"GetContentArea/"+d,b(e))}}}]),angular.module("app.core.dataAccess.services.manageStylesService",[]).service("manageStylesService",["$http",function(a){function b(a){var b={};return a&&(b.tracker=a),b}var c="/Api/Styles/";return{saveStyles:function(d,e){return a.post(c+"UpdateStyles",d,b(e))},getStyles:function(d){return a.get(c+"GetStyles",b(d))}}}]),angular.module("app.core.dataAccess.services.settingService",[]).service("settingService",["$http",function(a){function b(a){var b={};return a&&(b.tracker=a),b}var c="/Api/Setting/";return{getLogItems:function(d,e){return a.post(c+"GetLogItems",d,b(e))},getProfileScopeItems:function(d,e){return a.post(c+"GetProfileScopeItems",d,b(e))},getObjectHistoryLogItems:function(d,e){return a.post(c+"GetObjectHistoryLogItems",d,b(e))},getOrderObjectHistoryLogItems:function(d,e){return a.post(c+"GetOrderObjectHistoryLogItems",d,b(e))},getHistoryReport:function(d,e){return a.post(c+"GetHistoryReport",d,b(e))},getLookups:function(d){return a.get(c+"GetLookups",b(d))},getLookup:function(d,e){return a.get(c+"GetLookup/{0}".format(d),b(e))},updateLookupVariants:function(d,e,f){return a.post(c+"UpdateLookupVariants/{0}".format(d),e,b(f))},getCountries:function(d,e){return a.post(c+"GetCountries",d,b(e))},updateCountriesOrder:function(d,e){return a.post(c+"UpdateCountriesOrder",d,b(e))},updateCountry:function(d,e){return a.post(c+"UpdateCountry",d,b(e))},deleteCountry:function(d,e){return a.post(c+"DeleteCountry/"+d,null,b(e))},updateState:function(d,e){return a.post(c+"UpdateState",d,b(e))},deleteState:function(d,e){return a.post(c+"DeleteState/"+d,null,b(e))},getGlobalSettings:function(d){return a.get(c+"GetGlobalSettings",b(d))},updateGlobalSettings:function(d,e){return a.post(c+"UpdateGlobalSettings",d,b(e))},getContentAreas:function(d){return a.get(c+"GetContentAreas",b(d))},getCatalogRequests:function(d){return a.get(c+"GetCatalogRequests",b(d))},getCatalogRequestsReportFileUrl:function(a){return c+"GetCatalogRequestsReportFile?buildNumber={0}".format(a)},deleteCatalogRequests:function(d,e){return a.post(c+"DeleteCatalogRequests",null,b(e))}}}]),angular.module("app.core.dataAccess.services.authenticationService",[]).service("authenticationService",["$http",function(a){function b(a){var b={};return a&&(b.tracker=a),b}var c="/Api/Account/";return{activate:function(d,e){return a.post(c+"Activate",d,b(e))},getUser:function(d,e){return a.get(c+"GetUser/"+d,b(e))},login:function(d,e){return a.post(c+"Login",d,b(e))},getCurrenUser:function(){return a.get(c+"GetCurrentUser")},logout:function(){return a.post(c+"Logout")},resetPassword:function(d,e){return a.post(c+"ResetPassword",d,b(e))}}}]),angular.module("app.core.dataAccess.services.productService",[]).service("productService",["$http",function(a){function b(a){var b={};return a&&(b.tracker=a),b}var c="/Api/Product/";return{getCategoriesTree:function(d,e){return a.post(c+"GetCategoriesTree",d,b(e))},updateCategoriesTree:function(d,e){return a.post(c+"UpdateCategoriesTree",d,b(e))},getCategory:function(d,e){return a.get(c+"GetCategory/"+d,b(e))},updateCategory:function(d,e){return a.post(c+"UpdateCategory",d,b(e))},deleteCategory:function(d,e){return a.post(c+"DeleteCategory/"+d,null,b(e))},getProductCategoriesStatistic:function(d,e){return a.post(c+"GetProductCategoriesStatistic",d,b(e))},getProductCategoriesStatisticReportFile:function(a,b){return c+"GetProductCategoriesStatisticReportFile?from={0}&to={1}&buildNumber={2}".format(a.From,a.To,b)},getSkusInProductCategoryStatistic:function(d,e){return a.post(c+"GetSkusInProductCategoryStatistic",d,b(e))},getProductsOnCategoryOrder:function(d,e){return a.get(c+"GetProductsOnCategoryOrder/"+d,b(e))},updateProductsOnCategoryOrder:function(d,e,f){return a.post(c+"UpdateProductsOnCategoryOrder/"+d,e,b(f))},getInventoryCategoriesTree:function(d,e){return a.post(c+"GetInventoryCategoriesTree",d,b(e))},updateInventoryCategoriesTree:function(d,e){return a.post(c+"UpdateInventoryCategoriesTree",d,b(e))},getInventoryCategory:function(d,e){return a.get(c+"GetInventoryCategory/"+d,b(e))},updateInventoryCategory:function(d,e){return a.post(c+"UpdateInventoryCategory",d,b(e))},deleteInventoryCategory:function(d,e){return a.post(c+"DeleteInventoryCategory/"+d,null,b(e))},getSkus:function(d,e){return a.post(c+"GetSkus",d,b(e))},getTopPurchasedSkus:function(d,e){return a.get(c+"GetTopPurchasedSkus/"+d,b(e))},getSku:function(d,e){return a.post(c+"GetSku",d,b(e))},getProducts:function(d,e){return a.post(c+"GetProducts",d,b(e))},getProductEditSettings:function(d){return a.get(c+"GetProductEditSettings",b(d))},getProduct:function(d,e){return a.get(c+"GetProduct/"+d,b(e))},updateProduct:function(d,e){return a.post(c+"UpdateProduct",d,b(e))},updateProductTaxCodes:function(d,e){return a.post(c+"UpdateProductTaxCodes",d,b(e))},deleteProduct:function(d,e){return a.post(c+"DeleteProduct/"+d,null,b(e))},getHistoryReport:function(d,e){return a.post(c+"GetHistoryReport",d,b(e))},getSkusPrices:function(d,e){return a.post(c+"GetSkusPrices",d,b(e))},updateSkusPrices:function(d,e){return a.post(c+"UpdateSkusPrices",d,b(e))},getProductsWithReviews:function(d,e){return a.post(c+"GetProductsWithReviews",d,b(e))},getProductReviews:function(d,e){return a.post(c+"GetProductReviews",d,b(e))},getProductReview:function(d,e){return a.get(c+"GetProductReview/"+d,b(e))},updateProductReview:function(d,e){return a.post(c+"UpdateProductReview",d,b(e))},deleteProductReview:function(d,e){return a.post(c+"DeleteProductReview/"+d,null,b(e))},getProductOutOfStockContainers:function(d){return a.post(c+"GetProductOutOfStockContainers",null,b(d))},getProductOutOfStockRequestsMessageFormat:function(d){return a.get(c+"GetProductOutOfStockRequestsMessageFormat",b(d))},sendProductOutOfStockRequests:function(d,e){return a.post(c+"SendProductOutOfStockRequests",d,b(e))},deleteProductOutOfStockRequests:function(d,e){return a.post(c+"DeleteProductOutOfStockRequests",d,b(e))},getSkuBreakDownReportItems:function(d,e){return a.post(c+"GetSkuBreakDownReportItems",d,b(e))},getSkuBreakDownReportItemsReportFile:function(a,b){return c+"GetSkuBreakDownReportItemsReportFile?from={0}&to={1}&buildNumber={2}".format(a.From,a.To,b)},getSkuPOrderTypeBreakDownReport:function(d,e){return a.post(c+"GetSkuPOrderTypeBreakDownReport",d,b(e))},getSkuPOrderTypeFutureBreakDownReport:function(d,e){return a.post(c+"GetSkuPOrderTypeFutureBreakDownReport",d,b(e))}}}]),angular.module("app.core.dataAccess.services.discountService",[]).service("discountService",["$http",function(a){function b(a){var b={};return a&&(b.tracker=a),b}var c="/Api/Discount/";return{getDiscounts:function(d,e){return a.post(c+"GetDiscounts",d,b(e))},getDiscount:function(d,e){return a.get(c+"GetDiscount/"+d,b(e))},updateDiscount:function(d,e){return a.post(c+"UpdateDiscount",d,b(e))},deleteDiscount:function(d,e){return a.post(c+"DeleteDiscount/"+d,null,b(e))},getHistoryReport:function(d,e){return a.post(c+"GetHistoryReport",d,b(e))}}}]),angular.module("app.core.dataAccess.services.fileService",[]).service("fileService",["$http",function(a){function b(a){var b={};return a&&(b.tracker=a),b}var c="/Api/File/";return{getDirectories:function(d){return a.get(c+"GetDirectories",b(d))},addDirectory:function(d,e){return a.post(c+"AddDirectory",d,b(e))},deleteDirectory:function(d,e){return a.post(c+"DeleteDirectory",d,b(e))},getFiles:function(d,e){return a.post(c+"GetFiles",d,b(e))},addFilesUrl:function(){return c+"AddFiles"},deleteFile:function(d,e){return a.post(c+"DeleteFile",d,b(e))}}}]),angular.module("app.core.dataAccess.services.profileService",[]).service("profileService",["$http",function(a){function b(a){var b={};return a&&(b.tracker=a),b}var c="/Api/Profile/";return{updateProfile:function(d,e){return a.post(c+"UpdateProfile",d,b(e))},getProfile:function(d){return a.get(c+"GetProfile",b(d))}}}]),angular.module("app.core.dataAccess.services.gcService",[]).service("gcService",["$http",function(a){function b(a){var b={};return a&&(b.tracker=a),b}var c="/Api/GC/";return{getGiftCertificates:function(d,e){return a.post(c+"GetGiftCertificates",d,b(e))},getGiftCertificatesWithOrderInfo:function(d,e){return a.post(c+"GetGiftCertificatesWithOrderInfo",d,b(e))},getGiftCertificatesWithOrderInfoReportFile:function(a,b){return c+"GetGiftCertificatesWithOrderInfoReportFile?from={0}&to={1}&type={2}&status={3}&billinglastname={4}&shippinglastname={5}&buildNumber={6}".format(a.From,a.To,a.Type,a.StatusCode,a.BillingAddress.LastName,a.ShippingAddress.LastName,b)},getGiftCertificate:function(d,e){return a.get(c+"GetGiftCertificate/"+d,b(e))},getGiftCertificatesAdding:function(d){return a.post(c+"GetGiftCertificatesAdding",null,b(d))},addGiftCertificates:function(d,e,f){return a.post(c+"AddGiftCertificates/?quantity="+d,e,b(f))},updateGiftCertificate:function(d,e){return a.post(c+"UpdateGiftCertificate",d,b(e))},sendGiftCertificateEmail:function(d,e){return a.post(c+"SendGiftCertificateEmail",d,b(e))},deleteGiftCertificate:function(d,e){return a.post(c+"DeleteGiftCertificate/"+d,null,b(e))}}}]),angular.module("app.core.dataAccess.services.paymentMethodService",[]).service("paymentMethodService",["$http",function(a){function b(a){var b={};return a&&(b.tracker=a),b}var c="/Api/PaymentMethod/";return{getPaymentMethods:function(d){return a.get(c+"GetPaymentMethods",b(d))},setState:function(d,e){return a.post(c+"SetState",d,b(e))}}}]),angular.module("app.core.dataAccess.services.orderNoteService",[]).service("orderNoteService",["$http",function(a){function b(a){var b={};return a&&(b.tracker=a),b}var c="/Api/OrderNote/";return{getOrderNotes:function(d,e){return a.post(c+"GetOrderNotes",d,b(e))},createOrderNotePrototype:function(d){return a.post(c+"CreateOrderNotePrototype",null,b(d))},createOrderNote:function(d,e){return a.post(c+"CreateOrderNote",d,b(e))},updateOrderNote:function(d,e){return a.post(c+"UpdateOrderNote",d,b(e))},getOrderNote:function(d,e){return a.get(c+"GetOrderNote/"+d,b(e))},deleteOrderNote:function(d,e){return a.get(c+"DeleteOrderNote/"+d,b(e))}}}]),angular.module("app.core.dataAccess.services.customerService",[]).service("customerService",["$http",function(a){function b(a){var b={};return a&&(b.tracker=a),b}var c="/Api/Customer/";return{getCustomers:function(d,e){return a.post(c+"GetCustomers",d,b(e))},createCustomerPrototype:function(d){return a.post(c+"CreateCustomerPrototype",null,b(d))},createAddressPrototype:function(d){return a.post(c+"CreateAddressPrototype",null,b(d))},createCustomerNotePrototype:function(d){return a.post(c+"CreateCustomerNotePrototype",null,b(d))},createUpdateCustomer:function(d,e){return a.post(c+"AddUpdateCustomer",d,b(e))},getCountries:function(d){return a.get(c+"GetCountries",b(d))},getExistingCustomer:function(d,e){return a.get(c+"GetExistingCustomer/"+d,b(e))},getPaymentMethods:function(d,e){return a.get(c+"GetPaymentMethods/?customerType="+d,b(e))},getOrderNotes:function(d,e){return a.get(c+"GetOrderNotes/?customerType="+d,b(e))},createCreditCardPrototype:function(d){return a.post(c+"CreateCreditCardPrototype",b(d))},createOacPrototype:function(d){return a.post(c+"CreateOacPrototype",b(d))},createCheckPrototype:function(d){return a.post(c+"CreateCheckPrototype",b(d))},createWireTransferPrototype:function(d){return a.post(c+"CreateWireTransferPrototype",b(d))},createMarketingPrototype:function(d){return a.post(c+"CreateMarketingPrototype",b(d))},createVCWellnessPrototype:function(d){return a.post(c+"CreateVCWellnessPrototype",b(d))},createNCPrototype:function(d){return a.post(c+"CreateNCPrototype",b(d))},resendActivation:function(d,e){return a.post(c+"ResendActivation/"+d,null,b(e))},resetPassword:function(d,e){return a.post(c+"ResetPassword/"+d,null,b(e))},loginAsCustomer:function(d,e){return a.post(c+"LoginAsCustomer/"+d,null,b(e))},getHistoryReport:function(d,e){return a.post(c+"GetHistoryReport",d,b(e))},getCustomersForAffiliatesReportFileUrl:function(a,b){return c+"GetCustomersForAffiliates?idaffiliate={0}&buildNumber={1}".format(a,b)},getProfileAddressFieldValuesByValueAsync:function(d,e){return a.post(c+"GetProfileAddressFieldValuesByValueAsync",d,b(e))},getDefaultShippingAddressFieldValuesByValueAsync:function(d,e){return a.post(c+"GetDefaultShippingAddressFieldValuesByValueAsync",d,b(e))},getCustomerStaticFieldValuesByValue:function(d,e){return a.post(c+"GetCustomerStaticFieldValuesByValue",d,b(e))},getCustomerCardExist:function(d,e,f){return a.get(c+"GetCustomerCardExist/{0}?idcustomer={1}".format(d,e),b(f))},mergeCustomers:function(d,e,f){return a.post(c+"MergeCustomers/{0}".format(d),e,b(f))},getCustomersWithDublicateEmails:function(d,e){return a.post(c+"GetCustomersWithDublicateEmails",d,b(e))},getWholesaleSummaryReport:function(d){return a.get(c+"GetWholesaleSummaryReport",b(d))},getWholesaleSummaryReportMonthStatistic:function(d,e,f){return a.get(c+"GetWholesaleSummaryReportMonthStatistic/?count={0}&include={1}".format(d,e),b(f))},getWholesales:function(d,e){return a.post(c+"GetWholesales",d,b(e))},getWholesalesReportFile:function(a,b){return c+"GetWholesalesReportFile?idtradeclass={0}&idtier={1}&onlyactive={2}&buildNumber={3}".format(a.IdTradeClass,a.IdTier,a.OnlyActive,b)}}}]),angular.module("app.core.dataAccess.services.orderService",[]).service("orderService",["$http",function(a){function b(a){var b={};return a&&(b.tracker=a),b}function c(a){var b="";return $.each(a,function(a,c){"Paging"!=a&&"Sorting"!=a&&(b+="{0}={1}&".format(a.toLowerCase(),c))}),b}var d="/Api/Order/";return{getShortOrders:function(c,e){return a.post(d+"GetShortOrders",c,b(e))},exportOrders:function(c,e){return a.post(d+"exportorders",c,b(e))},getOrders:function(c,e){return a.post(d+"GetOrders",c,b(e))},getAutoShips:function(c,e){return a.post(d+"GetAutoShips",c,b(e))},getAutoShipCreditCards:function(c,e,f){return a.get(d+"GetAutoShipCreditCards?customerId="+e+"&orderId="+c,b(f))},updateAutoShipBilling:function(c,e,f){return a.post(d+"UpdateAutoShipBilling?orderId="+e,c,b(f))},activatePauseAutoShip:function(c,e,f,g){return a.post(d+"ActivatePauseAutoShip?id="+c+"&customerId="+e+"&activate="+f,b(g))},deleteAutoShip:function(c,e,f){return a.post(d+"DeleteAutoShip?id="+c+"&customerId="+e,b(f))},getOrder:function(c,e,f,g){return a.get(d+"GetOrder/{0}?idcustomer={1}&refreshprices={2}".format(c,e,f),b(g))},calculateOrder:function(b,c){return a.post(d+"CalculateOrder",b,{timeout:c.promise})},updateOrder:function(c,e){return a.post(d+"UpdateOrder",c,b(e))},updateOrderStatus:function(c,e,f,g){return a.post(d+"UpdateOrderStatus/{0}?status={1}&={2}".format(c,e,f),null,b(g))},moveOrder:function(c,e,f){return a.post(d+"MoveOrder/"+c+"?idcustomer="+e,null,b(f))},getHistoryReport:function(c,e){return a.post(d+"GetHistoryReport",c,b(e))},sendOrderConfirmationEmail:function(c,e,f){return a.post(d+"SendOrderConfirmationEmail/{0}".format(c),e,b(f))},sendOrderShippingConfirmationEmail:function(c,e,f){return a.post(d+"SendOrderShippingConfirmationEmail/{0}".format(c),e,b(f))},cancelOrder:function(c,e){return a.post(d+"CancelOrder/{0}".format(c),null,b(e))},getReshipOrder:function(c,e,f,g){return a.get(d+"GetReshipOrder/{0}?idsource={1}&idcustomer={2}".format(c,e,f),b(g))},updateReshipOrder:function(c,e){return a.post(d+"UpdateReshipOrder",c,b(e))},getRefundOrder:function(c,e,f,g){return a.get(d+"GetRefundOrder/{0}?idsource={1}&idcustomer={2}".format(c,e,f),b(g))},addRefundOrder:function(c,e){return a.post(d+"AddRefundOrder",c,b(e))},calculateRefundOrder:function(b,c){return a.post(d+"CalculateRefundOrder",b,{timeout:c.promise})},cancelRefundOrder:function(c,e){return a.post(d+"CancelRefundOrder/{0}".format(c),null,b(e))},getIsBrontoSubscribed:function(c,e){return a.get(d+"GetIsBrontoSubscribed/{0}".format(c),b(e))},getOrdersRegionStatistic:function(c,e){return a.post(d+"GetOrdersRegionStatistic",c,b(e))},getOrdersRegionStatisticReportFile:function(a,b){return d+"GetOrdersRegionStatisticReportFile?from={0}&to={1}&idcustomertype={2}&idordertype={3}&buildNumber={4}".format(a.From,a.To,a.IdCustomerType,a.IdOrderType,b)},getOrdersZipStatistic:function(c,e){return a.post(d+"GetOrdersZipStatistic",c,b(e))},getOrdersZipStatisticReportFile:function(a,b){return d+"GetOrdersZipStatisticReportFile?from={0}&to={1}&idcustomertype={2}&idordertype={3}&buildNumber={4}".format(a.From,a.To,a.IdCustomerType,a.IdOrderType,b)},getOrderWithRegionInfoItems:function(c,e){return a.post(d+"GetOrderWithRegionInfoItems",c,b(e))},getOrderWithRegionInfoItemsReportFile:function(a,b){return d+"GetOrderWithRegionInfoItemsReportFile?from={0}&to={1}&idcustomertype={2}&idordertype={3}&region={4}&zip={5}&buildNumber={6}".format(a.From,a.To,a.IdCustomerType,a.IdOrderType,a.Region,a.Zip,b)},getOrderWithRegionInfoAmount:function(c,e){return a.post(d+"GetOrderWithRegionInfoAmount",c,b(e))},getOrdersAgentReport:function(c,e){return a.post(d+"GetOrdersAgentReport",c,b(e))},getOrdersAgentReportFile:function(a,b){return d+"GetOrdersAgentReportFile?from={0}&to={1}&frequencytype={2}&idadminteams={3}&idadmin={4}&buildNumber={5}".format(a.From,a.To,a.FrequencyType,a.sIdAdminTeams,a.IdAdmin,b)},getGCOrders:function(c,e){return a.get(d+"GetGCOrders/"+c,b(e))},getServiceCodesReport:function(c,e){return a.post(d+"GetServiceCodesReport",c,b(e))},getWholesaleDropShipReport:function(c,e){return a.post(d+"GetWholesaleDropShipReport",c,b(e))},getOrdersForWholesaleDropShipReport:function(c,e){return a.post(d+"GetOrdersForWholesaleDropShipReport",c,b(e))},getOrdersForWholesaleDropShipReportFile:function(a,b){return d+"GetOrdersForWholesaleDropShipReportFile?from={0}&to={1}&shipfrom={2}&shipto={3}&idcustomertype={4}&idtradeclass={5}&customerfirstname={6}&customerlastname={7}&shipfirstname={8}&shiplastname={9}&shipidconfirm={10}&idorder={11}&ponumber={12}&customercompany={13}&buildNumber={14}".format(a.From,a.To,a.ShipFrom,a.ShipTo,a.IdCustomerType,a.IdTradeClass,a.CustomerFirstName,a.CustomerLastName,a.ShipFirstName,a.ShipLastName,a.ShippingIdConfirmation,a.IdOrder,a.PoNumber,a.CustomerCompany,b)},getTransactionAndRefundReport:function(c,e){return a.post(d+"GetTransactionAndRefundReport",c,b(e))},getTransactionAndRefundReportFile:function(a,b){return d+"GetTransactionAndRefundReportFile?from={0}&to={1}&idcustomertype={2}&idservicecode={3}&customerfirstname={4}&customerlastname={5}&idcustomer={6}&idorder={7}&idorderstatus={8}&idordertype={9}&buildNumber={10}".format(a.From,a.To,a.IdCustomerType,a.IdServiceCode,a.CustomerFirstName,a.CustomerLastName,a.IdCustomer,a.IdOrder,a.IdOrderStatus,a.IdOrderType,b)},getOrdersSummarySalesOrderTypeStatisticItems:function(c,e){return a.post(d+"GetOrdersSummarySalesOrderTypeStatisticItems",c,b(e))},getOrdersSummarySalesOrderItems:function(c,e){return a.post(d+"GetOrdersSummarySalesOrderItems",c,b(e))},getOrdersSummarySalesOrderItemsReportFile:function(a,b){return d+"GetOrdersSummarySalesOrderItemsReportFile?from={0}&to={1}&shipfrom={2}&shipto={3}&firstorderfrom={4}&firstorderto={5}&idcustomertype={6}&idcustomersource={7}&customersourcedetails={8}&idcustomer={9}&keycode={10}&discountcode={11}&isaffiliate={12}&fromcount={13}&tocount={14}&buildNumber={15}".format(a.From,a.To,a.ShipFrom,a.ShipTo,a.FirstOrderFrom,a.FirstOrderTo,a.IdCustomerType,a.IdCustomerSource,a.CustomerSourceDetails,a.IdCustomer,a.KeyCode,a.DiscountCode,a.IsAffiliate,a.FromCount,a.ToCount,b)},getSkuAddressReportItems:function(c,e){return a.post(d+"GetSkuAddressReportItems",c,b(e))},getSkuAddressReportItemsReportFile:function(a,b){return d+"GetSkuAddressReportItemsReportFile?from={0}&to={1}&idcustomertype={2}&skucode={3}&discountcode={4}&withoutdiscount={5}&buildNumber={6}".format(a.From,a.To,a.IdCustomerType,a.SkuCode,a.DiscountCode,a.WithoutDiscount,b)},getMatchbackReportItems:function(c,e){return a.post(d+"GetMatchbackReportItems",c,b(e))},getMatchbackItemsReportFile:function(a,b){return d+"GetMatchbackItemsReportFile?from={0}&to={1}&idordersource={2}&buildNumber={3}".format(a.From,a.To,a.IdOrderSource,b)},getMailingReportItems:function(c,e){return a.post(d+"GetMailingReportItems",c,b(e))},getMailingReportItemsReportFile:function(a,b){return d+"GetMailingReportItemsReportFile?{0}buildNumber={1}".format(c(a),b)},getOrderSkuCountReport:function(c,e){return a.post(d+"GetOrderSkuCountReport",c,b(e))},getShippedViaSummaryReport:function(c,e){return a.post(d+"GetShippedViaSummaryReport",c,b(e))},getShippedViaItemsReportOrderItems:function(c,e){return a.post(d+"GetShippedViaItemsReportOrderItems",c,b(e))},getShippedViaItemsReportOrderItemsReportFile:function(a,b){return d+"GetShippedViaItemsReportOrderItemsReportFile?{0}buildNumber={1}".format(c(a),b)},getProductQualitySalesReportItems:function(c,e){return a.post(d+"GetProductQualitySalesReportItems",c,b(e))},getProductQualitySkusReportItems:function(c,e){return a.post(d+"GetProductQualitySkusReportItems",c,b(e))},getAffiliateOrdersInfoReportFile:function(a,b){return d+"GetAffiliateOrdersInfoReportFile/{0}?buildNumber={1}".format(a,b)},getAAFESReportItems:function(c,e){return a.post(d+"GetAAFESReportItems",c,b(e))},getAAFESReportItemsReportFile:function(a,b){return d+"GetAAFESReportItemsReportFile?{0}buildNumber={1}".format(c(a),b)}}}]),angular.module("app.core.dataAccess.services.affiliateService",[]).service("affiliateService",["$http",function(a){function b(a){var b={};return a&&(b.tracker=a),b}var c="/Api/Affiliate/";return{getAffiliates:function(d,e){return a.post(c+"GetAffiliates",d,b(e))},getAffiliate:function(d,e){return a.get(c+"GetAffiliate/"+d,b(e))},updateAffiliate:function(d,e){return a.post(c+"UpdateAffiliate",d,b(e))},getAffiliateEmail:function(d,e){return a.get(c+"GetAffiliateEmail/"+d,b(e))},sendAffiliateEmail:function(d,e){return a.post(c+"SendAffiliateEmail",d,b(e))},deleteAffiliate:function(d,e){return a.post(c+"DeleteAffiliate/"+d,null,b(e))},resendActivation:function(d,e){return a.post(c+"ResendActivation/"+d,null,b(e))},resetPassword:function(d,e){return a.post(c+"ResetPassword/"+d,null,b(e))},getHistoryReport:function(d,e){return a.post(c+"GetHistoryReport",d,b(e))},getCustomerInAffiliateReport:function(d,e){return a.post(c+"GetCustomerInAffiliateReport",d,b(e))},getAffiliateOrderPaymentsWithCustomerInfo:function(d,e){return a.post(c+"GetAffiliateOrderPaymentsWithCustomerInfo",d,b(e))},getAffiliatesSummary:function(d){return a.get(c+"GetAffiliatesSummary",b(d))},getAffiliatesSummaryReportItemsForMonths:function(d,e,f){return a.get(c+"GetAffiliatesSummaryReportItemsForMonths/?count={0}&include={1}".format(d,e),b(f))},getAffiliatePaymentHistory:function(d,e){return a.get(c+"GetAffiliatePaymentHistory/"+d,b(e))},payForAffiliateOrders:function(d,e){return a.post(c+"PayForAffiliateOrders/"+d,null,b(e))},getUnpaidOrdersForLastPeriod:function(d,e){return a.get(c+"GetUnpaidOrdersForLastPeriod/"+d,b(e))},getLoginAsAffiliateUrl:function(a,b){return c+"LoginAsAffiliate/{0}?&buildNumber={1}".format(a,b)}}}]),angular.module("app.core.dataAccess.services.helpService",[]).service("helpService",["$http",function(a){function b(a){var b={};return a&&(b.tracker=a),b}var c="/Api/Help/";return{getHelpTickets:function(d,e){return a.post(c+"GetHelpTickets",d,b(e))},getHelpTicket:function(d,e){return a.get(c+"GetHelpTicket/"+d,b(e))},updateHelpTicket:function(d,e){return a.post(c+"UpdateHelpTicket",d,b(e))},deleteHelpTicket:function(d,e){return a.post(c+"DeleteHelpTicket/"+d,null,b(e))},getHelpTicketComment:function(d,e){return a.get(c+"GetHelpTicketComment/"+d,b(e))},updateHelpTicketComment:function(d,e){return a.post(c+"UpdateHelpTicketComment",d,b(e))},deleteHelpTicketComment:function(d,e){return a.post(c+"DeleteHelpTicketComment/"+d,null,b(e))},getBugTickets:function(d,e){return a.post(c+"GetBugTickets",d,b(e))},getBugTicket:function(d,e){return a.get(c+"GetBugTicket/"+d,b(e))},updateBugTicket:function(d,e){return a.post(c+"UpdateBugTicket",d,b(e))},deleteBugTicket:function(d,e){
return a.post(c+"DeleteBugTicket/"+d,null,b(e))},getBugTicketComment:function(d,e){return a.get(c+"GetBugTicketComment/"+d,b(e))},updateBugTicketComment:function(d,e){return a.post(c+"UpdateBugTicketComment",d,b(e))},deleteBugTicketComment:function(d,e){return a.post(c+"DeleteBugTicketComment/"+d,null,b(e))},deleteBugTicketFile:function(d,e,f,g){return a.post(c+"DeleteBugTicketFile",{PublicId:d,FileName:e,Id:f},b(g))},deleteBugTicketCommentFile:function(d,e,f,g){return a.post(c+"DeleteBugTicketCommentFile",{PublicId:d,FileName:e,Id:f},b(g))}}}]),angular.module("app.core.dataAccess.services.promotionService",[]).service("promotionService",["$http",function(a){function b(a){var b={};return a&&(b.tracker=a),b}var c="/Api/Promotion/";return{getPromotions:function(d,e){return a.post(c+"GetPromotions",d,b(e))},getPromotion:function(d,e){return a.get(c+"GetPromotion/"+d,b(e))},updatePromotion:function(d,e){return a.post(c+"UpdatePromotion",d,b(e))},deletePromotion:function(d,e){return a.post(c+"DeletePromotion/"+d,null,b(e))},getHistoryReport:function(d,e){return a.post(c+"GetHistoryReport",d,b(e))}}}]),angular.module("app.core.dataAccess.services.vitalGreenService",[]).service("vitalGreenService",["$http",function(a){function b(a){var b={};return a&&(b.tracker=a),b}var c="/Api/VitalGreen/";return{getVitalGreenReport:function(d,e){return a.post(c+"GetVitalGreenReport",d,b(e))},getVitalGreenReportFileUrl:function(a,b){return c+"GetVitalGreenReportFile?year={0}&month={1}&buildNumber={2}".format(a.Year,a.Month,b)}}}]),angular.module("app.core.dataAccess.services.healthwiseService",[]).service("healthwiseService",["$http",function(a){function b(a){var b={};return a&&(b.tracker=a),b}var c="/Api/Healthwise/";return{getHealthwiseCustomersWithPeriods:function(d,e){return a.post(c+"GetHealthwiseCustomersWithPeriods",d,b(e))},getHealthwisePeriod:function(d,e){return a.get(c+"GetHealthwisePeriod/"+d,b(e))},deleteHealthwisePeriod:function(d,e){return a.post(c+"DeleteHealthwisePeriod/"+d,null,b(e))},getHealthwiseOrders:function(d,e){return a.get(c+"GetHealthwiseOrders/"+d,b(e))},makeHealthwisePeriodPayment:function(d,e){return a.post(c+"MakeHealthwisePeriodPayment",d,b(e))},markOrder:function(d,e){return a.post(c+"MarkOrder/"+d,null,b(e))},markCustomerOrders:function(d,e){return a.post(c+"MarkCustomerOrders/"+d,null,b(e))},getHealthwisePeriodsForMovement:function(d,e){return a.post(c+"GetHealthwisePeriodsForMovement",d,b(e))},moveHealthwiseOrders:function(d,e){return a.post(c+"MoveHealthwiseOrders",d,b(e))},addPeriod:function(d,e){return a.post(c+"AddPeriod/"+d,null,b(e))}}}]),angular.module("app.core.dataAccess.services.redirectService",[]).service("redirectService",["$http",function(a){function b(a){var b={};return a&&(b.tracker=a),b}var c="/Api/Redirect/";return{getRedirects:function(d,e){return a.post(c+"GetRedirects",d,b(e))},getRedirect:function(d,e){return a.get(c+"GetRedirect/"+d,b(e))},updateRedirect:function(d,e){return a.post(c+"UpdateRedirect",d,b(e))},deleteRedirect:function(d,e){return a.post(c+"DeleteRedirect/"+d,null,b(e))}}}]),angular.module("app.core.dataAccess.services.cacheService",[]).service("cacheService",["$http",function(a){function b(a){var b={};return a&&(b.tracker=a),b}var c="/Api/Cache/";return{getCacheStatus:function(d){return a.get(c+"CacheStatus",b(d))}}}]),angular.module("app.core.dataAccess.services.inventorySkuService",[]).service("inventorySkuService",["$http",function(a){function b(a){var b={};return a&&(b.tracker=a),b}var c="/Api/InventorySku/";return{getInventorySkus:function(d,e){return a.post(c+"GetInventorySkus",d,b(e))},getShortInventorySku:function(d,e){return a.post(c+"GetShortInventorySku",d,b(e))},getInventorySku:function(d,e){return a.get(c+"GetInventorySku/"+d,b(e))},updateInventorySku:function(d,e){return a.post(c+"UpdateInventorySku",d,b(e))},deleteInventorySku:function(d,e){return a.post(c+"DeleteInventorySku/"+d,null,b(e))},getInventorySkuLookups:function(d){return a.get(c+"GetInventorySkuLookups",b(d))},getInventorySkuCategoriesTree:function(d,e){return a.post(c+"GetInventorySkuCategoriesTree",d,b(e))},updateInventorySkuCategoriesTree:function(d,e){return a.post(c+"UpdateInventorySkuCategoriesTree",d,b(e))},getInventorySkuCategory:function(d,e){return a.get(c+"GetInventorySkuCategory/"+d,b(e))},updateInventorySkuCategory:function(d,e){return a.post(c+"UpdateInventorySkuCategory",d,b(e))},deleteInventorySkuCategory:function(d,e){return a.post(c+"DeleteInventorySkuCategory/"+d,null,b(e))},getInventorySkuUsageReport:function(d,e){return a.post(c+"GetInventorySkuUsageReport",d,b(e))},getInventorySkuUsageReportFile:function(a,b){return c+"GetInventorySkuUsageReportFile?from={0}&to={1}&skuids={2}&invskuids={3}&buildNumber={4}".format(a.From,a.To,a.sSkuIds,a.sInvSkuIds,b)},getInventoriesSummaryUsageReport:function(d,e){return a.post(c+"GetInventoriesSummaryUsageReport",d,b(e))},getInventoriesSummaryUsageReportFile:function(a,b){return c+"GetInventoriesSummaryUsageReportFile?from={0}&to={1}&sku={2}&invsku={3}&assemble={4}&idsinvcat={5}&buildNumber={6}".format(a.From,a.To,a.Sku,a.InvSku,a.Assemble,a.IdsInvCat,b)}}}]),angular.module("app.core.dataAccess.services.serviceCodeService",[]).service("serviceCodeService",["$http",function(a){function b(a){var b={};return a&&(b.tracker=a),b}var c="/Api/ServiceCode/";return{getServiceCodesReport:function(d,e){return a.post(c+"GetServiceCodesReport",d,b(e))},getServiceCodeRefundItems:function(d,e){return a.post(c+"GetServiceCodeRefundItems",d,b(e))},getServiceCodeReshipItems:function(d,e){return a.post(c+"GetServiceCodeReshipItems",d,b(e))},getServiceCodeRefundItemsReportFile:function(a,b){return c+"GetServiceCodeRefundItemsReportFile?from={0}&to={1}&servicecode={2}&buildNumber={3}".format(a.From,a.To,a.ServiceCode,b)},getServiceCodeReshipItemsReportFile:function(a,b){return c+"GetServiceCodeReshipItemsReportFile?from={0}&to={1}&servicecode={2}&buildNumber={3}".format(a.From,a.To,a.ServiceCode,b)},assignServiceCodeForRefunds:function(d,e,f){return a.post(c+"AssignServiceCodeForRefunds/?servicecode={0}".format(d),e,b(f))},assignServiceCodeForReships:function(d,e,f){return a.post(c+"AssignServiceCodeForReships/?servicecode={0}".format(d),e,b(f))}}}]),angular.module("app.core.dataAccess.services.templateService",[]).service("templateService",["$http",function(a){var b="/Api/Content/";return{tryCompileTemplate:function(c){return a.post(b+"TryCompileTemplate",{Template:c})}}}]),angular.module("app.dataAccess",["app.core.dataAccess.services.infrastructureService","app.core.dataAccess.services.userService","app.core.dataAccess.services.contentService","app.core.dataAccess.services.settingService","app.core.dataAccess.services.authenticationService","app.core.dataAccess.services.productService","app.core.dataAccess.services.discountService","app.core.dataAccess.services.fileService","app.core.dataAccess.services.profileService","app.core.dataAccess.services.gcService","app.core.dataAccess.services.paymentMethodService","app.core.dataAccess.services.orderNoteService","app.core.dataAccess.services.customerService","app.core.dataAccess.services.orderService","app.core.dataAccess.services.affiliateService","app.core.dataAccess.services.helpService","app.core.dataAccess.services.promotionService","app.core.dataAccess.services.contentAreaService","app.core.dataAccess.services.manageStylesService","app.core.dataAccess.services.vitalGreenService","app.core.dataAccess.services.healthwiseService","app.core.dataAccess.services.redirectService","app.core.dataAccess.services.cacheService","app.core.dataAccess.services.inventorySkuService","app.core.dataAccess.services.serviceCodeService","app.core.dataAccess.services.templateService"]),angular.module("app.core.utils.httpInterceptor",[]).factory("httpInterceptor",["$q","toaster","$rootScope","dataStateRemediator",function(a,b,c,d){return{request:function(a){return a.headers["Build-Number"]=c.buildNumber,a},response:function(b){switch(b.status){case 204:return d.runSaveDataScenario(b),a.defer().promise;case 200:d.runRestoreDataScenario(b)}return b},responseError:function(d){switch(d.status){case 401:return c.$state.go("index.oneCol.login"),b.pop("warning","Caution!","You must login before accessing this area."),a.defer().promise;case 403:return c.$state.go(null==c.$state.previous||""===c.$state.previous.name||c.unauthorizedArea(c.$state.href(c.$state.previous))?"index.oneCol.dashboard":c.$state.previous.name),b.pop("warning","Caution!","Sorry, but you do not have the appropriate permissions to access this area."),a.defer().promise;case 404:return c.$state.go("index.notFound"),a.defer().promise}return a.reject(d)}}}]),angular.module("app.core.utils.modalUtil",[]).service("modalUtil",["$uibModal","$log",function(a,b){return{open:function(c,d,e,f,g,h){var f=$.extend({size:"sm"},f),i=a.open({templateUrl:c,controller:d,size:f.size,resolve:{data:function(){return e}},controllerAs:"modal"});return i.result.then(function(a){b.info("Modal successfully worked out: "+new Date),g&&g(a)},function(){b.info("Modal dismissed at: "+new Date),h&&h()}),i}}}]),angular.module("app.core.utils.gridSorterUtil",[]).service("gridSorterUtil",[function(){return{resolve:function(a,b,c){function d(a){return a="Asc"==a?"Desc":"Asc"}var e={Path:b,SortOrder:c,applySort:function(b){""!=b&&(this.Path==b&&(this.SortOrder=d(this.SortOrder)),this.Path=b,a&&a())}};return e}}}]),angular.module("app.core.utils.commonActionsUtil",[]).service("commonActionsUtil",["$state","$rootScope",function(a,b){return{cancel:function(a){a||(a="index.oneCol.dashboard"),b.$state.go(null==b.$state.previous||""===b.$state.previous.name||b.unauthorizedArea(b.$state.href(b.$state.previous))?a:b.$state.previous.name)}}}]),angular.module("app.core.utils.appBootstrap",[]).service("appBootstrap",["infrastructureService","$rootScope","$anchorScroll","toaster","authenticationService","cacheService","settingService","$location","ngProgress","webStorageUtil","confirmUtil",function(a,b,c,d,e,f,g,h,i,j,k){function l(a){h.hash(a),c(),h.hash("")}function m(a,b){return a?$.grep(a,function(a){return a.Key===b})[0]:null}function n(a){a.preventDefault(),a.stopPropagation()}function o(a,c,d){var e,f=m(b.ReferenceData.Labels,a);e=f?f.Text:a;var g="";if(c){var f=m(b.ReferenceData.Labels,Array.isArray(c)?c[0]:c);f&&(Array.isArray(c)?c[0]=f.Text:c=f.Text),g=e.format(c,d)}else g=e;return g}function p(a){return b.authenticated&&b.currentUser?b.currentUser.IsSuperAdmin||b.currentUser.Permissions.indexOf(a)>-1:!1}function q(a){if(!b.authenticated||!b.currentUser)return!1;if(b.currentUser.IsSuperAdmin)return!0;var c=!1;return a&&a.subMenu&&$.each(a.subMenu,function(a,d){return null==d.access||b.currentUser.Permissions.indexOf(d.access)>-1?(c=!0,!1):void 0}),c}function r(){e.logout().success(function(){b.authenticated=!1,b.currentUser={},b.$state.go("index.oneCol.login")}).error(function(){})}function s(a){return a||""==a||(a=h.path()),a.indexOf("/authentication/activate")>-1||a.indexOf("/authentication/login")>-1||a.indexOf("/authentication/passwordreset")>-1}function t(){b.authenticated?f.getCacheStatus().success(function(a){a.Success&&a.Data&&(b.cacheState=a.Data),setTimeout(t,5e3)}).error(function(){b.cacheState=[{Error:0}],setTimeout(t,6e4)}):setTimeout(t,2e3)}function u(){b.authenticated?g.getContentAreas().success(function(a){a.Success&&a.Data&&$.each(a.Data,function(a,b){$('.area[data-area-name="'+b.Name+'"]').html(b.Template)}),setTimeout(u,6e4)}).error(function(){setTimeout(u,6e4)}):setTimeout(u,2e3)}function v(){w(),b.appStarted=!1,b.Math=window.Math,b.ReferenceData={},t(),u(),a.getReferenceData().success(function(a){a.Success?(b.ReferenceData=a.Data,b.unauthorizedArea()?(b.authenticated=!1,b.appStarted=!0):e.getCurrenUser().success(function(a){a.Success&&a.Data?(b.authenticated=!0,b.currentUser=a.Data):(b.authenticated=!1,b.$state.go("index.oneCol.login")),b.appStarted=!0}).error(function(){d.pop("error","Error!","Can't get current user info")})):d.pop("error","Error!","Unable to initialize app properly")}).error(function(a){d.pop("error","Error!","Server error occured")}),b.scrollTo=l,b.getReferenceItem=m,b.getValidationMessage=o,b.logout=r,b.validatePermission=p,b.unauthorizedArea=s,b.validatePermissionMenuItem=q,b.stopPropagation=n,b.UIOptions={},b.UIOptions.DatepickerFormat="MM/dd/yyyy"}function w(){b.$on("$stateChangeStart",function(a,c,e,f,g){!b.appStarted||null==b.$state.href(c)||b.unauthorizedArea(b.$state.href(c))||b.authenticated?(i.start(),b.lastRemediationKey&&(j.removeSession(b.lastRemediationKey),b.lastRemediationKey=null)):(d.pop("warning","Caution!","You must login before accessing this area."),a.preventDefault())}),b.$on("$stateChangeSuccess",function(a,c,d,e,f){i.complete(),b.$state.previous=angular.copy(e),b.$state.previous.params=f}),b.$on("$stateChangeError",function(){i.complete()}),b.$on("$stateNotFound",function(){i.complete()})}var x=[],y=function(a,b){x[a]=b},z=function(a){return x[a]};return{initialize:v,setData:y,getData:z}}]),angular.module("app.core.utils.infoPopup.infoPopupController",[]).controller("infoPopupController",["$scope","$uibModalInstance","data",function(a,b,c){function d(){a.text=c.text,a.title=c.title}a.ok=function(){c.okHandler&&c.okHandler(),b.close(!1)},d()}]),angular.module("app.core.utils.infoPopup.infoPopupUtil",[]).service("infoPopupUtil",["$uibModal","$log",function(a,b){return{info:function(c,d,e,f){void 0!==f&&null!==f||(f=!1);var g=a.open({templateUrl:"app/core/utils/infoPopup/info.html",controller:"infoPopupController",backdrop:f?"static":!0,keyboard:!f,resolve:{data:function(){var a={okHandler:e,text:d,title:c};return a}}});g.result.then(function(a){b.info("Info successfully worked out: "+new Date)},function(){b.info("Info dismissed at: "+new Date)})}}}]),angular.module("app.core.utils.confirmation.confirmController",[]).controller("confirmController",["$scope","$uibModalInstance","data",function(a,b,c){function d(){var b="Are you sure?";null!=c.confirmText&&(b=c.confirmText),a.confirmText=b;var d="OK";null!=c.okLabel&&(d=c.okLabel),a.okLabel=d;var e="Cancel";null!=c.cancelLabel&&(e=c.cancelLabel),a.cancelLabel=e,a.okHandler=c.okHandler,a.cancelHandler=c.cancelHandler}a["continue"]=function(){a.okHandler&&a.okHandler(),b.close(!1)},a.close=function(){a.cancelHandler&&a.cancelHandler(),b.dismiss(!1)},d()}]),angular.module("app.core.utils.confirmation.confirmUtil",[]).service("confirmUtil",["$uibModal","$log",function(a,b){return{confirm:function(c,d,e,f,g){var h=a.open({templateUrl:"app/core/utils/confirmation/confirmation.html",controller:"confirmController",animation:!0,resolve:{data:function(){var a={okHandler:c,cancelHandler:e,confirmText:d,okLabel:f,cancelLabel:g};return a}}});h.result.then(function(a){b.info("Confirm successfully worked out: "+new Date)},function(){b.info("Confirm dismissed at: "+new Date)})}}}]),angular.module("app.core.utils.loading.overlayDirective",[]).directive("spinnerOverlay",function(){return{restrict:"E",transclude:!0,scope:{show:"=loading"},template:'<div class="relative"><div data-ng-show="show" class="overlay"><div class="loading">Loading&#8230;</div></div><div ng-transclude></div></div>'}}),angular.module("app.core.utils.parts.basePaginationDirective",[]).directive("basePagination",function(){return{restrict:"E",scope:{totalItems:"=",itemsPerPage:"=",pageChanged:"=",ngModel:"="},template:'<uib-pagination boundary-links="true" total-items="totalItems" items-per-page="itemsPerPage" data-ng-model="ngModel" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;" data-ng-change="pageChanged"></uib-pagination>'}}),angular.module("app.core.utils.parts.imgLoadDirective",[]).directive("imgLoad",["$parse",function(a){return{restrict:"A",link:function(b,c,d){var e=a(d.imgLoad);c.on("load",function(a){b.$apply(function(){e(b,{$event:a})})})}}}]),angular.module("app.core.utils.parts.fileFieldDirective",[]).directive("filefield",["$parse",function(a){return{restrict:"EA",replace:!0,template:'<p class="input-group"><input type="text" placeholder="{{placeHolder}}" {{required}} class="form-control disabled" ng-model="inputValue" disabled/><span class="input-group-btn"><button type="button" class="btn btn-default" data-ng-class="{disabled: disabled}" data-ng-show="inputValue" data-ng-click="clear()"><i class="glyphicon glyphicon-remove-circle"></i></button><button type="button" class="btn btn-default" data-ng-show="inputValue" data-ng-click="openPreview()"><i class="glyphicon glyphicon-eye-open"></i></button><button type="button" class="btn btn-default" data-ng-class="{disabled: disabled}" data-ng-click="openFileManagement()"><i class="glyphicon glyphicon-folder-open"></i></button></span></p>',scope:{Name:"=?",onSelected:"&"},require:["filefield","?^ngModel"],controller:"fileFieldController",link:function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f,a)}}}]).controller("fileFieldController",["$scope","$rootScope","$attrs","$parse","$timeout","$log","modalUtil","appBootstrap","confirmUtil",function(a,b,c,d,e,f,g,h,i){var j=this,k={$setViewValue:angular.noop};j.fileManagementPopup=null,j.init=function(d){k=d,b.ReferenceData.PublicHost&&(j.baseUrl="https://"+b.ReferenceData.PublicHost+"{0}"),a.placeHolder=c.placeholder,c.required?a.required="required":a.required="",k.$render=function(){j.render()}},j.render=function(){k.$viewValue?a.inputValue=j.baseUrl.format(k.$viewValue):a.inputValue=null,void 0!=c.disabled?a.disabled=!0:a.disabled=!1},a.openFileManagement=function(){var b=k.$viewValue;b||(b=null);var c={fileUrl:b,thenCallback:function(b){b&&(b.FullRelativeName&&(k.$setViewValue(b.FullRelativeName),k.$render()),a.onSelected&&a.onSelected({file:b})),j.fileManagementPopup&&j.fileManagementPopup.close()}};h.setData("FILES_POPUP_DATA",c),j.fileManagementPopup=g.open("app/modules/file/partials/selectFile.html","filesController",c,{size:"lg"})},a.openPreview=function(){var a=k.$viewValue;if(a){var b={fileUrl:a};popup=g.open("app/modules/file/partials/previewFile.html","previewFileController",b,{size:"sm"})}},a.clear=function(){i.confirm(function(){k.$setViewValue(null),k.$render()},"Are you sure you want to clear this image input field?")}}]),angular.module("fiestah.money",[]).directive("money",function(){"use strict";function a(a,c,d,e){function f(a){var b=Math.pow(10,o);return Math.round(a*b)/b}function g(a){return parseFloat(a).toFixed(o)}function h(a){return e.$isEmpty(a)?"":""+a}function i(a){return!e.$isEmpty(a)&&l>a?(e.$setValidity("min",!1),0==a?a:void 0):(e.$setValidity("min",!0),a)}function j(a){return!e.$isEmpty(a)&&a>m?void e.$setValidity("max",!1):(e.$setValidity("max",!0),a)}function k(a){return"undefined"==typeof a}var l,m,n,o=2;e.$parsers.push(function(a){angular.isUndefined(a)&&(a=""),0===a.indexOf(".")&&(a="0"+a),0===a.indexOf("-")&&(l>=0?(a=null,e.$setViewValue(""),e.$render()):"-"===a&&(a=""));var c=e.$isEmpty(a);return c||b.test(a)?n=""===a?null:c?a:parseFloat(a):(e.$setViewValue(h(n)),e.$render()),e.$setValidity("number",!0),n}),e.$formatters.push(h),d.$observe("min",function(a){l=parseFloat(a||0),e.$validate()}),e.$validators.min=function(a){return e.$isEmpty(a)||k(l)||a>=l},e.$formatters.push(i),angular.isDefined(d.max)&&(d.$observe("max",function(a){m=parseFloat(a),e.$validate()}),e.$validators.max=function(a){return e.$isEmpty(a)||k(m)||m>=a},e.$formatters.push(j)),"-1"!==d.precision&&(d.$observe("precision",function(a){var b=parseFloat(a);o=isNaN(b)?2:b,e.$setViewValue(g(e.$modelValue))}),e.$parsers.push(function(a){return a||0==a?n=f(a):a}),e.$formatters.push(function(a){return a||0==a?g(a):a}),c.bind("blur",function(){var a=e.$modelValue;(a||0==a)&&(e.$viewValue=g(a),e.$render())}))}var b=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/;return{restrict:"A",require:"ngModel",link:a}}),angular.module("app.core.utils.parts.numbersOnlyDirective",[]).directive("numbersOnly",function(){return{require:"ngModel",link:function(a,b,c,d){function e(a){return"undefined"!=typeof a}function f(a){return"undefined"==typeof a}function g(a){return"number"==typeof a}var h=!1,i=!1;if(e(c.numbersOnlyDenyZero)&&(h=!0),e(c.numbersOnlyAllowNegative)&&(i=!0),d.$parsers.push(function(a){if(void 0==a)return"";if(i)if(null!=a&&a.length>0&&"-"==a[0])var b="-"+a.substring(1,a.length).replace(/[^0-9]/g,"");else var b=a.replace(/[^0-9]/g,"");else var b=a.replace(/[^0-9]/g,"");return 0==parseInt(b)&&h&&(b=null),b!=a&&(d.$setViewValue(b),d.$render()),b}),e(c.min)||c.ngMin){var j;d.$validators.min=function(a){return d.$isEmpty(a)||f(j)||a>=j},c.$observe("min",function(a){e(a)&&!g(a)&&(a=parseFloat(a,10)),j=g(a)&&!isNaN(a)?a:void 0,d.$validate()})}if(e(c.max)||c.ngMax){var k;d.$validators.max=function(a){return d.$isEmpty(a)||f(k)||k>=a},c.$observe("max",function(a){e(a)&&!g(a)&&(a=parseFloat(a,10)),k=g(a)&&!isNaN(a)?a:void 0,d.$validate()})}}}}),angular.module("app.core.utils.parts.maxCharactersDirective",[]).directive("maxCharacters",function(){return{require:"ngModel",link:function(a,b,c,d){var e=null;c.maxCharacters&&(e=c.maxCharacters),c.ngMaxCharacters&&(e=c.ngMaxCharacters),e&&d.$parsers.push(function(a){if(void 0==a)return"";var b=a.substring(0,e);return b!=a&&(d.$setViewValue(b),d.$render()),b})}}}),angular.module("app.core.utils.parts.maskDirective",[]).directive("mask",["$parse","$timeout",function(a,b){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){c.mask&&(d.$render=function(){b.val(d.$viewValue||""),b.mask(c.mask,{placeholder:c.maskPlaceholder,autoclear:!1})},c.clean&&d.$parsers.push(function(a){var b=a.replaceAll("(","").replaceAll(")","").replaceAll(" ","").replaceAll("-","").replaceAll("x","").replaceAll("_","");return b}),d.$validators.mask=function(a,b){var e=a||b,f=$('<input type"text"/>');return f.val(e),f.mask(c.mask,{placeholder:c.maskPlaceholder}),d.$isEmpty(e)||!d.$isEmpty(f.val())})}}}]),angular.module("app.core.utils.parts.starsDirective",[]).directive("stars",["$parse","$timeout",function(a,b){return{restrict:"E",transclude:!0,template:'<div class="stars"></div>',require:"ngModel",link:function(a,b,c,d){var e=5,f=b.find(".stars");d.$render=function(){if(f.empty(),d.$modelValue){for(var a=d.$modelValue,b=0;a>0;)a>1?(a-=1,f.append($('<img src="/assets/images/stars/fullstar.gif">'))):a>.5?(a=0,f.append($('<img src="/assets/images/stars/fullstar.gif">'))):.5>=a&&(a=0,f.append($('<img src="/assets/images/stars/halfstar.gif">'))),b++;for(;e>b;)f.append($('<img src="/assets/images/stars/emptystar.gif">')),b++}}}}}]),angular.module("app.core.utils.parts.cancelDirective",[]).directive("cancelButton",["commonActionsUtil",function(a){return{scope:!0,priority:4e3,link:function(b,c,d){c.bind("click",function(b){a.cancel(d.cancelButtonDefaultState)})}}}]),function(){"use strict";function a(a){var b='<div class="panel panel-default">   <div class="panel-heading">       <h4 class="panel-title">           <a class="accordion-toggle" ng-click="toggleOpen()" accordion-transclude="heading"><span ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>       </h4>   </div>   <div class="panel-collapse" uib-collapse="!isOpen">       <div class="panel-body" ng-transclude></div>   </div></div>';a.put("template/accordion/accordion-group.html",b)}angular.module("mainApp").run(["$templateCache",a])}(),angular.module("app.core.utils.textAngular.controllers.imageCustomizationController",[]).controller("imageCustomizationController",["$scope","$uibModalInstance","data","toaster",function(a,b,c,d){function e(){a.alignmentLookup=[{Text:"Baseline",Value:"baseline"},{Text:"Top",Value:"top"},{Text:"Middle",Value:"middle"},{Text:"Bottom",Value:"bottom"},{Text:"Text-top",Value:"text-top"},{Text:"Text-bottom",Value:"text-bottom"},{Text:"Left",Value:"left"},{Text:"Right",Value:"right"}],c.Image?(a.image=c.Image,a.availableForRemoval=!0):a.image={Alignment:"baseline"}}a.selected=function(b){a.image.Src=b.FullRelativeName,a.image.Width=b.Width,a.image.Height=b.Height},a.ok=function(){a.image&&a.image.FileUrl?b.close(a.image):d.pop("error","Error!","Please select an image first.",null,"trustedHtml")},a.remove=function(){b.dismiss(),c.Remove&&c.Remove()},a.cancel=function(){b.dismiss(),c.Cancel&&c.Cancel()},e()}]),angular.module("app.core.utils.textAngular.services.imageCustomizationService",[]).service("imageCustomizationService",["modalUtil",function(a){return{customizeImage:function(b,c,d){var e=rangy.saveSelection();a.open("app/core/utils/textAngular/partials/imageCustomization.html","imageCustomizationController",{Image:b,Remove:function(){rangy.restoreSelection(e),d()},Cancel:function(){rangy.restoreSelection(e)}},null,function(a){a.Title=a.Title?a.Title:"",a.Src=a.Src?a.Src:"",a.Alignment=a.Alignment?a.Alignment:"baseline";var b="<img data-restore='"+a.FileUrl+"' alt='"+a.Title+"' src='"+a.Src+"' style='border:none; margin: "+(a.Top?a.Top+"px":"auto")+" "+(a.Right?a.Right+"px":"auto")+" "+(a.Bottom?a.Bottom+"px":"auto")+" "+(a.Left?a.Left+"px":"auto")+(a.KeepRatio?"; max-height: ":"; height: ")+(a.Height?a.Height+"px":"auto")+(a.KeepRatio?"; max-width: ":"; width: ")+(a.Width?a.Width+"px":"auto")+"; vertical-align: "+("left"!=a.Alignment&&"right"!=a.Alignment?a.Alignment:"baseline")+"; float:"+("left"==a.Alignment||"right"==a.Alignment?a.Alignment:"none")+";' />";a.Hyperlink&&(b="<a class='custom-image-link' target='"+(a.NewWindow?"_blank":"_self")+"'  href='"+a.Hyperlink+"'>"+b+"</a>"),rangy.restoreSelection(e),c&&c(b)})},restoreImage:function(a){var b={},c=parseInt(a.css("width")),d=parseInt(a.css("height")),e=parseInt(a.css("max-width")),f=parseInt(a.css("max-height")),g=parseInt(a.css("margin-right")),h=parseInt(a.css("margin-left")),i=parseInt(a.css("margin-top")),j=parseInt(a.css("margin-bottom")),k=a.css("vertical-align"),l=a.css("float"),m=a.attr("alt"),n=a.attr("src"),o=a.data("restore"),p="",q="",r=a.parent();return r.hasClass("custom-image-link")&&(q=r.attr("href"),p=r.attr("target"),b.Hyperlink=q,b.NewWindow="_blank"==p),c&&(b.Width=c),d&&(b.Height=d),e&&f?(b.KeepRatio=!0,e&&(b.Width=e),f&&(b.Height=f)):b.KeepRatio=!1,g&&(b.Right=g),h&&(b.Left=h),i&&(b.Top=i),j&&(b.Bottom=j),"none"==l?b.Alignment=k:b.Alignment=l,b.Title=m,b.Src=n,b.FileUrl=o,b}}}]),angular.module("app.core.utils.textAngular",["ngSanitize","textAngular","app.core.utils.textAngular.controllers.imageCustomizationController","app.core.utils.textAngular.services.imageCustomizationService"]).config(["$provide",function(a){a.decorator("taOptions",["taRegisterTool","$delegate","imageCustomizationService","$timeout",function(a,b,c,d){return a("image",{iconclass:"fa fa-picture-o",action:function(a,b){var d=this;return c.customizeImage(null,function(b){return d.$editor().wrapSelection("insertHTML",b,!0),a.resolve(),!1}),!1},onElementSelect:{element:"img",action:function(a,b,d){var e=function(){d.updateTaBindtaTextElement()};a.preventDefault();var f=function(){var a=null;return a=b.parent().hasClass("custom-image-link")?b.parent():b},g=c.restoreImage(b);return c.customizeImage(g,function(a){var b=f();return b.replaceWith(a),e(),!1},function(){var a=f();return a.remove(),e(),!1}),!1}}}),a("toggleHtml",{iconclass:"fa fa-code",tooltiptext:"Toggle html / Rich Text",action:function(){var a=this.$editor();a.switchView(),a.showHtml&&!a.displayElements.html[0].innerHTML&&!a.displayElements.html[0].innerText&&a.displayElements.text[0].innerHTML&&$(a.displayElements.html[0]).val(a.displayElements.text[0].innerHTML)},activeState:function(){return this.$editor().showHtml}}),b.toolbar=[["h1","h2","h3","h4","h5","h6","p","pre","justifyLeft","justifyCenter","justifyRight","indent","outdent"],["quote","bold","italics","underline","strikeThrough","ul","ol","redo","undo","clear","html","insertLink","insertVideo","image"]],b.keyMappings=[],b.disableSanitizer=!0,b}])}]),angular.module("app.core.utils.webStorageUtil",[]).factory("webStorageUtil",["$window",function(a){return{setLocal:function(b,c){try{return a.Storage?(a.localStorage.setItem(b,c),!0):!1}catch(d){console.error(d,d.message)}},getLocal:function(b){try{return a.Storage?a.localStorage.getItem(b):!1}catch(c){console.error(c,c.message)}},setSession:function(b,c){try{return a.Storage?(a.sessionStorage.setItem(b,c),!0):!1}catch(d){console.error(d,d.message)}},getSession:function(b){try{return a.Storage?a.sessionStorage.getItem(b):!1}catch(c){console.error(c,c.message)}},getSessionAndForget:function(b){var c=this.getSession(b);return c&&a.sessionStorage.removeItem(b),c},removeSession:function(b){try{if(!a.Storage)return!1;a.sessionStorage.removeItem(b)}catch(c){console.error(c,c.message)}}}}]),angular.module("app.core.utils.dataStateRemediator",[]).factory("dataStateRemediator",["$window","$injector","webStorageUtil","$location","$rootScope",function(a,b,c,d,e){var f=/^\/api\/([a-zA-Z]+[a-zA-Z0-9]*)\/?.*$/i;return{runSaveDataScenario:function(e){var g=b.get("infoPopupUtil");g.info("New Admin Version Available","<p>The admin has recently been updated. In order to provide you with the latest version we must reload your current page to finish the installation.</p><p>What does this mean for you?<ul><li>If you received this message while clicking the save button, it means <strong>NONE</strong> of your data has been saved. Rest assured your data should be retained and you just simply need to review your data entries for accuracy and ensure all is still present and then click save again.</li><li>If you received this message while viewing a page, there is nothing you need to do, the page will just simply refresh.</li></ul></p><p>Upon clicking OK below the page will refresh.</p>",function(){var b=e.config.data;if(b&&"POST"===e.config.method&&0===e.config.url.indexOf("/Api/")){var g=e.config.url.match(f);2===g.length&&c.setSession(g[1]+":"+d.path(),angular.toJson(b))}a.location.reload(!0)})},runRestoreDataScenario:function(a){if(0===a.config.url.indexOf("/Api/")&&a.data&&a.data.Data){var b=a.config.url.match(f);if(2===b.length){var g=b[1]+":"+d.path(),h=c.getSession(g);if(h){var i=angular.fromJson(h);if(i){var j=a.data.Data;void 0!=j.Id&&j.Id===i.Id||void 0!=j.PublicId&&j.PublicId===i.PublicId?(angular.forEach(j,function(a,b){i[b]&&(j[b]=i[b])}),c.removeSession(g),e.lastRemediationKey=null):e.lastRemediationKey=g}}}}}}}]),angular.module("app.core.utils.unsavedChanges.unsavedChangesFacilities",[]).service("unsavedWarningSharedService",["confirmUtil","$rootScope","$injector","ngProgress",function(a,b,c,d){function e(){return j=!0,angular.forEach(i,function(a,b){a.$dirty&&(j=!1)}),j}function f(){angular.forEach(k,function(a){a()}),window.onbeforeunload=null}function g(){window.onbeforeunload=h.confirmExit;var c=["$stateChangeStart"];angular.forEach(c,function(c){var f=b.$on(c,function(c,f,g){e()||(a.confirm(null,l.navigate,function(){h.allFormsCleanUp(),b.$state.go(f.name,g)},"Close and review all changes","Proceed and lose all changes"),d.reset(),c.preventDefault())});k.push(f)})}var h=this,i=[],j=!0,k=[angular.noop];this.allForms=function(){return i},this.allFormsCleanUp=function(){angular.forEach(h.allForms(),function(a,b){a.$dirty&&a.$setPristine()})};var l={navigate:"You will lose unsaved changes if you leave this page. Are you sure you want to proceed?",reload:"You will lose unsaved changes if you reload this page"};this.init=function(a){0===i.length&&g(),i.push(a)},this.removeForm=function(a){var b=i.indexOf(a);-1!==b&&(i.splice(b,1),0===i.length&&f())},this.confirmExit=function(){return e()?void f():l.reload}}]).directive("unsavedWarningClear",["unsavedWarningSharedService",function(a){return{scope:!0,priority:3e3,link:function(b,c,d){c.bind("click",function(b){a.allFormsCleanUp()})}}}]).directive("unsavedWarningForm",["unsavedWarningSharedService",function(a){return{require:"form",link:function(b,c,d,e){a.init(e),b.$on("$destroy",function(){a.removeForm(e)})}}}]),angular.module("app.core.utils.uiAceTtlDirective",[]).directive("uiAceTtl",function(){return{restrict:"A",require:"?ngModel",template:'<div ng-model="ngModel" ui-ace="{ require: [\'ace/ext/language_tools\'], advanced: {enableSnippets: true,enableBasicAutocompletion: true,enableLiveAutocompletion: true},theme:\'cobalt\',mode: \'ttl\',onLoad: aceLoaded,onChange: aceChanged}"></div><div data-ng-if="errors.length > 0" class="ace-errors"><span class="ace-error-line" data-ng-repeat="error in errors"><span data-ng-click="showError(error)"><i class="fa fa-exclamation-circle" aria-hidden="true"></i>{{error.Error}}<button title="Show Details" class="btn btn-default btn-success btn-xs" data-ng-click="open(error);"><i class="fa fa-search"></i></button></span></div>',
scope:{ngModel:"=",masterId:"="},controller:["$scope","templateService","contentService","modalUtil",function(a,b,c,d){function e(a){var b="";a.Messages?($.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),toaster.pop("error","Error!",b,null,"trustedHtml")):toaster.pop("error","Error!","Server error occured")}function f(a){for(var b=-1,c=1;-1!==(b=a.indexOf("\n",b+1));)c++;return c}function g(b){b.getSession().$worker&&null!=b.getSession().$worker?b.getSession().$worker.addEventListener("codeok",a.onChangedNoErrors):setTimeout(function(){g(b)},500)}a.eventSet=!1,a.errors=[],a.open=function(a){d.open("app/modules/content/partials/errorDetails.html","aceErrorDetailsController",{error:a})},a.showError=function(b){a.editor.getSession().getSelection().clearSelection(),a.editor.moveCursorTo(b.LinePosition.Line-1,0),a.editor.focus(),a.editor.gotoLine(b.LinePosition.Line,1)},a.onChangedNoErrors=function(b){var d=b.data;a.masterId?c.getMasterContentItem(a.masterId).success(function(b){b.Success?(d=b.Data.Template+d,a.validateTemplate(d,f(b.Data.Template)-1)):e(b)}).error(function(a){e(a)}):a.validateTemplate(d)},a.validateTemplate=function(c,d){b.tryCompileTemplate(c).success(function(b){var c=a.editor.getSession();if(b.Success){for(var f=b.Data,g=[],h=0;h<f.length;h++){var i=f[h];if(d&&(i.LinePosition.Line=i.LinePosition.Line-d),i&&i.LinePosition){var j=i.LinePosition;g.push({row:j.Line-1,column:j.Offset+1,text:i.Error,type:"error"})}}c.setAnnotations(g),a.errors=f}else e(b)}).error(function(a){e(a)})},a.aceLoaded=function(b){a.editor=b,g(b)}}]}}),angular.module("app.utils",["ui.tree","nvd3ChartDirectives","toaster","ui.sortable","ui.ace","ngProgress","angular-ladda","ajoslin.promise-tracker","ngFileUpload","fiestah.money","jsonFormatter","app.core.utils.unsavedChanges.unsavedChangesFacilities","app.core.utils.httpInterceptor","app.core.utils.appBootstrap","app.core.utils.modalUtil","app.core.utils.gridSorterUtil","app.core.utils.commonActionsUtil","app.core.utils.confirmation.confirmController","app.core.utils.confirmation.confirmUtil","app.core.utils.infoPopup.infoPopupController","app.core.utils.infoPopup.infoPopupUtil","app.core.utils.loading.overlayDirective","app.core.utils.parts.basePaginationDirective","app.core.utils.parts.imgLoadDirective","app.core.utils.parts.fileFieldDirective","app.core.utils.parts.numbersOnlyDirective","app.core.utils.parts.maxCharactersDirective","app.core.utils.parts.maskDirective","app.core.utils.parts.starsDirective","app.core.utils.parts.cancelDirective","app.core.utils.textAngular","app.core.utils.webStorageUtil","app.core.utils.dataStateRemediator","app.core.utils.uiAceTtlDirective"]),angular.module("app.modules",["app.modules.authentication","app.modules.profile","app.modules.demo","app.modules.users","app.modules.content","app.modules.setting","app.modules.product","app.modules.file","app.modules.gc","app.modules.customer","app.modules.order","app.modules.affiliate","app.modules.help","app.modules.misc","app.modules.healthwise","app.modules.inventorysku"]),angular.module("app.modules.authentication",["app.modules.authentication.controllers.loginController","app.modules.authentication.controllers.activationController","app.modules.authentication.controllers.resetPasswordController"]).config(["$stateProvider","$urlRouterProvider",function(a,b){a.state("index.oneCol.resetPassword",{url:"/authentication/passwordreset/{token}",templateUrl:"app/modules/authentication/partials/resetPassword.html",controller:"resetPasswordController"}).state("index.oneCol.activation",{url:"/authentication/activate/{token}",templateUrl:"app/modules/authentication/partials/activation.html",controller:"activationController"}).state("index.oneCol.login",{url:"/authentication/login",templateUrl:"app/modules/authentication/partials/login.html",controller:"loginController"})}]),angular.module("app.modules.authentication.controllers.loginController",[]).controller("loginController",["$scope","promiseTracker","toaster","authenticationService","infrastructureService","$rootScope","$state",function(a,b,c,d,e,f,g){function h(){c.pop("error","Error!","Server error occured")}function i(){a.login={}}a.loginTracker=b("login"),a.signIn=function(b){$.each(b,function(a,b){b&&b.$name==a&&b.$setValidity("server",!0)}),b.$valid?d.login(a.login,a.loginTracker).success(function(d){if(d.Success)f.authenticated=!0,f.currentUser=d.Data,e.getReferenceData().success(function(a){if(a.Success){f.ReferenceData=a.Data;var b="index.oneCol.dashboard",d=null;null==g.previous||""===g.previous.name||f.unauthorizedArea(g.href(g.previous.name,g.previous.params))||(b=g.previous.name,d=g.previous.params),"index.oneCol.dashboard"==b&&(f.currentUser.IsSuperAdmin||$.inArray(2,f.currentUser.Permissions)>=0)&&(b="index.oneCol.manageOrders",d=null),g.go(b,d)}else c.pop("error","Error!","Unable to refresh reference data")}).error(function(a){c.pop("error","Error!","Server error occured")});else{var h="";d.Messages&&(b.submitted=!0,a.serverMessages=new ServerMessages(d.Messages),$.each(d.Messages,function(a,c){c.Field&&b[c.Field.toLowerCase()]&&b[c.Field.toLowerCase()].$setValidity("server",!1),h+=c.Message+"<br />"})),c.pop("error","Error!",h,null,"trustedHtml")}}).error(function(a){h()}):b.submitted=!0},i()}]),angular.module("app.modules.authentication.controllers.activationController",[]).controller("activationController",["$scope","$state","$rootScope","$stateParams","authenticationService","promiseTracker","toaster","infrastructureService",function(a,b,c,d,e,f,g,h){function i(){g.pop("error","Error!","Server error occured")}function j(){e.logout().success(function(){c.authenticated=!1,c.currentUser={},e.getUser(k,a.activationTracker).success(function(c){if(c.Success)a.user=c.Data;else{var d="";c.Messages?$.each(c.Messages,function(a,b){d+=b.Message+"<br />"}):d="Can't get user by token",b.go("index.oneCol.login"),g.pop("error","Error!",d,null,"trustedHtml")}}).error(function(a){b.go("index.oneCol.login"),i()})}).error(function(){g.pop("error","Error!","Can't perform log out")})}var k=d.token;a.activationTracker=f("activation"),a.activate=function(d){$.each(d,function(a,b){b&&b.$name==a&&b.$setValidity("server",!0)}),d.$valid?e.activate(a.user,a.activationTracker).success(function(e){if(e.Success)c.authenticated=!0,c.currentUser=e.Data,g.pop("success","Success!","Successfully activated"),h.getReferenceData().success(function(a){a.Success?c.ReferenceData=a.Data:g.pop("error","Error!","Unable to refresh reference data")}).error(function(a){g.pop("error","Error!","Server error occured")}),b.go("index.oneCol.dashboard");else{var f="";e.Messages&&(d.submitted=!0,a.serverMessages=new ServerMessages(e.Messages),$.each(e.Messages,function(a,b){b.Field&&d[b.Field.toLowerCase()]&&d[b.Field.toLowerCase()].$setValidity("server",!1),f+=b.Message+"<br />"})),g.pop("error","Error!",f,null,"trustedHtml")}}).error(function(a){i()}):d.submitted=!0},j()}]),angular.module("app.modules.authentication.controllers.resetPasswordController",[]).controller("resetPasswordController",["$scope","$state","$rootScope","$stateParams","authenticationService","promiseTracker","toaster","infrastructureService",function(a,b,c,d,e,f,g,h){function i(){g.pop("error","Error!","Server error occured")}function j(){e.logout().success(function(){c.authenticated=!1,c.currentUser={}}).error(function(){g.pop("error","Error!","Can't perform log out")}),a.reset={Token:k}}var k=d.token;a.resetTracker=f("reset"),a.resetPassword=function(d){$.each(d,function(a,b){b&&b.$name==a&&b.$setValidity("server",!0)}),d.$valid?e.resetPassword(a.reset,a.resetTracker).success(function(e){if(e.Success)c.authenticated=!0,c.currentUser=e.Data,g.pop("success","Success!","Successfully reset"),h.getReferenceData().success(function(a){a.Success?c.ReferenceData=a.Data:g.pop("error","Error!","Unable to refresh reference data")}).error(function(a){g.pop("error","Error!","Server error occured")}),b.go("index.oneCol.dashboard");else{var f="";e.Messages&&(d.submitted=!0,a.serverMessages=new ServerMessages(e.Messages),$.each(e.Messages,function(a,b){b.Field&&d[b.Field]&&d[b.Field].$setValidity("server",!1),f+=b.Message+"<br />"})),g.pop("error","Error!",f,null,"trustedHtml")}}).error(function(a){i()}):d.submitted=!0},j()}]),angular.module("app.modules.profile.controllers.profileController",[]).controller("profileController",["$scope","profileService","$rootScope","promiseTracker","toaster","commonActionsUtil",function(a,b,c,d,e,f){function g(){a.form={},h()}function h(){b.getProfile(a.profileTracker).success(function(b){if(b.Success)a.profile=b.Data;else{var c="";b.Messages?$.each(b.Messages,function(a,b){c+=b.Message+"<br />"}):c="Can't get user",e.pop("error","Error!",c,null,"trustedHtml")}}).error(function(a){e.pop("error","Error!","Server error ocurred")})}a.profileTracker=d("profile"),a.save=function(){$.each(a.form.profileForm,function(a,b){b&&b.$name==a&&b.$setValidity("server",!0)}),a.form.profileForm.$valid?b.updateProfile(a.profile,a.profileTracker).success(function(b){if(b.Success)e.pop("success","Success!","Successfully saved"),a.profile=b.Data,c.currentUser.FirstName=a.profile.FirstName,c.currentUser.LastName=a.profile.LastName,c.currentUser.Email=a.profile.Email;else{var d="";b.Messages&&(a.form.profileForm.submitted=!0,a.serverMessages=new ServerMessages(b.Messages),$.each(b.Messages,function(b,c){c.Field&&a.form.profileForm[c.Field]&&a.form.profileForm[c.Field].$setValidity("server",!1),d+=c.Message+"<br />"})),e.pop("error","Error!",d,null,"trustedHtml")}h()}).error(function(a){e.pop("error","Error!","Server error occured"),h()}):a.form.profileForm.submitted=!0},a.cancel=function(){f.cancel()},g()}]),angular.module("app.modules.profile",["app.modules.profile.controllers.profileController"]).config(["$stateProvider","$urlRouterProvider",function(a,b){a.state("index.oneCol.profile",{url:"/profile/manage",templateUrl:"app/modules/profile/partials/profile.html",controller:"profileController"})}]),angular.module("app.modules.demo",["app.modules.demo.controllers.customerListController","app.modules.demo.controllers.customerDetailController","app.modules.demo.controllers.dashboardController","app.modules.demo.controllers.orderDetailController","app.modules.demo.controllers.modalAddSubProductController","app.modules.demo.controllers.manageRecipesController","app.modules.demo.controllers.uploadController"]).config(["$stateProvider","$urlRouterProvider",function(a,b){a.state("index.oneCol.locateOrder",{url:"/orders/locate",template:"<h2>Locate Order</h2>"}).state("index.oneCol.placeNewOrder",{url:"/orders/place",templateUrl:"app/modules/demo/partials/addNewOrder.html",controller:"orderDetailController"}).state("index.twoCols.salesOrders.healthWise",{url:"/healthWise",views:{"@index.twoCols":{template:"<h2>Health Wise</h2>"}}}).state("index.twoCols.salesOrders.orderStatusHistory",{url:"/orderStatusHistory",views:{"@index.twoCols":{template:"<h2>Order Status History</h2>"}}}).state("index.twoCols.salesOrders.ooStockRequests",{url:"/ooStockRequests",views:{"@index.twoCols":{template:"<h2>Out of Stock Requests</h2>"}}}).state("index.twoCols.wholesale.wholesaleSummary",{url:"/wholesaleSummary",views:{"@index.twoCols":{template:"<h2>Wholesale Summary Report</h2>"}}}).state("index.twoCols.wholesale.wholesaleDropShipOrders",{url:"/wholesaleDropShipOrders",views:{"@index.twoCols":{template:"<h2>Wholesale Drop Ship Orders Report</h2>"}}}).state("index.twoCols.operations.vitalGreen",{url:"/vitalGreen",views:{"@index.twoCols":{template:"<h2>VitalGreen</h2>"}}}).state("index.oneCol.manageRecipesTemp",{url:"/content/draggablecategories",templateUrl:"app/modules/demo/partials/manageRecipes.html",controller:"manageRecipesController"}).state("index.oneCol.productTaxCodes",{url:"/tools/productTaxCodes",template:"<h2>Product Tax Codes</h2>"}).state("index.oneCol.emailAddressProfiles",{url:"/tools/emailAddressProfiles",template:"<h2>Multiple Email Address Profiles</h2>"}).state("index.oneCol.healthWise",{url:"/tools/healthWise",template:"<h2>HealthWise</h2>"}).state("index.oneCol.perishableCartThreshold",{url:"/settings/perishableCartThreshold",template:"<h2>Perishable Cart Threshold</h2>"}).state("index.oneCol.upload",{url:"/help/upload",templateUrl:"app/modules/demo/partials/upload.html",controller:"uploadController"}).state("index.oneCol.viewWiki",{url:"/help/viewWiki",template:"<h2>View Wiki</h2>"})}]),angular.module("app.shared",["app.shared.menu","app.shared.area","app.shared.layout"]).config(["$stateProvider","$urlRouterProvider",function(a,b){a.state("index",{"abstract":!0,url:"",views:{"":{templateUrl:"app/shared/layout/partials/index.html",controller:"indexController"},"topMenu@index":{templateUrl:"app/shared/menu/partials/mainMenu.html",controller:"mainNavigationController"},"workingPanel@index":{templateUrl:"app/shared/area/partials/workingPanel.html",controller:"workingPanelController"}}}).state("index.oneCol",{"abstract":!0,url:"",templateUrl:"app/shared/area/partials/oneColumn.html"}).state("index.twoCols",{"abstract":!0,url:"",templateUrl:"app/shared/area/partials/twoColumn.html"})}]),angular.module("app.shared.area",["app.shared.area.controllers.workingPanelController","app.shared.area.controllers.leftPanelController"]).config(["$stateProvider","$urlRouterProvider",function(a,b){a.state("index.notFound",{url:"/404",templateUrl:"app/shared/area/partials/404.html"})}]),angular.module("app.shared.area.controllers.workingPanelController",[]).controller("workingPanelController",["$scope",function(a){}]),angular.module("app.shared.area.controllers.leftPanelController",[]).controller("leftPanelController",["$scope","$stateParams",function(a,b){}]),angular.module("app.shared.layout",["app.shared.layout.controllers.indexController"]),angular.module("app.shared.layout.controllers.indexController",[]).controller("indexController",["$scope","navigationFactory",function(a,b){function c(){a.navigation=b}c()}]),angular.module("app.shared.menu",["app.shared.menu.services.navigationFactory","app.shared.menu.services.sidebarFactory","app.shared.menu.controllers.mainNavigationController","app.shared.menu.controllers.sidebarController"]),angular.module("app.shared.menu.controllers.mainNavigationController",[]).controller("mainNavigationController",["$scope","$stateParams",function(a,b){function c(){}c()}]),angular.module("app.shared.menu.controllers.sidebarController",[]).controller("sidebarController",["$scope","$stateParams","sidebarFactory",function(a,b,c){function d(){a.moduleName=b.name,a.sidebar={};var d=$.grep(c.sidebars,function(b){return b.moduleName===a.moduleName});d.length>0&&(a.sidebar=d[0])}d()}]),angular.module("app.shared.menu.services.navigationFactory",[]).factory("navigationFactory",["$state","$rootScope","modalUtil",function(a,b,c){var d=[{name:"customer",stateLabel:"Customer",subMenu:[{name:"manageCustomers",stateName:"index.oneCol.manageCustomers",stateLabel:"Manage Customers",access:1},{name:"addNewCustomer",stateName:"index.oneCol.addCustomer",stateLabel:"Add New Customer",access:1}]},{name:"orders",stateLabel:"Orders",subMenu:[{name:"viewAllOrders",stateName:"index.oneCol.manageOrders",stateLabel:"Manage Orders",access:2},{name:"manageHelpTickets",stateName:"index.oneCol.manageHelpTickets",stateLabel:"Manage Help Tickets",access:2}]},{name:"products",stateLabel:"Products",subMenu:[{name:"locateProduct",stateName:"index.oneCol.manageProducts",stateLabel:"Manage Products",access:4},{name:"addNewProduct",stateLabel:"Add New Product",access:4,handler:function(){c.open("app/modules/product/partials/addProductPopup.html","addProductPopupController",{thenCallback:function(b){a.go("index.oneCol.addNewProduct",{type:b})}})}},{name:"manageCategories",stateName:"index.oneCol.manageProductCategories",stateLabel:"Manage Categories",access:4},{name:"manageInventoryCategories",stateName:"index.oneCol.manageInventoryCategories",stateLabel:"Manage Sales Categories",access:4},{name:"manageProductReviews",stateName:"index.oneCol.manageProductReviews",stateLabel:"Manage Product Reviews",access:4},{name:"outOfStocks",stateName:"index.oneCol.outOfStocks",stateLabel:"Out of Stock Requests",access:4},{name:"manageInventorySkuCategories",stateName:"index.oneCol.manageInventorySkuCategories",stateLabel:"Manage Parts Categories",access:17},{name:"manageInventorySkus",stateName:"index.oneCol.manageInventorySkus",stateLabel:"Manage Parts",access:17},{name:"downloadGoogleFeed",href:null!=b.PublicHost?"https://{0}/google/datafeed.csv".format(b.PublicHost):"",stateLabel:"Download Google Data Feed",access:4},{name:"manageSkuPrices",stateName:"index.oneCol.manageSkuPrices",stateLabel:"Bulk Product Price Update",access:4}]},{name:"marketing",stateLabel:"Marketing",subMenu:[{name:"manageDCs",stateName:"index.oneCol.manageDiscounts",stateLabel:"Manage Discount Codes",access:14},{name:"managePromotions",stateName:"index.oneCol.managePromotions",stateLabel:"Manage Promotions",access:14},{name:"manageGCs",stateName:"index.oneCol.manageGCs",stateLabel:"Manage Gift Certificates",access:14},{name:"manageRedirect",stateName:"index.oneCol.manageRedirect",stateLabel:"Custom URL Redirects",access:14}]},{name:"reports",stateLabel:"Reports",subMenu:[{name:"salesOrders",stateLabel:"Sales, Orders",subMenu:[{name:"skuPOrderTypeBreakDownReport",stateName:"index.oneCol.skuPOrderTypeBreakDownReport",stateLabel:"Breakdown Report",access:3},{name:"productCategoriesStatistic",stateName:"index.oneCol.productCategoriesStatistic",stateLabel:"Category Sales Report",access:3},{name:"healthwisePeriods",stateName:"index.oneCol.healthwisePeriods",stateLabel:"HealthWise Customer Report",access:3},{name:"KPIReport",stateLabel:"KPI Report (APIs)",href:"/api/report/kpi",access:null},{name:"orderSKUAddressReport",stateName:"index.oneCol.orderSKUAddressReport",stateLabel:"Order SKU and Address Report",access:3},{name:"orderSkuCountReport",stateName:"index.oneCol.orderSkuCountReport",stateLabel:"Order SKU Counts",access:3},{name:"inventorySkusUsageReport",stateName:"index.oneCol.inventorySkusUsageReport",stateLabel:"Parts Usage Report",access:3},{name:"ordersRegionStatistic",stateName:"index.oneCol.ordersRegionStatistic",stateLabel:"Regional Sales Summary",access:3},{name:"shippedViaSummaryReport",stateName:"index.oneCol.shippedViaSummaryReport",stateLabel:"Shipped Via Report",access:3},{name:"skuBreakDownReport",stateName:"index.oneCol.skuBreakDownReport",stateLabel:"SKU Breakdown Report",access:3},{name:"ordersSummarySalesReport",stateName:"index.oneCol.ordersSummarySalesReport",stateLabel:"Summary Sales Report",access:3},{name:"transactionsAndRefundsReport",stateName:"index.oneCol.transactionsAndRefundsReport",stateLabel:"Transaction & Refund Report",access:3}]},{name:"wholesale",stateLabel:"Wholesale",subMenu:[{name:"wholesaleDropShipReport",stateName:"index.oneCol.wholesaleDropShipReport",stateLabel:"Wholesale Drop Ship Orders Report",access:3},{name:"wholesaleSummaryReport",stateName:"index.oneCol.wholesaleSummaryReport",stateLabel:"Wholesale Summary Report",access:3}]},{name:"affiliates",stateLabel:"Affiliates",subMenu:[{name:"affiliateSummaryInformation",stateName:"index.oneCol.affiliatesSummaryReport",stateLabel:"Affiliate Summary Information",access:3},{name:"affiliateOrderImportReport",stateName:"index.oneCol.affiliateOrderImportReport",stateLabel:"CJ Affiliate Order Status Upload",access:3}]},{name:"operations",stateLabel:"Operations",subMenu:[{name:"aAFESShipReport",stateName:"index.oneCol.aAFESShipReport",stateLabel:"AAFES Ship Report",access:3},{name:"orderAgentsStatistic",stateName:"index.oneCol.orderAgentsStatistic",stateLabel:"Agents Report",access:null},{name:"inventoriesSummaryUsageReport",stateName:"index.oneCol.inventoriesSummaryUsageReport",stateLabel:"Inventory Shipment Summary",access:3},{name:"productQualitySalesReport",stateName:"index.oneCol.productQualitySalesReport",stateLabel:"Product Quality Issues Report",access:3},{name:"vitalGreen",stateName:"index.oneCol.vitalGreen",stateLabel:"Review VitalGreen Statistics",access:3},{name:"index.oneCol.serviceCodesStatistic",stateName:"index.oneCol.serviceCodesStatistic",stateLabel:"Service Codes Report",access:3}]},{name:"listProcessingAnalysis",stateLabel:"List Processing, Analysis",subMenu:[{name:"giftCertificateReport",stateName:"index.oneCol.manageGCOrders",stateLabel:"Gift Certificate Report",access:3},{name:"mailingReport",stateName:"index.oneCol.mailingReport",stateLabel:"Mailing List Report",access:3},{name:"matchbackReport",stateName:"index.oneCol.matchbackReport",stateLabel:"Matchback and Post-Season Analysis Report",access:3}]},{name:"catalogRequests",stateName:"index.oneCol.catalogRequests",stateLabel:"Catalog Requests",access:3}]},{name:"affiliates",stateLabel:"Affiliates",subMenu:[{name:"locateAffiliate",stateName:"index.oneCol.manageAffiliates",stateLabel:"Manage Affiliates",access:5},{name:"addNewAffiliate",stateName:"index.oneCol.affiliateAdd",stateLabel:"Add New Affilaite",access:5}]},{name:"content",stateLabel:"Content",subMenu:[{name:"managePages",stateName:"index.oneCol.manageContentPages",stateLabel:"Manage Content",access:6},{name:"manageArticles",stateName:"index.oneCol.manageArticles",stateLabel:"Manage Articles",access:6},{name:"manageRecipes",stateName:"index.oneCol.manageRecipes",stateLabel:"Manage Recipes",access:6},{name:"manageFaqs",stateName:"index.oneCol.manageFaqs",stateLabel:"Manage FAQs",access:6},{name:"manageMasters",stateName:"index.oneCol.manageMasters",stateLabel:"Manage Master Templates",access:7},{name:"manageContentAreas",stateName:"index.oneCol.manageContentAreas",stateLabel:"Manage Design Elements",access:6},{name:"manageStyles",stateName:"index.oneCol.manageStyles",stateLabel:"Manage Custom CSS",access:6},{name:"filesManagement",stateName:"index.oneCol.filesManagement",stateLabel:"Manage Media",access:12},{name:"manageEmailTemplate",stateName:"index.oneCol.manageEmailTemplates",stateLabel:"Manage Email Templates",access:6},{name:"manageAddToCartCs",stateName:"index.oneCol.manageAddToCartCs",stateLabel:"Manage Add To Cart Cross Selling",access:6},{name:"manageViewCartCs",stateName:"index.oneCol.manageViewCartCs",stateLabel:"Manage View Cart Cross Selling",access:6}]},{name:"users",stateLabel:"Users",subMenu:[{name:"manageUsers",stateName:"index.oneCol.manageUsers",stateLabel:"Manage Users",access:9}]},{name:"settings",stateLabel:"Settings",subMenu:[{name:"manageCountries",stateName:"index.oneCol.manageCountries",stateLabel:"Manage Countries / States",access:10},{name:"manageSettings",stateName:"index.oneCol.manageSettings",stateLabel:"Global Settings",access:10},{name:"managePaymentMethods",stateName:"index.oneCol.managePaymentMethods",stateLabel:"Manage Payment Methods",access:10},{name:"manageOrderNotes",stateName:"index.oneCol.manageOrderNotes",stateLabel:"Manage Automatic Order Specific Notes",access:10},{name:"manageLookups",stateName:"index.oneCol.manageLookups",stateLabel:"Manage Lookups",access:10},{name:"manageProductTaxCodes",stateName:"index.oneCol.manageProductTaxCodes",stateLabel:"Manage Product Tax Codes",access:10},{name:"moveOrder",stateName:"index.oneCol.moveOrder",stateLabel:"Reassign Transaction",access:10},{name:"changeOrderStatus",stateName:"index.oneCol.changeOrderStatus",stateLabel:"Change Order Status",access:10},{name:"mergeCustomers",stateName:"index.oneCol.mergeCustomers",stateLabel:"Merge Customers",access:10}]},{name:"help",stateLabel:"Help",subMenu:[{name:"manageBugTickets",stateName:"index.oneCol.manageBugTickets",stateLabel:"Manage Bug Tickets",access:11},{name:"manageLogs",stateName:"index.oneCol.manageLogs",stateLabel:"View Logs",access:15},{name:"manageProfileScopes",stateName:"index.oneCol.manageProfileScopes",stateLabel:"Profile Scopes",access:15}]}];return{menu:d}}]),angular.module("app.shared.menu.services.sidebarFactory",[]).factory("sidebarFactory",[function(){var a=[{name:"salesOrders",moduleName:"salesOrders",menu:[{name:"sidebar-healthWise",stateName:"index.twoCols.salesOrders.healthWise",stateLabel:"HealthWise"},{name:"sidebar-orderStatusHistory",stateName:"index.twoCols.salesOrders.orderStatusHistory",stateLabel:"Order Status History"},{name:"sidebar-ooStockRequests",stateName:"index.twoCols.salesOrders.ooStockRequests",stateLabel:"Out of Stock Requests"}]},{name:"wholesale",moduleName:"wholesale",menu:[{name:"sidebar-wholesaleSummary",stateName:"index.twoCols.wholesale.wholesaleSummary",stateLabel:"Wholesale Summary Report"},{name:"sidebar-wholesaleDropShipOrders",stateName:"index.twoCols.wholesale.wholesaleDropShipOrders",stateLabel:"Wholesale Drop Ship Orders Report"}]},{name:"operations",moduleName:"operations",menu:[{name:"sidebar-vitalGreen",stateName:"index.twoCols.operations.vitalGreen",stateLabel:"VitalGreen"}]}];return{sidebars:a}}]),angular.module("app.modules.demo.controllers.customerListController",[]).controller("customerListController",["$scope",function(a){a.customers=[{Name:"Kopp, Kristin",City:"Mountlake Terrace",State:"WA",LastOrderPlaced:"3/2/2015",TotalOrders:"100",LastUpdated:"9/9/2015"},{Name:"Britt, Charles",City:"Aurora",State:"CA",LastOrderPlaced:"3/1/2015",TotalOrders:"12",LastUpdated:"1/12/2015"},{Name:"saunby, colleen",City:"Anacortes",State:"WA",LastOrderPlaced:"3/1/2015",TotalOrders:"34",LastUpdated:"3/3/2015"},{Name:"Calvert, Jason",City:"Ferndale",State:"WA",LastOrderPlaced:"3/12/2014",TotalOrders:"34",LastUpdated:"3/3/2015"},{Name:"ORRIS, JB",City:"Menlo Park",State:"MS",LastOrderPlaced:"10/3/2015",TotalOrders:"12",LastUpdated:"6/8/2015"},{Name:"Simmons, Mark",City:"Neenah",State:"CA",LastOrderPlaced:"3/3/2015",TotalOrders:"12",LastUpdated:"3/3/2015"},{Name:"Leo, Kristin",City:"Malibu",State:"WA",LastOrderPlaced:"1/7/2015",TotalOrders:"76",LastUpdated:"10/7/2015"},{Name:"Nodine, Tony",City:"Madison",State:"MS",LastOrderPlaced:"1/9/2015",TotalOrders:"76",LastUpdated:"12/3/2015"},{Name:"Green, Michael",City:"Orlando",State:"WA",LastOrderPlaced:"1/8/2015",TotalOrders:"12",LastUpdated:"9/3/2015"},{Name:"Kristin, Bob",City:"Mountlake Terrace",State:"WA",LastOrderPlaced:"3/3/2015",TotalOrders:"76",LastUpdated:"3/3/2015"},{Name:"Swistock, Amy E",City:"Santa Clarita",State:"MS",LastOrderPlaced:"3/7/2015",TotalOrders:"123",LastUpdated:"3/9/2015"},{Name:"Simmons, Mark",City:"San Jose",State:"WA",LastOrderPlaced:"3/3/2015",TotalOrders:"34",LastUpdated:"3/4/2015"},{Name:"Lopp, In",City:"Mountlake Terrace",State:"OH",LastOrderPlaced:"3/3/2015",TotalOrders:"23",LastUpdated:"3/3/2015"},{Name:"Hall, Thia",City:"Wayne",State:"WA",LastOrderPlaced:"3/3/2015",TotalOrders:"76",LastUpdated:"3/3/2015"},{Name:"Gary, Gould",City:"Mooreland",State:"CA",LastOrderPlaced:"9/10/2014",TotalOrders:"76",LastUpdated:"3/7/2015"},{Name:"massey, terry",City:"Mountlake Terrace",State:"WA",LastOrderPlaced:"3/3/2015",TotalOrders:"76",LastUpdated:"3/9/2015"},{Name:"K, Kristin",City:"MMooreland",State:"MS",LastOrderPlaced:"2/3/2013",TotalOrders:"23",LastUpdated:"3/9/2015"},{Name:"Dart, Kristin",City:"Wayne",State:"OH",LastOrderPlaced:"3/10/2012",TotalOrders:"76",LastUpdated:"3/3/2015"},{Name:"Cameron, James",City:"Mountlake Terrace",State:"WA",LastOrderPlaced:"3/3/2015",TotalOrders:"23",LastUpdated:"3/9/2015"},{Name:"Lee, Bruce",City:"Orlando",State:"OH",LastOrderPlaced:"1/3/2011",TotalOrders:"121",LastUpdated:"3/11/2015"},{Name:"kalemkiarian, Alice",City:"Wayne",State:"WA",LastOrderPlaced:"3/10/2010",TotalOrders:"56",LastUpdated:"3/11/2015"}]}]),angular.module("app.modules.demo.controllers.customerDetailController",[]).controller("customerDetailController",["$scope",function(a){}]),angular.module("app.modules.demo.controllers.dashboardController",[]).controller("dashboardController",["$scope",function(a){a.monthlySalesData=[{key:"Monthly Sales for 2014",values:[["Jan",1497047],["Feb",1215564],["Mar",1510976],["Apr",1224034],["May",1277504],["Jun",1524390],["Jul",1343615],["Aug",1256049],["Sep",1306882],["Oct",1616512],["Nov",1559062],["Dec",1865756]]}],a.topSellingProducts=[{key:"Top Selling Products",values:[["FGS",9121247],["FGS-01",8121247],["SKU-1",7134247],["SKU-2",6021235],["SKU-3",5001247],["SKU-4",414e4],["SKU-5",4041230],["SKU-6",3123247],["SKU-7",1231232],["SKU-8",768545],["SKU-9",658430],["SKU-10",253642]]}],a.salesNewCustomers=[{key:"Sales by New Customers",values:[["Kopp, Kristin",1231234],["Lee, Bruce",567567],["Jobs, Richard",423423],["Cameron, James",1231231],["Bay, Michel",1277504],["Jack, Brad",342342],["Cooper, Simon",1343615],["Gary, Gould",234234],["John, James",1306882],["Wilshire, Jack",1616512],["White, Walter",123123],["Swarz, Sara",342232]]}],a.salesExistingCustomers=[{key:"Sales by Existing Customers",values:[["Simmons, Mark",423422],["Richrards, Rish",1223454],["Dylon, Bob",343244],["Wick, Jim",234234],["May, Patricia",1277504],["Chippers, Richard",324234],["July, June",1343615],["Apolo, Tim",601233],["Pink, Luke",123167],["Lee, Tom",12312],["Page, Kira",1559062],["Simmons, James",123122]]}];var b=d3.format(">$,.2f");a.valueFormatFunction=function(){return function(a){return b(a)}}}]),angular.module("app.modules.demo.controllers.orderDetailController",[]).controller("orderDetailController",["$scope","toaster",function(a,b){a.orders=[{RowStatus:1,ProcessingStatus:2,Status:"Processed",Agent:"GC",OrderType:"Phone",OrderDate:"9/2/2015",OrderId:"111111",OrderTotal:"$1395.00",ShipTo:"Smith, Bob"},{RowStatus:1,ProcessingStatus:2,Status:"Refund",Agent:"",OrderType:"Phone",OrderDate:"3/2/2010",OrderId:"223234",OrderTotal:"$3265.00",ShipTo:"Gould, Gary"},{RowStatus:1,ProcessingStatus:3,Status:"Refund",Agent:"",OrderType:"Phone",OrderDate:"7/2/2015",OrderId:"312323",OrderTotal:"$235.00",ShipTo:"Gould, Gary"},{RowStatus:2,ProcessingStatus:2,Status:"Processed",Agent:"GC",OrderType:"Phone",OrderDate:"3/2/2015",OrderId:"454532",OrderTotal:"$323.00",ShipTo:"Gould, Gary"},{RowStatus:1,ProcessingStatus:2,Status:"Refund",Agent:"",OrderType:"Phone",OrderDate:"3/2/2015",OrderId:"677898",OrderTotal:"$3235.00",ShipTo:"Smith, Bob"},{RowStatus:3,ProcessingStatus:1,Status:"On Hold",Agent:"",OrderType:"Phone",OrderDate:"6/2/2012",OrderId:"898967",OrderTotal:"$23.00",ShipTo:"Gould, Gary"},{RowStatus:1,ProcessingStatus:2,Status:"Refund",Agent:"",OrderType:"Phone",OrderDate:"3/2/2015",OrderId:"245154",OrderTotal:"$395.00",ShipTo:"Gould, Gary"},{RowStatus:3,ProcessingStatus:2,Status:"Processed",Agent:"GC",OrderType:"Phone",OrderDate:"3/2/2015",OrderId:"145154",OrderTotal:"$295.00",ShipTo:"Gould, Gary"},{RowStatus:1,ProcessingStatus:2,Status:"Refund",Agent:"",OrderType:"Phone",OrderDate:"3/2/2015",OrderId:"545154",OrderTotal:"$392.00",ShipTo:"Smith, Bob"},{RowStatus:1,ProcessingStatus:2,Status:"Processed",Agent:"GC",OrderType:"Phone",OrderDate:"3/2/2015",OrderId:"545154",OrderTotal:"$345.00",ShipTo:"Gould, Gary"},{RowStatus:3,ProcessingStatus:2,Status:"Processed",Agent:"GC",OrderType:"Phone",OrderDate:"3/4/2015",OrderId:"545154",OrderTotal:"$395.00",ShipTo:"Gould, Gary"},{RowStatus:1,ProcessingStatus:3,Status:"Refund",Agent:"",OrderType:"Phone",OrderDate:"3/2/2015",OrderId:"543154",OrderTotal:"$395.00",ShipTo:"Gould, Gary"},{RowStatus:3,ProcessingStatus:1,Status:"On Hold",Agent:"",OrderType:"Phone",OrderDate:"3/4/2015",OrderId:"533454",OrderTotal:"$334.00",ShipTo:"Gould, Gary"},{RowStatus:2,ProcessingStatus:2,Status:"Processed",Agent:"GC",OrderType:"Phone",OrderDate:"3/2/2015",OrderId:"544354",OrderTotal:"$455.00",ShipTo:"Gould, Gary"},{RowStatus:1,ProcessingStatus:2,Status:"Refund",Agent:"",OrderType:"Phone",OrderDate:"9/10/203",OrderId:"543454",OrderTotal:"$3455.00",ShipTo:"Gould, Gary"},{RowStatus:2,ProcessingStatus:2,Status:"Processed",Agent:"GC",OrderType:"Phone",OrderDate:"3/2/2015",OrderId:"535154",OrderTotal:"$3455.00",ShipTo:"Smith, Bob"},{RowStatus:1,ProcessingStatus:3,Status:"Refund",Agent:"",OrderType:"Phone",OrderDate:"3/4/2015",OrderId:"541154",OrderTotal:"$9.00",ShipTo:"Gould, Gary"},{RowStatus:3,ProcessingStatus:2,Status:"Processed",Agent:"GC",OrderType:"Phone",OrderDate:"3/2/2015",OrderId:"545154",
OrderTotal:"$95.00",ShipTo:"Gould, Gary"},{RowStatus:2,ProcessingStatus:2,Status:"Processed",Agent:"GC",OrderType:"Phone",OrderDate:"3/2/2015",OrderId:"525154",OrderTotal:"$395.00",ShipTo:"Gould, Gary"},{RowStatus:1,ProcessingStatus:2,Status:"Processed",Agent:"GC",OrderType:"Phone",OrderDate:"3/2/2015",OrderId:"545153",OrderTotal:"$35.00",ShipTo:"Smith, Bob"}],a.currentCustomer={PermanentlyUpdate:!0,LinkedToAffiliate:"",Company:"VitalChoice",FirstName:"Gary",LastName:"Gould",Address1:"806 Front ST",Address2:"",City:"Lynden",Country:"US",State:"WA",Zip:"98264",Phone:"3606565717",Fax:"US",Email:"gary@g2-designgroup.com",Files:[{UploadDate:"6/3/2014",Description:"Some file",FileName:"fileName.gif"},{UploadDate:"16/3/2013",Description:"Some file 2",FileName:"fileName2.jpg"},{UploadDate:"4/2/2013",Description:"Some file 3",FileName:"fileName3.gif"}],CreditCardApproved:!0,OACApproved:!1,CheckApproved:!1,DefaultPaymentMethod:0,Extraice:!1,Ib:!1,In:!1,Ps:!1,Special:!1,DoNotMail:!1,DoNotRent:!1,SuspendUserAccount:!1,Reason:"",CustomerType:1,TaxExempt:0,Website:"",Tier:0,TradeClass:0,PaymentMethodType:1,SavedPaymentMethod:0},a.openDate=function(b){b.preventDefault(),b.stopPropagation(),a.date.opened=!0},a.dateOptions={formatYear:"yy",startingDay:1},a.date={opened:!1,InceptionDate:new Date},a.$watch("currentCustomer.CustomerType",function(a){2==a&&b.pop("warning","Caution!","Changing customer type value will remove the current affiliate linking with customer.")}),a.Addresses=[{label:"Gary Gould - 806 Front ST (Default)",value:1},{label:"BOB1 SMITH - 1234 ANY STREET",value:2}],a.CurrentAddress=a.Addresses[0],a.notes=[{Date:"3/6/2015",Agent:"GG",Priority:"Normal",Notes:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec rhoncus tristique eleifend. Praesent bibendum aliquam massa hendrerit semper. Curabitur a mi mauris. Nam blandit ullamcorper iaculis. Morbi pharetra, lorem quis tristique luctus, dolor neque laoreet leo, in posuere odio arcu et metus. Maecenas sed augue non metus consectetur facilisis. Aliquam pulvinar nulla eget magna accumsan convallis."},{Date:"2/6/2015",Agent:"GG",Priority:"Normal",Notes:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec rhoncus tristique eleifend. Praesent bibendum aliquam massa hendrerit semper. Curabitur a mi mauris. Nam blandit ullamcorper iaculis. Morbi pharetra, lorem quis tristique luctus, dolor neque laoreet leo, in posuere odio arcu et metus. Maecenas sed augue non metus consectetur facilisis. Aliquam pulvinar nulla eget magna accumsan convallis."},{Date:"1/6/2015",Agent:"GG",Priority:"Normal",Notes:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec rhoncus tristique eleifend. Praesent bibendum aliquam massa hendrerit semper. Curabitur a mi mauris. Nam blandit ullamcorper iaculis. Morbi pharetra, lorem quis tristique luctus, dolor neque laoreet leo, in posuere odio arcu et metus. Maecenas sed augue non metus consectetur facilisis. Aliquam pulvinar nulla eget magna accumsan convallis."},{Date:"3/5/2015",Agent:"GG",Priority:"Normal",Notes:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec rhoncus tristique eleifend. Praesent bibendum aliquam massa hendrerit semper. Curabitur a mi mauris. Nam blandit ullamcorper iaculis. Morbi pharetra, lorem quis tristique luctus, dolor neque laoreet leo, in posuere odio arcu et metus. Maecenas sed augue non metus consectetur facilisis. Aliquam pulvinar nulla eget magna accumsan convallis."},{Date:"3/5/2015",Agent:"GG",Priority:"Normal",Notes:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec rhoncus tristique eleifend. Praesent bibendum aliquam massa hendrerit semper. Curabitur a mi mauris. Nam blandit ullamcorper iaculis. Morbi pharetra, lorem quis tristique luctus, dolor neque laoreet leo, in posuere odio arcu et metus. Maecenas sed augue non metus consectetur facilisis. Aliquam pulvinar nulla eget magna accumsan convallis."},{Date:"3/5/2015",Agent:"GG",Priority:"Normal",Notes:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec rhoncus tristique eleifend. Praesent bibendum aliquam massa hendrerit semper. Curabitur a mi mauris. Nam blandit ullamcorper iaculis. Morbi pharetra, lorem quis tristique luctus, dolor neque laoreet leo, in posuere odio arcu et metus. Maecenas sed augue non metus consectetur facilisis. Aliquam pulvinar nulla eget magna accumsan convallis."},{Date:"13/4/2015",Agent:"GG",Priority:"Normal",Notes:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec rhoncus tristique eleifend. Praesent bibendum aliquam massa hendrerit semper. Curabitur a mi mauris. Nam blandit ullamcorper iaculis. Morbi pharetra, lorem quis tristique luctus, dolor neque laoreet leo, in posuere odio arcu et metus. Maecenas sed augue non metus consectetur facilisis. Aliquam pulvinar nulla eget magna accumsan convallis."},{Date:"10/4/2015",Agent:"GG",Priority:"Normal",Notes:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec rhoncus tristique eleifend. Praesent bibendum aliquam massa hendrerit semper. Curabitur a mi mauris. Nam blandit ullamcorper iaculis. Morbi pharetra, lorem quis tristique luctus, dolor neque laoreet leo, in posuere odio arcu et metus. Maecenas sed augue non metus consectetur facilisis. Aliquam pulvinar nulla eget magna accumsan convallis."},{Date:"5/4/2015",Agent:"GG",Priority:"Normal",Notes:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec rhoncus tristique eleifend. Praesent bibendum aliquam massa hendrerit semper. Curabitur a mi mauris. Nam blandit ullamcorper iaculis. Morbi pharetra, lorem quis tristique luctus, dolor neque laoreet leo, in posuere odio arcu et metus. Maecenas sed augue non metus consectetur facilisis. Aliquam pulvinar nulla eget magna accumsan convallis."},{Date:"1/4/2015",Agent:"GG",Priority:"Normal",Notes:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec rhoncus tristique eleifend. Praesent bibendum aliquam massa hendrerit semper. Curabitur a mi mauris. Nam blandit ullamcorper iaculis. Morbi pharetra, lorem quis tristique luctus, dolor neque laoreet leo, in posuere odio arcu et metus. Maecenas sed augue non metus consectetur facilisis. Aliquam pulvinar nulla eget magna accumsan convallis."},{Date:"4/3/2015",Agent:"GG",Priority:"Normal",Notes:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec rhoncus tristique eleifend. Praesent bibendum aliquam massa hendrerit semper. Curabitur a mi mauris. Nam blandit ullamcorper iaculis. Morbi pharetra, lorem quis tristique luctus, dolor neque laoreet leo, in posuere odio arcu et metus. Maecenas sed augue non metus consectetur facilisis. Aliquam pulvinar nulla eget magna accumsan convallis."},{Date:"3/3/2015",Agent:"GG",Priority:"Normal",Notes:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec rhoncus tristique eleifend. Praesent bibendum aliquam massa hendrerit semper. Curabitur a mi mauris. Nam blandit ullamcorper iaculis. Morbi pharetra, lorem quis tristique luctus, dolor neque laoreet leo, in posuere odio arcu et metus. Maecenas sed augue non metus consectetur facilisis. Aliquam pulvinar nulla eget magna accumsan convallis."},{Date:"28/2/2015",Agent:"GG",Priority:"Normal",Notes:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec rhoncus tristique eleifend. Praesent bibendum aliquam massa hendrerit semper. Curabitur a mi mauris. Nam blandit ullamcorper iaculis. Morbi pharetra, lorem quis tristique luctus, dolor neque laoreet leo, in posuere odio arcu et metus. Maecenas sed augue non metus consectetur facilisis. Aliquam pulvinar nulla eget magna accumsan convallis."},{Date:"3/2/2015",Agent:"GG",Priority:"Normal",Notes:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec rhoncus tristique eleifend. Praesent bibendum aliquam massa hendrerit semper. Curabitur a mi mauris. Nam blandit ullamcorper iaculis. Morbi pharetra, lorem quis tristique luctus, dolor neque laoreet leo, in posuere odio arcu et metus. Maecenas sed augue non metus consectetur facilisis. Aliquam pulvinar nulla eget magna accumsan convallis."},{Date:"13/1/2015",Agent:"GG",Priority:"Normal",Notes:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec rhoncus tristique eleifend. Praesent bibendum aliquam massa hendrerit semper. Curabitur a mi mauris. Nam blandit ullamcorper iaculis. Morbi pharetra, lorem quis tristique luctus, dolor neque laoreet leo, in posuere odio arcu et metus. Maecenas sed augue non metus consectetur facilisis. Aliquam pulvinar nulla eget magna accumsan convallis."}],a.MergeDirection=1}]),angular.module("app.modules.demo.controllers.modalAddSubProductController",[]).controller("modalAddSubProductController",["$scope","$uibModalInstance","items",function(a,b,c){a.items=c,a.ok=function(){b.close()},a.cancel=function(){b.close()}}]),angular.module("app.modules.demo.controllers.manageRecipesController",[]).controller("manageRecipesController",["$scope",function(a){a.toggle=function(a){a.toggle()},a.hasChildren=function(a){return a.childNodesCount()>0},a.treeOptions={accept:function(a,b,c){var d=a.$modelValue,e=b.$element.attr("data-type");return d.type==e}},a.countries=[{Name:"United",Code:"US",type:"country",states:[{Name:"Alabama",Code:"AL",type:"US"},{Name:"Alabama23",Code:"AL2",type:"US"},{Name:"Alabama24",Code:"AL2",type:"US"},{Name:"Alabama25",Code:"AL2",type:"US"}]},{Name:"Candada",Code:"CA",type:"country",states:[{Name:"Alberta",Code:"AB",type:"CA"},{Name:"Alberta2",Code:"AB2",type:"CA"}]},{Name:"USSR",Code:"USSR",type:"country",states:[{Name:"USSRAlberta",Code:"AB",type:"USSR"},{Name:"USSRAlberta2",Code:"AB2",type:"USSR"}]}],a.categories=[{label:"Canned & Pouched Wild Seafood",status:1,checked:!1,children:[{label:"Wild Canned Sockeye Salmon",status:1,checked:!1,children:[]},{label:"Canned Wild Albacore Tuna (Troll-Caught)",status:1,checked:!1,children:[]},{label:"Canned Wild Portuguese Sardines",status:1,checked:!0,children:[]},{label:"Canned Wild Pacific Dungeness Crab",status:2,checked:!1,children:[]},{label:"Smoked Mussels (Cultured)",status:1,checked:!1,children:[]},{label:"Pouched Wild Tuna &amp; Salmon",status:1,checked:!1,children:[]},{label:"Canned Wild Portuguese Mackerel",status:1,checked:!0,children:[]},{label:"Canned Wild Seafood Samplers",status:1,checked:!1,children:[]},{label:"Canned Wild Fish - No Salt Added",status:1,checked:!1,children:[]},{label:"Canned Wild Portuguese Sardine Fillets",status:1,checked:!1,children:[]},{label:"Canned Wild Fish - Kosher",status:1,checked:!1,children:[]},{label:"Canned Wild Salmon Meal Kit",status:1,checked:!1,children:[]},{label:"Pouched Wild Albacore Tuna (Troll-Caught)",status:1,checked:!1,children:[]}]},{label:"Cookbooks & Cooking Accessories",status:1,checked:!1,children:[{label:"Favorite Books & Cookbooks",status:1,checked:!1,children:[]},{label:"Grilling Planks",status:1,checked:!0,children:[]},{label:"Canned Fish Accessories",status:1,checked:!1,children:[]},{label:"Signature Water Bottle",status:1,checked:!1,children:[]},{label:"Vital Choice Apron",status:1,checked:!0,children:[]},{label:"Tea Accessories",status:1,checked:!1,children:[]}]},{label:"Frozen Seafood Samplers",status:1,checked:!0,children:[]},{label:"Organic Foods & Grass-Fed Beef",status:1,checked:!1,children:[{label:"Farmhouse Culture Kraut & Kimchi",status:1,checked:!1,children:[]},{label:"Organic Grass-Fed Beef by Skagit River Ranch",status:1,checked:!1,children:[{label:"Organic Grass-Fed Wagyu Beef Chuck Roast",status:1,checked:!1,children:[]},{label:"Organic Grass-Fed Wagyu Beef Burger Patties - 5.3 oz",status:1,checked:!0,children:[]},{label:"Organic Grass-Fed Wagyu Beef Tenderloin Fillets",status:1,checked:!1,children:[]},{label:"Organic Grass-Fed Wagyu Beef Sampler",status:2,checked:!1,children:[]},{label:"Organic Grass-Fed Wagyu Beef - Ground",status:1,checked:!1,children:[]},{label:"Organic Grass-Fed Wagyu Beef Stir-Fry Strips",status:1,checked:!1,children:[]},{label:"Organic Grass-Fed Wagyu Beef Ribeye Steaks",status:1,checked:!1,children:[]}]}]}],a.testEdit=function(){alert("Test Edit handler")},a.testDelete=function(){alert("Test Delete handler")}}]),angular.module("app.modules.demo.controllers.uploadController",[]).controller("uploadController",["$scope","Upload",function(a,b){a.$watch("files",function(){a.upload(a.files)}),a.log="",a.upload=function(c){if(c&&c.length)for(var d=0;d<c.length;d++){var e=c[d];b.upload({url:"http://localhost:51805/api/file/AddFiles",fields:{"/":""},file:e}).progress(function(b){var c=parseInt(100*b.loaded/b.total);a.log="progress: "+c+"% "+b.config.file.name+"\n"+a.log}).success(function(b,c,d,e){a.log="file "+e.file.name+"uploaded. Response: "+JSON.stringify(b)+"\n"+a.log,a.$apply()})}}}]),angular.module("app.modules.users.controllers.userManagementController",[]).controller("userManagementController",["$scope","userService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g){function h(){b.getUsers(a.filter,a.refreshTracker).success(function(b){b.Success?(a.users=b.Data.Items,a.totalItems=b.Data.Count):c.pop("error","Error!","Can't get access to the users")}).error(function(a){c.pop("error","Error!","Server error ocurred")})}function i(a,b){d.open("app/modules/users/partials/addEditUser.html","addEditUserController",{user:a,editMode:b,thenCallback:function(){h()}})}function j(){a.filter={SearchText:"",Paging:{PageIndex:1,PageItemCount:100},Sorting:g.resolve(h,"UpdatedDate","Desc")},h()}a.refreshTracker=f("refresh"),a.deleteTracker=f("delete"),a.editTracker=f("edit"),a.addTracker=f("add"),a.pageChanged=function(){h()},a.filterUsers=function(){a.filter.Paging.PageIndex=1,h()},a.open=function(d,e){var f={};d?b.getUser(e,a.editTracker).success(function(a){if(a.Success)i(a.Data,d);else{var b="";a.Messages?$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}):b="Can't get user",c.pop("error","Error!",b,null,"trustedHtml")}}).error(function(a){c.pop("error","Error!","Server error ocurred")}):b.createUserPrototype(a.addTracker).success(function(a){a.Success?(f=a.Data,i(a.Data,d)):c.pop("error","Error!","Can't create user")}).error(function(a){c.pop("error","Error!","Server error ocurred")})},a["delete"]=function(d,f){e.confirm(function(){b.deleteUser(f,a.deleteTracker).success(function(a){if(a.Success)c.pop("success","Success!","Successfully deleted");else{var b="";a.Messages?$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}):b="Can't delete user",c.pop("error","Error!",b,null,"trustedHtml")}h()}).error(function(a){c.pop("error","Error!","Server error ocurred"),h()})},"Are you sure you want to delete "+d+" user?")},j()}]),angular.module("app.modules.users.controllers.addEditUserController",[]).controller("addEditUserController",["$scope","$uibModalInstance","data","userService","toaster","promiseTracker","$rootScope",function(a,b,c,d,e,f,g){function h(d){if(d.Success)e.pop("success","Success!","Successfully saved"),b.close(),a.editMode&&a.signedInUser&&(g.currentUser.Email=a.user.Email,g.currentUser.FirstName=a.user.FirstName,g.currentUser.LastName=a.user.LastName);else{var f="";d.Messages&&(a.forms.userForm.submitted=!0,a.serverMessages=new ServerMessages(d.Messages),$.each(d.Messages,function(b,c){c.Field&&a.forms.userForm[c.Field.toLowerCase()]&&a.forms.userForm[c.Field.toLowerCase()].$setValidity("server",!1),f+=c.Message+"<br />"})),e.pop("error","Error!",f,null,"trustedHtml")}c.thenCallback()}function i(a){e.pop("error","Error!","Server error occured"),c.thenCallback()}function j(){a.user=c.user,a.forms={},a.signedInUser=a.user.Email===g.currentUser.Email,a.editMode=c.editMode,a.userStatuses=$.grep(g.ReferenceData.UserStatuses,function(a){return 0!==a.Key}),a.save=function(){if($.each(a.forms.userForm,function(a,b){b&&b.$name==a&&b.$setValidity("server",!0)}),a.forms.userForm.$valid){if(!a.user.RoleIds||0===a.user.RoleIds.length)return void e.pop("error","Error!",g.getValidationMessage("ValidationMessages.AtLeastOneRole"));a.saving=!0,a.editMode?d.updateUser(a.user,a.saveTracker).success(function(a){h(a)}).error(function(a){i(a)}):d.createUser(a.user,a.saveTracker).success(function(a){h(a)}).error(function(a){i(a)})}else a.forms.userForm.submitted=!0},a.resend=function(){d.resendActivation(a.user.PublicId,a.resendTracker).success(function(a){if(a.Success)e.pop("success","Success!","Successfully sent"),b.close();else{var d="";a.Messages&&$.each(a.Messages,function(a,b){d+=b.Message+"<br />"}),e.pop("error","Error!",d,null,"trustedHtml")}c.thenCallback()}).error(function(){e.pop("error","Error!","Server error occured"),c.thenCallback()})},a.resetPassword=function(){d.resetPassword(a.user.PublicId,a.resetTracker).success(function(a){if(a.Success)e.pop("success","Success!","Successfully reset"),b.close();else{var d="";a.Messages&&$.each(a.Messages,function(a,b){d+=b.Message+"<br />"}),e.pop("error","Error!",d,null,"trustedHtml")}c.thenCallback()}).error(function(){e.pop("error","Error!","Server error occured"),c.thenCallback()})},a.cancel=function(){b.close()},d.getAdminTeams(a.refreshTracker).success(function(b){b.Success?(a.adminTeams=b.Data,a.adminTeams.splice(0,0,{Id:null,Name:"Not Specified"})):i(b)}).error(function(a){i(a)})}a.refreshTracker=f("refresh"),a.saveTracker=f("save"),a.resendTracker=f("resend"),a.resetTracker=f("reset"),a.toggleRoleSelection=function(b){a.user.RoleIds||(a.user.RoleIds=[]);var c=a.user.RoleIds.indexOf(b);c>-1?a.user.RoleIds.splice(c,1):a.user.RoleIds.push(b)},j()}]),angular.module("app.modules.users",["app.modules.users.controllers.addEditUserController","app.modules.users.controllers.userManagementController"]).config(["$stateProvider","$urlRouterProvider",function(a,b){a.state("index.oneCol.manageUsers",{url:"/users/manage",templateUrl:"app/modules/users/partials/usersList.html",controller:"userManagementController"})}]),angular.module("app.modules.content.controllers.mastersController",[]).controller("mastersController",["$scope","$rootScope","$state","contentService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h,i){function j(a){var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),e.pop("error","Error!",b,null,"trustedHtml")}function k(){d.getMasterContentItems(a.filter,a.refreshTracker).success(function(b){b.Success?(a.masters=b.Data,a.loaded=!0):j(b)}).error(function(a){j(a)})}function l(){a.types=Object.clone(b.ReferenceData.ContentTypes),a.types.splice(0,0,{Key:null,Text:"All"}),a.filter={Type:null,Sorting:i.resolve(k,"Updated","Desc")},a.loaded=!1,k()}a.refreshTracker=h("refresh"),a.deleteTracker=h("delete"),a.filterMasters=function(){k()},a.open=function(a){a?c.go("index.oneCol.masterDetail",{id:a}):c.go("index.oneCol.addNewMaster")},a["delete"]=function(b){g.confirm(function(){d.deleteMasterContentItem(b,a.deleteTracker).success(function(a){a.Success?(e.pop("success","Success!","Successfully deleted."),k()):j(a)}).error(function(a){j(a)})},"Are you sure you want to delete this master template?")},l()}]),angular.module("app.modules.content.controllers.masterManageController",[]).controller("masterManageController",["$scope","$rootScope","$stateParams","contentService","settingService","toaster","confirmUtil","promiseTracker",function(a,b,c,d,e,f,g,h){function i(){if(a.master&&a.master.Id){var b={};b.service=e,b.tracker=a.refreshTracker,b.idObject=a.master.Id,b.idObjectType=17,a.$broadcast("objectHistorySection#in#refresh",b)}}function j(a,b){var c=this;c.Id=a.Id,c.Name=a.Name,c.IsSelected=!1,$.each(b,function(a,b){return c.Id==b?(c.IsSelected=!0,!1):void 0})}function k(b){if(b.Success)f.pop("success","Success!","Successfully saved."),a.id=b.Data,a.master.Id=b.Data,a.IsDefaultInDB=a.master.IsDefault,i();else{var c="";b.Messages&&(a.detailsTab.active=!0,$.each(b.Messages,function(a,b){c+=b.Message+"<br />"})),f.pop("error","Error!",c,null,"trustedHtml")}}function l(a){f.pop("error","Error!","Server error occured")}function m(){a.id=c.id?c.id:0,a.types=Object.clone(b.ReferenceData.ContentTypes),a.ontentProcessors=Object.clone(b.ReferenceData.ContentProcessors),a.detailsTab={active:!0},a.loaded=!1,a.forms={},d.getMasterContentItem(a.id,a.refreshTracker).success(function(b){b.Success?(a.master=b.Data,a.id&&(a.IsDefaultInDB=a.master.IsDefault),n(a.master.ProcessorIds),a.loaded=!0,i()):l(b)}).error(function(a){l(a)}),a.aceChanged=function(a){}}function n(b){var c=[];$.each(a.ontentProcessors,function(a,d){c.push(new j(d,b))}),a.processors=c}function o(){var b=[];return $.each(a.processors,function(a,c){c.IsSelected&&b.push(c.Id)}),b}a.refreshTracker=h("get"),a.editTracker=h("edit"),a.save=function(){a.forms.masterForm.$valid?(a.master.ProcessorIds=o(),d.updateMasterContentItem(a.master,a.editTracker).success(function(a){k(a)}).error(function(a){l(a)})):(a.forms.masterForm.submitted=!0,a.detailsTab.active=!0)},a.cancel=function(){},m()}]),angular.module("app.modules.content.controllers.recipesController",[]).controller("recipesController",["$scope","$state","contentService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h){function i(a,b,c){var d=this;if(c)d.Id=null,d.Name="All";else{d.Id=a.Id;for(var e="",f=2;b>=f;f++)e+="----";d.Name=e+a.Name}}function j(a){d.pop("error","Error!","Server error occured")}function k(){c.getRecipes(a.filter,a.refreshTracker).success(function(b){b.Success?(a.recipes=b.Data.Items,a.totalItems=b.Data.Count,a.loaded=!0):j(b)}).error(function(a){j(a)})}function l(){c.getCategoriesTree({Type:1},a.refreshTracker).success(function(a){a.Success?(m(a.Data),k()):j(a)}).error(function(a){j(a)})}function m(b){var c=[];n(b,c,0,!0),c.splice(1,0,new i({Id:-1,Name:"Uncategorized"})),a.categories=c}function n(a,b,c,d){b.push(new i(a,c,d)),$.each(a.SubItems,function(a,d){n(d,b,c+1)})}function o(){a.filter={Name:"",CategoryId:null,Paging:{PageIndex:1,PageItemCount:100},Sorting:h.resolve(k,"Updated","Desc")},a.loaded=!1,l()}a.refreshTracker=g("refresh"),a.deleteTracker=g("delete"),a.filterRecipes=function(){a.filter.Paging.PageIndex=1,k()},a.pageChanged=function(){k()},a.open=function(a){a?b.go("index.oneCol.recipeDetail",{id:a}):b.go("index.oneCol.addNewRecipe")},a["delete"]=function(b){f.confirm(function(){c.deleteRecipe(b,a.deleteTracker).success(function(a){a.Success?(d.pop("success","Success!","Successfully deleted."),k()):j(a)}).error(function(a){j(a)})},"Are you sure you want to delete this recipe?")},o()}]),angular.module("app.modules.content.controllers.recipeManageController",[]).controller("recipeManageController",["$scope","$rootScope","$state","$stateParams","contentService","settingService","toaster","confirmUtil","promiseTracker",function(a,b,c,d,e,f,g,h,i){function j(){if(a.recipe&&a.recipe.Id){var b={};b.service=f,b.tracker=a.refreshTracker,b.idObject=a.recipe.Id,b.idObjectType=10,a.$broadcast("objectHistorySection#in#refresh",b)}}function k(b){if(b.Success)g.pop("success","Success!","Successfully saved."),a.id=b.Data.Id,a.recipe.Id=b.Data.Id,a.recipe.MasterContentItemId=b.Data.MasterContentItemId,a.previewUrl=a.baseUrl.format(a.recipe.Url),j();else{var c="";if(b.Messages){a.forms.recipeForm.submitted=!0,a.forms.crossessubmitted=!0,a.forms.relatedsubmitted=!0,a.serverMessages=new ServerMessages(b.Messages);var d=null;$.each(b.Messages,function(b,e){if(e.Field)if(e.Field.indexOf(".")>-1){var f=e.Field.split(".");a.forms[f[0]][f[1]][f[2]].$setValidity("server",!1),d=f[0]}else $.each(a.forms,function(a,b){return b&&"boolean"!=typeof b&&void 0!=b[e.Field]?(b[e.Field].$setValidity("server",!1),null==d&&(d=a),!1):void 0});c+=e.Message+"<br />"}),d&&t(d)}g.pop("error","Error!",c,null,"trustedHtml")}}function l(a){g.pop("error","Error!","Server error occured")}function m(){a.id=d.id?d.id:0,a.descriptionExpanded=!1,a.toogleEditorState=function(b){a[b]=!a[b]},a.baseUrl="http://"+b.ReferenceData.PublicHost+"/recipe/{0}?preview=true",a.previewUrl=null,a.detailsTab={index:1,formName:"details"},a.crossSellProductsAndVideosTab={index:2,formName:"crossSellRelatedRecipes"},a.options={},a.options.activeTabIndex=a.detailsTab.index;var c=[];c.push(a.detailsTab),c.push(a.crossSellProductsAndVideosTab),a.tabs=c,a.forms={},a.youTubeBaseUrl="https://www.youtube.com/watch?v={0}";var f=function(){$.each(a.forms,function(a,b){b&&"boolean"!=typeof b&&("RelatedRecipes"==a||"CrossSellRecipes"==a?$.each(b,function(a,b){0==a.indexOf("i")&&$.each(b,function(a,b){b&&b.$name==a&&b.$setValidity("server",!0)})}):$.each(b,function(a,b){b&&b.$name==a&&b.$setValidity("server",!0)}))})};a.save=function(){f();var b=!0;if($.each(a.forms,function(a,c){return c&&"boolean"!=typeof c&&!c.$valid&&"submitted"!=a&&"crossessubmitted"!=a&&"relatedsubmitted"!=a?(b=!1,t(a),!1):void 0}),b){var c=[];q(a.rootCategory,c),a.recipe.CategoryIds=c,u(a.recipe.CrossSellRecipes),u(a.recipe.RelatedRecipes),e.updateRecipe(a.recipe,a.editTracker).success(function(a){k(a)}).error(function(a){l(a)})}else a.forms.recipeForm.submitted=!0,a.forms.crossessubmitted=!0,a.forms.relatedsubmitted=!0},e.getCategoriesTree({Type:1},a.refreshTracker).success(function(b){b.Success?(a.rootCategory=b.Data,e.getRecipeSettings(a.refreshTracker).success(function(b){b.Success?(a.recipeDefaults=b.Data,o()):l(b)}).error(function(a){l(a)})):l(b)}).error(function(a){l(a)})}function n(){e.getRecipe(a.id,a.refreshTracker).success(function(b){b.Success?(a.recipe=b.Data,a.recipe.Url&&(a.previewUrl=a.baseUrl.format(a.recipe.Url)),a.recipe.MasterContentItemId||(a.recipe.MasterContentItemId=a.MasterContentItemId),p(a.rootCategory,a.recipe.CategoryIds),s(),j()):l(b)}).error(function(a){l(a)})}function o(){e.getMasterContentItems({Type:2}).success(function(b){if(b.Success){a.masters=b.Data;var c=!1;$.each(a.masters,function(b,d){(d.IsDefault||1==a.masters.length)&&(c=!0,a.MasterContentItemId=d.Id)}),c||(a.MasterContentItemId=a.masters[0].Id),a.MastersLoaded=!0,n()}else l(b)}).error(function(a){l(a)})}function p(a,b){a.IsSelected=!1,$.each(b,function(b,c){a.Id==c&&(a.IsSelected=!0)}),$.each(a.SubItems,function(a,c){p(c,b)})}function q(a,b){a.IsSelected&&b.push(a.Id),$.each(a.SubItems,function(a,c){q(c,b)})}function r(b){var c=[],d=a.recipe[b];$.each(d,function(a,b){c.push(b.IdProduct)});var e={};e.name=b,e.blockIds=c,a.$broadcast("productsSearch#in#setBlockIds",e)}function s(){a.$watchCollection("recipe.RecipesToProducts",function(){r("RecipesToProducts")}),r("RecipesToProducts")}function t(b){$.each(a.tabs,function(c,d){var e="";return 0==b.indexOf("recipeForm")&&(e="details"),0==b.indexOf("CrossSellRecipes")&&(e="crossSellRelatedRecipes"),0==b.indexOf("RelatedRecipes")&&(e="crossSellRelatedRecipes"),d.formName==e?(a.options.activeTabIndex=d.index,!1):void 0})}function u(a){$.each(a,function(a,b){b.InUse||(b.Image=null,b.Url=null,b.Title=null,void 0!==b.Subtitle&&(b.Subtitle=null))})}a.refreshTracker=i("get"),a.editTracker=i("edit"),a.updateCategoriesCollapsed=function(b){b?a.$broadcast("angular-ui-tree:expand-all"):a.$broadcast("angular-ui-tree:collapse-all"),a.categoriesExpanded=b},a.goToMaster=function(a){c.go("index.oneCol.masterDetail",{id:a})},a.$on("productsSearch#out#addItems",function(b,c){var d=a.recipe[c.name];if(d&&c.items){var e=[];$.each(c.items,function(a,b){var c=!0;if($.each(d,function(a,d){return b.Id==d.IdProduct?void(c=!1):void 0}),c){var f={};f.IdProduct=b.ProductId,f.ShortProductInfo={},f.ShortProductInfo.ProductName=b.Name,e.push(f)}}),$.each(e,function(a,b){d.push(b)})}}),a.deleteRecipesToProducts=function(b){a.recipe.RecipesToProducts.splice(b,1)},a.setCustom=function(a){a.InUse=!0},a.removeCustom=function(a){a.InUse=!1},a.toggleOpen=function(a,b){a.IsOpen=!a.IsOpen},m()}]),angular.module("app.modules.content.controllers.recipeCategoriesController",[]).controller("recipeCategoriesController",["$scope","$state","$stateParams","contentService","toaster","modalUtil","confirmUtil","promiseTracker",function(a,b,c,d,e,f,g,h){function i(a){var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),e.pop("error","Error!",b,null,"trustedHtml")}function j(){d.getCategoriesTree({Type:1},a.refreshTracker).success(function(b){b.Success?(a.rootCategory=b.Data,a.categoriesExpanded=!0,a.loaded=!0):i(b)}).error(function(a){i(a)})}function k(){a.mode=c.mode,a.id=c.id,a.loaded=!1,j()}function l(b){m(a.rootCategory,b)}function m(a,b){var c=null;$.each(a.SubItems,function(a,d){return d.Id==b?(c=a,!1):void 0}),null!=c?a.SubItems.splice(c,1):$.each(a.SubItems,function(a,c){m(c,b)})}a.refreshTracker=h("refresh"),a.editTracker=h("edit"),a.deleteTracker=h("delete"),a.updateCategoriesCollapsed=function(b){b?a.$broadcast("angular-ui-tree:expand-all"):a.$broadcast("angular-ui-tree:collapse-all"),a.categoriesExpanded=b},a.open=function(a){b.go("index.oneCol.recipeCategoryDetail",{id:a})},a.add=function(a){b.go("index.oneCol.addNewRecipeCategory",{categoryid:a})},a["delete"]=function(b){g.confirm(function(){d.deleteCategory(b,a.deleteTracker).success(function(a){a.Success?(e.pop("success","Success!","Successfully deleted."),l(b)):i(a)}).error(function(a){i(a)})},"Are you sure you want to delete this category?")},a.save=function(){d.updateCategoriesTree(a.rootCategory,a.editTracker).success(function(a){a.Success?e.pop("success","Success!","Successfully saved."):i(a)}).error(function(a){i(a)})},a.cancel=function(){"list"==a.mode&&b.go("index.oneCol.manageRecipes"),"edit"==a.mode&&(a.id?b.go("index.oneCol.recipeDetail",{id:a.id}):b.go("index.oneCol.addNewRecipe"))},k()}]),angular.module("app.modules.content.controllers.recipeCategoryManageController",[]).controller("recipeCategoryManageController",["$scope","$rootScope","$state","$stateParams","contentService","settingService","toaster","confirmUtil","promiseTracker",function(a,b,c,d,e,f,g,h,i){function j(){if(a.recipeCategory&&a.recipeCategory.Id){var b={};b.service=f,b.tracker=a.refreshTracker,b.idObject=a.recipeCategory.Id,b.idObjectType=12,a.$broadcast("objectHistorySection#in#refresh",b)}}function k(b){if(b.Success)g.pop("success","Success!","Successfully saved."),a.id=b.Data.Id,a.recipeCategory.Id=b.Data.Id,a.recipeCategory.MasterContentItemId=b.Data.MasterContentItemId,a.previewUrl=a.baseUrl.format(a.recipeCategory.Url),j();else{var c="";b.Messages&&(a.forms.form.submitted=!0,a.detailsTab.active=!0,a.serverMessages=new ServerMessages(b.Messages),$.each(b.Messages,function(b,d){d.Field&&a.forms.form[d.Field].$setValidity("server",!1),c+=d.Message+"<br />"})),g.pop("error","Error!",c,null,"trustedHtml")}}function l(a){g.pop("error","Error!","Server error occured")}function m(){a.id=d.id?d.id:0,a.baseUrl="http://"+b.ReferenceData.PublicHost+"/recipes/{0}?preview=true",a.previewUrl=null,a.detailsTab={active:!0},a.loaded=!1,a.forms={},o()}function n(){e.getCategory(a.id,a.refreshTracker).success(function(b){b.Success?(a.recipeCategory=b.Data,a.recipeCategory.Type=1,a.recipeCategory.Url&&(a.previewUrl=a.baseUrl.format(a.recipeCategory.Url)),a.recipeCategory.MasterContentItemId||(a.recipeCategory.MasterContentItemId=a.MasterContentItemId),d.categoryid&&(a.recipeCategory.ParentId=d.categoryid),a.loaded=!0,j()):l(b)}).error(function(a){l(a)})}function o(){e.getMasterContentItems({Type:1}).success(function(b){if(b.Success){a.masters=b.Data;var c=!1;$.each(a.masters,function(b,d){(d.IsDefault||1==a.masters.length)&&(c=!0,a.MasterContentItemId=d.Id)}),c||(a.MasterContentItemId=a.masters[0].Id),a.MastersLoaded=!0,n()}else l(b)}).error(function(a){l(a)})}a.refreshTracker=i("get"),a.editTracker=i("edit"),a.save=function(){$.each(a.forms.form,function(a,b){b&&b.$name==a&&b.$setValidity("server",!0)}),a.forms.form.$valid?e.updateCategory(a.recipeCategory,a.editTracker).success(function(a){k(a)}).error(function(a){l(a)}):(a.forms.form.submitted=!0,a.detailsTab.active=!0)},a.goToMaster=function(a){c.go("index.oneCol.masterDetail",{id:a})},m()}]),angular.module("app.modules.content.controllers.faqsController",[]).controller("faqsController",["$scope","$state","contentService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h){
function i(a,b,c){var d=this;if(c)d.Id=null,d.Name="All";else{d.Id=a.Id;for(var e="",f=2;b>=f;f++)e+="----";d.Name=e+a.Name}}function j(a){d.pop("error","Error!","Server error occured")}function k(){c.getFAQs(a.filter,a.refreshTracker).success(function(b){b.Success?(a.faqs=b.Data.Items,a.totalItems=b.Data.Count,a.loaded=!0):j(b)}).error(function(a){j(a)})}function l(){c.getCategoriesTree({Type:5},a.refreshTracker).success(function(a){a.Success?(m(a.Data),k()):j(a)}).error(function(a){j(a)})}function m(b){var c=[];n(b,c,0,!0),c.splice(1,0,new i({Id:-1,Name:"Uncategorized"})),a.categories=c}function n(a,b,c,d){b.push(new i(a,c,d)),$.each(a.SubItems,function(a,d){n(d,b,c+1)})}function o(){a.filter={Name:"",CategoryId:null,Paging:{PageIndex:1,PageItemCount:100},Sorting:h.resolve(k,"Updated","Desc")},a.loaded=!1,l()}a.refreshTracker=g("refresh"),a.deleteTracker=g("delete"),a.filterFaqs=function(){a.filter.Paging.PageIndex=1,k()},a.pageChanged=function(){k()},a.open=function(a){a?b.go("index.oneCol.faqDetail",{id:a}):b.go("index.oneCol.addNewFaq")},a["delete"]=function(b){f.confirm(function(){c.deleteFAQ(b,a.deleteTracker).success(function(a){a.Success?(d.pop("success","Success!","Successfully deleted."),k()):j(a)}).error(function(a){j(a)})},"Are you sure you want to delete this faq item?")},o()}]),angular.module("app.modules.content.controllers.faqManageController",[]).controller("faqManageController",["$scope","$rootScope","$state","$stateParams","contentService","settingService","toaster","confirmUtil","promiseTracker",function(a,b,c,d,e,f,g,h,i){function j(){if(a.faq&&a.faq.Id){var b={};b.service=f,b.tracker=a.refreshTracker,b.idObject=a.faq.Id,b.idObjectType=9,a.$broadcast("objectHistorySection#in#refresh",b)}}function k(b){if(b.Success)g.pop("success","Success!","Successfully saved."),a.id=b.Data.Id,a.faq.Id=b.Data.Id,a.faq.MasterContentItemId=b.Data.MasterContentItemId,a.previewUrl=a.baseUrl.format(a.faq.Url),j();else{var c="";b.Messages&&(a.forms.faqForm.submitted=!0,a.detailsTab.active=!0,a.serverMessages=new ServerMessages(b.Messages),$.each(b.Messages,function(b,d){d.Field&&a.forms.faqForm[d.Field].$setValidity("server",!1),c+=d.Message+"<br />"})),g.pop("error","Error!",c,null,"trustedHtml")}}function l(a){g.pop("error","Error!","Server error occured")}function m(){a.id=d.id?d.id:0,a.descriptionExpanded=!1,a.toogleEditorState=function(b){a[b]=!a[b]},a.baseUrl="http://"+b.ReferenceData.PublicHost+"/faq/{0}?preview=true",a.previewUrl=null,a.detailsTab={active:!0},a.loaded=!1,a.forms={},a.save=function(){if($.each(a.forms.faqForm,function(a,b){b&&b.$name==a&&b.$setValidity("server",!0)}),a.forms.faqForm.$valid){var b=[];q(a.rootCategory,b),a.faq.CategoryIds=b,e.updateFAQ(a.faq,a.editTracker).success(function(a){k(a)}).error(function(a){l(a)})}else a.forms.faqForm.submitted=!0,a.detailsTab.active=!0},e.getCategoriesTree({Type:5},a.refreshTracker).success(function(b){b.Success?(a.rootCategory=b.Data,o()):l(b)}).error(function(a){l(a)})}function n(){e.getFAQ(a.id,a.refreshTracker).success(function(b){b.Success?(a.faq=b.Data,a.faq.Url&&(a.previewUrl=a.baseUrl.format(a.faq.Url)),a.faq.MasterContentItemId||(a.faq.MasterContentItemId=a.MasterContentItemId),p(a.rootCategory,a.faq.CategoryIds),a.loaded=!0,j()):l(b)}).error(function(a){l(a)})}function o(){e.getMasterContentItems({Type:6}).success(function(b){if(b.Success){a.masters=b.Data;var c=!1;$.each(a.masters,function(b,d){(d.IsDefault||1==a.masters.length)&&(c=!0,a.MasterContentItemId=d.Id)}),c||(a.MasterContentItemId=a.masters[0].Id),a.MastersLoaded=!0,n()}else l(b)}).error(function(a){l(a)})}function p(a,b){a.IsSelected=!1,$.each(b,function(b,c){a.Id==c&&(a.IsSelected=!0)}),$.each(a.SubItems,function(a,c){p(c,b)})}function q(a,b){a.IsSelected&&b.push(a.Id),$.each(a.SubItems,function(a,c){q(c,b)})}a.refreshTracker=i("get"),a.editTracker=i("edit"),a.updateCategoriesCollapsed=function(b){b?a.$broadcast("angular-ui-tree:expand-all"):a.$broadcast("angular-ui-tree:collapse-all"),a.categoriesExpanded=b},a.goToMaster=function(a){c.go("index.oneCol.masterDetail",{id:a})},m()}]),angular.module("app.modules.content.controllers.faqCategoriesController",[]).controller("faqCategoriesController",["$scope","$state","$stateParams","contentService","toaster","modalUtil","confirmUtil","promiseTracker",function(a,b,c,d,e,f,g,h){function i(a){var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),e.pop("error","Error!",b,null,"trustedHtml")}function j(){d.getCategoriesTree({Type:5},a.refreshTracker).success(function(b){b.Success?(a.rootCategory=b.Data,a.categoriesExpanded=!0,a.loaded=!0):i(b)}).error(function(a){i(a)})}function k(){a.mode=c.mode,a.id=c.id,a.loaded=!1,j()}function l(b){m(a.rootCategory,b)}function m(a,b){var c=null;$.each(a.SubItems,function(a,d){return d.Id==b?(c=a,!1):void 0}),null!=c?a.SubItems.splice(c,1):$.each(a.SubItems,function(a,c){m(c,b)})}a.refreshTracker=h("refresh"),a.editTracker=h("edit"),a.deleteTracker=h("delete"),a.updateCategoriesCollapsed=function(b){b?a.$broadcast("angular-ui-tree:expand-all"):a.$broadcast("angular-ui-tree:collapse-all"),a.categoriesExpanded=b},a.open=function(a){b.go("index.oneCol.faqCategoryDetail",{id:a})},a.add=function(a){b.go("index.oneCol.addNewFaqCategory",{categoryid:a})},a["delete"]=function(b){g.confirm(function(){d.deleteCategory(b,a.deleteTracker).success(function(a){a.Success?(e.pop("success","Success!","Successfully deleted."),l(b)):i(a)}).error(function(a){i(a)})},"Are you sure you want to delete this category?")},a.save=function(){d.updateCategoriesTree(a.rootCategory,a.editTracker).success(function(a){a.Success?e.pop("success","Success!","Successfully saved."):i(a)}).error(function(a){i(a)})},a.cancel=function(){"list"==a.mode&&b.go("index.oneCol.manageFaqs"),"edit"==a.mode&&(a.id?b.go("index.oneCol.faqDetail",{id:a.id}):b.go("index.oneCol.addNewFaq"))},k()}]),angular.module("app.modules.content.controllers.faqCategoryManageController",[]).controller("faqCategoryManageController",["$scope","$rootScope","$state","$stateParams","contentService","settingService","toaster","confirmUtil","promiseTracker",function(a,b,c,d,e,f,g,h,i){function j(){if(a.faqCategory&&a.faqCategory.Id){var b={};b.service=f,b.tracker=a.refreshTracker,b.idObject=a.faqCategory.Id,b.idObjectType=12,a.$broadcast("objectHistorySection#in#refresh",b)}}function k(b){if(b.Success)g.pop("success","Success!","Successfully saved."),a.id=b.Data.Id,a.faqCategory.Id=b.Data.Id,a.faqCategory.MasterContentItemId=b.Data.MasterContentItemId,a.previewUrl=a.baseUrl.format(a.faqCategory.Url),j();else{var c="";b.Messages&&(a.forms.form.submitted=!0,a.detailsTab.active=!0,a.serverMessages=new ServerMessages(b.Messages),$.each(b.Messages,function(b,d){d.Field&&a.forms.form[d.Field].$setValidity("server",!1),c+=d.Message+"<br />"})),g.pop("error","Error!",c,null,"trustedHtml")}}function l(a){g.pop("error","Error!","Server error occured")}function m(){a.id=d.id?d.id:0,a.baseUrl="http://"+b.ReferenceData.PublicHost+"/faqs/{0}?preview=true",a.previewUrl=null,a.detailsTab={active:!0},a.loaded=!1,a.forms={},o()}function n(){e.getCategory(a.id,a.refreshTracker).success(function(b){b.Success?(a.faqCategory=b.Data,a.faqCategory.Type=5,a.faqCategory.Url&&(a.previewUrl=a.baseUrl.format(a.faqCategory.Url)),a.faqCategory.MasterContentItemId||(a.faqCategory.MasterContentItemId=a.MasterContentItemId),d.categoryid&&(a.faqCategory.ParentId=d.categoryid),a.loaded=!0,j()):l(b)}).error(function(a){l(a)})}function o(){e.getMasterContentItems({Type:5}).success(function(b){if(b.Success){a.masters=b.Data;var c=!1;$.each(a.masters,function(b,d){(d.IsDefault||1==a.masters.length)&&(c=!0,a.MasterContentItemId=d.Id)}),c||(a.MasterContentItemId=a.masters[0].Id),a.MastersLoaded=!0,n()}else l(b)}).error(function(a){l(a)})}a.refreshTracker=i("get"),a.editTracker=i("edit"),a.save=function(){$.each(a.forms.form,function(a,b){b&&b.$name==a&&b.$setValidity("server",!0)}),a.forms.form.$valid?e.updateCategory(a.faqCategory,a.editTracker).success(function(a){k(a)}).error(function(a){l(a)}):(a.forms.form.submitted=!0,a.detailsTab.active=!0)},a.goToMaster=function(a){c.go("index.oneCol.masterDetail",{id:a})},m()}]),angular.module("app.modules.content.controllers.articlesController",[]).controller("articlesController",["$scope","$state","contentService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h){function i(a,b,c){var d=this;if(c)d.Id=null,d.Name="All";else{d.Id=a.Id;for(var e="",f=2;b>=f;f++)e+="----";d.Name=e+a.Name}}function j(a){d.pop("error","Error!","Server error occured")}function k(){c.getArticles(a.filter,a.refreshTracker).success(function(b){b.Success?(a.articles=b.Data.Items,a.totalItems=b.Data.Count,a.loaded=!0):j(b)}).error(function(a){j(a)})}function l(){c.getCategoriesTree({Type:3},a.refreshTracker).success(function(a){a.Success?(m(a.Data),k()):j(a)}).error(function(a){j(a)})}function m(b){var c=[];n(b,c,0,!0),c.splice(1,0,new i({Id:-1,Name:"Uncategorized"})),a.categories=c}function n(a,b,c,d){b.push(new i(a,c,d)),$.each(a.SubItems,function(a,d){n(d,b,c+1)})}function o(){a.filter={Name:"",CategoryId:null,Paging:{PageIndex:1,PageItemCount:100},Sorting:h.resolve(k,"Updated","Desc")},a.loaded=!1,l()}a.refreshTracker=g("refresh"),a.deleteTracker=g("delete"),a.filterArticles=function(){a.filter.Paging.PageIndex=1,k()},a.pageChanged=function(){k()},a.open=function(a){a?b.go("index.oneCol.articleDetail",{id:a}):b.go("index.oneCol.addNewArticle")},a["delete"]=function(b){f.confirm(function(){c.deleteArticle(b,a.deleteTracker).success(function(a){a.Success?(d.pop("success","Success!","Successfully deleted."),k()):j(a)}).error(function(a){j(a)})},"Are you sure you want to delete this article?")},a.openBonusLinks=function(a){e.open("app/modules/content/partials/articleBonusLinksPopup.html","articleBonusLinksController",{thenCallback:function(a){}},{size:"xs"})},o()}]),angular.module("app.modules.content.controllers.articleManageController",[]).controller("articleManageController",["$scope","$rootScope","$state","$stateParams","appBootstrap","modalUtil","contentService","settingService","toaster","confirmUtil","promiseTracker",function(a,b,c,d,e,f,g,h,i,j,k){function l(){if(a.article&&a.article.Id){var b={};b.service=h,b.tracker=a.refreshTracker,b.idObject=a.article.Id,b.idObjectType=8,a.$broadcast("objectHistorySection#in#refresh",b)}}function m(b){if(b.Success)i.pop("success","Success!","Successfully saved."),a.id=b.Data.Id,a.article.Id=b.Data.Id,a.article.MasterContentItemId=b.Data.MasterContentItemId,a.previewUrl=a.baseUrl.format(a.article.Url),l();else{var c="";b.Messages&&(a.forms.articleForm.submitted=!0,a.detailsTab.active=!0,a.serverMessages=new ServerMessages(b.Messages),$.each(b.Messages,function(b,d){d.Field&&a.forms.articleForm[d.Field].$setValidity("server",!1),c+=d.Message+"<br />"})),i.pop("error","Error!",c,null,"trustedHtml")}}function n(a){i.pop("error","Error!","Server error occured")}function o(){a.id=d.id?d.id:0,a.descriptionExpanded=!1,a.toogleEditorState=function(b){a[b]=!a[b]},a.baseUrl="http://"+b.ReferenceData.PublicHost+"/article/{0}?preview=true",a.previewUrl=null,a.detailsTab={active:!0},a.forms={},a.save=function(){if($.each(a.forms.articleForm,function(a,b){b&&b.$name==a&&b.$setValidity("server",!0)}),a.forms.articleForm.$valid){var b=[];s(a.rootCategory,b),a.article.CategoryIds=b;var c={};angular.copy(a.article,c),c.PublishedDate&&(c.PublishedDate=c.PublishedDate.toServerDateTime()),g.updateArticle(c,a.editTracker).success(function(a){m(a)}).error(function(a){n(a)})}else a.forms.articleForm.submitted=!0,a.detailsTab.active=!0},a.updateCategoriesCollapsed=function(b){b?a.$broadcast("angular-ui-tree:expand-all"):a.$broadcast("angular-ui-tree:collapse-all"),a.categoriesExpanded=b},g.getCategoriesTree({Type:3},a.refreshTracker).success(function(b){b.Success?(a.rootCategory=b.Data,q()):n(b)}).error(function(a){n(a)})}function p(){g.getArticle(a.id,a.refreshTracker).success(function(b){b.Success?(a.article=b.Data,a.article.PublishedDate&&(a.article.PublishedDate=Date.parseDateTime(a.article.PublishedDate)),a.article.Url&&(a.previewUrl=a.baseUrl.format(a.article.Url)),a.article.MasterContentItemId||(a.article.MasterContentItemId=a.MasterContentItemId),r(a.rootCategory,a.article.CategoryIds),l()):n(b)}).error(function(a){n(a)})}function q(){g.getMasterContentItems({Type:4}).success(function(b){if(b.Success){a.masters=b.Data;var c=!1;$.each(a.masters,function(b,d){(d.IsDefault||1==a.masters.length)&&(c=!0,a.MasterContentItemId=d.Id)}),c||(a.MasterContentItemId=a.masters[0].Id),a.MastersLoaded=!0,p()}else n(b)}).error(function(a){n(a)})}function r(a,b){a.IsSelected=!1,$.each(b,function(b,c){a.Id==c&&(a.IsSelected=!0)}),$.each(a.SubItems,function(a,c){r(c,b)})}function s(a,b){a.IsSelected&&b.push(a.Id),$.each(a.SubItems,function(a,c){s(c,b)})}a.refreshTracker=k("get"),a.editTracker=k("edit"),a.goToMaster=function(a){c.go("index.oneCol.masterDetail",{id:a})},o()}]),angular.module("app.modules.content.controllers.articleCategoriesController",[]).controller("articleCategoriesController",["$scope","$state","$stateParams","contentService","toaster","modalUtil","confirmUtil","promiseTracker",function(a,b,c,d,e,f,g,h){function i(a){var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),e.pop("error","Error!",b,null,"trustedHtml")}function j(){d.getCategoriesTree({Type:3},a.refreshTracker).success(function(b){b.Success?(a.rootCategory=b.Data,a.categoriesExpanded=!0,a.loaded=!0):i(b)}).error(function(a){i(a)})}function k(){a.mode=c.mode,a.id=c.id,a.loaded=!1,j()}function l(b){m(a.rootCategory,b)}function m(a,b){var c=null;$.each(a.SubItems,function(a,d){return d.Id==b?(c=a,!1):void 0}),null!=c?a.SubItems.splice(c,1):$.each(a.SubItems,function(a,c){m(c,b)})}a.refreshTracker=h("refresh"),a.editTracker=h("edit"),a.deleteTracker=h("delete"),a.updateCategoriesCollapsed=function(b){b?a.$broadcast("angular-ui-tree:expand-all"):a.$broadcast("angular-ui-tree:collapse-all"),a.categoriesExpanded=b},a.open=function(a){b.go("index.oneCol.articleCategoryDetail",{id:a})},a.add=function(a){b.go("index.oneCol.addNewArticleCategory",{categoryid:a})},a["delete"]=function(b){g.confirm(function(){d.deleteCategory(b,a.deleteTracker).success(function(a){a.Success?(e.pop("success","Success!","Successfully deleted."),l(b)):i(a)}).error(function(a){i(a)})},"Are you sure you want to delete this category?")},a.save=function(){d.updateCategoriesTree(a.rootCategory,a.editTracker).success(function(a){a.Success?e.pop("success","Success!","Successfully saved."):i(a)}).error(function(a){i(a)})},a.cancel=function(){"list"==a.mode&&b.go("index.oneCol.manageArticles"),"edit"==a.mode&&(a.id?b.go("index.oneCol.articleDetail",{id:a.id}):b.go("index.oneCol.addNewArticle"))},k()}]),angular.module("app.modules.content.controllers.articleCategoryManageController",[]).controller("articleCategoryManageController",["$scope","$rootScope","$state","$stateParams","contentService","settingService","toaster","confirmUtil","promiseTracker",function(a,b,c,d,e,f,g,h,i){function j(){if(a.articleCategory&&a.articleCategory.Id){var b={};b.service=f,b.tracker=a.refreshTracker,b.idObject=a.articleCategory.Id,b.idObjectType=12,a.$broadcast("objectHistorySection#in#refresh",b)}}function k(b){if(b.Success)g.pop("success","Success!","Successfully saved."),a.id=b.Data.Id,a.articleCategory.Id=b.Data.Id,a.articleCategory.MasterContentItemId=b.Data.MasterContentItemId,a.previewUrl=a.baseUrl.format(a.articleCategory.Url),j();else{var c="";b.Messages&&(a.forms.form.submitted=!0,a.detailsTab.active=!0,a.serverMessages=new ServerMessages(b.Messages),$.each(b.Messages,function(b,d){d.Field&&a.forms.form[d.Field].$setValidity("server",!1),c+=d.Message+"<br />"})),g.pop("error","Error!",c,null,"trustedHtml")}}function l(a){g.pop("error","Error!","Server error occured")}function m(){a.id=d.id?d.id:0,a.baseUrl="http://"+b.ReferenceData.PublicHost+"/articles/{0}?preview=true",a.previewUrl=null,a.detailsTab={active:!0},a.loaded=!1,a.forms={},o()}function n(){e.getCategory(a.id,a.refreshTracker).success(function(b){b.Success?(a.articleCategory=b.Data,a.articleCategory.Type=3,a.articleCategory.Url&&(a.previewUrl=a.baseUrl.format(a.articleCategory.Url)),d.categoryid&&(a.articleCategory.ParentId=d.categoryid),a.articleCategory.MasterContentItemId||(a.articleCategory.MasterContentItemId=a.MasterContentItemId),a.loaded=!0,j()):l(b)}).error(function(a){l(a)})}function o(){e.getMasterContentItems({Type:3}).success(function(b){if(b.Success){a.masters=b.Data;var c=!1;$.each(a.masters,function(b,d){(d.IsDefault||1==a.masters.length)&&(c=!0,a.MasterContentItemId=d.Id)}),c||(a.MasterContentItemId=a.masters[0].Id),a.MastersLoaded=!0,n()}else l(b)}).error(function(a){l(a)})}a.refreshTracker=i("get"),a.editTracker=i("edit"),a.save=function(){$.each(a.forms.form,function(a,b){b&&b.$name==a&&b.$setValidity("server",!0)}),a.forms.form.$valid?e.updateCategory(a.articleCategory,a.editTracker).success(function(a){k(a)}).error(function(a){l(a)}):(a.forms.form.submitted=!0,a.detailsTab.active=!0)},a.goToMaster=function(a){c.go("index.oneCol.masterDetail",{id:a})},m()}]),angular.module("app.modules.content.controllers.contentPagesController",[]).controller("contentPagesController",["$scope","$state","contentService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h){function i(a,b,c){var d=this;if(c)d.Id=null,d.Name="All";else{d.Id=a.Id;for(var e="",f=2;b>=f;f++)e+="----";d.Name=e+a.Name}}function j(a){d.pop("error","Error!","Server error occured")}function k(){c.getContentPages(a.filter,a.refreshTracker).success(function(b){b.Success?(a.contentPages=b.Data.Items,a.totalItems=b.Data.Count,a.loaded=!0):j(b)}).error(function(a){j(a)})}function l(){c.getCategoriesTree({Type:7},a.refreshTracker).success(function(a){a.Success?(m(a.Data),k()):j(a)}).error(function(a){j(a)})}function m(b){var c=[];n(b,c,0,!0),c.splice(1,0,new i({Id:-1,Name:"Uncategorized"})),a.categories=c}function n(a,b,c,d){b.push(new i(a,c,d)),$.each(a.SubItems,function(a,d){n(d,b,c+1)})}function o(){a.filter={Name:"",CategoryId:null,Paging:{PageIndex:1,PageItemCount:100},Sorting:h.resolve(k,"Updated","Desc")},a.loaded=!1,l()}a.refreshTracker=g("refresh"),a.deleteTracker=g("delete"),a.filterContentPages=function(){a.filter.Paging.PageIndex=1,k()},a.pageChanged=function(){k()},a.open=function(a){a?b.go("index.oneCol.contentPageDetail",{id:a}):b.go("index.oneCol.addNewContentPage")},a["delete"]=function(b){f.confirm(function(){c.deleteContentPage(b,a.deleteTracker).success(function(a){a.Success?(d.pop("success","Success!","Successfully deleted."),k()):j(a)}).error(function(a){j(a)})},"Are you sure you want to delete this content page?")},o()}]),angular.module("app.modules.content.controllers.contentPageManageController",[]).controller("contentPageManageController",["$scope","$rootScope","$state","$stateParams","contentService","settingService","toaster","confirmUtil","promiseTracker",function(a,b,c,d,e,f,g,h,i){function j(){if(a.contentPage&&a.contentPage.Id){var b={};b.service=f,b.tracker=a.refreshTracker,b.idObject=a.contentPage.Id,b.idObjectType=11,a.$broadcast("objectHistorySection#in#refresh",b)}}function k(b){if(b.Success)g.pop("success","Success!","Successfully saved."),a.id=b.Data.Id,a.contentPage.Id=b.Data.Id,a.contentPage.MasterContentItemId=b.Data.MasterContentItemId,a.previewUrl=a.baseUrl.format(a.contentPage.Url),j();else{var c="";b.Messages&&(a.forms.contentPageForm.submitted=!0,a.detailsTab.active=!0,a.serverMessages=new ServerMessages(b.Messages),$.each(b.Messages,function(b,d){d.Field&&a.forms.contentPageForm[d.Field].$setValidity("server",!1),c+=d.Message+"<br />"})),g.pop("error","Error!",c,null,"trustedHtml")}}function l(a){g.pop("error","Error!","Server error occured")}function m(){a.id=d.id?d.id:0,a.descriptionExpanded=!1,a.toogleEditorState=function(b){a[b]=!a[b]},a.statuses=b.ReferenceData.ContentItemStatusNames,a.baseUrl="http://"+b.ReferenceData.PublicHost+"/content/{0}?preview=true",a.previewUrl=null,a.detailsTab={active:!0},a.loaded=!1,a.forms={},a.save=function(){if($.each(a.forms.contentPageForm,function(a,b){b&&b.$name==a&&b.$setValidity("server",!0)}),a.forms.contentPageForm.$valid){var b=[];t(a.rootCategory,b),a.contentPage.CategoryIds=b,r(a.contentPage),e.updateContentPage(a.contentPage,a.editTracker).success(function(a){k(a)}).error(function(a){l(a)})}else a.forms.contentPageForm.submitted=!0,a.detailsTab.active=!0},o(),p()}function n(){a.MastersLoaded&&a.CategoriesLoaded&&e.getContentPage(a.id,a.refreshTracker).success(function(b){b.Success?(a.contentPage=b.Data,a.contentPage.Url&&(a.previewUrl=a.baseUrl.format(a.contentPage.Url)),a.contentPage.MasterContentItemId||(a.contentPage.MasterContentItemId=a.MasterContentItemId),q(a.contentPage),s(a.rootCategory,a.contentPage.CategoryIds),a.loaded=!0,j()):l(b)}).error(function(a){l(a)})}function o(){e.getCategoriesTree({Type:7},a.refreshTracker).success(function(b){b.Success?(a.rootCategory=b.Data,a.CategoriesLoaded=!0,n()):l(b)}).error(function(a){l(a)})}function p(){e.getMasterContentItems({Type:8}).success(function(b){if(b.Success){a.masters=b.Data;var c=!1;$.each(a.masters,function(b,d){(d.IsDefault||1==a.masters.length)&&(c=!0,a.MasterContentItemId=d.Id)}),c||(a.MasterContentItemId=a.masters[0].Id),a.MastersLoaded=!0,n()}else l(b)}).error(function(a){l(a)})}function q(a){a.Status=a.StatusCode+":"+a.Assigned}function r(a){var b=a.Status.split(":");a.StatusCode=parseInt(b[0]),a.Assigned=parseInt(b[1])}function s(a,b){a.IsSelected=!1,$.each(b,function(b,c){a.Id==c&&(a.IsSelected=!0)}),$.each(a.SubItems,function(a,c){s(c,b)})}function t(a,b){a.IsSelected&&b.push(a.Id),$.each(a.SubItems,function(a,c){t(c,b)})}a.refreshTracker=i("get"),a.editTracker=i("edit"),a.updateCategoriesCollapsed=function(b){b?a.$broadcast("angular-ui-tree:expand-all"):a.$broadcast("angular-ui-tree:collapse-all"),a.categoriesExpanded=b},a.goToMaster=function(a){c.go("index.oneCol.masterDetail",{id:a})},m()}]),angular.module("app.modules.content.controllers.contentAreaDetailController",[]).controller("contentAreaDetailController",["$scope","$rootScope","$state","$stateParams","contentAreaService","settingService","toaster","promiseTracker",function(a,b,c,d,e,f,g,h){function i(){if(a.contentArea&&a.contentArea.Id){var b={};b.service=f,b.tracker=a.refreshTracker,b.idObject=a.contentArea.Id,b.idObjectType=15,a.$broadcast("objectHistorySection#in#refresh",b)}}function j(b){if(b.Success)g.pop("success","Success!","Successfully saved"),a.contentArea=b.Data,i();else{var c="";b.Messages&&$.each(b.Messages,function(a,b){c+=b.Message+"<br />"}),g.pop("error","Error!",c,null,"trustedHtml")}}function k(a){g.pop("error","Error!","Server error occured")}function l(){a.previewUrl="http://"+b.ReferenceData.PublicHost+"/?preview=true";var c=d.id?d.id:0;e.getContentArea(c,a.refreshTracker).success(function(b){if(b.Success)a.contentArea=b.Data,i();else{var c="";b.Messages?$.each(b.Messages,function(a,b){c+=b.Message+"<br />"}):c="Can't get content area",g.pop("error","Error!",c,null,"trustedHtml")}}).error(function(a){k(a)})}a.refreshTracker=h("get"),a.editTracker=h("edit"),a.save=function(){e.saveContentArea(a.contentArea,a.editTracker).success(function(a){j(a)}).error(function(a){k(a)})},l()}]),angular.module("app.modules.content.controllers.contentPageCategoriesController",[]).controller("contentPageCategoriesController",["$scope","$state","$stateParams","contentService","toaster","modalUtil","confirmUtil","promiseTracker",function(a,b,c,d,e,f,g,h){function i(a){var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),e.pop("error","Error!",b,null,"trustedHtml")}function j(){d.getCategoriesTree({Type:7},a.refreshTracker).success(function(b){b.Success?(a.rootCategory=b.Data,a.categoriesExpanded=!0,a.loaded=!0):i(b)}).error(function(a){i(a)})}function k(){a.mode=c.mode,a.id=c.id,a.loaded=!1,j()}function l(b){m(a.rootCategory,b)}function m(a,b){var c=null;$.each(a.SubItems,function(a,d){return d.Id==b?(c=a,!1):void 0}),null!=c?a.SubItems.splice(c,1):$.each(a.SubItems,function(a,c){m(c,b)})}a.refreshTracker=h("refresh"),a.editTracker=h("edit"),a.deleteTracker=h("delete"),a.updateCategoriesCollapsed=function(b){b?a.$broadcast("angular-ui-tree:expand-all"):a.$broadcast("angular-ui-tree:collapse-all"),a.categoriesExpanded=b},a.open=function(a){b.go("index.oneCol.contentPageCategoryDetail",{id:a})},a.add=function(a){b.go("index.oneCol.addNewContentPageCategory",{categoryid:a})},a["delete"]=function(b){g.confirm(function(){d.deleteCategory(b,a.deleteTracker).success(function(a){a.Success?(e.pop("success","Success!","Successfully deleted."),l(b)):i(a)}).error(function(a){i(a)})},"Are you sure you want to delete this category?")},a.save=function(){d.updateCategoriesTree(a.rootCategory,a.editTracker).success(function(a){a.Success?e.pop("success","Success!","Successfully saved."):i(a)}).error(function(a){i(a)})},a.cancel=function(){"list"==a.mode&&b.go("index.oneCol.manageContentPages"),"edit"==a.mode&&(a.id?b.go("index.oneCol.contentPageDetail",{id:a.id}):b.go("index.oneCol.addNewContentPage"))},k()}]),angular.module("app.modules.content.controllers.contentPageCategoryManageController",[]).controller("contentPageCategoryManageController",["$scope","$rootScope","$state","$stateParams","contentService","settingService","toaster","confirmUtil","promiseTracker",function(a,b,c,d,e,f,g,h,i){function j(){if(a.contentPageCategory&&a.contentPageCategory.Id){var b={};b.service=f,b.tracker=a.refreshTracker,b.idObject=a.contentPageCategory.Id,b.idObjectType=12,a.$broadcast("objectHistorySection#in#refresh",b)}}function k(b){if(b.Success)g.pop("success","Success!","Successfully saved."),a.id=b.Data.Id,a.contentPageCategory.Id=b.Data.Id,a.contentPageCategory.MasterContentItemId=b.Data.MasterContentItemId,a.previewUrl=a.baseUrl.format(a.contentPageCategory.Url),j();else{var c="";b.Messages&&(a.forms.form.submitted=!0,a.detailsTab.active=!0,a.serverMessages=new ServerMessages(b.Messages),$.each(b.Messages,function(b,d){d.Field&&a.forms.form[d.Field].$setValidity("server",!1),c+=d.Message+"<br />"})),g.pop("error","Error!",c,null,"trustedHtml")}}function l(a){g.pop("error","Error!","Server error occured")}function m(){a.id=d.id?d.id:0,a.baseUrl="http://"+b.ReferenceData.PublicHost+"/contents/{0}?preview=true",a.previewUrl=null,a.detailsTab={active:!0},a.loaded=!1,a.forms={},o()}function n(){e.getCategory(a.id,a.refreshTracker).success(function(b){b.Success?(a.contentPageCategory=b.Data,a.contentPageCategory.Type=7,a.contentPageCategory.Url&&(a.previewUrl=a.baseUrl.format(a.contentPageCategory.Url)),a.contentPageCategory.MasterContentItemId||(a.contentPageCategory.MasterContentItemId=a.MasterContentItemId),d.categoryid&&(a.contentPageCategory.ParentId=d.categoryid),a.loaded=!0,j()):l(b)}).error(function(a){l(a)})}function o(){e.getMasterContentItems({Type:7}).success(function(b){if(b.Success){a.masters=b.Data;var c=!1;$.each(a.masters,function(b,d){(d.IsDefault||1==a.masters.length)&&(c=!0,a.MasterContentItemId=d.Id)}),c||(a.MasterContentItemId=a.masters[0].Id),a.MastersLoaded=!0,n()}else l(b)}).error(function(a){l(a)})}a.refreshTracker=i("get"),a.editTracker=i("edit"),a.save=function(){$.each(a.forms.form,function(a,b){b&&b.$name==a&&b.$setValidity("server",!0)}),a.forms.form.$valid?e.updateCategory(a.contentPageCategory,a.editTracker).success(function(a){k(a)}).error(function(a){l(a)}):(a.forms.form.submitted=!0,a.detailsTab.active=!0)},a.goToMaster=function(a){c.go("index.oneCol.masterDetail",{id:a})},m()}]),angular.module("app.modules.content.controllers.contentAreasController",[]).controller("contentAreasController",["$scope","promiseTracker","contentAreaService","toaster","$rootScope","$state",function(a,b,c,d,e,f){function g(){h(),a.open=function(a){f.go("index.oneCol.manageContentAreaDetail",{id:a})}}function h(){c.getContentAreas(a.refreshTracker).success(function(b){b.Success?a.contentAreas=b.Data:d.pop("error","Error!","Can't get access to the content areas")}).error(function(a){d.pop("error","Error!","Server error ocurred")})}a.refreshTracker=b("refresh"),g()}]),angular.module("app.modules.content.controllers.manageStylesController",[]).controller("manageStylesController",["$scope","$rootScope","$state","$stateParams","manageStylesService","settingService","toaster","promiseTracker",function(a,b,c,d,e,f,g,h){function i(){if(a.model&&a.model.Id){var b={};b.service=f,b.tracker=a.refreshTracker,b.idObject=a.model.Id,b.idObjectType=19,a.$broadcast("objectHistorySection#in#refresh",b)}}function j(b){if(b.Success)g.pop("success","Success!","Successfully saved"),a.model.CSS=b.Data.CSS,i();else{var c="";b.Messages&&$.each(b.Messages,function(a,b){c+=b.Message+"<br />"}),g.pop("error","Error!",c,null,"trustedHtml")}}function k(a){g.pop("error","Error!","Server error occured")}function l(){a.model={CSS:""},a.previewUrl="http://"+b.ReferenceData.PublicHost+"/?preview=true",e.getStyles(a.refreshTracker).success(function(b){if(b.Success)a.model=b.Data,i();else{var c="";b.Messages?$.each(b.Messages,function(a,b){c+=b.Message+"<br />"}):c="Can't get custom CSS",g.pop("error","Error!",c,null,"trustedHtml")}}).error(function(a){k(a)})}a.refreshTracker=h("get"),a.editTracker=h("edit"),a.save=function(){e.saveStyles(a.model,a.editTracker).success(function(a){j(a)}).error(function(a){k(a)})},l()}]),angular.module("app.modules.content.controllers.emailTemplatesController",[]).controller("emailTemplatesController",["$scope","$state","contentService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h){function i(a){d.pop("error","Error!","Server error occured")}function j(){c.getEmailTemplates(a.filter,a.refreshTracker).success(function(b){b.Success?(a.items=b.Data.Items,a.totalItems=b.Data.Count,a.loaded=!0):i(b)}).error(function(a){i(a)})}function k(){a.filter={Name:"",CategoryId:null,Paging:{PageIndex:1,PageItemCount:100},Sorting:h.resolve(j,"Updated","Desc")},j()}a.refreshTracker=g("refresh"),a.filterItems=function(){a.filter.Paging.PageIndex=1,j()},a.pageChanged=function(){j()},a.open=function(a){a&&b.go("index.oneCol.emailTemplateDetail",{id:a})},k()}]),angular.module("app.modules.content.controllers.emailTemplateManageController",[]).controller("emailTemplateManageController",["$scope","$rootScope","$state","$stateParams","contentService","settingService","toaster","confirmUtil","promiseTracker",function(a,b,c,d,e,f,g,h,i){function j(){if(a.emailTemplate&&a.emailTemplate.Id){var b={};b.service=f,b.tracker=a.refreshTracker,b.idObject=a.emailTemplate.Id,b.idObjectType=18,a.$broadcast("objectHistorySection#in#refresh",b)}}function k(b){if(b.Success)g.pop("success","Success!","Successfully saved."),a.id=b.Data.Id,a.emailTemplate.Id=b.Data.Id,a.emailTemplate.MasterContentItemId=b.Data.MasterContentItemId,j();else{var c="";b.Messages&&(a.forms.form.submitted=!0,a.detailsTab.active=!0,a.serverMessages=new ServerMessages(b.Messages),$.each(b.Messages,function(b,d){d.Field&&a.forms.form[d.Field].$setValidity("server",!1),c+=d.Message+"<br />"})),g.pop("error","Error!",c,null,"trustedHtml")}}function l(a){g.pop("error","Error!","Server error occured")}function m(){a.id=d.id?d.id:0,a.detailsTab={active:!0},a.forms={},o()}function n(){e.getEmailTemplate(a.id,a.refreshTracker).success(function(b){b.Success?(a.emailTemplate=b.Data,a.emailTemplate.MasterContentItemId||(a.emailTemplate.MasterContentItemId=a.MasterContentItemId),j()):l(b)}).error(function(a){l(a)})}function o(){e.getMasterContentItems({Type:11}).success(function(b){if(b.Success){a.masters=b.Data;var c=!1;$.each(a.masters,function(b,d){(d.IsDefault||1==a.masters.length)&&(c=!0,a.MasterContentItemId=d.Id)}),c||(a.MasterContentItemId=a.masters[0].Id),n()}else l(b)}).error(function(a){l(a)})}a.refreshTracker=i("get"),a.save=function(){$.each(a.forms.form,function(a,b){
b&&b.$name==a&&b.$setValidity("server",!0)}),a.forms.form.$valid?e.updateEmailTemplate(a.emailTemplate,a.refreshTracker).success(function(a){k(a)}).error(function(a){l(a)}):(a.forms.form.submitted=!0,a.detailsTab.active=!0)},a.goToMaster=function(a){c.go("index.oneCol.masterDetail",{id:a})},m()}]),angular.module("app.modules.content.controllers.contentCrossSellsManageController",[]).controller("contentCrossSellsManageController",["$scope","$rootScope","$state","$stateParams","contentService","toaster","promiseTracker","productService","$timeout",function(a,b,c,d,e,f,g,h,i){function j(){a.id="index.oneCol.manageAddToCartCs"==c.current.name?1:2,a.title=1==a.id?"Manage Add To Cart Cross Selling":"Manage View Cart Cross Selling",a.skusFilter={Paging:{PageIndex:1,PageItemCount:20}},k(),a.forms={}}function k(){e.getContentCrossSells(a.id,a.refreshTracker).success(function(b){b.Success?a.model=b.Data:m(b)}).error(function(a){m(a)})}function l(b){if(b.Success)f.pop("success","Success!","Successfully saved."),a.model=b.Data;else{var c="";b.Messages&&(a.forms.submitted=!0,a.serverMessages=new ServerMessages(b.Messages),$.each(b.Messages,function(b,d){if(d.Field)if(d.Field.indexOf(".")>-1){var e=d.Field.split(".");a.forms[e[0]][e[1]][e[2]].$setValidity("server",!1)}else $.each(a.forms,function(a,b){return b&&"boolean"!=typeof b&&void 0!=b[d.Field]?(b[d.Field].$setValidity("server",!1),!1):void 0});else c+=d.Message+"<br/>"})),f.pop("error","Error!",c,null,"trustedHtml")}}function m(a){f.pop("error","Error!","Server error occured")}a.refreshTracker=g("get"),a.editTracker=g("edit"),a.sortableOptions={handle:" .sortable-move",items:" .panel:not(.panel-heading)",axis:"y",start:function(b,c){a.dragging=!0},stop:function(b,c){a.dragging=!1}},a.getSku=function(b){return b?(a.skusFilter.Code=b,a.skusFilter.DescriptionName="",a.skusFilter.NotHiddenOnly=!0,a.skusFilter.ActiveOnly=!0,h.getSkus(a.skusFilter).then(function(b){return a.bufferedSkus=b.data.Data.map(function(a){return a}),a.bufferedSkus})):void 0},a.cleaerTypeaheadBox=function(a){a.IdSku=null,a.WholesalePrice=null,a.RetailPrice=null},a.skuChanged=function(b,c){var d=a.model.Items[c];d.IdSku=b.Id,d.WholesalePrice=b.WholesalePrice,d.RetailPrice=b.Price,d.SkuCode=b.Code},a.save=function(){n();var b=!0;a.forms.Items.$valid||(b=!1),b?e.updateContentCrossSells(a.model,a.refreshTracker).success(function(a){l(a)}).error(function(a){m(a)}):(a.forms.submitted=!0,f.pop("error","Error!","Validation errors, please correct field values.",null,"trustedHtml"))};var n=function(){$.each(a.forms.Items,function(a,b){0==a.indexOf("i")&&$.each(b,function(a,b){b&&b.$name==a&&b.$setValidity("server",!0)})})};j()}]),angular.module("app.modules.content.controllers.articleBonusLinksController",[]).controller("articleBonusLinksController",["$scope","$rootScope","$state","$uibModalInstance","contentService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil","data",function(a,b,c,d,e,f,g,h,i,j,k){function l(a){var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),f.pop("error","Error!",b,null,"trustedHtml")}function m(){e.getArticleBonusLinks(a.refreshTracker).success(function(b){b.Success?(a.items=b.Data,$.each(a.items,function(a,b){b.StartDate&&(b.StartDate=Date.parseDateTime(b.StartDate))})):l(b)}).error(function(a){l(a)})}function n(){a.forms={},m()}a.refreshTracker=i("refresh"),a.save=function(){if($.each(a.forms.form,function(a,b){b&&b.$name==a&&b.$setValidity("server",!0)}),a.forms.form.$valid){var b=angular.copy(a.items);$.each(b,function(a,b){b.StartDate&&(b.StartDate=b.StartDate.toServerDateTime())}),e.updateArticleBonusLinks(b,a.refreshTracker).success(function(a){a.Success?(k.thenCallback(),d.close()):l(a)}).error(function(a){l(a)})}else a.forms.submitted=!0},a.cancel=function(){d.close()},a.addItem=function(){if(!a.forms.form.$valid)return a.forms.submitted=!0,!1;var b={Url:null,FromDate:null};a.items.push(b),a.forms.submitted=!1},a.deleteItem=function(b){a.items.splice(b,1)},n()}]),angular.module("app.modules.content.controllers.aceErrorDetailsController",[]).controller("aceErrorDetailsController",["$scope","$uibModalInstance","data",function(a,b,c){function d(){a.cancel=function(){b.close()},a.error=c.error}d()}]),angular.module("app.modules.content",["app.modules.content.controllers.mastersController","app.modules.content.controllers.masterManageController","app.modules.content.controllers.recipesController","app.modules.content.controllers.recipeManageController","app.modules.content.controllers.recipeCategoriesController","app.modules.content.controllers.recipeCategoryManageController","app.modules.content.controllers.faqsController","app.modules.content.controllers.faqManageController","app.modules.content.controllers.faqCategoriesController","app.modules.content.controllers.faqCategoryManageController","app.modules.content.controllers.articlesController","app.modules.content.controllers.articleManageController","app.modules.content.controllers.articleCategoriesController","app.modules.content.controllers.articleCategoryManageController","app.modules.content.controllers.contentPagesController","app.modules.content.controllers.contentPageManageController","app.modules.content.controllers.contentPageCategoriesController","app.modules.content.controllers.contentPageCategoryManageController","app.modules.content.controllers.contentAreasController","app.modules.content.controllers.contentAreaDetailController","app.modules.content.controllers.manageStylesController","app.modules.content.controllers.emailTemplatesController","app.modules.content.controllers.emailTemplateManageController","app.modules.content.controllers.contentCrossSellsManageController","app.modules.content.controllers.articleBonusLinksController","app.modules.content.controllers.aceErrorDetailsController"]).config(["$stateProvider","$urlRouterProvider",function(a,b){a.state("index.oneCol.manageMasters",{url:"/content/masters",templateUrl:"app/modules/content/partials/mastersList.html",controller:"mastersController"}).state("index.oneCol.addNewMaster",{url:"/content/masters/add",templateUrl:"app/modules/content/partials/masterDetail.html",controller:"masterManageController"}).state("index.oneCol.masterDetail",{url:"/content/masters/{id:int}",templateUrl:"app/modules/content/partials/masterDetail.html",controller:"masterManageController"}).state("index.oneCol.manageRecipes",{url:"/content/recipes",templateUrl:"app/modules/content/partials/recipesList.html",controller:"recipesController"}).state("index.oneCol.addNewRecipe",{url:"/content/recipes/add",templateUrl:"app/modules/content/partials/recipeDetail.html",controller:"recipeManageController"}).state("index.oneCol.recipeDetail",{url:"/content/recipes/{id:int}",templateUrl:"app/modules/content/partials/recipeDetail.html",controller:"recipeManageController"}).state("index.oneCol.manageRecipeCategories",{url:"/content/recipes/categories",templateUrl:"app/modules/content/partials/recipeCategoriesTreeView.html",controller:"recipeCategoriesController",params:{mode:"list",id:null}}).state("index.oneCol.addNewRecipeCategory",{url:"/content/recipes/categories/add?{categoryid:int}",templateUrl:"app/modules/content/partials/recipeCategoryDetail.html",controller:"recipeCategoryManageController"}).state("index.oneCol.recipeCategoryDetail",{url:"/content/recipes/categories/{id:int}",templateUrl:"app/modules/content/partials/recipeCategoryDetail.html",controller:"recipeCategoryManageController"}).state("index.oneCol.manageFaqs",{url:"/content/faqs",templateUrl:"app/modules/content/partials/faqsList.html",controller:"faqsController"}).state("index.oneCol.addNewFaq",{url:"/content/faqs/add",templateUrl:"app/modules/content/partials/faqDetail.html",controller:"faqManageController"}).state("index.oneCol.faqDetail",{url:"/content/faqs/{id:int}",templateUrl:"app/modules/content/partials/faqDetail.html",controller:"faqManageController"}).state("index.oneCol.manageFaqCategories",{url:"/content/faqs/categories",templateUrl:"app/modules/content/partials/faqCategoriesTreeView.html",controller:"faqCategoriesController",params:{mode:"list",id:null}}).state("index.oneCol.addNewFaqCategory",{url:"/content/faqs/categories/add?{categoryid:int}",templateUrl:"app/modules/content/partials/faqCategoryDetail.html",controller:"faqCategoryManageController"}).state("index.oneCol.faqCategoryDetail",{url:"/content/faqs/categories/{id:int}",templateUrl:"app/modules/content/partials/faqCategoryDetail.html",controller:"faqCategoryManageController"}).state("index.oneCol.manageArticles",{url:"/content/articles",templateUrl:"app/modules/content/partials/articlesList.html",controller:"articlesController"}).state("index.oneCol.addNewArticle",{url:"/content/articles/add",templateUrl:"app/modules/content/partials/articleDetail.html",controller:"articleManageController"}).state("index.oneCol.articleDetail",{url:"/content/articles/{id:int}",templateUrl:"app/modules/content/partials/articleDetail.html",controller:"articleManageController"}).state("index.oneCol.manageArticleCategories",{url:"/content/articles/categories",templateUrl:"app/modules/content/partials/articleCategoriesTreeView.html",controller:"articleCategoriesController",params:{mode:"list",id:null}}).state("index.oneCol.addNewArticleCategory",{url:"/content/articles/categories/add?{categoryid:int}",templateUrl:"app/modules/content/partials/articleCategoryDetail.html",controller:"articleCategoryManageController"}).state("index.oneCol.articleCategoryDetail",{url:"/content/articles/categories/{id:int}",templateUrl:"app/modules/content/partials/articleCategoryDetail.html",controller:"articleCategoryManageController"}).state("index.oneCol.manageContentPages",{url:"/content/contentpages",templateUrl:"app/modules/content/partials/contentPagesList.html",controller:"contentPagesController"}).state("index.oneCol.addNewContentPage",{url:"/content/contentpages/add",templateUrl:"app/modules/content/partials/contentPageDetail.html",controller:"contentPageManageController"}).state("index.oneCol.contentPageDetail",{url:"/content/contentpages/{id:int}",templateUrl:"app/modules/content/partials/contentPageDetail.html",controller:"contentPageManageController"}).state("index.oneCol.manageContentPageCategories",{url:"/content/contentpages/categories",templateUrl:"app/modules/content/partials/contentPageCategoriesTreeView.html",controller:"contentPageCategoriesController",params:{mode:"list",id:null}}).state("index.oneCol.addNewContentPageCategory",{url:"/content/contentpages/categories/add?{categoryid:int}",templateUrl:"app/modules/content/partials/contentPageCategoryDetail.html",controller:"contentPageCategoryManageController"}).state("index.oneCol.contentPageCategoryDetail",{url:"/content/contentpages/categories/{id:int}",templateUrl:"app/modules/content/partials/contentPageCategoryDetail.html",controller:"contentPageCategoryManageController"}).state("index.oneCol.manageContentAreas",{url:"/content/contentareas",templateUrl:"app/modules/content/partials/contentAreas.html",controller:"contentAreasController"}).state("index.oneCol.manageContentAreaDetail",{url:"/content/contentareas/{id:int}",templateUrl:"app/modules/content/partials/contentAreaDetail.html",controller:"contentAreaDetailController"}).state("index.oneCol.manageStyles",{url:"/content/css",templateUrl:"app/modules/content/partials/stylesDetail.html",controller:"manageStylesController"}).state("index.oneCol.manageEmailTemplates",{url:"/content/emailtemplates",templateUrl:"app/modules/content/partials/emailTemplatesList.html",controller:"emailTemplatesController"}).state("index.oneCol.emailTemplateDetail",{url:"/content/emailtemplates/{id:int}",templateUrl:"app/modules/content/partials/emailTemplateDetail.html",controller:"emailTemplateManageController"}).state("index.oneCol.manageAddToCartCs",{url:"/content/managecross/addtocart",templateUrl:"app/modules/content/partials/contentCrossSells.html",controller:"contentCrossSellsManageController"}).state("index.oneCol.manageViewCartCs",{url:"/content/managecross/viewcart",templateUrl:"app/modules/content/partials/contentCrossSells.html",controller:"contentCrossSellsManageController"})}]),angular.module("app.modules.setting.controllers.logsController",[]).controller("logsController",["$scope","$state","settingService","toaster","modalUtil","confirmUtil","gridSorterUtil","promiseTracker",function(a,b,c,d,e,f,g,h){function i(){var a=this;a.Message="",a.Source="",a.LogLevel=null;var b=new Date;b.setHours(0,0,0,0),a.AppName="VC.Admin",a.To=b.shiftDate("+1d"),a.From=b.shiftDate("-1d"),a.Paging={PageIndex:1,PageItemCount:100},a.Sorting=g.resolve(k,"Date","Desc")}function j(a){d.pop("error","Error!","Server error occured")}function k(){var b={};angular.copy(a.filter,b),b.From&&(b.From=b.From.toServerDateTime()),b.To&&(b.To=b.To.toServerDateTime()),c.getLogItems(b,a.refreshTracker).success(function(b){b.Success?(a.logs=b.Data.Items,a.totalItems=b.Data.Count,a.loaded=!0):j(b)}).error(function(a){j(a)})}function l(){a.refreshTracker=h("refresh"),a.logLevels=[{Id:null,Name:"All"},{Id:"Fatal",Name:"Fatal"},{Id:"Error",Name:"Error"},{Id:"Warn",Name:"Warn"},{Id:"Info",Name:"Info"},{Id:"Debug",Name:"Debug"}],a.appNames=["VC.Admin","VC.Public","VitalChoice.Jobs","VitalChoice.ExportService"],a.filter=new i,a.loaded=!1,k()}a.filterLogs=function(){a.filter.Paging.PageIndex=1,k()},a.pageChanged=function(){k()},a.open=function(a){e.open("app/modules/setting/partials/logDetails.html","logDetailsController",{item:a})},l()}]),angular.module("app.modules.setting.controllers.logDetailsController",[]).controller("logDetailsController",["$scope","$uibModalInstance","data","toaster",function(a,b,c,d){function e(){if(a.cancel=function(){b.close()},a.item=c.item,c.item&&c.item.Message&&"{"===c.item.Message[0])try{c.item.Message=angular.fromJson(c.item.Message.replace(/\r?\n/g,"")),a.displayAsObject=!0}catch(d){console.warn(d)}else a.displayAsObject=!1}e()}]),angular.module("app.modules.setting.controllers.countriesController",[]).controller("countriesController",["$scope","$state","$stateParams","settingService","toaster","modalUtil","confirmUtil","promiseTracker",function(a,b,c,d,e,f,g,h){function i(a){var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),e.pop("error","Error!",b,null,"trustedHtml")}function j(){d.getCountries({},a.refreshTracker).success(function(b){b.Success?(a.countries=b.Data,$.each(a.countries,function(a,b){b.type="country",$.each(b.States,function(a,c){c.type=b.CountryCode})})):i(b)}).error(function(a){i(a)})}function k(){j()}function l(b){var c=null;$.each(a.countries,function(a,d){return d.Id==b?(c=a,!1):void 0}),null!=c&&a.countries.splice(c,1)}function m(b,c){$.each(a.countries,function(a,d){if(d.Id==b){var e=null;return $.each(d.States,function(a,b){return b.Id==c?(e=a,!1):void 0}),null!=e&&d.States.splice(e,1),!1}})}function n(b){var c=!1;$.each(a.countries,function(a,d){return d.Id==b.Id?(d.Id=b.Id,d.CountryCode=b.CountryCode,d.CountryName=b.CountryName,d.StatusCode=b.StatusCode,d.IdVisibility=b.IdVisibility,b.type="country",d.States&&$.each(d.States,function(a,b){b.type=d.CountryCode}),c=!0,!1):void 0}),c||(b.type="country",b.States=[],a.countries.push(b))}function o(b,c){$.each(a.countries,function(a,d){if(d.Id==b){var e=!1;return $.each(d.States,function(a,b){return b.Id==c.Id?(b.Id=c.Id,b.StateCode=c.StateCode,b.StateName=c.StateName,b.StatusCode=c.StatusCode,e=!0,!1):void 0}),e||d.States.push(c),d.States&&$.each(d.States,function(a,b){b.type=d.CountryCode}),!1}})}a.refreshTracker=h("refresh"),a.deleteTracker=h("delete"),a.updateCategoriesCollapsed=function(b){b?a.$broadcast("angular-ui-tree:expand-all"):a.$broadcast("angular-ui-tree:collapse-all"),a.categoriesExpanded=b},a.addCountry=function(){f.open("app/modules/setting/partials/addEditCountry.html","addEditCountryController",{thenCallback:function(a){n(a)}})},a.editCountry=function(a){f.open("app/modules/setting/partials/addEditCountry.html","addEditCountryController",{country:a,thenCallback:function(a){n(a)}})},a.addState=function(a,b){f.open("app/modules/setting/partials/addEditState.html","addEditStateController",{countryCode:a,thenCallback:function(a){o(b,a)}})},a.editState=function(a,b){f.open("app/modules/setting/partials/addEditState.html","addEditStateController",{state:b,thenCallback:function(b){o(a,b)}})},a.deleteCountry=function(b){g.confirm(function(){d.deleteCountry(b,a.deleteTracker).success(function(a){a.Success?(e.pop("success","Success!","Successfully deleted."),l(b)):i(a)}).error(function(a){i(a)})},"Are you sure you want to delete this country?")},a.deleteState=function(b,c){g.confirm(function(){d.deleteState(c,a.deleteTracker).success(function(a){a.Success?(e.pop("success","Success!","Successfully deleted."),m(b,c)):i(a)}).error(function(a){i(a)})},"Are you sure you want to delete this state?")},a.save=function(){d.updateCountriesOrder(a.countries,a.editTracker).success(function(a){a.Success?e.pop("success","Success!","Successfully saved."):i(a)}).error(function(a){i(a)})},a.treeOptions={accept:function(a,b,c){var d=a.$modelValue,e=b.$element.attr("data-type");return d.type==e}},k()}]),angular.module("app.modules.setting.controllers.addEditCountryController",[]).controller("addEditCountryController",["$scope","$uibModalInstance","data","settingService","toaster","promiseTracker","$rootScope",function(a,b,c,d,e,f,g){function h(d){if(d.Success)e.pop("success","Success!","Successfully saved."),a.country=d.Data,c.thenCallback(a.country),b.close();else{var f="";d.Messages&&(a.forms.form.submitted=!0,a.serverMessages=new ServerMessages(d.Messages),$.each(d.Messages,function(b,c){c.Field&&a.forms.form[c.Field].$setValidity("server",!1),f+=c.Message+"<br />"})),e.pop("error","Error!",f,null,"trustedHtml")}}function i(a){e.pop("error","Error!","Server error occured")}function j(){a.customerTypes=[{Key:1,Text:"All"},{Key:2,Text:"Wholesale Only"}],a.forms={},c.country?(a.country=Object.clone(c.country),a.country.StatusCode=a.country.StatusCode):a.country={Id:0,CountryCode:"",CountryName:"",StatusCode:2,IdVisibility:1},a.save=function(){$.each(a.forms.form,function(a,b){b&&b.$name==a&&b.$setValidity("server",!0)}),a.forms.form.$valid?d.updateCountry(a.country,a.saveTracker).success(function(a){h(a)}).error(function(a){i(a)}):a.forms.form.submitted=!0},a.cancel=function(){b.close()}}a.saveTracker=f("save"),j()}]),angular.module("app.modules.setting.controllers.addEditStateController",[]).controller("addEditStateController",["$scope","$uibModalInstance","data","settingService","toaster","promiseTracker","$rootScope",function(a,b,c,d,e,f,g){function h(d){if(d.Success)e.pop("success","Success!","Successfully saved."),a.state=d.Data,c.thenCallback(a.state),b.close();else{var f="";d.Messages&&(a.forms.form.submitted=!0,a.serverMessages=new ServerMessages(d.Messages),$.each(d.Messages,function(b,c){c.Field&&a.forms.form[c.Field].$setValidity("server",!1),f+=c.Message+"<br />"})),e.pop("error","Error!",f,null,"trustedHtml")}}function i(a){e.pop("error","Error!","Server error occured")}function j(){a.forms={},c.state?(a.state=Object.clone(c.state),a.state.StatusCode=a.state.StatusCode):a.state={Id:0,CountryCode:c.countryCode,StateCode:"",StateName:"",StatusCode:2},a.save=function(){$.each(a.forms.form,function(a,b){b&&b.$name==a&&b.$setValidity("server",!0)}),a.forms.form.$valid?d.updateState(a.state,a.saveTracker).success(function(a){h(a)}).error(function(a){i(a)}):a.forms.form.submitted=!0},a.cancel=function(){b.close()}}a.saveTracker=f("save"),j()}]),angular.module("app.modules.setting.controllers.settingsController",[]).controller("settingsController",["$scope","$rootScope","$state","$stateParams","settingService","toaster","confirmUtil","promiseTracker",function(a,b,c,d,e,f,g,h){function i(b){if(b.Success)f.pop("success","Success!","Successfully saved."),b.Data?l():f.pop("error","Error!","Server error occured");else{var c="";b.Messages&&(a.forms.submitted=!0,a.serverMessages=new ServerMessages(b.Messages),$.each(b.Messages,function(b,d){d.Field&&a.forms.form[d.Field].$setValidity("server",!1),c+=d.Message+"<br />"})),f.pop("error","Error!",c,null,"trustedHtml")}}function j(a){f.pop("error","Error!","Server error occured")}function k(){a.forms={},a.settings={},l()}function l(){e.getGlobalSettings(a.refreshTracker).success(function(b){b.Success?a.settings=b.Data:j(b)}).error(function(a){j(a)})}a.refreshTracker=h("get"),a.editTracker=h("edit"),a.save=function(){$.each(a.forms.form,function(a,b){b&&b.$name==a&&b.$setValidity("server",!0)}),a.forms.form.$valid?e.updateGlobalSettings(a.settings,a.editTracker).success(function(a){i(a)}).error(function(a){j(a)}):a.forms.form.submitted=!0},k()}]),angular.module("app.modules.setting.controllers.paymentMethodsController",[]).controller("paymentMethodsController",["$scope","promiseTracker","paymentMethodService","toaster","$rootScope",function(a,b,c,d,e){function f(){g()}function g(){c.getPaymentMethods(a.refreshTracker).success(function(b){b.Success?(a.paymentMethods=b.Data,j()):d.pop("error","Error!","Can't get access to the approved payment methods")}).error(function(a){d.pop("error","Error!","Server error ocurred")})}function h(a,b){return a.CustomerTypes&&a.CustomerTypes.indexOf(b)>-1}function i(a,b,c){a[b]?h(a,c)||a.CustomerTypes.push(c):h(a,c)&&a.CustomerTypes.splice(a.CustomerTypes.indexOf(c),1)}function j(){angular.forEach(a.paymentMethods,function(a){h(a,1)&&(a.RetailAvailable=!0),h(a,2)&&(a.WholesaleAvailable=!0)})}function k(){angular.forEach(a.paymentMethods,function(a){i(a,"RetailAvailable",1),i(a,"WholesaleAvailable",2)})}a.refreshTracker=b("refresh"),a.setState=function(){k(),c.setState(a.paymentMethods,a.refreshTracker).success(function(a){if(a.Success)d.pop("success","Success!","Successfully saved");else{var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),d.pop("error","Error!",b,null,"trustedHtml")}g()}).error(function(){d.pop("error","Error!","Server error occured"),g()})},a.retailApplicable=function(a){return h(a,1)},a.wholesaleApplicable=function(a){return h(a,2)},f()}]),angular.module("app.modules.setting.controllers.orderNotesManagementController",[]).controller("orderNotesManagementController",["$scope","orderNoteService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g){function h(){b.getOrderNotes(a.filter,a.refreshTracker).success(function(b){b.Success?(a.orderNotes=b.Data.Items,a.totalItems=b.Data.Count):c.pop("error","Error!","Can't get access to the order specific notes")}).error(function(a){c.pop("error","Error!","Server error ocurred")})}function i(a,b){d.open("app/modules/setting/partials/addEditOrderNote.html","addEditOrderNoteController",{orderNote:a,editMode:b,thenCallback:function(){h()}})}function j(){a.filter={SearchText:"",Paging:{PageIndex:1,PageItemCount:100},Sorting:g.resolve(h,"Title","Asc")},h()}a.refreshTracker=f("refresh"),a.deleteTracker=f("delete"),a.editTracker=f("edit"),a.addTracker=f("add"),a.pageChanged=function(){h()},a.filterOrderNotes=function(){a.filter.Paging.PageIndex=1,h()},a.open=function(d,e){var f={};d?b.getOrderNote(e,a.editTracker).success(function(a){if(a.Success)i(a.Data,d);else{var b="";a.Messages?$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}):b="Can't get order note",c.pop("error","Error!",b,null,"trustedHtml")}}).error(function(a){c.pop("error","Error!","Server error ocurred")}):b.createOrderNotePrototype(a.addTracker).success(function(a){a.Success?(f=a.Data,i(a.Data,d)):c.pop("error","Error!","Can't create order note")}).error(function(a){c.pop("error","Error!","Server error ocurred")})},a["delete"]=function(d,f){e.confirm(function(){b.deleteOrderNote(f,a.deleteTracker).success(function(a){if(a.Success)c.pop("success","Success!","Successfully deleted");else{var b="";a.Messages?$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}):b="Can't delete order note",c.pop("error","Error!",b,null,"trustedHtml")}h()}).error(function(a){c.pop("error","Error!","Server error ocurred"),h()})},"Are you sure you want to delete "+d+" order specific note?")},j()}]),angular.module("app.modules.setting.controllers.addEditOrderNoteController",[]).controller("addEditOrderNoteController",["$scope","$uibModalInstance","data","orderNoteService","toaster","promiseTracker","$rootScope",function(a,b,c,d,e,f,g){function h(d){if(d.Success)e.pop("success","Success!","Successfully saved"),b.close();else{var f="";d.Messages&&(a.orderNoteForm.submitted=!0,a.serverMessages=new ServerMessages(d.Messages),$.each(d.Messages,function(b,c){c.Field&&a.orderNoteForm[c.Field.toLowerCase()]&&a.orderNoteForm[c.Field.toLowerCase()].$setValidity("server",!1),f+=c.Message+"<br />"})),e.pop("error","Error!",f,null,"trustedHtml")}c.thenCallback()}function i(a){e.pop("error","Error!","Server error occured"),c.thenCallback()}function j(){a.orderNote=c.orderNote,a.editMode=c.editMode,a.save=function(){$.each(a.orderNoteForm,function(a,b){b&&b.$name==a&&b.$setValidity("server",!0)}),a.orderNoteForm.$valid?(a.saving=!0,a.editMode?d.updateOrderNote(a.orderNote,a.saveTracker).success(function(a){h(a)}).error(function(a){i(a)}):d.createOrderNote(a.orderNote,a.saveTracker).success(function(a){h(a)}).error(function(a){i(a)})):a.orderNoteForm.submitted=!0},a.cancel=function(){b.close()}}a.saveTracker=f("save"),a.toggleCustomerTypeSelection=function(b){a.orderNote.CustomerTypes||(a.orderNote.CustomerTypes=[]);var c=a.orderNote.CustomerTypes.indexOf(b);c>-1?a.orderNote.CustomerTypes.splice(c,1):a.orderNote.CustomerTypes.push(b)},j()}]),angular.module("app.modules.setting.controllers.objectLogReportController",[]).controller("objectLogReportController",["$scope","$uibModalInstance","$rootScope","$timeout","$window","data","toaster","promiseTracker",function(a,b,c,d,e,f,g,h){function i(){a.forms={},a.options={},a.options.isDiff=!1,a.options.showUnchanged=!1,a.$watch("options.showUnchanged",function(a,b){jsondiffpatch.formatters.html.showUnchanged(a,null,500)}),a.$watch("options.isDiff",function(b,c){b&&jsondiffpatch.formatters.html.showUnchanged(a.options.showUnchanged)}),a.MainJsonData=angular.fromJson(f.Main.Data),a.BeforeJsonData=angular.fromJson(f.Before.Data),a.report=f,j(),d(function(){$(".wrapper > div > div.json-formatter-row > a").click()},100)}function j(){var b=e.jsondiffpatch,c=(b.create({objectHash:function(a){return"undefined"!=typeof a._id?a._id:"undefined"!=typeof a.id?a._id:"undefined"!=typeof a.name?a.name:JSON.stringify(a)},arrays:{detectMove:!0,includeValueOnMove:!1},textDiff:{minLength:60}}),b.diff(a.BeforeJsonData,a.MainJsonData));void 0===c?a.visualDiff="No Diff":a.visualDiff=b.formatters.html.format(c,a.BeforeJsonData)}a.cancel=function(){b.close()},i()}]),angular.module("app.modules.setting.controllers.objectHistorySectionController",[]).controller("objectHistorySectionController",["$scope","$rootScope","$state","settingService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h,i){function j(a){var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),e.pop("error","Error!",b,null,"trustedHtml")}function k(){a.historyItems=null,a.historyItemsCount=0;var b=2==a.historyFilter.IdObjectType?d.getOrderObjectHistoryLogItems:d.getObjectHistoryLogItems;b(a.historyFilter,a.tracker).success(function(b){b.Success?(a.historyItems=b.Data.Items,a.historyItemsCount=b.Data.Count):j(b)}).error(function(a){j(a)})}function l(){a.service=null,a.tracker=null,a.historyFilter={IdObject:null,IdObjectType:null,DataReferenceId:null,Paging:{PageIndex:1,PageItemCount:20}}}a.$on("objectHistorySection#in#refresh",function(b,c){a.service=c.service,a.tracker=c.tracker,a.historyFilter.IdObject=c.idObject,a.historyFilter.IdObjectType=c.idObjectType,k()}),a.openHistoryReport=function(b){a.historyFilter.DataReferenceId=b,a.service.getHistoryReport(a.historyFilter,a.tracker).success(function(a){a.Success?f.open("app/modules/setting/partials/objectLogReportPopup.html","objectLogReportController",a.Data,{size:"lg"}):j(a)}).error(function(a){j(a)})},l()}]),angular.module("app.modules.setting.controllers.infoDetailsPopupController",[]).controller("infoDetailsPopupController",["$scope","$uibModalInstance","data","toaster",function(a,b,c,d){function e(){a.Header=c.Header,a.Messages=c.Messages,a.CancelButton={Label:"Cancel"},c.CancelButton&&(a.CancelButton=c.CancelButton),c.OkButton&&(a.OkButton=c.OkButton),a.cancel=function(){a.CancelButton&&a.CancelButton.Handler&&a.CancelButton.Handler(),b.close()},a.ok=function(){a.OkButton&&a.OkButton.Handler&&a.OkButton.Handler(),b.close()}}e()}]),angular.module("app.modules.setting.controllers.lookupsController",[]).controller("lookupsController",["$scope","$state","settingService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h){function i(a){d.pop("error","Error!","Server error occured")}function j(){c.getLookups(a.refreshTracker).success(function(b){b.Success?a.items=b.Data:i(b)}).error(function(a){i(a)})}function k(){j()}a.refreshTracker=g("refresh"),k()}]),angular.module("app.modules.setting.controllers.lookupDetailController",[]).controller("lookupDetailController",["$scope","$rootScope","$state","$stateParams","$timeout","settingService","toaster","modalUtil","confirmUtil","promiseTracker",function(a,b,c,d,e,f,g,h,i,j){function k(b){if(b.Success)g.pop("success","Success!","Successfully saved.");else{var c="";b.Messages&&(a.forms.submitted=!0,a.serverMessages=new ServerMessages(b.Messages),$.each(b.Messages,function(b,d){d.Field&&a.forms.form[d.Field].$setValidity("server",!1),c+=d.Message+"<br />"})),g.pop("error","Error!",c,null,"trustedHtml")}}function l(a){g.pop("error","Error!","Server error occured")}function m(){a.state=1,a.forms={},f.getLookup(d.id,a.refreshTracker).success(function(b){b.Success&&(a.lookup=b.Data)}).error(function(a){l(a)})}a.refreshTracker=j("get"),a.save=function(){$.each(a.forms.form,function(a,b){b&&b.$name==a&&b.$setValidity("server",!0)}),n(),o(),a.forms.form.$valid?f.updateLookupVariants(a.lookup.Id,a.lookup.LookupVariants,a.refreshTracker).success(function(a){k(a)}).error(function(a){l(a)}):a.forms.submitted=!0},a.sortableOptions={handle:" .sortable-move",items:" .variant-panel",axis:"y",start:function(b,c){a.dragging=!0},stop:function(b,c){a.dragging=!1;var d=[];$.each(a.lookup.LookupVariants,function(a,b){var c={};angular.copy(b,c),d.push(c)}),a.lookup.LookupVariants=[],a.lookup.LookupVariants=d}},a.addVariant=function(){if(n(),o(),!a.forms.form.$valid)return a.forms.submitted=!0,!1;var b={ValueVariant:""},c=[];$.each(a.lookup.LookupVariants,function(a,b){var d={};angular.copy(b,d),c.push(d)}),c.push(b),a.lookup.LookupVariants=[],a.lookup.LookupVariants=c,a.forms.submitted=!1},a.deleteVariant=function(b){var c=[];$.each(a.lookup.LookupVariants,function(a,b){var d={};angular.copy(b,d),c.push(d)}),c.splice(b,1),a.lookup.LookupVariants=[],a.lookup.LookupVariants=c};var n=function(){$.each(a.forms.form,function(a,b){b&&0==a.indexOf("i")&&void 0!=b.ValueVariant&&b.ValueVariant.$setValidity("exist",!0)})},o=function(){$.each(a.forms.form,function(b,c){if(c&&0==b.indexOf("i")&&void 0!=c.ValueVariant){var d=parseInt(b.replace("i",""));if(void 0!=a.lookup.LookupVariants[d]&&a.lookup.LookupVariants[d].ValueVariant){var e=a.lookup.LookupVariants[d].ValueVariant;$.each(a.lookup.LookupVariants,function(a,b){d!=a&&b.ValueVariant&&e.toLowerCase()==b.ValueVariant.toLowerCase()&&c.ValueVariant.$setValidity("exist",!1)})}}})};m()}]),angular.module("app.modules.setting.controllers.profileScopesController",[]).controller("profileScopesController",["$scope","$state","$stateParams","settingService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h,i){function j(a){var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),e.pop("error","Error!",b,null,"trustedHtml")}function k(){d.getProfileScopeItems(a.filter,a.refreshTracker).success(function(b){
b.Success?(a.options.Items=b.Data.Items,a.totalItems=b.Data.Count):j(b)}).error(function(a){j(a)})}function l(){a.options={},a.filter={Paging:{PageIndex:1,PageItemCount:20},Sorting:i.resolve(k,"TimeElapsed","Desc")},k()}a.refreshTracker=h("refresh"),a.pageChanged=function(){k()},a.updateCategoriesCollapsed=function(b){b?a.$broadcast("angular-ui-tree:expand-all"):a.$broadcast("angular-ui-tree:collapse-all"),a.categoriesExpanded=b},a.toggle=function(a){a.ShowInner=!a.ShowInner},l()}]),angular.module("app.modules.setting",["app.modules.setting.controllers.logsController","app.modules.setting.controllers.logDetailsController","app.modules.setting.controllers.countriesController","app.modules.setting.controllers.addEditCountryController","app.modules.setting.controllers.addEditStateController","app.modules.setting.controllers.settingsController","app.modules.setting.controllers.paymentMethodsController","app.modules.setting.controllers.orderNotesManagementController","app.modules.setting.controllers.addEditOrderNoteController","app.modules.setting.controllers.objectLogReportController","app.modules.setting.controllers.objectHistorySectionController","app.modules.setting.controllers.infoDetailsPopupController","app.modules.setting.controllers.lookupsController","app.modules.setting.controllers.lookupDetailController","app.modules.setting.controllers.profileScopesController"]).config(["$stateProvider","$urlRouterProvider",function(a,b){a.state("index.oneCol.manageLogs",{url:"/settings/logs",templateUrl:"app/modules/setting/partials/logsList.html",controller:"logsController"}).state("index.oneCol.manageProfileScopes",{url:"/settings/profile-scopes",templateUrl:"app/modules/setting/partials/profileScopesList.html",controller:"profileScopesController"}).state("index.oneCol.manageCountries",{url:"/settings/countries",templateUrl:"app/modules/setting/partials/countries.html",controller:"countriesController"}).state("index.oneCol.manageSettings",{url:"/settings",templateUrl:"app/modules/setting/partials/settingsDetail.html",controller:"settingsController"}).state("index.oneCol.managePaymentMethods",{url:"/settings/approvedpaymentmethods",templateUrl:"app/modules/setting/partials/paymentMethodsList.html",controller:"paymentMethodsController"}).state("index.oneCol.manageOrderNotes",{url:"/settings/ordernotes",templateUrl:"app/modules/setting/partials/orderNotesList.html",controller:"orderNotesManagementController"}).state("index.oneCol.manageLookups",{url:"/settings/lookups",templateUrl:"app/modules/setting/partials/lookupsList.html",controller:"lookupsController"}).state("index.oneCol.lookupDetail",{url:"/settings/lookups/{id:int}",templateUrl:"app/modules/setting/partials/lookupDetail.html",controller:"lookupDetailController"})}]),angular.module("app.modules.product.controllers.productCategoriesController",[]).controller("productCategoriesController",["$scope","$state","$stateParams","productService","toaster","modalUtil","confirmUtil","promiseTracker",function(a,b,c,d,e,f,g,h){function i(a){var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),e.pop("error","Error!",b,null,"trustedHtml")}function j(){d.getCategoriesTree({},a.refreshTracker).success(function(b){b.Success?(a.rootCategory=b.Data,a.loaded=!0,a.categoriesExpanded=!0):i(b)}).error(function(a){i(a)})}function k(){a.mode=c.mode,a.id=c.id,a.loaded=!1,j()}function l(b){m(a.rootCategory,b)}function m(a,b){var c=null;$.each(a.SubItems,function(a,d){return d.Id==b?(c=a,!1):void 0}),null!=c?a.SubItems.splice(c,1):$.each(a.SubItems,function(a,c){m(c,b)})}a.refreshTracker=h("refresh"),a.editTracker=h("edit"),a.deleteTracker=h("delete"),a.updateCategoriesCollapsed=function(b){b?a.$broadcast("angular-ui-tree:expand-all"):a.$broadcast("angular-ui-tree:collapse-all"),a.categoriesExpanded=b},a.open=function(a){b.go("index.oneCol.productCategoryDetail",{id:a})},a.add=function(a){b.go("index.oneCol.addNewProductCategory",{categoryid:a})},a.productsOrder=function(a){f.open("app/modules/product/partials/manageProductsOrderPopup.html","manageProductsOrderController",{idCategory:a,thenCallback:function(a){}},{size:"lg"})},a["delete"]=function(b){g.confirm(function(){d.deleteCategory(b,a.deleteTracker).success(function(a){a.Success?(e.pop("success","Success!","Successfully deleted."),l(b)):i(a)}).error(function(a){i(a)})},"Are you sure you want to delete this category?")},a.save=function(){d.updateCategoriesTree(a.rootCategory,a.editTracker).success(function(a){a.Success?e.pop("success","Success!","Successfully saved."):i(a)}).error(function(a){i(a)})},k()}]),angular.module("app.modules.product.controllers.productCategoryManageController",[]).controller("productCategoryManageController",["$scope","$rootScope","$state","$stateParams","productService","contentService","settingService","toaster","confirmUtil","promiseTracker",function(a,b,c,d,e,f,g,h,i,j){function k(){if(a.productCategory&&a.productCategory.Id){var b={};b.service=g,b.tracker=a.refreshTracker,b.idObject=a.productCategory.Id,b.idObjectType=14,a.$broadcast("objectHistorySection#in#refresh",b)}}function l(b){if(b.Success)h.pop("success","Success!","Successfully saved."),a.id=b.Data.Id,a.productCategory.Id=b.Data.Id,a.productCategory.MasterContentItemId=b.Data.MasterContentItemId,a.previewUrl=a.baseUrl.format(a.productCategory.Url),k();else{var c="";b.Messages&&(a.forms.form.submitted=!0,a.detailsTab.active=!0,a.serverMessages=new ServerMessages(b.Messages),$.each(b.Messages,function(b,d){d.Field&&a.forms.form[d.Field].$setValidity("server",!1),c+=d.Message+"<br />"})),h.pop("error","Error!",c,null,"trustedHtml")}}function m(a){h.pop("error","Error!","Server error occured")}function n(){a.id=d.id?d.id:0,a.baseUrl="http://"+b.ReferenceData.PublicHost+"/products/{0}?preview=true",a.previewUrl=null,a.statuses=b.ReferenceData.ProductCategoryStatusNames,a.visibleOptions=b.ReferenceData.VisibleOptions,a.toogleEditorState=function(b){a[b]=!a[b]},a.detailsTab={active:!0},a.loaded=!1,a.forms={},p()}function o(){e.getCategory(a.id,a.refreshTracker).success(function(b){b.Success?(a.productCategory=b.Data,a.productCategory.Url&&(a.previewUrl=a.baseUrl.format(a.productCategory.Url)),a.productCategory.MasterContentItemId||(a.productCategory.MasterContentItemId=a.MasterContentItemId),d.categoryid&&(a.productCategory.ParentId=d.categoryid),q(a.productCategory),a.loaded=!0,k()):m(b)}).error(function(a){m(a)})}function p(){f.getMasterContentItems({Type:9}).success(function(b){if(b.Success){a.masters=b.Data;var c=!1;$.each(a.masters,function(b,d){(d.IsDefault||1==a.masters.length)&&(c=!0,a.MasterContentItemId=d.Id)}),c||(a.MasterContentItemId=a.masters[0].Id),o()}else m(b)}).error(function(a){m(a)})}function q(a){a.Status=a.StatusCode+":"+a.Assigned}function r(a){var b=a.Status.split(":");a.StatusCode=parseInt(b[0]),a.Assigned=parseInt(b[1])}a.refreshTracker=j("get"),a.editTracker=j("edit"),a.save=function(){$.each(a.forms.form,function(a,b){b&&b.$name==a&&b.$setValidity("server",!0)}),a.forms.form.$valid?(r(a.productCategory),e.updateCategory(a.productCategory,a.editTracker).success(function(a){l(a)}).error(function(a){m(a)})):(a.forms.form.submitted=!0,a.detailsTab.active=!0)},a.goToMaster=function(a){c.go("index.oneCol.masterDetail",{id:a})},n()}]),angular.module("app.modules.product.controllers.inventoryCategoriesController",[]).controller("inventoryCategoriesController",["$scope","$state","$stateParams","productService","toaster","modalUtil","confirmUtil","promiseTracker",function(a,b,c,d,e,f,g,h){function i(a){var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),e.pop("error","Error!",b,null,"trustedHtml")}function j(){d.getInventoryCategoriesTree({},a.refreshTracker).success(function(b){b.Success?(a.rootCategories=b.Data,$.each(a.rootCategories,function(a,b){l(b)}),a.categoriesExpanded=!0):i(b)}).error(function(a){i(a)})}function k(){j()}function l(b){b.AllowDelete=!b.SubItems||0==b.SubItems.length;var c=1,d=null;$.each(a.rootCategories,function(a,e){var f=m(e,b.Id,c);return f?(d=f,!1):void 0}),b.Level=d.level,b.AllowAdd=b.Level<q,b.SubItems&&$.each(b.SubItems,function(a,c){c.ParentId=b.Id,l(c)})}function m(a,b,c){var d=null;if(a.Id==b&&(d=a),null!=d)return{category:d,level:c};if(c+=1,$.each(a.SubItems,function(a,c){return c.Id==b?(d=c,!1):void 0}),null!=d)return{category:d,level:c};var e=null;return $.each(a.SubItems,function(a,d){var f=m(d,b,c);return f?(e=f,!1):void 0}),e?e:null}function n(b){var c=null;$.each(a.rootCategories,function(a,d){return d.Id==b?(c=a,!1):void o(d,b)}),null!=c&&a.rootCategories.splice(c,1),$.each(a.rootCategories,function(a,b){l(b)})}function o(a,b){var c=null;$.each(a.SubItems,function(a,d){return d.Id==b?(c=a,!1):void 0}),null!=c?a.SubItems.splice(c,1):$.each(a.SubItems,function(a,c){o(c,b)})}function p(b,c,d){if(d)b.SubItems=[],a.rootCategories.push(b);else{var e=c;c||(e=b.Id);var f=null,g=1;$.each(a.rootCategories,function(a,b){var c=m(b,e,g);return c?(f=c,!1):void 0}),f&&(f=f.category),c?(b.SubItems=[],f.SubItems.push(b)):f.Name=b.Name}$.each(a.rootCategories,function(a,b){l(b)})}a.refreshTracker=h("refresh"),a.editTracker=h("edit"),a.deleteTracker=h("delete");var q=5;a.updateCategoriesCollapsed=function(b){b?a.$broadcast("angular-ui-tree:expand-all"):a.$broadcast("angular-ui-tree:collapse-all"),a.categoriesExpanded=b},a.edit=function(a){f.open("app/modules/product/partials/inventoryCategoryDetail.html","inventoryCategoryManageController",{id:a,thenCallback:function(a){p(a)}})},a.add=function(a){f.open("app/modules/product/partials/inventoryCategoryDetail.html","inventoryCategoryManageController",{categoryid:a,thenCallback:function(b){p(b,a,null==a)}})},a["delete"]=function(b){g.confirm(function(){d.deleteInventoryCategory(b,a.deleteTracker).success(function(a){a.Success?(e.pop("success","Success!","Successfully deleted."),n(b)):i(a)}).error(function(a){i(a)})},"Are you sure you want to delete this category?")},a.save=function(){d.updateInventoryCategoriesTree(a.rootCategories,a.editTracker).success(function(a){a.Success?e.pop("success","Success!","Successfully saved."):i(a)}).error(function(a){i(a)})},a.treeOptions={accept:function(a,b,c){var d=a.$modelValue,e=b.$element.attr("data-type");return 0==e&&null==d.ParentId||d.ParentId==e}},k()}]),angular.module("app.modules.product.controllers.inventoryCategoryManageController",[]).controller("inventoryCategoryManageController",["$scope","$uibModalInstance","data","productService","toaster","confirmUtil","promiseTracker",function(a,b,c,d,e,f,g){function h(d){if(d.Success)e.pop("success","Success!","Successfully saved."),a.id=d.Data.Id,a.category.Id=d.Data.Id,c.thenCallback(a.category),b.close();else{var f="";d.Messages&&(a.forms.submitted=!0,a.serverMessages=new ServerMessages(d.Messages),$.each(d.Messages,function(b,c){c.Field&&a.forms.form[c.Field].$setValidity("server",!1),f+=c.Message+"<br />"})),e.pop("error","Error!",f,null,"trustedHtml")}}function i(a){e.pop("error","Error!","Server error occured")}function j(){a.id=c.id?c.id:0,a.forms={},d.getInventoryCategory(a.id,a.refreshTracker).success(function(b){b.Success?(a.category=b.Data,c.categoryid&&(a.category.ParentId=c.categoryid)):i(b)}).error(function(a){i(a)})}a.refreshTracker=g("get"),a.editTracker=g("edit"),a.save=function(){$.each(a.forms.form,function(a,b){b&&b.$name==a&&b.$setValidity("server",!0)}),a.forms.form.$valid?d.updateInventoryCategory(a.category,a.editTracker).success(function(a){h(a)}).error(function(a){i(a)}):a.forms.submitted=!0},a.cancel=function(){b.close()},j()}]),angular.module("app.modules.product.controllers.productsController",[]).controller("productsController",["$scope","$rootScope","$state","productService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h,i){function j(a){var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),e.pop("error","Error!",b,null,"trustedHtml")}function k(){d.getProducts(a.filter,a.refreshTracker).success(function(b){b.Success?($.each(b.Data.Items,function(a,b){b.Thumbnail&&(b.ThumbnailUrl=self.baseUrl.format(b.Thumbnail))}),a.products=b.Data.Items,a.totalItems=b.Data.Count):j(b)}).error(function(a){j(a)})}function l(){self.baseUrl="https://"+b.ReferenceData.PublicHost+"{0}",a.filter={SearchText:"",CategoryId:null,Paging:{PageIndex:1,PageItemCount:100},Sorting:i.resolve(k,"Name","Asc")}}a.refreshTracker=h("refresh"),a.deleteTracker=h("delete"),a.filterProducts=function(){a.filter.Paging.PageIndex=1,k()},a.pageChanged=function(){k()},a.open=function(a){a?c.go("index.oneCol.productDetail",{id:a}):f.open("app/modules/product/partials/addProductPopup.html","addProductPopupController",{thenCallback:function(a){c.go("index.oneCol.addNewProduct",{type:a})}})},a["delete"]=function(b){g.confirm(function(){d.deleteProduct(b,a.deleteTracker).success(function(a){a.Success?(e.pop("success","Success!","Successfully deleted."),k()):j(a)}).error(function(a){j(a)})},"Are you sure you want to delete this product?")},l()}]),angular.module("app.modules.product.controllers.productManageController",[]).controller("productManageController",["$scope","$rootScope","$state","$stateParams","$timeout","$uibModal","productService","inventorySkuService","toaster","confirmUtil","promiseTracker","contentService","modalUtil",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(){if(a.product&&a.product.Id){var b={};b.service=g,b.tracker=a.refreshTracker,b.idObject=a.product.Id,b.idObjectType=3,a.$broadcast("objectHistorySection#in#refresh",b)}}function o(b){if(b.Success)i.pop("success","Success!","Successfully saved."),a.product.Id=b.Data.Id,a.previewUrl=a.basePreviewUrl.format(a.product.Url),a.product.MasterContentItemId=b.Data.MasterContentItemId,J(),n();else{var c="";if(b.Messages){a.forms.submitted=!0,a.forms.skussubmitted=!0,a.forms.crossessubmitted=!0,a.forms.videossubmitted=!0,a.serverMessages=new ServerMessages(b.Messages);var d=null;$.each(b.Messages,function(b,e){if(e.Field)if(e.Field.indexOf(".")>-1){var f=e.Field.split(".");a.forms[f[0]][f[1]][f[2]].$setValidity("server",!1),d=f[0],Q()}else $.each(a.forms,function(a,b){return b&&"boolean"!=typeof b&&void 0!=b[e.Field]?(b[e.Field].$setValidity("server",!1),null==d&&(d=a),!1):void 0});else c+=e.Message+"<br/>"}),d&&z(d)}i.pop("error","Error!",c,null,"trustedHtml")}}function p(a){i.pop("error","Error!","Server error occured")}function q(){a.id=d.id?d.id:0,a.forms={},a.youTubeBaseUrl="https://www.youtube.com/watch?v={0}",a.basePreviewUrl="http://"+b.ReferenceData.PublicHost+"/product/{0}?preview=true",a.previewUrl=null,a.allTypes=b.ReferenceData.ProductTypes,a.googleCategories=[],a.specialIcons=[],a.sellers=[],a.defaultSeller=null,a.productTypeDefaults={},a.options={},a.parentDetailsTab={index:1,formName:"parentDetails"},a.imagesTab={index:2,formName:"images"},a.subProductsTab={index:3,formName:"SKUs"},a.nutritionalTab={index:4,formName:"nutritional"},a.categoriesTab={index:5,formName:"categories"},a.salesCategoriesTab={index:6,formName:"salesCategories"},a.crossSellProductsAndVideosTab={index:7,formName:"crossSellProductsAndVideos"},a.options.activeTabIndex=a.parentDetailsTab.index;var c=[];c.push(a.parentDetailsTab),c.push(a.imagesTab),c.push(a.subProductsTab),c.push(a.nutritionalTab),c.push(a.categoriesTab),c.push(a.salesCategoriesTab),c.push(a.crossSellProductsAndVideosTab),a.tabs=c,t(),u(),v(),r()}function r(){l.getMasterContentItems({Type:10}).success(function(b){if(b.Success){a.masters=b.Data;var c=!1;$.each(a.masters,function(b,d){(d.IsDefault||1==a.masters.length)&&(c=!0,a.MasterContentItemId=d.Id)}),c||(a.MasterContentItemId=a.masters[0].Id),s()}else p(b)}).error(function(a){p(a)})}function s(){a.lookups&&a.defaults&&a.rootCategory&&a.rootInventoryCategory&&a.masters&&w()}function t(){g.getProductEditSettings(a.refreshTracker).success(function(b){b.Success?(a.lookups=b.Data.Lookups,a.defaults=b.Data.DefaultValues,$.each(a.lookups,function(b,c){"InventorySkuChannels"==c.Name&&(a.inventorySkuChannels=c.Items)}),s()):p(b)}).error(function(a){p(a)})}function u(){g.getCategoriesTree({},a.refreshTracker).success(function(b){b.Success?(a.rootCategory=b.Data,s()):p(b)}).error(function(a){p(a)})}function v(){g.getInventoryCategoriesTree({},a.refreshTracker).success(function(b){b.Success?(a.rootInventoryCategory={},a.rootInventoryCategory.SubItems=b.Data,s()):p(b)}).error(function(a){p(a)})}function w(){g.getProduct(a.id,a.refreshTracker).success(function(b){b.Success?(a.product=b.Data,a.product.StatusCode=a.product.StatusCode,0==a.id&&(d.type?a.product.Type=d.type:a.product.Type=2),a.product.Url&&(a.previewUrl=a.basePreviewUrl.format(a.product.Url)),a.product.MasterContentItemId||(a.product.MasterContentItemId=a.MasterContentItemId),a.product.SKUs&&$.each(a.product.SKUs,function(a,b){b.BornDate&&(b.BornDate=Date.parseDateTime(b.BornDate),b.OriginBornDate=b.BornDate)}),n(),x(a.rootCategory,a.product.CategoryIds),a.updateSalesCategoriesCollapsed(!0),J(),K(),R(),T()):p(b)}).error(function(a){p(a)})}function x(a,b){a.IsSelected=!1,$.each(b,function(b,c){a.Id==c&&(a.IsSelected=!0)}),$.each(a.SubItems,function(a,c){x(c,b)})}function y(a,b){a.IsSelected&&b.push(a.Id),$.each(a.SubItems,function(a,c){y(c,b)})}function z(b){$.each(a.tabs,function(c,d){return 0!=b.indexOf("SKUs")&&"skusDetails"!=b||(b="SKUs"),0==b.indexOf("CrossSellProducts")&&(b="crossSellProductsAndVideos"),0==b.indexOf("Videos")&&(b="crossSellProductsAndVideos"),d.formName==b?(a.options.activeTabIndex=d.index,!1):void 0})}a.refreshTracker=k("get"),a.refreshInventoriesTracker=k("refreshInventories");var A="Seller",B="GoogleCategory",C="SpecialIcon",D="DisregardStock",E="Stock",F="NonDiscountable",G="HideFromDataFeed",H="QTYThreshold",I=function(){$.each(a.forms,function(a,b){b&&"boolean"!=typeof b&&("SKUs"==a||"CrossSellProducts"==a||"Videos"==a?$.each(b,function(a,b){0==a.indexOf("i")&&$.each(b,function(a,b){b&&b.$name==a&&b.$setValidity("server",!0)})}):$.each(b,function(a,b){b&&b.$name==a&&b.$setValidity("server",!0)}))})};a.save=function(){I(),P(),O(),Q();var b=!0;if($.each(a.forms,function(a,c){return c&&"boolean"!=typeof c&&!c.$valid&&"submitted"!=a&&"skussubmitted"!=a&&"crossessubmitted"!=a&&"videossubmitted"!=a?(b=!1,z(a),!1):void 0}),b=b&&N()){var c=[];y(a.rootCategory,c),a.product.CategoryIds=c,S(),U();var d=angular.copy(a.product);d.SKUs&&$.each(d.SKUs,function(a,b){b.BornDate&&(b.BornDate!=b.OriginBornDate&&b.BornDate.setHours(0,0,0),b.BornDate=b.BornDate.toServerDateTime())}),g.updateProduct(d,a.refreshTracker).success(function(a){o(a)}).error(function(a){p(a)})}else a.forms.submitted=!0,a.forms.skussubmitted=!0,a.forms.crossessubmitted=!0,a.forms.videossubmitted=!0,i.pop("error","Error!","Validation errors, please correct field values.",null,"trustedHtml")},a.updateCategoriesCollapsed=function(b){b?a.$broadcast("angular-ui-tree:expand-all",{name:"public"}):a.$broadcast("angular-ui-tree:collapse-all",{name:"public"}),a.categoriesExpanded=b},a.updateSalesCategoriesCollapsed=function(b){b?a.$broadcast("angular-ui-tree:expand-all"):a.$broadcast("angular-ui-tree:collapse-all"),a.salesCategoriesExpanded=b},a.sortableOptions={handle:" .sortable-move",items:" .panel:not(.panel-heading)",axis:"y",start:function(b,c){a.dragging=!0},stop:function(b,c){a.dragging=!1}},a.sortableOptionsSKU={handle:" .sortable-move",items:" .panel:not(.panel-heading)",axis:"y",start:function(b,c){a.dragging=!0},stop:function(b,c){a.dragging=!1;var d=[];$.each(a.product.SKUs,function(a,b){var c={};angular.copy(b,c),d.push(c)}),a.product.SKUs=[],a.product.SKUs=d}},a.toogleEditorState=function(b){a[b]=!a[b]};var J=function(){var b=[];1!=a.product.Type&&2!=a.product.Type||$.each(a.allTypes,function(a,c){1!=c.Key&&2!=c.Key||b.push(c)}),3!=a.product.Type&&4!=a.product.Type||$.each(a.allTypes,function(a,c){3!=c.Key&&4!=c.Key||b.push(c)}),a.types=b},K=function(){a.$watch("product.Type",function(b,c){b&&(a.sellers=L(A,b),a.defaultSeller=M(A,b),a.defaultSeller||(a.defaultSeller=1),a.googleCategories=L(B,b,!0),a.product.GoogleCategory||(a.product.GoogleCategory=M(B,b)),a.specialIcons=L(C,b,!0),a.product.SpecialIcon||(a.product.SpecialIcon=M(C,b)),$.each(a.defaults,function(c,d){return c==b?(a.productTypeDefaults=d,!1):void 0}))})},L=function(b,c,d){var e=[];return $.each(a.lookups,function(a,f){if(f.Name==b&&f.Type==c){var g=f.Items;angular.copy(g,e),d&&e.splice(0,0,{Key:null,Text:"None"})}}),e},M=function(b,c){var d=null;return $.each(a.lookups,function(a,e){e.Name==b&&e.Type==c&&(d=e.DefaultValue)}),d};a.setCustomVideo=function(a){a.VideoUse=!0,a.ImageUse=!0,a.TextUse=!0,a.IsDefault=!1},a.removeCustomVideo=function(a){a.VideoUse=!1,a.ImageUse=!1,a.TextUse=!1,a.IsDefault=!0},a.setCustomCross=function(a){a.ImageUse=!0,a.UrlUse=!0,a.IsDefault=!1},a.removeCustomCross=function(a){a.ImageUse=!1,a.UrlUse=!1,a.IsDefault=!0},a.deleteSKU=function(b){var c=[];$.each(a.product.SKUs,function(a,b){var d={};angular.copy(b,d),c.push(d)}),c.splice(b,1),a.product.SKUs=[],a.product.SKUs=c},a.goToMaster=function(a){c.go("index.oneCol.masterDetail",{id:a})},a.addSKU=function(){I(),P(),O();var b=Q();if(!b)return a.forms.skussubmitted=!0,!1;var c={Id:0,Name:"",Active:!0,RetailPrice:0,WholesalePrice:0,Stock:parseInt(a.productTypeDefaults[E]),DisregardStock:Boolean.parse(a.productTypeDefaults[D]),NonDiscountable:Boolean.parse(a.productTypeDefaults[F]),HideFromDataFeed:Boolean.parse(a.productTypeDefaults[G]),QTYThreshold:a.productTypeDefaults[H]?parseInt(a.productTypeDefaults[H]):null,Seller:a.defaultSeller,InventorySkus:[],IsOpen:!0},d=[];$.each(a.product.SKUs,function(a,b){var c={};angular.copy(b,c),c.IsOpen=!1,d.push(c)}),d.splice(0,0,c),a.product.SKUs=[],a.product.SKUs=d,a.forms.skussubmitted=!1};var N=function(){var b=!0;return $.each(a.product.SKUs,function(a,c){b=b&&!(c.AutoShipProduct&&!c.AutoShipFrequency1&&!c.AutoShipFrequency2&&!c.AutoShipFrequency3&&!c.AutoShipFrequency6)}),b},O=function(){$.each(a.forms.SKUs,function(b,c){if(c&&0==b.indexOf("i")&&void 0!=c.Name){var d=parseInt(b.replace("i",""));if(void 0!=a.product.SKUs[d]&&a.product.SKUs[d].Name){var e=a.product.SKUs[d].Name;$.each(a.product.SKUs,function(a,b){d!=a&&b.Name&&e.toLowerCase()==b.Name.toLowerCase()&&c.Name.$setValidity("exist",!1)})}}})},P=function(){$.each(a.forms.SKUs,function(a,b){b&&0==a.indexOf("i")&&void 0!=b.Name&&b.Name.$setValidity("exist",!0)})},Q=function(){var b=!0;return $.each(a.forms.SKUs,function(c,d){if(d&&0==c.indexOf("i")&&!d.$valid){var e=parseInt(c.replace("i",""));void 0!=a.product.SKUs[e]&&(a.product.SKUs[e].IsOpen=!0),b=!1}}),b},R=function(){$.each(a.product.CrossSellProducts,function(a,b){(b.Image||b.Url)&&(b.ImageUse=!0,b.UrlUse=!0)})},S=function(){$.each(a.product.CrossSellProducts,function(a,b){b.ImageUse||(b.Image=null),b.UrlUse||(b.Url=null)})},T=function(){$.each(a.product.Videos,function(a,b){(b.Video||b.Image||b.Text)&&(b.VideoUse=!0,b.ImageUse=!0,b.TextUse=!0)})},U=function(){$.each(a.product.Videos,function(a,b){b.VideoUse||(b.Video=null),b.ImageUse||(b.Image=null),b.TextUse||(b.Text=null)})};a.autoShipProductClick=function(a){a.AutoShipProduct&&(a.AutoShipFrequency1=!0,a.AutoShipFrequency2=!0,a.AutoShipFrequency3=!0,a.AutoShipFrequency6=!0)},a.toggleOpen=function(a,b){a.IsOpen=!a.IsOpen},a.assignInventorySkus=function(a){return m.open("app/modules/inventorysku/partials/assignInventorySkusPopup.html","assignInventorySkusController",{assignedItems:a.InventorySkus,thenCallback:function(b){a.InventorySkus=b}},{size:"sm"}),event.stopPropagation(),!1},q()}]),angular.module("app.modules.product.controllers.addProductPopupController",[]).controller("addProductPopupController",["$scope","$uibModalInstance","data","settingService","toaster","promiseTracker","$rootScope",function(a,b,c,d,e,f,g){function h(){a.types=g.ReferenceData.ProductTypes,a.type=2,a.forms={},a.save=function(){c.thenCallback(a.type),b.close()},a.cancel=function(){b.close()}}h()}]),angular.module("app.modules.product.controllers.discountsController",[]).controller("discountsController",["$scope","$rootScope","$state","discountService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h,i){function j(a){var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),e.pop("error","Error!",b,null,"trustedHtml")}function k(){var b={};angular.copy(a.filter,b),b.ValidFrom&&(b.ValidFrom=b.ValidFrom.toServerDateTime()),b.ValidTo&&(b.ValidTo=b.ValidTo.toServerDateTime()),d.getDiscounts(b,a.refreshTracker).success(function(b){b.Success?(a.discounts=b.Data.Items,a.totalItems=b.Data.Count):j(b)}).error(function(a){j(a)})}function l(){a.activeFilterOptions=b.ReferenceData.ActiveFilterOptions,a.customerTypes=angular.copy(b.ReferenceData.CustomerTypes),a.customerTypes.splice(0,0,{Key:null,Text:"All Customer Types"}),a.filter={SearchText:"",Status:null,ValidFrom:null,ValidTo:null,DateStatus:2,SearchByAssigned:!0,Assigned:1,Paging:{PageIndex:1,PageItemCount:100},Sorting:i.resolve(k,"Code","Asc")},k()}a.refreshTracker=h("refresh"),a.deleteTracker=h("delete"),a.filterDiscounts=function(){return a.filter.ValidFrom>a.filter.ValidTo?void e.pop("error","Error!","'Valid To' date can't be less than 'Valid From' date.",null,"trustedHtml"):(a.filter.Paging.PageIndex=1,void k())},a.pageChanged=function(){k()},a.open=function(a){a?c.go("index.oneCol.discountDetail",{id:a}):c.go("index.oneCol.addNewDiscount")},a["delete"]=function(b){g.confirm(function(){d.deleteDiscount(b,a.deleteTracker).success(function(a){a.Success?(e.pop("success","Success!","Successfully deleted."),k()):j(a)}).error(function(a){j(a)})},"Are you sure you want to delete this discount?")},l()}]),angular.module("app.modules.product.controllers.discountManageController",[]).controller("discountManageController",["$scope","$rootScope","$state","$stateParams","$timeout","$uibModal","productService","discountService","toaster","confirmUtil","promiseTracker",function(a,b,c,d,e,f,g,h,i,j,k){function l(){if(a.discount&&a.discount.Id){var b={};b.service=h,b.tracker=a.refreshTracker,b.idObject=a.discount.Id,b.idObjectType=4,a.$broadcast("objectHistorySection#in#refresh",b)}}function m(b){if(b.Success)i.pop("success","Success!","Successfully saved."),a.discount.Id=b.Data.Id,l();else{var c="";b.Messages&&(a.forms.submitted=!0,a.forms.discountTiersSubmitted=!0,a.detailsTab.active=!0,a.serverMessages=new ServerMessages(b.Messages),$.each(b.Messages,function(b,c){if(c.Field)if(c.Field.indexOf(".")>-1){var d=c.Field.split(".");a.forms[d[0]][d[1]][d[2]].$setValidity("server",!1)}else $.each(a.forms,function(a,b){b&&"boolean"!=typeof b&&void 0!=b[c.Field]&&(b[c.Field].$setValidity("server",!1),null==formForShowing&&(formForShowing=a))})})),i.pop("error","Error!",c,null,"trustedHtml")}}function n(a){i.pop("error","Error!","Server error occured")}function o(){a.id=d.id?d.id:0,a.assignedCustomerTypes=angular.copy(b.ReferenceData.CustomerTypes),a.assignedCustomerTypes.splice(0,0,{Key:null,Text:"All"}),a.discountTypes=b.ReferenceData.DiscountTypes,a.tierDiscountTypes=[{Key:1,Text:"$"},{Key:2,Text:"%"}],a.maxTimesUseModes=[{Key:1,Text:"One Time Only"},{Key:2,Text:"Unlimited"},{Key:3,Text:"Number of Uses"}],a.skuFilter={Code:"",Paging:{PageIndex:1,PageItemCount:20}},a.forms={},a.detailsTab={active:!0},a.options={},p()}function p(){g.getCategoriesTree({},a.refreshTracker).success(function(b){b.Success?(a.rootCategory=b.Data,a.rootAppliedCategory=angular.copy(a.rootCategory),q()):n(b)}).error(function(a){n(a)})}function q(){h.getDiscount(a.id,a.refreshTracker).success(function(b){b.Success?(a.discount=b.Data,a.discount.DiscountsToSelectedSkus.length>0?a.discount.SelectedMode=2:a.discount.CategoryIdsAppliedOnlyTo.length>0?a.discount.SelectedMode=3:a.discount.SelectedMode=1,a.discount.ExpirationDate&&(a.discount.ExpirationDate=Date.parseDateTime(a.discount.ExpirationDate)),a.discount.StartDate&&(a.discount.StartDate=Date.parseDateTime(a.discount.StartDate)),a.discount.MaxTimesUse?1==a.discount.MaxTimesUse?a.options.maxTimesUseMode=1:(a.options.maxTimesUseMode=3,a.options.maxTimesUse=a.discount.MaxTimesUse):a.options.maxTimesUseMode=2,l(),t(a.rootCategory,a.discount.CategoryIds),t(a.rootAppliedCategory,a.discount.CategoryIdsAppliedOnlyTo),s(),0==a.discount.DiscountTiers.length&&a.addTier()):n(b)}).error(function(a){n(a)})}function r(b){var c=[],d=a.discount[b];$.each(d,function(a,b){c.push(b.IdSku)});var e={};e.name=b,e.blockIds=c,a.$broadcast("skusSearch#in#setBlockIds",e)}function s(){a.$watchCollection("discount.DiscountsToSkus",function(){r("DiscountsToSkus")}),a.$watchCollection("discount.DiscountsToSelectedSkus",function(){r("DiscountsToSelectedSkus")}),r("DiscountsToSkus"),r("DiscountsToSelectedSkus")}function t(a,b){a.IsSelected=!1,$.each(b,function(b,c){a.Id==c&&(a.IsSelected=!0)}),$.each(a.SubItems,function(a,c){t(c,b)})}function u(a,b){a.IsSelected&&b.push(a.Id),$.each(a.SubItems,function(a,c){u(c,b)})}a.refreshTracker=k("get"),a.save=function(){if(v(),a.lastTierToAddingNewRequired=!1,0!=a.discount.DiscountTiers.length&&5==a.discount.DiscountType&&a.forms.DiscountTiers["i"+(a.discount.DiscountTiers.length-1)].To.$setValidity("required",!0),w()&&a.forms.DiscountTiers.$valid){var b=[];u(a.rootCategory,b),a.discount.CategoryIds=b;var c=[];u(a.rootAppliedCategory,c),a.discount.CategoryIdsAppliedOnlyTo=c;var d={};angular.copy(a.discount,d),3==d.DiscountType||1==d.SelectedMode?(d.DiscountsToSelectedSkus=[],d.CategoryIdsAppliedOnlyTo=[]):(2==d.SelectedMode&&(d.CategoryIdsAppliedOnlyTo=[]),3==d.SelectedMode&&(d.DiscountsToSelectedSkus=[])),5!=d.DiscountType&&(d.DiscountTiers=[]),d.ExpirationDate&&(d.ExpirationDate=d.ExpirationDate.toServerDateTime()),d.StartDate&&(d.StartDate=d.StartDate.toServerDateTime()),1==a.options.maxTimesUseMode?d.MaxTimesUse=1:2==a.options.maxTimesUseMode?d.MaxTimesUse=null:d.MaxTimesUse=a.options.maxTimesUse,h.updateDiscount(d,a.refreshTracker).success(function(a){m(a)}).error(function(a){n(a)})}else a.forms.submitted=!0,a.forms.discountTiersSubmitted=!0,a.detailsTab.active=!0,i.pop("error","Error!","Validation errors, please correct field values.",null,"trustedHtml")};var v=function(){$.each(a.forms,function(a,b){b&&"boolean"!=typeof b&&("DiscountTiers"==a?$.each(b,function(a,b){0==a.indexOf("i")&&$.each(b,function(a,b){b&&b.$name==a&&b.$setValidity("server",!0)})}):$.each(b,function(a,b){b&&b.$name==a&&b.$setValidity("server",!0)}))})},w=function(){if(a.forms.mainForm.$valid)return!0;if(1==Object.keys(a.forms.mainForm.$error).length&&a.forms.mainForm.$error.date){var b=!0;return $.each(a.forms.mainForm.$error.date,function(a,c){return 0!=c.$formatters.length?void(b=!1):void 0}),b}return!1};a.$on("skusSearch#out#addItems",function(b,c){var d=a.discount[c.name];if(d&&c.items){var e=[];$.each(c.items,function(a,b){var c=!0;if($.each(d,function(a,d){return b.Id==d.IdSku?void(c=!1):void 0}),c){var f={};f.IdSku=b.Id,f.ShortSkuInfo={},f.ShortSkuInfo.Code=b.Code,f.ShortSkuInfo.ProductName=b.ProductName,e.push(f)}}),$.each(e,function(a,b){d.push(b)})}}),a.deleteDiscountToSku=function(b){a.discount.DiscountsToSkus.splice(b,1)},a.deleteDiscountToSelectedSku=function(b){a.discount.DiscountsToSelectedSkus.splice(b,1)},a.updateCategoriesCollapsed=function(b){b?a.$broadcast("angular-ui-tree:expand-all",{name:"filter-categories"}):a.$broadcast("angular-ui-tree:collapse-all",{name:"filter-categories"}),a.categoriesExpanded=b},a.updateAppliedCategoriesCollapsed=function(b){b?a.$broadcast("angular-ui-tree:expand-all",{name:"applied-categories"}):a.$broadcast("angular-ui-tree:collapse-all",{name:"applied-categories"}),a.appliedCategoriesExpanded=b},a.toogleEditorState=function(b){a[b]=!a[b]},a.addTier=function(){if(a.lastTierToAddingNewRequired=!1,0!=a.discount.DiscountTiers.length&&(a.forms.DiscountTiers["i"+(a.discount.DiscountTiers.length-1)].To.$setValidity("required",!0),a.discount.DiscountTiers[a.discount.DiscountTiers.length-1].To||(a.forms.DiscountTiers["i"+(a.discount.DiscountTiers.length-1)].To.$setValidity("required",!1),
a.lastTierToAddingNewRequired=!0)),a.forms.DiscountTiers.$valid){if(a.lastTierToAddingNewRequired)return;var b={From:null,To:null,IdDiscountType:2,Percent:null,Amount:null};if(0!=a.discount.DiscountTiers.length){var c=a.discount.DiscountTiers[a.discount.DiscountTiers.length-1];c.To&&(b.From=c.To+.01)}a.discount.DiscountTiers.push(b),a.forms.discountTiersSubmitted=!1}else a.forms.discountTiersSubmitted=!0},a.tierToBlur=function(b){var c=a.discount.DiscountTiers[b];0==b&&c.From&&c.To&&c.From>=c.To&&(c.To=Math.round(100*(c.From+.01))/100,x(b))},a.tierFromBlur=function(a){x(a)};var x=function(b){var c=a.discount.DiscountTiers[b];if(0!=b){var d=a.discount.DiscountTiers[b-1];d&&d.To?d.To>=c.From&&(c.From=Math.round(100*(d.To+.01))/100):c.From=null}c.From?(c.From>=c.To&&b!=a.discount.DiscountTiers.length-1&&(c.To=Math.round(100*(c.From+.01))/100),b+1<a.discount.DiscountTiers.length&&(b++,x(b))):0!=b&&(c.To=null)};a.deleteTier=function(b){a.discount.DiscountTiers.splice(b,1)},a.getSkus=function(b){return a.skuFilter.Code=b,g.getSkus(a.skuFilter).then(function(a){return a.data.Data.map(function(a){return a.Code})})},o()}]),angular.module("app.modules.product.controllers.skusSearchController",[]).controller("skusSearchController",["$scope","$rootScope","$state","productService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h,i){function j(a){var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),e.pop("error","Error!",b,null,"trustedHtml")}function k(){d.getSkus(a.filter,a.refreshTracker).success(function(b){b.Success?(a.skus=b.Data,l()):j(b)}).error(function(a){j(a)})}function l(){var b=[];$.each(a.skus,function(c,d){var e=!0;$.each(a.blockIds,function(a,b){return d.Id==b?void(e=!1):void 0}),e&&b.push(d)}),a.items=b}function m(){a.blockIds=[],a.items=[],a.skus=[],a.forms={},a.filter={SearchText:""}}function n(b){var c={};c.name=a.name,c.items=b,a.$emit("skusSearch#out#addItems",c)}a.refreshTracker=h("refresh"),a.deleteTracker=h("delete"),a.$on("skusSearch#in#init",function(b,c){c.name==a.name&&(a.filter.IdProductTypes=c.IdProductTypes)}),a.$on("skusSearch#in#setBlockIds",function(b,c){if(c.name==a.name){var d=c.blockIds;d&&(a.blockIds=d,l())}}),a.filterSkus=function(){a.forms.filterForm.$valid?k():a.submitted=!0},a.add=function(a){n([a])},m()}]),angular.module("app.modules.product.controllers.productsSearchController",[]).controller("productsSearchController",["$scope","$rootScope","$state","productService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h,i){function j(a){var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),e.pop("error","Error!",b,null,"trustedHtml")}function k(){d.getProducts(a.filter,a.refreshTracker).success(function(b){b.Success?(a.products=b.Data.Items,l()):j(b)}).error(function(a){j(a)})}function l(){var b=[];$.each(a.products,function(c,d){var e=!0;$.each(a.blockIds,function(a,b){return d.ProductId==b?void(e=!1):void 0}),e&&b.push(d)}),a.items=b}function m(){a.blockIds=[],a.items=[],a.products=[],a.forms={},a.filter={SearchText:""}}function n(b){var c={};c.name=a.name,c.items=b,a.$emit("productsSearch#out#addItems",c)}a.refreshTracker=h("refresh"),a.deleteTracker=h("delete"),a.$on("productsSearch#in#setBlockIds",function(b,c){if(c.name==a.name){var d=c.blockIds;d&&(a.blockIds=d,l())}}),a.filterSkus=function(){a.forms.filterForm.$valid?k():a.submitted=!0},a.add=function(a){n([a])},m()}]),angular.module("app.modules.product.controllers.productsWithReviewsController",[]).controller("productsWithReviewsController",["$scope","$state","productService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h){function i(a){d.pop("error","Error!","Server error occured")}function j(){c.getProductsWithReviews(a.filter,a.refreshTracker).success(function(b){b.Success?(a.products=b.Data.Items,a.totalItems=b.Data.Count):i(b)}).error(function(a){i(a)})}function k(){a.filter={SearchText:"",StatusCode:2,Paging:{PageIndex:1,PageItemCount:100},Sorting:h.resolve(j,"ProductName","Asc")},j()}a.refreshTracker=g("refresh"),a.deleteTracker=g("delete"),a.filterProducts=function(){a.filter.Paging.PageIndex=1,j()},a.pageChanged=function(){j()},a.open=function(a){b.go("index.oneCol.productDetailManageReviews",{idproduct:a})},k()}]),angular.module("app.modules.product.controllers.pendingProductReviewsController",[]).controller("pendingProductReviewsController",["$scope","$state","productService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h){function i(a){d.pop("error","Error!","Server error occured")}function j(){c.getProductReviews(a.filter,a.refreshTracker).success(function(b){b.Success?(a.productReviews=b.Data.Items,a.totalItems=b.Data.Count):i(b)}).error(function(a){i(a)})}function k(){a.filter={StatusCode:1,Paging:{PageIndex:1,PageItemCount:100},Sorting:h.resolve(j,"DateCreated","Asc")},j()}a.refreshTracker=g("refresh"),a.deleteTracker=g("delete"),a.filterProductReviews=function(){a.filter.Paging.PageIndex=1,j()},a.pageChanged=function(){j()},a.edit=function(a){b.go("index.oneCol.productReviewDetail",{id:a})},a["delete"]=function(b){f.confirm(function(){c.deleteProductReview(b,a.deleteTracker).success(function(a){a.Success?(d.pop("success","Success!","Successfully deleted."),j()):i(a)}).error(function(a){i(a)})},"Are you sure you want to delete this product review?")},k()}]),angular.module("app.modules.product.controllers.productReviewManageController",[]).controller("productReviewManageController",["$scope","$rootScope","$state","$stateParams","$timeout","productService","toaster","modalUtil","confirmUtil","promiseTracker",function(a,b,c,d,e,f,g,h,i,j){function k(b){if(b.Success)g.pop("success","Success!","Successfully saved."),a.goBack();else{var c="";b.Messages&&(a.forms.form.submitted=!0,a.serverMessages=new ServerMessages(b.Messages),$.each(b.Messages,function(b,d){d.Field&&a.forms.form[d.Field].$setValidity("server",!1),c+=d.Message+"<br />"})),g.pop("error","Error!",c,null,"trustedHtml")}}function l(a){g.pop("error","Error!","Server error occured")}function m(){a.id=d.id?d.id:0,a.idProduct=d.idproduct?d.idproduct:0,a.forms={},a.productReview={},f.getProductReview(a.id,a.refreshTracker).success(function(b){b.Success&&(a.productReview=b.Data)}).error(function(a){l(a)})}a.refreshTracker=j("get"),a.editTracker=j("edit"),a.save=function(){$.each(a.forms.form,function(a,b){b&&b.$name==a&&b.$setValidity("server",!0)}),a.forms.form.$valid?f.updateProductReview(a.productReview,a.editTracker).success(function(a){k(a)}).error(function(a){l(a)}):a.forms.form.submitted=!0},a.goBack=function(){a.idProduct?c.go("index.oneCol.productDetailManageReviews",{idproduct:a.idProduct}):c.go("index.oneCol.managePendingProductReviews",{})},a["delete"]=function(){i.confirm(function(){f.deleteProductReview(a.id,a.deleteTracker).success(function(b){b.Success?(g.pop("success","Success!","Successfully deleted."),a.goBack()):l(b)}).error(function(a){l(a)})},"Are you sure you want to delete this product review?")},m()}]),angular.module("app.modules.product.controllers.activeProductReviewsController",[]).controller("activeProductReviewsController",["$scope","$state","$stateParams","productService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h,i){function j(a){e.pop("error","Error!","Server error occured")}function k(){d.getProduct(a.idProduct,a.refreshTracker).success(function(b){b.Success?(a.productName=b.Data.Name,l()):j(b)}).error(function(a){j(a)})}function l(){d.getProductReviews(a.filter,a.refreshTracker).success(function(b){b.Success?(a.productReviews=b.Data.Items,a.totalItems=b.Data.Count):j(b)}).error(function(a){j(a)})}function m(){a.idProduct=c.idproduct,a.idProduct&&(a.filter={IdProduct:a.idProduct,StatusCode:2,Paging:{PageIndex:1,PageItemCount:100},Sorting:i.resolve(l,"DateCreated","Desc")},k())}a.refreshTracker=h("refresh"),a.deleteTracker=h("delete"),a.filterProductReviews=function(){a.filter.Paging.PageIndex=1,l()},a.pageChanged=function(){l()},a.edit=function(c){b.go("index.oneCol.productReviewDetail",{id:c,idproduct:a.idProduct})},a["delete"]=function(b){g.confirm(function(){d.deleteProductReview(b,a.deleteTracker).success(function(a){a.Success?(e.pop("success","Success!","Successfully deleted."),l()):j(a)}).error(function(a){j(a)})},"Are you sure you want to delete this product review?")},m()}]),angular.module("app.modules.product.controllers.topPurchasedProductsController",[]).controller("topPurchasedProductsController",["$scope","$uibModalInstance","data","productService","toaster","promiseTracker","$rootScope",function(a,b,c,d,e,f,g){function h(a){e.pop("error","Error!","Server error occured")}function i(){a.forms={},a.addedProducts=c.products,a.idCustomer=c.idCustomer,d.getTopPurchasedSkus(a.idCustomer,a.refreshTracker).success(function(b){b.Success?(a.products=b.Data,$.each(a.products,function(b,c){$.each(a.addedProducts,function(a,b){b.Code==c.Code&&(c.IsSelected=!0)})})):h(b)}).error(function(a){h(a)})}a.refreshTracker=f("get"),a.save=function(){var d=[];$.each(a.products,function(a,b){b.IsSelected&&d.push(b)}),c.thenCallback(d),b.close()},a.cancel=function(){b.close()},i()}]),angular.module("app.modules.product.controllers.productTaxCodesController",[]).controller("productTaxCodesController",["$scope","$rootScope","$state","productService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h,i){function j(a){var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),e.pop("error","Error!",b,null,"trustedHtml")}function k(){d.getProducts(a.filter,a.refreshTracker).success(function(b){b.Success?($.each(b.Data.Items,function(a,b){b.SKUs=null,b.NewTaxCode=b.TaxCode}),a.products=b.Data.Items,a.totalItems=b.Data.Count):j(b)}).error(function(a){j(a)})}function l(){a.forms={},self.baseUrl="https://"+b.ReferenceData.PublicHost+"{0}",a.filter={SearchText:"",CategoryId:null,Paging:{PageIndex:1,PageItemCount:100},Sorting:i.resolve(k,"Name","Asc")},k()}a.refreshTracker=h("refresh"),a.deleteTracker=h("delete"),a.filterProducts=function(){a.filter.Paging.PageIndex=1,k()},a.pageChanged=function(){k()},a.update=function(){if(a.forms.form.$valid){var b=[];$.each(a.products,function(a,c){if(c.NewTaxCode!=c.TaxCode){var d=angular.copy(c);d.TaxCode=d.NewTaxCode,b.push(d)}}),b.length>0&&d.updateProductTaxCodes(b,a.refreshTracker).success(function(a){k(),e.pop("success","Success!","Successfully saved.")}).error(function(a){j(a)})}else a.forms.submitted=!0},l()}]),angular.module("app.modules.product.controllers.promotionsController",[]).controller("promotionsController",["$scope","$rootScope","$state","promotionService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h,i){function j(a){var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),e.pop("error","Error!",b,null,"trustedHtml")}function k(){var b={};angular.copy(a.filter,b),b.ValidFrom&&(b.ValidFrom=b.ValidFrom.toServerDateTime()),b.ValidTo&&(b.ValidTo=b.ValidTo.toServerDateTime()),d.getPromotions(b,a.refreshTracker).success(function(b){b.Success?(a.promotions=b.Data.Items,a.totalItems=b.Data.Count):j(b)}).error(function(a){j(a)})}function l(){a.activeFilterOptions=b.ReferenceData.ActiveFilterOptions,a.customerTypes=angular.copy(b.ReferenceData.CustomerTypes),a.customerTypes.splice(0,0,{Key:null,Text:"All Customer Types"}),a.filter={SearchText:"",Status:null,ValidFrom:null,ValidTo:null,DateStatus:2,SearchByAssigned:!0,Assigned:1,Paging:{PageIndex:1,PageItemCount:100},Sorting:i.resolve(k,"Description","Asc")},k()}a.refreshTracker=h("refresh"),a.deleteTracker=h("delete"),a.filterPromotions=function(){a.filter.Paging.PageIndex=1,k()},a.pageChanged=function(){k()},a.open=function(a){a?c.go("index.oneCol.promotionDetail",{id:a}):c.go("index.oneCol.addNewPromotion")},a["delete"]=function(b){g.confirm(function(){d.deletePromotion(b,a.deleteTracker).success(function(a){a.Success?(e.pop("success","Success!","Successfully deleted."),k()):j(a)}).error(function(a){j(a)})},"Are you sure you want to delete this promotion?")},l()}]),angular.module("app.modules.product.controllers.promotionManageController",[]).controller("promotionManageController",["$scope","$rootScope","$state","$stateParams","$timeout","$uibModal","productService","promotionService","toaster","confirmUtil","promiseTracker",function(a,b,c,d,e,f,g,h,i,j,k){function l(){if(a.promotion&&a.promotion.Id){var b={};b.service=h,b.tracker=a.refreshTracker,b.idObject=a.promotion.Id,b.idObjectType=5,a.$broadcast("objectHistorySection#in#refresh",b)}}function m(b){if(b.Success)i.pop("success","Success!","Successfully saved."),a.promotion.Id=b.Data.Id,l();else{var c="";b.Messages&&(a.forms.submitted=!0,a.detailsTab.active=!0,a.serverMessages=new ServerMessages(b.Messages),$.each(b.Messages,function(b,d){if(d.Field)if(d.Field.indexOf(".")>-1){var e=d.Field.split(".");a.forms[e[0]][e[1]][e[2]].$setValidity("server",!1)}else $.each(a.forms,function(a,b){b&&"boolean"!=typeof b&&void 0!=b[d.Field]&&(b[d.Field].$setValidity("server",!1),null==formForShowing&&(formForShowing=a))});else c+=d.Message+"<br/>"})),c&&i.pop("error","Error!",c,null,"trustedHtml")}}function n(a){i.pop("error","Error!","Server error occured")}function o(){a.id=d.id?d.id:0,a.assignedCustomerTypes=angular.copy(b.ReferenceData.CustomerTypes),a.assignedCustomerTypes.splice(0,0,{Key:null,Text:"All"}),a.promotionTypes=b.ReferenceData.PromotionTypes,a.maxTimesUseModes=[{Key:1,Text:"One Time Only"},{Key:2,Text:"Unlimited"},{Key:3,Text:"Number of Uses"}],a.skuFilter={Code:"",Paging:{PageIndex:1,PageItemCount:20}},a.forms={},a.detailsTab={active:!0},a.options={},p()}function p(){g.getCategoriesTree({},a.refreshTracker).success(function(b){b.Success?(a.rootCategory=b.Data,q()):n(b)}).error(function(a){n(a)})}function q(){h.getPromotion(a.id,a.refreshTracker).success(function(b){b.Success?(a.promotion=b.Data,a.promotion.ExpirationDate&&(a.promotion.ExpirationDate=Date.parseDateTime(a.promotion.ExpirationDate)),a.promotion.StartDate&&(a.promotion.StartDate=Date.parseDateTime(a.promotion.StartDate)),a.promotion.MaxTimesUse?1==a.promotion.MaxTimesUse?a.options.maxTimesUseMode=1:(a.options.maxTimesUseMode=3,a.options.maxTimesUse=a.promotion.MaxTimesUse):a.options.maxTimesUseMode=2,l(),t(a.rootCategory,a.promotion.SelectedCategoryIds),s(),w()):n(b)}).error(function(a){n(a)})}function r(b){var c=[],d=a.promotion[b];$.each(d,function(a,b){c.push(b.IdSku)});var e={};e.name=b,e.blockIds=c,a.$broadcast("skusSearch#in#setBlockIds",e)}function s(){a.$watchCollection("promotion.PromotionsToBuySkus",function(){r("PromotionsToBuySkus")}),a.$watchCollection("promotion.PromotionsToGetSkus",function(){r("PromotionsToGetSkus")}),r("PromotionsToBuySkus"),r("PromotionsToGetSkus")}function t(a,b){a.IsSelected=!1,$.each(b,function(b,c){a.Id==c&&(a.IsSelected=!0)}),$.each(a.SubItems,function(a,c){t(c,b)})}function u(a,b){a.IsSelected&&b.push(a.Id),$.each(a.SubItems,function(a,c){u(c,b)})}function v(a){a.IsSelected=!0,a.SubItems&&$.each(a.SubItems,function(a,b){v(b)})}a.refreshTracker=k("get");var w=function(){var b={};b.name="PromotionsToGetSkus",b.IdProductTypes=[1,2],a.$broadcast("skusSearch#in#init",b)};a.save=function(){if(x(),y()){var b={};angular.copy(a.promotion,b),b.ExpirationDate&&(b.ExpirationDate=b.ExpirationDate.toServerDateTime()),b.StartDate&&(b.StartDate=b.StartDate.toServerDateTime()),1==a.options.maxTimesUseMode?b.MaxTimesUse=1:2==a.options.maxTimesUseMode?b.MaxTimesUse=null:b.MaxTimesUse=a.options.maxTimesUse;var c=[];u(a.rootCategory,c),b.SelectedCategoryIds=c,h.updatePromotion(b,a.refreshTracker).success(function(a){m(a)}).error(function(a){n(a)})}else a.forms.submitted=!0,a.detailsTab.active=!0,i.pop("error","Error!","Validation errors, please correct field values.",null,"trustedHtml")};var x=function(){$.each(a.forms,function(a,b){b&&"boolean"!=typeof b&&("PromotionsToBuySkus"==a||"PromotionsToGetSkus"==a?$.each(b,function(a,b){0==a.indexOf("i")&&$.each(b,function(a,b){b&&b.$name==a&&b.$setValidity("server",!0)})}):$.each(b,function(a,b){b&&b.$name==a&&b.$setValidity("server",!0)}))})},y=function(){if(a.forms.mainForm.$valid&&a.forms.PromotionsToBuySkus.$valid&&a.forms.PromotionsToGetSkus.$valid)return!0;if(1==Object.keys(a.forms.mainForm.$error).length&&a.forms.mainForm.$error.date){var b=!0;return $.each(a.forms.mainForm.$error.date,function(a,c){return 0!=c.$formatters.length?void(b=!1):void 0}),b}return!1};a.$on("skusSearch#out#addItems",function(b,c){var d=a.promotion[c.name];if(d&&c.items){var e=[];$.each(c.items,function(a,b){var c=!0;if($.each(d,function(a,d){return b.Id==d.IdSku?void(c=!1):void 0}),c){var f={};f.IdSku=b.Id,f.Quantity=1,f.Percent=100,f.ShortSkuInfo={},f.ShortSkuInfo.Code=b.Code,f.ShortSkuInfo.ProductName=b.ProductName,e.push(f)}}),$.each(e,function(a,b){d.push(b)})}}),a.deletePromotionToBuySku=function(b){a.promotion.PromotionsToBuySkus.splice(b,1)},a.deletePromotionToGetSku=function(b){a.promotion.PromotionsToGetSkus.splice(b,1)},a.updateCategoriesCollapsed=function(b){b?a.$broadcast("angular-ui-tree:expand-all"):a.$broadcast("angular-ui-tree:collapse-all"),a.categoriesExpanded=b},a.treeItemClick=function(a){a.IsSelected&&a.SubItems&&$.each(a.SubItems,function(a,b){v(b)})},o()}]),angular.module("app.modules.product.controllers.outOfStocksController",[]).controller("outOfStocksController",["$scope","$rootScope","$state","productService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h,i){function j(a){e.pop("error","Error!","Server error occured")}function k(){d.getProductOutOfStockContainers(a.refreshTracker).success(function(b){b.Success?a.items=b.Data:j(b)}).error(function(a){j(a)})}function l(){a.forms={},a.filter={},k()}a.refreshTracker=h("refresh"),a.deleteTracker=h("delete"),a.filterItems=function(){a.forms.form.$valid?k():a.forms.form.submitted=!0},a.send=function(){var a=m();return 0==a.length?void e.pop("error","Error!","Please, select at least one request."):void f.open("app/modules/product/partials/sendOutOfStockRequestsPopup.html","sendOutOfStockRequestsPopupController",{Ids:a,thenCallback:function(a){k()}})},a["delete"]=function(){var b=m();return 0==b.length?void e.pop("error","Error!","Please, select at least one request."):void g.confirm(function(){d.deleteProductOutOfStockRequests(b,a.deleteTracker).success(function(a){a.Success?(e.pop("success","Success!","Successfully deleted."),k()):j(a)}).error(function(a){j(a)})},"Are you sure you want to delete these requests?")};var m=function(){var b=[];return $.each(a.items,function(a,c){$.each(c.Requests,function(a,c){c.IsSelected&&b.push(c.Id)})}),b};a.containerIsSelectedChanged=function(a){$.each(a.Requests,function(b,c){c.IsSelected=a.IsSelected})},l()}]),angular.module("app.modules.product.controllers.productCategoriesStatisticController",[]).controller("productCategoriesStatisticController",["$scope","$rootScope","$state","productService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h,i){function j(a){e.pop("error","Error!","Server error occured")}function k(){var b={};angular.copy(a.filter,b),b.From&&(b.From=b.From.toServerDateTime()),b.To&&(b.To=b.To.toServerDateTime()),d.getSkusInProductCategoryStatistic(b,a.refreshSkusTracker).success(function(b){b.Success?a.items=b.Data:j(b)}).error(function(a){j(a)})}function l(){var b={};angular.copy(a.filter,b),b.From&&(b.From=b.From.toServerDateTime()),b.To&&(b.To=b.To.toServerDateTime()),d.getProductCategoriesStatistic(b,a.refreshCategoriesTracker).success(function(b){b.Success?(a.rootCategory=b.Data,a.categoriesExpanded=!1):j(b)}).error(function(a){j(a)})}function m(){a.forms={},a.options={};var b=new Date;b.setHours(0,0,0,0),a.filter={To:b.shiftDate("+1y"),From:b.shiftDate("-1m"),IdCategory:null},l(),a.filterChanged()}a.refreshCategoriesTracker=h("refreshCategories"),a.refreshSkusTracker=h("refreshSkus"),a.updateCategoriesCollapsed=function(b){b?a.$broadcast("angular-ui-tree:expand-all"):a.$broadcast("angular-ui-tree:collapse-all"),a.categoriesExpanded=b},a.filterCategories=function(){a.forms.form.$valid?(a.items=null,a.categoriesExpanded=!1,l()):a.forms.submitted=!0},a.selectCategory=function(b){a.filter.IdCategory=b,k()},a.filterChanged=function(){var c={};angular.copy(a.filter,c),c.From&&(c.From=c.From.toServerDateTime()),c.To&&(c.To=c.To.toServerDateTime()),a.options.exportUrl=d.getProductCategoriesStatisticReportFile(c,b.buildNumber)},m()}]),angular.module("app.modules.product.controllers.sendOutOfStockRequestsPopupController",[]).controller("sendOutOfStockRequestsPopupController",["$scope","$uibModalInstance","data","productService","toaster","promiseTracker","$rootScope",function(a,b,c,d,e,f,g){function h(d){if(d.Success)e.pop("success","Success!","Successfully sent."),c.thenCallback(a.state),b.close();else{var f="";d.Messages&&(a.forms.form.submitted=!0,a.serverMessages=new ServerMessages(d.Messages),$.each(d.Messages,function(b,c){c.Field&&a.forms.form[c.Field].$setValidity("server",!1),f+=c.Message+"<br />"})),e.pop("error","Error!",f,null,"trustedHtml")}}function i(a){e.pop("error","Error!","Server error occured")}function j(){a.forms={},a.options={},a.options.Ids=c.Ids,d.getProductOutOfStockRequestsMessageFormat(a.id,a.refreshTracker).success(function(b){b.Success&&(a.options.MessageFormat=b.Data)}).error(function(a){i(a)})}a.refreshTracker=f("refresh"),a.save=function(){a.forms.form.$valid?d.sendProductOutOfStockRequests(a.options,a.refreshTracker).success(function(a){h(a)}).error(function(a){i(a)}):a.forms.submitted=!0},a.cancel=function(){b.close()},j()}]),angular.module("app.modules.product.controllers.manageProductsOrderController",[]).controller("manageProductsOrderController",["$scope","$rootScope","$state","$uibModalInstance","productService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil","data",function(a,b,c,d,e,f,g,h,i,j,k){function l(a){var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),f.pop("error","Error!",b,null,"trustedHtml")}function m(){e.getProductsOnCategoryOrder(a.idCategory,a.refreshTracker).success(function(b){b.Success?(a.items=b.Data,p()):l(b)}).error(function(a){l(a)})}function n(){a.forms={},a.items=[],a.idCategory=k.idCategory,m()}function o(b){var c=[];$.each(a.items,function(a,b){c.push(b.ProductId)});var d={};d.name=b,d.blockIds=c,a.$broadcast("productsSearch#in#setBlockIds",d)}function p(){a.$watchCollection("items",function(){o("Products")}),o("Products")}a.refreshTracker=i("refresh"),a.save=function(){e.updateProductsOnCategoryOrder(a.idCategory,a.items,a.refreshTracker).success(function(a){a.Success?(k.thenCallback(),d.close()):l(a)}).error(function(a){l(a)})},a.sortableOptions={handle:" .sortable-move",items:" .variant-panel",axis:"y",start:function(b,c){a.dragging=!0},stop:function(b,c){a.dragging=!1}},a.deleteProduct=function(b){a.items.splice(b,1)},a.$on("productsSearch#out#addItems",function(b,c){c.items&&$.each(c.items,function(b,c){var d=!0;if($.each(a.items,function(a,b){return c.ProductId==b.ProductId?void(d=!1):void 0}),d){var e=angular.copy(c);a.items.push(e)}})}),a.cancel=function(){d.close()},n()}]),angular.module("app.modules.product.controllers.skuBreakDownReportController",[]).controller("skuBreakDownReportController",["$scope","$rootScope","$state","$q","productService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h,i,j){function k(a){var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),f.pop("error","Error!",b,null,"trustedHtml")}function l(){var b={};return angular.copy(a.filter,b),b.From&&(b.From=b.From.toServerDateTime()),b.To&&(b.To=b.To.toServerDateTime()),b}function m(){e.getSkuBreakDownReportItems(l(),a.refreshTracker).success(function(b){b.Success?a.items=b.Data:k(b)}).error(function(a){k(a)})}function n(){a.options={},a.forms={};var c=new Date;c.setHours(0,0,0,0),a.filter={To:c.shiftDate("+1d"),From:c.shiftDate("-3d")},a.options.exportUrl=e.getSkuBreakDownReportItemsReportFile(l(),b.buildNumber),m()}a.refreshTracker=i("refresh"),a.filterItems=function(){a.forms.form.$valid?m():a.forms.form.submitted=!0},a.filterChanged=function(){a.forms.form.$valid?a.options.exportUrl=e.getSkuBreakDownReportItemsReportFile(l(),b.buildNumber):a.forms.form.submitted=!0},a.openOrders=function(b){var d={};d.idsku=b,a.filter.From&&(d.from=a.filter.From.toQueryParamDateTime()),a.filter.To&&(d.to=a.filter.To.toQueryParamDateTime()),c.go("index.oneCol.manageOrders",d)},n()}]),angular.module("app.modules.product.controllers.skuPOrderTypeBreakDownReportController",[]).controller("skuPOrderTypeBreakDownReportController",["$scope","$rootScope","$state","$q","productService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h,i,j){function k(a){var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),f.pop("error","Error!",b,null,"trustedHtml")}function l(){var b={};angular.copy(a.filter,b),b.From&&(b.From=b.From.toServerDateTime()),b.To&&(b.To=b.To.toServerDateTime()),a.filter.Future?e.getSkuPOrderTypeFutureBreakDownReport(b,a.refreshTracker).success(function(b){b.Success?a.report=b.Data:k(b)}).error(function(a){k(a)}):e.getSkuPOrderTypeBreakDownReport(b,a.refreshTracker).success(function(b){b.Success?a.report=b.Data:k(b)}).error(function(a){k(a)})}function m(){a.options={},a.frequencyTypes=[{Key:1,Text:"Daily"},{Key:2,Text:"Weekly"},{Key:3,Text:"Monthly"}],a.forms={};var b=new Date;b.setHours(0,0,0,0),a.filter={To:b.shiftDate("+1d"),From:b.shiftDate("-3d"),Future:!1,FrequencyType:1},a.filterChanged(),l()}a.refreshTracker=i("refresh"),a.filterItems=function(){if(a.forms.form.$valid){var b=n();null==b?l():(a.forms.form.submitted=!0,f.pop("error","Error!",b,null,"trustedHtml"))}else a.forms.form.submitted=!0};var n=function(){var b=null;if(a.filter.From>a.filter.To&&(b="'To' date can't be less than 'From' date."),3==a.filter.FrequencyType){var c=a.filter.To.getMonth()-a.filter.From.getMonth()+12*(a.filter.To.getFullYear()-a.filter.From.getFullYear());c>12&&(b="Date range can't be more than 12 months.")}if(2==a.filter.FrequencyType){var d=Math.round(Math.abs(a.filter.To.getTime()-a.filter.From.getTime())/864e5),e=Math.round(d/7);e>12&&(b="Date range can't be more than 12 weeks.")}if(1==a.filter.FrequencyType){var d=Math.round(Math.abs(a.filter.To.getTime()-a.filter.From.getTime())/864e5);d>12&&(b="Date range can't be more than 12 days.")}return b};a.filterChanged=function(){return},a.exportClick=function(b){a.options.exportUrl||(a.forms.form.submitted=!0,a.options.exportMsg&&f.pop("error","Error!",a.options.exportMsg,null,"trustedHtml"),b.preventDefault())},a.openOrders=function(b){var d={};d.idsku=b,a.filter.From&&(d.from=a.filter.From.toQueryParamDateTime()),a.filter.To&&(d.to=a.filter.To.toQueryParamDateTime()),c.go("index.oneCol.manageOrders",d)},a.futureChanged=function(){var b=new Date;b.setHours(0,0,0,0),a.filter.Future?(a.filter.To=b.shiftDate("+42d"),a.filter.From=b,a.filter.FrequencyType=2):(a.filter.To=b.shiftDate("+1d"),a.filter.From=b.shiftDate("-3d"),a.filter.FrequencyType=1),a.filterChanged()},m()}]),angular.module("app.modules.product.controllers.skuPricesController",[]).controller("skuPricesController",["$scope","$rootScope","$state","productService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h,i){function j(a){var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),e.pop("error","Error!",b,null,"trustedHtml")}function k(){d.getSkusPrices(a.filter,a.refreshTracker).success(function(b){b.Success?($.each(b.Data.Items,function(a,b){b.NewPrice=b.Price,b.NewWholesalePrice=b.WholesalePrice}),a.items=b.Data.Items,a.totalItems=b.Data.Count):j(b)}).error(function(a){j(a)})}function l(){a.forms={},a.filter={SearchText:null,Paging:{PageIndex:1,PageItemCount:100}},k()}a.refreshTracker=h("refresh"),a.deleteTracker=h("delete"),a.filterItems=function(){a.filter.Paging.PageIndex=1,k()},a.pageChanged=function(){k()},a.update=function(){if(a.forms.form.$valid){var b=[];$.each(a.items,function(a,c){if(c.NewPrice!=c.Price||c.NewWholesalePrice!=c.WholesalePrice){var d=angular.copy(c);d.Price=d.NewPrice,d.WholesalePrice=d.NewWholesalePrice,b.push(d)}}),b.length>0&&d.updateSkusPrices(b,a.refreshTracker).success(function(a){k(),e.pop("success","Success!","Successfully saved.")}).error(function(a){j(a)})}else a.forms.submitted=!0},l()}]),angular.module("app.modules.product",["app.modules.product.controllers.productCategoriesController","app.modules.product.controllers.productCategoryManageController","app.modules.product.controllers.inventoryCategoriesController","app.modules.product.controllers.inventoryCategoryManageController","app.modules.product.controllers.productsController","app.modules.product.controllers.productManageController","app.modules.product.controllers.addProductPopupController","app.modules.product.controllers.discountsController","app.modules.product.controllers.discountManageController","app.modules.product.controllers.skusSearchController","app.modules.product.controllers.productsSearchController","app.modules.product.controllers.productsWithReviewsController","app.modules.product.controllers.pendingProductReviewsController","app.modules.product.controllers.productReviewManageController","app.modules.product.controllers.activeProductReviewsController","app.modules.product.controllers.topPurchasedProductsController","app.modules.product.controllers.productTaxCodesController","app.modules.product.controllers.promotionsController","app.modules.product.controllers.promotionManageController","app.modules.product.controllers.outOfStocksController","app.modules.product.controllers.productCategoriesStatisticController","app.modules.product.controllers.sendOutOfStockRequestsPopupController","app.modules.product.controllers.manageProductsOrderController","app.modules.product.controllers.skuBreakDownReportController","app.modules.product.controllers.skuPOrderTypeBreakDownReportController","app.modules.product.controllers.skuPricesController"]).config(["$stateProvider","$urlRouterProvider",function(a,b){a.state("index.oneCol.manageProductCategories",{url:"/products/categories",templateUrl:"app/modules/product/partials/productCategoriesTreeView.html",controller:"productCategoriesController"}).state("index.oneCol.addNewProductCategory",{url:"/products/categories/add?{categoryid:int}",templateUrl:"app/modules/product/partials/productCategoryDetail.html",controller:"productCategoryManageController"}).state("index.oneCol.productCategoryDetail",{url:"/products/categories/{id:int}",templateUrl:"app/modules/product/partials/productCategoryDetail.html",controller:"productCategoryManageController"}).state("index.oneCol.productCategoriesStatistic",{url:"/report/category-sales-report",templateUrl:"app/modules/product/partials/productCategoriesStatistic.html",controller:"productCategoriesStatisticController"}).state("index.oneCol.manageInventoryCategories",{url:"/products/inventorycategories",templateUrl:"app/modules/product/partials/inventoryCategoriesTreeView.html",controller:"inventoryCategoriesController"}).state("index.oneCol.manageProducts",{url:"/products",templateUrl:"app/modules/product/partials/productsList.html",controller:"productsController"}).state("index.oneCol.addNewProduct",{url:"/products/add?{type:int}",templateUrl:"app/modules/product/partials/productDetail.html",controller:"productManageController"}).state("index.oneCol.productDetail",{url:"/products/{id:int}",templateUrl:"app/modules/product/partials/productDetail.html",controller:"productManageController"}).state("index.oneCol.manageProductTaxCodes",{url:"/tools/product-tax-codes",
templateUrl:"app/modules/product/partials/productTaxCodesList.html",controller:"productTaxCodesController"}).state("index.oneCol.manageSkuPrices",{url:"/tools/sku-prices",templateUrl:"app/modules/product/partials/skuPrices.html",controller:"skuPricesController"}).state("index.oneCol.manageDiscounts",{url:"/discounts",templateUrl:"app/modules/product/partials/discountsList.html",controller:"discountsController"}).state("index.oneCol.addNewDiscount",{url:"/discounts/add",templateUrl:"app/modules/product/partials/discountDetail.html",controller:"discountManageController"}).state("index.oneCol.discountDetail",{url:"/discounts/{id:int}",templateUrl:"app/modules/product/partials/discountDetail.html",controller:"discountManageController"}).state("index.oneCol.manageProductReviews",{url:"/products/reviews",templateUrl:"app/modules/product/partials/productsWithReviewsList.html",controller:"productsWithReviewsController"}).state("index.oneCol.managePendingProductReviews",{url:"/products/pendingreviews",templateUrl:"app/modules/product/partials/pendingProductReviewsList.html",controller:"pendingProductReviewsController"}).state("index.oneCol.productDetailManageReviews",{url:"/products/{idproduct:int}/reviews",templateUrl:"app/modules/product/partials/activeProductReviewsList.html",controller:"activeProductReviewsController"}).state("index.oneCol.productReviewDetail",{url:"/products/reviews/{id:int}?{:idproduct:int}",templateUrl:"app/modules/product/partials/productReviewDetail.html",controller:"productReviewManageController"}).state("index.oneCol.managePromotions",{url:"/promotions",templateUrl:"app/modules/product/partials/promotionsList.html",controller:"promotionsController"}).state("index.oneCol.addNewPromotion",{url:"/promotions/add",templateUrl:"app/modules/product/partials/promotionDetail.html",controller:"promotionManageController"}).state("index.oneCol.promotionDetail",{url:"/promotions/{id:int}",templateUrl:"app/modules/product/partials/promotionDetail.html",controller:"promotionManageController"}).state("index.oneCol.outOfStocks",{url:"/products/out-of-stock-request",templateUrl:"app/modules/product/partials/outOfStocksList.html",controller:"outOfStocksController"}).state("index.oneCol.skuBreakDownReport",{url:"/report/sku-breakdown",templateUrl:"app/modules/product/partials/skuBreakDownReport.html",controller:"skuBreakDownReportController"}).state("index.oneCol.skuPOrderTypeBreakDownReport",{url:"/report/breakdown",templateUrl:"app/modules/product/partials/skuPOrderTypeBreakDownReport.html",controller:"skuPOrderTypeBreakDownReportController"})}]),angular.module("app.modules.inventorysku.controllers.inventorySkuCategoriesController",[]).controller("inventorySkuCategoriesController",["$scope","$state","$stateParams","inventorySkuService","toaster","modalUtil","confirmUtil","promiseTracker",function(a,b,c,d,e,f,g,h){function i(a){var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),e.pop("error","Error!",b,null,"trustedHtml")}function j(){d.getInventorySkuCategoriesTree({},a.refreshTracker).success(function(b){b.Success?(a.rootCategories=b.Data,$.each(a.rootCategories,function(a,b){l(b)}),a.categoriesExpanded=!0):i(b)}).error(function(a){i(a)})}function k(){j()}function l(b){b.AllowDelete=!b.SubItems||0==b.SubItems.length;var c=1,d=null;$.each(a.rootCategories,function(a,e){var f=m(e,b.Id,c);return f?(d=f,!1):void 0}),b.Level=d.level,b.AllowAdd=b.Level<q,b.SubItems&&$.each(b.SubItems,function(a,c){c.ParentId=b.Id,l(c)})}function m(a,b,c){var d=null;if(a.Id==b&&(d=a),null!=d)return{category:d,level:c};if(c+=1,$.each(a.SubItems,function(a,c){return c.Id==b?(d=c,!1):void 0}),null!=d)return{category:d,level:c};var e=null;return $.each(a.SubItems,function(a,d){var f=m(d,b,c);return f?(e=f,!1):void 0}),e?e:null}function n(b){var c=null;$.each(a.rootCategories,function(a,d){return d.Id==b?(c=a,!1):void o(d,b)}),null!=c&&a.rootCategories.splice(c,1),$.each(a.rootCategories,function(a,b){l(b)})}function o(a,b){var c=null;$.each(a.SubItems,function(a,d){return d.Id==b?(c=a,!1):void 0}),null!=c?a.SubItems.splice(c,1):$.each(a.SubItems,function(a,c){o(c,b)})}function p(b,c,d){if(d)b.SubItems=[],a.rootCategories.push(b);else{var e=c;c||(e=b.Id);var f=null,g=1;$.each(a.rootCategories,function(a,b){var c=m(b,e,g);return c?(f=c,!1):void 0}),f&&(f=f.category),c?(b.SubItems=[],f.SubItems.push(b)):f.Name=b.Name}$.each(a.rootCategories,function(a,b){l(b)})}a.refreshTracker=h("refresh"),a.editTracker=h("edit"),a.deleteTracker=h("delete");var q=5;a.updateCategoriesCollapsed=function(b){b?a.$broadcast("angular-ui-tree:expand-all"):a.$broadcast("angular-ui-tree:collapse-all"),a.categoriesExpanded=b},a.edit=function(a){f.open("app/modules/inventorysku/partials/inventorySkuCategoryDetail.html","inventorySkuCategoryManageController",{id:a,thenCallback:function(a){p(a)}})},a.add=function(a){f.open("app/modules/inventorysku/partials/inventorySkuCategoryDetail.html","inventorySkuCategoryManageController",{categoryid:a,thenCallback:function(b){p(b,a,null==a)}})},a["delete"]=function(b){g.confirm(function(){d.deleteInventorySkuCategory(b,a.deleteTracker).success(function(a){a.Success?(e.pop("success","Success!","Successfully deleted."),n(b)):i(a)}).error(function(a){i(a)})},"Are you sure you want to delete this category?")},a.save=function(){d.updateInventorySkuCategoriesTree(a.rootCategories,a.editTracker).success(function(a){a.Success?e.pop("success","Success!","Successfully saved."):i(a)}).error(function(a){i(a)})},a.treeOptions={accept:function(a,b,c){var d=a.$modelValue,e=b.$element.attr("data-type");return 0==e&&null==d.ParentId||d.ParentId==e}},k()}]),angular.module("app.modules.inventorysku.controllers.inventorySkuCategoryManageController",[]).controller("inventorySkuCategoryManageController",["$scope","$uibModalInstance","data","inventorySkuService","toaster","confirmUtil","promiseTracker",function(a,b,c,d,e,f,g){function h(d){if(d.Success)e.pop("success","Success!","Successfully saved."),a.id=d.Data.Id,a.category.Id=d.Data.Id,c.thenCallback(a.category),b.close();else{var f="";d.Messages&&(a.forms.submitted=!0,a.serverMessages=new ServerMessages(d.Messages),$.each(d.Messages,function(b,c){c.Field&&a.forms.form[c.Field].$setValidity("server",!1),f+=c.Message+"<br />"})),e.pop("error","Error!",f,null,"trustedHtml")}}function i(a){e.pop("error","Error!","Server error occured")}function j(){a.id=c.id?c.id:0,a.forms={},d.getInventorySkuCategory(a.id,a.refreshTracker).success(function(b){b.Success?(a.category=b.Data,c.categoryid&&(a.category.ParentId=c.categoryid)):i(b)}).error(function(a){i(a)})}a.refreshTracker=g("get"),a.editTracker=g("edit"),a.save=function(){$.each(a.forms.form,function(a,b){b&&b.$name==a&&b.$setValidity("server",!0)}),a.forms.form.$valid?d.updateInventorySkuCategory(a.category,a.editTracker).success(function(a){h(a)}).error(function(a){i(a)}):a.forms.submitted=!0},a.cancel=function(){b.close()},j()}]),angular.module("app.modules.inventorysku.controllers.inventorySkusController",[]).controller("inventorySkusController",["$scope","$rootScope","$state","inventorySkuService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h,i){function j(a){var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),e.pop("error","Error!",b,null,"trustedHtml")}function k(){d.getInventorySkus(a.filter,a.refreshTracker).success(function(b){b.Success?(a.items=b.Data.Items,a.totalItems=b.Data.Count):j(b)}).error(function(a){j(a)})}function l(){a.filter={Code:null,Description:null,Paging:{PageIndex:1,PageItemCount:100},Sorting:i.resolve(k,"Code","Asc")},k()}a.refreshTracker=h("refresh"),a.deleteTracker=h("delete"),a.filterItems=function(){a.filter.Paging.PageIndex=1,k()},a.pageChanged=function(){k()},a.open=function(a){a?c.go("index.oneCol.inventorySkuDetail",{id:a}):c.go("index.oneCol.addNewInventorySku",{})},a["delete"]=function(b){g.confirm(function(){d.deleteInventorySku(b,a.deleteTracker).success(function(a){a.Success?(e.pop("success","Success!","Successfully deleted."),k()):j(a)}).error(function(a){j(a)})},"Are you sure you want to delete this inventory part?")},l()}]),angular.module("app.modules.inventorysku.controllers.inventorySkuManageController",[]).controller("inventorySkuManageController",["$scope","$rootScope","$state","$stateParams","$timeout","$uibModal","inventorySkuService","toaster","confirmUtil","promiseTracker","contentService",function(a,b,c,d,e,f,g,h,i,j,k){function l(b){if(b.Success)h.pop("success","Success!","Successfully saved."),a.inventorySku.Id=b.Data.Id;else{var c="";b.Messages&&(a.forms.submitted=!0,a.detailsTab.active=!0,a.serverMessages=new ServerMessages(b.Messages),$.each(b.Messages,function(b,c){c.Field&&$.each(a.forms,function(a,b){return b&&"boolean"!=typeof b&&void 0!=b[c.Field]?(b[c.Field].$setValidity("server",!1),!1):void 0})})),h.pop("error","Error!",c,null,"trustedHtml")}}function m(a){h.pop("error","Error!","Server error occured")}function n(){a.id=d.id?d.id:0,a.forms={},a.detailsTab={index:1,formName:"details"},a.categoriesTab={index:2,formName:"categories"},a.options={},a.options.activeTabIndex=a.detailsTab.index;var b=[];b.push(a.detailsTab),b.push(a.categoriesTab),a.tabs=b,p(),q()}function o(){a.lookups&&a.rootInventoryCategory&&r()}function p(){g.getInventorySkuLookups(a.refreshTracker).success(function(b){if(b.Success){var c=b.Data;a.lookups={},$.each(c,function(b,c){"InventorySkuChannels"==c.Name?a.lookups.inventorySkuChannels=c.LookupVariants:"InventorySkuProductSources"==c.Name?a.lookups.inventorySkuProductSources=c.LookupVariants:"InventorySkuUnitOfMeasures"==c.Name?a.lookups.inventorySkuUnitOfMeasures=c.LookupVariants:"InventorySkuPurchaseUnitOfMeasures"==c.Name&&(a.lookups.inventorySkuPurchaseUnitOfMeasures=c.LookupVariants)}),o()}else m(b)}).error(function(a){m(a)})}function q(){g.getInventorySkuCategoriesTree({},a.refreshTracker).success(function(b){b.Success?(a.rootInventoryCategory={},a.rootInventoryCategory.SubItems=b.Data,o()):m(b)}).error(function(a){m(a)})}function r(){g.getInventorySku(a.id,a.refreshTracker).success(function(b){b.Success?(a.inventorySku=b.Data,a.updateSalesCategoriesCollapsed(!0)):m(b)}).error(function(a){m(a)})}a.refreshTracker=j("refresh");var s=function(){$.each(a.forms,function(a,b){b&&"boolean"!=typeof b&&$.each(b,function(a,b){b&&b.$name==a&&b.$setValidity("server",!0)})})};a.save=function(){s(),a.forms.details.$valid?g.updateInventorySku(a.inventorySku,a.refreshTracker).success(function(a){l(a)}).error(function(a){m(a)}):(a.forms.submitted=!0,a.detailsTab.active=!0,h.pop("error","Error!","Validation errors, please correct field values.",null,"trustedHtml"))},a.updateSalesCategoriesCollapsed=function(b){b?a.$broadcast("angular-ui-tree:expand-all"):a.$broadcast("angular-ui-tree:collapse-all"),a.salesCategoriesExpanded=b},a.toggleOpen=function(a,b){a.IsOpen=!a.IsOpen},n()}]),angular.module("app.modules.inventorysku.controllers.assignInventorySkusController",[]).controller("assignInventorySkusController",["$scope","$rootScope","$state","$uibModalInstance","inventorySkuService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil","data",function(a,b,c,d,e,f,g,h,i,j,k){function l(a){var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),f.pop("error","Error!",b,null,"trustedHtml")}function m(){e.getInventorySkus(a.filter,a.refreshTracker).success(function(b){b.Success?(a.items=b.Data.Items,a.totalItems=b.Data.Count):l(b)}).error(function(a){l(a)})}function n(){a.forms={},a.assignedItems=angular.copy(k.assignedItems),a.filter={StatusCode:2,Code:null}}a.refreshTracker=i("refresh"),a.filterItems=function(){a.forms.form.$valid?m():a.forms.submitted=!0},a.add=function(b){var c=!0;if($.each(a.assignedItems,function(a,d){return d.Id==b.Id?void(c=!1):void 0}),c){var d=angular.copy(b);d.Quantity=1,a.assignedItems.push(d)}},a["delete"]=function(b){a.assignedItems.splice(b,1)},a.save=function(){o(),a.forms.InventorySkus.$valid?(k.thenCallback(a.assignedItems),d.close()):a.forms.InventorySkus.submitted=!0};var o=function(){$.each(a.forms,function(a,b){b&&"boolean"!=typeof b&&("InventorySkus"==a?$.each(b,function(a,b){0==a.indexOf("i")&&$.each(b,function(a,b){b&&b.$name==a&&b.$setValidity("server",!0)})}):$.each(b,function(a,b){b&&b.$name==a&&b.$setValidity("server",!0)}))})};a.cancel=function(){d.close()},n()}]),angular.module("app.modules.inventorysku.controllers.inventorySkusUsageReportController",[]).controller("inventorySkusUsageReportController",["$scope","$rootScope","$state","$timeout","inventorySkuService","productService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h,j,k,l){function m(a){var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),g.pop("error","Error!",b,null,"trustedHtml")}function n(){var b={};angular.copy(a.filter,b),b.From&&(b.From=b.From.toServerDateTime()),b.To&&(b.To=b.To.toServerDateTime()),b.Skus&&(b.SkuIds=$.map(b.Skus,function(a,b){return a.Id})),b.InvSkus&&(b.InvSkuIds=$.map(b.InvSkus,function(a,b){return a.Id})),e.getInventorySkuUsageReport(b,a.refreshTracker).success(function(b){b.Success?a.items=b.Data:m(b)}).error(function(a){m(a)})}function o(){a.forms={},a.options={};var b=new Date;b.setHours(0,0,0,0),a.filter={To:b.shiftDate("+1d"),From:b.shiftDate("-1m"),Skus:[],InvSkus:[]},a.skusFilter={Code:"",Paging:{PageIndex:1,PageItemCount:20}},a.skuFilter={ExactCode:"",Paging:{PageIndex:1,PageItemCount:1}},a.invSkusFilter={Code:"",Paging:{PageIndex:1,PageItemCount:20}},a.invSkuFilter={ExactCode:"",Paging:{PageIndex:1,PageItemCount:1}},a.filterChanged(),p()}function p(){e.getInventorySkuLookups(a.refreshTracker).success(function(b){if(b.Success){var c=b.Data;a.lookups={},$.each(c,function(b,c){"InventorySkuChannels"==c.Name?a.lookups.inventorySkuChannels=$.map(c.LookupVariants,function(a,b){return{Key:a.Id,Text:a.ValueVariant}}):"InventorySkuProductSources"==c.Name?a.lookups.inventorySkuProductSources=$.map(c.LookupVariants,function(a,b){return{Key:a.Id,Text:a.ValueVariant}}):"InventorySkuUnitOfMeasures"==c.Name?a.lookups.inventorySkuUnitOfMeasures=$.map(c.LookupVariants,function(a,b){return{Key:a.Id,Text:a.ValueVariant}}):"InventorySkuPurchaseUnitOfMeasures"==c.Name&&(a.lookups.inventorySkuPurchaseUnitOfMeasures=$.map(c.LookupVariants,function(a,b){return{Key:a.Id,Text:a.ValueVariant}}))}),n()}else m(b)}).error(function(a){m(a)})}a.refreshTracker=k("refresh"),a.filterItems=function(){a.forms.form.$valid?(a.forms.form.submitted=!1,n()):a.forms.form.submitted=!0},a.filterChanged=function(){var c={};if(angular.copy(a.filter,c),c.From&&(c.From=c.From.toServerDateTime()),c.To&&(c.To=c.To.toServerDateTime()),c.sSkuIds="",c.Skus.length>0)for(i=0;i<c.Skus.length;i++)c.sSkuIds+=c.Skus[i].Id,i!=c.Skus.length-1&&(c.sSkuIds+=",");if(c.sInvSkuIds="",c.InvSkus.length>0)for(i=0;i<c.InvSkus.length;i++)c.sInvSkuIds+=c.InvSkus[i].Id,i!=c.InvSkus.length-1&&(c.sInvSkuIds+=",");a.options.ExportUrl=e.getInventorySkuUsageReportFile(c,b.buildNumber)},a.getSKUsBySKU=function(b){return b?(a.skusFilter.Code=b,f.getSkus(a.skusFilter).then(function(a){return a.data.Data.map(function(a){return a})})):void 0},a.skuChangedRequest=null,a.skuChanged=function(b){a.skuChangedRequest&&d.cancel(a.skuChangedRequest),a.skuChangedRequest=d(function(){a.options.SkuCode&&(a.skuFilter.ExactCode=a.options.SkuCode,a.options.SkuAddDisabled=!0,f.getSku(a.skuFilter).success(function(b){b.Success?a.options.CurrentSku=b.Data:m(b),a.options.SkuAddDisabled=!1,a.skuChangedRequest=null}).error(function(b){a.options.SkuAddDisabled=!1,m(b),a.skuChangedRequest=null}))},100)},a.addSku=function(){if(a.options.CurrentSku){var b=!0;$.each(a.filter.Skus,function(c,d){return a.options.CurrentSku.Id==d.Id?(b=!1,!1):void 0}),b&&(a.filter.Skus.push(a.options.CurrentSku),a.filterChanged())}},a.removeSku=function(b){a.filter.Skus.splice(b,1),a.filterChanged()},a.getSKUsBySKU=function(b){return b?(a.skusFilter.Code=b,f.getSkus(a.skusFilter).then(function(a){return a.data.Data.map(function(a){return a})})):void 0},a.getInvSKUsBySKU=function(b){return b?(a.invSkusFilter.Code=b,e.getInventorySkus(a.invSkusFilter).then(function(a){return a.data.Data.Items.map(function(a){return a})})):void 0},a.invSkuChangedRequest=null,a.invSkuChanged=function(b){a.invSkuChangedRequest&&d.cancel(a.invSkuChangedRequest),a.invSkuChangedRequest=d(function(){a.options.InvSkuCode&&(a.invSkuFilter.ExactCode=a.options.InvSkuCode,a.options.InvSkuAddDisabled=!0,e.getShortInventorySku(a.invSkuFilter).success(function(b){b.Success?a.options.CurrentInvSku=b.Data:m(b),a.options.InvSkuAddDisabled=!1,a.invSkuChangedRequest=null}).error(function(b){a.options.InvSkuAddDisabled=!1,m(b),a.invSkuChangedRequest=null}))},100)},a.addInvSku=function(){if(a.options.CurrentInvSku){var b=!0;$.each(a.filter.InvSkus,function(c,d){return a.options.CurrentInvSku.Id==d.Id?(b=!1,!1):void 0}),b&&(a.filter.InvSkus.push(a.options.CurrentInvSku),a.filterChanged())}},a.removeInvSku=function(b){a.filter.InvSkus.splice(b,1),a.filterChanged()},o()}]),angular.module("app.modules.inventorysku.controllers.inventoriesSummaryUsageReportController",[]).controller("inventoriesSummaryUsageReportController",["$scope","$rootScope","$state","$q","inventorySkuService","productService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h,i,j,k){function l(a,b){for(var c=this,d="",e=0;b>e;e++)d+="----";c.Text=d+a.Name;var f=[];r(a,f),c.Key=f}function m(a){var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),g.pop("error","Error!",b,null,"trustedHtml")}function n(){var b={};angular.copy(a.filter,b),b.From&&(b.From=b.From.toServerDateTime()),b.To&&(b.To=b.To.toServerDateTime()),e.getInventoriesSummaryUsageReport(b,a.refreshTracker).success(function(b){b.Success?a.report=b.Data:m(b)}).error(function(a){m(a)})}function o(){a.options={},a.assembles=[{Key:null,Text:"All Assemble Types"},{Key:!0,Text:"Assembled"},{Key:!1,Text:"Not Assembled"}],a.forms={};var b=new Date;b.setHours(0,0,0,0),a.filter={To:b.shiftDate("+1d"),From:b.shiftDate("-4m"),Sku:null,InvSku:null,Assemble:null,IdsInvCat:null},a.skusFilter={Code:"",Paging:{PageIndex:1,PageItemCount:20}},a.invSkusFilter={Code:"",Paging:{PageIndex:1,PageItemCount:20}},p()}function p(){e.getInventorySkuCategoriesTree({},a.refreshTracker).success(function(b){b.Success?(a.rootCategory={},a.rootCategory.SubItems=b.Data,a.filterCategories=[{Key:null,Text:"All"}],q(a.rootCategory,0),a.filterChanged(),n()):m(b)}).error(function(a){m(a)})}function q(b,c){b.Name&&a.filterCategories.push(new l(b,c)),$.each(b.SubItems,function(a,b){q(b,c+1)})}function r(a,b){b.push(a.Id),$.each(a.SubItems,function(a,c){r(c,b)})}a.refreshTracker=j("refresh"),a.filterItems=function(){if(a.forms.form.$valid){var b=s();null==b?n():(a.forms.form.submitted=!0,g.pop("error","Error!",b,null,"trustedHtml"))}else a.forms.form.submitted=!0};var s=function(){var b=null;a.filter.From>a.filter.To&&(b="'To' date can't be less than 'From' date.");var c=a.filter.To.getMonth()-a.filter.From.getMonth()+12*(a.filter.To.getFullYear()-a.filter.From.getFullYear());return c>12&&(b="Date range can't be more than 12 months."),b};a.filterChanged=function(){if(a.forms.form.$valid){var c=s();if(c)return a.options.exportMsg=c,a.options.exportUrl=null,void(a.forms.form.submitted=!0);var d={};angular.copy(a.filter,d),d.From&&(d.From=d.From.toServerDateTime()),d.To&&(d.To=d.To.toServerDateTime()),a.options.exportUrl=e.getInventoriesSummaryUsageReportFile(d,b.buildNumber)}else a.forms.form.submitted=!0},a.exportClick=function(b){a.options.exportUrl||(a.forms.form.submitted=!0,a.options.exportMsg&&g.pop("error","Error!",a.options.exportMsg,null,"trustedHtml"),b.preventDefault())},a.getSKUsBySKU=function(b){return b?(a.skusFilter.Code=b,f.getSkus(a.skusFilter).then(function(a){return a.data.Data.map(function(a){return a})})):void 0},a.getInvSKUsBySKU=function(b){return b?(a.invSkusFilter.Code=b,e.getInventorySkus(a.invSkusFilter).then(function(a){return a.data.Data.Items.map(function(a){return a})})):void 0},o()}]),angular.module("app.modules.inventorysku",["app.modules.inventorysku.controllers.inventorySkuCategoriesController","app.modules.inventorysku.controllers.inventorySkuCategoryManageController","app.modules.inventorysku.controllers.inventorySkusController","app.modules.inventorysku.controllers.inventorySkuManageController","app.modules.inventorysku.controllers.assignInventorySkusController","app.modules.inventorysku.controllers.inventorySkusUsageReportController","app.modules.inventorysku.controllers.inventoriesSummaryUsageReportController"]).config(["$stateProvider","$urlRouterProvider",function(a,b){a.state("index.oneCol.manageInventorySkuCategories",{url:"/inventoryskus/settings/categories",templateUrl:"app/modules/inventorysku/partials/inventorySkuCategoriesTreeView.html",controller:"inventorySkuCategoriesController"}).state("index.oneCol.manageInventorySkus",{url:"/inventoryskus",templateUrl:"app/modules/inventorysku/partials/inventorySkusList.html",controller:"inventorySkusController"}).state("index.oneCol.addNewInventorySku",{url:"/inventoryskus/add",templateUrl:"app/modules/inventorysku/partials/inventorySkuDetail.html",controller:"inventorySkuManageController"}).state("index.oneCol.inventorySkuDetail",{url:"/inventoryskus/{id:int}",templateUrl:"app/modules/inventorysku/partials/inventorySkuDetail.html",controller:"inventorySkuManageController"}).state("index.oneCol.inventorySkusUsageReport",{url:"/report/inventoryskus-usage",templateUrl:"app/modules/inventorysku/partials/inventorySkusUsageReport.html",controller:"inventorySkusUsageReportController"}).state("index.oneCol.inventoriesSummaryUsageReport",{url:"/report/inventoryskus-usage-summary",templateUrl:"app/modules/inventorysku/partials/inventoriesSummaryUsageReport.html",controller:"inventoriesSummaryUsageReportController"})}]),angular.module("app.modules.order.services.orderEditService",[]).factory("orderEditService",["$q","$filter","$injector","$state","$rootScope","$timeout","customerEditService","customerService","orderService","productService","gcService","discountService","toaster","modalUtil",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=function(a){a.activateTab=function(b){0==b.indexOf("GCs")&&(b="GCs"),$.each(a.tabs,function(c,d){var e=null;return d.formName==b&&(e=d),d.formNames&&$.each(d.formNames,function(a,c){return c==b?(e=d,!1):void 0}),e?(a.options.activeTabIndex=e.index,!1):void 0})},a.fireServerValidation=function(b){var c="";if(b.Messages){null!=a.forms.topForm&&(a.forms.topForm.submitted=!0),a.forms.mainForm.submitted=!0,null!=a.forms.mainForm2&&(a.forms.mainForm2.submitted=!0),a.forms.GCs&&(a.forms.GCs.skussubmitted=!0),a.forms.submitted.profile=!0,a.forms.submitted.shipping=!0,a.forms.submitted.card=!0,a.forms.submitted.oac=!0,a.forms.submitted.check=!0,a.forms.submitted.wiretransfer=!0,a.forms.submitted.marketing=!0,a.forms.submitted.vcwellness=!0,a.forms.submitted.nc=!0,a.serverMessages=new ServerMessages(b.Messages),a.calculateServerMessages=new ServerMessages(b.Messages);var d,e=null;$.each(b.Messages,function(b,f){if(f.Field)if(f.Field.indexOf("::")>=0){var g=f.Field.split("::"),h=g[0],i=g[1];if(i.indexOf(".")>=0){g=i.split(".");var j=g[0],k=g[1];switch(j){case"Shipping":var l=k.split("i")[1];a.shippingAddressTab.AddressIndex=l,d=a.forms[h],i=g[2],void 0!=d[i]&&(d[i].$setValidity("server",!1),null==e&&(e=h));break;case"CreditCards":var l=k.split("i")[1];a.paymentInfoTab.CreditCardIndex=l,d=a.forms[h],i=g[2],void 0!=d[i]&&(d[i].$setValidity("server",!1),null==e&&(e=h))}}d=a.forms[h],void 0!=d[i]&&(d[i].$setValidity("server",!1),null==e&&(e=h))}else $.each(a.forms,function(a,b){b&&"submitted"!==a&&void 0!=b[f.Field]&&(b[f.Field].$setValidity("server",!1),null==e&&(e=a))});c+=f.Message+"<br />"}),e&&a.activateTab(e)}m.pop("error","Error!",c,null,"trustedHtml")},a.buildOrderShippingAddressForPartial=function(b){return void 0!==a.order&&void 0!==a.order.Shipping?(void 0!==a.shippingAddressTab.OrderShippingEditModel&&a.shippingAddressTab.OrderShippingEditModel.Address==a.order.Shipping||(a.shippingAddressTab.OrderShippingEditModel={Address:a.order.Shipping,formName:"shipping",recalculate:!0}),a.shippingAddressTab.OrderShippingEditModel.disableValidation=b,a.shippingAddressTab.OrderShippingEditModel):void 0},a.buildOrderPaymentPartial=function(a,b){return a.disableValidation=b,a},a.oldOrderForCalculating=null,a.skusClientValid=function(){var b=!0;$.each(a.order.SkuOrdereds,function(a,b){b.ClientMessages=[]});for(var c=0;c<a.order.SkuOrdereds.length;c++){var d=a.order.SkuOrdereds[c];if(d.Code)for(var e=c+1;e<a.order.SkuOrdereds.length;e++)(d.Code==a.order.SkuOrdereds[e].Code||d.Code&&a.order.SkuOrdereds[e].Code&&d.Code.toUpperCase()==a.order.SkuOrdereds[e].Code.toUpperCase())&&(a.order.SkuOrdereds[e].ClientMessages.push("Duplicate SKU"),b=!1)}return b},a.clearServerValidation=function(){$.each(a.forms,function(a,b){b&&$.each(b,function(a,b){return b&&"DiscountCode"==b.$name?!1:void(b&&b.$name==a&&b.$setValidity("server",!0))})})},a.gcLostFocus=function(b,c){0==b||c||a.order.GCs.splice(b,1),a.requestRecalculate()},a.getGCs=function(b){return a.gcsFilter.Code=b,k.getGiftCertificates(a.gcsFilter).then(function(a){return a.data.Data.Items.map(function(a){return a.Code})})},a.getDiscounts=function(b){return a.discountsFilter.Code=b,l.getDiscounts(a.discountsFilter).then(function(a){return a.data.Data.Items.map(function(a){return a.Code})})},a.productAdd=function(){if(!(a.order.SkuOrdereds.length>0)||a.order.SkuOrdereds[a.order.SkuOrdereds.length-1].Code){var b={Code:"",Id:null,QTY:null,ProductName:"",Price:null,Amount:null,IdProductType:null,Messages:[]};a.order.SkuOrdereds.push(b)}},a.productDelete=function(b){1==a.order.SkuOrdereds.length?(a.order.SkuOrdereds.splice(b,1),a.productAdd()):a.order.SkuOrdereds.splice(b,1),a.requestRecalculate()},a.topPurchasedProducts=function(){n.open("app/modules/product/partials/topPurchasedProductsPopup.html","topPurchasedProductsController",{products:a.order.SkuOrdereds,idCustomer:a.currentCustomer.Id,thenCallback:function(b){var c=b;$.each(c,function(b,c){var d=!0;if($.each(a.order.SkuOrdereds,function(a,b){return c.Code==b.Code||c.Code&&b.Code&&c.Code.toUpperCase()==b.Code.toUpperCase()?(d=!1,!1):void 0}),d){a.order.SkuOrdereds.length>0&&!a.order.SkuOrdereds[a.order.SkuOrdereds.length-1].Code&&a.order.SkuOrdereds.splice(a.order.SkuOrdereds.length-1,1);var e={};e.QTY=1,e.Code=c.Code,e.IdProductType=c.ProductType,e.Id=c.Id,e.ProductName=c.DescriptionName,1==a.currentCustomer.CustomerType?e.Price=c.Price:2==a.currentCustomer.CustomerType&&(e.Price=c.WholesalePrice),e.Amount=e.Price,a.order.SkuOrdereds.push(e)}}),a.requestRecalculate()}})},a.gcAdd=function(){a.order.GCs.push({Code:""})},a.gcDelete=function(b){a.order.GCs.splice(b,1)},a.getSKUsBySKU=function(b){return b?(a.skusFilter.Code=b,a.skusFilter.DescriptionName="",j.getSkus(a.skusFilter).then(function(a){return a.data.Data.map(function(a){return a})})):void 0},a.skuChangedRequest=null,a.skuChanged=function(b){a.skuChangedRequest&&f.cancel(a.skuChangedRequest),a.skuChangedRequest=f(function(){var c=a.order.SkuOrdereds[b];null!=c&&c.RequestedCode!=c.Code&&(c.Code?(a.skuFilter.ExactCode=c.Code,a.skuFilter.Index=b,a.skuFilter.ExactDescriptionName="",j.getSku(a.skuFilter).success(function(d){d.Success?d.Data&&(c.RequestedCode=a.skuFilter.ExactCode,c.QTY=1,c.IdProductType=d.Data.ProductType,c.ProductName=d.Data.DescriptionName,c.Id=d.Data.Id,c.AutoShipProduct=d.Data.AutoShipProduct,c.AutoShipFrequency1=d.Data.AutoShipFrequency1,c.AutoShipFrequency2=d.Data.AutoShipFrequency2,c.AutoShipFrequency3=d.Data.AutoShipFrequency3,c.AutoShipFrequency6=d.Data.AutoShipFrequency6,1==a.currentCustomer.CustomerType?c.Price=d.Data.Price:2==a.currentCustomer.CustomerType&&(c.Price=d.Data.WholesalePrice),c.Amount=c.Price,a.order.SkuOrdereds.length==b+1&&a.productAdd(),a.requestRecalculate()):errorHandler(d)}).error(function(a){errorHandler(a)}),a.skuChangedRequest=null):c.RequestedCode&&(c.RequestedCode="",a.requestRecalculate()))},100)},a.getSKUsByProductName=function(b){return b?(a.skusFilter.Code="",a.skusFilter.DescriptionName=b,j.getSkus(a.skusFilter).then(function(a){return a.data.Data.map(function(a){return a})})):void 0},a.productNameChanged=function(b){var c=a.order.SkuOrdereds[b];c&&(a.skuFilter.ExactCode="",a.skuFilter.ExactDescriptionName=c.ProductName,j.getSku(a.skuFilter).success(function(d){d.Success?d.Data&&(c.QTY=1,c.IdProductType=d.Data.ProductType,c.Code=d.Data.Code,c.RequestedCode=c.Code,c.Id=d.Data.Id,c.AutoShipProduct=d.Data.AutoShipProduct,c.AutoShipFrequency1=d.Data.AutoShipFrequency1,c.AutoShipFrequency2=d.Data.AutoShipFrequency2,c.AutoShipFrequency3=d.Data.AutoShipFrequency3,c.AutoShipFrequency6=d.Data.AutoShipFrequency6,1==a.currentCustomer.CustomerType?c.Price=d.Data.Price:2==a.currentCustomer.CustomerType&&(c.Price=d.Data.WholesalePrice),c.Amount=c.Price,a.order.SkuOrdereds.length==b+1&&a.productAdd(),a.requestRecalculate()):errorHandler(d)}).error(function(a){errorHandler(a)}))},a.refreshOrderHistory=function(){if(a.id){var b={};b.service=i,b.tracker=a.addEditTracker,b.idObject=a.id,b.idObjectType=2,a.$broadcast("objectHistorySection#in#refresh",b)}},a.sendOrderConfirmationEmail=function(){n.open("app/modules/order/partials/sendOrderConfirmationPopup.html","sendOrderConfirmationController",{Email:a.currentCustomer.Email,Id:a.order.Id,thenCallback:function(a){}},{size:"xs"})},a.sendOrderShippingConfirmationEmail=function(){n.open("app/modules/order/partials/sendOrderShippingConfirmationPopup.html","sendOrderShippingConfirmationController",{Email:a.currentCustomer.Email,OrderStatus:a.order.OrderStatus,POrderStatus:a.order.POrderStatus,NPOrderStatus:a.order.NPOrderStatus,Id:a.order.Id,thenCallback:function(a){}},{size:"xs"})},a.goToCustomer=function(){d.go("index.oneCol.customerDetail",{id:a.idCustomer})},a.shippingCustomerSavedChanged=function(){a.options.shippingCustomerSaved?a.shippingAddressTab.AddressIndex&&a.currentCustomer.Shipping.length>0&&(a.shippingAddressTab.OrderShippingEditModel=void 0,a.order.Shipping=angular.copy(a.currentCustomer.Shipping[parseInt(a.shippingAddressTab.AddressIndex)])):null!=a.order.OldShipping&&(g.syncCountry(a,a.order.OldShipping),a.order.Shipping=angular.copy(a.order.OldShipping))},a.creditCardCustomerSavedChanged=function(){a.options.creditCardCustomerSaved?a.paymentInfoTab.CreditCardIndex&&a.currentCustomer.CreditCards.length>0&&(a.order.CreditCard=angular.copy(a.currentCustomer.CreditCards[parseInt(a.paymentInfoTab.CreditCardIndex)])):null!=a.order.OldCreditCard&&(g.syncCountry(a,a.order.OldCreditCard.Address),a.order.CreditCard=angular.copy(a.order.OldCreditCard))},a.setNewCreditCardOrder=function(b){return a.forms.card.$valid?h.createCreditCardPrototype(a.addEditTracker).success(function(c){c.Success?(g.syncCountry(a,c.Data.Address),a.order.CreditCard=c.Data,b&&b(c.Data)):successHandler(c)}).error(function(a){errorHandler(a)}).then(function(){a.forms.submitted.card=!1}):a.forms.submitted.card=!0,!1},a.makeBillingAsShippingAddressOrder=function(){var b;switch(String(a.paymentInfoTab.PaymentMethodType)){case"1":b=a.order.CreditCard.Address;break;case"2":b=a.order.Oac.Address;break;case"3":b=a.order.Check.Address;break;case"4":b=a.order.NC.Address;break;case"6":b=a.order.WireTransfer.Address;break;case"7":b=a.order.Marketing.Address;break;case"8":b=a.order.VCWellness.Address}if(b){var c=a.buildOrderShippingAddressForPartial(a.order.OnHold&&!a.order.UpdateShippingAddressForCustomer);if(c){for(var d in c.Address)b[d]=c.Address[d];b.AddressType=2}}},a.makeShippingAsBillingAddressOrder=function(){var b;switch(String(a.paymentInfoTab.PaymentMethodType)){case"1":b=a.order.CreditCard.Address;break;case"2":b=a.order.Oac.Address;break;case"3":b=a.order.Check.Address;break;case"4":b=a.order.NC.Address;break;case"6":
b=a.order.WireTransfer.Address;break;case"7":b=a.order.Marketing.Address;break;case"8":b=a.order.VCWellness.Address}if(b){var c=a.buildOrderShippingAddressForPartial(a.order.OnHold&&!a.order.UpdateShippingAddressForCustomer);if(c){var d=c.Address.Default,e=c.Address.ShippingAddressType,f=c.Address.PreferredShipMethod,g=c.Address.DeliveryInstructions;for(var h in b)c.Address[h]=b[h];b.AddressType=3,c.Address.Default=d,c.Address.ShippingAddressType=e,c.Address.PreferredShipMethod=f,c.Address.DeliveryInstructions=g}}},a.checkCustomerCreditCardStatus=function(){var b=a.currentCustomer.CreditCards[a.paymentInfoTab.CreditCardIndex];b&&b.IdCustomerPaymentMethod&&!b.NotInStore&&b.CardNumber.indexOf("X")>=0&&h.getCustomerCardExist(b.IdCustomerPaymentMethod,a.currentCustomer.Id).success(function(a){b.NotInStore=a.Success&&!a.Data}).error(function(a){errorHandler(a)})}},p=function(a){a.initAutoShipOptions=function(){if(a.autoShipOrderOptionShow=(1==a.order.SkuOrdereds.length||2==a.order.SkuOrdereds.length&&!a.order.SkuOrdereds[1].Code)&&a.order.SkuOrdereds[0].AutoShipProduct,a.autoShipOrderOptionShow){var b=[];a.order.SkuOrdereds[0].AutoShipFrequency1&&b.push({Key:1,Text:"1 Month"}),a.order.SkuOrdereds[0].AutoShipFrequency2&&b.push({Key:2,Text:"2 Months"}),a.order.SkuOrdereds[0].AutoShipFrequency3&&b.push({Key:3,Text:"3 Months"}),a.order.SkuOrdereds[0].AutoShipFrequency6&&b.push({Key:6,Text:"6 Months"}),a.autoShipOrderFrequencies=b}else 2==a.order.IdObjectType&&(a.order.IdObjectType=1)}},q=function(b){function c(a){b.order.AlaskaHawaiiSurcharge=a.AlaskaHawaiiSurcharge,b.order.CanadaSurcharge=a.CanadaSurcharge,b.order.StandardShippingCharges=a.StandardShippingCharges,b.order.ShippingTotal=a.ShippingTotal,b.order.TotalShipping=a.TotalShipping,b.order.ProductsSubtotal=a.ProductsSubtotal,b.order.DiscountTotal=a.DiscountTotal,b.order.DiscountedSubtotal=a.DiscountedSubtotal,b.order.DiscountMessage=a.DiscountMessage,b.order.TaxTotal=a.TaxTotal,b.order.GiftCertificatesSubtotal=a.GiftCertificatesSubtotal,b.order.Total=a.Total,b.order.ShouldSplit=a.ShouldSplit,b.shippingUpgradePOptions=a.ShippingUpgradePOptions,b.shippingUpgradeNPOptions=a.ShippingUpgradeNPOptions,b.order.ShippingOverride=a.ShippingOverride,b.order.SurchargeOverride=a.SurchargeOverride,b.productsPerishableThresholdIssue=a.ProductsPerishableThresholdIssue,a.SkuOrdereds&&$.each(a.SkuOrdereds,function(a,b){b.ErrorMessages=$.grep(b.Messages,function(a,b){return 0==a.MessageLevel})}),a.PromoSkus&&$.each(a.PromoSkus,function(a,b){b.ErrorMessages=$.grep(b.Messages,function(a,b){return 0==a.MessageLevel})});if($.each(b.order.SkuOrdereds,function(b,c){var d=!1;$.each(a.SkuOrdereds,function(a,b){return c.Code==b.Code||c.Code&&b.Code&&c.Code.toUpperCase()==b.Code.toUpperCase()?(c.Code==b.Code,c.Price=b.Price,c.Amount=b.Amount,c.Quantity=b.Quantity,c.Messages=b.Messages,c.ErrorMessages=b.ErrorMessages,c.GCCodes=b.GCCodes,d=!0,!1):void 0})}),b.order.PromoSkus=a.PromoSkus,$.each(b.forms,function(a,b){b&&("GCs"==a?$.each(b,function(a,b){0==a.indexOf("i")&&$.each(b,function(a,b){b&&b.$name==a&&b.$setValidity("server",!0)})}):"mainForm2"==a&&$.each(b,function(a,b){b&&b.$name==a&&b.$setValidity("server",!0)}))}),a.Messages){null!=b.forms.mainForm2&&(b.forms.mainForm2.submitted=!0),b.forms.GCs&&(b.forms.GCs.skussubmitted=!0),b.calculateErrors=a.Messages,b.calculateServerMessages=new ServerMessages(a.Messages);var c=null;$.each(a.Messages,function(a,d){if(d.Field)if(d.Field.indexOf(".")>-1){var e=d.Field.split(".");b.forms[e[0]][e[1]][e[2]].$setValidity("server",!1),c=e[0],openSKUs()}else $.each(b.forms,function(a,b){return b&&void 0!=b[d.Field]?(b[d.Field].$setValidity("server",!1),!1):void 0})})}b.initAutoShipOptions&&b.initAutoShipOptions()}b.requestRecalculate=function(d,e){if(!b.skusClientValid())return void(e&&e());angular.forEach(b.currentCustomer.Shipping,function(a,c){a.IsSelected=c.toString()==b.shippingAddressTab.AddressIndex});var f=angular.copy(b.order);f.Customer=angular.copy(b.currentCustomer),b.oldOrderForCalculating=f,b.currectCalculateCanceller&&b.currectCalculateCanceller.resolve("canceled"),b.currectCalculateCanceller=a.defer(),i.calculateOrder(f,b.currectCalculateCanceller).success(function(a){a.Success?c(a.Data):errorHandler(a),b.currectCalculateCanceller&&(b.currectCalculateCanceller.reject(),b.currectCalculateCanceller=null),d&&d(a)}).error(function(a){"canceled"==a&&(errorHandler(a),b.currectCalculateCanceller&&(b.currectCalculateCanceller.reject(),b.currectCalculateCanceller=null)),d&&d(a)})}},r=function(a){a.order.ShipDelayDate&&(a.order.ShipDelayDate=Date.parseDateTime(a.order.ShipDelayDate)),a.order.ShipDelayDateP&&(a.order.ShipDelayDateP=Date.parseDateTime(a.order.ShipDelayDateP)),a.order.ShipDelayDateNP&&(a.order.ShipDelayDateNP=Date.parseDateTime(a.order.ShipDelayDateNP)),a.order.IgnoneMinimumPerishableThreshold&&(a.options.ignoneMinimumPerishableThreshold=a.order.IgnoneMinimumPerishableThreshold),a.order.OldShipping=angular.copy(a.order.Shipping),a.order.OldCreditCard=angular.copy(a.order.CreditCard),a.options.shippingCustomerSaved=!1,a.options.creditCardCustomerSaved=!1,a.shippingAddressTab.AddressIndex=null,a.paymentInfoTab.CreditCardIndex=null},s=function(a){if(a.options.oldOrderStatus=a.order.CombinedEditOrderStatus,a.order.OnHold=7==a.order.CombinedEditOrderStatus,1!=a.order.IdObjectType&&2!=a.order.IdObjectType||(a.order.AutoShipFrequency?a.order.IdObjectType=2:a.order.IdObjectType=1),a.onHoldWatch&&a.onHoldWatch(),a.onHoldWatch=a.$watch("order.OnHold",function(b,c){3!=a.order.CombinedEditOrderStatus&&4!=a.order.CombinedEditOrderStatus&&5!=a.order.CombinedEditOrderStatus&&void 0!==b&&null!==b&&(b?a.order.CombinedEditOrderStatus=7:a.order.CombinedEditOrderStatus!=a.options.oldOrderStatus?a.order.CombinedEditOrderStatus=a.options.oldOrderStatus:a.order.CombinedEditOrderStatus=2)}),a.orderEditDisabled=3==a.order.CombinedEditOrderStatus||4==a.order.CombinedEditOrderStatus||5==a.order.CombinedEditOrderStatus,a.legend.CustomerName=a.currentCustomer.ProfileAddress.FirstName+" "+a.currentCustomer.ProfileAddress.LastName,a.id)if(a.legend.OrderId=a.order.Id,a.legend.OrderDate=a.order.DateCreated,a.order.OrderStatus)a.legend.OrderStatus=e.getReferenceItem(e.ReferenceData.OrderStatuses,a.order.OrderStatus).Text;else{var b="";a.order.POrderStatus&&(b+="P - {0}".format(e.getReferenceItem(e.ReferenceData.OrderStatuses,a.order.POrderStatus).Text)),a.order.NPOrderStatus&&(b.length>0&&(b+=", "),b+="NP - {0}".format(e.getReferenceItem(e.ReferenceData.OrderStatuses,a.order.NPOrderStatus).Text)),a.legend.OrderStatus=b}else a.legend.CustomerId=a.idCustomer;if(a.order.ShippingUpgradeP){var c=$.grep(e.ReferenceData.ShippingUpgrades,function(b,c){return b.Key==a.order.ShippingUpgradeP});c.length>0&&(a.shippingUpgradePOptions=c)}if(a.order.ShippingUpgradeNP){var c=$.grep(e.ReferenceData.ShippingUpgrades,function(b,c){return b.Key==a.order.ShippingUpgradeNP});c.length>0&&(a.shippingUpgradeNPOptions=c)}},t=function(a){if(a.currentCustomer.SourceDetails)a.currentCustomer.SourceValue=a.currentCustomer.SourceDetails;else if(a.currentCustomer.Source){var b=a.currentCustomer.Source;a.orderSources&&$.each(a.orderSources,function(c,d){return d.Key==a.currentCustomer.Source?(b=d.Text,!1):void 0}),a.currentCustomer.SourceValue=b}a.options.ShippingAddressIndexWatch&&a.options.ShippingAddressIndexWatch(),a.paymentInfoTab.CreditCardIndex="0",angular.forEach(a.currentCustomer.CreditCards,function(b,c){b.formName="card",g.syncCountry(a,b.Address),b.Default&&(a.paymentInfoTab.CreditCardIndex=c.toString())}),a.options.CreditCardIndexWatch&&a.options.CreditCardIndexWatch(),a.shippingAddressTab.AddressIndex="0",angular.forEach(a.currentCustomer.Shipping,function(b,c){b.Default&&(a.shippingAddressTab.AddressIndex=c.toString())}),a.currentCustomer.Oac&&(a.currentCustomer.Oac.formName="oac",g.syncCountry(a,a.currentCustomer.Oac.Address)),a.currentCustomer.Check&&(a.currentCustomer.Check.formName="check",g.syncCountry(a,a.currentCustomer.Check.Address)),a.currentCustomer.WireTransfer&&(a.currentCustomer.WireTransfer.formName="wiretransfer",g.syncCountry(a,a.currentCustomer.WireTransfer.Address)),a.currentCustomer.Marketing&&(a.currentCustomer.Marketing.formName="marketing",g.syncCountry(a,a.currentCustomer.Marketing.Address)),a.currentCustomer.VCWellness&&(a.currentCustomer.VCWellness.formName="vcwellness",g.syncCountry(a,a.currentCustomer.VCWellness.Address)),a.currentCustomer.NC&&(a.currentCustomer.NC.formName="nc",g.syncCountry(a,a.currentCustomer.NC.Address)),a.order.CreditCard&&(a.order.CreditCard.formName="card",g.syncCountry(a,a.order.CreditCard.Address)),a.order.Oac&&(a.order.Oac.formName="oac",g.syncCountry(a,a.order.Oac.Address)),a.order.Check&&(a.order.Check.formName="check",g.syncCountry(a,a.order.Check.Address)),a.order.WireTransfer&&(a.order.WireTransfer.formName="wiretransfer",g.syncCountry(a,a.order.WireTransfer.Address)),a.order.Marketing&&(a.order.Marketing.formName="marketing",g.syncCountry(a,a.order.Marketing.Address)),a.order.VCWellness&&(a.order.VCWellness.formName="vcwellness",g.syncCountry(a,a.order.VCWellness.Address)),a.order.NC&&(a.order.NC.formName="nc",g.syncCountry(a,a.order.NC.Address))},u=function(a){a.order.SkuOrdereds&&$.each(a.order.SkuOrdereds,function(a,b){b.RequestedCode=b.Code}),a.paymentInfoTab.PaymentMethodType=a.order.IdPaymentMethodType,a.options.ShippingAddressIndexWatch&&a.options.ShippingAddressIndexWatch(),a.options.ShippingAddressIndexWatch=a.$watch("shippingAddressTab.AddressIndex",function(b,c){b&&c!=b&&(a.shippingAddressTab.OrderShippingEditModel=void 0,a.order.Shipping=angular.copy(a.currentCustomer.Shipping[parseInt(b)]))}),a.options.CreditCardIndexWatch=a.$watch("paymentInfoTab.CreditCardIndex",function(b,c){b&&c!=b&&(a.order.CreditCard=angular.copy(a.currentCustomer.CreditCards[parseInt(b)]))}),a.order.CreditCard||a.currentCustomer.CreditCards&&a.currentCustomer.CreditCards[0]&&(a.order.CreditCard=angular.copy(a.currentCustomer.CreditCards[0]),a.order.OldCreditCard=angular.copy(a.currentCustomer.CreditCards[0])),a.order.Oac||(a.order.Oac=a.currentCustomer.Oac),a.order.Check||(a.order.Check=a.currentCustomer.Check),a.order.WireTransfer||(a.order.WireTransfer=a.currentCustomer.WireTransfer),a.order.Marketing||(a.order.Marketing=a.currentCustomer.Marketing),a.order.VCWellness||(a.order.VCWellness=a.currentCustomer.VCWellness),a.order.NC||(a.order.NC=a.currentCustomer.NC),1==a.paymentInfoTab.PaymentMethodType&&(a.paymentInfoTab.CreditCard=a.order.CreditCard)},v=function(a){a.currentCustomer.newEmail||a.currentCustomer.emailConfirm?(a.currentCustomer.Email=a.currentCustomer.newEmail,a.currentCustomer.EmailConfirm=a.currentCustomer.emailConfirm):a.currentCustomer.EmailConfirm=a.currentCustomer.Email,1==a.order.ShipDelayType&&(a.order.ShipDelayDateP=null,a.order.ShipDelayDateNP=null),2==a.order.ShipDelayType&&(a.order.ShipDelayDate=null);var b=angular.copy(a.order);return b.Customer=angular.copy(a.currentCustomer),b.Customer.InceptionDate&&(b.Customer.InceptionDate=b.Customer.InceptionDate.toServerDateTime()),2!=b.IdObjectType&&(b.AutoShipFrequency=null),b.ShipDelayDate&&(b.ShipDelayDate=b.ShipDelayDate.toServerDateTime()),b.ShipDelayDateP&&(b.ShipDelayDateP=b.ShipDelayDateP.toServerDateTime()),b.ShipDelayDateNP&&(b.ShipDelayDateNP=b.ShipDelayDateNP.toServerDateTime()),a.options.OverrideEmail&&(b.Customer.Email=null,b.Customer.EmailConfirm=null),b.SignUpNewsletter=a.options.BrontoSubscribedStatus,b},w=function(a){var b="";1!=a.order.SkuOrdereds.length||a.order.SkuOrdereds[0].Code||(b+="You must add at least 1 product. ");var c=!1;return null!=a.calculateErrors&&0!=a.calculateErrors.length&&(c=!0),a.productsPerishableThresholdIssue&&!a.options.ignoneMinimumPerishableThreshold&&(c=!0),a.productsPerishableThresholdIssue&&(a.order.IgnoneMinimumPerishableThreshold=a.productsPerishableThresholdIssue&&a.options.ignoneMinimumPerishableThreshold),angular.forEach(a.order.SkuOrdereds,function(a,b){return a.ErrorMessages&&0!=a.ErrorMessages.length?void(c=!0):void 0}),c&&(b+="There are some errors in the order. "),b?(a.mainTab.active=!0,m.pop("error","Error!",b,null,"trustedHtml"),!1):!0};return{initBase:o,initAutoShipLogic:p,initRecalculate:q,baseProcessLoadingOrder:r,initOrderOptions:s,baseReferencedDataInit:t,baseReferencedDataInitExistOrder:u,orderDataProcessingBeforeSave:v,isProductsValid:w}}]),angular.module("app.modules.order.controllers.ordersController",[]).controller("ordersController",["$scope","$rootScope","$state","$stateParams","orderService","settingService","gcService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(a){if(a.Messages){var b="";$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),h.pop("error","Error!",b,null,"trustedHtml")}else h.pop("error","Error!","Server error occured")}function n(){var b=a.forms.IsActive?a.filter:a.directOrdersfilter;b.Sorting=a.filter.Sorting;var c={};angular.copy(b,c),c.From&&(c.From=c.From.toServerDateTime()),c.To&&(c.To=c.To.toServerDateTime()),e.getOrders(c,a.refreshTracker).success(function(b){b.Success?($.each(b.Data.Items,function(a,b){b.AllowExport=2==b.OrderStatus,b.IsSelected=3==b.OrderStatus||5==b.OrderStatus,b.PAllowExport=2==b.POrderStatus,b.IsPSelected=3==b.POrderStatus||5==b.POrderStatus,b.NPAllowExport=2==b.NPOrderStatus,b.IsNPSelected=3==b.NPOrderStatus||5==b.NPOrderStatus}),a.items=b.Data.Items,a.totalItems=b.Data.Count):m(b)}).error(function(a){m(a)})}function o(){a.customerTypes=angular.copy(b.ReferenceData.CustomerTypes),a.customerTypes.splice(0,0,{Key:null,Text:"All Customer Types"}),a.orderStatuses=angular.copy(b.ReferenceData.OrderStatuses),a.orderStatuses.splice(0,0,{Key:null,Text:"All Order Statuses"}),a.orderTypes=angular.copy(b.ReferenceData.PublicOrderTypes),a.orderTypes.splice(0,0,{Key:null,Text:"All Order Types"}),a.orderSourceTypes=angular.copy(b.ReferenceData.OrderSourceTypes),a.orderSourceTypes.splice(0,0,{Key:null,Text:"All Order Sources"}),a.shippingMethods=[{Key:null,Text:"All Shipping Methods"},{Key:1,Text:"Upgraded"},{Key:2,Text:"None"}],a.settings={},a.settings.allExport=!1,a.forms={},a.items=[],a.states=[],a.options={};var c=new Date;c.setHours(0,0,0,0);var e=d.idsku?d.idsku:null,g=d.from?Date.parseDateTime(d.from):c.shiftDate("-1m"),h=d.to?Date.parseDateTime(d.to):c.shiftDate("+1d");a.filter={To:h,From:g,ShipDate:!1,OrderStatus:null,IdObjectType:null,IdOrderSource:null,POrderType:null,IdSku:e,IdCustomerType:null,IdShippingMethod:null,IdShipState:null,CustomerFirstName:null,CustomerLastName:null,CustomerCompany:null,Paging:{PageIndex:1,PageItemCount:200},Sorting:l.resolve(n,"DateCreated","Desc"),IsActive:!0},a.directOrdersfilter={To:null,From:null,ShipDate:!1,OrderStatus:null,IdObjectType:null,IdOrderSource:null,POrderType:null,IdCustomerType:null,IdShippingMethod:null,Paging:{PageIndex:1,PageItemCount:200},Sorting:l.resolve(n,"DateCreated","Desc")},a.gcfilter={ExactCode:null,Paging:{PageIndex:1,PageItemCount:1}},a.$watch("filter.ShipDate",function(b,c){b?a.filter.OrderStatus=3:a.filter.OrderStatus=null}),a.forms.IsActive=!0,f.getCountries({},a.refreshTracker).success(function(b){b.Success?(a.state=b.Data,$.each(b.Data,function(b,c){"US"==c.CountryCode&&(a.states=c.States,a.states.splice(0,0,{Id:null,StateName:"All"}))}),n()):m(b)}).error(function(a){m(a)})}function p(a){i.open("app/modules/order/partials/exportResult.html","exportResultController",{exportRes:a})}a.refreshTracker=k("refresh"),a.deleteTracker=k("delete"),a.gcRefreshTracker=k("gcRefresh"),a.filterGCs=function(){a.gcfilter.ExactCode&&(a.gc=null,a.options.gcSearchUsed=!1,g.getGiftCertificates(a.gcfilter,a.gcRefreshTracker).success(function(b){b.Success?(b.Data.Items&&b.Data.Items.length>0?a.gc=b.Data.Items[0]:a.gc=null,a.options.gcSearchUsed=!0):m(b)}).error(function(a){m(a)}))},a.filterOrders=function(){if(a.forms.IsActive=!0,a.forms.filterForm.$valid){if(a.filter.From>a.filter.To)return void h.pop("error","Error!","'To' date can't be less than 'From' date.",null,"trustedHtml");a.forms.filterForm.submitted=!1,a.filter.Paging.PageIndex=1,n()}else a.forms.filterForm.submitted=!0},a.directFilterOrders=function(){a.forms.IsActive=!1,a.forms.filterForm.submitted=!1,a.forms.form.$valid?(a.forms.form.submitted=!1,a.directOrdersfilter.Paging.PageIndex=1,n()):a.forms.form.submitted=!0},a.pageChanged=function(){n()},a.cancel=function(b){j.confirm(function(){e.cancelOrder(b,a.deleteTracker).success(function(a){a.Success?(h.pop("success","Success!","Successfully canceled."),n()):m(a)}).error(function(a){m(a)})},"Are you sure you want to cancel this order?")},a.cancelRefund=function(b){j.confirm(function(){e.cancelRefundOrder(b,a.deleteTracker).success(function(a){a.Success?(h.pop("success","Success!","Successfully canceled."),n()):m(a)}).error(function(a){m(a)})},"Are you sure you want to cancel this refund?")},a.allExportCall=function(){$.each(a.items,function(b,c){c.AllowExport&&(c.IsSelected=a.settings.allExport),c.PAllowExport&&(c.IsPSelected=a.settings.allExport),c.NPAllowExport&&(c.IsNPSelected=a.settings.allExport)})},a.itemExportChanged=function(b,c){!b.IsSelected&&a.settings.allExport&&(a.settings.allExport=!1)},a.PItemExportChanged=function(b,c){!b.IsPSelected&&a.settings.allExport&&(a.settings.allExport=!1)},a.NPItemExportChanged=function(b,c){!b.IsNPSelected&&a.settings.allExport&&(a.settings.allExport=!1)},a.exportOrders=function(){var b=[];$.each(a.items,function(a,c){if(c.IsSelected&&2==c.OrderStatus||c.IsPSelected&&2==c.POrderStatus||c.IsNPSelected&&2==c.NPOrderStatus){var d={};d.Id=c.Id,d.IsRefund=6==c.IdObjectType,d.OrderType=c.IsSelected&&2==c.OrderStatus||c.IsNPSelected&&2==c.NPOrderStatus&&c.IsPSelected&&2==c.POrderStatus?0:c.IsPSelected&&2==c.POrderStatus?1:2,b.push(d)}}),e.exportOrders(b,a.refreshTracker).success(function(a){if(a.Success)p(a.Data),h.pop("success","Success!","Export completed"),n();else{var b="";a.Messages?$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}):b="Can't export orders",h.pop("error","Error!",b,null,"trustedHtml")}}).error(function(a){m(a)})},a.openOrder=function(a){c.go("index.oneCol.orderDetail",{id:a})},o()}]),angular.module("app.modules.order.controllers.orderManageController",[]).controller("orderManageController",["$q","$scope","$rootScope","$filter","$injector","$state","$stateParams","$timeout","modalUtil","orderService","customerService","productService","gcService","discountService","settingService","toaster","confirmUtil","promiseTracker","customerEditService","orderEditService","gridSorterUtil",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){function v(a){a.Success?(p.pop("success","Success!","Successfully saved."),b.id?(C(a),b.refreshOrderHistory()):(c.BrontoSubscribedStatus={Id:a.Data.Id,Value:b.options.BrontoSubscribedStatus},f.go("index.oneCol.orderDetail",{id:a.Data.Id}))):b.fireServerValidation(a)}function w(a){p.pop("error","Error!","Server error occured")}function x(){b.id=g.id?g.id:0,b.idCustomer=g.idcustomer?g.idcustomer:0,b.idOrderSource=g.idsource?g.idsource:0,b.forms={submitted:[]},b.autoShipOrderFrequencies=[],b.minimumPerishableThreshold=c.ReferenceData.AppSettings.GlobalPerishableThreshold,b.options={},b.options.ignoneMinimumPerishableThreshold=!1,b.orderSources=c.ReferenceData.OrderSources,b.orderSourcesCelebrityHealthAdvocate=c.ReferenceData.OrderSourcesCelebrityHealthAdvocate,b.orderPreferredShipMethod=c.ReferenceData.OrderPreferredShipMethod,b.creditCardTypes=c.ReferenceData.CreditCardTypes,b.discountsFilter={Code:"",StatusCode:2,Paging:{PageIndex:1,PageItemCount:20}},b.gcsFilter={Code:"",StatusCode:2,Paging:{PageIndex:1,PageItemCount:20}},b.skusFilter={Code:"",DescriptionName:"",Paging:{PageIndex:1,PageItemCount:20}},b.skuFilter={ExactCode:"",ExactDescriptionName:"",Paging:{PageIndex:1,PageItemCount:1}},b.legend={},b.mainTab={index:1,formNames:["topForm","mainForm","mainForm2","GCs"],name:b.id?"Edit Order":"New Order"},b.accountProfileTab={index:2,formName:"profile"},b.shippingAddressTab={index:3,formName:"shipping",ShippingEditModels:{}},b.paymentInfoTab={index:4,formNames:["card","oac","check","wiretransfer","marketing","vcwellness","nc"],AddressEditModels:{}},b.customerNotesTab={index:5,formName:"customerNote"},b.customerFilesTab={index:6,formName:"customerFile"},b.options.activeTabIndex=b.mainTab.index;var a=[];a.push(b.mainTab),a.push(b.accountProfileTab),a.push(b.shippingAddressTab),a.push(b.paymentInfoTab),a.push(b.customerNotesTab),a.push(b.customerFilesTab),b.tabs=a,b.giftOrderChanged=function(){b.order.GiftOrder||(b.order.GiftMessage="")},D()}function y(){var a={};a.files=b.currentCustomer.Files,a.publicId=b.currentCustomer.PublicId,a.addEditTracker=b.addEditTracker,b.$broadcast("customerFiles#in#init",a)}function z(){var a={};a.customerNotes=b.currentCustomer.CustomerNotes,a.addEditTracker=b.addEditTracker,b.$broadcast("customerNotes#in#init",a)}function A(){var a={};a.idCustomer=b.idCustomer,b.$broadcast("customerOrders#in#init",a)}function B(){var a={};a.idCustomer=b.idCustomer,b.$broadcast("customerAutoShips#in#init",a)}b.addEditTracker=r("addEdit"),b.resetTracker=r("reset"),b.resendTracker=r("resend");var C=function(a){if(a.Success){if(b.order=a.Data,t.baseProcessLoadingOrder(b),!b.options.inited)if(s.initBase(b),t.initBase(b),t.initAutoShipLogic(b),t.initRecalculate(b),b.id)b.idCustomer=b.order.IdCustomer,s.initOrderEditCustomerParts(b),b.initAutoShipOptions();else{if(0==b.idCustomer)return void f.go("index.oneCol.manageCustomers",{});b.order.UpdateShippingAddressForCustomer=!0,s.initCustomerEdit(b)}b.idOrderSource?E():F()}},D=function(){j.getOrder(b.id,0!=b.idCustomer?b.idCustomer:null,!1,b.addEditTracker).success(function(a){a.Success?C(a):w(a)}).error(function(a){w(a)})},E=function(){j.getOrder(b.idOrderSource,null,!0,b.addEditTracker).success(function(a){a.Success?(a.Data.SkuOrdereds&&a.Data.SkuOrdereds.length>0&&(b.order.SkuOrdereds=a.Data.SkuOrdereds),F()):w(a)}).error(function(a){w(a)})},F=function(){a.all({countriesCall:k.getCountries(b.addEditTracker),customerGetCall:k.getExistingCustomer(b.idCustomer,b.addEditTracker)}).then(function(a){if(a.countriesCall.data.Success&&a.customerGetCall.data.Success){if(b.refreshOrderHistory(),b.allCountries=a.countriesCall.data.Data,b.countries=a.countriesCall.data.Data,b.currentCustomer=a.customerGetCall.data.Data,b.filterCountries(),b.currentCustomer.InceptionDate&&(b.currentCustomer.InceptionDate=Date.parseDateTime(b.currentCustomer.InceptionDate)),b.options.DBStatusCode=b.currentCustomer.StatusCode,b.currentCustomer.Email||(b.options.OverrideEmail=!0),0==b.id&&b.currentCustomer&&4==b.currentCustomer.StatusCode)return void f.go("index.oneCol.customerDetail",{id:b.currentCustomer.Id});b.options.inited||(b.options.inited=!0,G()),b.accountProfileTab.Address=b.currentCustomer.ProfileAddress,s.syncCountry(b,b.currentCustomer.ProfileAddress),s.syncCountry(b,b.order.Shipping),angular.forEach(b.currentCustomer.Shipping,function(a){s.syncCountry(b,a)}),b.id||angular.forEach(b.currentCustomer.Shipping,function(a,c){s.syncCountry(b,a),a.Default&&(b.shippingAddressTab.AddressIndex=c.toString())}),t.baseReferencedDataInit(b),b.id?t.baseReferencedDataInitExistOrder(b):(b.paymentInfoTab.PaymentMethodType=b.currentCustomer.DefaultPaymentMethod,b.checkCustomerCreditCardStatus()),s.syncDefaultPaymentMethod(b),s.showHighPriNotes(b),H(),y(),z(),A(),B(),!b.id&&!b.idOrderSource||b.orderEditDisabled||b.requestRecalculate()}else w(a)},function(a){w(a)})},G=function(){c.BrontoSubscribedStatus&&c.BrontoSubscribedStatus.Id==b.order.Id?(b.options.BrontoSubscribedStatus=c.BrontoSubscribedStatus.Value,b.options.BrontoSubscribedStatusLoaded=!0):b.currentCustomer.Email&&j.getIsBrontoSubscribed(b.currentCustomer.Email).success(function(a){a.Success&&(b.options.BrontoSubscribedStatus=a.Data,b.options.BrontoSubscribedStatusLoaded=!0)}).error(function(a){}),c.BrontoSubscribedStatus=null},H=function(){t.initOrderOptions(b)};b.save=function(){var c=a.defer();b.addEditTracker.addPromise(c.promise),b.requestRecalculate(function(){b.clearServerValidation();var a=!0;if($.each(b.forms,function(c,d){return d&&"submitted"!=c&&!d.$valid?(a=!1,b.activateTab(c),!1):void 0}),a&&b.skusClientValid()){if(!t.isProductsValid(b))return void c.reject();angular.forEach(b.currentCustomer.Shipping,function(a,c){a.IsSelected=c.toString()==b.shippingAddressTab.AddressIndex}),b.order.IdPaymentMethodType=b.paymentInfoTab.PaymentMethodType;var d="";if(1==b.order.IdPaymentMethodType&&0!=b.currentCustomer.CreditCards.length&&angular.forEach(b.currentCustomer.CreditCards,function(a,c){a.IsSelected=c.toString()==b.paymentInfoTab.CreditCardIndex}),b.order.OnHold||(b.id?(1==b.order.IdPaymentMethodType&&null==b.order.CreditCard&&(d+="Credit Card is required. "),2==b.order.IdPaymentMethodType&&null==b.order.Oac&&(d+="On Approved Credit is required. "),3==b.order.IdPaymentMethodType&&null==b.order.Check&&(d+="Check is required. "),6==b.order.IdPaymentMethodType&&null==b.order.WireTransfer&&(d+="Wire Transfer is required. "),7==b.order.IdPaymentMethodType&&null==b.order.Marketing&&(d+="Marketing payment info is required. "),8==b.order.IdPaymentMethodType&&null==b.order.VCWellness&&(d+="VC Wellness Employee Program is required. "),4==b.order.IdPaymentMethodType&&null==b.order.NC&&(d+="No Charge is required. ")):(1==b.order.IdPaymentMethodType&&(0==b.currentCustomer.CreditCards.length?d+="Credit Card is required. ":angular.forEach(b.currentCustomer.CreditCards,function(a,c){a.IsSelected=c.toString()==b.paymentInfoTab.CreditCardIndex,a.IsSelected&&a.NotInStore&&a.IdCustomerPaymentMethod&&a.CardNumber.indexOf("X")>=0&&(d+="This credit card doesn't present in the remore store, please update info. ")})),2==b.order.IdPaymentMethodType&&null==b.currentCustomer.Oac&&(d+="On Approved Credit is required. "),3==b.order.IdPaymentMethodType&&null==b.currentCustomer.Check&&(d+="Check is required. "),6==b.order.IdPaymentMethodType&&null==b.currentCustomer.WireTransfer&&(d+="Wire Transfer is required. "),7==b.order.IdPaymentMethodType&&null==b.currentCustomer.Marketing&&(d+="Marketing payment info is required. "),8==b.order.IdPaymentMethodType&&null==b.currentCustomer.VCWellness&&(d+="VC Wellness Employee Program is required. "),4==b.order.IdPaymentMethodType&&null==b.currentCustomer.NC&&(d+="No Charge is required. "))),d)return p.pop("error","Error!",d,null,"trustedHtml"),b.options.activeTabIndex=b.paymentInfoTab.index,void c.reject();var e=t.orderDataProcessingBeforeSave(b);j.updateOrder(e,b.addEditTracker).success(function(a){c.resolve(),v(a)}).error(function(a){c.resolve(),w(a)})}else null!=b.forms.topForm&&(b.forms.topForm.submitted=!0),b.forms.mainForm.submitted=!0,b.forms.mainForm2.submitted=!0,b.forms.submitted.profile=!0,b.forms.submitted.shipping=!0,b.forms.submitted.card=!0,b.forms.submitted.oac=!0,b.forms.submitted.check=!0,b.forms.submitted.wiretransfer=!0,b.forms.submitted.marketing=!0,b.forms.submitted.vcwellness=!0,b.forms.submitted.nc=!0,p.pop("error","Error!","Validation errors, please correct field values.",null,"trustedHtml"),c.reject()},function(){c.reject(),p.pop("error","Error!","Validation errors, please correct field values.",null,"trustedHtml")})},b.resend=function(){k.resendActivation(b.currentCustomer.PublicUserId,b.resendTracker).success(function(a){if(a.Success)p.pop("success","Success!","Successfully sent");else{var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),p.pop("error","Error!",b,null,"trustedHtml")}}).error(function(){p.pop("error","Error!","Server error occured")})},b.resetPassword=function(){k.resetPassword(b.currentCustomer.PublicUserId,b.resetTracker).success(function(a){if(a.Success)p.pop("success","Success!","Successfully reset");else{var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),p.pop("error","Error!",b,null,"trustedHtml")}}).error(function(){p.pop("error","Error!","Server error occured")})},x()}]),angular.module("app.modules.order.controllers.orderReshipManageController",[]).controller("orderReshipManageController",["$q","$scope","$rootScope","$filter","$injector","$state","$stateParams","$timeout","modalUtil","orderService","customerService","productService","gcService","discountService","settingService","toaster","confirmUtil","promiseTracker","customerEditService","orderEditService","gridSorterUtil",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){function v(a){a.Success?(p.pop("success","Success!","Successfully saved."),b.id?(y(a),b.refreshOrderHistory()):f.go("index.oneCol.orderReshipDetail",{id:a.Data.Id})):b.fireServerValidation(a)}function w(a){p.pop("error","Error!","Server error occured")}function x(){b.id=g.id?g.id:0,b.idCustomer=g.idcustomer,b.idOrderSource=g.idsource,b.forms={submitted:[]},b.autoShipOrderFrequencies=[],b.minimumPerishableThreshold=c.ReferenceData.AppSettings.GlobalPerishableThreshold,b.options={},b.options.ignoneMinimumPerishableThreshold=!1,b.orderSources=c.ReferenceData.OrderSources,b.orderSourcesCelebrityHealthAdvocate=c.ReferenceData.OrderSourcesCelebrityHealthAdvocate,b.orderPreferredShipMethod=c.ReferenceData.OrderPreferredShipMethod,b.creditCardTypes=c.ReferenceData.CreditCardTypes,b.skusFilter={Code:"",DescriptionName:"",Paging:{PageIndex:1,PageItemCount:20}},b.skuFilter={ExactCode:"",ExactDescriptionName:"",Paging:{PageIndex:1,PageItemCount:1}},b.legend={},b.mainTab={index:1,formNames:["topForm","mainForm","mainForm2","GCs"],name:b.id?"Edit Reship Order":"New Reship Order"},b.shippingAddressTab={index:2,formName:"shipping",ShippingEditModels:{}},b.paymentInfoTab={index:3,formNames:["card","oac","check","wiretransfer","marketing","vcwellness","nc"],AddressEditModels:{}},b.options.activeTabIndex=b.mainTab.index;var a=[];a.push(b.mainTab),a.push(b.shippingAddressTab),a.push(b.paymentInfoTab),b.tabs=a,z()}b.addEditTracker=r("addEdit");var y=function(a){a.Success&&(b.order=a.Data,b.order.Id||(b.options.showCopyButtonsOnOrder=!0),t.baseProcessLoadingOrder(b),b.options.inited||(b.options.inited=!0,s.initBase(b),t.initBase(b),t.initRecalculate(b),b.idCustomer=b.order.IdCustomer,s.initOrderEditCustomerParts(b)),A())},z=function(){j.getReshipOrder(b.id,b.idOrderSource,b.idCustomer,b.addEditTracker).success(function(a){a.Success?y(a):w(a)}).error(function(a){w(a)})},A=function(){a.all({countriesCall:k.getCountries(b.addEditTracker),customerGetCall:k.getExistingCustomer(b.idCustomer,b.addEditTracker)}).then(function(a){a.countriesCall.data.Success&&a.customerGetCall.data.Success?(b.refreshOrderHistory(),b.allCountries=a.countriesCall.data.Data,b.countries=a.countriesCall.data.Data,b.currentCustomer=a.customerGetCall.data.Data,b.filterCountries(),b.currentCustomer.InceptionDate&&(b.currentCustomer.InceptionDate=Date.parseDateTime(b.currentCustomer.InceptionDate)),b.options.DBStatusCode=b.currentCustomer.StatusCode,s.syncCountry(b,b.currentCustomer.ProfileAddress),s.syncCountry(b,b.order.Shipping),angular.forEach(b.currentCustomer.Shipping,function(a){s.syncCountry(b,a)}),b.options.ShippingAddressIndexWatch=b.$watch("shippingAddressTab.AddressIndex",function(a,c){a&&c!=a&&(b.shippingAddressTab.OrderShippingEditModel=void 0,b.order.Shipping=angular.copy(b.currentCustomer.Shipping[parseInt(a)]))}),t.baseReferencedDataInit(b),t.baseReferencedDataInitExistOrder(b),s.syncDefaultPaymentMethod(b),B(),b.orderEditDisabled||b.requestRecalculate()):w(a)},function(a){w(a)})},B=function(){t.initOrderOptions(b),b.order.IdOrderSource&&(b.legend.IdOrderSource=b.order.IdOrderSource),b.order.OrderSourceDateCreated&&(b.legend.OrderSourceDateCreated=b.order.OrderSourceDateCreated),b.order.OrderSourceTotal&&(b.legend.OrderSourceTotal=b.order.OrderSourceTotal),b.options.AllReshipProblemSkus=!0};b.toggleAllReshipProblemSkus=function(){$.each(b.order.ReshipProblemSkus,function(a,c){c.Used=b.options.AllReshipProblemSkus})},b.toggleReshipProblemSku=function(a){var c=!0;$.each(b.order.ReshipProblemSkus,function(a,b){return b.Used?void 0:(c=!1,!1)}),
b.options.AllReshipProblemSkus=c},b.save=function(){var c=a.defer();b.addEditTracker.addPromise(c.promise),b.requestRecalculate(function(){b.clearServerValidation();var a=!0;if($.each(b.forms,function(c,d){return d&&"submitted"!=c&&!d.$valid?(a=!1,b.activateTab(c),!1):void 0}),a&&b.skusClientValid()){if(!t.isProductsValid(b))return void c.reject();angular.forEach(b.currentCustomer.Shipping,function(a,c){a.IsSelected=c.toString()==b.shippingAddressTab.AddressIndex}),b.order.IdPaymentMethodType=b.paymentInfoTab.PaymentMethodType;var d="";if(1==b.order.IdPaymentMethodType&&0!=b.currentCustomer.CreditCards.length&&angular.forEach(b.currentCustomer.CreditCards,function(a,c){a.IsSelected=c.toString()==b.paymentInfoTab.CreditCardIndex}),b.order.OnHold||(1==b.order.IdPaymentMethodType&&null==b.order.CreditCard&&(d+="Credit Card is required. "),2==b.order.IdPaymentMethodType&&null==b.order.Oac&&(d+="On Approved Credit is required. "),3==b.order.IdPaymentMethodType&&null==b.order.Check&&(d+="Check is required. "),6==b.order.IdPaymentMethodType&&null==b.order.WireTransfer&&(d+="Wire Transfer is required. "),7==b.order.IdPaymentMethodType&&null==b.order.Marketing&&(d+="Marketing payment info is required. "),8==b.order.IdPaymentMethodType&&null==b.order.VCWellness&&(d+="VC Wellness Employee Program is required. "),4==b.order.IdPaymentMethodType&&null==b.order.NC&&(d+="No Charge is required. ")),d)return p.pop("error","Error!",d,null,"trustedHtml"),b.options.activeTabIndex=b.paymentInfoTab.index,void c.reject();var e=t.orderDataProcessingBeforeSave(b);j.updateReshipOrder(e,b.addEditTracker).success(function(a){c.reject(),v(a)}).error(function(a){c.reject(),w(a)})}else null!=b.forms.topForm&&(b.forms.topForm.submitted=!0),b.forms.mainForm.submitted=!0,b.forms.mainForm2.submitted=!0,b.forms.submitted.shipping=!0,b.forms.submitted.card=!0,b.forms.submitted.oac=!0,b.forms.submitted.check=!0,b.forms.submitted.wiretransfer=!0,b.forms.submitted.marketing=!0,b.forms.submitted.vcwellness=!0,b.forms.submitted.nc=!0,p.pop("error","Error!","Validation errors, please correct field values.",null,"trustedHtml"),c.reject()},function(){c.reject(),p.pop("error","Error!","Validation errors, please correct field values.",null,"trustedHtml")})},x()}]),angular.module("app.modules.order.controllers.orderRefundManageController",[]).controller("orderRefundManageController",["$q","$scope","$rootScope","$filter","$injector","$state","$stateParams","$timeout","modalUtil","orderService","customerService","productService","gcService","discountService","settingService","toaster","confirmUtil","promiseTracker","customerEditService","orderEditService","gridSorterUtil",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){function v(a){a.Success?(p.pop("success","Success!","Successfully saved."),b.id?(z(a),b.refreshOrderHistory()):f.go("index.oneCol.orderRefundDetail",{id:a.Data.Id})):b.fireServerValidation(a)}function w(a){p.pop("error","Error!","Server error occured")}function x(){b.id=g.id?g.id:0,b.idCustomer=g.idcustomer,b.idOrderSource=g.idsource,b.forms={submitted:[]},b.options={},b.legend={},b.mainTab={index:1,formNames:["topForm","mainForm","mainForm2"],name:b.id?"Refund Order":"New Refund Order"},b.shippingAddressTab={index:2,formName:"shipping",ShippingEditModels:{}},b.paymentInfoTab={index:3,formNames:["oac"],AddressEditModels:{}},b.options.activeTabIndex=b.mainTab.index;var a=[];a.push(b.mainTab),a.push(b.shippingAddressTab),a.push(b.paymentInfoTab),b.tabs=a,A()}function y(a){b.order.ShippingTotal=a.ShippingTotal,b.order.ProductsSubtotal=a.ProductsSubtotal,b.order.DiscountTotal=a.DiscountTotal,b.order.DiscountedSubtotal=a.DiscountedSubtotal,b.order.DiscountMessage=a.DiscountMessage,b.order.TaxTotal=a.TaxTotal,b.order.AutoTotal=a.AutoTotal,b.order.Total=a.Total,b.order.ManualShippingTotal=a.ManualShippingTotal,b.order.RefundGCsUsedOnOrder=a.RefundGCsUsedOnOrder,b.order.ManualRefundOverride=a.ManualRefundOverride,$.each(b.order.RefundSkus,function(b,c){$.each(a.RefundSkus,function(a,b){return c.IdSku==b.IdSku?(c.RefundValue=b.RefundValue,!1):void 0})}),$.each(b.order.RefundOrderToGiftCertificates,function(b,c){$.each(a.RefundOrderToGiftCertificates,function(a,b){return c.IdGiftCertificate==b.IdGiftCertificate?(c.Amount=b.Amount,!1):void 0})})}b.addEditTracker=r("addEdit");var z=function(a){a.Success&&(b.order=a.Data,t.baseProcessLoadingOrder(b),b.options.inited||(b.options.inited=!0,s.initBase(b),t.initBase(b),b.idCustomer=b.order.IdCustomer,s.initOrderEditCustomerParts(b)),B(),b.options.RefundGiftCertificatesEnable=b.order.RefundGCsUsedOnOrder>0,b.options.ManualRefundOverrideEnable=b.order.ManualRefundOverride>0)},A=function(){j.getRefundOrder(b.id,b.idOrderSource,b.idCustomer,b.addEditTracker).success(function(a){a.Success?z(a):w(a)}).error(function(a){w(a)})},B=function(){a.all({countriesCall:k.getCountries(b.addEditTracker),customerGetCall:k.getExistingCustomer(b.idCustomer,b.addEditTracker)}).then(function(a){a.countriesCall.data.Success&&a.customerGetCall.data.Success?(b.refreshOrderHistory(),b.allCountries=a.countriesCall.data.Data,b.countries=a.countriesCall.data.Data,b.currentCustomer=a.customerGetCall.data.Data,b.filterCountries(),b.currentCustomer.InceptionDate&&(b.currentCustomer.InceptionDate=Date.parseDateTime(b.currentCustomer.InceptionDate)),b.options.DBStatusCode=b.currentCustomer.StatusCode,s.syncCountry(b,b.order.Shipping),angular.forEach(b.currentCustomer.Shipping,function(a){s.syncCountry(b,a)}),b.options.ShippingAddressIndexWatch=b.$watch("shippingAddressTab.AddressIndex",function(a,c){a&&c!=a&&(b.shippingAddressTab.OrderShippingEditModel=void 0,b.order.Shipping=angular.copy(b.currentCustomer.Shipping[parseInt(a)]))}),t.baseReferencedDataInit(b),t.baseReferencedDataInitExistOrder(b),C(),b.orderEditDisabled||b.requestRecalculate()):w(a)},function(a){w(a)})};b.requestRecalculate=function(c){if(!b.id)if(b.forms.mainForm.$valid&&b.forms.mainForm2.$valid){var d=angular.copy(b.order);d.Customer=angular.copy(b.currentCustomer),b.oldOrderForCalculating=d,b.currectCalculateCanceller&&b.currectCalculateCanceller.resolve("canceled"),b.currectCalculateCanceller=a.defer(),j.calculateRefundOrder(d,b.currectCalculateCanceller).success(function(a){a.Success?y(a.Data):w(a),b.currectCalculateCanceller&&(b.currectCalculateCanceller.reject(),b.currectCalculateCanceller=null),c&&c(a)}).error(function(a){"canceled"==a&&(w(a),b.currectCalculateCanceller&&(b.currectCalculateCanceller.reject(),b.currectCalculateCanceller=null)),c&&c(a)})}else b.forms.mainForm.submitted=!0,b.forms.mainForm2.submitted=!0};var C=function(){t.initOrderOptions(b),b.legend.IdOrderSource=b.order.IdOrderSource,b.legend.OrderSourceRefundIds=b.order.OrderSourceRefundIds,b.legend.OrderSourceDateCreated=b.order.OrderSourceDateCreated,b.legend.OrderSourceTotal=b.order.OrderSourceTotal,b.legend.OrderSourcePaymentMethodType=b.order.OrderSourcePaymentMethodType};b.save=function(){var c=a.defer();b.addEditTracker.addPromise(c.promise),b.requestRecalculate(function(){b.clearServerValidation();var a=!0;if($.each(b.forms,function(c,d){return d&&"submitted"!=c&&!d.$valid?(a=!1,b.activateTab(c),!1):void 0}),a){b.order.IdPaymentMethodType=b.paymentInfoTab.PaymentMethodType;var d="";if(b.order.OnHold||2==b.order.IdPaymentMethodType&&null==b.order.Oac&&(d+="On Approved Credit is required. "),d)return p.pop("error","Error!",d,null,"trustedHtml"),b.options.activeTabIndex=b.paymentInfoTab.index,void c.reject();var e=t.orderDataProcessingBeforeSave(b);j.addRefundOrder(e,b.addEditTracker).success(function(a){c.reject(),v(a)}).error(function(a){c.reject(),w(a)})}else null!=b.forms.topForm&&(b.forms.topForm.submitted=!0),b.forms.mainForm.submitted=!0,b.forms.mainForm2.submitted=!0,b.forms.submitted.shipping=!0,b.forms.submitted.card=!0,b.forms.submitted.oac=!0,b.forms.submitted.check=!0,b.forms.submitted.wiretransfer=!0,b.forms.submitted.marketing=!0,b.forms.submitted.vcwellness=!0,b.forms.submitted.nc=!0,p.pop("error","Error!","Validation errors, please correct field values.",null,"trustedHtml"),c.reject()},function(){c.reject(),p.pop("error","Error!","Validation errors, please correct field values.",null,"trustedHtml")})},b.cancelRefund=function(){q.confirm(function(){j.cancelRefundOrder(b.order.Id,b.addEditTracker).success(function(a){a.Success?(p.pop("success","Success!","Successfully canceled."),f.go("index.oneCol.manageOrders")):w(a)}).error(function(a){w(a)})},"Are you sure you want to cancel this refund?")},b.toggleAllActiveRefundSkus=function(){$.each(b.order.RefundSkus,function(a,c){c.Disabled||(c.Active=b.options.allActiveRefundSkus)}),b.requestRecalculate()},b.toggleRefundSku=function(a){var c=!0;$.each(b.order.RefundSkus,function(a,b){return b.Disabled||b.Active?void 0:(c=!1,!1)}),b.options.allActiveRefundSkus=c,b.requestRecalculate()},b.toggleRefundGiftCertificates=function(){b.order.RefundGCsUsedOnOrder=0,b.requestRecalculate()},b.toggleManualRefundOverride=function(){b.order.ManualRefundOverride=0,b.requestRecalculate()},x()}]),angular.module("app.modules.order.controllers.orderStatusUpdateController",[]).controller("orderStatusUpdateController",["$scope","$rootScope","$state","$stateParams","$timeout","orderService","toaster","modalUtil","confirmUtil","promiseTracker",function(a,b,c,d,e,f,g,h,i,j){function k(b){if(b.Success)a.order.OrderPart?2==a.order.OrderPart&&(a.order.CurrentIdPStatus=a.order.Status):a.order.CurrentIdStatus=a.order.Status,1==a.order.OrderPart&&(a.order.CurrentIdNPStatus=a.order.Status),g.pop("success","Success!","Successfully updated.");else{var c="";b.Messages&&(a.forms.form.submitted=!0,a.serverMessages=new ServerMessages(b.Messages),$.each(b.Messages,function(b,d){d.Field&&a.forms.form[d.Field].$setValidity("server",!1),c+=d.Message+"<br />"})),g.pop("error","Error!",c,null,"trustedHtml")}}function l(a){g.pop("error","Error!","Server error occured")}function m(){a.options={},a.orderStatuses=angular.copy(b.ReferenceData.OrderStatuses),a.orderParts=[{Key:2,Text:"P"},{Key:1,Text:"NP"}],a.forms={},a.order={Status:2,OrderPart:null},a.filter={Id:"",Paging:{PageIndex:1,PageItemCount:20}},a.directFilter={Id:"",Paging:{PageIndex:1,PageItemCount:20}}}a.refreshTracker=j("get"),a.save=function(){if($.each(a.forms.form,function(a,b){b&&b.$name==a&&b.$setValidity("server",!0)}),a.forms.form.$valid){if(a.options.loadedId){var b=parseInt(a.options.loadedId);f.updateOrderStatus(b,a.order.Status,a.order.OrderPart,a.refreshTracker).success(function(a){k(a)}).error(function(a){l(a)})}}else a.forms.form.submitted=!0},a.getOrders=function(b){return b?(a.filter.Id=b,f.getShortOrders(a.filter).then(function(a){return a.data.Data.Items.map(function(a){return a})})):void 0},a.idLoaded=function(b,c,d){a.options.loadedId=a.order.Id,a.order.CurrentIdStatus=b.OrderStatus,a.order.CurrentIdPStatus=b.POrderStatus,a.order.CurrentIdNPStatus=b.NPOrderStatus,a.order.CurrentIdStatus?a.order.OrderPart=null:a.order.OrderPart=2},a.lostFocusRequest=null,a.lostFocus=function(b){a.lostFocusRequest&&e.cancel(a.lostFocusRequest),a.lostFocusRequest=e(function(){a.options.loadedId!=a.order.Id&&n()},100)},a.idChanged=function(){a.options.loadedId!=a.order.Id&&($.each(a.forms.form,function(a,b){b&&b.$name==a&&b.$setValidity("server",!0)}),a.order.CurrentIdStatus=null,a.order.CurrentIdPStatus=null,a.order.CurrentIdNPStatus=null,a.options.loadedId=null)},a.getOrderSettings=function(b){a.options.loadedId!=a.order.Id&&(n(),b.preventDefault())};var n=function(){a.directFilter.Id=a.order.Id,f.getShortOrders(a.directFilter,a.refreshTracker).success(function(b){1==b.Data.Items.length&&a.idLoaded(b.Data.Items[0],null,null)}).error(function(a){l(a)})};m()}]),angular.module("app.modules.order.controllers.customerOrdersController",[]).controller("customerOrdersController",["$scope","$rootScope","$state","orderService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h,i){function j(){}function k(){d.getOrders(a.ordersFilter,a.addEditTracker).success(function(b){b.Success?(a.ordersHistory=b.Data.Items,a.ordersTotalItems=b.Data.Count):e.pop("error","Error!","Can't process order history")}).error(function(a){e.pop("error","Error!","Can't process order history")})}a.$on("customerOrders#in#init",function(b,c){a.idCustomer=c.idCustomer,a.ordersFilter={idCustomer:a.idCustomer,IgnoreNotShowingIncomplete:!0,Paging:{PageIndex:1,PageItemCount:20},Sorting:i.resolve(k,"DateCreated","Desc")},a.idCustomer&&k()}),a.$on("customerOrders#in#refresh",function(b,c){a.ordersFilter.Paging.PageIndex=1,k()}),a.ordersPageChanged=function(){k()},j()}]),angular.module("app.modules.order.controllers.customerAutoShipsController",[]).controller("customerAutoShipsController",["$scope","$rootScope","$state","orderService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil","customerService",function(a,b,c,d,e,f,g,h,i,j){function k(a,b,c){f.open("app/modules/order/partials/manageAutoShipBilling.html","manageAutoShipBillingController",{creditCards:a.Data,orderId:b,countries:c,thenCallback:function(){l()}})}function l(){d.getAutoShips(a.autoShipsFilter,a.addEditTracker).success(function(b){b.Success?(a.autoShips=b.Data.Items,a.autoShipsTotalItems=b.Data.Count):e.pop("error","Error!","Can't process auto-ships")}).error(function(a){e.pop("error","Error!","Can't process auto-ships")})}a.$on("customerAutoShips#in#init",function(c,d){a.baseUrl="https://"+b.ReferenceData.PublicHost,a.idCustomer=d.idCustomer,a.autoShipsFilter={idCustomer:a.idCustomer,Paging:{PageIndex:1,PageItemCount:20},Sorting:i.resolve(l,"DateCreated","Desc")},a.idCustomer&&l()}),a.$on("customerAutoShips#in#refresh",function(b,c){a.autoShipsFilter.Paging.PageIndex=1,l()}),a.ordersPageChanged=function(){l()},a.activatePause=function(b,c){d.activatePauseAutoShip(b,a.idCustomer,c,a.addEditTracker).success(function(a){a.Success?l():a.Messages?e.pop("error","Error!",a.Messages[0].Message):e.pop("error","Error!","Can't start / pause Auto-Ship")}).error(function(a){e.pop("error","Error!","Can't start / pause Auto-Ship")})},a.editBilling=function(b){j.getCountries(a.addEditTracker).success(function(c){d.getAutoShipCreditCards(b,a.idCustomer,a.addEditTracker).success(function(a){a.Success?k(a,b,c.Data):a.Messages?e.pop("error","Error!",a.Messages[0].Message):e.pop("error","Error!","Can't get auto-ship billing details")}).error(function(a){e.pop("error","Error!","Can't get auto-ship billing details")})}).error(function(a){e.pop("error","Error!","Can't load countries")})},a.emptyOrNull=function(a){return!(null===a.Value||0===a.Value.trim().length)},a["delete"]=function(b){g.confirm(function(){d.deleteAutoShip(b,a.idCustomer,a.addEditTracker).success(function(a){a.Success?l():a.Messages?e.pop("error","Error!",a.Messages[0].Message):e.pop("error","Error!","Can't cancel auto-ship")}).error(function(a){e.pop("error","Error!","Can't cancel auto-ship")})},"Are you sure you want to delete this auto-ship?")}}]),angular.module("app.modules.order.controllers.manageAutoShipBillingController",[]).controller("manageAutoShipBillingController",["$scope","$uibModalInstance","data","orderService","toaster","promiseTracker","$rootScope","customerEditService",function(a,b,c,d,e,f,g,h){function i(d){if(d.Success)e.pop("success","Success!","Successfully saved"),b.close();else{var f="";d.Messages&&(a.forms.submitted.creditCard=!0,a.serverMessages=new ServerMessages(d.Messages),$.each(d.Messages,function(b,c){c.Field&&a.forms.creditCard[c.Field]&&a.forms.creditCard[c.Field].$setValidity("server",!1),f+=c.Message+"<br />"})),e.pop("error","Error!",f,null,"trustedHtml")}c.thenCallback()}function j(a){e.pop("error","Error!","Server error occured"),c.thenCallback()}function k(){a.forms={submitted:[]},h.initBase(a),a.countries=c.countries,a.creditCards=c.creditCards,a.orderId=c.orderId,a.creditCard=$.grep(a.creditCards,function(a){return a.IsSelected})[0],a.creditCardTypes=g.ReferenceData.CreditCardTypes,angular.forEach(a.creditCards,function(b,c){b.formName="creditCard",h.syncCountry(a,b.Address)})}a.saveTracker=f("save"),a.resendTracker=f("resend"),a.resetTracker=f("reset"),a.save=function(){$.each(a.forms.creditCard,function(a,b){b&&b.$name==a&&b.$setValidity("server",!0)}),a.forms.creditCard.$valid?(a.saving=!0,d.updateAutoShipBilling(a.creditCard,a.orderId,a.saveTracker).success(function(a){i(a)}).error(function(a){j(a)})):a.forms.submitted.creditCard=!0},a.cancel=function(){b.close()},k()}]),angular.module("app.modules.order.controllers.moveOrderController",[]).controller("moveOrderController",["$scope","$rootScope","$state","$stateParams","orderService","customerService","toaster","modalUtil","confirmUtil","promiseTracker",function(a,b,c,d,e,f,g,h,i,j){function k(b){if(b.Success)g.pop("success","Success!","Successfully updated.");else{var c="";b.Messages&&(a.forms.form.submitted=!0,a.serverMessages=new ServerMessages(b.Messages),$.each(b.Messages,function(b,d){d.Field&&a.forms.form[d.Field].$setValidity("server",!1),c+=d.Message+"<br />"})),g.pop("error","Error!",c,null,"trustedHtml")}}function l(a){g.pop("error","Error!","Server error occured")}function m(){a.orderStatuses=angular.copy(b.ReferenceData.OrderStatuses),a.forms={},a.order={},a.orderFilter={Id:"",Paging:{PageIndex:1,PageItemCount:20}},a.customerFilter={IdContains:"",Paging:{PageIndex:1,PageItemCount:20}}}a.refreshTracker=j("get"),a.save=function(){if($.each(a.forms.form,function(a,b){b&&b.$name==a&&b.$setValidity("server",!0)}),a.forms.form.$valid){var b=parseInt(a.order.Id);NaN==b&&(b=0);var c=parseInt(a.order.IdCustomer);NaN==c&&(c=0),e.moveOrder(b,c,a.refreshTracker).success(function(a){k(a)}).error(function(a){l(a)})}else a.forms.form.submitted=!0},a.getOrders=function(b){return b?(a.orderFilter.Id=b,e.getShortOrders(a.orderFilter).then(function(a){return a.data.Data.Items.map(function(a){return a})})):void 0},a.getCustomers=function(b){return b?(a.customerFilter.IdContains=b,f.getCustomers(a.customerFilter).then(function(a){return a.data.Data.Items.map(function(a){return a})})):void 0},m()}]),angular.module("app.modules.order.controllers.ordersRegionStatisticController",[]).controller("ordersRegionStatisticController",["$scope","$rootScope","$state","orderService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h,i){function j(a){e.pop("error","Error!","Server error occured")}function k(){var b={};angular.copy(a.filter,b),b.From&&(b.From=b.From.toServerDateTime()),b.To&&(b.To=b.To.toServerDateTime()),1==b.RegionType?d.getOrdersRegionStatistic(b,a.refreshTracker).success(function(b){b.Success?(a.items=b.Data,a.options.RegionType=a.filter.RegionType):j(b)}).error(function(a){j(a)}):d.getOrdersZipStatistic(b,a.refreshTracker).success(function(b){b.Success?(a.items=b.Data,a.options.RegionType=a.filter.RegionType):j(b)}).error(function(a){j(a)})}function l(){a.regionTypes=[{Key:1,Text:"State/Province"},{Key:2,Text:"Zip"}],a.customerTypes=angular.copy(b.ReferenceData.CustomerTypes),a.customerTypes.splice(0,0,{Key:null,Text:"All Customer Types"}),a.orderTypes=angular.copy(b.ReferenceData.POrderTypes),a.orderTypes.splice(0,0,{Key:null,Text:"All  P/NP Types"}),a.forms={},a.options={},a.options.RegionType=1;var c=new Date;c.setHours(0,0,0,0),a.filter={To:c.shiftDate("+1d"),From:c.shiftDate("-1m"),IdCustomerType:null,IdOrderType:null,RegionType:1},k(),a.filterChanged()}function m(){var b={from:a.filter.From,to:a.filter.To};return b.from&&(b.from=b.from.toQueryParamDateTime()),b.to&&(b.to=b.to.toQueryParamDateTime()),a.filter.IdCustomerType&&(b.idordertype=a.filter.IdCustomerType),a.filter.IdOrderType&&(b.idordertype=a.filter.IdOrderType),b}a.refreshTracker=h("refresh"),a.filterItems=function(){a.forms.form.$valid?k():a.forms.submitted=!0},a.filterChanged=function(){var c={};angular.copy(a.filter,c),c.From&&(c.From=c.From.toServerDateTime()),c.To&&(c.To=c.To.toServerDateTime()),1==c.RegionType?a.options.exportUrl=d.getOrdersRegionStatisticReportFile(c,b.buildNumber):a.options.exportUrl=d.getOrdersZipStatisticReportFile(c,b.buildNumber)},a.openByRegion=function(b){if(!a.forms.form.$valid)return void(a.forms.submitted=!0);var d=m();d.region=b,c.go("index.oneCol.ordersRegionStatisticDetail",d)},a.openByZip=function(b){if(!a.forms.form.$valid)return void(a.forms.submitted=!0);var d=m();d.zip=b,c.go("index.oneCol.ordersRegionStatisticDetail",d)},l()}]),angular.module("app.modules.order.controllers.ordersRegionStatisticDetailController",[]).controller("ordersRegionStatisticDetailController",["$scope","$rootScope","$state","$stateParams","orderService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h,i,j){function k(a){f.pop("error","Error!","Server error occured")}function l(){var b={};return angular.copy(a.filter,b),b.From&&(b.From=b.From.toServerDateTime()),b.To&&(b.To=b.To.toServerDateTime()),1==b.RegionType?b.Zip=null:b.Region=null,b}function m(){var b=l();e.getOrderWithRegionInfoItems(b,a.refreshTracker).success(function(b){b.Success?(a.items=b.Data.Items,a.options.TotalItems=b.Data.Count):k(b)}).error(function(a){k(a)})}function n(){a.options.Total=null;var b=l();e.getOrderWithRegionInfoAmount(b,a.refreshTracker).success(function(b){b.Success?a.options.Total=b.Data:k(b)}).error(function(a){k(a)})}function o(){var c=d.region,e=d.zip,f=d.from,g=d.to,h=d.idcustomertype?d.idcustomertype:null,i=d.idordertype?d.idordertype:null,j=1;c&&(e=null,j=1),e&&(c=null,j=2),a.regionTypes=[{Key:1,Text:"State/Province"},{Key:2,Text:"Zip"}],a.customerTypes=angular.copy(b.ReferenceData.CustomerTypes),a.customerTypes.splice(0,0,{Key:null,Text:"All Customer Types"}),a.orderTypes=angular.copy(b.ReferenceData.POrderTypes),a.orderTypes.splice(0,0,{Key:null,Text:"All  P/NP Types"}),a.forms={},a.options={},a.options.RegionType=1;var k=new Date;k.setHours(0,0,0,0),f=f?Date.parseDateTime(f):k.shiftDate("-1m"),g=g?Date.parseDateTime(g):k.shiftDate("+1d"),a.filter={To:g,From:f,IdCustomerType:h,IdOrderType:i,RegionType:j,Region:c,Zip:e,Paging:{PageIndex:1,PageItemCount:100}},m(),n(),a.filterChanged()}a.refreshTracker=i("refresh"),a.filterItems=function(){a.forms.form.$valid?(a.filter.Paging.PageIndex=1,m(),n()):a.forms.submitted=!0},a.pageChanged=function(){m()},a.filterChanged=function(){var c=l();a.options.exportUrl=e.getOrderWithRegionInfoItemsReportFile(c,b.buildNumber)},o()}]),angular.module("app.modules.order.controllers.sendOrderConfirmationController",[]).controller("sendOrderConfirmationController",["$scope","$uibModalInstance","data","orderService","toaster","promiseTracker","$rootScope",function(a,b,c,d,e,f,g){function h(d){if(d.Success)e.pop("success","Success!","Successfully sent."),c.thenCallback(),b.close();else{var f="";d.Messages&&(a.forms.submitted=!0,a.serverMessages=new ServerMessages(d.Messages),$.each(d.Messages,function(b,c){c.Field&&a.forms.form[c.Field].$setValidity("server",!1),f+=c.Message+"<br />"})),e.pop("error","Error!",f,null,"trustedHtml")}}function i(a){e.pop("error","Error!","Server error occured")}function j(){a.forms={},a.options={},a.options.Email=c.Email,a.options.Id=c.Id,a.save=function(){$.each(a.forms.form,function(a,b){b&&b.$name==a&&b.$setValidity("server",!0)}),a.forms.form.$valid?d.sendOrderConfirmationEmail(a.options.Id,a.options,a.refreshTracker).success(function(a){h(a)}).error(function(a){i(a)}):a.forms.submitted=!0},a.cancel=function(){b.close()}}a.refreshTracker=f("save"),j()}]),angular.module("app.modules.order.controllers.sendOrderShippingConfirmationController",[]).controller("sendOrderShippingConfirmationController",["$scope","$uibModalInstance","data","orderService","toaster","promiseTracker","$rootScope",function(a,b,c,d,e,f,g){function h(d){if(d.Success)e.pop("success","Success!","Successfully sent."),c.thenCallback(),b.close();else{var f="";d.Messages&&(a.forms.submitted=!0,a.serverMessages=new ServerMessages(d.Messages),$.each(d.Messages,function(b,c){c.Field&&a.forms.form[c.Field].$setValidity("server",!1),f+=c.Message+"<br />"})),e.pop("error","Error!",f,null,"trustedHtml")}}function i(a){e.pop("error","Error!","Server error occured")}function j(){a.forms={},a.options={},a.options.Email=c.Email,a.options.OrderStatus=c.OrderStatus,a.options.POrderStatus=c.POrderStatus,a.options.NPOrderStatus=c.NPOrderStatus,a.options.SendAll=null!=a.options.OrderStatus,a.options.SendP=null==a.options.OrderStatus&&3==a.options.POrderStatus,a.options.SendNP=null==a.options.OrderStatus&&3==a.options.NPOrderStatus,a.options.Id=c.Id,a.save=function(){$.each(a.forms.form,function(a,b){b&&b.$name==a&&b.$setValidity("server",!0)}),a.forms.form.$valid?d.sendOrderShippingConfirmationEmail(a.options.Id,a.options,a.refreshTracker).success(function(a){h(a)}).error(function(a){i(a)}):a.forms.submitted=!0},a.cancel=function(){b.close()}}a.refreshTracker=f("save"),j()}]),angular.module("app.modules.order.controllers.serviceCodesReportController",[]).controller("serviceCodesReportController",["$scope","$rootScope","$state","serviceCodeService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h,i){function j(a){var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),e.pop("error","Error!",b,null,"trustedHtml")}function k(){var b={};angular.copy(a.filter,b),b.From&&(b.From=b.From.toServerDateTime()),b.To&&(b.To=b.To.toServerDateTime()),d.getServiceCodesReport(b,a.refreshTracker).success(function(b){b.Success?(a.report=b.Data,$.each(a.report.Items,function(a,b){b.AbsReshipsAmount=Math.abs(b.ReshipsAmount),b.AbsRefundsAmount=Math.abs(b.RefundsAmount),b.AbsReturnsAmount=Math.abs(b.ReturnsAmount),b.AbsTotalAmount=Math.abs(b.TotalAmount)})):j(b)}).error(function(a){j(a)})}function l(){a.forms={};var b=new Date;b.setHours(0,0,0,0),a.filter={To:b.shiftDate("+1d"),From:b.shiftDate("-1m")},k()}a.refreshTracker=h("refresh"),a.filterItems=function(){a.forms.form.$valid?(a.forms.form.submitted=!1,k()):a.forms.form.submitted=!0},a.goToDetails=function(b){a.forms.form.$valid?(a.forms.form.submitted=!1,c.go("index.oneCol.serviceCodeDetail",{id:b,from:a.filter.From.toQueryParamDateTime(),to:a.filter.To.toQueryParamDateTime()})):a.forms.form.submitted=!0},l()}]),angular.module("app.modules.order.controllers.serviceCodeDetailController",[]).controller("serviceCodeDetailController",["$scope","$rootScope","$state","$stateParams","serviceCodeService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h,i,j){function k(a){var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),f.pop("error","Error!",b,null,"trustedHtml")}function l(){var b={};angular.copy(a.filter,b),b.From&&(b.From=b.From.toServerDateTime()),b.To&&(b.To=b.To.toServerDateTime()),b.Paging=angular.copy(a.RefundPaging),e.getServiceCodeRefundItems(b,a.refreshTracker).success(function(b){b.Success?(a.totalRefundItems=b.Data.Count,a.refunds=b.Data.Items):k(b)}).error(function(a){k(a)})}function m(){var b={};angular.copy(a.filter,b),b.From&&(b.From=b.From.toServerDateTime()),b.To&&(b.To=b.To.toServerDateTime()),b.Paging=angular.copy(a.ReshipPaging),e.getServiceCodeReshipItems(b,a.refreshTracker).success(function(b){b.Success?(a.totalReshipItems=b.Data.Count,a.reships=b.Data.Items):k(b)}).error(function(a){k(a)})}function n(){a.forms={},a.options={},a.options.ServiceCode=d.id;var b=new Date;b.setHours(0,0,0,0),a.filter={To:d.to?Date.parseDateTime(d.to):b.shiftDate("+1d"),From:d.from?Date.parseDateTime(d.from):b.shiftDate("-1m"),ServiceCode:d.id},a.RefundPaging={PageIndex:1,PageItemCount:100},a.ReshipPaging={PageIndex:1,PageItemCount:100},a.filterChanged(),l(),m()}a.refreshTracker=i("refresh"),a.filterItems=function(){a.forms.form.$valid?(a.RefundPaging.PageIndex=1,a.ReshipPaging.PageIndex=1,a.forms.form.submitted=!1,l(),m()):a.forms.form.submitted=!0},a.filterChanged=function(){var c={};angular.copy(a.filter,c),c.From&&(c.From=c.From.toServerDateTime()),c.To&&(c.To=c.To.toServerDateTime()),a.options.refundExportUrl=e.getServiceCodeRefundItemsReportFile(c,b.buildNumber),a.options.reshipExportUrl=e.getServiceCodeReshipItemsReportFile(c,b.buildNumber)},a.reassignItems=function(){if(!a.forms.newCode.$valid)return void(a.forms.newCode.submitted=!0);a.forms.newCode.submitted=!1;var b=[];$.each(a.refunds,function(a,c){c.Assign&&b.push(c.Id)});var c=[];$.each(a.reships,function(a,b){b.Assign&&c.push(b.Id)}),b.length>0&&e.assignServiceCodeForRefunds(a.options.NewServiceCode,b,a.refreshTracker).success(function(b){b.Success?(a.RefundPaging.PageIndex=1,a.forms.form.$valid?l():a.forms.form.submitted=!0):k(b)}).error(function(a){k(a)}),c.length>0&&e.assignServiceCodeForReships(a.options.NewServiceCode,c,a.refreshTracker).success(function(b){b.Success?(a.ReshipPaging.PageIndex=1,a.forms.form.$valid?m():a.forms.form.submitted=!0):k(b)}).error(function(a){k(a)})},n()}]),angular.module("app.modules.order.controllers.orderAgentsReportController",[]).controller("orderAgentsReportController",["$scope","$rootScope","$state","$q","orderService","userService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h,j,k,l){function m(a){var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),g.pop("error","Error!",b,null,"trustedHtml")}function n(){var b={};angular.copy(a.filter,b),b.From&&(b.From=b.From.toServerDateTime()),b.To&&(b.To=b.To.toServerDateTime());var c=[];if(b.IdAdminTeams.length>0)for(i=0;i<b.IdAdminTeams.length;i++)null!=b.IdAdminTeams[i]&&c.push(b.IdAdminTeams[i]);b.IdAdminTeams=c,e.getOrdersAgentReport(b,a.refreshTracker).success(function(b){b.Success?(a.report=b.Data,o()):m(b)}).error(function(a){m(a)})}function o(){$.each(a.report.Periods,function(a,b){$.each(b.Teams,function(a,b){b.Sorting={Path:"AgentId",SortOrder:"Asc",applySort:function(a){if(""!=a){this.Path==a&&(this.SortOrder="Asc"==this.SortOrder?"Desc":"Asc"),this.Path=a;var c=this.SortOrder,d=this.Path;b.Agents.sort(function(a,b){return"Asc"==c?a[d]<b[d]?-1:a[d]>b[d]?1:0:a[d]<b[d]?1:a[d]>b[d]?-1:0})}}}})})}function p(){a.options={},a.options.allowSeeFullReport=b.validatePermission(3),a.frequencyTypes=[{Key:1,Text:"Daily"},{Key:2,Text:"Weekly"},{Key:3,Text:"Monthly"}],a.forms={};var c=new Date;c.setHours(0,0,0,0),a.filter={To:c.shiftDate("+1d"),From:c.shiftDate("-1m"),FrequencyType:2,IdAdminTeams:[null],IdAdmin:null},d.all({teamsCall:f.getAdminTeams(a.refreshTracker),adminsCall:f.getUsers({},a.refreshTracker)}).then(function(c){c.teamsCall.data.Success&&c.adminsCall.data.Success?(a.teams=c.teamsCall.data.Data,a.teams.splice(0,0,{Id:null,Name:"All"}),a.options.allowSeeFullReport?(a.admins=c.adminsCall.data.Data.Items,a.admins.splice(0,0,{Id:null,AgentId:"All"})):a.filter.IdAdmin=b.currentUser.Id,a.filterChanged(),n()):m(c)})}a.refreshTracker=k("refresh"),a.filterItems=function(){if(a.forms.form.$valid){var b=q();null==b?n():(a.forms.form.submitted=!0,g.pop("error","Error!",b,null,"trustedHtml"))}else a.forms.form.submitted=!0};var q=function(){var b=null;if(a.filter.From>a.filter.To&&(b="'To' date can't be less than 'From' date."),3==a.filter.FrequencyType){var c=a.filter.To.getMonth()-a.filter.From.getMonth()+12*(a.filter.To.getFullYear()-a.filter.From.getFullYear());c>12&&(b="Date range can't be more than 12 months.")}if(2==a.filter.FrequencyType){var d=Math.round(Math.abs(a.filter.To.getTime()-a.filter.From.getTime())/864e5),e=Math.round(d/7);e>16&&(b="Date range can't be more than 16 weeks.")}if(1==a.filter.FrequencyType){var d=Math.round(Math.abs(a.filter.To.getTime()-a.filter.From.getTime())/864e5);d>14&&(b="Date range can't be more than 14 days.")}return b};a.filterChanged=function(){if(a.forms.form.$valid){var c=q();if(c)return a.options.exportMsg=c,a.options.exportUrl=null,void(a.forms.form.submitted=!0);var d={};if(angular.copy(a.filter,d),d.From&&(d.From=d.From.toServerDateTime()),d.To&&(d.To=d.To.toServerDateTime()),d.sIdAdminTeams="",d.IdAdminTeams.length>0)for(i=0;i<d.IdAdminTeams.length;i++)null!=d.IdAdminTeams[i]&&(d.sIdAdminTeams+=d.IdAdminTeams[i],
i!=d.IdAdminTeams.length-1&&(d.sIdAdminTeams+=","));a.options.exportUrl=e.getOrdersAgentReportFile(d,b.buildNumber)}else a.forms.form.submitted=!0},a.exportClick=function(b){a.options.exportUrl||(a.forms.form.submitted=!0,a.options.exportMsg&&g.pop("error","Error!",a.options.exportMsg,null,"trustedHtml"),b.preventDefault())},a.idAdminTeamChanged=function(){1!=a.filter.IdAdminTeams.length&&null!=a.filter.IdAdminTeams[0]||(a.filter.IdAdmin=null),filterChanged()},a.idAdminChanged=function(){null!=a.filter.IdAdmin&&(a.filter.IdAdminTeams=[null]),filterChanged()},p()}]),angular.module("app.modules.order.controllers.wholesaleDropShipReportController",[]).controller("wholesaleDropShipReportController",["$scope","$rootScope","$state","$q","orderService","userService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h,i,j,k){function l(a){var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),g.pop("error","Error!",b,null,"trustedHtml")}function m(){var b={};return angular.copy(a.filter,b),b.From&&(b.From=b.From.toServerDateTime()),b.To&&(b.To=b.To.toServerDateTime()),b.ShipFrom&&(b.ShipFrom=b.ShipFrom.toServerDateTime()),b.ShipTo&&(b.ShipTo=b.ShipTo.toServerDateTime()),b}function n(){e.getWholesaleDropShipReport(m(),a.refreshTracker).success(function(b){b.Success?a.report=b.Data:l(b)}).error(function(a){l(a)})}function o(){e.getOrdersForWholesaleDropShipReport(m(),a.refreshTracker).success(function(b){b.Success?(a.items=b.Data.Items,a.totalItems=b.Data.Count):l(b)}).error(function(a){l(a)})}function p(){a.customerTypes=angular.copy(b.ReferenceData.CustomerTypes),a.customerTypes.splice(0,0,{Key:null,Text:"All Customer Types"}),a.tradeClasses=angular.copy(b.ReferenceData.TradeClasses),a.tradeClasses.splice(0,0,{Key:null,Text:"All Trade Classes"}),a.options={},a.forms={};var c=new Date;c.setHours(0,0,0,0),a.filter={To:c.shiftDate("+1d"),From:c.shiftDate("-1m"),IdCustomerType:2,IdTradeClass:6,CustomerCompany:null,CustomerFirstName:null,CustomerLastName:null,ShipFirstName:null,ShipLastName:null,ShippingIdConfirmation:null,IdOrder:null,PoNumber:null,Paging:{PageIndex:1,PageItemCount:100}},a.options.exportUrl=e.getOrdersForWholesaleDropShipReportFile(m(),b.buildNumber),n(),o()}a.refreshTracker=j("refresh"),a.filterItems=function(){a.forms.form.$valid?(n(),a.filter.Paging.PageIndex=1,o()):a.forms.form.submitted=!0},a.pageChanged=function(){o()},a.filterChanged=function(){a.forms.form.$valid?a.options.exportUrl=e.getOrdersForWholesaleDropShipReportFile(m(),b.buildNumber):a.forms.form.submitted=!0},p()}]),angular.module("app.modules.order.controllers.transactionsAndRefundsReportController",[]).controller("transactionsAndRefundsReportController",["$scope","$rootScope","$state","$q","orderService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h,i,j){function k(a){var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),f.pop("error","Error!",b,null,"trustedHtml")}function l(){var b={};return angular.copy(a.filter,b),b.From&&(b.From=b.From.toServerDateTime()),b.To&&(b.To=b.To.toServerDateTime()),b}function m(){e.getTransactionAndRefundReport(l(),a.refreshTracker).success(function(b){b.Success?(a.items=b.Data.Items,a.totalItems=b.Data.Count):k(b)}).error(function(a){k(a)})}function n(){a.customerTypes=angular.copy(b.ReferenceData.CustomerTypes),a.customerTypes.splice(0,0,{Key:null,Text:"All Customer Types"}),a.orderStatuses=angular.copy(b.ReferenceData.OrderStatuses),a.orderStatuses.splice(0,0,{Key:null,Text:"All Order Statuses"}),a.orderTypes=angular.copy(b.ReferenceData.OrderTypes),a.orderTypes.splice(0,0,{Key:null,Text:"All Order Types"}),a.serviceCodes=angular.copy(b.ReferenceData.ServiceCodes),a.serviceCodes.splice(0,0,{Key:null,Text:"All Service Codes"}),a.options={},a.forms={};var c=new Date;c.setHours(0,0,0,0),a.filter={To:c.shiftDate("+1d"),From:c.shiftDate("-1m"),IdCustomerType:null,IdServiceCode:null,CustomerFirstName:null,CustomerLastName:null,CustomerLastName:null,IdCustomer:null,IdOrder:null,IdOrderStatus:null,IdOrderType:null,Paging:{PageIndex:1,PageItemCount:100}},a.options.exportUrl=e.getTransactionAndRefundReportFile(l(),b.buildNumber),m()}a.refreshTracker=i("refresh"),a.filterItems=function(){a.forms.form.$valid?(a.filter.Paging.PageIndex=1,m()):a.forms.form.submitted=!0},a.pageChanged=function(){m()},a.filterChanged=function(){a.forms.form.$valid?a.options.exportUrl=e.getTransactionAndRefundReportFile(l(),b.buildNumber):a.forms.form.submitted=!0},n()}]),angular.module("app.modules.order.controllers.ordersSummarySalesReportController",[]).controller("ordersSummarySalesReportController",["$scope","$rootScope","$state","$q","orderService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h,i,j){function k(a){var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),f.pop("error","Error!",b,null,"trustedHtml")}function l(){var b={};return angular.copy(a.filter,b),b.From&&(b.From=b.From.toServerDateTime()),b.To&&(b.To=b.To.toServerDateTime()),b.ShipFrom&&(b.ShipFrom=b.ShipFrom.toServerDateTime()),b.ShipTo&&(b.ShipTo=b.ShipTo.toServerDateTime()),b.FirstOrderFrom&&(b.FirstOrderFrom=b.FirstOrderFrom.toServerDateTime()),b.FirstOrderTo&&(b.FirstOrderTo=b.FirstOrderTo.toServerDateTime()),"All"==b.CustomerSourceDetails&&(b.CustomerSourceDetails=null),b}function m(){e.getOrdersSummarySalesOrderTypeStatisticItems(l(),a.refreshTracker).success(function(b){b.Success?a.statisticItems=b.Data:k(b)}).error(function(a){k(a)})}function n(){e.getOrdersSummarySalesOrderItems(l(),a.refreshTracker).success(function(b){b.Success?(a.items=b.Data.Items,a.totalItems=b.Data.Count):k(b)}).error(function(a){k(a)})}function o(){a.customerTypes=angular.copy(b.ReferenceData.CustomerTypes),a.customerTypes.splice(0,0,{Key:null,Text:"All Customer Types"}),a.orderSources=angular.copy(b.ReferenceData.OrderSources),a.orderSources.splice(0,0,{Key:null,Text:"All Order Sources"}),a.orderSourcesCelebrityHealthAdvocate=angular.copy(b.ReferenceData.OrderSourcesCelebrityHealthAdvocate),a.orderSourcesCelebrityHealthAdvocate.splice(0,0,{Key:null,Text:"All"}),a.options={},a.forms={};var c=new Date;c.setHours(0,0,0,0),a.filter={To:c.shiftDate("+1d"),From:c.shiftDate("-1m"),IdCustomerType:1,IdCustomerSource:null,CustomerSourceDetails:null,Paging:{PageIndex:1,PageItemCount:100}},a.options.exportUrl=e.getOrdersSummarySalesOrderItemsReportFile(l(),b.buildNumber),m(),n()}a.refreshTracker=i("refresh"),a.filterItems=function(){a.forms.form.$valid?(m(),a.filter.Paging.PageIndex=1,n()):a.forms.form.submitted=!0},a.pageChanged=function(){n()},a.filterChanged=function(){a.forms.form.$valid?a.options.exportUrl=e.getOrdersSummarySalesOrderItemsReportFile(l(),b.buildNumber):a.forms.form.submitted=!0},a.idCustomerSourceChanged=function(){4==a.filter.IdCustomerSource&&(a.filter.CustomerSourceDetails="All"),a.filterChanged()},o()}]),angular.module("app.modules.order.controllers.skuAddressReportController",[]).controller("skuAddressReportController",["$scope","$rootScope","$state","$q","orderService","productService","discountService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(a){var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),h.pop("error","Error!",b,null,"trustedHtml")}function n(){var b={};return angular.copy(a.filter,b),b.From&&(b.From=b.From.toServerDateTime()),b.To&&(b.To=b.To.toServerDateTime()),b}function o(){e.getSkuAddressReportItems(n(),a.refreshTracker).success(function(b){b.Success?(a.items=b.Data.Items,a.totalItems=b.Data.Count):m(b)}).error(function(a){m(a)})}function p(){a.customerTypes=angular.copy(b.ReferenceData.CustomerTypes),a.customerTypes.splice(0,0,{Key:null,Text:"All Customer Types"}),a.options={},a.forms={};var c=new Date;c.setHours(0,0,0,0),a.filter={To:c.shiftDate("+1d"),From:c.shiftDate("-1m"),IdCustomerType:null,SkuCode:null,DiscountCode:null,WithoutDiscount:!1,Paging:{PageIndex:1,PageItemCount:50}},a.discountsFilter={Code:"",StatusCode:2,Paging:{PageIndex:1,PageItemCount:20}},a.skusFilter={Code:"",DescriptionName:"",Paging:{PageIndex:1,PageItemCount:20}},a.options.exportUrl=e.getSkuAddressReportItemsReportFile(n(),b.buildNumber),o()}a.refreshTracker=k("refresh"),a.filterItems=function(){a.forms.form.$valid?(a.filter.Paging.PageIndex=1,o()):a.forms.form.submitted=!0},a.pageChanged=function(){o()},a.filterChanged=function(){a.forms.form.$valid?a.options.exportUrl=e.getSkuAddressReportItemsReportFile(n(),b.buildNumber):a.forms.form.submitted=!0},a.getSKUsBySKU=function(b){return b?(a.skusFilter.Code=b,f.getSkus(a.skusFilter).then(function(a){return a.data.Data.map(function(a){return a})})):void 0},a.getDiscounts=function(b){return a.discountsFilter.Code=b,g.getDiscounts(a.discountsFilter).then(function(a){return a.data.Data.Items.map(function(a){return a})})},p()}]),angular.module("app.modules.order.controllers.matchbackReportController",[]).controller("matchbackReportController",["$scope","$rootScope","$state","$q","orderService","productService","discountService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(a){var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),h.pop("error","Error!",b,null,"trustedHtml")}function n(){var b={};return angular.copy(a.filter,b),b.From&&(b.From=b.From.toServerDateTime()),b.To&&(b.To=b.To.toServerDateTime()),b}function o(){e.getMatchbackReportItems(n(),a.refreshTracker).success(function(b){b.Success?(a.items=b.Data.Items,a.totalItems=b.Data.Count):m(b)}).error(function(a){m(a)})}function p(){a.orderSourceTypes=angular.copy(b.ReferenceData.OrderSourceTypes),a.orderSourceTypes.splice(0,0,{Key:null,Text:"All Order Sources"}),a.options={},a.forms={};var c=new Date;c.setHours(0,0,0,0),a.filter={To:c.shiftDate("+1d"),From:c.shiftDate("-7d"),IdOrderSource:null,Paging:{PageIndex:1,PageItemCount:100}},a.options.exportUrl=e.getMatchbackItemsReportFile(n(),b.buildNumber),o()}a.refreshTracker=k("refresh"),a.filterItems=function(){a.forms.form.$valid?(a.filter.Paging.PageIndex=1,o()):a.forms.form.submitted=!0},a.pageChanged=function(){o()},a.filterChanged=function(){a.forms.form.$valid?a.options.exportUrl=e.getMatchbackItemsReportFile(n(),b.buildNumber):a.forms.form.submitted=!0},p()}]),angular.module("app.modules.order.controllers.orderSkuCountReportController",[]).controller("orderSkuCountReportController",["$scope","$rootScope","$state","$q","orderService","productService","discountService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(a){var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),h.pop("error","Error!",b,null,"trustedHtml")}function n(){var b={};return angular.copy(a.filter,b),b.From&&(b.From=b.From.toServerDateTime()),b.To&&(b.To=b.To.toServerDateTime()),b}function o(){e.getOrderSkuCountReport(n(),a.refreshTracker).success(function(b){b.Success?a.report=b.Data:m(b)}).error(function(a){m(a)})}function p(){a.options={},a.forms={},a.skusFilter={Code:"",Paging:{PageIndex:1,PageItemCount:20}};var b=new Date;b.setHours(0,0,0,0),a.filter={To:b.shiftDate("+1d"),From:b.shiftDate("-3m"),Unique:!1,SkuCode:null},o()}a.refreshTracker=k("refresh"),a.filterItems=function(){a.forms.form.$valid?o():a.forms.form.submitted=!0},a.pageChanged=function(){o()},a.getSKUsBySKU=function(b){return b?(a.skusFilter.Code=b,f.getSkus(a.skusFilter).then(function(a){return a.data.Data.map(function(a){return a})})):void 0},p()}]),angular.module("app.modules.order.controllers.shippedViaSummaryReportController",[]).controller("shippedViaSummaryReportController",["$scope","$rootScope","$state","$q","orderService","settingService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h,i,j,k){function l(a){var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),g.pop("error","Error!",b,null,"trustedHtml")}function m(){var b={};return angular.copy(a.filter,b),b.From&&(b.From=b.From.toServerDateTime()),b.To&&(b.To=b.To.toServerDateTime()),b}function n(){e.getShippedViaSummaryReport(m(),a.refreshTracker).success(function(b){b.Success?a.report=b.Data:l(b)}).error(function(a){l(a)})}function o(){a.serviceCodes=angular.copy(b.ReferenceData.ServiceCodes),a.serviceCodes.splice(0,0,{Key:0,Text:"All Codes"}),a.serviceCodes.splice(0,0,{Key:-1,Text:"None"}),a.serviceCodes.splice(0,0,{Key:null,Text:"All Orders"}),a.states=[],a.options={},a.forms={};var c=new Date;c.setHours(0,0,0,0),a.filter={To:c.shiftDate("+1d"),From:c.shiftDate("-1m"),IdState:null,IdServiceCode:null},f.getCountries({},a.refreshTracker).success(function(b){b.Success?(a.state=b.Data,$.each(b.Data,function(b,c){"US"==c.CountryCode&&(a.states=c.States,a.states.splice(0,0,{Id:null,StateName:"All"}))}),n()):l(b)}).error(function(a){l(a)})}a.refreshTracker=j("refresh"),a.filterItems=function(){a.forms.form.$valid?n():a.forms.form.submitted=!0},a.openDetails=function(b,d,e){var f={from:a.filter.From,to:a.filter.To,warehouse:b,shipmethodtype:d,carrier:e};f.from&&(f.from=f.from.toQueryParamDateTime()),f.to&&(f.to=f.to.toQueryParamDateTime()),a.filter.IdState&&(f.idstate=a.filter.IdState),a.filter.IdOrdIdServiceCodeerType&&(f.idservicecode=a.filter.IdServiceCode),c.go("index.oneCol.shippedViaDetailsReport",f)},o()}]),angular.module("app.modules.order.controllers.shippedViaDetailsReportController",[]).controller("shippedViaDetailsReportController",["$scope","$rootScope","$state","$stateParams","$q","orderService","settingService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(a){var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),h.pop("error","Error!",b,null,"trustedHtml")}function n(){var b={};return angular.copy(a.filter,b),b.From&&(b.From=b.From.toServerDateTime()),b.To&&(b.To=b.To.toServerDateTime()),b}function o(){f.getShippedViaItemsReportOrderItems(n(),a.refreshTracker).success(function(b){b.Success?(a.items=b.Data.Items,a.totalItems=b.Data.Count):m(b)}).error(function(a){m(a)})}function p(){a.serviceCodes=angular.copy(b.ReferenceData.ServiceCodes),a.serviceCodes.splice(0,0,{Key:0,Text:"All Codes"}),a.serviceCodes.splice(0,0,{Key:-1,Text:"None"}),a.serviceCodes.splice(0,0,{Key:null,Text:"All Orders"}),a.states=[],a.warehouses=[{Key:null,Text:"All Warehouses"},{Key:1,Text:"WA"},{Key:2,Text:"VA"}],a.shipMethodTypes=angular.copy(b.ReferenceData.ShipMethodTypes),a.shipMethodTypes.splice(0,0,{Key:null,Text:"All Ship Service"}),a.carriers=angular.copy(b.ReferenceData.Carriers),a.carriers.splice(0,0,{Key:null,Text:"All Carriers"}),a.options={},a.forms={};var c=d.from,e=d.to,h=new Date;h.setHours(0,0,0,0),e=e?Date.parseDateTime(e):h.shiftDate("+1d"),c=c?Date.parseDateTime(c):h.shiftDate("-1m"),a.filter={To:e,From:c,IdState:d.idstate?d.idstate:null,IdServiceCode:d.idservicecode?d.idservicecode:null,IdWarehouse:d.warehouse?d.warehouse:null,IdShipService:d.shipmethodtype?d.shipmethodtype:null,Carrier:d.carrier?d.carrier:null,Paging:{PageIndex:1,PageItemCount:100}},g.getCountries({},a.refreshTracker).success(function(c){c.Success?(a.state=c.Data,$.each(c.Data,function(b,c){"US"==c.CountryCode&&(a.states=c.States,a.states.splice(0,0,{Id:null,StateName:"All"}))}),a.options.exportUrl=f.getShippedViaItemsReportOrderItemsReportFile(n(),b.buildNumber),o()):m(c)}).error(function(a){m(a)})}a.refreshTracker=k("refresh"),a.filterItems=function(){a.forms.form.$valid?(a.filter.Paging.PageIndex=1,o()):a.forms.form.submitted=!0},a.pageChanged=function(){o()},a.filterChanged=function(){a.forms.form.$valid?a.options.exportUrl=f.getShippedViaItemsReportOrderItemsReportFile(n(),b.buildNumber):a.forms.form.submitted=!0},p()}]),angular.module("app.modules.order.controllers.exportResultController",[]).controller("exportResultController",["$scope","$uibModalInstance","data","$rootScope",function(a,b,c,d){function e(){a.errors=$.grep(c.exportRes,function(a){return!a.Success}),a.successCount=c.exportRes.length-a.errors.length,a.errorCount=a.errors.length,a.total=c.exportRes.length}a.ok=function(){b.close(!1)},e()}]),angular.module("app.modules.order.controllers.productQualitySalesReportController",[]).controller("productQualitySalesReportController",["$scope","$rootScope","$state","$q","orderService","settingService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h,i,j,k){function l(a){var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),g.pop("error","Error!",b,null,"trustedHtml")}function m(){var b={};return angular.copy(a.filter,b),b.From&&(b.From=b.From.toServerDateTime()),b.To&&(b.To=b.To.toServerDateTime()),b}function n(){e.getProductQualitySalesReportItems(m(),a.refreshTracker).success(function(b){b.Success?a.items=b.Data:l(b)}).error(function(a){l(a)})}function o(){a.options={},a.forms={};var b=new Date;b.setHours(0,0,0,0),a.filter={To:b.shiftDate("+1d"),From:b.shiftDate("-3m"),Sorting:k.resolve(n,"SalesPerIssue","Asc")},n()}a.refreshTracker=j("refresh"),a.filterItems=function(){a.forms.form.$valid?n():a.forms.form.submitted=!0},a.openDetails=function(b){var d={from:a.filter.From,to:a.filter.To,skucode:b};d.from&&(d.from=d.from.toQueryParamDateTime()),d.to&&(d.to=d.to.toQueryParamDateTime()),c.go("index.oneCol.productQualitySkusReport",d)},o()}]),angular.module("app.modules.order.controllers.productQualitySkusReportController",[]).controller("productQualitySkusReportController",["$scope","$rootScope","$state","$stateParams","$q","orderService","productService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(a){var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),h.pop("error","Error!",b,null,"trustedHtml")}function n(){var b={};return angular.copy(a.filter,b),b.From&&(b.From=b.From.toServerDateTime()),b.To&&(b.To=b.To.toServerDateTime()),b}function o(){f.getProductQualitySkusReportItems(n(),a.refreshTracker).success(function(b){b.Success?a.items=b.Data:m(b)}).error(function(a){m(a)})}function p(){a.options={},a.forms={};var b=d.from,c=d.to,e=new Date;e.setHours(0,0,0,0),c=c?Date.parseDateTime(c):e.shiftDate("+1d"),b=b?Date.parseDateTime(b):e.shiftDate("-3m"),a.filter={To:c,From:b,SkuCode:d.skucode},a.skusFilter={Code:"",Paging:{PageIndex:1,PageItemCount:20}},o()}a.refreshTracker=k("refresh"),a.filterItems=function(){a.forms.form.$valid?o():a.forms.form.submitted=!0},a.getSKUsBySKU=function(b){return b?(a.skusFilter.Code=b,g.getSkus(a.skusFilter).then(function(a){return a.data.Data.map(function(a){return a})})):void 0},p()}]),angular.module("app.modules.order.controllers.aAFESShipReportController",[]).controller("aAFESShipReportController",["$scope","$rootScope","$state","$q","orderService","productService","discountService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(a){var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),h.pop("error","Error!",b,null,"trustedHtml")}function n(){var b={};return angular.copy(a.filter,b),b.ShipFrom&&(b.ShipFrom=b.ShipFrom.toServerDateTime()),b.ShipTo&&(b.ShipTo=b.ShipTo.toServerDateTime()),b}function o(){e.getAAFESReportItems(n(),a.refreshTracker).success(function(b){b.Success?a.items=b.Data:m(b)}).error(function(a){m(a)})}function p(){a.options={},a.forms={};var c=new Date;c.setHours(0,0,0,0),a.filter={ShipFrom:c.shiftDate("-1d"),ShipTo:c.shiftDate("+1d")},a.options.exportUrl=e.getAAFESReportItemsReportFile(n(),b.buildNumber),o()}a.refreshTracker=k("refresh"),a.filterItems=function(){a.forms.form.$valid?o():a.forms.form.submitted=!0},a.filterChanged=function(){a.forms.form.$valid?a.options.exportUrl=e.getAAFESReportItemsReportFile(n(),b.buildNumber):a.forms.form.submitted=!0},p()}]),angular.module("app.modules.order",["app.modules.order.services.orderEditService","app.modules.order.controllers.ordersController","app.modules.order.controllers.orderManageController","app.modules.order.controllers.orderReshipManageController","app.modules.order.controllers.orderRefundManageController","app.modules.order.controllers.orderStatusUpdateController","app.modules.order.controllers.moveOrderController","app.modules.order.controllers.customerOrdersController","app.modules.order.controllers.ordersRegionStatisticController","app.modules.order.controllers.ordersRegionStatisticDetailController","app.modules.order.controllers.sendOrderConfirmationController","app.modules.order.controllers.sendOrderShippingConfirmationController","app.modules.order.controllers.serviceCodesReportController","app.modules.order.controllers.serviceCodeDetailController","app.modules.order.controllers.customerAutoShipsController","app.modules.order.controllers.manageAutoShipBillingController","app.modules.order.controllers.orderAgentsReportController","app.modules.order.controllers.wholesaleDropShipReportController","app.modules.order.controllers.transactionsAndRefundsReportController","app.modules.order.controllers.ordersSummarySalesReportController","app.modules.order.controllers.skuAddressReportController","app.modules.order.controllers.matchbackReportController","app.modules.order.controllers.orderSkuCountReportController","app.modules.order.controllers.shippedViaSummaryReportController","app.modules.order.controllers.shippedViaDetailsReportController","app.modules.order.controllers.exportResultController","app.modules.order.controllers.productQualitySalesReportController","app.modules.order.controllers.productQualitySkusReportController","app.modules.order.controllers.aAFESShipReportController"]).config(["$stateProvider","$urlRouterProvider",function(a,b){a.state("index.oneCol.dashboard",{url:"",templateUrl:"app/modules/order/partials/ordersList.html",controller:"ordersController"}).state("index.oneCol.manageOrders",{url:"/orders?{from:string}{to:string}{idsku:int}",templateUrl:"app/modules/order/partials/ordersList.html",controller:"ordersController"}).state("index.oneCol.orderDetail",{url:"/orders/{id:int}",templateUrl:"app/modules/order/partials/orderDetail.html",controller:"orderManageController"}).state("index.oneCol.orderAdd",{url:"/orders/add?{idcustomer:int}{idsource:int}",templateUrl:"app/modules/order/partials/orderDetail.html",controller:"orderManageController"}).state("index.oneCol.orderReshipDetail",{url:"/orderreships/{id:int}",templateUrl:"app/modules/order/partials/orderReshipDetail.html",controller:"orderReshipManageController"}).state("index.oneCol.orderReshipAdd",{url:"/orderreships/add?{idcustomer:int}{idsource:int}",templateUrl:"app/modules/order/partials/orderReshipDetail.html",controller:"orderReshipManageController"}).state("index.oneCol.orderRefundDetail",{url:"/orderrefunds/{id:int}",templateUrl:"app/modules/order/partials/orderRefundDetail.html",controller:"orderRefundManageController"}).state("index.oneCol.orderRefundAdd",{url:"/orderrefunds/add?{idcustomer:int}{idsource:int}",templateUrl:"app/modules/order/partials/orderRefundDetail.html",controller:"orderRefundManageController"}).state("index.oneCol.changeOrderStatus",{url:"/tools/change-order-status",templateUrl:"app/modules/order/partials/orderStatusUpdateForm.html",controller:"orderStatusUpdateController"}).state("index.oneCol.moveOrder",{url:"/tools/move-order",templateUrl:"app/modules/order/partials/moveOrderForm.html",controller:"moveOrderController"}).state("index.oneCol.ordersRegionStatistic",{url:"/report/regional-sales",templateUrl:"app/modules/order/partials/ordersRegionStatistic.html",controller:"ordersRegionStatisticController"}).state("index.oneCol.ordersRegionStatisticDetail",{url:"/report/regional-sales-details?{from:string}{to:string}{idcustomertype:int}{idordertype:int}{region:string}{zip:string}",templateUrl:"app/modules/order/partials/ordersRegionStatisticDetail.html",controller:"ordersRegionStatisticDetailController"}).state("index.oneCol.serviceCodesStatistic",{url:"/report/service-codes",templateUrl:"app/modules/order/partials/serviceCodesReport.html",controller:"serviceCodesReportController"}).state("index.oneCol.serviceCodeDetail",{url:"/report/service-codes/{id:int}?{from:string}{to:string}",templateUrl:"app/modules/order/partials/serviceCodeDetail.html",controller:"serviceCodeDetailController"}).state("index.oneCol.orderAgentsStatistic",{url:"/report/order-agents",templateUrl:"app/modules/order/partials/orderAgentsReport.html",controller:"orderAgentsReportController"}).state("index.oneCol.wholesaleDropShipReport",{url:"/report/wholesale-dropship",templateUrl:"app/modules/order/partials/wholesaleDropShipReport.html",controller:"wholesaleDropShipReportController"}).state("index.oneCol.transactionsAndRefundsReport",{url:"/report/transactions-refunds",templateUrl:"app/modules/order/partials/transactionsAndRefundsReport.html",controller:"transactionsAndRefundsReportController"}).state("index.oneCol.ordersSummarySalesReport",{url:"/report/summary-sales",templateUrl:"app/modules/order/partials/ordersSummarySalesReport.html",controller:"ordersSummarySalesReportController"}).state("index.oneCol.orderSKUAddressReport",{url:"/report/sku-address",templateUrl:"app/modules/order/partials/skuAddressReport.html",controller:"skuAddressReportController"}).state("index.oneCol.matchbackReport",{url:"/report/matchback-analysis",templateUrl:"app/modules/order/partials/matchbackReport.html",controller:"matchbackReportController"}).state("index.oneCol.orderSkuCountReport",{url:"/report/sku-count",templateUrl:"app/modules/order/partials/orderSkuCountReport.html",controller:"orderSkuCountReportController"}).state("index.oneCol.shippedViaSummaryReport",{url:"/report/shipped-via-summary",templateUrl:"app/modules/order/partials/shippedViaSummaryReport.html",controller:"shippedViaSummaryReportController"}).state("index.oneCol.shippedViaDetailsReport",{url:"/report/shipped-via-details?{from:string}{to:string}{idstate:int}{idservicecode:int}{warehouse:int}{shipmethodtype:int}{carrier:string}",templateUrl:"app/modules/order/partials/shippedViaDetailsReport.html",controller:"shippedViaDetailsReportController"}).state("index.oneCol.productQualitySalesReport",{url:"/report/product-quality",templateUrl:"app/modules/order/partials/productQualitySalesReport.html",controller:"productQualitySalesReportController"}).state("index.oneCol.productQualitySkusReport",{url:"/report/sku-issue?{from:string}{to:string}{skucode:string}",templateUrl:"app/modules/order/partials/productQualitySkusReport.html",controller:"productQualitySkusReportController"}).state("index.oneCol.aAFESShipReport",{url:"/report/aafes-ship",templateUrl:"app/modules/order/partials/aAFESShipReport.html",controller:"aAFESShipReportController"})}]),angular.module("app.modules.affiliate.controllers.affiliatesController",[]).controller("affiliatesController",["$scope","$rootScope","$state","affiliateService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h,i){function j(a){var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),e.pop("error","Error!",b,null,"trustedHtml")}function k(){d.getAffiliates(a.filter,a.refreshTracker).success(function(b){b.Success?(a.items=b.Data.Items,a.totalItems=b.Data.Count):j(b)}).error(function(a){j(a)})}function l(){a.affiliateTiers=angular.copy(b.ReferenceData.AffiliateTiers),a.affiliateTiers.splice(0,0,{Key:null,Text:"All Tiers"}),a.filter={Id:null,Tier:null,Name:null,Company:null,Paging:{PageIndex:1,PageItemCount:100},Sorting:i.resolve(k,"Name","Asc")},k()}a.refreshTracker=h("refresh"),a.deleteTracker=h("delete"),a.filterAffiliates=function(){a.filter.Paging.PageIndex=1,k()},a.pageChanged=function(){k()},a.open=function(a){a?c.go("index.oneCol.affiliateDetail",{id:a}):c.go("index.oneCol.affiliateAdd")},a["delete"]=function(b){g.confirm(function(){d.deleteAffiliate(b,a.deleteTracker).success(function(a){a.Success?(e.pop("success","Success!","Successfully deleted."),k()):j(a)}).error(function(a){j(a)})},"Are you sure you want to delete this affiliate?")},a.pay=function(a){f.open("app/modules/affiliate/partials/affiliatePayCommissions.html","affiliatePayCommissionsController",{id:a,thenCallback:function(){k()}},{size:"sm"})},l()}]),angular.module("app.modules.affiliate.controllers.affiliateManageController",[]).controller("affiliateManageController",["$scope","$rootScope","$state","$stateParams","$timeout","$uibModal","affiliateService","customerService","modalUtil","toaster","confirmUtil","promiseTracker",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(){if(a.affiliate&&a.affiliate.Id){var b={};b.service=g,b.tracker=a.refreshTracker,b.idObject=a.affiliate.Id,b.idObjectType=7,a.$broadcast("objectHistorySection#in#refresh",b)}}function n(d){if(d.Success)j.pop("success","Success!","Successfully saved."),a.affiliate.Id?(a.affiliate.Id=d.Data.Id,a.orderFilter.IdAffiliate=d.Data.Id,a.customerFilter.IdAffiliate=d.Data.Id,a.affiliate.DateEdited=d.Data.DateEdited,a.affiliate.Email=d.Data.Email,a.affiliate.newEmail="",a.affiliate.emailUIConfirm="",a.affiliate.StatusCode=d.Data.StatusCode,a.affiliate.ActivatePending=!1,a.options.LoginAsAffiliateUrl=g.getLoginAsAffiliateUrl(a.affiliate.Id,b.buildNumber),m()):c.go("index.oneCol.affiliateDetail",{id:d.Data.Id});else{var e="";d.Messages&&(a.forms.submitted=!0,a.detailsTab.active=!0,a.serverMessages=new ServerMessages(d.Messages),$.each(d.Messages,function(b,c){c.Field?$.each(a.forms,function(a,b){return b&&"boolean"!=typeof b&&void 0!=b[c.Field]?(b[c.Field].$setValidity("server",!1),!1):void 0}):e+=c.Message+"<br />"})),""==e&&(e="Validation errors, please correct field values."),j.pop("error","Error!",e,null,"trustedHtml")}}function o(a){j.pop("error","Error!","Server error occured")}function p(a){var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),j.pop("error","Error!",b,null,"trustedHtml")}function q(){a.id=d.id?d.id:0,a.affiliateTiers=b.ReferenceData.AffiliateTiers,a.forms={},a.detailsTab={active:!0},a.options={},a.id&&(a.options.customersExportUrl=h.getCustomersForAffiliatesReportFileUrl(a.id,b.buildNumber)),a.customerFilter={IdAffiliate:a.id,IdAffiliateRequired:!0,Paging:{PageIndex:1,PageItemCount:100}},a.orderFilter={From:null,To:null,IdAffiliate:a.id,Paging:{PageIndex:1,PageItemCount:100}},r(),t(),u(),v()}function r(){h.getCountries(a.refreshTracker).success(function(b){b.Success?(a.countries=b.Data,s()):o(b)}).error(function(a){o(a)})}function s(){g.getAffiliate(a.id,a.refreshTracker).success(function(c){c.Success?(a.affiliate=c.Data,a.affiliate.ActivatePending=!1,a.options.LoginAsAffiliateUrl=g.getLoginAsAffiliateUrl(a.affiliate.Id,b.buildNumber),m()):o(c)}).error(function(a){o(a)})}function t(){a.customerFilter.IdAffiliate&&h.getCustomers(a.customerFilter,a.refreshCustomersTracker).success(function(b){b.Success?(a.customers=b.Data.Items,a.customersTotalItems=b.Data.Count):o(b)}).error(function(a){o(a)})}function u(){if(a.orderFilter.IdAffiliate){var b={};angular.copy(a.orderFilter,b),b.From&&(b.From=b.From.toServerDateTime()),b.To&&(b.To=b.To.toServerDateTime()),g.getAffiliateOrderPaymentsWithCustomerInfo(b,a.refreshOrdersTracker).success(function(b){b.Success?(a.orders=b.Data.Items,a.ordersTotalItems=b.Data.Count):o(b)}).error(function(a){o(a)})}}function v(){a.orderFilter.IdAffiliate&&g.getAffiliatePaymentHistory(a.orderFilter.IdAffiliate,a.refreshPaymentHistoryTracker).success(function(b){b.Success?a.paymentHistoryItems=b.Data:o(b)}).error(function(a){o(a)})}a.refreshTracker=l("get"),a.resetTracker=l("reset"),a.resendTracker=l("resend"),a.refreshCustomersTracker=l("refreshCustomersTracker"),a.refreshOrdersTracker=l("refreshOrdersTracker"),a.refreshPaymentHistoryTracker=l("refreshPaymentHistoryTracker"),a.save=function(){if(w(),a.forms.mainForm.$valid){
var b=angular.copy(a.affiliate);b.newEmail||b.emailUIConfirm?(b.Email=b.newEmail,b.EmailConfirm=b.emailUIConfirm):b.EmailConfirm=b.Email,4!=b.StatusCode&&(b.SuspendMessage=null),b.ActivatePending&&(b.StatusCode=2),g.updateAffiliate(b,a.refreshTracker).success(function(a){n(a)}).error(function(a){o(a)})}else a.forms.submitted=!0,a.detailsTab.active=!0,j.pop("error","Error!","Validation errors, please correct field values.",null,"trustedHtml")};var w=function(){$.each(a.forms,function(a,b){b&&"boolean"!=typeof b&&$.each(b,function(a,b){b&&b.$name==a&&b.$setValidity("server",!0)})})};a.statesByCountryId=function(b){var c=null;if(b){var d=null;$.each(a.countries,function(a,c){return c.Id==b?void(d=c):void 0}),d&&(c=d.States)}return c},a.email=function(){var b={Type:2,ToId:a.affiliate.Id,ToName:a.affiliate.Name,ToEmail:a.affiliate.Email};i.open("app/modules/affiliate/partials/affiliateSendEmail.html","affiliateSendEmailController",b)},a.emailDrSears=function(){var b={Type:4,ToId:a.affiliate.Id,ToName:a.affiliate.Name,ToEmail:a.affiliate.Email};i.open("app/modules/affiliate/partials/affiliateSendEmail.html","affiliateSendEmailController",b)},a.toggleSuspended=function(){a.affiliate.StatusCode=4==a.affiliate.StatusCode?a.affiliate.IsConfirmed?2:1:4},a.resend=function(){g.resendActivation(a.affiliate.PublicUserId,a.resendTracker).success(function(a){a.Success?j.pop("success","Success!","Successfully sent"):p(a)}).error(function(){j.pop("error","Error!","Server error occured")})},a.resetPassword=function(){g.resetPassword(a.affiliate.PublicUserId,a.resetTracker).success(function(a){a.Success?j.pop("success","Success!","Successfully reset"):p(a)}).error(function(){j.pop("error","Error!","Server error occured")})},a.customersPageChanged=function(){t()},a.filterOrders=function(){a.orderFilter.Paging.PageIndex=1,u()},a.ordersPageChanged=function(){u()},q()}]),angular.module("app.modules.affiliate.controllers.affiliateSendEmailController",[]).controller("affiliateSendEmailController",["$scope","$uibModalInstance","data","affiliateService","toaster","promiseTracker","$rootScope",function(a,b,c,d,e,f,g){function h(d){if(d.Success)e.pop("success","Success!","Successfully sent."),c.thenCallback&&c.thenCallback(d.Data),b.close();else{var f="";d.Messages&&(a.forms.form.submitted=!0,a.serverMessages=new ServerMessages(d.Messages),$.each(d.Messages,function(b,c){c.Field&&a.forms.form[c.Field].$setValidity("server",!1),f+=c.Message+"<br />"})),e.pop("error","Error!",f,null,"trustedHtml")}}function i(a){e.pop("error","Error!","Server error occured")}function j(){a.forms={},a.data=c,d.getAffiliateEmail(a.data.Type,a.saveTracker).success(function(b){b.Data?(a.email=b.Data,a.email.ToName=a.data.ToName,a.email.ToEmail=a.data.ToEmail,a.email.Message=a.email.Message.format(a.data.ToId,a.data.ToName,a.data.ToEmail)):i(b)}).error(function(a){i(a)})}a.saveTracker=f("save"),a.save=function(){$.each(a.forms.form,function(a,b){b&&b.$name==a&&b.$setValidity("server",!0)}),a.forms.form.$valid?d.sendAffiliateEmail(a.email,a.saveTracker).success(function(a){h(a)}).error(function(a){i(a)}):a.forms.form.submitted=!0},a.cancel=function(){b.close()},j()}]),angular.module("app.modules.affiliate.controllers.customersInAffiliatesReportController",[]).controller("customersInAffiliatesReportController",["$scope","$rootScope","$state","affiliateService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h,i){function j(a){var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),e.pop("error","Error!",b,null,"trustedHtml")}function k(){d.getCustomerInAffiliateReport(a.filter,a.refreshTracker).success(function(b){b.Success?(a.items=b.Data.Items,a.totalItems=b.Data.Count):j(b)}).error(function(a){j(a)})}function l(){a.filter={Paging:{PageIndex:1,PageItemCount:100}},k()}a.refreshTracker=h("refresh"),a.filterItems=function(){a.filter.Paging.PageIndex=1,k()},a.pageChanged=function(){k()},l()}]),angular.module("app.modules.affiliate.controllers.affiliatesSummaryReportController",[]).controller("affiliatesSummaryReportController",["$scope","$rootScope","$state","affiliateService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h,i){function j(a){var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),e.pop("error","Error!",b,null,"trustedHtml")}function k(){d.getAffiliatesSummary(a.refreshTracker).success(function(b){b.Success?a.summary=b.Data:j(b)}).error(function(a){j(a)})}function l(){d.getAffiliatesSummaryReportItemsForMonths(a.options.count,a.options.include,a.refreshItemsTracker).success(function(b){b.Success?a.items=b.Data:j(b)}).error(function(a){j(a)})}function m(){a.months=[3,6,9,12],a.options={},a.options.include=!0,a.options.count=3,k(),l()}a.refreshTracker=h("refresh"),a.refreshItemsTracker=h("refreshItems"),a.refresh=function(){l()},m()}]),angular.module("app.modules.affiliate.controllers.affiliatePayCommissionsController",[]).controller("affiliatePayCommissionsController",["$scope","$uibModalInstance","data","affiliateService","toaster","promiseTracker","$rootScope","confirmUtil",function(a,b,c,d,e,f,g,h){function i(a){if(a.Success)e.pop("success","Success!","Successfully paid"),b.close(),c.thenCallback();else{var d="";a.Messages&&$.each(a.Messages,function(a,b){d+=b.Message+"<br />"}),e.pop("error","Error!",d,null,"trustedHtml")}}function j(a){e.pop("error","Error!","Server error occured")}function k(){a.options={},a.options.Id=c.id,l(),m()}a.refreshTracker=f("refresh");var l=function(){d.getAffiliate(a.options.Id,a.refreshTracker).success(function(b){b.Success?a.affiliate=b.Data:j(b)}).error(function(a){j(a)})},m=function(){d.getUnpaidOrdersForLastPeriod(a.options.Id,a.refreshTracker).success(function(b){b.Success?(a.commissions=b.Data,a.options.Amount=0,$.each(a.commissions,function(b,c){a.options.Amount+=c.Commission})):j(b)}).error(function(a){j(a)})};a.pay=function(){h.confirm(function(){d.payForAffiliateOrders(a.options.Id,a.refreshTracker).success(function(a){a.Success?i(a):j(a)}).error(function(a){j(a)})},"Are you sure you want to pay to this affiliate({0})?".format(a.options.Id))},a.cancel=function(){b.close()},k()}]),angular.module("app.modules.affiliate.controllers.affiliateOrderImportReportController",[]).controller("affiliateOrderImportReportController",["$scope","$rootScope","$state","$q","Upload","orderService","productService","discountService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(a){var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),i.pop("error","Error!",b,null,"trustedHtml")}function o(){a.options={},a.forms={}}a.refreshTracker=l("refresh"),a.upload=function(b){if(a.options.selectedOrderImportFile=b&&b.length>0?b[0]:null,a.options.selectedOrderImportFile){a.options.uploadingOrdersImport=!0;var c=a.refreshTracker.createPromise();e.upload({url:"/api/order/GetAffiliateOrdersInfo",data:{},file:a.options.selectedOrderImportFile}).progress(function(a){}).success(function(b,d,e,f){c.resolve(),b.Success?(a.report=b.Data,a.filterChanged()):n(b.Messages),a.options.selectedOrderImportFile=null}).error(function(b,d,e,f){c.resolve(),a.options.selectedOrderImportFile=null,i.pop("error","Error!","Server error ocurred")})}},a.filterChanged=function(){a.options.exportUrl=f.getAffiliateOrdersInfoReportFile(a.report.Id,b.buildNumber)},o()}]),angular.module("app.modules.affiliate",["app.modules.affiliate.controllers.affiliatesController","app.modules.affiliate.controllers.affiliateManageController","app.modules.affiliate.controllers.affiliateSendEmailController","app.modules.affiliate.controllers.customersInAffiliatesReportController","app.modules.affiliate.controllers.affiliatesSummaryReportController","app.modules.affiliate.controllers.affiliatePayCommissionsController","app.modules.affiliate.controllers.affiliateOrderImportReportController"]).config(["$stateProvider","$urlRouterProvider",function(a,b){a.state("index.oneCol.manageAffiliates",{url:"/affiliates",templateUrl:"app/modules/affiliate/partials/affiliatesList.html",controller:"affiliatesController"}).state("index.oneCol.affiliateDetail",{url:"/affiliates/{id:int}",templateUrl:"app/modules/affiliate/partials/affiliateDetail.html",controller:"affiliateManageController"}).state("index.oneCol.affiliateAdd",{url:"/affiliates/add",templateUrl:"app/modules/affiliate/partials/affiliateDetail.html",controller:"affiliateManageController"}).state("index.oneCol.customersInAffiliatesReport",{url:"/report/affiliates-customers",templateUrl:"app/modules/affiliate/partials/customersInAffiliatesReport.html",controller:"customersInAffiliatesReportController"}).state("index.oneCol.affiliatesSummaryReport",{url:"/report/affiliates-summary",templateUrl:"app/modules/affiliate/partials/affiliatesSummaryReport.html",controller:"affiliatesSummaryReportController"}).state("index.oneCol.affiliateOrderImportReport",{url:"/report/upload-affiliate-file",templateUrl:"app/modules/affiliate/partials/affiliateOrderImportReport.html",controller:"affiliateOrderImportReportController"})}]),angular.module("app.modules.file.controllers.filesController",[]).controller("filesController",["$scope","$rootScope","$state","$stateParams","$uibModal","$timeout","appBootstrap","Upload","modalUtil","fileService","toaster","confirmUtil","promiseTracker",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(a,b){var c=this;c.Name=a,c.FullRelativeName=b}function o(a){var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Field?"{0} - {1}<br/>".format(c.Field,c.Message):"{0}<br/>".format(c.Message)}),k.pop("error","Error!",b,null,"trustedHtml")}function p(){j.getDirectories(a.refreshDirectoriesTracker).success(function(b){if(b.Success){var c=[];c.push(b.Data),a.directories=c,a.selectDirectory(b.Data.FullRelativeName)}else o(b)}).error(function(a){o(a)})}function q(){D=g.getData("FILES_POPUP_DATA"),a.forms={},a.selectedDir={FullRelativeName:"/",Directories:[]},a.files=[],a.filterdFiles=[],a.logFiles=[],a.breadCrumbMaxLevels=5,a.selectedFile=null,a.filter={Name:"",FilteredName:"",Paging:{PageIndex:1,PageItemCount:500}},a.logRequests=[],p(),a.$watch("selectedDir.FullRelativeName",function(){w()})}function r(a,b){$.each(a,function(a,c){c.FullRelativeName==b?c.selected=!0:c.selected=!1,c.Directories&&c.Directories.length>0&&r(c.Directories,b)})}function s(b){t(a.directories,b)}function t(b,c){var d=null;$.each(b,function(b,e){return e.FullRelativeName==c?(d=b,a.selectedDir.FullRelativeName==c&&a.selectDirectory("/"),!1):void 0}),null!=d?b.splice(d,1):$.each(b,function(a,b){t(b.Directories,c)})}function u(b,c){$.each(a.directories,function(a,d){v(d,b,c)})}function v(a,b,c){a.FullRelativeName==b&&(c.Directories=[],a.Directories.push(c)),a.Directories&&a.Directories.length>0&&$.each(a.Directories,function(a,d){v(d,b,c)})}function w(){a.files=[],F(),a.filter.Paging.PageIndex=1;var b=$(".table .wrapper");b.empty();var c=a.selectedDir.FullRelativeName;j.getFiles({FullRelativeName:c},a.refreshFilesTracker).success(function(b){K(),b.Success?c==a.selectedDir.FullRelativeName&&(a.files=b.Data,a.filter.Paging.PageIndex=1,F(),G()):o(b)}).error(function(a){o(a)})}var x="The uploaded file must be .jpg, .gif, .png or .pdf.",y="The uploaded file must be less than 10 mb.",z=10485760,A="image/jpeg,image/png,image/gif,application/pdf",B=".pdf",C=0,D=null;a.refreshDirectoriesTracker=m("refreshDirectories"),a.refreshFilesTracker=m("refreshFiles"),a.addFileTracker=m("addFile"),a.deleteFileTracker=m("deleteFile"),a.addFolderTracker=m("addDirectory"),a.deleteFolderTracker=m("deleteDirectory"),a.selectDirectory=function(b){a.selectedDir.FullRelativeName!=b&&(a.selectedFile={},a.filter.FilteredName="",a.filter.Name=""),a.selectedDir.FullRelativeName=b,a.selectedDir.ShowSpace=!1;for(var c=b,d=[];c.length>1;){if(d.length>=a.breadCrumbMaxLevels){a.selectedDir.ShowSpace=!0;break}if(c.length-1>0){var e=c.substring(c.lastIndexOf("/")+1,c.length),f=c;d.splice(0,0,new n(e,f))}c=c.substring(0,c.lastIndexOf("/"))}a.selectedDir.Directories=d,r(a.directories,b)},a.deleteDirectory=function(b){l.confirm(function(){j.deleteDirectory(b,a.deleteFolderTracker).success(function(a){a.Success?s(b.FullRelativeName):o(a)}).error(function(a){o(a)})},"Are you sure you want to delete this directory?")},a.addDirectory=function(a){i.open("app/modules/file/partials/addFolder.html","addFolderController",{fullRelativeName:a,thenCallback:function(b){u(a,b)}})},a.deleteFile=function(b){l.confirm(function(){j.deleteFile(b,a.deleteFileTracker).success(function(c){if(c.Success){var d={};C++,d.type="delete",d.index=C,d.name=b.Name,d.progress=100,d.state="done",a.logRequests.splice(0,0,d);var e;$.each(a.files,function(a,c){return c.FullRelativeName==b.FullRelativeName?(e=a,!1):void 0}),null!=e&&(a.files.splice(e,1),F(),J(b.FullRelativeName))}else{var f="";c.Messages&&$.each(c.Messages,function(a,b){f+="{0} ".format(b.Message)});var d={};C++,d.type="delete",d.index=C,d.name=b.Name,d.progress=100,d.state="error",d.messages=f,a.logRequests.splice(0,0,d)}}).error(function(a){o(a)})},"Are you sure you want to delete this file?")},a.uploadFiles=function(b){if(b&&b.length)for(var c=0;c<b.length;c++){var d=b[c],e="";d.type&&-1==A.indexOf(d.type)&&(e+="{0} ".format(x)),d.size&&d.size>=z&&(e+="{0} ".format(y)),a.logFileRequest={};var f=a.logFileRequest;if(C++,d.index=C,f.type="upload",f.index=d.index,f.name=d.name,f.progress=0,f.state="progress",e&&(f.state="error",f.messages=e),a.logRequests.splice(0,0,f),!e){var g=a.selectedDir.FullRelativeName,i={};i[g]="",h.upload({url:"/api/file/AddFiles",fields:i,file:d}).progress(function(a){var b=parseInt(100*a.loaded/a.total),c=E(a.config.file.index);c&&(c.progress=b)}).success(function(b,c,d,e){if(b.Success){var f=E(e.file.index);if(f&&(f.progress=100,f.state="done"),b.Data.DirectoryFullRelativeName==a.selectedDir.FullRelativeName){var g,h=b.Data;$.each(a.files,function(a,b){return b.FullRelativeName==h.FullRelativeName?(g=a,!1):void 0}),null!=g&&a.files.splice(g,1),a.files.push(h),F(),I(h)}}else{var i="";b.Messages&&$.each(b.Messages,function(a,b){i+="{0} ".format(b.Message)});var f=E(e.file.index);f&&(f.progress=100,f.messages=i,f.state="error")}})}}};var E=function(b){var c=null;return $.each(a.logRequests,function(a,d){return d.index==b?(c=d,!1):void 0}),c};a.selectFile=function(b){var c;$.each(a.files,function(a,d){d.selected=d.Name==b,d.selected&&(c=d)}),a.selectedFile=Object.clone(c),a.selectedFile.FullRelativeName.indexOf(B)>-1?(a.selectedFile.PreviewUrl="/assets/images/pdf.png",a.selectedFile.Dimensions=""):(a.selectedFile.PreviewUrl=c.FullRelativeName,a.selectedFile.Dimensions=""),a.$apply()},a.filterFilesRequest=function(){a.filter.FilteredName=a.filter.Name;var b=$(".table .wrapper");b.empty(),a.filter.Paging.PageIndex=1,F(),G()};var F=function(){var b=[];a.filter.FilteredName?$.each(a.files,function(c,d){d.Name.toLowerCase().indexOf(a.filter.FilteredName.toLowerCase())>-1&&b.push(d)}):b=a.files,a.filterdFiles=b,a.totalItems=b.length},G=function(){var b=$(".table .wrapper");b.empty();for(var c="",d=(a.filter.Paging.PageIndex-1)*a.filter.Paging.PageItemCount,e=d+a.filter.Paging.PageItemCount>a.filterdFiles.length?a.filterdFiles.length:d+a.filter.Paging.PageItemCount,f=d;e>f;f++)c+=H(a.filterdFiles[f]);b.append(c)};a.pageChanged=function(){G(),$(".table .wrapper").scrollTop(0)};var H=function(a){return'<tr data-name="'+a.Name+'" data-full-url="'+a.FullRelativeName+'"><td>'+a.Name+'</td><td class="width-140px">'+Date.parseDateTime(a.Updated).format("{MM}/{DD}/{yy} {HH}:{MN} {AP}")+'</td><td class="width-80px">'+a.SizeMessage+'</td><td class="width-70px"><div class="ya-treview-buttons"><a class="btn btn-success btn-xs" title="Download" target="_blank" href="'+a.FullRelativeName+'"><i class="glyphicon glyphicon-download"></i></a><a class="btn btn-danger btn-xs" title="Delete"><i class="glyphicon glyphicon-remove"></i></a></div></td></tr>'},I=function(a){G()},J=function(a){if(a){var b=$('.table .wrapper tr[data-full-url="'+a+'"]');b.remove()}},K=function(){$(".file-manager .work-area .center-pane .table tbody").off("click",L),$(".file-manager .work-area .center-pane .table tbody").on("click","tr",L),$(".file-manager .work-area .center-pane .table tbody").off("click",M),$(".file-manager .work-area .center-pane .table tbody").on("click","tr .btn-danger",M)},L=function(){$(".file-manager .work-area .center-pane .table tbody tr").removeClass("selected"),$(this).addClass("selected"),a.selectFile($(this).data("name"))},M=function(b){var c=$(this).parent().parent().parent(),d=c.data("name"),e=c.data("full-url");a.deleteFile({Name:d,FullRelativeName:e}),b.stopPropagation()};a.selectedFileImgLoad=function(b){-1==a.selectedFile.FullRelativeName.indexOf(B)&&0!=b.target.naturalWidth&&0!=b.target.naturalHeight&&(a.selectedFile.Width=b.target.naturalWidth,a.selectedFile.Height=b.target.naturalHeight,a.selectedFile.Dimensions="{0}x{1}".format(a.selectedFile.Width,a.selectedFile.Height))},a.save=function(){a.selectedFile&&a.selectedFile.FullRelativeName?D&&D.thenCallback(a.selectedFile):k.pop("error","Error!","Please select a file first.",null,"trustedHtml")},a.cancel=function(){D&&D.thenCallback()},f(q,50)}]),angular.module("app.modules.file.controllers.addFolderController",[]).controller("addFolderController",["$scope","$uibModalInstance","data","fileService","toaster","promiseTracker","$rootScope",function(a,b,c,d,e,f,g){function h(d){if(d.Success)e.pop("success","Success!","Successfully saved."),c.thenCallback(d.Data),b.close();else{var f="";d.Messages&&(a.forms.form.submitted=!0,a.serverMessages=new ServerMessages(d.Messages),$.each(d.Messages,function(b,c){c.Field&&a.forms.form[c.Field].$setValidity("server",!1),f+=c.Message+"<br />"})),e.pop("error","Error!",f,null,"trustedHtml")}}function i(a){e.pop("error","Error!","Server error occured")}function j(){a.forms={},a.directory={FullRelativeName:c.fullRelativeName,Name:""},a.save=function(){$.each(a.forms.form,function(a,b){b&&b.$name==a&&b.$setValidity("server",!0)}),a.forms.form.$valid?d.addDirectory(a.directory,a.saveTracker).success(function(a){h(a)}).error(function(a){i(a)}):a.forms.form.submitted=!0},a.cancel=function(){b.close()}}a.saveTracker=f("save"),j()}]),angular.module("app.modules.file.controllers.previewFileController",[]).controller("previewFileController",["$scope","$rootScope","$uibModalInstance","data",function(a,b,c,d){function e(){b.ReferenceData.PublicHost&&(a.baseUrl="https://"+b.ReferenceData.PublicHost+"{0}");var c=d.fileUrl;c&&(a.previewUrl=a.baseUrl.format(c))}a.cancel=function(){c.close()},e()}]),angular.module("app.modules.file",["app.modules.file.controllers.filesController","app.modules.file.controllers.addFolderController","app.modules.file.controllers.previewFileController"]).config(["$stateProvider","$urlRouterProvider",function(a,b){a.state("index.oneCol.filesManagement",{url:"/files",templateUrl:"app/modules/file/partials/filesManagement.html",controller:"filesController"})}]),angular.module("app.modules.gc.controllers.gcsController",[]).controller("gcsController",["$scope","$rootScope","$state","gcService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h,i){function j(a){var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),e.pop("error","Error!",b,null,"trustedHtml")}function k(){d.getGiftCertificates(a.filter,a.refreshTracker).success(function(b){b.Success?(a.items=b.Data.Items,a.totalItems=b.Data.Count,a.loaded=!0):j(b)}).error(function(a){j(a)})}function l(){a.types=Object.clone(b.ReferenceData.GCTypes),a.types.splice(0,0,{Key:null,Text:"All"}),a.filter={Type:null,Code:null,Paging:{PageIndex:1,PageItemCount:100},Sorting:i.resolve(k,"Created","Desc")},k()}a.refreshTracker=h("refresh"),a.deleteTracker=h("delete"),a.filterItems=function(){a.filter.Paging.PageIndex=1,k()},a.pageChanged=function(){k()},a.add=function(){c.go("index.oneCol.gcsAdd",{})},a.edit=function(a){c.go("index.oneCol.gcDetail",{id:a})},a.send=function(a){var b="";a.FirstName&&(b+=a.FirstName+" "),a.LastName&&(b+=a.LastName);var c={ToName:b,ToEmail:a.Email,Gifts:[{Code:a.Code,Amount:a.Balance}]};f.open("app/modules/gc/partials/sendEmail.html","sendEmailController",c)},a["delete"]=function(b){g.confirm(function(){d.deleteGiftCertificate(b,a.deleteTracker).success(function(a){a.Success?(e.pop("success","Success!","Successfully deleted."),k()):j(a)}).error(function(a){j(a)})},"Are you sure you want to delete this gift certificate?")},l()}]),angular.module("app.modules.gc.controllers.sendEmailController",[]).controller("sendEmailController",["$scope","$uibModalInstance","data","gcService","toaster","promiseTracker","$rootScope",function(a,b,c,d,e,f,g){function h(d){if(d.Success)e.pop("success","Success!","Successfully sent."),c.thenCallback&&c.thenCallback(d.Data),b.close();else{var f="";d.Messages&&(a.forms.form.submitted=!0,a.serverMessages=new ServerMessages(d.Messages),$.each(d.Messages,function(b,c){c.Field&&a.forms.form[c.Field].$setValidity("server",!1),f+=c.Message+"<br />"})),e.pop("error","Error!",f,null,"trustedHtml")}}function i(a){e.pop("error","Error!","Server error occured")}function j(){a.forms={},a.email=c,$.each(a.email.Gifts,function(a,b){var c=b.Amount;b.Amount.toFixed&&(c=c.toFixed(2))}),a.save=function(){$.each(a.forms.form,function(a,b){b&&b.$name==a&&b.$setValidity("server",!0)}),a.forms.form.$valid?d.sendGiftCertificateEmail(a.email,a.saveTracker).success(function(a){h(a)}).error(function(a){i(a)}):a.forms.form.submitted=!0},a.cancel=function(){b.close()}}a.saveTracker=f("save"),j()}]),angular.module("app.modules.gc.controllers.gcDetailController",[]).controller("gcDetailController",["$scope","$rootScope","$state","$stateParams","gcService","orderService","toaster","modalUtil","confirmUtil","promiseTracker",function(a,b,c,d,e,f,g,h,i,j){function k(b){if(b.Success)g.pop("success","Success!","Successfully saved.");else{var c="";b.Messages&&(a.forms.form.submitted=!0,a.serverMessages=new ServerMessages(b.Messages),$.each(b.Messages,function(b,d){d.Field&&a.forms.form[d.Field].$setValidity("server",!1),c+=d.Message+"<br />"})),g.pop("error","Error!",c,null,"trustedHtml")}}function l(a){g.pop("error","Error!","Server error occured")}function m(){a.id=d.id,a.forms={},a.gc={},n(),o()}function n(){e.getGiftCertificate(a.id,a.refreshTracker).success(function(b){b.Success?(a.gc=b.Data,a.gc.StatusCode=a.gc.StatusCode):l(b)}).error(function(a){l(a)})}function o(){a.id&&f.getGCOrders(a.id,a.refreshTracker).success(function(b){b.Success?a.items=b.Data:l(b)}).error(function(a){l(a)})}a.refreshTracker=j("get"),a.editTracker=j("edit"),a.save=function(){$.each(a.forms.form,function(a,b){b&&b.$name==a&&b.$setValidity("server",!0)}),a.forms.form.$valid?e.updateGiftCertificate(a.gc,a.editTracker).success(function(a){k(a)}).error(function(a){l(a)}):a.forms.form.submitted=!0},a.send=function(){var b="";a.gc.FirstName&&(b+=a.gc.FirstName+" "),a.gc.LastName&&(b+=a.gc.LastName);var c={ToName:b,ToEmail:a.gc.Email,Gifts:[{Code:a.gc.Code,Amount:a.gc.Balance}]};h.open("app/modules/gc/partials/sendEmail.html","sendEmailController",c)},m()}]),angular.module("app.modules.gc.controllers.gcsAddController",[]).controller("gcsAddController",["$scope","$rootScope","$state","$stateParams","$timeout","gcService","toaster","modalUtil","confirmUtil","promiseTracker",function(a,b,c,d,e,f,g,h,i,j){function k(b){if(b.Success)a.codes=b.Data,$.each(a.codes,function(a,b){b.Balance=b.Balance.toFixed(2)}),a.state=2,g.pop("success","Success!","Successfully saved.");else{var c="";b.Messages&&(a.forms.form.submitted=!0,a.serverMessages=new ServerMessages(b.Messages),$.each(b.Messages,function(b,d){d.Field&&a.forms.form[d.Field].$setValidity("server",!1),c+=d.Message+"<br />"})),g.pop("error","Error!",c,null,"trustedHtml")}}function l(a){g.pop("error","Error!","Server error occured")}function m(){a.state=1,a.forms={},a.codes=[],f.getGiftCertificatesAdding(a.refreshTracker).success(function(b){b.Success&&(a.gc=b.Data)}).error(function(a){l(a)})}a.refreshTracker=j("get"),a.editTracker=j("edit"),a.save=function(){$.each(a.forms.form,function(a,b){b&&b.$name==a&&b.$setValidity("server",!0)}),a.forms.form.$valid?f.addGiftCertificates(a.gc.Quantity,a.gc,a.editTracker).success(function(a){k(a)}).error(function(a){l(a)}):a.forms.form.submitted=!0},a.send=function(){var b=[];$.each(a.codes,function(a,c){var d={Code:c.Code,Amount:c.Balance};b.push(d)});var c="";a.gc.FirstName&&(c+=a.gc.FirstName+" "),a.gc.LastName&&(c+=a.gc.LastName);var d={ToName:c,ToEmail:a.gc.Email,Gifts:b};h.open("app/modules/gc/partials/sendEmail.html","sendEmailController",d)},m()}]),angular.module("app.modules.gc.controllers.gcOrdersController",[]).controller("gcOrdersController",["$scope","$rootScope","$state","gcService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h,i){function j(a){var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),e.pop("error","Error!",b,null,"trustedHtml")}function k(){var b={};angular.copy(a.filter,b),b.From&&(b.From=b.From.toServerDateTime()),b.To&&(b.To=b.To.toServerDateTime()),d.getGiftCertificatesWithOrderInfo(b,a.refreshTracker).success(function(b){b.Success?(a.items=b.Data.Items,a.options.Count=b.Data.Count,a.options.Total=b.Data.Total):j(b)}).error(function(a){j(a)})}function l(){a.types=Object.clone(b.ReferenceData.GCTypes),a.types.splice(0,0,{Key:null,Text:"All"}),a.forms={},a.options={};var c=new Date;c.setHours(0,0,0,0),a.filter={To:c.shiftDate("+1d"),From:c.shiftDate("-1y"),ShippingAddress:{LastName:null},BillingAddress:{LastName:null},Type:null,StatusCode:null,Paging:{PageIndex:1,PageItemCount:100},Sorting:i.resolve(k,"Created","Desc")},k(),a.filterChanged()}a.refreshTracker=h("refresh"),a.filterData=function(){a.forms.form.$valid?(a.filter.Paging.PageIndex=1,k()):a.forms.form.submitted=!0},a.pageChanged=function(){k()},a.filterChanged=function(){var c={};angular.copy(a.filter,c),c.From&&(c.From=c.From.toServerDateTime()),c.To&&(c.To=c.To.toServerDateTime()),a.options.exportUrl=d.getGiftCertificatesWithOrderInfoReportFile(c,b.buildNumber)},l()}]),angular.module("app.modules.gc",["app.modules.gc.controllers.gcsController","app.modules.gc.controllers.sendEmailController","app.modules.gc.controllers.gcDetailController","app.modules.gc.controllers.gcsAddController","app.modules.gc.controllers.gcOrdersController"]).config(["$stateProvider","$urlRouterProvider",function(a,b){a.state("index.oneCol.manageGCs",{url:"/gcs",templateUrl:"app/modules/gc/partials/gcsList.html",controller:"gcsController"}).state("index.oneCol.manageGCOrders",{url:"/report/gcs",templateUrl:"app/modules/gc/partials/gcOrdersList.html",controller:"gcOrdersController"}).state("index.oneCol.gcDetail",{url:"/gcs/{id:int}",templateUrl:"app/modules/gc/partials/gcDetail.html",controller:"gcDetailController"}).state("index.oneCol.gcsAdd",{url:"/gcs/add",templateUrl:"app/modules/gc/partials/gcsAdd.html",controller:"gcsAddController"})}]),angular.module("app.modules.customer.services.customerEditService",[]).factory("customerEditService",["$q","$filter","$injector","customerService","toaster",function(a,b,c,d,e){function f(a){e.pop("error","Error!","Server error occured")}var g=function(a){a.getLast4=function(a){if(null!=a){var b=a.length-4;return 0>b&&(b=0),a.slice(b,a.length)}},a.getCreditCardTypeName=function(b){for(var c=0;c<a.creditCardTypes.length;c++)if(a.creditCardTypes[c].Key==b)return a.creditCardTypes[c].Text},a.deleteSelectedCreditCard=function(){a.currentCustomer.CreditCards.splice(a.paymentInfoTab.CreditCardIndex,1),a.currentCustomer.CreditCards.length>0?a.paymentInfoTab.CreditCardIndex=(a.currentCustomer.CreditCards.length-1).toString():a.paymentInfoTab.CreditCardIndex=void 0,$.each(a.forms.card,function(a,b){b&&b.$name==a&&b.$setValidity("server",!0)})},a.deleteAllCreditCards=function(){a.currentCustomer.CreditCards=[],a.paymentInfoTab.CreditCardIndex=void 0},a.makeBillingAsShippingAddress=function(){var b;switch(String(a.paymentInfoTab.PaymentMethodType)){case"1":a.paymentInfoTab.CreditCardIndex&&(b=a.currentCustomer.CreditCards[a.paymentInfoTab.CreditCardIndex].Address);break;case"2":a.currentCustomer.Oac&&(b=a.currentCustomer.Oac.Address);break;case"3":a.currentCustomer.Check&&(b=a.currentCustomer.Check.Address);break;case"4":a.currentCustomer.NC&&(b=a.currentCustomer.NC.Address);break;case"6":a.currentCustomer.WireTransfer&&(b=a.currentCustomer.WireTransfer.Address);break;case"7":a.currentCustomer.Marketing&&(b=a.currentCustomer.Marketing.Address);break;case"8":a.currentCustomer.VCWellness&&(b=a.currentCustomer.VCWellness.Address)}if(b){var c=a.buildShippingAddressForPartial(a.currentCustomer.Shipping,a.shippingAddressTab.AddressIndex,a.order?a.order.OnHold&&!a.order.UpdateShippingAddressForCustomer:!1,a.order&&!0);if(c){for(var d in c.Address)b[d]=c.Address[d];b.AddressType=2,b.Id=0}}},a.filterCountries=function(){if(a.allCountries&&a.currentCustomer){var b=$.grep(a.allCountries,function(b,c){return 1==a.currentCustomer.CustomerType&&(1==b.IdVisibility||3==b.IdVisibility)||2==a.currentCustomer.CustomerType&&(1==b.IdVisibility||2==b.IdVisibility)});a.countries=b}}},h=function(b){b.cardChanged=function(){$.each(b.forms.card,function(a,b){b&&b.$name==a&&b.$setValidity("server",!0)})},b.buildShippingAddressForPartial=function(a,c,d,e){return void 0!==a&&void 0!==a[c]&&void 0!==b.shippingAddressTab.ShippingEditModels?(void 0!==b.shippingAddressTab.ShippingEditModels[c]&&b.shippingAddressTab.ShippingEditModels[c].Address==a[c]||(b.shippingAddressTab.ShippingEditModels[c]={Address:a[c],formName:"shipping",index:c,collectionName:"Shipping",recalculate:e}),b.shippingAddressTab.ShippingEditModels[c].disableValidation=d,b.shippingAddressTab.ShippingEditModels[c]):void 0},b.buildCreditCardAddressForPartial=function(a,c,d){return void 0!==a&&void 0!==a[c]&&void 0!==a[c].Address&&void 0!==b.paymentInfoTab.AddressEditModels?(void 0!==b.paymentInfoTab.AddressEditModels[c]&&b.paymentInfoTab.AddressEditModels[c].Address==a[c].Address||(b.paymentInfoTab.AddressEditModels[c]={Address:a[c].Address,formName:"card",index:c,collectionName:"CreditCards"}),b.paymentInfoTab.AddressEditModels[c].disableValidation=d,b.paymentInfoTab.AddressEditModels[c]):void 0},b.togglePaymentMethodSelection=function(a){b.currentCustomer.ApprovedPaymentMethods&&0!=b.currentCustomer.ApprovedPaymentMethods.length||(b.currentCustomer.ApprovedPaymentMethods=[]),b.selectedPaymentMethods||(b.selectedPaymentMethods=[]);var c=-1;$.grep(b.selectedPaymentMethods,function(b,d){return b.Id==a.Id?void(c=d):void 0}),c>-1?(b.currentCustomer.ApprovedPaymentMethods.splice(c,1),b.selectedPaymentMethods.splice(c,1)):(b.selectedPaymentMethods.push({Id:a.Id,Name:a.Name}),b.currentCustomer.ApprovedPaymentMethods.push(a.Id))},b.toggleOrderNoteSelection=function(a){b.currentCustomer.OrderNotes||(b.currentCustomer.OrderNotes=[]);var c=b.currentCustomer.OrderNotes.indexOf(a);c>-1?b.currentCustomer.OrderNotes.splice(c,1):b.currentCustomer.OrderNotes.push(a)},b.toggleSuspended=function(){b.currentCustomer.StatusCode=4==b.currentCustomer.StatusCode?b.currentCustomer.IsConfirmed?2:1:4},b.$watch("currentCustomer.CustomerType",function(c,e){c&&a.all({paymentMethodsCall:d.getPaymentMethods(b.currentCustomer.CustomerType,b.addEditTracker),orderNotesCall:d.getOrderNotes(b.currentCustomer.CustomerType,b.addEditTracker)}).then(function(a){if(a.paymentMethodsCall.data.Success&&a.orderNotesCall.data.Success){b.paymentMethods=a.paymentMethodsCall.data.Data,b.orderNotes=a.orderNotesCall.data.Data;var c=[];$.each(b.currentCustomer.OrderNotes,function(a,d){var e=!1;$.each(b.orderNotes,function(a,b){return d==b.Id?void(e=!0):void 0}),e&&c.push(d)}),b.currentCustomer.OrderNotes=c;var d=[];$.each(b.currentCustomer.ApprovedPaymentMethods,function(a,c){var e=!1;$.each(b.paymentMethods,function(a,b){
return c==b.Id?void(e=!0):void 0}),e&&d.push(c)}),b.currentCustomer.ApprovedPaymentMethods=d,k(b)}else f(a)})},function(a){f(a)}),b.makeAsProfileAddress=function(){b.currentCustomer.Shipping[b.shippingAddressTab.AddressIndex].Company=b.currentCustomer.ProfileAddress.Company,b.currentCustomer.Shipping[b.shippingAddressTab.AddressIndex].FirstName=b.currentCustomer.ProfileAddress.FirstName,b.currentCustomer.Shipping[b.shippingAddressTab.AddressIndex].LastName=b.currentCustomer.ProfileAddress.LastName,b.currentCustomer.Shipping[b.shippingAddressTab.AddressIndex].Phone=b.currentCustomer.ProfileAddress.Phone,b.currentCustomer.Shipping[b.shippingAddressTab.AddressIndex].Fax=b.currentCustomer.ProfileAddress.Fax,b.currentCustomer.newEmail?b.currentCustomer.Shipping[b.shippingAddressTab.AddressIndex].Email=b.currentCustomer.newEmail:b.currentCustomer.Shipping[b.shippingAddressTab.AddressIndex].Email=b.currentCustomer.Email,b.currentCustomer.Shipping[b.shippingAddressTab.AddressIndex].AddressType=3,b.currentCustomer.Shipping[b.shippingAddressTab.AddressIndex].Id=0},b.makeShippingAsBillingAddress=function(){var a;switch(String(b.paymentInfoTab.PaymentMethodType)){case"1":b.paymentInfoTab.CreditCardIndex&&(a=b.currentCustomer.CreditCards[b.paymentInfoTab.CreditCardIndex].Address);break;case"2":b.currentCustomer.Oac&&(a=b.currentCustomer.Oac.Address);break;case"3":b.currentCustomer.Check&&(a=b.currentCustomer.Check.Address);break;case"4":b.currentCustomer.NC&&(a=b.currentCustomer.NC.Address);break;case"6":b.currentCustomer.WireTransfer&&(a=b.currentCustomer.WireTransfer.Address);break;case"7":b.currentCustomer.Marketing&&(a=b.currentCustomer.Marketing.Address);break;case"8":b.currentCustomer.VCWellness&&(a=b.currentCustomer.VCWellness.Address)}if(a){var c=b.buildShippingAddressForPartial(b.currentCustomer.Shipping,b.shippingAddressTab.AddressIndex,b.order?b.order.OnHold&&!b.order.UpdateShippingAddressForCustomer:!1,b.order&&!0);if(c){var d=c.Address.Default,e=c.Address.ShippingAddressType,f=c.Address.PreferredShipMethod,g=c.Address.DeliveryInstructions;for(var h in a)c.Address[h]=a[h];c.Address.AddressType=3,c.Address.Id=0,c.Address.Default=d,c.Address.ShippingAddressType=e,c.Address.PreferredShipMethod=f,c.Address.DeliveryInstructions=g}}},b.deleteShippingAddress=function(){b.currentCustomer.Shipping.splice(b.shippingAddressTab.AddressIndex,1),b.currentCustomer.Shipping.length>0?b.shippingAddressTab.AddressIndex=(b.currentCustomer.Shipping.length-1).toString():b.setNewAddress()},b.setNewAddress=function(){return b.forms.shipping.$valid?d.createAddressPrototype(b.addEditTracker).success(function(a){a.Success?(b.currentCustomer.sameShipping=!1,b.shippingAddressTab.NewAddress=!0,j(b,a.Data),b.currentCustomer.Shipping.push(a.Data),b.shippingAddressTab.AddressIndex=parseInt(b.currentCustomer.Shipping.length-1).toString()):f(a)}).error(function(a){f(a)}).then(function(){b.forms.submitted.shipping=!1}):b.forms.submitted.shipping=!0,!1},b.setDefaultAddress=function(){angular.forEach(b.currentCustomer.Shipping,function(a,c){c!=b.shippingAddressTab.AddressIndex&&a.Default?a.Default=!1:c==b.shippingAddressTab.AddressIndex&&(a.Default=!0)})},b.setDefaultCreditCard=function(){angular.forEach(b.currentCustomer.CreditCards,function(a,c){c!=b.paymentInfoTab.CreditCardIndex&&a.Default?a.Default=!1:c==b.paymentInfoTab.CreditCardIndex&&(a.Default=!0)})},b.setNewCreditCard=function(a){return b.forms.card.$valid?d.createCreditCardPrototype(b.addEditTracker).success(function(c){c.Success?(j(b,c.Data.Address),0==b.currentCustomer.CreditCards.length&&(c.Data.Default=!0),b.currentCustomer.CreditCards.push(c.Data),void 0===b.paymentInfoTab.CreditCardIndex?b.paymentInfoTab.CreditCardIndex="0":b.paymentInfoTab.CreditCardIndex=(b.currentCustomer.CreditCards.length-1).toString(),a&&a(c.Data)):successHandler(c)}).error(function(a){f(a)}).then(function(){b.forms.submitted.card=!1}):b.forms.submitted.card=!0,!1},b.setNewCheck=function(a){return b.forms.check.$valid?d.createCheckPrototype(b.addEditTracker).success(function(c){c.Success?(j(b,c.Data.Address),b.currentCustomer.Check=c.Data,b.currentCustomer.Check.formName="check",a&&a(c.Data)):successHandler(c)}).error(function(a){f(a)}).then(function(){b.forms.submitted.check=!1}):b.forms.submitted.check=!0,!1},b.setNewOac=function(a){return b.forms.oac.$valid?d.createOacPrototype(b.addEditTracker).success(function(c){c.Success?(j(b,c.Data.Address),b.currentCustomer.Oac=c.Data,b.currentCustomer.Oac.formName="oac",a&&a(c.Data)):successHandler(c)}).error(function(a){f(a)}).then(function(){b.forms.submitted.oac=!1}):b.forms.submitted.oac=!0,!1},b.setNewWireTransfer=function(a){return b.forms.wiretransfer.$valid?d.createWireTransferPrototype(b.addEditTracker).success(function(c){c.Success?(j(b,c.Data.Address),b.currentCustomer.WireTransfer=c.Data,b.currentCustomer.WireTransfer.formName="wiretransfer",a&&a(c.Data)):successHandler(c)}).error(function(a){f(a)}).then(function(){b.forms.submitted.wiretransfer=!1}):b.forms.submitted.wiretransfer=!0,!1},b.setNewMarketing=function(a){return b.forms.marketing.$valid?d.createMarketingPrototype(b.addEditTracker).success(function(c){c.Success?(j(b,c.Data.Address),b.currentCustomer.Marketing=c.Data,b.currentCustomer.Marketing.formName="marketing",a&&a(c.Data)):successHandler(c)}).error(function(a){f(a)}).then(function(){b.forms.submitted.marketing=!1}):b.forms.submitted.marketing=!0,!1},b.setNewVCWellness=function(a){return b.forms.vcwellness.$valid?d.createVCWellnessPrototype(b.addEditTracker).success(function(c){c.Success?(j(b,c.Data.Address),b.currentCustomer.VCWellness=c.Data,b.currentCustomer.VCWellness.formName="vcwellness",a&&a(c.Data)):successHandler(c)}).error(function(a){f(a)}).then(function(){b.forms.submitted.nc=!1}):b.forms.submitted.vcwellness=!0,!1},b.setNewNC=function(a){return b.forms.nc.$valid?d.createNCPrototype(b.addEditTracker).success(function(c){c.Success?(j(b,c.Data.Address),b.currentCustomer.NC=c.Data,b.currentCustomer.NC.formName="nc",a&&a(c.Data)):successHandler(c)}).error(function(a){f(a)}).then(function(){b.forms.submitted.nc=!1}):b.forms.submitted.vcwellness=!0,!1}},i=function(a){a.setNewCreditCard=function(b){return a.forms.card.$valid?d.createCreditCardPrototype(a.addEditTracker).success(function(c){c.Success?(a.paymentInfoTab.CreditCard=c.Data,j(a,c.Data.Address),a.paymentInfoTab.CreditCard.formName="card",a.currentCustomer.CreditCards.push(a.paymentInfoTab.CreditCard),void 0===a.paymentInfoTab.CreditCardIndex?a.paymentInfoTab.CreditCardIndex="0":a.paymentInfoTab.CreditCardIndex=(a.currentCustomer.CreditCards.length-1).toString(),b&&b(c.Data)):successHandler(c)}).error(function(a){f(a)}).then(function(){a.forms.submitted.card=!1}):a.forms.submitted.card=!0,!1},a.setNewCheck=function(b){return a.forms.check.$valid?d.createCheckPrototype(a.addEditTracker).success(function(c){c.Success?(a.order.Check=c.Data,j(a,c.Data.Address),a.order.Check.formName="check",b&&b(c.Data)):successHandler(c)}).error(function(a){f(a)}).then(function(){a.forms.submitted.check=!1}):a.forms.submitted.check=!0,!1},a.setNewOac=function(b){return a.forms.oac.$valid?d.createOacPrototype(a.addEditTracker).success(function(c){c.Success?(a.order.Oac=c.Data,j(a,c.Data.Address),a.order.Oac.formName="oac",b&&b(c.Data)):successHandler(c)}).error(function(a){f(a)}).then(function(){a.forms.submitted.oac=!1}):a.forms.submitted.oac=!0,!1},a.setNewWireTransfer=function(b){return a.forms.wiretransfer.$valid?d.createWireTransferPrototype(a.addEditTracker).success(function(c){c.Success?(a.order.WireTransfer=c.Data,j(a,c.Data.Address),a.order.WireTransfer.formName="wiretransfer",b&&b(c.Data)):successHandler(c)}).error(function(a){f(a)}).then(function(){a.forms.submitted.wiretransfer=!1}):a.forms.submitted.wiretransfer=!0,!1},a.setNewMarketing=function(b){return a.forms.marketing.$valid?d.createMarketingPrototype(a.addEditTracker).success(function(c){c.Success?(a.order.Marketing=c.Data,j(a,c.Data.Address),a.order.Marketing.formName="marketing",b&&b(c.Data)):successHandler(c)}).error(function(a){f(a)}).then(function(){a.forms.submitted.marketing=!1}):a.forms.submitted.marketing=!0,!1},a.setNewVCWellness=function(b){return a.forms.vcwellness.$valid?d.createVCWellnessPrototype(a.addEditTracker).success(function(c){c.Success?(a.order.VCWellness=c.Data,j(a,c.Data.Address),a.order.VCWellness.formName="vcwellness",b&&b(c.Data)):successHandler(c)}).error(function(a){f(a)}).then(function(){a.forms.submitted.vcwellness=!1}):a.forms.submitted.vcwellness=!0,!1},a.setNewNC=function(b){return a.forms.nc.$valid?d.createNCPrototype(a.addEditTracker).success(function(c){c.Success?(a.order.NC=c.Data,j(a,c.Data.Address),a.order.NC.formName="nc",b&&b(c.Data)):successHandler(c)}).error(function(a){f(a)}).then(function(){a.forms.submitted.nc=!1}):a.forms.submitted.nc=!0,!1}},j=function(a,b){if(b&&b.Country){var c=$.grep(a.countries,function(a){return a.Id==b.Country.Id})[0];b.Country=c}},k=function(a){a.currentCustomer&&a.currentCustomer.ApprovedPaymentMethods&&0!=a.currentCustomer.ApprovedPaymentMethods.length&&a.paymentMethods&&(a.selectedPaymentMethods=[],angular.forEach(a.currentCustomer.ApprovedPaymentMethods,function(b){a.selectedPaymentMethods.push({Id:b,Name:$.grep(a.paymentMethods,function(a){return a.Id==b})[0].Name})}))},l=function(a){var d=[];if(angular.forEach(a.currentCustomer.CustomerNotes,function(a){1==a.Priority&&d.push("<p>Date: "+b("date")(a.DateEdited,"short")+"</p><p>Agent: "+a.EditedBy+"</p><p>Notes: <p>"+a.Text+"</p></p>")}),d.length>0){var e=c.get("infoPopupUtil");e.info("High Priority Notes",d.join("<hr />"),void 0,!0)}};return{initBase:g,initCustomerEdit:h,initOrderEditCustomerParts:i,syncDefaultPaymentMethod:k,syncCountry:j,showHighPriNotes:l}}]),angular.module("app.modules.customer.controllers.addEditCustomerController",[]).controller("addEditCustomerController",["$scope","$injector","$filter","customerService","toaster","promiseTracker","$rootScope","$q","$state","$stateParams","customerEditService","$window","Upload","modalUtil",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(){if(a.currentCustomer&&a.currentCustomer.Id){var b={};b.service=d,b.tracker=a.addEditTracker,b.idObject=a.currentCustomer.Id,b.idObjectType=6,a.$broadcast("objectHistorySection#in#refresh",b)}}function p(b){if(b.Success){a.currentCustomer=b.Data,a.filterCountries(),a.currentCustomer.InceptionDate&&(a.currentCustomer.InceptionDate=Date.parseDateTime(a.currentCustomer.InceptionDate)),a.currentCustomer.Email||(a.options.OverrideEmail=!0),B();var c=[{Key:4,Text:"Gift Orders"}];2==a.currentCustomer.CustomerType&&(c.splice(0,0,{Key:3,Text:"Dropship Orders"}),c.splice(0,0,{Key:8,Text:"AAFES Order Import"})),a.uploadOrderTypes=c,a.currentCustomer.ActivatePending=!1,a.options.DBStatusCode=a.currentCustomer.StatusCode,a.accountProfileTab.Address=a.currentCustomer.ProfileAddress,a.paymentInfoTab.PaymentMethodType=a.currentCustomer.DefaultPaymentMethod,a.paymentInfoTab.Address={},angular.forEach(a.currentCustomer.Shipping,function(b,c){k.syncCountry(a,b),b.Default&&(a.shippingAddressTab.AddressIndex=c.toString())}),k.syncCountry(a,a.currentCustomer.ProfileAddress),a.paymentInfoTab.CreditCardIndex="0",angular.forEach(a.currentCustomer.CreditCards,function(b,c){b.formName="card",k.syncCountry(a,b.Address),b.Default&&(a.paymentInfoTab.CreditCardIndex=c.toString())}),a.currentCustomer.Oac&&(a.currentCustomer.Oac.formName="oac",k.syncCountry(a,a.currentCustomer.Oac.Address)),a.currentCustomer.Check&&(a.currentCustomer.Check.formName="check",k.syncCountry(a,a.currentCustomer.Check.Address)),a.currentCustomer.WireTransfer&&(a.currentCustomer.WireTransfer.formName="wiretransfer",k.syncCountry(a,a.currentCustomer.WireTransfer.Address)),a.currentCustomer.Marketing&&(a.currentCustomer.Marketing.formName="marketing",k.syncCountry(a,a.currentCustomer.Marketing.Address)),a.currentCustomer.VCWellness&&(a.currentCustomer.VCWellness.formName="vcwellness",k.syncCountry(a,a.currentCustomer.VCWellness.Address)),a.currentCustomer.NC&&(a.currentCustomer.NC.formName="nc",k.syncCountry(a,a.currentCustomer.NC.Address)),k.syncDefaultPaymentMethod(a),k.showHighPriNotes(a),o(),s(),t(),u(),q()}else e.pop("error","Error!","Can't load customer")}function q(){var b={};b.idCustomer=a.currentCustomer.Id,a.$broadcast("customerAutoShips#in#init",b)}function r(){a.editMode=null!=j.id,a.inceptionDateOpened=!1,a.options={},a.accountProfileTab={index:1,formName:"profile"},a.shippingAddressTab={index:2,formName:"shipping",ShippingEditModels:{}},a.customerNotesTab={index:3,formName:"customerNote"},a.paymentInfoTab={index:4,formNames:["card","oac","check","wiretransfer","marketing","vcwellness","nc"],AddressEditModels:{}},a.customerFilesTab={index:5,formName:"customerFile"},a.additionalActionsTab={index:6,formName:"uploadOrderType"},a.options.activeTabIndex=a.accountProfileTab.index,a.creditCardTypes=g.ReferenceData.CreditCardTypes;var b=[];b.push(a.accountProfileTab),b.push(a.shippingAddressTab),b.push(a.paymentInfoTab),b.push(a.customerNotesTab),b.push(a.customerFilesTab),b.push(a.additionalActionsTab),a.tabs=b,k.initBase(a),k.initCustomerEdit(a),a.forms={},a.forms.submitted=[],h.all({countriesCall:d.getCountries(a.addEditTracker)}).then(function(b){b.countriesCall.data.Success?(a.allCountries=b.countriesCall.data.Data,a.countries=b.countriesCall.data.Data,a.editMode?d.getExistingCustomer(j.id,a.addEditTracker).success(function(a){p(a)}).error(function(a){e.pop("error","Error!","Server error ocurred")}):d.createCustomerPrototype(a.addEditTracker).success(function(b){b.Success?(a.currentCustomer=b.Data,a.filterCountries(),a.currentCustomer.InceptionDate&&(a.currentCustomer.InceptionDate=Date.parseDateTime(a.currentCustomer.InceptionDate)),a.options.DBStatusCode=a.currentCustomer.StatusCode,a.accountProfileTab.Address=a.currentCustomer.ProfileAddress,a.shippingAddressTab.AddressIndex="0",a.customerNotesTab.CustomerNote=a.currentCustomer.CustomerNotes[0],a.paymentInfoTab.Address={},angular.forEach(a.currentCustomer.Shipping,function(b,c){k.syncCountry(a,b),b.Default&&(a.shippingAddressTab.AddressIndex=c.toString())}),k.syncCountry(a,a.currentCustomer.ProfileAddress),o(),s(),t(),u()):e.pop("error","Error!","Can't load customer prototype")}).error(function(a){e.pop("error","Error!","Server error ocurred")})):e.pop("error","Error!","Can't get reference data")},function(a){e.pop("error","Error!","Server error ocurred")})}function s(){var b={};b.files=a.currentCustomer.Files,b.publicId=a.currentCustomer.PublicId,b.addEditTracker=a.addEditTracker,a.$broadcast("customerFiles#in#init",b)}function t(){var b={};b.customerNotes=a.currentCustomer.CustomerNotes,b.addEditTracker=a.addEditTracker,a.$broadcast("customerNotes#in#init",b)}function u(){var b={};b.idCustomer=a.currentCustomer.Id,a.$broadcast("customerOrders#in#init",b)}function v(){$.each(a.forms,function(a,b){b&&"boolean"!=typeof b&&$.each(b,function(a,b){b&&b.$name==a&&b.$setValidity("server",!0)})})}function w(b){$.each(a.tabs,function(c,d){var e=null;return d.formName==b&&(e=d),d.formNames&&$.each(d.formNames,function(a,c){return c==b?(e=d,!1):void 0}),e?(a.options.activeTabIndex=e.index,!1):void 0})}function x(b){if(b.Success)a.currentCustomer.Id||i.go("index.oneCol.orderAdd",{idcustomer:b.Data.Id}),p(b),a.currentCustomer.Id=b.Data.Id,a.options.DBStatusCode=b.Data.StatusCode,a.currentCustomer.ActivatePending=!1,o(),e.pop("success","Success!","Successfully saved");else{var c="";if(b.Messages){a.forms.submitted.profile=!0,a.forms.submitted.shipping=!0,a.forms.submitted.card=!0,a.forms.submitted.oac=!0,a.forms.submitted.check=!0,a.forms.submitted.wiretransfer=!0,a.forms.submitted.marketing=!0,a.forms.submitted.vcwellness=!0,a.forms.submitted.nc=!0,a.serverMessages=new ServerMessages(b.Messages);var d,f=null;$.each(b.Messages,function(b,e){if(e.Field)if(e.Field.indexOf("::")>=0){var g=e.Field.split("::"),h=g[0],i=g[1];if(i.indexOf(".")>=0){g=i.split(".");var j=g[0],k=g[1];switch(j){case"Shipping":var l=k.split("i")[1];a.shippingAddressTab.AddressIndex=l,d=a.forms[h],i=g[2],void 0!=d[i]&&(d[i].$setValidity("server",!1),null==f&&(f=h));break;case"CreditCards":var l=k.split("i")[1];a.paymentInfoTab.CreditCardIndex=l,d=a.forms[h],i=g[2],void 0!=d[i]&&(d[i].$setValidity("server",!1),null==f&&(f=h))}}d=a.forms[h],void 0!=d[i]&&(d[i].$setValidity("server",!1),null==f&&(f=h))}else $.each(a.forms,function(a,b){b&&"submitted"!==a&&void 0!=b[e.Field]&&(b[e.Field].$setValidity("server",!1),null==f&&(f=a))});e.Field||(c+=e.Message+"<br />")}),f&&w(f)}""==c&&b.Messages&&b.Messages.length>0&&(c=A),e.pop("error","Error!",c,null,"trustedHtml")}}function y(a){e.pop("error","Error!","Server error occured")}function z(){$.each(a.forms,function(a,b){b&&"boolean"!=typeof b&&(b.Country&&b.Country.$viewValue&&0==b.Country.$viewValue.Id&&b.Country.$setValidity("required",!1),b.State&&0==b.State.$viewValue&&b.State.$setValidity("required",!1))})}var A="Validation errors, please correct field values.";a.addEditTracker=f("addEdit"),a.resetTracker=f("reset"),a.resendTracker=f("resend"),a.loginAsCustomerTracker=f("loginAsCustomer"),a.save=function(){v();var b=!0;if(z(),$.each(a.forms,function(a,c){return c&&"boolean"!=typeof c&&"uploadOrderType"!=a&&!c.$valid&&"submitted"!=a?(b=!1,w(a),!1):void 0}),b){a.editMode||(a.currentCustomer.Shipping[0].Default=!0);var c=angular.copy(a.currentCustomer);c.newEmail||c.uiEmailConfirm?(c.Email=c.newEmail,c.EmailConfirm=c.uiEmailConfirm):c.EmailConfirm=c.Email,a.options.OverrideEmail&&(c.Email=null,c.EmailConfirm=null),c.ActivatePending&&(c.StatusCode=2),c.InceptionDate&&(c.InceptionDate=c.InceptionDate.toServerDateTime()),a.saving=!0,d.createUpdateCustomer(c,a.addEditTracker).success(function(a){x(a)}).error(function(a){y(a)})}else a.forms.submitted.profile=!0,a.forms.submitted.shipping=!0,a.forms.submitted.card=!0,a.forms.submitted.oac=!0,a.forms.submitted.check=!0,a.forms.submitted.wiretransfer=!0,a.forms.submitted.marketing=!0,a.forms.submitted.vcwellness=!0,a.forms.submitted.nc=!0,e.pop("error","Error!",A,null,"trustedHtml")},a.resend=function(){d.resendActivation(a.currentCustomer.PublicUserId,a.resendTracker).success(function(a){if(a.Success)e.pop("success","Success!","Successfully sent");else{var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),e.pop("error","Error!",b,null,"trustedHtml")}}).error(function(){e.pop("error","Error!","Server error occured")})},a.resetPassword=function(){d.resetPassword(a.currentCustomer.PublicUserId,a.resetTracker).success(function(a){if(a.Success)e.pop("success","Success!","Successfully reset");else{var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),e.pop("error","Error!",b,null,"trustedHtml")}}).error(function(){e.pop("error","Error!","Server error occured")})},a.loginAsCustomer=function(){d.loginAsCustomer(a.currentCustomer.PublicUserId,a.loginAsCustomerTracker).success(function(a){if(a.Success)return void l.open("https://"+g.ReferenceData.PublicHost+"/Account/LoginAsCustomer/"+a.Data,"_blank");var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),e.pop("error","Error!",b,null,"trustedHtml")}).error(function(){e.pop("error","Error!","Server error occured")})},a.setOrderImportFile=function(b){a.options.selectedOrderImportFile=b&&b.length>0?b[0]:null},a.uploadOrderImportFile=function(){if(a.forms.uploadOrderType.$valid){if(a.options.selectedOrderImportFile){var b={idcustomer:a.currentCustomer.Id,ordertype:a.options.UploadOrderType};if(4==a.options.UploadOrderType&&(b.idpaymentmethod=a.options.UploadOrderCreditCard),3==a.options.UploadOrderType||8==a.options.UploadOrderType){if(null==a.currentCustomer.Oac||0==a.currentCustomer.Oac.Id)return void e.pop("error","Error!","Please specify an On Approved Credit payment method and save a customer first.",null,"trustedHtml");b.idpaymentmethod=a.currentCustomer.Oac.Id}a.options.uploadingOrdersImport=!0;var c=a.addEditTracker.createPromise();m.upload({url:"/api/order/ImportOrders",data:b,file:a.options.selectedOrderImportFile}).progress(function(a){}).success(function(b,d,e,f){c.resolve(),b.Success?(a.$broadcast("customerOrders#in#refresh"),n.open("app/modules/setting/partials/infoDetailsPopup.html","infoDetailsPopupController",{Header:"Success!",Messages:[{Message:"Successfully imported"}],OkButton:{Label:"Ok",Handler:function(){i.go("index.oneCol.manageOrders")}}},{size:"xs"})):b.Messages&&n.open("app/modules/setting/partials/infoDetailsPopup.html","infoDetailsPopupController",{Header:"Error details",Messages:b.Messages}),a.options.selectedOrderImportFile=null,a.options.uploadingOrdersImport=!1}).error(function(b,d,f,g){c.resolve(),a.options.uploadingOrdersImport=!1,a.options.selectedOrderImportFile=null,e.pop("error","Error!","Server error ocurred"),console.log("error status: "+d)})}}else a.forms.submitted.uploadOrderType=!0};var B=function(){if(a.currentCustomer.Id&&a.currentCustomer.CreditCards){var b=[];$.each(a.currentCustomer.CreditCards,function(c,d){var e=a.getCreditCardTypeName(d.CardType)+", ending in "+a.getLast4(d.CardNumber);b.push({Key:d.Id,Text:e})}),a.uploadOrderCreditCards=b}};r()}]),angular.module("app.modules.customer.controllers.customerManagementController",[]).controller("customerManagementController",["$scope","customerService","toaster","promiseTracker","$rootScope","gridSorterUtil",function(a,b,c,d,e,f){function g(){b.getCustomers(a.filter,a.refreshTracker).success(function(b){b.Success?(a.customers=b.Data.Items,a.totalItems=b.Data.Count):c.pop("error","Error!","Can't get access to the customers")}).error(function(a){c.pop("error","Error!","Server error ocurred")})}function h(){a.forms={},a.address={},a.defaultShippingAddress={},a.filter={Address:null,DefaultShippingAddress:null,SearchText:"",Paging:{PageIndex:1,PageItemCount:100},Sorting:f.resolve(g,"Updated","Desc")},a.autoCompleteFilter={FieldName:null,FieldValue:null}}a.refreshTracker=d("refresh"),a.editTracker=d("edit"),a.pageChanged=function(){g()},a.filterCustomers=function(b){i()&&(a.filter.Address=angular.copy(a.address),a.filter.DefaultShippingAddress=angular.copy(a.defaultShippingAddress),a.filter.Email=a.address.Email,a.filter.SearchText=a.address.SearchText,a.filter.Paging.PageIndex=1,g())};var i=function(){return(!a.address.Email||a.address.Email.length<3)&&(!a.address.LastName||a.address.LastName.length<3)&&(!a.address.FirstName||a.address.FirstName.length<3)&&(!a.defaultShippingAddress.Address1||a.defaultShippingAddress.Address1.length<3)&&(!a.address.SearchText||a.address.SearchText.length<3)&&(!a.defaultShippingAddress.City||a.defaultShippingAddress.City.length<3)&&(!a.defaultShippingAddress.Zip||a.defaultShippingAddress.Zip.length<3)&&(!a.address.Phone||a.address.Phone.length<3)&&(!a.address.Company||a.address.Company.length<3)?(c.pop("error","Info","At least one field should be filled with at least 3 characters."),!1):!0};a.getByStaticAutoComplete=function(c,d){return c?(a.autoCompleteFilter.FieldName=d,a.autoCompleteFilter.FieldValue=c,b.getCustomerStaticFieldValuesByValue(a.autoCompleteFilter).then(function(a){return a.data.Data.map(function(a){return a})})):void 0},a.getByProfileAddressAutoComplete=function(c,d){return c?(a.autoCompleteFilter.FieldName=d,a.autoCompleteFilter.FieldValue=c,b.getProfileAddressFieldValuesByValueAsync(a.autoCompleteFilter).then(function(a){return a.data.Data.map(function(a){return a})})):void 0},a.getByDefaultShippingAddressAutoComplete=function(c,d){return c?(a.autoCompleteFilter.FieldName=d,a.autoCompleteFilter.FieldValue=c,b.getDefaultShippingAddressFieldValuesByValueAsync(a.autoCompleteFilter).then(function(a){return a.data.Data.map(function(a){return a})})):void 0},a.applySort=function(b){null!=a.filter.Address&&a.filter.Sorting.applySort(b)},h()}]),angular.module("app.modules.customer.controllers.manageCustomerFilesController",[]).controller("manageCustomerFilesController",["$scope","$rootScope","$state","customerService","toaster","modalUtil","confirmUtil","promiseTracker","Upload",function(a,b,c,d,e,f,g,h,i){function j(){a.logFileRequest={},a.fileForms={}}a.deleteFileTracker=h("deleteFile"),a.$on("customerFiles#in#init",function(b,c){a.files=c.files,a.publicId=c.publicId,a.addEditTracker=c.addEditTracker,a.options={},a.options.currentFileDescription=null}),a.setFile=function(b){a.uploadFile=b&&b.length>0?b[0]:null},a.upload=function(){var b=a.logFileRequest;b.type="upload",b.progress=0,b.state="progress",a.uploadFile&&(b.name=a.uploadFile.name,a.uploading=!0,i.upload({url:"/api/customer/UploadCustomerFile",data:{publicId:a.publicId},file:a.uploadFile}).progress(function(a){var c=parseInt(100*a.loaded/a.total);b.progress=c,console.log("progress: "+c+"% "+a.config.file.name)}).success(function(c,d,f,g){if(c.Success){b.progress=100,b.state="done";var h=c.Data;h.Description=a.options.currentFileDescription,a.files.push(h),console.log("file "+g.file.name+"uploaded. Response: "+c)}else b.progress=100,b.state="error",e.pop("error","Error!","Can't upload file");files=[],a.uploadFile=null,a.options.currentFileDescription="",b.state="",a.uploading=!1,a.fileForms.file.$setDirty()}).error(function(c,d,f,g){a.uploading=!1,a.uploadFile=null,b.progress=100,b.state="error",e.pop("error","Error!","Server error ocurred"),console.log("error status: "+d)}))},a.deleteFile=function(b){var c=null;$.each(a.files,function(a,d){b==d&&(c=a)}),null!=c&&g.confirm(function(){a.files.splice(c,1),a.fileForms.file.$setDirty()},"Are you sure you want to delete this file?")},j()}]),angular.module("app.modules.customer.controllers.manageCustomerNotesController",[]).controller("manageCustomerNotesController",["$scope","$rootScope","$state","$window","$location","customerService","toaster","modalUtil","confirmUtil","promiseTracker","Upload",function(a,b,c,d,e,f,g,h,i,j,k){function l(){a.childForms={},a.childForms.submitted=[]}function m(){f.createCustomerNotePrototype(a.addEditTracker).success(function(b){b.Success?a.customerNote=b.Data:g.pop("error","Error!","Can't process customer notes")}).error(function(a){g.pop("error","Error!","Server error ocurred")}).then(function(){a.childForms.submitted.customerNote=!1})}a.deleteFileTracker=j("deleteFile"),a.$on("customerNotes#in#init",function(b,c){a.customerNotes=c.customerNotes,a.addEditTracker=c.addEditTracker,a.customerNote={},a.editCustomerNote={},m()}),a.deleteCustomerNote=function(b){i.confirm(function(){a.customerNotes.splice(b,1)},"Are you sure you want to delete this customer note?")},a.addNewCustomerNote=function(){a.childForms.customerNote.$valid?(a.customerNotes.splice(0,0,angular.copy(a.customerNote)),m()):a.childForms.submitted.customerNote=!0},a.initEdit=function(b){f.createCustomerNotePrototype(a.addEditTracker).success(function(c){c.Success?(a.selectedCustomerNote=b,a.customerNote=angular.copy(b),a.customerNote.DateEdited=c.Data.DateEdited,a.customerNote.IdEditedBy=c.Data.IdEditedBy,a.customerNote.EditedBy=c.Data.EditedBy,d.scrollTo(0,0)):g.pop("error","Error!","Can't process customer notes")}).error(function(a){g.pop("error","Error!","Server error ocurred")})},a.saveEdit=function(b){a.childForms.customerNote.$valid?(a.selectedCustomerNote.Priority=a.customerNote.Priority,a.selectedCustomerNote.Text=a.customerNote.Text,a.selectedCustomerNote.DateEdited=a.customerNote.DateEdited,a.selectedCustomerNote.IdEditedBy=a.customerNote.IdEditedBy,a.selectedCustomerNote.EditedBy=a.customerNote.EditedBy,a.selectedCustomerNote=null,m()):a.childForms.submitted.customerNote=!0},a.cancelEdit=function(b){a.selectedCustomerNote=null,m()},l()}]),angular.module("app.modules.customer.controllers.wholesaleSummaryReportController",[]).controller("wholesaleSummaryReportController",["$scope","$rootScope","$state","customerService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h,i){function j(a){var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),e.pop("error","Error!",b,null,"trustedHtml")}function k(){d.getWholesaleSummaryReport(a.refreshTracker).success(function(b){b.Success?a.summary=b.Data:j(b)}).error(function(a){j(a)})}function l(){d.getWholesaleSummaryReportMonthStatistic(a.options.count,a.options.include,a.refreshItemsTracker).success(function(b){b.Success?a.items=b.Data:j(b)}).error(function(a){j(a)})}function m(){a.months=[3,6,9,12],a.options={},a.options.include=!0,a.options.count=3,k(),l()}a.refreshTracker=h("refresh"),a.refreshItemsTracker=h("refreshItems"),a.refresh=function(){l()},m()}]),angular.module("app.modules.customer.controllers.wholesalesReportController",[]).controller("wholesalesReportController",["$scope","$rootScope","$state","customerService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h,i){function j(a){var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),e.pop("error","Error!",b,null,"trustedHtml")}function k(){d.getWholesales(a.filter,a.refreshTracker).success(function(b){b.Success?(a.items=b.Data.Items,a.totalItems=b.Data.Count):j(b)}).error(function(a){j(a)})}function l(){a.tradeClasses=angular.copy(b.ReferenceData.TradeClasses),a.tradeClasses.splice(0,0,{Key:null,Text:"All Trade Classes"}),a.tiers=angular.copy(b.ReferenceData.Tiers),a.tiers.splice(0,0,{Key:null,Text:"All Tiers"}),a.forms={},a.options={},a.filter={IdTradeClass:null,IdTier:null,OnlyActive:!0,Paging:{PageIndex:1,PageItemCount:100}},a.options.exportUrl=d.getWholesalesReportFile(a.filter,b.buildNumber),k()}a.refreshTracker=h("refresh"),a.filterItems=function(){a.forms.form.$valid?(a.forms.form.submitted=!1,k()):a.forms.form.submitted=!0},a.pageChanged=function(){k()},a.filterChanged=function(){a.forms.form.$valid?a.options.exportUrl=d.getWholesalesReportFile(a.filter,b.buildNumber):a.forms.form.submitted=!0},l()}]),angular.module("app.modules.customer.controllers.mailingReportController",[]).controller("mailingReportController",["$scope","$rootScope","$state","$q","orderService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h,i,j){function k(a){var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),f.pop("error","Error!",b,null,"trustedHtml")}function l(){var b={};return angular.copy(a.filter,b),b.From&&(b.From=b.From.toServerDateTime()),b.To&&(b.To=b.To.toServerDateTime()),b.FromFirst&&(b.FromFirst=b.FromFirst.toServerDateTime()),b.ToFirst&&(b.ToFirst=b.ToFirst.toServerDateTime()),b.FromLast&&(b.FromLast=b.FromLast.toServerDateTime()),b.ToLast&&(b.ToLast=b.ToLast.toServerDateTime()),b}function m(){e.getMailingReportItems(l(),a.refreshTracker).success(function(b){b.Success?(a.items=b.Data.Items,a.totalItems=b.Data.Count):k(b)}).error(function(a){k(a)})}function n(){a.orderSources=angular.copy(b.ReferenceData.OrderSources),a.orderSources.splice(0,0,{Key:null,Text:"All First Order Source"}),a.customerTypes=angular.copy(b.ReferenceData.CustomerTypes),a.customerTypes.splice(0,0,{Key:null,Text:"All Customer Types"}),a.checkboxOptions=[{Key:null,Text:"All"},{Key:!0,Text:"Yes"},{Key:!1,Text:"No"}],a.options={},a.forms={};var c=new Date;c.setHours(0,0,0,0),a.filter={To:c.shiftDate("+1d"),From:c.shiftDate("-7d"),CustomerIdObjectType:null,FromOrderCount:null,ToOrderCount:null,FromFirst:null,ToFirst:null,FromLast:null,ToLast:null,LastFromTotal:null,LastToTotal:null,DNM:null,DNR:null,IdCustomerOrderSource:null,KeyCodeFirst:null,DiscountCodeFirst:null,Paging:{PageIndex:1,PageItemCount:100}},a.options.exportUrl=e.getMailingReportItemsReportFile(l(),b.buildNumber),m()}a.refreshTracker=i("refresh"),a.filterItems=function(){a.forms.form.$valid?(a.filter.Paging.PageIndex=1,m()):a.forms.form.submitted=!0},a.pageChanged=function(){m()},a.filterChanged=function(){a.forms.form.$valid?a.options.exportUrl=e.getMailingReportItemsReportFile(l(),b.buildNumber):a.forms.form.submitted=!0},n()}]),angular.module("app.modules.customer.controllers.searchCustomersController",[]).controller("searchCustomersController",["$scope","customerService","toaster","promiseTracker","$rootScope","gridSorterUtil","$timeout",function(a,b,c,d,e,f,g){
function h(){b.getCustomers(a.filter,a.refreshTracker).success(function(b){b.Success?(a.customers=b.Data.Items,a.totalItems=b.Data.Count,l()):c.pop("error","Error!","Can't get access to the customers")}).error(function(a){c.pop("error","Error!","Server error ocurred")})}function i(){a.forms={},a.address={},a.defaultShippingAddress={},a.blockIds=[],a.viewCustomers=[],a.filter={Address:null,DefaultShippingAddress:null,SearchText:"",Paging:{PageIndex:1,PageItemCount:100},Sorting:f.resolve(h,"Updated","Desc")},a.autoCompleteFilter={FieldName:null,FieldValue:null},g(function(){k()},200)}function j(b){var c={};c.name=a.name,c.items=b,a.$emit("searchCustomers#out#addItems",c)}function k(){var b={};b.name=a.name,a.$emit("searchCustomers#out#loaded",b)}function l(){var b=[];$.each(a.customers,function(c,d){var e=!0;$.each(a.blockIds,function(a,b){return d.Id==b?void(e=!1):void 0}),e&&b.push(d)}),a.viewCustomers=b}a.refreshTracker=d("refresh"),a.editTracker=d("edit"),a.pageChanged=function(){h()},a.filterCustomers=function(b){m()&&(a.filter.Address=angular.copy(a.address),a.filter.DefaultShippingAddress=angular.copy(a.defaultShippingAddress),a.filter.Email=a.address.Email,a.filter.SearchText=a.address.SearchText,a.filter.Paging.PageIndex=1,h())};var m=function(){return a.address.Email||a.address.LastName&&!(a.address.LastName.length<3)||a.address.FirstName&&!(a.address.FirstName.length<3)||a.defaultShippingAddress.Address1&&!(a.defaultShippingAddress.Address1.length<3)||a.address.SearchText&&!(a.address.SearchText.length<3)||a.defaultShippingAddress.City&&!(a.defaultShippingAddress.City.length<3)||a.defaultShippingAddress.Zip&&!(a.defaultShippingAddress.Zip.length<3)||a.address.Phone&&!(a.address.Phone.length<3)||a.address.Company&&!(a.address.Company.length<3)?!0:(c.pop("error","Info","At least one field should be filled with at least 3 characters."),!1)};a.getByStaticAutoComplete=function(c,d){return c?(a.autoCompleteFilter.FieldName=d,a.autoCompleteFilter.FieldValue=c,b.getCustomerStaticFieldValuesByValue(a.autoCompleteFilter).then(function(a){return a.data.Data.map(function(a){return a})})):void 0},a.getByProfileAddressAutoComplete=function(c,d){return c?(a.autoCompleteFilter.FieldName=d,a.autoCompleteFilter.FieldValue=c,b.getProfileAddressFieldValuesByValueAsync(a.autoCompleteFilter).then(function(a){return a.data.Data.map(function(a){return a})})):void 0},a.getByDefaultShippingAddressAutoComplete=function(c,d){return c?(a.autoCompleteFilter.FieldName=d,a.autoCompleteFilter.FieldValue=c,b.getDefaultShippingAddressFieldValuesByValueAsync(a.autoCompleteFilter).then(function(a){return a.data.Data.map(function(a){return a})})):void 0},a.applySort=function(b){null!=a.filter.Address&&a.filter.Sorting.applySort(b)},a.select=function(a){j([a])},a.$on("searchCustomers#in#setFilter",function(b,c){c.name==a.name&&(a.address=c.filter.address,a.defaultShippingAddress=c.filter.defaultShippingAddress)}),a.$on("searchCustomers#in#search",function(b,c){c.name==a.name&&a.filterCustomers()}),a.$on("searchCustomers#in#setBlockIds",function(b,c){if(c.name==a.name){var d=c.blockIds;d&&(a.blockIds=d,l())}}),i()}]),angular.module("app.modules.customer.controllers.mergeCustomersController",[]).controller("mergeCustomersController",["$scope","customerService","toaster","promiseTracker","$timeout","$rootScope","gridSorterUtil","modalUtil",function(a,b,c,d,e,f,g,h){function i(a){if(a.Messages){var b="";$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),c.pop("error","Error!",b,null,"trustedHtml")}else c.pop("error","Error!","Server error occured")}function j(){a.forms={},a.primary=null,a.selectedCustomers=[],a.filter={Paging:{PageIndex:1,PageItemCount:100}},k()}function k(){b.getCustomersWithDublicateEmails(a.filter,a.dublicateEmailsRefreshTracker).success(function(b){b.Success?(a.dublicateEmails=b.Data.Items,a.dublicateTotalItems=b.Data.Count):i(b)}).error(function(a){i(a)})}function l(){var b={};b.name=n,b.blockIds=[],a.primary&&b.blockIds.push(a.primary.Id),a.selectedCustomers&&a.selectedCustomers.length>0&&$.each(a.selectedCustomers,function(a,c){b.blockIds.push(c.Id)}),a.$broadcast("searchCustomers#in#setBlockIds",b)}const m="Step1SearchCustomers",n="Step2SearchCustomers";a.refreshTracker=d("refresh"),a.dublicateEmailsRefreshTracker=d("dublicateEmailsRefresh"),a.pageChanged=function(){k()},a.selectDublicateEmail=function(b){a.primary=null,a.selectedCustomers=[],e(function(){var c={};c.name=m,c.filter={address:{Email:b.Email},defaultShippingAddress:{}},a.$broadcast("searchCustomers#in#setFilter",c),a.$broadcast("searchCustomers#in#search",c),f.scrollTo(m)},200)},a.$on("searchCustomers#out#addItems",function(b,c){c.name==m&&1==c.items.length&&(a.primary=c.items[0]),c.name==n&&($.each(c.items,function(b,c){if(null==a.primary||null!=a.primary&&c.Id!=a.primary.Id){var d=!0;if($.each(a.selectedCustomers,function(a,b){return c.Id==b.Id?void(d=!1):void 0}),d){var e=angular.copy(c);a.selectedCustomers.push(e)}}}),l())}),a.unselectCustomer=function(b){a.selectedCustomers.splice(b,1),l()},a.selectAnotherPrimary=function(){a.primary=null,a.selectedCustomers=[],l()},a.mergeCustomers=function(){if(a.primary&&a.selectedCustomers&&a.selectedCustomers.length>0){var d=$.map(a.selectedCustomers,function(a){return a.Id});b.mergeCustomers(a.primary.Id,d,a.refreshTracker).success(function(b){b.Success?(a.primary=null,a.selectedCustomers=[],h.open("app/modules/setting/partials/infoDetailsPopup.html","infoDetailsPopupController",{Header:"Success!",Messages:[{Message:"Successfully merged"}],OkButton:{Label:"Ok",Handler:function(){}}},{size:"xs"}),a.filter.Paging.PageIndex=1,k()):i(b)}).error(function(a){i(a)})}else c.pop("error","Error!","Please select at least one customer for merge.",null,"trustedHtml")},a.userTheSameEmailStep2=function(){var b={};b.name=n,b.filter={address:{Email:a.primary.Email},defaultShippingAddress:{}},a.$broadcast("searchCustomers#in#setFilter",b),a.$broadcast("searchCustomers#in#search",b),f.scrollTo(m)},a.$on("searchCustomers#out#loaded",function(a,b){b.name==n&&l()}),j()}]),angular.module("app.modules.customer",["app.modules.customer.services.customerEditService","app.modules.customer.controllers.addEditCustomerController","app.modules.customer.controllers.customerManagementController","app.modules.customer.controllers.manageCustomerFilesController","app.modules.customer.controllers.manageCustomerNotesController","app.modules.customer.controllers.wholesaleSummaryReportController","app.modules.customer.controllers.wholesalesReportController","app.modules.customer.controllers.mailingReportController","app.modules.customer.controllers.searchCustomersController","app.modules.customer.controllers.mergeCustomersController"]).config(["$stateProvider","$urlRouterProvider",function(a,b){a.state("index.oneCol.addCustomer",{url:"/customer/add",templateUrl:"app/modules/customer/partials/manageCustomer.html",controller:"addEditCustomerController"}).state("index.oneCol.manageCustomers",{url:"/customers",templateUrl:"app/modules/customer/partials/customersList.html",controller:"customerManagementController"}).state("index.oneCol.customerDetail",{url:"/customers/{id:int}",templateUrl:"app/modules/customer/partials/manageCustomer.html",controller:"addEditCustomerController"}).state("index.oneCol.wholesaleSummaryReport",{url:"/report/wholesale-summary",templateUrl:"app/modules/customer/partials/wholesaleSummaryReport.html",controller:"wholesaleSummaryReportController"}).state("index.oneCol.wholesalesListReport",{url:"/report/wholesale-list",templateUrl:"app/modules/customer/partials/wholesalesReport.html",controller:"wholesalesReportController"}).state("index.oneCol.mailingReport",{url:"/report/mailing-list",templateUrl:"app/modules/customer/partials/mailingReport.html",controller:"mailingReportController"}).state("index.oneCol.mergeCustomers",{url:"/tools/merge-customers",templateUrl:"app/modules/customer/partials/mergeCustomers.html",controller:"mergeCustomersController"})}]),angular.module("app.modules.help.controllers.helpTicketsController",[]).controller("helpTicketsController",["$scope","$rootScope","$state","helpService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h,i){function j(a){e.pop("error","Error!","Server error occured")}function k(){d.getHelpTickets(a.filter,a.refreshTracker).success(function(b){b.Success?(a.items=b.Data.Items,a.totalItems=b.Data.Count):j(b)}).error(function(a){j(a)})}function l(){a.priorities=angular.copy(b.ReferenceData.Priorities),a.priorities.splice(0,0,{Key:null,Text:"All"}),a.statuses=angular.copy(b.ReferenceData.TicketStatuses),$.each(a.statuses,function(a,b){b.Text="Show "+b.Text}),a.statuses.splice(0,0,{Key:null,Text:"Show All"}),a.forms={};var c=new Date;c.setHours(0,0,0,0),a.filter={To:c.shiftDate("+1d"),From:c.shiftDate("-3m"),Priority:null,StatusCode:null,Paging:{PageIndex:1,PageItemCount:100},Sorting:i.resolve(k,"DateCreated","Desc")},k()}a.refreshTracker=h("refresh"),a.deleteTracker=h("delete"),a.filterItems=function(){a.forms.form.$valid?(a.filter.Paging.PageIndex=1,k()):a.forms.form.submitted=!0},a.pageChanged=function(){k()},a["delete"]=function(b){g.confirm(function(){d.deleteHelpTicket(b,a.deleteTracker).success(function(a){a.Success?(e.pop("success","Success!","Successfully deleted."),k()):j(a)}).error(function(a){j(a)})},"Are you sure you want to delete this help ticket?")},l()}]),angular.module("app.modules.help.controllers.helpTicketDetailController",[]).controller("helpTicketDetailController",["$scope","$rootScope","$state","$stateParams","helpService","toaster","modalUtil","confirmUtil","promiseTracker",function(a,b,c,d,e,f,g,h,i){function j(b){if(b.Success)f.pop("success","Success!","Successfully saved.");else{var c="";b.Messages&&(a.forms.form.submitted=!0,a.serverMessages=new ServerMessages(b.Messages),$.each(b.Messages,function(b,d){d.Field&&a.forms.form[d.Field].$setValidity("server",!1),c+=d.Message+"<br />"})),f.pop("error","Error!",c,null,"trustedHtml")}}function k(b){if(b.Success)a.helpTicket.Comments.push(b.Data);else{var c="";b.Messages&&(a.forms.newComment.submitted=!0,a.serverMessages=new ServerMessages(b.Messages),$.each(b.Messages,function(b,d){d.Field&&a.forms.newComment[d.Field].$setValidity("server",!1),c+=d.Message+"<br />"})),f.pop("error","Error!",c,null,"trustedHtml")}}function l(b){if(b.Success){var c=null;$.each(a.helpTicket.Comments,function(a,d){return d.Id==b.Data.Id?(c=a,!1):void 0}),null!=c&&a.helpTicket.Comments.splice(c,1,b.Data)}else{var d="";b.Messages&&(a.forms.existComment.submitted=!0,a.serverMessages=new ServerMessages(b.Messages),$.each(b.Messages,function(b,c){c.Field&&a.forms.existComment[c.Field].$setValidity("server",!1),d+=c.Message+"<br />"})),f.pop("error","Error!",d,null,"trustedHtml")}}function m(a){f.pop("error","Error!","Server error occured")}function n(){a.id=d.id,a.forms={},a.helpTicket={},a.newHelpTicketComment={},o()}function o(){e.getHelpTicket(a.id,a.refreshTracker).success(function(b){b.Success?a.helpTicket=b.Data:m(b)}).error(function(a){m(a)})}a.refreshTracker=i("get"),a.editTracker=i("edit"),a.save=function(){$.each(a.forms.form,function(a,b){b&&b.$name==a&&b.$setValidity("server",!0)}),a.forms.form.$valid?e.updateHelpTicket(a.helpTicket,a.refreshTracker).success(function(a){j(a)}).error(function(a){m(a)}):a.forms.form.submitted=!0},a.addComment=function(){a.forms.newComment.$valid?(a.newHelpTicketComment.IdHelpTicket=a.helpTicket.Id,e.updateHelpTicketComment(a.newHelpTicketComment,a.refreshTracker).success(function(b){k(b),a.newHelpTicketComment.Comment="",a.forms.newComment.submitted=!1}).error(function(a){m(a)})):a.forms.newComment.submitted=!0},a.startUpdateComment=function(b){$.each(a.helpTicket.Comments,function(a,c){c.IsEdit=c==b,c.IsEdit&&(c.EditComment=c.Comment)})},a.cancelUpdateComment=function(b){$.each(a.helpTicket.Comments,function(a,b){b.IsEdit=!1,b.EditComment=null})},a.updateComment=function(b){if(a.forms.existComment.$valid){var c=angular.copy(b);c.Comment=c.EditComment,e.updateHelpTicketComment(c,a.refreshTracker).success(function(a){l(a)}).error(function(a){m(a)})}else a.forms.existComment.submitted=!0},a.deleteComment=function(b){h.confirm(function(){e.deleteHelpTicketComment(b.Id,a.refreshTracker).success(function(c){var d=null;$.each(a.helpTicket.Comments,function(a,c){return c.Id==b.Id?(d=a,!1):void 0}),null!=d&&a.helpTicket.Comments.splice(d,1)}).error(function(a){m(a)})},"Are you sure you want to delete this comment?")},n()}]),angular.module("app.modules.help.controllers.bugTicketsController",[]).controller("bugTicketsController",["$scope","$rootScope","$state","helpService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h,i){function j(a){e.pop("error","Error!","Server error occured")}function k(){var b={};angular.copy(a.filter,b),b.To&&(b.To=b.To.toServerDateTime()),b.From&&(b.From=b.From.toServerDateTime()),d.getBugTickets(b,a.refreshTracker).success(function(b){b.Success?(a.items=b.Data.Items,a.totalItems=b.Data.Count):j(b)}).error(function(a){j(a)})}function l(){a.priorities=angular.copy(b.ReferenceData.Priorities),a.priorities.splice(0,0,{Key:null,Text:"All"}),a.statuses=angular.copy(b.ReferenceData.BugTicketStatuses),$.each(a.statuses,function(a,b){b.Text="Show "+b.Text}),a.statuses.splice(0,0,{Key:null,Text:"Show All"}),a.forms={};var c=new Date;c.setHours(0,0,0,0),a.filter={To:c.shiftDate("+1d"),From:c.shiftDate("-3m"),Priority:null,StatusCode:null,Paging:{PageIndex:1,PageItemCount:100},Sorting:i.resolve(k,"DateCreated","Desc")},k()}a.refreshTracker=h("refresh"),a.deleteTracker=h("delete"),a.filterItems=function(){a.forms.form.$valid?(a.filter.Paging.PageIndex=1,k()):a.forms.form.submitted=!0},a.pageChanged=function(){k()},a["delete"]=function(b){g.confirm(function(){d.deleteBugTicket(b,a.deleteTracker).success(function(a){a.Success?(e.pop("success","Success!","Successfully deleted."),k()):j(a)}).error(function(a){j(a)})},"Are you sure you want to delete this bug ticket?")},l()}]),angular.module("app.modules.help.controllers.bugTicketDetailController",[]).controller("bugTicketDetailController",["$scope","$rootScope","$state","$stateParams","helpService","toaster","modalUtil","confirmUtil","promiseTracker","Upload",function(a,b,c,d,e,f,g,h,i,j){function k(b){if(b.Success)a.bugTicket.Id||(a.bugTicket.AddedBy=b.Data.AddedBy,a.bugTicket.AddedByAgent=b.Data.AddedByAgent),a.bugTicket.Id=b.Data.Id,f.pop("success","Success!","Successfully saved.");else{var c="";b.Messages&&(a.forms.form.submitted=!0,a.serverMessages=new ServerMessages(b.Messages),$.each(b.Messages,function(b,d){d.Field&&a.forms.form[d.Field].$setValidity("server",!1),c+=d.Message+"<br />"})),f.pop("error","Error!",c,null,"trustedHtml")}}function l(b){if(b.Success)a.bugTicket.Comments.push(b.Data);else{var c="";b.Messages&&(a.forms.newComment.submitted=!0,a.serverMessages=new ServerMessages(b.Messages),$.each(b.Messages,function(b,d){d.Field&&a.forms.newComment[d.Field].$setValidity("server",!1),c+=d.Message+"<br />"})),f.pop("error","Error!",c,null,"trustedHtml")}}function m(b){if(b.Success){var c=null;$.each(a.bugTicket.Comments,function(a,d){return d.Id==b.Data.Id?(c=a,!1):void 0}),null!=c&&a.bugTicket.Comments.splice(c,1,b.Data)}else{var d="";b.Messages&&(a.forms.existComment.submitted=!0,a.serverMessages=new ServerMessages(b.Messages),$.each(b.Messages,function(b,c){c.Field&&a.forms.existComment[c.Field].$setValidity("server",!1),d+=c.Message+"<br />"})),f.pop("error","Error!",d,null,"trustedHtml")}}function n(a){f.pop("error","Error!","Server error occured")}function o(){a.id=d.id?d.id:0,a.forms={},a.bugTicket={},a.newBugTicketComment={},a.logTicketCommentFileRequest=[],a.logTicketFileRequest={},p()}function p(){e.getBugTicket(a.id,a.refreshTracker).success(function(b){b.Success?(a.bugTicket=b.Data,q()):n(b)}).error(function(a){n(a)})}function q(){e.getBugTicketComment(0,a.refreshTracker).success(function(b){b.Success?a.newBugTicketComment=b.Data:n(b)}).error(function(a){n(a)})}a.refreshTracker=i("get"),a.editTracker=i("edit"),a.save=function(){$.each(a.forms.form,function(a,b){b&&b.$name==a&&b.$setValidity("server",!0)}),a.forms.form.$valid?e.updateBugTicket(a.bugTicket,a.refreshTracker).success(function(a){k(a)}).error(function(a){n(a)}):a.forms.form.submitted=!0},a.addComment=function(){a.forms.newComment.$valid?(a.newBugTicketComment.IdBugTicket=a.bugTicket.Id,e.updateBugTicketComment(a.newBugTicketComment,a.refreshTracker).success(function(b){l(b),q(),a.forms.newComment.submitted=!1}).error(function(a){n(a)})):a.forms.newComment.submitted=!0},a.startUpdateComment=function(b){$.each(a.bugTicket.Comments,function(a,c){c.IsEdit=c==b,c.IsEdit&&(c.EditComment=c.Comment)})},a.cancelUpdateComment=function(b){$.each(a.bugTicket.Comments,function(a,b){b.IsEdit=!1,b.EditComment=null})},a.updateComment=function(b){if(a.forms.existComment.$valid){var c=angular.copy(b);c.Comment=c.EditComment,e.updateBugTicketComment(c,a.refreshTracker).success(function(a){m(a)}).error(function(a){n(a)})}else a.forms.existComment.submitted=!0},a.deleteComment=function(b){h.confirm(function(){e.deleteBugTicketComment(b.Id,a.refreshTracker).success(function(c){var d=null;$.each(a.bugTicket.Comments,function(a,c){return c.Id==b.Id?(d=a,!1):void 0}),null!=d&&a.bugTicket.Comments.splice(d,1)}).error(function(a){n(a)})},"Are you sure you want to delete this comment?")},a.upload=function(b,c){c&&void 0==a.logTicketCommentFileRequest[c.Id]&&(a.logTicketCommentFileRequest[c.Id]={});var d=c?a.logTicketCommentFileRequest[c.Id]:a.logTicketFileRequest;if(d.type="upload",d.progress=0,d.state="progress",b&&b.length>0){d.name=b[0].FileName;var e={};c?(e.publicId=c.PublicId,e.bugTicketCommentId=c.Id):(e.publicId=a.bugTicket.PublicId,e.bugTicketId=a.bugTicket.Id),a.uploading=!0,j.upload({url:"/api/help/UploadFile",data:e,file:b[0]}).progress(function(a){var b=parseInt(100*a.loaded/a.total);d.progress=b,console.log("progress: "+b+"% "+a.config.file.name)}).success(function(e,g,h,i){if(e.Success){d.progress=100,d.state="done";var j=e.Data;c?c.Files.push(j):a.bugTicket.Files.push(j),console.log("file "+i.file.name+"uploaded. Response: "+e)}else d.progress=100,d.state="error",f.pop("error","Error!","Can't upload file");b=[],d.state="",a.uploading=!1}).error(function(b,c,e,f){a.uploading=!1,d.progress=100,d.state="error",n(b)})}},a.deleteFile=function(b,c,d){h.confirm(function(){var f;f=d?e.deleteBugTicketCommentFile(d.PublicId,c.FileName,c.Id,a.refreshTracker):e.deleteBugTicketFile(a.bugTicket.PublicId,c.FileName,c.Id,a.refreshTracker),f.success(function(c){c.Success?d?d.Files.splice(b,1):a.bugTicket.Files.splice(b,1):n(c)}).error(function(a){n(a)})},"Are you sure you want to delete this file?")},o()}]),angular.module("app.modules.help",["app.modules.help.controllers.helpTicketsController","app.modules.help.controllers.helpTicketDetailController","app.modules.help.controllers.bugTicketsController","app.modules.help.controllers.bugTicketDetailController"]).config(["$stateProvider","$urlRouterProvider",function(a,b){a.state("index.oneCol.manageHelpTickets",{url:"/help/tickets",templateUrl:"app/modules/help/partials/helpTicketsList.html",controller:"helpTicketsController"}).state("index.oneCol.helpTicketDetail",{url:"/help/tickets/{id:int}",templateUrl:"app/modules/help/partials/helpTicketDetail.html",controller:"helpTicketDetailController"}).state("index.oneCol.manageBugTickets",{url:"/help/bugs/tickets",templateUrl:"app/modules/help/partials/bugTicketsList.html",controller:"bugTicketsController"}).state("index.oneCol.addNewBugTicket",{url:"/help/bugs/tickets/add",templateUrl:"app/modules/help/partials/bugTicketDetail.html",controller:"bugTicketDetailController"}).state("index.oneCol.bugTicketDetail",{url:"/help/bugs/tickets/{id:int}",templateUrl:"app/modules/help/partials/bugTicketDetail.html",controller:"bugTicketDetailController"})}]),angular.module("app.modules.misc.controllers.vitalGreenController",[]).controller("vitalGreenController",["$scope","$rootScope","$state","vitalGreenService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h,i){function j(a){e.pop("error","Error!","Server error occured")}function k(){d.getVitalGreenReport(a.filter,a.refreshTracker).success(function(b){b.Success?(a.report=b.Data,a.filterChanged()):j(b)}).error(function(a){j(a)})}function l(){var b=new Date;a.years=[];for(var c=b.getFullYear()-15;c<=b.getFullYear();)a.years.push({Key:c,Text:c}),c++;a.forms={},a.report={};var b=new Date;a.filter={Year:b.getFullYear(),Month:b.getMonth()+1},a.exportUrl=null,k()}a.refreshTracker=h("refresh"),a.deleteTracker=h("delete"),a.filterReport=function(){k()},a.filterChanged=function(){a.report.exportUrl=d.getVitalGreenReportFileUrl(a.filter,b.buildNumber)},l()}]),angular.module("app.modules.misc.controllers.catalogRequestsController",[]).controller("catalogRequestsController",["$scope","$rootScope","$state","settingService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h,i){function j(a){e.pop("error","Error!","Server error occured")}function k(){d.getCatalogRequests(a.refreshTracker).success(function(b){b.Success?a.items=b.Data:j(b)}).error(function(a){j(a)})}function l(){a.forms={},a.options={},a.options.exportUrl=d.getCatalogRequestsReportFileUrl(b.buildNumber),k()}a.refreshTracker=h("refresh"),a.deleteTracker=h("delete"),a.clear=function(){g.confirm(function(){d.deleteCatalogRequests(a.refreshTracker).success(function(a){a.Success?k():j(a)}).error(function(a){j(a)})},"Are you sure you want to delete catalog requests?")},l()}]),angular.module("app.modules.misc.controllers.redirectsController",[]).controller("redirectsController",["$scope","$rootScope","$state","redirectService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h,i){function j(a){var b="";a.Messages&&$.each(a.Messages,function(a,c){b+=c.Message+"<br />"}),e.pop("error","Error!",b,null,"trustedHtml")}function k(){d.getRedirects(a.filter,a.refreshTracker).success(function(b){b.Success?(a.items=b.Data.Items,a.totalItems=b.Data.Count):j(b)}).error(function(a){j(a)})}function l(){a.filter={Paging:{PageIndex:1,PageItemCount:100},Sorting:i.resolve(k,"From","Asc")},k()}a.refreshTracker=h("refresh"),a.deleteTracker=h("delete"),a.pageChanged=function(){k()},a.open=function(b){f.open("app/modules/misc/partials/addEditRedirectPopup.html","addEditRedirectController",{id:b,thenCallback:function(){a.filter.Paging.PageIndex=1,k()}},{size:"sm"})},a["delete"]=function(b){g.confirm(function(){d.deleteRedirect(b,a.deleteTracker).success(function(a){a.Success?(e.pop("success","Success!","Successfully deleted."),k()):j(a)}).error(function(a){j(a)})},"Are you sure you want to delete this redirect?")},l()}]),angular.module("app.modules.misc.controllers.addEditRedirectController",[]).controller("addEditRedirectController",["$scope","$uibModalInstance","data","redirectService","toaster","promiseTracker","$rootScope",function(a,b,c,d,e,f,g){function h(d){if(d.Success)e.pop("success","Success!","Successfully saved."),c.thenCallback(),b.close();else{var f="";d.Messages&&(a.forms.submitted=!0,a.serverMessages=new ServerMessages(d.Messages),$.each(d.Messages,function(b,c){c.Field&&a.forms.form[c.Field].$setValidity("server",!1),f+=c.Message+"<br />"})),e.pop("error","Error!",f,null,"trustedHtml")}}function i(a){e.pop("error","Error!","Server error occured")}function j(){a.forms={},a.redirect={},c.id&&d.getRedirect(c.id,a.saveTracker).success(function(b){b.Success&&(a.redirect=b.Data)}).error(function(a){i(a)})}a.saveTracker=f("save"),a.save=function(){$.each(a.forms.form,function(a,b){b&&b.$name==a&&b.$setValidity("server",!0)}),a.forms.form.$valid?d.updateRedirect(a.redirect,a.saveTracker).success(function(a){h(a)}).error(function(a){i(a)}):a.forms.submitted=!0},a.cancel=function(){b.close()},j()}]),angular.module("app.modules.misc",["app.modules.misc.controllers.vitalGreenController","app.modules.misc.controllers.catalogRequestsController","app.modules.misc.controllers.redirectsController","app.modules.misc.controllers.addEditRedirectController"]).config(["$stateProvider","$urlRouterProvider",function(a,b){a.state("index.oneCol.vitalGreen",{url:"/tools/vital-green",templateUrl:"app/modules/misc/partials/vitalGreenReport.html",controller:"vitalGreenController"}).state("index.oneCol.catalogRequests",{url:"/report/catalog-requests",templateUrl:"app/modules/misc/partials/catalogRequests.html",controller:"catalogRequestsController"}).state("index.oneCol.manageRedirect",{url:"/tools/redirect",templateUrl:"app/modules/misc/partials/redirectsList.html",controller:"redirectsController"})}]),angular.module("app.modules.healthwise.controllers.healthwisePeriodsController",[]).controller("healthwisePeriodsController",["$scope","$rootScope","$state","healthwiseService","toaster","modalUtil","confirmUtil","promiseTracker","gridSorterUtil",function(a,b,c,d,e,f,g,h,i){function j(a){e.pop("error","Error!","Server error occured")}function k(){var b=angular.copy(a.filter,b);b.From&&(b.From=b.From.toServerDateTime()),b.To&&(b.To=b.To.toServerDateTime()),d.getHealthwiseCustomersWithPeriods(b,a.refreshTracker).success(function(b){b.Success?(a.dbItems=b.Data,a.totalItems=a.dbItems.length,m()):j(b)}).error(function(a){j(a)})}function l(){a.forms={};var b=new Date;b.setHours(0,0,0,0),a.filter={To:b.shiftDate("+1y"),From:b.shiftDate("-1y"),NotBilledOnly:!1,Paging:{PageIndex:1,PageItemCount:100}},k()}a.refreshTracker=h("refresh"),a.filterItems=function(){a.filter.PageIndex=1,k()},a.pageChanged=function(){m()};var m=function(){for(var b=[],c=(a.filter.Paging.PageIndex-1)*a.filter.Paging.PageItemCount,d=c+a.filter.Paging.PageItemCount>a.dbItems.length?a.dbItems.length:c+a.filter.Paging.PageItemCount,e=c;d>e;e++)b.push(a.dbItems[e]);a.items=b};a.flagOrder=function(){f.open("app/modules/healthwise/partials/markOrderPopup.html","markOrderController",{thenCallback:function(b){a.filterItems()}},{size:"xs"})},a.flagCustomer=function(){f.open("app/modules/healthwise/partials/markCustomerOrdersPopup.html","markCustomerOrdersController",{thenCallback:function(b){a.filterItems()}},{size:"xs"})},a.deletePeriod=function(b){g.confirm(function(){d.deleteHealthwisePeriod(b,a.refreshTracker).success(function(b){b.Success?a.filterItems():b.Messages?($.each(b.Messages,function(a,b){messages+=b.Message+"<br/>"}),e.pop("error","Error!",messages,null,"trustedHtml")):j(b)}).error(function(a){j(a)})},"Are you sure you want to delete this period?")},a.openPeriod=function(a){c.go("index.oneCol.healthwiseDetail",{id:a})},l()}]),angular.module("app.modules.healthwise.controllers.markOrderController",[]).controller("markOrderController",["$scope","$uibModalInstance","data","orderService","healthwiseService","toaster","promiseTracker","$rootScope","confirmUtil",function(a,b,c,d,e,f,g,h,i){function j(a){if(a.Success)a.Data?(f.pop("success","Success!","Successfully flagged"),b.close(),c.thenCallback()):f.pop("error","Error!","Invalid Order #");else{var d="";a.Messages&&$.each(a.Messages,function(a,b){d+=b.Message+"<br />"}),f.pop("error","Error!",d,null,"trustedHtml")}}function k(a){f.pop("error","Error!","Server error occured")}function l(){a.options={},a.forms={},a.filter={Id:"",Paging:{PageIndex:1,PageItemCount:20}}}a.refreshTracker=g("refresh"),a.flag=function(){if(a.forms.form.$valid){var b=parseInt(a.options.IdOrder);NaN==b&&(b=0),i.confirm(function(){e.markOrder(b,a.refreshTracker).success(function(a){j(a)}).error(function(a){k(a)})},"Are you sure you want to flag the given order?")}else a.forms.form.submitted=!0},a.getOrders=function(b){return b?(a.filter.Id=b,d.getShortOrders(a.filter).then(function(a){return a.data.Data.Items.map(function(a){return a})})):void 0},a.cancel=function(){b.close()},l()}]),angular.module("app.modules.healthwise.controllers.markCustomerOrdersController",[]).controller("markCustomerOrdersController",["$scope","$uibModalInstance","data","customerService","healthwiseService","toaster","promiseTracker","$rootScope","confirmUtil",function(a,b,c,d,e,f,g,h,i){function j(a){if(a.Success)a.Data?(f.pop("success","Success!","Successfully flagged"),b.close(),c.thenCallback()):f.pop("error","Error!","Invalid Customer #");else{var d="";a.Messages&&$.each(a.Messages,function(a,b){d+=b.Message+"<br />"}),f.pop("error","Error!",d,null,"trustedHtml")}}function k(a){f.pop("error","Error!","Server error occured")}function l(){a.options={},a.forms={},a.filter={IdContains:"",Paging:{PageIndex:1,PageItemCount:20}}}a.refreshTracker=g("refresh"),a.flag=function(){if(a.forms.form.$valid){var b=parseInt(a.options.IdCustomer);NaN==b&&(b=0),i.confirm(function(){e.markCustomerOrders(b,a.refreshTracker).success(function(a){j(a)}).error(function(a){k(a)})},"Are you sure you want to flag orders on the given customer?")}else a.forms.form.submitted=!0},a.getCustomers=function(b){return b?(a.filter.IdContains=b,d.getCustomers(a.filter).then(function(a){return a.data.Data.Items.map(function(a){return a})})):void 0},a.cancel=function(){b.close()},l()}]),angular.module("app.modules.healthwise.controllers.healthwiseDetailController",[]).controller("healthwiseDetailController",["$scope","$rootScope","$state","$stateParams","healthwiseService","toaster","modalUtil","confirmUtil","promiseTracker",function(a,b,c,d,e,f,g,h,i){function j(b){if(b.Success)f.pop("success","Success!","Successfully paid."),o();else{var c="";b.Messages&&(a.forms.form.submitted=!0,a.serverMessages=new ServerMessages(b.Messages),$.each(b.Messages,function(b,d){d.Field&&a.forms.form[d.Field].$setValidity("server",!1),c+=d.Message+"<br />"})),f.pop("error","Error!",c,null,"trustedHtml")}}function k(a){f.pop("error","Error!","Server error occured")}function l(){a.id=d.id,a.forms={},a.options={},a.payment={AllowPayment:!1},n()}function m(){e.getHealthwiseOrders(a.id,a.refreshTracker).success(function(b){b.Success?a.items=b.Data:k(b)}).error(function(a){k(a)})}function n(){e.getHealthwisePeriod(a.id,a.refreshTracker).success(function(b){if(b.Success){var c=b.Data;c&&(a.options.FirstName=c.FirstName,a.options.LastName=c.LastName,a.options.IdCustomer=c.Id,c.Periods&&1==c.Periods.length&&(c.Periods[0].AllowPayment&&(a.payment.Id=c.Periods[0].Id,a.payment.AllowPayment=!0,a.payment.Amount=c.Periods[0].AverageDiscountedSubtotal,a.payment.Date=Date.parseDateTime(c.Periods[0].LastOrderDate),a.payment.Date.setHours(0),a.payment.Date.setMinutes(0),a.payment.Date.setSeconds(0),a.payment.Date.setMilliseconds(0),a.payment.PayAsGC=!0),a.options.PaidAmount=c.Periods[0].PaidAmount,a.options.PaidDate=c.Periods[0].PaidDate,a.options.AllowMove=null==c.Periods[0].PaidDate)),m()}else k(b)}).error(function(a){k(a)})}a.refreshTracker=i("get"),a.editTracker=i("edit");var o=function(){a.payment={AllowPayment:!1},m(),n()};a.save=function(){if($.each(a.forms.form,function(a,b){b&&b.$name==a&&b.$setValidity("server",!0)}),a.forms.form.$valid){var b=angular.copy(a.payment);b.Date&&(b.Date=b.Date.toServerDateTime()),e.makeHealthwisePeriodPayment(b,a.editTracker).success(function(a){j(a)}).error(function(a){k(a)})}else a.forms.form.submitted=!0},a.openMovePopup=function(){var b=[];return $.each(a.items,function(a,c){c.IsSelected&&b.push(c.Id)}),0==b.length?void f.pop("error","Error!","At least one order should be selected"):void g.open("app/modules/healthwise/partials/moveToPeriodPopup.html","moveToPeriodController",{idCustomer:a.options.IdCustomer,idPeriodFrom:a.id,ids:b,thenCallback:function(a){o()}})},a.allSelectCall=function(){$.each(a.items,function(b,c){c.IsSelected=a.options.allSelected})},a.openOrder=function(a){c.go("index.oneCol.orderDetail",{id:a})},a.itemSelectChanged=function(b){!b.IsSelected&&a.options.allSelected&&(a.options.allSelected=!1)},l()}]),angular.module("app.modules.healthwise.controllers.moveToPeriodController",[]).controller("moveToPeriodController",["$scope","$uibModalInstance","data","healthwiseService","toaster","promiseTracker","$rootScope","confirmUtil",function(a,b,c,d,e,f,g,h){
function i(a){if(a.Success)e.pop("success","Success!","Successfully moved"),b.close(),c.thenCallback();else{var d="";a.Messages&&$.each(a.Messages,function(a,b){d+=b.Message+"<br />"}),e.pop("error","Error!",d,null,"trustedHtml")}}function j(a){e.pop("error","Error!","Server error occured")}function k(){a.idCustomer=c.idCustomer,a.options={},a.forms={},a.filter={IdPeriod:c.idPeriodFrom,Ids:c.ids},a.model={IdPeriod:null,Ids:c.ids},l()}a.refreshTracker=f("refresh");var l=function(){d.getHealthwisePeriodsForMovement(a.filter,a.refreshTracker).success(function(b){b.Success?a.items=b.Data:j(b)}).error(function(a){j(a)})};a.move=function(b){h.confirm(function(){a.model.IdPeriod=b,d.moveHealthwiseOrders(a.model,a.refreshTracker).success(function(a){a.Success?i(a):j(a)}).error(function(a){j(a)})},"Are you sure you want to move orders to the given period?")},a.addPeriod=function(){d.addPeriod(a.idCustomer,a.refreshTracker).success(function(a){a.Success?l():j(a)}).error(function(a){j(a)})},a.cancel=function(){b.close()},k()}]),angular.module("app.modules.healthwise",["app.modules.healthwise.controllers.healthwisePeriodsController","app.modules.healthwise.controllers.markOrderController","app.modules.healthwise.controllers.markCustomerOrdersController","app.modules.healthwise.controllers.healthwiseDetailController","app.modules.healthwise.controllers.moveToPeriodController"]).config(["$stateProvider","$urlRouterProvider",function(a,b){a.state("index.oneCol.healthwisePeriods",{url:"/report/healthwise-customers",templateUrl:"app/modules/healthwise/partials/healthwisePeriodsList.html",controller:"healthwisePeriodsController"}).state("index.oneCol.healthwiseDetail",{url:"/report/healthwise/{id:int}",templateUrl:"app/modules/healthwise/partials/healthwiseDetail.html",controller:"healthwiseDetailController"})}]);