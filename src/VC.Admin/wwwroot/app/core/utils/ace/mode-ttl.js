ace.define("ace/mode/folding/ttl",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],function(e,t,n){"use strict";var r=e("../../lib/oop"),i=e("../../range").Range,s=e("./fold_mode").FoldMode,o=t.FoldMode=function(){s.call(this)};r.inherits(o,s),function(){this.foldingStartMarker=/(\{\{|\<\%)((?:[^\}]|\}[^\}])|(?:[^\%]|\%[^\>]))*$/,this.foldingStopMarker=/^((?:[^\{]|\{[^\{])|(?:[^\<]|\<[^\%]))*/,this._getFoldWidgetBase=this.getFoldWidget,this.getFoldWidget=function(e,t,n){var r=e.getLine(n),i=r.match(this.foldingStartMarker);return i&&i[1]&&"start",i=r.match(this.foldingStopMarker),i&&i[1]&&"end",""},this.getFoldWidgetRange=function(e,t,n,r){var i=e.getLine(n),s=i.match(this.foldingStartMarker);if(s){var o=s.index;return s[1]?this.openingBracketBlock(e,s[1],n,o):""}var s=i.match(this.foldingStopMarker);if(s){var o=s.index+s[0].length;return s[1]?this.closingBracketBlock(e,s[1],n,o):""}},this.getSectionRange=function(e,t){var n=e.getLine(t),r=n.search(/\S/),s=t,o=n.length;t+=1;var u=t,a=e.getLength();while(++t<a){n=e.getLine(t);var f=n.search(/\S/);if(f===-1)continue;if(r>f)break;var l=this.getFoldWidgetRange(e,"all",t);if(l){if(l.start.row<=s)break;if(l.isMultiLine())t=l.end.row;else if(r==f)break}u=t}return new i(s,o,u,e.getLine(u).length)}}.call(o.prototype)}),ace.define("ace/mode/ttl_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(e,t,n){"use strict";var r=e("../lib/oop"),i=e("./text_highlight_rules").TextHighlightRules,s=function(e){this.$rules={start:[{token:"comment.block",regex:"\\@\\*",push:"comment"},{token:["keyword.operator","paren.lparen"],regex:"\\<\\%",push:"def"},{token:["keyword.operator","paren.lparen"],regex:"\\{\\{",push:"start"},{token:["keyword.operator","paren.rparen"],regex:"\\}\\}",next:"pop"},{token:["keyword","paren.lparen"],regex:"\\@\\{",push:"raw"},{token:"keyword",regex:"\\@",next:"out"}],out:[{token:"comment.block",regex:"\\@\\*",push:"comment"},{token:["keyword.operator","paren.lparen"],regex:"\\{\\{",push:"start"},{token:["keyword.operator","paren.rparen"],regex:"\\}\\}",next:"pop"},{token:"variable.language",regex:"[a-zA-Z_]+[a-zA-Z_0-9]*",next:"out"},{token:"punctuation.operator",regex:":",next:"out"},{token:"paren.lparen",regex:"\\(",push:"out"},{token:"paren.rparen",regex:"\\)",next:"pop"},{token:"punctuation.operator",regex:";",next:"start"},{token:["keyword","paren.lparen"],regex:"\\@\\{",next:"raw"},{token:["keyword.operator","paren.lparen"],regex:"\\<\\%",push:"def"},{token:"keyword",regex:"\\@",next:"out"},{token:"text",regex:"\\s+",next:"out"},{token:"text",regex:".",next:"start"}],raw:[{token:["keyword","paren.rparen"],regex:"\\}\\@",next:"pop"},{token:"string.unquoted",regex:"(?:[^\\}]|\\}[^@])*",next:"raw"}],def:[{token:"comment.block",regex:"\\@\\*",push:"comment"},{token:["keyword.operator","paren.rparen"],regex:"\\%\\>",next:"pop"},{token:["punctuation.operator","paren.lparen"],regex:"\\<",next:"def_name"},{token:["keyword.operator","paren.rparen"],regex:"\\{\\{",push:"start"},{token:"keyword.operator",regex:"::",next:"def_type"},{token:"text",regex:"\\s+",next:"def"}],def_type:[{token:"comment.block",regex:"\\@\\*",push:"comment"},{token:"storage.type",regex:"[a-zA-Z_]+[a-zA-Z_0-9\\.\\+]*",next:"def"}],def_name:[{token:"comment.block",regex:"\\@\\*",push:"comment"},{token:"support.function",regex:"[a-zA-Z_]+[a-zA-Z_0-9]*",next:"def_name"},{token:["punctuation.operator","paren.rparen"],regex:"\\>",next:"def"},{token:"keyword.operator",regex:":",next:"def_name"}],comment:[{token:"comment.block",regex:".*?\\*\\@",next:"pop"},{token:"comment.block",regex:"[^\\*]|\\*[^\\@]",next:"comment"}]},this.normalizeRules()};r.inherits(s,i),t.TtlHighlightRules=s}),ace.define("ace/mode/ttl_brace_outdent",["require","exports","module","ace/range"],function(e,t,n){"use strict";var r=e("../range").Range,i=function(){};(function(){this.checkOutdent=function(e,t){return/^\s+$/.test(e)?/^(\s*\}\})|(\s*\%\>)/.test(t):!1},this.autoOutdent=function(e,t){var n=e.getLine(t),i=n.match(/^(\s*\}\})|(\s*\%\>)/);if(!i)return 0;var s=i[1].length,o=e.findMatchingBracket({row:t,column:s});if(!o||o.row==t)return 0;var u=this.$getIndent(e.getLine(o.row));e.replace(new r(t,0,t,s-1),u)},this.$getIndent=function(e){return e.match(/^\s*/)[0]}}).call(i.prototype),t.TTLMatchingBraceOutdent=i}),ace.define("ace/mode/behaviour/ttl",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(e,t,n){"use strict";var r=e("../../lib/oop"),i=e("../behaviour").Behaviour,s=e("../../token_iterator").TokenIterator,o=e("../../lib/lang"),u=["text","paren.rparen","punctuation.operator"],a=["text","paren.rparen","punctuation.operator","comment"],f,l={},c=function(e){var t=-1;e.multiSelect&&(t=e.selection.index,l.rangeCount!=e.multiSelect.rangeCount&&(l={rangeCount:e.multiSelect.rangeCount}));if(l[t])return f=l[t];f=l[t]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}},h=function(e,t,n,r){var i=e.end.row-e.start.row;return{text:n+t+r,selection:[0,e.start.column+1,i,e.end.column+(i?0:1)]}},p=function(){this.add("braces","insertion",function(e,t,n,r,i){var s=n.getCursorPosition(),u=r.doc.getLine(s.row);if(i=="{{"){c(n);var a=n.getSelectionRange(),l=r.doc.getTextRange(a);if(l!==""&&l!=="{{"&&n.getWrapBehavioursEnabled())return h(a,l,"{{","}}");if(p.isSaneInsertion(n,r))return/(\%\>|\}\}|\))/.test(u[s.column])||n.inMultiSelectMode?(p.recordAutoInsert(n,r,"}}"),{text:"{{}}",selection:[2,1]}):(p.recordMaybeInsert(n,r,"{{"),{text:"{{",selection:[2,1]})}else if(i=="}}"){c(n);var d=u.substring(s.column,s.column+1);if(d=="}}"){var v=r.$findOpeningBracket("}}",{column:s.column+1,row:s.row});if(v!==null&&p.isAutoInsertedClosing(s,u,i))return p.popAutoInsertedClosing(),{text:"",selection:[2,1]}}}else{if(i=="\n"||i=="\r\n"){c(n);var m="";p.isMaybeInsertedClosing(s,u)&&(m=o.stringRepeat("}}",f.maybeInsertedBrackets),p.clearMaybeInsertedClosing());var d=u.substring(s.column,s.column+1);if(d==="}}"){var g=r.findMatchingBracket({row:s.row,column:s.column+1},"}}");if(!g)return null;var y=this.$getIndent(r.getLine(g.row))}else{if(!m){p.clearMaybeInsertedClosing();return}var y=this.$getIndent(u)}var b=y+r.getTabString();return{text:"\n"+b+"\n"+y+m,selection:[1,b.length,1,b.length]}}p.clearMaybeInsertedClosing()}}),this.add("braces","deletion",function(e,t,n,r,i){var s=r.doc.getTextRange(i);if(!i.isMultiLine()&&s=="{{"){c(n);var o=r.doc.getLine(i.start.row),u=o.substring(i.end.column,i.end.column+1);if(u=="}}")return i.end.column++,i;f.maybeInsertedBrackets--}}),this.add("parens","insertion",function(e,t,n,r,i){if(i=="("){c(n);var s=n.getSelectionRange(),o=r.doc.getTextRange(s);if(o!==""&&n.getWrapBehavioursEnabled())return h(s,o,"(",")");if(p.isSaneInsertion(n,r))return p.recordAutoInsert(n,r,")"),{text:"()",selection:[1,1]}}else if(i==")"){c(n);var u=n.getCursorPosition(),a=r.doc.getLine(u.row),f=a.substring(u.column,u.column+1);if(f==")"){var l=r.$findOpeningBracket(")",{column:u.column+1,row:u.row});if(l!==null&&p.isAutoInsertedClosing(u,a,i))return p.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("parens","deletion",function(e,t,n,r,i){var s=r.doc.getTextRange(i);if(!i.isMultiLine()&&s=="("){c(n);var o=r.doc.getLine(i.start.row),u=o.substring(i.start.column+1,i.start.column+2);if(u==")")return i.end.column++,i}}),this.add("brackets","insertion",function(e,t,n,r,i){if(i=="<%"){c(n);var s=n.getSelectionRange(),o=r.doc.getTextRange(s);if(o!==""&&n.getWrapBehavioursEnabled())return h(s,o,"<%","%>");if(p.isSaneInsertion(n,r))return p.recordAutoInsert(n,r,"%>"),{text:"<%%>",selection:[1,1]}}else if(i=="%>"){c(n);var u=n.getCursorPosition(),a=r.doc.getLine(u.row),f=a.substring(u.column,u.column+1);if(f=="%>"){var l=r.$findOpeningBracket("%>",{column:u.column+1,row:u.row});if(l!==null&&p.isAutoInsertedClosing(u,a,i))return p.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("brackets","deletion",function(e,t,n,r,i){var s=r.doc.getTextRange(i);if(!i.isMultiLine()&&s=="<%"){c(n);var o=r.doc.getLine(i.start.row),u=o.substring(i.start.column+1,i.start.column+2);if(u=="%>")return i.end.column++,i}})};p.isSaneInsertion=function(e,t){var n=e.getCursorPosition(),r=new s(t,n.row,n.column);if(!this.$matchTokenType(r.getCurrentToken()||"text",u)){var i=new s(t,n.row,n.column+1);if(!this.$matchTokenType(i.getCurrentToken()||"text",u))return!1}return r.stepForward(),r.getCurrentTokenRow()!==n.row||this.$matchTokenType(r.getCurrentToken()||"text",a)},p.$matchTokenType=function(e,t){return t.indexOf(e.type||e)>-1},p.recordAutoInsert=function(e,t,n){var r=e.getCursorPosition(),i=t.doc.getLine(r.row);this.isAutoInsertedClosing(r,i,f.autoInsertedLineEnd[0])||(f.autoInsertedBrackets=0),f.autoInsertedRow=r.row,f.autoInsertedLineEnd=n+i.substr(r.column),f.autoInsertedBrackets++},p.recordMaybeInsert=function(e,t,n){var r=e.getCursorPosition(),i=t.doc.getLine(r.row);this.isMaybeInsertedClosing(r,i)||(f.maybeInsertedBrackets=0),f.maybeInsertedRow=r.row,f.maybeInsertedLineStart=i.substr(0,r.column)+n,f.maybeInsertedLineEnd=i.substr(r.column),f.maybeInsertedBrackets++},p.isAutoInsertedClosing=function(e,t,n){return f.autoInsertedBrackets>0&&e.row===f.autoInsertedRow&&n===f.autoInsertedLineEnd[0]&&t.substr(e.column)===f.autoInsertedLineEnd},p.isMaybeInsertedClosing=function(e,t){return f.maybeInsertedBrackets>0&&e.row===f.maybeInsertedRow&&t.substr(e.column)===f.maybeInsertedLineEnd&&t.substr(0,e.column)==f.maybeInsertedLineStart},p.popAutoInsertedClosing=function(){f.autoInsertedLineEnd=f.autoInsertedLineEnd.substr(1),f.autoInsertedBrackets--},p.clearMaybeInsertedClosing=function(){f&&(f.maybeInsertedBrackets=0,f.maybeInsertedRow=-1)},r.inherits(p,i),t.TTLstyleBehaviour=p}),ace.define("ace/mode/ttl_completions",["require","exports","module","ace/token_iterator"],function(e,t,n){"use strict";function s(e,t){return e.type==t}var r=e("../token_iterator").TokenIterator,i=["date","time","html","guid","int","list","model","money","out","param","partial","string","if","else","import","using"],o=function(){};(function(){this.getCompletions=function(e,t,n,r){var i=t.getTokenAt(n.row,n.column);return i?s(i,"out-start")?this.getExtensionCompletions(e,t,n,r):s(i,"def_override")?this.getExtensionOverrideCompletions(e,t,n,r):[]:[]},this.getExtensionCompletions=function(e,t,n,r){return i.map(function(e){return{caption:e,snippet:e+"($0)",meta:"variable",score:Number.MAX_VALUE}})},this.getExtensionOverrideCompletions=function(e,t,n,r){return i.map(function(e){return{caption:e,snippet:e,meta:"variable",score:Number.MAX_VALUE}})}}).call(o.prototype),t.TtlCompletions=o}),ace.define("ace/mode/ttl",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/folding/ttl","ace/mode/ttl_highlight_rules","ace/mode/ttl_brace_outdent","ace/mode/behaviour/ttl","ace/mode/ttl_completions","ace/mode/folding/ttl"],function(e,t,n){"use strict";var r=e("../lib/oop"),i=e("./text").Mode,s=e("./folding/ttl").FoldMode,o=e("./ttl_highlight_rules").TtlHighlightRules,u=e("./ttl_brace_outdent").TTLMatchingBraceOutdent,a=e("./behaviour/ttl").TTLstyleBehaviour,f=e("./ttl_completions").TtlCompletions,l=e("./folding/ttl").FoldMode,c=function(){this.HighlightRules=o,this.$completer=new f,this.$outdent=new u,this.$behaviour=new a,this.foldingRules=new s};r.inherits(c,i),function(){this.blockComment={start:"@*",end:"*@"},this.getNextLineIndent=function(e,t,n){var r=this.$getIndent(t),i=this.getTokenizer().getLineTokens(t,e),s=i.tokens,o=i.state;if(s.length&&s[s.length-1].type=="comment")return r;var u=t.match(/^.*?(\<\%|\{\{)\s*$/);return u&&(r+=n),r},this.checkOutdent=function(e,t,n){return this.$outdent.checkOutdent(t,n)},this.autoOutdent=function(e,t,n){this.$outdent.autoOutdent(t,n)},this.$id="ace/mode/ttl"}.call(c.prototype),t.Mode=c})